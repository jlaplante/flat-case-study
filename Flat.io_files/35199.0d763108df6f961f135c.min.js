
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="038b43a7-1bc7-5c25-8e11-bd3cbea396f3")}catch(e){}}();
(()=>{/*! Copyright (c) 2025 Tutteo Ltd. */(self.webpackChunk_flat_flat=self.webpackChunk_flat_flat||[]).push([[35199],{3852:(l,n,t)=>{var e=t(314445);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("7f32a34a",e,!0,{})},9785:(l,n,t)=>{var e=t(593636);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("6d01e30a",e,!0,{})},12186:(l,n,t)=>{var e=t(738307);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("31acf95e",e,!0,{})},13626:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>te});var e=t(361744),o=t(538065),r=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(U,b,z)=>b in U?r(U,b,{enumerable:!0,configurable:!0,writable:!0,value:z}):U[b]=z,m=(U,b)=>{for(var z in b||(b={}))s.call(b,z)&&u(U,z,b[z]);if(i)for(var z of i(b))d.call(b,z)&&u(U,z,b[z]);return U};function v(U,b,z,ce,se,x){const T=(0,e.g2)("power-badge-icon"),ne=(0,e.g2)("DropdownTrigger"),p=(0,e.g2)("ToolbarComplexDdnInner"),le=(0,e.gN)("dompurify-html"),A=(0,e.gN)("tooltip");return(0,e.uX)(),(0,e.Wv)(p,{ref:"ddn",onOpenChange:x.updateOpenStatus,title:z.mobileText,"tablet-ddn":z.tabletDdn,"always-ddn":z.alwaysDdn},{trigger:(0,e.k6)(()=>[(0,e.bo)(((0,e.uX)(),(0,e.Wv)(ne,{"aria-label":z.mobileText,class:(0,o.C4)(x.triggerClasses),disabled:x.disabled},{default:(0,e.k6)(()=>[ce.displayMobileEditor?((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.Lk)("div",{class:(0,o.C4)(U.tbButtonStyle.iconFlex)},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[U.tbButtonStyle.i]:!0,[U.tbButtonStyle.bigIcon]:x.isBigIcon})},null,2),[[le,x.iconSvg,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(U.tbButtonStyle.t)},(0,o.v_)(z.mobileText),3)],2),z.showPowerOnly?((0,e.uX)(),(0,e.Wv)(T,{key:0,class:(0,o.C4)(U.powerStyle.toolbarPowerIcon)},null,8,["class"])):(0,e.Q3)("",!0)],64)):((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.Lk)("div",{class:(0,o.C4)(U.tbButtonStyle.iconFlex)},[(0,e.bo)((0,e.Lk)("div",{class:(0,o.C4)(U.tbButtonStyle.iconFlex)},null,2),[[le,x.iconSvg,"svg"]]),z.showPowerOnly?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(U.powerStyle.toolbarPowerBox),style:(0,o.Tr)(x.desktopPowerStyle)},[(0,e.bF)(T,{class:(0,o.C4)(U.powerStyle.toolbarPowerIcon)},null,8,["class"])],6)):(0,e.Q3)("",!0)],2),z.showCaret?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(["ddn-align bottom",m({[U.tbButtonStyle.caret]:!0},U.alignClasses)])},null,2)):(0,e.Q3)("",!0)],64))]),_:1},8,["aria-label","class","disabled"])),[[A,{text:x.tooltipText}]])]),default:(0,e.k6)(()=>[se.open?(0,e.RG)(U.$slots,"default",{key:0}):(0,e.Q3)("",!0)]),_:3},8,["onOpenChange","title","tablet-ddn","always-ddn"])}var _=t(27219),S=t(121648),N=t(909696),k=t(733268),O=t(797727),X=t(741522),L=t(505522),y=t(34943),j=t(896099),w=t(66682);const g={name:"ToolbarComplexDdn",width:38,props:{showCaret:Boolean,iconKey:{type:String,required:!0},mobileText:{type:String,required:!0},powerWidth:{type:Number,default:0},showPowerOnly:Boolean,action:{type:String,required:!0},ddnOpts:{type:Object,default(){return{}}},ddnClasses:{type:Object,default(){return{}}},iconMobClasses:{type:Object,default(){return{}}},tabletDdn:{type:Boolean,default:!1},alwaysDdn:{type:Boolean,default:!1},active:Boolean},setup(){const U=(0,N.q6)(),b=(0,S.W)();return{displayMobileEditor:(0,e.EW)(()=>U.displayMobileEditor),isEditionBlocked:(0,e.EW)(()=>b.isEditionBlocked)}},data(){return{open:!1}},components:{PowerBadgeIcon:O.default,ToolbarComplexDdnInner:y.default,DropdownTrigger:k.u},computed:{desktopPowerStyle:X.X,mobilePowerClass:X.m,triggerClasses(){const U={active:this.active,disabled:this.disabled,[this.tbButtonStyle.rootCommon]:!0};return this.displayMobileEditor?(U[this.tbButtonStyle.rootMobileDetailed]=!0,Object.assign(U,this.mobilePowerClass)):U[this.tbButtonStyle.rootDesktop]=!0,U},disabled(){return this.isEditionBlocked?!(_.actions[this.action]||{}).groups.includes("ro"):!1},tooltipText(){return this.disabled?this.$t("editor:action-disabled.editionBlocked"):this.mobileText},iconSvg(){return L.default[this.iconKey]},isBigIcon(){return(0,j.default)(this.iconKey)}},methods:{updateOpenStatus(U){this.open=U},onClose(){this.$refs.ddn.close()}},watch:{tooltipText(){(0,w.setupTooltip)(this)},open(){this.open?(0,w.destroyTooltip)(this):(0,w.setupTooltip)(this)}},mounted(){(0,w.setupTooltip)(this)}};var M=t(247477),E=t(303511),I=t(938793);const C={};C.powerStyle=M.default,C.tbButtonStyle=E.default;const te=(0,I.A)(g,[["render",v],["__cssModules",C]])},16072:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(243564);const i=38,s=(0,o.pM)({name:"TbTremolo",props:{scoreData:{type:Object,required:!0}},setup(d){const u=[{value:1,action:"addTremolo_1"},{value:2,action:"addTremolo_2"},{value:3,action:"addTremolo_3"},{value:4,action:"addTremolo_4"}],m=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,defaultActionIcon:"toggleTremolo",items:u,active:[m.tbTremolo]})}})},21493:(l,n,t)=>{"use strict";t.d(n,{A:()=>k});var e=t(361744),o=t(538065);const r=["onClick"];function i(O,X,L,y,j,w){const g=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(O.$style.ddnClefInner),"data-cy":"ddnClefInner"},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(j.CLEFS,M=>(0,e.bo)(((0,e.uX)(),(0,e.CE)("a",{key:M.icon,onClick:E=>w.exec(M)},null,8,r)),[[g,M.icon,"svg"]])),128))],2)}var s=t(8848),d=t(740094);const u={name:"DdnInnerClef",emits:["close"],props:{scoreData:{type:Object,required:!0}},data(){return{CLEFS:s.A}},methods:{exec(O){let X=`setClef${O.l}`;O.n&&(X+=O.n),O.o===1?X+="Above8":O.o===2?X+="Above15":O.o===-1?X+="Below8":O.o===-2&&(X+="Below15"),this.scoreData.scoreActions.executePublicAction(X),this.$emit("close")}},created(){s.A.forEach(O=>{O.icon=d.A[`keysel-${O.l.toLowerCase()}${O.n}${O.o||0}`]})}};var m=t(39035),v=t.n(m),_=t(938793);const S={};S.$style=v();const k=(0,_.A)(u,[["render",i],["__cssModules",S]])},34062:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_beP3I{display:flex;gap:8px;width:100%;align-items:center}
`,""]),s.locals={root:"root_beP3I"};const d=s},34943:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>j});var e=t(361744),o=t(538065),r=t(555381);const i={key:1};function s(w,g,M,E,I,C){const Z=(0,e.g2)("Dropdown"),te=(0,e.g2)("ContentDialog");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(w.$style.root)},[C.displayDdn?((0,e.uX)(),(0,e.Wv)(Z,{key:0,ref:"ddn",onOpenChange:C.updateOpenStatus,open:I.open,"arrow-position-center":!1,"overflow-root-viewport":!0,direction:C.ddnDirection},{trigger:(0,e.k6)(()=>[(0,e.RG)(w.$slots,"trigger")]),default:(0,e.k6)(()=>[(0,e.RG)(w.$slots,"default")]),_:3},8,["onOpenChange","open","direction"])):((0,e.uX)(),(0,e.CE)("div",i,[(0,e.Lk)("div",{onClick:g[0]||(g[0]=(0,r.D$)(U=>I.open=!I.open,["prevent","stop"]))},[(0,e.RG)(w.$slots,"trigger")]),I.open?((0,e.uX)(),(0,e.Wv)(te,{key:0,title:M.title,"separate-header":!1,"color-mode":E.theme,class:(0,o.C4)({[w.$style.contentDialog]:!0,[w.$style.bottomPadding]:C.hasHomeButton}),onClose:C.close},{default:(0,e.k6)(()=>[(0,e.RG)(w.$slots,"default")]),_:3},8,["title","color-mode","class","onClose"])):(0,e.Q3)("",!0)]))],2)}var d=t(909696),u=t(733268),m=t(68926),v=t(612732),_=t(453312),S=t(727825);const N={name:"ToolbarComplexDdnInner",emits:["openChange"],props:{alwaysDdn:{type:Boolean,default:!1},tabletDdn:{type:Boolean,default:!1},title:{type:String,required:!0}},data(){return{open:!1,initialDisplayDdn:null}},components:{Dropdown:u.m,ContentDialog:_.qz},setup(){const w=(0,v.k)(),g=(0,m.h)(),M=(0,d.q6)(),E=(0,S.N)();return{isSmallScreen:(0,e.EW)(()=>w.isSmallScreen),theme:(0,e.EW)(()=>g.theme),displayMobileEditor:(0,e.EW)(()=>M.displayMobileEditor),displayMobileNativeEditor:(0,e.EW)(()=>E.displayMobileNativeEditor),setHasBackdrop:E.setHasBackdrop}},computed:{displayDdn(){return!!(!this.displayMobileEditor||this.alwaysDdn||!this.isSmallScreen&&this.tabletDdn)},ddnDirection(){return this.displayMobileEditor?"top":"bottom"},hasHomeButton(){return window.flatSettings.hasHomeButton}},watch:{open(){this.$emit("openChange",this.open),this.initialDisplayDdn||this.setHasBackdrop(this.open)}},methods:{updateOpenStatus(w){this.open=w},close(){this.open=!1}},created(){this.initialDisplayDdn=this.displayDdn},beforeUnmount(){this.initialDisplayDdn||this.setHasBackdrop(!1)}};var k=t(263975),O=t.n(k),X=t(938793);const L={};L.$style=O();const j=(0,X.A)(N,[["render",s],["__cssModules",L]])},36514:(l,n,t)=>{"use strict";t.d(n,{A:()=>o,S:()=>e.A});var e=t(494994);const o=e.A},39035:(l,n,t)=>{var e=t(755540);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("265c33aa",e,!0,{})},39396:(l,n,t)=>{"use strict";t.d(n,{A:()=>So});var e=t(361744),o=t(555381);function r($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("ScoreSelectedKeysig"),tt=(0,e.g2)("ScoreSelectedTimesig"),et=(0,e.g2)("ScoreSelectedClef"),Dt=(0,e.g2)("ScoreSelectedRehearsal"),Bt=(0,e.g2)("ScoreSelectedRepeatXTimes"),qt=(0,e.g2)("ScoreSelectedFrame"),Yt=(0,e.g2)("ScoreSelectedMmr"),po=(0,e.g2)("ScoreSelectedRomanNumeralText"),no=(0,e.g2)("ScoreSelectedRomanNumeral"),Co=(0,e.g2)("ScoreSelectedJazzChordsText"),Io=(0,e.g2)("ScoreSelectedJazzChords"),Po=(0,e.g2)("ScoreSelectedMetronome"),Oo=(0,e.g2)("DialogMetronome");return(0,e.uX)(),(0,e.CE)("div",{class:"se-otools",onClick:ee[0]||(ee[0]=(0,o.D$)(()=>{},["stop"])),onTouchstart:ee[1]||(ee[1]=(0,o.D$)(()=>{},["stop"])),onTouchend:ee[2]||(ee[2]=(0,o.D$)(()=>{},["stop"])),onMousedown:ee[3]||(ee[3]=(0,o.D$)(()=>{},["stop"])),onMouseup:ee[4]||(ee[4]=(0,o.D$)(()=>{},["stop"]))},[me.selectedType==="keySignature"?((0,e.uX)(),(0,e.Wv)(st,{interaction:_e.interaction,key:`key-${me.selectedTs}`},null,8,["interaction"])):me.selectedType==="timeSignature"&&!me.displayMobileNativeEditor?((0,e.uX)(),(0,e.Wv)(tt,{interaction:_e.interaction,key:`time-${me.selectedTs}`},null,8,["interaction"])):me.selectedType==="clef"?((0,e.uX)(),(0,e.Wv)(et,{interaction:_e.interaction,key:`clef-${me.selectedTs}`},null,8,["interaction"])):me.selectedType==="rehearsal"?((0,e.uX)(),(0,e.Wv)(Dt,{interaction:_e.interaction,key:`rehearsal-${me.selectedTs}`},null,8,["interaction"])):me.selectedType==="repeatTimes"?((0,e.uX)(),(0,e.Wv)(Bt,{interaction:_e.interaction,key:`repeatXTimes-${me.selectedTs}`},null,8,["interaction"])):me.selectedType==="tabFrame"?((0,e.uX)(),(0,e.Wv)(qt,{interaction:_e.interaction,key:`frame-${me.selectedTs}`},null,8,["interaction"])):me.selectedType==="mmr"?((0,e.uX)(),(0,e.Wv)(Yt,{interaction:_e.interaction,key:`mmr-${me.selectedTs}`},null,8,["interaction"])):me.textMode==="classicChord"&&me.hasNewRomanNumeralsInput?((0,e.uX)(),(0,e.CE)(e.FK,{key:7},[me.useRomanNumeralTextInput&&me.hasChordTextInput?((0,e.uX)(),(0,e.Wv)(po,{interaction:_e.interaction,key:`${me.posTs}0`},null,8,["interaction"])):((0,e.uX)(),(0,e.Wv)(no,{interaction:_e.interaction,key:`${me.posTs}1`},null,8,["interaction"]))],64)):me.textMode==="chord"&&me.hasNewJazzChordInput?((0,e.uX)(),(0,e.CE)(e.FK,{key:8},[me.useJazzChordsTextInput&&me.hasChordTextInput?((0,e.uX)(),(0,e.Wv)(Co,{interaction:_e.interaction,key:`jazz${me.posTs}0`},null,8,["interaction"])):((0,e.uX)(),(0,e.Wv)(Io,{interaction:_e.interaction,key:`jazz${me.posTs}1`},null,8,["interaction"]))],64)):me.selectedType==="metronome"&&!me.dialogKey&&!me.displayMobileNativeEditor?((0,e.uX)(),(0,e.Wv)(Po,{interaction:_e.interaction,key:`metronome-${me.selectedTs}`},null,8,["interaction"])):me.dialogKey==="metronome"&&!me.displayMobileNativeEditor?((0,e.uX)(),(0,e.Wv)(Oo,{key:10,"score-data":_e.interaction.scoreData},null,8,["score-data"])):(0,e.Q3)("",!0)],32)}var i=t(121648),s=t(680468),d=t(318866),u=t(727825),m=t(496253);function v($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("DdnInnerClef"),tt=(0,e.g2)("ScoreSelectedGeneric");return(0,e.uX)(),(0,e.Wv)(tt,{interaction:_e.interaction,title:$.$t("editor:clef.title"),"detect-clicks-outside":!0,onClose:ee[1]||(ee[1]=et=>Ce.close())},{default:(0,e.k6)(()=>[(0,e.bF)(st,{"score-data":_e.interaction.scoreData,onClose:ee[0]||(ee[0]=et=>Ce.close())},null,8,["score-data"])]),_:1},8,["interaction","title"])}var _=t(941271),S=t(21493),N=t(538065);function k($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("ContentDialog");return Ge.initialDisplayDdn?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,N.C4)([$.$style.ddnRoot,$.$style.root]),ref:"ddn"},[(0,e.Lk)("div",{class:(0,N.C4)($.$style.arrow),"data-popper-arrow":""},null,2),(0,e.Lk)("div",{class:(0,N.C4)($.$style.content)},[(0,e.RG)($.$slots,"default")],2)],2)):((0,e.uX)(),(0,e.Wv)(st,{key:1,title:_e.title,"separate-header":!1,"color-mode":me.theme,class:(0,N.C4)({[$.$style.root]:!0,[$.$style.bottomPadding]:Ce.hasHomeButton}),onClose:Ce.close},{default:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,N.C4)($.$style.content)},[(0,e.RG)($.$slots,"default")],2)]),_:3},8,["title","color-mode","class","onClose"]))}var O=t(909696),X=t(68926),L=t(612732),y=t(453312),j=t(721852);function w($){document.removeEventListener("mousedown",$.clickOutside),$.clickOutside=null}function g($){$.clickOutside&&w($)}const M={name:"ScoreSelectedGeneric",components:{ContentDialog:y.qz},emits:["close"],props:{alwaysDdn:{type:Boolean,default:!1},tabletDdn:{type:Boolean,default:!1},title:{type:String,required:!0},interaction:{type:Object,required:!0},detectClicksOutside:{type:Boolean,default:!1}},data(){return{initialDisplayDdn:null,calledOnce:!1}},setup(){const $=(0,L.k)(),ee=(0,X.h)(),_e=(0,O.q6)(),me=(0,u.N)();return{isSmallScreen:(0,e.EW)(()=>$.isSmallScreen),theme:(0,e.EW)(()=>ee.theme),displayMobileEditor:(0,e.EW)(()=>_e.displayMobileEditor),setHasBackdrop:me.setHasBackdrop}},computed:{hasHomeButton(){return window.flatSettings.hasHomeButton},displayDdn(){return!!(!this.displayMobileEditor||this.alwaysDdn||!this.isSmallScreen&&this.tabletDdn)}},methods:{close(){this.$emit("close")}},created(){this.initialDisplayDdn=this.displayDdn,this.initialDisplayDdn||this.setHasBackdrop(!0)},mounted(){this.initialDisplayDdn&&(0,e.dY)(()=>{const{cursor:$}=this.interaction,ee=$.selectedElem.elem,_e=this.$refs.ddn;this.$popper=(0,j.n4)(ee,_e,{placement:"bottom",modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{rootBoundary:"viewport"}},{name:"arrow",options:{padding(){return 8}}}]}),this.detectClicksOutside&&(this.clickOutside=()=>{w(this),$.clearSelected()},document.addEventListener("mousedown",this.clickOutside))})},beforeUnmount(){this.$popper&&(this.$popper.destroy(),this.$popper=null),g(this),this.initialDisplayDdn||this.setHasBackdrop(!1)}};var E=t(234496),I=t.n(E),C=t(938793);const Z={};Z.$style=I();const U=(0,C.A)(M,[["render",k],["__cssModules",Z]]);function b($){document.removeEventListener("mousedown",$.clickOutside),$.clickOutside=null}function z($){$.clickOutside&&b($)}function ce(){const{cursor:$}=this.interaction;this.selectedElem=$.selectedElem}function se(){const{cursor:$}=this.interaction;this.selectedElem=$.selectedElem;const ee=$.selectedElem.elem,_e={placement:"bottom",positionFixed:!0,modifiers:{preventOverflow:{boundariesElement:"viewport"}}};this.$popper=new Popper(ee,this.$el,_e),this.clickOutside=()=>{b(this),$.clearSelected()},document.addEventListener("mousedown",this.clickOutside),nextTick(()=>{this.$popper.scheduleUpdate()})}function x(){nextTick(()=>{this.$popper.scheduleUpdate()})}function T(){const{cursor:$}=this.interaction;this.selectedElem=$.selectedElem;const ee=$.selectedElem.elem,_e={placement:"bottom",positionFixed:!0,modifiers:{preventOverflow:{boundariesElement:"viewport"}}};this.$popper=new Popper(ee,this.$el,_e)}function ne(){this.$popper&&(this.$popper.destroy(),this.$popper=null),z(this)}function p(){this.interaction.cursor.clearSelected(this.selectedElem)}const le={name:"ScoreSelectedClef",components:{ScoreSelectedGeneric:U,DdnInnerClef:S.A},props:{interaction:{type:Object,required:!0}},setup(){return{addExperience:(0,_.B)().addExperience}},methods:{close:p},mounted(){this.addExperience("editor.scoreItem.openClef"),ce.call(this)}},de=(0,C.A)(le,[["render",v]]);function Ae($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("DdnInnerFrame"),tt=(0,e.g2)("ScoreSelectedGeneric");return(0,e.uX)(),(0,e.Wv)(tt,{interaction:_e.interaction,"detect-clicks-outside":!me.displayMobileEditor,title:$.$t("editor:chordDiagram.title"),onClose:ee[1]||(ee[1]=et=>Ce.close())},{default:(0,e.k6)(()=>[(0,e.bF)(st,{"score-data":_e.interaction.scoreData,onClose:ee[0]||(ee[0]=et=>Ce.close())},null,8,["score-data"])]),_:1},8,["interaction","detect-clicks-outside","title"])}const be=["onUpdate:modelValue"];function ae($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("FButton");return(0,e.uX)(),(0,e.CE)("form",{class:(0,N.C4)([$.$style.ddnFrameInner,"no-select"]),"data-cy":"ddnFrameInner",onSubmit:ee[5]||(ee[5]=(0,o.D$)(tt=>Ce.exec(),["prevent"]))},[(0,e.Lk)("div",{class:(0,N.C4)($.$style.chordName)},(0,N.v_)(Ce.chordName),3),(0,e.Lk)("div",{class:(0,N.C4)($.$style.frameContent)},[(0,e.Lk)("div",{class:(0,N.C4)({[$.$style.frameInputs]:!0,[$.$style.shiftLeft]:Ge.shiftFirstFret}),"data-cy":"frameInputs"},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Ge.stringsFrets,(tt,et)=>(0,e.bo)(((0,e.uX)(),(0,e.CE)("input",{key:et,type:"number",min:"0",max:"20",class:"form-control","onUpdate:modelValue":Dt=>tt.fret=Dt,onChange:ee[0]||(ee[0]=(...Dt)=>Ce.updateDisplay&&Ce.updateDisplay(...Dt)),onKeypress:ee[1]||(ee[1]=(0,o.D$)(()=>{},["stop"])),onKeydown:ee[2]||(ee[2]=(0,o.D$)(Dt=>Ce.onKeydown(Dt),["stop"])),onKeyup:ee[3]||(ee[3]=(0,o.D$)(()=>{},["stop"]))},null,40,be)),[[o.Jo,tt.fret]])),128))],2),(0,e.Lk)("div",{class:(0,N.C4)($.$style.framePreview)},[((0,e.uX)(),(0,e.CE)("svg",{ref:"editedFrameSvg",onClick:ee[4]||(ee[4]=tt=>Ce.clickOnFret(tt))},null,512))],2)],2),(0,e.bF)(st,{type:"submit","default-text":"flat:custom-instru.grid.update"})],34)}var ie=t(269352),Ne=t(125394),$e=t(669834),Pe=t(331751),we=t(405676),Ze=t(74957),nt=t(171882),Ke=t(902630),at=t(843678),q=t(726042),K=t(701387),pe=t(104907),Te=t(464173),ge=t(381216),Q=t(613903),Re=t(624740),Fe=t(947704),xe=t.n(Fe),Qe=t(69587),ze=t(6645),yt=t(550594);const Oe={postScoreFretboard($){return yt.A.post(`${yt.A.apiv2baseurl}/me/editor/scoreFretboard/`,$)}};var ut=t(653154),Tt=t(459356),ht=($,ee,_e)=>new Promise((me,Ge)=>{var Ce=et=>{try{tt(_e.next(et))}catch(Dt){Ge(Dt)}},st=et=>{try{tt(_e.throw(et))}catch(Dt){Ge(Dt)}},tt=et=>et.done?me(et.value):Promise.resolve(et.value).then(Ce,st);tt((_e=_e.apply($,ee)).next())});const vt=(0,ze.nY)("scoreFretboard",{actions:{insertScoreFretboard($){return ht(this,null,function*(){try{yield Oe.postScoreFretboard($)}catch(ee){throw(0,ut.vV)(ee),(0,Tt.O)().displayError({error:ee}),ee}})}}});var Rt=t(681670),It=t(529355),Lt=t(627300);const Ct=($,ee=0)=>{if(!$||$.length===0)return null;const _e=$.map(me=>Lt.default.stringify(me)).join(",");return`${ee};${_e}`},G=$=>{if(!$)return null;const ee=$.split(";"),_e=Number.parseInt(ee[0],10),me=ee[1].split(",").map(Ge=>staffTuningUtils.unstringify(Ge));return{capo:_e,tuningData:me}},J=$=>{const{root:ee,kind:_e,degrees:me,type:Ge,bass:Ce}=$,st=`${It.A.getStep(ee)}/${It.A.getAlter(ee)}`,tt=me.length?me.map(Dt=>{const Bt=Ze.A.getValue(Dt),qt=Ze.A.getAlter(Dt),Yt=Ze.A.getType(Dt);return`${Bt}/${qt}/${Yt}`}).join(","):"null",et=Ce?`${Rt.A.getStep(Ce)}/${Rt.A.getAlter(Ce)}`:"null";return`${st} ${_e} ${tt} ${Ge} ${et}`},Me=$=>{const[ee,_e,me,Ge,Ce]=$.split(" "),[st,tt]=ee.split("/"),et=rootUtils.create(st,Number(tt)),Dt=[];me!=="null"&&me.split(",").forEach(qt=>{const[Yt,po,no]=qt.split("/");Dt.push(degreeUtils.create(Number(Yt),no,Number(po)))});let Bt=null;if(Ce!=="null"){const[qt,Yt]=Ce.split("/");Bt=bassUtils.create(qt,Number(Yt))}return{root:et,kind:_e,degrees:Dt,type:Ge,bass:Bt}},Xe=$=>{const ee=Ke.default.getNbStrings($),_e=Ke.default.getNbFrets($),me=Ke.default.getFirstFret($),Ge=Ke.default.getNotes($),Ce=Ge!=null&&Ge.length?Ge.map(tt=>{const et=nt.A.getString(tt),Dt=nt.A.getFret(tt);return`${et}/${Dt}`}).join(","):"null";return`${ee} ${_e} ${me||1} ${Ce}`},rt=$=>{const[ee,_e,me,Ge]=$.split(" "),Ce=me==="1"?1:me,st=[];return Ge!=="null"&&Ge.split(",").forEach(tt=>{const[et,Dt]=tt.split("/");st.push({string:et,fret:Dt})}),frameUtils.create(ee,_e,Ce,st)},He=100;function lt($){const ee=[],_e=$.length;return $.forEach((me,Ge)=>{const Ce=Number.parseInt(me.fret,10);if(q.default.isInteger(Ce)){const st=_e-Ge;ee.push({string:st,fret:Ce})}}),ee}function At($){const ee=Ke.default.getNbStrings($),_e=Ke.default.getNotes($),me=at.default.fromList(_e,nt.A.getString),Ge=[];for(let Ce=0;Ce<ee;Ce++){const st=ee-Ce;if(typeof me[st]!="undefined"){const tt=me[st],et=nt.A.getFret(tt);Ge.push({fret:et})}else Ge.push({fret:""})}return Ge}const xt={name:"DdnInnerFrame",emits:["close","resized"],data(){return{stringsFrets:[],parentNode:null,textMetric:null,harmonyData:null,libChord:new(xe())({degreeUtils:Ze.A,chordKind:Te.A,degreeType:ge.A,harmonyType:Q.A}),shiftFirstFret:!1}},props:{scoreData:{type:Object,required:!0}},setup(){const $=(0,i.W)(),ee=vt();return{selectedPos:(0,e.EW)(()=>$.selectedPos),insertScoreFretboard:ee.insertScoreFretboard}},computed:{textmetrics(){return new $e.A(this.$refs.editedFrameSvg)},loaded(){return this.textMetric},chordName(){return this.libChord.resolveChord(this.harmonyData)}},methods:{updateDisplay(){if(!this.loaded)return;this.parentNode&&this.parentNode.removeFromParent(),this.parentNode=new ie.A("g"),this.$refs.editedFrameSvg.appendChild(this.parentNode.node());const $=this.stringsFrets.length,ee=lt(this.stringsFrets),_e=(0,Ne.A)(ee,$);this.shiftFirstFret=Ke.default.getFirstFret(_e)>1;const me=new we.A(_e);me.setParent(this.parentNode),me.setDrawingContext(this.drawingContext);const Ge=me.getWidth(),Ce=me.getHeight(),st=me.getBottomLineOffset();this.$refs.editedFrameSvg.setAttribute("width",Ge),this.$refs.editedFrameSvg.setAttribute("height",Ce+st),me.setPosY(Ce),me.draw(),me.drawRects(),this.$emit("resized")},clickOnFret($){const ee=$.target;if(!ee)return;const _e=ee.getAttribute("data-string"),me=ee.getAttribute("data-fret");if(!_e||!me)return;const Ge=this.stringsFrets.length-Number(_e),Ce=Number(me);Ce===this.stringsFrets[Ge].fret?this.stringsFrets[Ge].fret="":this.stringsFrets[Ge].fret=Ce,this.updateDisplay()},exec(){const $=this.stringsFrets.length,ee=lt(this.stringsFrets),_e=(0,Ne.A)(ee,$),me={root:this.harmonyData.root,kind:this.harmonyData.kind,frame:_e,position:{partUuid:this.selectedPos.partUuid,measureUuid:this.selectedPos.measureUuid,timePos:this.selectedPos.timePos,dpq:this.selectedPos.dpq}};this.harmonyData.degrees&&(me.degrees=this.harmonyData.degrees),this.harmonyData.bass&&(me.bass=this.harmonyData.bass),this.harmonyData.type&&(me.type=this.harmonyData.type),this.collectScoreFretboard(_e),this.scoreData.scoreActions.executePublicAction("addHarmony",me),this.$emit("close")},collectScoreFretboard($){const ee=Ct(this.tuningData,this.capo),_e=J(this.harmonyData),me=Xe($);this.insertScoreFretboard({tuning:ee,harmony:_e,frame:me})},onKeydown($){$.keyCode===27&&this.$emit("close")}},watch:{loaded(){this.loaded&&(this.drawingContext=new Pe.A(this.textMetric,Re.default,He,Qe.S),this.updateDisplay())},stringsFrets(){this.updateDisplay()}},mounted(){this.textMetric=new $e.A(this.$refs.editedFrameSvg)},created(){const $=this.scoreData.getCurrentAdagioData(),ee={partUuid:this.selectedPos.partUuid,measureUuid:this.selectedPos.measureUuid,voiceUuid:this.selectedPos.voiceUuid,harmonyUuid:this.selectedPos.harmonyUuid};this.harmonyData=$.getJazzHarmonyDataAtUuid(ee),this.stringsFrets=At(this.harmonyData.frame);const _e=$.getMeasure(this.selectedPos.partIdx,this.selectedPos.measureIdx),[me]=K.default.getStaffDetails(_e);this.tuningData=pe.default.getStaffTunings(me),this.capo=pe.default.getCapo(me)}};var gt=t(949966),F=t.n(gt);const re={};re.$style=F();const W={name:"ScoreSelectedFrame",components:{ScoreSelectedGeneric:U,DdnInnerFrame:(0,C.A)(xt,[["render",ae],["__cssModules",re]])},props:{interaction:{type:Object,required:!0}},setup(){const $=(0,O.q6)(),ee=(0,_.B)();return{displayMobileEditor:(0,e.EW)(()=>$.displayMobileEditor),addExperience:ee.addExperience}},methods:{close:p},mounted(){this.addExperience("editor.scoreItem.openKey"),ce.call(this)}},Ie=(0,C.A)(W,[["render",Ae]]),Ee=["aria-label"],De=["aria-label"];function ot($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("DdnInnerJazzChord"),tt=(0,e.g2)("CollapseIcon"),et=(0,e.g2)("CloseIcon"),Dt=(0,e.g2)("ScoreSelectedFloating");return(0,e.uX)(),(0,e.Wv)(Dt,{interaction:_e.interaction,selector:Ce.selector,title:$.$t("editor:toggleChordMode.title"),onClose:ee[3]||(ee[3]=Bt=>Ce.close())},{default:(0,e.k6)(()=>[(0,e.bF)(st,{"score-data":_e.interaction.scoreData,interaction:_e.interaction,onClose:ee[0]||(ee[0]=Bt=>Ce.close())},null,8,["score-data","interaction"])]),rightButtons:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,N.C4)($.$style.rightButtons)},[me.hasChordTextInput?((0,e.uX)(),(0,e.CE)("button",{key:0,type:"button",onClick:ee[1]||(ee[1]=(...Bt)=>me.toggleJazzChordsInputType&&me.toggleJazzChordsInputType(...Bt)),"aria-label":$.$t("flat:reduce")},[(0,e.bF)(tt,{class:(0,N.C4)({[$.$style.rotateIcon]:!0,[$.$style.reverse]:me.displayMobileEditor&&me.isSmallScreen})},null,8,["class"])],8,Ee)):(0,e.Q3)("",!0),(0,e.Lk)("button",{type:"button",onClick:ee[2]||(ee[2]=(...Bt)=>Ce.close&&Ce.close(...Bt)),"aria-label":$.$t("flat:close")},[(0,e.bF)(et)],8,De)],2)]),_:1},8,["interaction","selector","title"])}var je=t(487420),Ve=t(813897),a=t(119167);function c($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("PopoverHeader"),tt=(0,e.g2)("BottomSheetsHeader");return Ge.canDisplay?((0,e.uX)(),(0,e.CE)("div",{key:0,"data-cy":"score-selected-floating",class:(0,N.C4)({[$.$style.root]:!0,[$.$style.ddnRoot]:Ge.initialDisplayDdn}),ref:"ddn"},[Ge.initialDisplayDdn?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,N.C4)($.$style.arrow),"data-popper-arrow":""},null,2)):(0,e.Q3)("",!0),(0,e.Lk)("div",{class:(0,N.C4)($.$style.content)},[Ge.initialDisplayDdn&&_e.hasHeaderDdn?((0,e.uX)(),(0,e.Wv)(st,{key:0,separable:!1,"show-close-button":!$.$slots.rightButtons,onClose:Ce.close},(0,e.eX)({default:(0,e.k6)(()=>[(0,e.Lk)("span",null,(0,N.v_)(_e.title),1)]),_:2},[$.$slots.rightButtons?{name:"right",fn:(0,e.k6)(()=>[(0,e.RG)($.$slots,"rightButtons")]),key:"0"}:void 0]),1032,["show-close-button","onClose"])):_e.hasHeaderDdn?((0,e.uX)(),(0,e.Wv)(tt,{key:1,separable:!1,"show-close-button":!$.$slots.rightButtons,onClose:Ce.close},(0,e.eX)({default:(0,e.k6)(()=>[(0,e.Lk)("span",null,(0,N.v_)(_e.title),1)]),_:2},[$.$slots.rightButtons?{name:"rightComplex",fn:(0,e.k6)(()=>[(0,e.RG)($.$slots,"rightButtons")]),key:"0"}:void 0]),1032,["show-close-button","onClose"])):(0,e.Q3)("",!0),(0,e.RG)($.$slots,"default")],2)],2)):(0,e.Q3)("",!0)}var f=t(461996),oe=t(500194),Ue=t(281313),Le=($,ee,_e)=>new Promise((me,Ge)=>{var Ce=et=>{try{tt(_e.next(et))}catch(Dt){Ge(Dt)}},st=et=>{try{tt(_e.throw(et))}catch(Dt){Ge(Dt)}},tt=et=>et.done?me(et.value):Promise.resolve(et.value).then(Ce,st);tt((_e=_e.apply($,ee)).next())});const Pt=1e3/60,Ot=3,pt={name:"ScoreSelectedFloating",components:{PopoverHeader:Ue.DI,BottomSheetsHeader:oe.PC},emits:["close"],props:{title:{type:String,required:!0},interaction:{type:Object,required:!0},selector:{type:String,default:null},hasHeaderDdn:{type:Boolean,default:!0},placement:{type:String,default:"left"}},data(){return{initialDisplayDdn:null,canDisplay:!1}},setup(){const $=(0,L.k)(),ee=(0,X.h)(),_e=(0,O.q6)();return{isSmallScreen:(0,e.EW)(()=>$.isSmallScreen),theme:(0,e.EW)(()=>ee.theme),displayMobileEditor:(0,e.EW)(()=>_e.displayMobileEditor)}},computed:{hasHomeButton(){return window.flatSettings.hasHomeButton},displayBottomSheet(){return this.isSmallScreen&&this.displayMobileEditor}},methods:{close(){this.$emit("close")},getTargetElem(){return Le(this,null,function*(){for(;!this.interaction.cursor.pageLayout.isSyncWithData();)yield(0,f.A)(Pt);const $=this.selector||".tear-drop";let ee=0,_e=document.querySelector($);for(;_e===null&&ee<Ot;)yield(0,f.A)(Pt),ee++,_e=document.querySelector($);return _e})}},created(){this.initialDisplayDdn=!this.displayBottomSheet,this.initialDisplayDdn||(this.canDisplay=!0)},mounted(){return Le(this,null,function*(){if(this.initialDisplayDdn){yield(0,e.dY)();const $=yield this.getTargetElem();this.canDisplay=!0,yield(0,e.dY)();const ee=this.$refs.ddn;this.$popper=(0,j.n4)($,ee,{placement:this.placement,modifiers:[{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{rootBoundary:"viewport"}},{name:"arrow",options:{padding(){return 8}}}]})}})},beforeUnmount(){this.$popper&&(this.$popper.destroy(),this.$popper=null)}};var bt=t(278864),ct=t.n(bt);const Xt={};Xt.$style=ct();const Kt=(0,C.A)(pt,[["render",c],["__cssModules",Xt]]),Ht={name:"ScoreSelectedJazzChords",components:{ScoreSelectedFloating:Kt,DdnInnerJazzChord:a.A,CloseIcon:je.A,CollapseIcon:Ve.A},props:{interaction:{type:Object,required:!0}},setup(){const $=(0,s.c)(),ee=(0,_.B)(),_e=(0,i.W)(),me=(0,O.q6)(),Ge=(0,L.k)();return{isSmallScreen:(0,e.EW)(()=>Ge.isSmallScreen),toggleJazzChordsInputType:$.toggleJazzChordsInputType,hasChordTextInput:(0,e.EW)(()=>$.hasChordTextInput),setTextMode:_e.setTextMode,selectedType:(0,e.EW)(()=>_e.selectedType),noteInfo:(0,e.EW)(()=>_e.noteInfo),displayMobileEditor:(0,e.EW)(()=>me.displayMobileEditor),addExperience:ee.addExperience}},computed:{selector(){let $=null;return this.selectedType==="chord"&&this.interaction.cursor.selectedElem?$=this.interaction.cursor.selectedElem.uuid:this.noteInfo.harmony&&($=this.noteInfo.harmony.uuid),$?`[data-adagio-harmony-uuid='${$}']`:null}},methods:{close(){this.setTextMode(null)}}};var kt=t(994232),Ft=t.n(kt);const Vt={};Vt.$style=Ft();const wt=(0,C.A)(Ht,[["render",ot],["__cssModules",Vt]]);function Gt($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("DdnInnerJazzChordsText"),tt=(0,e.g2)("ScoreSelectedFloating");return(0,e.uX)(),(0,e.Wv)(tt,{interaction:_e.interaction,selector:Ce.selector,"has-header-ddn":!1,title:$.$t("editor:toggleChordMode.title"),placement:"bottom",onClose:ee[1]||(ee[1]=et=>Ce.close())},{default:(0,e.k6)(()=>[(0,e.bF)(st,{"score-data":_e.interaction.scoreData,interaction:_e.interaction,onClose:ee[0]||(ee[0]=et=>Ce.close())},null,8,["score-data","interaction"])]),_:1},8,["interaction","selector","title"])}var $t=t(941379);const Qt={name:"ScoreSelectedJazzChordsText",components:{ScoreSelectedFloating:Kt,DdnInnerJazzChordsText:$t.A},props:{interaction:{type:Object,required:!0}},data(){return{watchingViewport:!1}},setup(){const $=(0,O.q6)(),ee=(0,u.N)(),_e=(0,i.W)(),me=(0,_.B)();return{displayMobileEditor:(0,e.EW)(()=>$.displayMobileEditor),watchViewport:ee.watchViewport,unwatchViewport:ee.unwatchViewport,selectedType:(0,e.EW)(()=>_e.selectedType),noteInfo:(0,e.EW)(()=>_e.noteInfo),setTextMode:_e.setTextMode,addExperience:me.addExperience}},computed:{selector(){let $=null;return this.selectedType==="chord"&&this.interaction.cursor.selectedElem?$=this.interaction.cursor.selectedElem.uuid:this.noteInfo.harmony&&($=this.noteInfo.harmony.uuid),$?`[data-adagio-harmony-uuid='${$}']`:null}},methods:{close(){this.setTextMode(null)}},beforeMount(){this.displayMobileEditor&&(this.watchingViewport=!0,this.watchViewport())},beforeUnmount(){this.watchingViewport&&this.unwatchViewport()}},P=(0,C.A)(Qt,[["render",Gt]]);function ye($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("DdnInnerKeysig"),tt=(0,e.g2)("ScoreSelectedGeneric");return(0,e.uX)(),(0,e.Wv)(tt,{interaction:_e.interaction,title:$.$t("editor:keySignature.title"),"detect-clicks-outside":!0,onClose:ee[1]||(ee[1]=et=>Ce.close())},{default:(0,e.k6)(()=>[(0,e.bF)(st,{"score-data":_e.interaction.scoreData,onClose:ee[0]||(ee[0]=et=>Ce.close())},null,8,["score-data"])]),_:1},8,["interaction","title"])}var Be=t(560150);const Et={name:"ScoreSelectedKeysig",components:{ScoreSelectedGeneric:U,DdnInnerKeysig:Be.A},props:{interaction:{type:Object,required:!0}},setup(){return{addExperience:(0,_.B)().addExperience}},methods:{close:p},mounted(){this.addExperience("editor.scoreItem.openKey"),ce.call(this)}},ke=(0,C.A)(Et,[["render",ye]]);function St($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("DdnInnerMetronome"),tt=(0,e.g2)("ScoreSelectedGeneric");return(0,e.uX)(),(0,e.Wv)(tt,{interaction:_e.interaction,"tablet-ddn":!0,title:$.$t("editor:tempo.title"),"detect-clicks-outside":!me.displayMobileEditor,onClose:ee[1]||(ee[1]=et=>Ce.close())},{default:(0,e.k6)(()=>[(0,e.bF)(st,{"score-data":_e.interaction.scoreData,onClose:ee[0]||(ee[0]=et=>Ce.close())},null,8,["score-data"])]),_:1},8,["interaction","title","detect-clicks-outside"])}var dt=t(361e3);const h={name:"ScoreSelectedMetronome",components:{ScoreSelectedGeneric:U,DdnInnerMetronome:dt.A},props:{interaction:{type:Object,required:!0}},setup(){const $=(0,O.q6)(),ee=(0,_.B)();return{displayMobileEditor:(0,e.EW)(()=>$.displayMobileEditor),addExperience:ee.addExperience}},methods:{close:p},mounted(){this.addExperience("editor.scoreItem.openTempo"),ce.call(this)}},he=(0,C.A)(h,[["render",St]]);function We($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("DdnInnerMultiMeasureRest"),tt=(0,e.g2)("ScoreSelectedGeneric");return(0,e.uX)(),(0,e.Wv)(tt,{interaction:_e.interaction,"tablet-ddn":!0,"detect-clicks-outside":!me.displayMobileEditor,title:$.$t("editor:editMultiMeasureRest.title"),onClose:ee[1]||(ee[1]=et=>Ce.close())},{default:(0,e.k6)(()=>[(0,e.bF)(st,{"score-data":_e.interaction.scoreData,onClose:ee[0]||(ee[0]=et=>Ce.close())},null,8,["score-data"])]),_:1},8,["interaction","detect-clicks-outside","title"])}var mt=t(736600);const R={name:"ScoreSelectedMmr",components:{ScoreSelectedGeneric:U,DdnInnerMultiMeasureRest:mt.A},props:{interaction:{type:Object,required:!0}},setup(){const $=(0,O.q6)(),ee=(0,_.B)();return{displayMobileEditor:(0,e.EW)(()=>$.displayMobileEditor),addExperience:ee.addExperience}},methods:{close:p},mounted(){this.addExperience("editor.scoreItem.openKey"),ce.call(this)}},ve=(0,C.A)(R,[["render",We]]);function Mt($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("DdnInnerRehearsal"),tt=(0,e.g2)("ScoreSelectedGeneric");return(0,e.uX)(),(0,e.Wv)(tt,{interaction:_e.interaction,"tablet-ddn":!0,"detect-clicks-outside":!me.displayMobileEditor,title:$.$t("editor:rehearsal.title"),onClose:ee[1]||(ee[1]=et=>Ce.close())},{default:(0,e.k6)(()=>[(0,e.bF)(st,{"score-data":_e.interaction.scoreData,interaction:_e.interaction,onClose:ee[0]||(ee[0]=et=>Ce.close())},null,8,["score-data","interaction"])]),_:1},8,["interaction","detect-clicks-outside","title"])}var Nt=t(666532);const Jt={name:"ScoreSelectedRehearsal",components:{ScoreSelectedGeneric:U,DdnInnerRehearsal:Nt.A},props:{interaction:{type:Object,required:!0}},setup(){const $=(0,O.q6)(),ee=(0,_.B)();return{displayMobileEditor:(0,e.EW)(()=>$.displayMobileEditor),addExperience:ee.addExperience}},methods:{close:p},mounted(){this.addExperience("editor.scoreItem.openKey"),ce.call(this)}},ro=(0,C.A)(Jt,[["render",Mt]]);function io($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("DdnInnerRepeatXTimes"),tt=(0,e.g2)("ScoreSelectedGeneric");return(0,e.uX)(),(0,e.Wv)(tt,{interaction:_e.interaction,"tablet-ddn":!0,"detect-clicks-outside":!me.displayMobileEditor,title:$.$t("editor:addRepeatXTimes.title"),onClose:ee[1]||(ee[1]=et=>Ce.close())},{default:(0,e.k6)(()=>[(0,e.bF)(st,{"score-data":_e.interaction.scoreData,onClose:ee[0]||(ee[0]=et=>Ce.close())},null,8,["score-data"])]),_:1},8,["interaction","detect-clicks-outside","title"])}var mo=t(941047);const ho={name:"ScoreSelectedRepeatXTimes",components:{ScoreSelectedGeneric:U,DdnInnerRepeatXTimes:mo.A},props:{interaction:{type:Object,required:!0}},setup(){const $=(0,O.q6)(),ee=(0,_.B)();return{displayMobileEditor:(0,e.EW)(()=>$.displayMobileEditor),addExperience:ee.addExperience}},methods:{close:p},mounted(){this.addExperience("editor.scoreItem.openKey"),ce.call(this)}},fo=(0,C.A)(ho,[["render",io]]),go=["aria-label"],yo=["aria-label"];function ao($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("DdnInnerRomanNumeral"),tt=(0,e.g2)("CollapseIcon"),et=(0,e.g2)("CloseIcon"),Dt=(0,e.g2)("ScoreSelectedFloating");return(0,e.uX)(),(0,e.Wv)(Dt,{interaction:_e.interaction,selector:Ce.selector,title:$.$t("editor:toggleClassicChordMode.title"),onClose:ee[3]||(ee[3]=Bt=>Ce.close())},{default:(0,e.k6)(()=>[(0,e.bF)(st,{"score-data":_e.interaction.scoreData,interaction:_e.interaction,onClose:ee[0]||(ee[0]=Bt=>Ce.close())},null,8,["score-data","interaction"])]),rightButtons:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,N.C4)($.$style.rightButtons)},[me.hasChordTextInput?((0,e.uX)(),(0,e.CE)("button",{key:0,type:"button",onClick:ee[1]||(ee[1]=(...Bt)=>me.toggleRomanNumeralInputType&&me.toggleRomanNumeralInputType(...Bt)),"aria-label":$.$t("flat:reduce")},[(0,e.bF)(tt,{class:(0,N.C4)({[$.$style.rotateIcon]:!0,[$.$style.reverse]:me.displayMobileEditor&&me.isSmallScreen})},null,8,["class"])],8,go)):(0,e.Q3)("",!0),(0,e.Lk)("button",{type:"button",onClick:ee[2]||(ee[2]=(...Bt)=>Ce.close&&Ce.close(...Bt)),"aria-label":$.$t("flat:close")},[(0,e.bF)(et)],8,yo)],2)]),_:1},8,["interaction","selector","title"])}var Ro=t(277460);const bo={name:"ScoreSelectedRomanNumeral",components:{ScoreSelectedFloating:Kt,DdnInnerRomanNumeral:Ro.A,CloseIcon:je.A,CollapseIcon:Ve.A},props:{interaction:{type:Object,required:!0}},setup(){const $=(0,L.k)(),ee=(0,O.q6)(),_e=(0,s.c)(),me=(0,i.W)(),Ge=(0,_.B)();return{isSmallScreen:(0,e.EW)(()=>$.isSmallScreen),displayMobileEditor:(0,e.EW)(()=>ee.displayMobileEditor),hasChordTextInput:(0,e.EW)(()=>_e.hasChordTextInput),toggleRomanNumeralInputType:_e.toggleRomanNumeralInputType,selectedType:(0,e.EW)(()=>me.selectedType),noteInfo:(0,e.EW)(()=>me.noteInfo),setTextMode:me.setTextMode,addExperience:Ge.addExperience}},computed:{selector(){let $=null;return this.selectedType==="classicChord"&&this.interaction.cursor.selectedElem?$=this.interaction.cursor.selectedElem.uuid:this.noteInfo.classicHarmony&&($=this.noteInfo.classicHarmony.uuid),$?`[data-adagio-harmony-uuid='${$}']`:null}},methods:{close(){this.setTextMode(null)}}};var lo=t(667688),Eo=t.n(lo);const uo={};uo.$style=Eo();const Lo=(0,C.A)(bo,[["render",ao],["__cssModules",uo]]);function Bo($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("DdnInnerRomanNumeralText"),tt=(0,e.g2)("ScoreSelectedFloating");return(0,e.uX)(),(0,e.Wv)(tt,{interaction:_e.interaction,selector:Ce.selector,"has-header-ddn":!1,title:$.$t("editor:toggleClassicChordMode.title"),placement:"bottom",onClose:ee[1]||(ee[1]=et=>Ce.close())},{default:(0,e.k6)(()=>[(0,e.bF)(st,{"score-data":_e.interaction.scoreData,interaction:_e.interaction,onClose:ee[0]||(ee[0]=et=>Ce.close())},null,8,["score-data","interaction"])]),_:1},8,["interaction","selector","title"])}var Mo=t(208917);const To={name:"ScoreSelectedRomanNumeralText",components:{ScoreSelectedFloating:Kt,DdnInnerRomanNumeralText:Mo.A},props:{interaction:{type:Object,required:!0}},data(){return{watchingViewport:!1}},setup(){const $=(0,O.q6)(),ee=(0,i.W)(),_e=(0,u.N)(),me=(0,_.B)();return{displayMobileEditor:(0,e.EW)(()=>$.displayMobileEditor),selectedType:(0,e.EW)(()=>ee.selectedType),noteInfo:(0,e.EW)(()=>ee.noteInfo),setTextMode:ee.setTextMode,watchViewport:_e.watchViewport,unwatchViewport:_e.unwatchViewport,addExperience:me.addExperience}},computed:{selector(){let $=null;return this.selectedType==="classicChord"&&this.interaction.cursor.selectedElem?$=this.interaction.cursor.selectedElem.uuid:this.noteInfo.classicHarmony&&($=this.noteInfo.classicHarmony.uuid),$?`[data-adagio-harmony-uuid='${$}']`:null}},methods:{close(){this.setTextMode(null)}},beforeMount(){this.displayMobileEditor&&(this.watchingViewport=!0,this.watchViewport())},beforeUnmount(){this.watchingViewport&&this.unwatchViewport()}},co=(0,C.A)(To,[["render",Bo]]);function Wo($,ee,_e,me,Ge,Ce){const st=(0,e.g2)("DdnInnerTimesig"),tt=(0,e.g2)("ScoreSelectedGeneric");return(0,e.uX)(),(0,e.Wv)(tt,{interaction:_e.interaction,"tablet-ddn":!0,"detect-clicks-outside":!me.displayMobileEditor,title:$.$t("editor:timeSignature.title"),onClose:ee[1]||(ee[1]=et=>Ce.close())},{default:(0,e.k6)(()=>[(0,e.bF)(st,{"score-data":_e.interaction.scoreData,onClose:ee[0]||(ee[0]=et=>Ce.close())},null,8,["score-data"])]),_:1},8,["interaction","detect-clicks-outside","title"])}var so=t(94754);const Ao={name:"ScoreSelectedTimesig",components:{ScoreSelectedGeneric:U,DdnInnerTimesig:so.A},props:{interaction:{type:Object,required:!0}},setup(){const $=(0,O.q6)(),ee=(0,_.B)();return{displayMobileEditor:(0,e.EW)(()=>$.displayMobileEditor),addExperience:ee.addExperience}},methods:{close:p},mounted(){this.addExperience("editor.scoreItem.openKey"),ce.call(this)}},_o={name:"ScoreSelectedTools",components:{ScoreSelectedKeysig:ke,ScoreSelectedClef:de,ScoreSelectedTimesig:(0,C.A)(Ao,[["render",Wo]]),ScoreSelectedRehearsal:ro,ScoreSelectedRepeatXTimes:fo,ScoreSelectedMetronome:he,ScoreSelectedFrame:Ie,ScoreSelectedMmr:ve,DialogMetronome:m.A,ScoreSelectedRomanNumeral:Lo,ScoreSelectedRomanNumeralText:co,ScoreSelectedJazzChords:wt,ScoreSelectedJazzChordsText:P},props:{interaction:{type:Object,required:!0}},setup(){const $=(0,i.W)(),ee=(0,u.N)(),_e=(0,s.c)(),me=(0,d.j)();return{dialogKey:(0,e.EW)(()=>me.currentDialogKey),selectedType:(0,e.EW)(()=>$.selectedType),selectedTs:(0,e.EW)(()=>$.selectedTs),posTs:(0,e.EW)(()=>$.posTs),textMode:(0,e.EW)(()=>$.textMode),displayMobileNativeEditor:(0,e.EW)(()=>ee.displayMobileNativeEditor),hasNewRomanNumeralsInput:(0,e.EW)(()=>_e.hasNewRomanNumeralsInput),hasNewJazzChordInput:(0,e.EW)(()=>_e.hasNewJazzChordInput),useRomanNumeralTextInput:(0,e.EW)(()=>_e.useRomanNumeralTextInput),useJazzChordsTextInput:(0,e.EW)(()=>_e.useJazzChordsTextInput),hasChordTextInput:(0,e.EW)(()=>_e.hasChordTextInput)}}},So=(0,C.A)(_o,[["render",r]])},41629:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(243564);const i=61,s=(0,o.pM)({name:"TbBend",props:{scoreData:{type:Object,required:!0}},setup(d){const u=[{value:"bend2",action:"toggleBend2"},{value:"bend1",action:"toggleBend1"}],m=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,css:"tb-bend",items:u,active:[m.tbBend],defaultActionIcon:"toggleBend"})}})},47023:l=>{"use strict";l.exports='<svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 16"><path class="fill" fill-rule="evenodd" d="M4.929 11.138l.128.128c.32.352.48.832.48 1.312 0 .32-.064.672-.224.96-.192.384-.8.768-.8 1.216 0 .32.416.48 1.056.48.672 0 2.56-.192 2.656-6.08v-.16c0-.417-.128-.64-.288-.64-.064 0-.128 0-.192.063a4.433 4.433 0 0 1-2.912 1.12c-.992 0-1.985-.352-2.849-.992C.96 7.777.16 6.657.032 5.377c0-.16-.032-.288-.032-.448 0-1.44.736-2.88 1.856-3.777C3.008.224 4.61 0 6.05 0c.8 0 1.76.096 2.56.448 1.249.544 2.337 1.856 3.009 3.073.704 1.28.96 2.944.992 4.416v.128c0 1.505-.544 3.2-1.248 4.545-1.152 2.176-3.425 3.36-5.857 3.393-.832 0-1.76-.096-2.529-.417-.96-.352-1.856-1.12-2.016-2.176-.032-.128-.032-.224-.032-.352 0-1.056.768-2.048 1.76-2.336.256-.064.513-.128.769-.128.544 0 1.056.192 1.472.544zm1.216-3.105c1.024 0 1.856-1.6 1.856-3.584 0-1.985-.832-3.585-1.856-3.585s-1.888 1.6-1.888 3.585c0 1.984.864 3.584 1.888 3.584z"/></svg>'},57500:(l,n,t)=>{"use strict";t.d(n,{l:()=>S});var e=t(303953),o=t(916504),r=t(6645),i=t(361744),s=t(744056),d=t(763939),u=t(329047),m=t(941271),v=t(612732),_=(N,k,O)=>new Promise((X,L)=>{var y=g=>{try{w(O.next(g))}catch(M){L(M)}},j=g=>{try{w(O.throw(g))}catch(M){L(M)}},w=g=>g.done?X(g.value):Promise.resolve(g.value).then(y,j);w((O=O.apply(N,k)).next())});const S=(0,r.nY)("layout",()=>{const N=(0,u.O)(),k=(0,v.k)(),{isLargeScreen:O}=(0,r.bP)(k),X=(0,i.EW)(()=>N.isLtiFocusMode),L=(0,d.F)(),{account:y,isEdu:j,locale:w,isGuestAccount:g}=(0,r.bP)(L),M=(0,s.KR)(!1),E=(0,s.KR)(!1),I=(0,i.EW)(()=>!g.value&&!X.value),C=(0,i.EW)(()=>!g.value&&!X.value),Z=(0,i.EW)(()=>{var A,de;return((de=(A=y.value)==null?void 0:A.username)==null?void 0:de.startsWith("test-student-"))&&o.A.get("reqas")});function te(A){M.value=A}function U(A){E.value=A}const b=(0,i.EW)(()=>window.location.href||"/"),z=(0,i.EW)(()=>{let A=`https://help.flat.io/${w.value}`;return j.value&&(A+="/education"),A}),ce=(0,i.EW)(()=>`${z.value}/support/`),se=(0,i.EW)(()=>{const A=window.location.pathname+window.location.search;return`/auth/signin?next=${encodeURIComponent(A)}`}),x=(0,i.EW)(()=>{var A,de;return(de=(A=y.value)==null?void 0:A.experience)==null?void 0:de.includes("beta.library.v2")}),T=(0,i.EW)(()=>x.value&&!O.value?"/library/mobile":x.value?"/library/allScores":"/my-library");function ne(A={}){const de=A==null?void 0:A.ref;let Ae="/settings/upgrade";de&&(Ae+=`?ref=${de}`),window.location.href=Ae}function p(){window.location.href=`/auth/signin?next=${window.location.pathname}`}function le(A){return _(this,arguments,function*({service:de,qs:Ae=""}){const be=(0,m.B)();be.remove(),yield be.update(),window.location.href=`/auth/${de}?linkAccount=true&csrf=${e.A.csrf}${Ae}`})}return{shouldHideUpgradeNav:M,isMobileNavHidden:E,displayNavNotifications:I,displayNavProductUpdates:C,displayViewingAsStudent:Z,locationUrl:b,helpUrl:z,supportUrl:ce,signInUrl:se,hasLibraryV2Flag:x,libraryEndpoint:T,hideUpgradeNav:te,hideMobileNav:U,goUpgrade:ne,goSignin:p,goLinkAccount:le}})},58434:(l,n,t)=>{"use strict";t.d(n,{$:()=>m,d:()=>_});var e=t(66469);const o=[["#",1],["b",-1],["s",1],["f",-1]];function r(S){const N=o.find(([k])=>S.includes(k));return N?N[1]:0}const i=["n","vii","vi","iv","v","iii","ii","i"];function s(S){const N=i.find(k=>S.includes(k));return N?N==="n"?"N":N:null}function d(S){return/[A-Z]/.test(S)}function u(S,N,k){if(k==="N")return e.A.MAJOR;const O=N.indexOf(k);return k=S.substring(O,O+k.length),d(k)?e.A.MAJOR:e.A.MINOR}function m(S){const N=S.toLowerCase(),k=s(N);if(k===null)return null;const O=u(S,N,k);return{root:{alter:r(N),degree:k},mode:O}}function v(S){return S===-1?"b":S===1?"#":""}function _({root:S,mode:N}){const k=v(S.alter);let O=S.degree;return N===e.A.MAJOR&&(O=O.toUpperCase()),`${k}${O}`}},59004:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=33,s=(0,o.pM)({name:"TbArpeggio",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>{var v;return((v=u.noteInfo)==null?void 0:v.hasArpeggio)||!1});return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:m.value})}})},59271:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=42,s=(0,o.pM)({name:"TbTempoChange",props:{name:{type:String,required:!0},tempoChange:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>{var v;return(v=u.noteInfo.tempoChange)==null?void 0:v.type.includes(d.tempoChange)});return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:m.value})}})},59541:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.alignDesktop_kmpug:not(.bottom_WAgkk){position:absolute;top:0;left:0;height:0;width:0}.contentCommon_BnVfS{z-index:1000}.contentMobile_GR_vG{min-width:58px;max-width:100vw}
`,""]),s.locals={alignDesktop:"alignDesktop_kmpug",bottom:"bottom_WAgkk",contentCommon:"contentCommon_BnVfS",contentMobile:"contentMobile_GR_vG"};const d=s},63039:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=65,s=(0,o.pM)({name:"TbPizzicato",props:{name:{type:String,required:!0},pizzicato:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>u.noteInfo.pizzicatoData&&u.noteInfo.pizzicatoData.type===d.pizzicato);return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:m.value})}})},64327:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.rightButtons_JiUED{display:flex;gap:8px}.rightButtons_JiUED button{display:flex;border-width:0;background-color:var(--f-subdue-10);color:var(--f-subdue);border-radius:50%;padding:0;width:24px;height:24px;justify-content:center;align-items:center;flex-shrink:0}.rightButtons_JiUED .rotateIcon_oLxI5{transform:rotate(-90deg)}.rightButtons_JiUED .rotateIcon_oLxI5.reverse_B0E5C{transform:rotate(90deg)}*[data-color-mode=dark] .rightButtons_JiUED button{background-color:var(--f-ink);color:var(--f-subdue-40)}
`,""]),s.locals={rightButtons:"rightButtons_JiUED",rotateIcon:"rotateIcon_oLxI5",reverse:"reverse_B0E5C"};const d=s},66469:(l,n,t)=>{"use strict";t.d(n,{A:()=>o});const o={MINOR:"minor",MAJOR:"major"}},66682:(l,n,t)=>{"use strict";t.r(n),t.d(n,{destroyTooltip:()=>d,setupTooltip:()=>s,tooltipText:()=>i});var e=t(653154),o=t(674548),r=t(243935);function i(){const u=`${this.action}.title`;let m=o.MR.t(`editor:${u}`);if(u===m)return(0,e.vV)(new Error(`Missing i18n: ${u}`)),null;const v=this.disabledReason;if(!this.displayMobileEditor)if(v){const _=`action-disabled.${v}`,S=o.MR.t(`editor:${_}`);S!==_?m+=`: ${S}`:(0,e.vV)(new Error(`Missing i18n: ${_}`))}else this.shortcut&&(m+=` (${this.shortcut})`);return m}const s=u=>{if(document.body.classList.contains("touch"))return;u.$tooltip&&u.$tooltip.destroy();const m=u.tooltipText||u.mobileText;u.$tooltip=new r.vF(u.$el,{placement:"bottom",content:m,arrow:r.qO,duration:[0,0]})},d=u=>{u.$tooltip&&(u.$tooltip.destroy(),u.$tooltip=null)}},80790:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>te});var e=t(361744),o=t(538065),r=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(U,b,z)=>b in U?r(U,b,{enumerable:!0,configurable:!0,writable:!0,value:z}):U[b]=z,m=(U,b)=>{for(var z in b||(b={}))s.call(b,z)&&u(U,z,b[z]);if(i)for(var z of i(b))d.call(b,z)&&u(U,z,b[z]);return U};const v=["data-cy"];function _(U,b,z,ce,se,x){const T=(0,e.g2)("power-badge-icon"),ne=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("button",{type:"button",class:(0,o.C4)(m(m({[U.tbButtonStyle.rootCommon]:!0,[U.tbButtonStyle.rootMobileDetailed]:!0},x.mobilePowerClass),x.mobileHighlightClass)),"data-cy":`tb-${z.action}`,onClick:b[0]||(b[0]=(...p)=>x.openTextMode&&x.openTextMode(...p))},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[U.tbButtonStyle.i]:!0,[U.tbButtonStyle.bigIcon]:x.isBigIcon})},null,2),[[ne,x.iconSvg,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(U.tbButtonStyle.t)},(0,o.v_)(x.tooltipText),3),x.showPowerOnly?((0,e.uX)(),(0,e.Wv)(T,{key:0,class:(0,o.C4)(U.powerStyle.toolbarPowerIcon)},null,8,["class"])):(0,e.Q3)("",!0)],10,v)}var S=t(27219),N=t(135519),k=t(121648),O=t(797727),X=t(763939),L=t(741522),y=t(505522),j=t(896099);const w={name:"TbTextModeNative",width:42,components:{PowerBadgeIcon:O.default},props:{scoreData:{type:Object,required:!0},textModeTrigger:{type:String,required:!0},action:{type:String,required:!0},premiumFeatures:{type:Array,default:null},highlight:{type:Boolean,default:!1}},setup(){const U=(0,X.F)(),b=(0,N.d)(),z=(0,k.W)();return{accountFeatures:(0,e.EW)(()=>U.accountFeatures),mainShortcutByAction:(0,e.EW)(()=>b.mainShortcutByAction),isEditionBlocked:(0,e.EW)(()=>z.isEditionBlocked)}},computed:{localPremiumFeatures(){return this.premiumFeatures?this.premiumFeatures:this.actionsMeta.premiumFeature?[this.actionsMeta.premiumFeature]:[]},tooltipText(){const U=`${this.action}.title`;return this.$t(`editor:${U}`)},iconSvg(){return y.default[this.resolvedIconkey]},isBigIcon(){return(0,j.default)(this.resolvedIconkey)},resolvedIconkey(){const U=this.action;return y.default[U]?U:this.actionsMeta.icon},actionsMeta(){return S.actions[this.action]||{}},mobilePowerClass:L.m,mobileHighlightClass(){return this.highlight?{[this.highlightStyle.toolbarMobileHighlightBox]:!0,"show-highlight":!0}:{}},showPowerOnly(){return this.localPremiumFeatures.some(U=>!this.accountFeatures[U])}},methods:{openTextMode(){(0,k.W)().setSelectedType(this.textModeTrigger)}}};var g=t(247477),M=t(652588),E=t(245916),I=t(938793);const C={};C.powerStyle=g.default,C.highlightStyle=M.default,C.tbButtonStyle=E.default;const te=(0,I.A)(w,[["render",_],["__cssModules",C]])},82799:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=38,s=(0,o.pM)({name:"TbBarline",props:{name:{type:String,required:!0},barline:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>d.barline==="double"?u.measureInfo.rightBarline&&u.measureInfo.rightBarline["bar-style"]==="light-light":d.barline==="rightBarline"?u.measureInfo.rightBarline&&!!u.measureInfo.rightBarline.repeat:!!u.measureInfo[d.barline]);return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:m.value})}})},86624:(l,n,t)=>{"use strict";t.d(n,{A:()=>d});var e=t(321182),o=t(630680),r=t(938793);const i={};i.$style=o.default;const d=(0,r.A)(e.A,[["__cssModules",i]])},88681:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>_});var e=t(361744);function o(S,N,k,O,X,L){const y=(0,e.g2)("NoteColorPicker"),j=(0,e.g2)("ToolbarComplexDdn");return(0,e.uX)(),(0,e.Wv)(j,{ref:"ddn",class:"tb-notecolor","icon-key":"noteColor","mobile-text":L.mobileText,"power-width":30,"show-power-only":L.showPowerOnly,action:"transpose","always-ddn":!0},{default:(0,e.k6)(()=>[(0,e.bF)(y,{onSetColor:L.setColor,onCloseDropdown:L.closeDropdown},null,8,["onSetColor","onCloseDropdown"])]),_:1},8,["mobile-text","show-power-only"])}var r=t(674548),i=t(763939),s=t(868104),d=t(13626);const u={name:"NoteColor",width:38,props:{scoreData:{type:Object,required:!0}},components:{ToolbarComplexDdn:d.default,NoteColorPicker:s.A},setup(){const S=(0,i.F)();return{accountFeatures:(0,e.EW)(()=>S.accountFeatures)}},computed:{mobileText(){return r.MR.t("editor:noteColor.title")},showPowerOnly(){return!this.accountFeatures.notesHeads}},methods:{setColor(S){this.scoreData.scoreActions.executePublicAction("setColor",{color:S})},closeDropdown(){this.$refs.ddn.onClose()}}};var m=t(938793);const _=(0,m.A)(u,[["render",o]])},94754:(l,n,t)=>{"use strict";t.d(n,{A:()=>be});var e=t(361744),o=t(538065),r=t(555381);const i={class:"ts-cta"};function s(ae,ie,Ne,$e,Pe,we){const Ze=(0,e.g2)("TimeSig"),nt=(0,e.g2)("Checkbox"),Ke=(0,e.g2)("FButton"),at=(0,e.gN)("focus");return $e.customTimeUiDisplayed?((0,e.uX)(),(0,e.CE)("form",{key:1,class:(0,o.C4)(ae.$style.ddnTimesigCInner),"data-cy":"ddnTimesigCInner",onSubmit:ie[20]||(ie[20]=(0,r.D$)(q=>we.setCustomTs(),["prevent"])),onTouchstart:ie[21]||(ie[21]=(0,r.D$)(()=>{},["stop"])),onTouchend:ie[22]||(ie[22]=(0,r.D$)(()=>{},["stop"])),onClick:ie[23]||(ie[23]=(0,r.D$)(()=>{},["stop"]))},[(0,e.Lk)("div",{class:(0,o.C4)(ae.$style.tsCustom)},[(0,e.Lk)("div",{class:(0,o.C4)(ae.$style.tsItem)},[(0,e.Lk)("div",{class:(0,o.C4)(ae.$style.tsLabel)},(0,o.v_)(ae.$t("flat:time-signature.nominal")),3),(0,e.bF)(Ze,{beats:Pe.displayedBeats,"beat-type":Pe.displayedBeatType,symbol:Pe.displayedSymbol},null,8,["beats","beat-type","symbol"]),(0,e.Lk)("div",{class:(0,o.C4)(ae.$style.inputs)},[(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":ie[1]||(ie[1]=q=>Pe.displayedBeats=q),name:"displayedBeats",class:(0,o.C4)([{[ae.$style.hasError]:!we.validDisplayedBeats},"form-control"]),type:"number",min:"1",max:"64",required:"",onKeypress:ie[2]||(ie[2]=(0,r.D$)(()=>{},["stop"])),onKeydown:ie[3]||(ie[3]=(0,r.D$)(q=>we.onKeydown(q),["stop"])),onKeyup:ie[4]||(ie[4]=(0,r.D$)(()=>{},["stop"]))},null,34),[[at],[r.Jo,Pe.displayedBeats,void 0,{number:!0}]]),(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":ie[5]||(ie[5]=q=>Pe.displayedBeatType=q),name:"displayedBeatType",class:(0,o.C4)([{[ae.$style.hasError]:!we.validDisplayedBeatType},"form-control"]),type:"number",min:"1",max:"64",required:"",onKeypress:ie[6]||(ie[6]=(0,r.D$)(()=>{},["stop"])),onKeydown:ie[7]||(ie[7]=(0,r.D$)(q=>we.onKeydown(q),["stop"])),onKeyup:ie[8]||(ie[8]=(0,r.D$)(()=>{},["stop"]))},null,34),[[r.Jo,Pe.displayedBeatType,void 0,{number:!0}]])],2)],2),(0,e.Lk)("div",{class:(0,o.C4)([ae.$style.tsItem,ae.$style.tsReal])},[(0,e.Lk)("div",{class:(0,o.C4)(ae.$style.tsLabel)},(0,o.v_)(ae.$t("flat:time-signature.actual")),3),(0,e.bF)(Ze,{beats:Pe.beats,"beat-type":Pe.beatType},null,8,["beats","beat-type"]),(0,e.Lk)("div",{class:(0,o.C4)(ae.$style.inputs)},[(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":ie[9]||(ie[9]=q=>Pe.beats=q),name:"beats",class:(0,o.C4)([{[ae.$style.hasError]:!we.validBeats},"form-control"]),onChanged:ie[10]||(ie[10]=q=>we.setPickupChanged()),type:"number",min:"1",max:"64",required:"",onKeypress:ie[11]||(ie[11]=(0,r.D$)(()=>{},["stop"])),onKeydown:ie[12]||(ie[12]=(0,r.D$)(q=>we.onKeydown(q),["stop"])),onKeyup:ie[13]||(ie[13]=(0,r.D$)(()=>{},["stop"]))},null,34),[[r.Jo,Pe.beats,void 0,{number:!0}]]),(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":ie[14]||(ie[14]=q=>Pe.beatType=q),name:"beatType",class:(0,o.C4)([{[ae.$style.hasError]:!we.validBeatType},"form-control"]),onChanged:ie[15]||(ie[15]=q=>we.setPickupChanged()),type:"number",min:"1",max:"64",required:"",onKeypress:ie[16]||(ie[16]=(0,r.D$)(()=>{},["stop"])),onKeydown:ie[17]||(ie[17]=(0,r.D$)(q=>we.onKeydown(q),["stop"])),onKeyup:ie[18]||(ie[18]=(0,r.D$)(()=>{},["stop"]))},null,34),[[r.Jo,Pe.beatType,void 0,{number:!0}]])],2)],2)],2),Pe.symbolIsPossible?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(ae.$style.tsSymbolCheckbox)},[(0,e.bF)(nt,{modelValue:Pe.useSymbol,"onUpdate:modelValue":ie[19]||(ie[19]=q=>Pe.useSymbol=q),id:"checked"},{default:(0,e.k6)(()=>[(0,e.eW)((0,o.v_)(ae.$t("editor:useSymbol.title")),1)]),_:1},8,["modelValue"])],2)):(0,e.Q3)("",!0),(0,e.Lk)("div",i,[(0,e.Lk)("div",null,[(0,e.bF)(Ke,{type:"submit",disabled:we.invalidTs,"default-text":"flat:save"},null,8,["disabled"])])])],34)):((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(ae.$style.ddnTimesigInner),"data-cy":"ddnTimesigInner"},[(0,e.Lk)("div",{class:(0,o.C4)(ae.$style.tsSuggestions)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Pe.suggest,q=>((0,e.uX)(),(0,e.Wv)(Ze,{key:q.key,beats:q.beats,"beat-type":q.beatType,symbol:q.symbol,onClick:K=>we.setTimeSignature(q)},null,8,["beats","beat-type","symbol","onClick"]))),128)),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Pe.recents,q=>((0,e.uX)(),(0,e.Wv)(Ze,{key:q.key,beats:q.beats,"beat-type":q.beatType,symbol:q.symbol,onClick:K=>we.setTimeSignature(q)},null,8,["beats","beat-type","symbol","onClick"]))),128))],2),(0,e.Lk)("div",{class:(0,o.C4)(ae.$style.tsActions)},[(0,e.Lk)("a",{class:(0,o.C4)(ae.$style.tsAction),onClick:ie[0]||(ie[0]=(0,r.D$)(q=>we.showCustom(),["stop"]))},[(0,e.bF)(Ze,{beats:7,"beat-type":8}),(0,e.Lk)("div",{class:(0,o.C4)(ae.$style.t)},(0,o.v_)(ae.$t("flat:customize")),3)],2)],2)],2))}var d=t(842746),u=t(701387),m=t(121648),v=t(909696),_=t(36514),S=t(459356),N=t(916504);const k={key:0,class:"timesig-draw symbol"},O={key:0,class:"ts-symbol common"},X={key:1,class:"ts-symbol cut"},L=["id"],y={class:"ts-digit"},j={key:0},w={key:1},g={class:"ts-digit"},M={key:0},E={key:1};function I(ae,ie,Ne,$e,Pe,we){const Ze=(0,e.gN)("dompurify-html");return Ne.symbol?((0,e.uX)(),(0,e.CE)("div",k,[Ne.symbol==="common"?(0,e.bo)(((0,e.uX)(),(0,e.CE)("span",O,null,512)),[[Ze,Pe.icons.tsCommon,"svg"]]):Ne.symbol==="cut"?(0,e.bo)(((0,e.uX)(),(0,e.CE)("span",X,null,512)),[[Ze,Pe.icons.tsCut,"svg"]]):(0,e.Q3)("",!0)])):((0,e.uX)(),(0,e.CE)("div",{key:1,class:"timesig-draw digits",id:`ts-${Ne.beats}-${Ne.beatType}`},[(0,e.Lk)("span",y,[we.beats1Digit!==0&&we.beats1Icon?(0,e.bo)(((0,e.uX)(),(0,e.CE)("span",j,null,512)),[[Ze,we.beats1Icon,"svg"]]):(0,e.Q3)("",!0),we.beats2Icon?(0,e.bo)(((0,e.uX)(),(0,e.CE)("span",w,null,512)),[[Ze,we.beats2Icon,"svg"]]):(0,e.Q3)("",!0)]),(0,e.Lk)("span",g,[we.beatType1Digit!==0&&we.beat1TypeIcon?(0,e.bo)(((0,e.uX)(),(0,e.CE)("span",M,null,512)),[[Ze,we.beat1TypeIcon,"svg"]]):(0,e.Q3)("",!0),we.beat2TypeIcon?(0,e.bo)(((0,e.uX)(),(0,e.CE)("span",E,null,512)),[[Ze,we.beat2TypeIcon,"svg"]]):(0,e.Q3)("",!0)])],8,L))}const C={};function Z(ae){ae.keys().forEach(ie=>{C[ie.replace("./","").replace(".svg","")]=ae(ie)})}Z(t(286751));const te=C,U={name:"TimeSig",props:{beats:{type:[String,Number],required:!0},beatType:{type:[String,Number],required:!0},symbol:{type:String,default:null}},data(){return{icons:te}},computed:{beats1Digit(){return Math.floor(this.beats/10)},beats2Digit(){return this.beats%10},beatType1Digit(){return Math.floor(this.beatType/10)},beatType2Digit(){return this.beatType%10},beats1Icon(){return te[`ts${this.beats1Digit}`]},beats2Icon(){return te[`ts${this.beats2Digit}`]},beat1TypeIcon(){return te[`ts${this.beatType1Digit}`]},beat2TypeIcon(){return te[`ts${this.beatType2Digit}`]}}};var b=t(135604),z=t(938793);const se=(0,z.A)(U,[["render",I]]);var x=(ae,ie,Ne)=>new Promise(($e,Pe)=>{var we=Ke=>{try{nt(Ne.next(Ke))}catch(at){Pe(at)}},Ze=Ke=>{try{nt(Ne.throw(Ke))}catch(at){Pe(at)}},nt=Ke=>Ke.done?$e(Ke.value):Promise.resolve(Ke.value).then(we,Ze);nt((Ne=Ne.apply(ae,ie)).next())});const T=ae=>(ae=Number.parseInt(ae,10),[1,2,4,8,16,32,64].includes(ae)),ne=ae=>(ae=Number.parseInt(ae,10),ae>=1&&ae<=64),p={name:"DdnInnerTimesig",components:{TimeSig:se,Checkbox:_.A},emits:["close"],props:{scoreData:{type:Object,required:!0}},data(){return{suggest:[{beats:2,beatType:4},{beats:3,beatType:4},{beats:4,beatType:4},{beats:4,beatType:4,symbol:"common"},{beats:2,beatType:2,symbol:"cut"},{beats:6,beatType:8}],recents:N.A.get("score-editor.ts-recent")||[],displayedSymbol:null,beats:0,beatType:0,displayedBeats:0,displayedBeatType:0,displayedChanged:!1,useSymbol:!1,symbolIsPossible:null}},setup(){const ae=(0,m.W)(),ie=(0,v.q6)(),Ne=(0,S.O)();return{measureIdx:(0,e.EW)(()=>ae.measureIdx),selectedMeasureUuid:(0,e.EW)(()=>{var $e;return($e=ae.selectedPos)==null?void 0:$e.measureUuid}),customTimeUiDisplayed:(0,e.EW)(()=>ie.customTimeUiDisplayed),selectedEntity:(0,e.EW)(()=>ae.selectedEntity),displayError:Ne.displayError}},computed:{changingMeasureIdx(){var ae;return((ae=this.selectedEntity)==null?void 0:ae.type)===d.A.TIME_SIGNATURE?this.scoreData.adagioData.getMeasureIdxFromUuid(this.selectedEntity.measureUuid):this.selectedMeasureUuid?this.scoreData.adagioData.getMeasureIdxFromUuid(this.selectedMeasureUuid):this.measureIdx},currentTime(){const ae=this.scoreData.adagioData.getMeasure(0,this.changingMeasureIdx),ie=u.default.getWrappedTime(ae).getEntry(0);return{beats:ie.beats,beatType:ie["beat-type"],symbol:ie.$symbol}},currentDisplayedTime(){const ae=this.scoreData.adagioData.getCommonContent().getDisplayedTime(this.changingMeasureIdx);return{beats:ae.beats,beatType:ae["beat-type"],symbol:ae.$symbol}},validBeatType(){return T(this.beatType)},validBeats(){return ne(this.beats)},validDisplayedBeats(){return ne(this.displayedBeats)},validDisplayedBeatType(){return T(this.displayedBeatType)},invalidTs(){return!this.validBeatType||!this.validDisplayedBeatType||!this.validBeats||!this.validDisplayedBeats}},watch:{currentTime(){this.setInputs()},currentDisplayedTime(){this.setInputs()},displayedBeats(ae,ie){ae!==ie&&(!this.displayedChanged&&ie===this.beats&&(this.beats=ae),this.checkUseSymbolPossibility(),this.displayedSymbol=null)},displayedBeatType(ae,ie){ae!==ie&&(!this.displayedChanged&&ie===this.beatType&&(this.beatType=ae),this.checkUseSymbolPossibility(),this.displayedSymbol=null)},useSymbol(ae){ae?this.displayedSymbol=this.displayedBeats===2?"cut":"common":this.displayedSymbol=null}},methods:{setPickupChanged(){this.displayedChanged=!0},setTimeSignature(ae){return x(this,null,function*(){try{yield this.scoreData.scoreActions.executePublicAction("setTimeSignature",{timeSignature:ae,displayedTime:ae}),this.close()}catch(ie){this.displayError({error:ie})}})},setCustomTs(){return x(this,null,function*(){const ae={beats:Number.parseInt(this.beats,10),beatType:Number.parseInt(this.beatType,10)},ie={beats:Number.parseInt(this.displayedBeats,10),beatType:Number.parseInt(this.displayedBeatType,10),symbol:this.displayedSymbol||void 0};try{yield this.scoreData.scoreActions.executePublicAction("setTimeSignature",{timeSignature:ae,displayedTime:ie}),this.isAlreadySuggestion(ie)||this.saveRecent(ie),this.close()}catch(Ne){this.displayError({error:Ne})}})},setInputs(){const ae=this.currentTime;this.beats=Number.parseInt(ae.beats,10),this.beatType=Number.parseInt(ae.beatType,10);const ie=this.currentDisplayedTime;this.displayedBeats=Number.parseInt(ie.beats,10),this.displayedBeatType=Number.parseInt(ie.beatType,10),ie.symbol&&(this.displayedSymbol=ie.symbol,this.useSymbol=!0)},showCustom(){(0,v.q6)().setCustomTimeUiDisplayed(!0)},onKeydown(ae){ae.keyCode===27&&this.close()},isAlreadySuggestion(ae,ie=this.suggest){for(let Ne=0;Ne<ie.length;Ne++){const $e=ie[Ne];if(ae.beats===$e.beats&&ae.beatType===$e.beatType&&(!ae.symbol||ae.symbol===$e.symbol))return!0}return!1},saveRecent(ae){this.isAlreadySuggestion(ae,this.recents)||this.recents.push(ae),this.recents.length>3&&this.recents.shift(),N.A.set("score-editor.ts-recent",this.recents)},checkUseSymbolPossibility(){this.displayedBeats===4&&this.displayedBeatType===4||this.displayedBeats===2&&this.displayedBeatType===2?this.symbolIsPossible=!0:(this.symbolIsPossible=!1,this.useSymbol=!1)},close(){(0,v.q6)().setCustomTimeUiDisplayed(!1),this.$emit("close")}},created(){this.setInputs(),[].concat(this.suggest,this.recents).forEach(ae=>{ae.key=`${ae.beats}:${ae.beatType}:${ae.symbol}`})},unmounted(){this.close()}};var le=t(935076),A=t.n(le);const de={};de.$style=A();const be=(0,z.A)(p,[["render",s],["__cssModules",de]])},96942:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>g});var e=t(361744),o=t(538065);const r=["aria-label"];function i(M,E,I,C,Z,te){const U=(0,e.gN)("dompurify-html");return C.displayMobileEditor?((0,e.uX)(),(0,e.CE)("button",{key:1,class:(0,o.C4)({active:te.active,disabled:te.disabledTool,[M.tbButtonStyle.rootCommon]:!0,[M.tbButtonStyle.rootMobileDetailed]:!0}),onClick:E[1]||(E[1]=b=>te.exec())},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)(M.tbButtonStyle.i)},null,2),[[U,te.iconSvg,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(M.tbButtonStyle.t)},(0,o.v_)(te.tooltipText),3),te.active?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(M.tbButtonStyle.badge)},(0,o.v_)(I.badge),3)):(0,e.Q3)("",!0)],2)):((0,e.uX)(),(0,e.CE)("button",{key:0,class:(0,o.C4)({active:te.active,disabled:te.disabledTool,[M.tbButtonStyle.rootCommon]:!0,[M.tbButtonStyle.rootDesktop]:!0}),onClick:E[0]||(E[0]=b=>te.exec()),"aria-label":te.tooltipText},[(0,e.bo)((0,e.Lk)("div",null,null,512),[[U,te.iconSvg,"svg"]]),(0,e.Lk)("div",{class:(0,o.C4)(M.tbButtonStyle.badge)},(0,o.v_)(I.badge),3)],10,r))}var s=t(27219),d=t(135519),u=t(121648),m=t(727137),v=t(909696),_=t(653154),S=t(243935),N=t(26292),k=t(505522),O=t(66682);const X={name:"ToolbarBadgeIcon",props:{action:{type:String,required:!0},badge:{type:Number,default:void 0},scoreData:{type:Object,required:!0}},setup(){const M=(0,d.d)(),E=(0,u.W)(),I=(0,v.q6)();return{mainShortcutByAction:(0,e.EW)(()=>M.mainShortcutByAction),isEditionBlocked:(0,e.EW)(()=>E.isEditionBlocked),displayMobileEditor:(0,e.EW)(()=>I.displayMobileEditor)}},computed:{iconSvg(){return k.default[this.action]},actionsMeta(){return s.actions[this.action]||{}},shortcut(){const M=this.mainShortcutByAction[this.action];return M?(0,N.lD)(M.shortcuts):null},tooltipText:O.tooltipText,active(){return typeof this.badge=="number"},disabledReason(){return this.isDisabledEditionBlocked?"editionBlocked":(0,m.x)()[`${this.action}DisabledReason`]},isDisabledEditionBlocked(){return this.isEditionBlocked?!this.actionsMeta.groups.includes("ro"):!1},disabledTool(){return!!this.disabledReason}},watch:{tooltipText(){this.setupTooltip()}},methods:{setupTooltip(){document.body.classList.contains("touch")||(this.$tooltip&&this.$tooltip.destroy(),this.tooltipText?this.$tooltip=new S.vF(this.$el,{touch:!1,placement:"bottom",content:this.tooltipText,arrow:S.qO,duration:[0,0]}):(0,_.vV)(new Error(`Tooltip text not found for action ${this.action}`)))},exec(){return this.disabledTool?Promise.resolve():this.scoreData.scoreActions.executePublicAction(this.action)}},mounted(){this.setupTooltip()},beforeUnmount(){this.$tooltip&&(this.$tooltip.destroy(),this.$tooltip=null)}};var L=t(235398),y=t(938793);const j={};j.tbButtonStyle=L.default;const g=(0,y.A)(X,[["render",i],["__cssModules",j]])},98326:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_HjtfT{flex-grow:1;flex-shrink:1;flex-basis:auto}
`,""]),s.locals={root:"root_HjtfT"};const d=s},100273:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>u,width:()=>d});var e=t(955154),o=t(121648),r=t(674548),i=t(361744),s=t(243564);const d=42,u=(0,i.pM)({name:"TbHarmonic",props:{scoreData:{type:Object,required:!0}},setup(m){const v=[{value:e.default.NATURAL_SOUNDING,action:"toggleHarmonicNaturalSounding"},{value:e.default.NATURAL_TOUCHING,action:"toggleHarmonicNaturalTouching"},{value:e.default.ARTIFICIAL_TOUCHING,action:"toggleHarmonicArtificialTouching"}],_=(0,o.W)();return()=>(0,i.h)(s.default,{scoreData:m.scoreData,css:"tb-harmonic",mainText:r.MR.t("editor:harmonic.title"),items:v,active:[_.tbHarmonic],defaultActionIcon:"toggleHarmonicNaturalSounding"})}})},102062:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>q});var e=t(361744);function o(K,pe,Te,ge,Q,Re){const Fe=(0,e.g2)("ddn-inner-beaming"),xe=(0,e.g2)("ToolbarComplexDdn");return(0,e.uX)(),(0,e.Wv)(xe,{ref:"ddn",class:"tb-beaming","icon-key":"beamPolicy","mobile-text":Re.mobileText,"power-width":30,"show-power-only":Re.showPowerOnly,action:"setColor","ddn-opts":Re.ddnOpts,"ddn-classes":Re.ddnClasses},{default:(0,e.k6)(()=>[(0,e.bF)(Fe,{"score-data":Te.scoreData,onClose:pe[0]||(pe[0]=Qe=>Re.onClose())},null,8,["score-data"])]),_:1},8,["mobile-text","show-power-only","ddn-opts","ddn-classes"])}var r=t(763939),i=t(538065),s=t(555381);const d={key:0},u=["onClick"];function m(K,pe,Te,ge,Q,Re){const Fe=(0,e.g2)("TabItem"),xe=(0,e.g2)("Tab"),Qe=(0,e.g2)("BeamingDisplay"),ze=(0,e.g2)("Checkbox"),yt=(0,e.g2)("FButton"),ft=(0,e.g2)("FPowerButton"),Oe=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("div",{class:(0,i.C4)(K.$style.ddnBeamingInner),"data-cy":"beamingInner"},[(0,e.Lk)("div",{class:(0,i.C4)(K.$style.tabs)},[(0,e.bF)(xe,{class:(0,i.C4)(K.$style.tModes)},{default:(0,e.k6)(()=>[(0,e.bF)(Fe,{active:!ge.customBeamingUiDisplayed,onClick:pe[0]||(pe[0]=ut=>Re.showCustom(!1))},{default:(0,e.k6)(()=>[(0,e.eW)((0,i.v_)(K.$t("flat:beaming.suggestions")),1)]),_:1},8,["active"]),(0,e.bF)(Fe,{active:ge.customBeamingUiDisplayed,onClick:pe[1]||(pe[1]=ut=>Re.showCustom(!0))},{default:(0,e.k6)(()=>[(0,e.eW)((0,i.v_)(K.$t("flat:beaming.custom")),1)]),_:1},8,["active"])]),_:1},8,["class"])],2),ge.customBeamingUiDisplayed?((0,e.uX)(),(0,e.CE)("form",{key:1,onSubmit:pe[4]||(pe[4]=(0,s.D$)(ut=>Re.setCustom(),["prevent"]))},[(0,e.bF)(Qe,{"beats-list":Q.beatsList,time:K.measureInfo.time,edit:!0,onUpdated:pe[3]||(pe[3]=ut=>Re.updatedCustom(ut))},null,8,["beats-list","time"]),(0,e.Lk)("div",{class:(0,i.C4)(K.$style.bCta)},[Re.enabledFeature?((0,e.uX)(),(0,e.Wv)(yt,{key:0,type:"submit",disabled:Re.invalidBeatsList,"default-text":"flat:save"},null,8,["disabled"])):((0,e.uX)(),(0,e.Wv)(ft,{key:1,type:"submit",disabled:Re.invalidBeatsList,"default-text":"flat:save"},null,8,["disabled"]))],2)],32)):((0,e.uX)(),(0,e.CE)("div",d,[(0,e.Lk)("div",{class:(0,i.C4)(K.$style.bSuggestions)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Re.suggestions,(ut,Tt)=>((0,e.uX)(),(0,e.CE)("button",{class:(0,i.C4)(K.$style.bSuggestion),key:Tt,onClick:ht=>Re.applyBeaming(ut)},[(0,e.bF)(Qe,{"beats-list":ut,time:K.measureInfo.time,disabled:!Re.enabledFeature,class:(0,i.C4)({active:JSON.stringify(ut)===JSON.stringify(K.measureInfo.beatsList)})},null,8,["beats-list","time","disabled","class"])],10,u))),128))],2),(0,e.bF)(ze,{class:(0,i.C4)(K.$style.restsCheckbox),modelValue:Q.restsInsideBeams,"onUpdate:modelValue":pe[2]||(pe[2]=ut=>Q.restsInsideBeams=ut),id:"restsInsideBeamsCheckbox"},{default:(0,e.k6)(()=>[(0,e.Lk)("div",null,[(0,e.bo)((0,e.Lk)("div",null,null,512),[[Oe,K.$t("editor:toolbar.restsInsideBeams.title")]])])]),_:1},8,["class","modelValue"])]))],2)}var v=t(363190),_=t(121648),S=t(909696),N=t(36514),k=t(931720),O=t(227468),X=t(599325),L=t(916504),y=t(6645);const j={class:"b-beats"},w={class:"b-beat-icon"},g=["onClick"],M={class:"b-legend"};function E(K,pe,Te,ge,Q,Re){const Fe=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("div",{class:(0,i.C4)(["b-beaming-display",{edit:Te.edit,disabled:Te.disabled}])},[(0,e.Lk)("div",j,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Te.time.beats,(xe,Qe)=>((0,e.uX)(),(0,e.CE)("span",{key:Qe},[(0,e.bo)((0,e.Lk)("span",w,null,512),[[Fe,Re.beatIcon,"svg"]]),Qe<Te.time.beats-1?((0,e.uX)(),(0,e.CE)("span",{key:0,class:"b-beat-beam-wrap",onClick:ze=>Re.toggleBeam(Qe)},[(0,e.Lk)("span",{class:(0,i.C4)(["b-beat-beam",{active:Re.fullList[Qe]}])},null,2)],8,g)):(0,e.Q3)("",!0)]))),128))]),(0,e.Lk)("div",M,(0,i.v_)(Re.beatsListText),1)],2)}var I=t(505522);const C={1:I.default.whole,2:I.default.half,4:I.default.quarter,8:I.default.eighth,16:I.default.sixteenth},Z={name:"BeamingDisplay",emits:["updated"],props:{beatsList:{type:Array,required:!0},time:{type:Object,required:!0},disabled:{type:Boolean,default:!1},edit:{type:Boolean,default:!1}},computed:{beatsListText(){return this.beatsList.join(" + ")},beatIcon(){return C[this.time["beat-type"]]},fullList(){return this.beatsListToFullList(this.beatsList)}},methods:{toggleBeam(K){if(!this.edit)return;const pe=[].concat(this.fullList);pe[K]=!pe[K],this.$emit("updated",this.fullListToBeats(pe))},beatsListToFullList(K){const pe=[];for(let Te=0;Te<K.length;Te++){const ge=K[Te];for(let Q=0;Q<ge-1;Q++)pe.push(!0);Te<K.length-1&&pe.push(!1)}return pe},fullListToBeats(K){const pe=[];let Te=1;return K.forEach(ge=>{ge?Te++:(pe.push(Te),Te=1)}),pe.push(Te),pe}}};var te=t(350831),U=t(938793);const z=(0,U.A)(Z,[["render",E]]);var ce=Object.defineProperty,se=Object.defineProperties,x=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,le=(K,pe,Te)=>pe in K?ce(K,pe,{enumerable:!0,configurable:!0,writable:!0,value:Te}):K[pe]=Te,A=(K,pe)=>{for(var Te in pe||(pe={}))ne.call(pe,Te)&&le(K,Te,pe[Te]);if(T)for(var Te of T(pe))p.call(pe,Te)&&le(K,Te,pe[Te]);return K},de=(K,pe)=>se(K,x(pe));const Ae={name:"DdnInnerBeaming",components:{Tab:X.o,TabItem:X.V,BeamingDisplay:z,FPowerButton:O.QY,Checkbox:N.S},emits:["close","resized"],props:{scoreData:{type:Object,required:!0}},data(){return{flatSuggestions:[],allRecents:L.A.get("score-editor.beamlists-recent")||{},beatsList:[],restsInsideBeams:!1}},setup(){const K=(0,r.F)(),pe=(0,_.W)(),Te=(0,S.q6)();return{accountFeatures:(0,e.EW)(()=>K.accountFeatures),range:(0,e.EW)(()=>pe.range),measureUuid:(0,e.EW)(()=>pe.measureUuid),partUuid:(0,e.EW)(()=>pe.partUuid),staffUuid:(0,e.EW)(()=>pe.staffUuid),customBeamingUiDisplayed:(0,e.EW)(()=>Te.customBeamingUiDisplayed)}},computed:{enabledFeature(){return this.accountFeatures.beamPolicy},timeSigStr(){return`${this.measureInfo.time.beats}/${this.measureInfo.time["beat-type"]}`},recents(){return this.allRecents[this.timeSigStr]||[]},suggestions(){const K=[].concat(this.flatSuggestions);return this.recents.forEach(pe=>{this.isAlreadySuggestion(pe,K)||K.push(pe)}),K},invalidBeatsList(){return!1}},methods:de(A({},(0,y.i0)(k.B,["showUpgradeDialog"])),{setCustom(){this.applyBeaming(this.beatsList),this.close()},showCustom(K=!0){(0,S.q6)().setCustomBeamingUiDisplayed(K),this.$emit("resized")},onKeydown(K){K.keyCode===27&&this.close()},isAlreadySuggestion(K,pe=this.suggestions){for(let Te=0;Te<pe.length;Te++){const ge=pe[Te];if(JSON.stringify(ge)===JSON.stringify(K))return!0}return!1},saveRecent(K){this.allRecents=L.A.get("score-editor.beamlists-recent")||{};const pe=this.allRecents[this.timeSigStr]||[];this.isAlreadySuggestion(K)||pe.push(K),pe.length>4&&pe.shift(),this.allRecents[this.timeSigStr]=pe,L.A.set("score-editor.beamlists-recent",this.allRecents),this.$emit("resized")},close(){(0,S.q6)().setCustomBeamingUiDisplayed(!1),this.$emit("close")},getCurrentMeasureInfo(){const K={partUuid:this.partUuid,staffUuid:this.staffUuid,measureUuid:this.measureUuid};return this.range&&(K.measureUuid=this.range.left.measureUuid),this.measureInfo=this.scoreData.adagioData.getStaffMeasure(K),this.flatSuggestions=[].concat((0,v.A)(this.measureInfo.time)),this.beatsList=this.measureInfo.beatsList,this.isAlreadySuggestion(this.beatsList)||this.saveRecent(this.beatsList),this.measureInfo},setInitialRestsInsideBeams(){this.restsInsideBeams=this.measureInfo.restsInsideBeams,this.$watch("restsInsideBeams",this.applyRestsInsideBeams)},updatedCustom(K){this.beatsList=K},applyBeaming(K){if(!this.enabledFeature){this.showUpgradeDialog({feature:"beamPolicy"});return}const pe=this.measureInfo,Te={beats:pe.time.beats,beatType:pe.time["beat-type"],symbol:pe.time.$symbol},ge={beats:pe.displayedTime.beats,beatType:pe.displayedTime["beat-type"],symbol:pe.displayedTime.$symbol};this.scoreData.scoreActions.executePublicAction("setBeamPolicy",{timeSignature:Te,displayedTime:ge,beatsList:K,restsInsideBeams:this.restsInsideBeams}),this.saveRecent(K),this.measureInfo.beatsList=K},applyRestsInsideBeams(){if(!this.enabledFeature){this.showUpgradeDialog({feature:"beamPolicy"});return}const K=this.measureInfo,pe={beats:K.time.beats,beatType:K.time["beat-type"],symbol:K.time.$symbol},Te={beats:K.displayedTime.beats,beatType:K.displayedTime["beat-type"],symbol:K.displayedTime.$symbol};this.scoreData.scoreActions.executePublicAction("setBeamPolicy",{timeSignature:pe,displayedTime:Te,beatsList:this.measureInfo.beatsList,restsInsideBeams:this.restsInsideBeams})}}),created(){this.getCurrentMeasureInfo(),this.setInitialRestsInsideBeams()},unmounted(){this.close()}};var be=t(892481),ae=t.n(be);const ie={};ie.$style=ae();const $e=(0,U.A)(Ae,[["render",m],["__cssModules",ie]]);var Pe=t(13626),we=t(361826);const Ze={name:"BeamingPolicy",components:{ToolbarComplexDdn:Pe.default,DdnInnerBeaming:$e},props:{scoreData:{type:Object,required:!0}},setup(){const K=(0,r.F)();return{accountFeatures:(0,e.EW)(()=>K.accountFeatures)}},computed:{mobileText(){return this.$t("editor:beamingPolicy.title")},showPowerOnly(){return!this.accountFeatures.beamPolicy},ddnOpts(){return{positionFixed:!0}},ddnClasses(){return(0,we.default)(["ddn-content","ddn-beaming"])}},methods:{onClose(){this.$refs.ddn.onClose()}}};var nt=t(247477);const Ke={};Ke.powerStyle=nt.default;const q=(0,U.A)(Ze,[["render",o],["__cssModules",Ke]])},104410:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=52,s=(0,o.pM)({name:"TbSwing",props:{scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>{var v;return(v=u.measureInfo.swing)==null?void 0:v.swing});return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:"setSwing",actionParams:{swing:{swing:!m.value,ratio:50}},active:m.value,powerWidth:30})}})},104662:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>S});var e=t(361744),o=t(538065);function r(N,k,O,X,L,y){return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(["separator",y.rootClass])},null,2)}var i=t(909696);const s={name:"ToolbarSeparator",setup(){const N=(0,i.q6)();return{displayMobileEditor:(0,e.EW)(()=>N.displayMobileEditor)}},computed:{rootClass(){return this.displayMobileEditor?this.$style.rootMobile:this.$style.rootDesktop}}};var d=t(417486),u=t.n(d),m=t(938793);const v={};v.$style=u();const S=(0,m.A)(s,[["render",r],["__cssModules",v]])},105884:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.toolbarHighlightBox_T7qgx{height:calc(100% - 10px);position:absolute;border-radius:4px;border:1px solid var(--f-primary)}html button.toolbarMobileHighlightBox_Sc0RN{border:1px solid var(--f-primary)}
`,""]),s.locals={toolbarHighlightBox:"toolbarHighlightBox_T7qgx",toolbarMobileHighlightBox:"toolbarMobileHighlightBox_Sc0RN"};const d=s},112980:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>se});var e=t(361744),o=t(538065),r=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(x,T,ne)=>T in x?r(x,T,{enumerable:!0,configurable:!0,writable:!0,value:ne}):x[T]=ne,m=(x,T)=>{for(var ne in T||(T={}))s.call(T,ne)&&u(x,ne,T[ne]);if(i)for(var ne of i(T))d.call(T,ne)&&u(x,ne,T[ne]);return x};const v=["aria-label"],_=["aria-label"],S=["onClick"],N=["onClick"];function k(x,T,ne,p,le,A){const de=(0,e.g2)("DropdownTrigger"),Ae=(0,e.g2)("Dropdown"),be=(0,e.gN)("dompurify-html"),ae=(0,e.gN)("tooltip");return p.isEditionBlocked?((0,e.uX)(),(0,e.CE)("button",{key:0,class:(0,o.C4)(["tb-tuplets-no disabled",m({},A.rootClasses)]),"aria-label":A.disabledText},[p.displayMobileEditor?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,o.C4)(x.tbButtonStyle.iconFlex)},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[x.tbButtonStyle.i]:!0,[x.tbButtonStyle.bigIcon]:!0})},null,2),[[be,le.icons.tuplet3,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(x.tbButtonStyle.t)},(0,o.v_)(A.mobileText),3)],2)):(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(x.tbButtonStyle.iconFlex)},null,2)),[[be,le.icons.tuplet3,"svg"],[ae,{text:A.disabledText}]])],10,v)):p.tupletType?((0,e.uX)(),(0,e.CE)("button",{key:1,class:(0,o.C4)(["tb-tuplets-rm active",m({},A.rootClasses)]),onClick:T[0]||(T[0]=ie=>A.exec("removeTuplet")),"aria-label":"Remove tuplet"},[p.displayMobileEditor?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,o.C4)(x.tbButtonStyle.iconFlex)},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[x.tbButtonStyle.i]:!0,[x.tbButtonStyle.bigIcon]:!0})},null,2),[[be,A.activeIcon,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(x.tbButtonStyle.t)},(0,o.v_)(A.mobileText),3)],2)):(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(x.tbButtonStyle.iconFlex)},null,2)),[[be,A.activeIcon,"svg"],[ae,{text:A.removeTupletText}]])],2)):A.noTupletAvailable?((0,e.uX)(),(0,e.CE)("button",{key:2,class:(0,o.C4)(["tb-tuplets-no disabled",m({},A.rootClasses)]),"aria-label":"No tuplet options available",type:"button"},[p.displayMobileEditor?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,o.C4)(x.tbButtonStyle.iconFlex)},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[x.tbButtonStyle.i]:!0,[x.tbButtonStyle.bigIcon]:!0})},null,2),[[be,le.icons.tuplet3,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(x.tbButtonStyle.t)},(0,o.v_)(A.mobileText),3)],2)):(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(x.tbButtonStyle.iconFlex)},null,2)),[[be,le.icons.tuplet3,"svg"],[ae,{text:A.noTupletText}]])],2)):A.singleTupletType?((0,e.uX)(),(0,e.CE)("button",{key:3,class:(0,o.C4)(["tb-tuplets-single",m({},A.rootClasses)]),onClick:T[1]||(T[1]=ie=>A.exec(A.singleTupletAction)),"aria-label":A.mobileText},[p.displayMobileEditor?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,o.C4)(x.tbButtonStyle.iconFlex)},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[x.tbButtonStyle.i]:!0,[x.tbButtonStyle.bigIcon]:!0})},null,2),[[be,A.singleTupletIcon,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(x.tbButtonStyle.t)},(0,o.v_)(A.mobileText),3)],2)):(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(x.tbButtonStyle.iconFlex)},null,2)),[[be,A.singleTupletIcon,"svg"],[ae,{text:A.singleTupletText}]])],10,_)):((0,e.uX)(),(0,e.Wv)(Ae,{key:4,class:"tb-tuplets",ref:"ddn",direction:A.ddnPlacement,"overflow-root-viewport":!0},{trigger:(0,e.k6)(()=>[(0,e.bF)(de,{class:(0,o.C4)(m({},A.rootClasses)),"aria-label":A.mobileText},{default:(0,e.k6)(()=>[p.displayMobileEditor?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,o.C4)(x.tbButtonStyle.iconFlex)},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[x.tbButtonStyle.i]:!0,[x.tbButtonStyle.bigIcon]:!0})},null,2),[[be,le.icons.tuplet3,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(x.tbButtonStyle.t)},(0,o.v_)(A.mobileText),3)],2)):(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(x.tbButtonStyle.iconFlex)},null,2)),[[be,le.icons.tuplet3,"svg"],[ae,{text:A.multipleTupletText}]])]),_:1},8,["class","aria-label"])]),default:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,o.C4)({[x.tupletStyle.content]:!0,[x.tupletStyle.root]:!0,[x.tupletStyle.hasCategories]:A.displayTupletCategories})},[(0,e.Lk)("div",{class:(0,o.C4)(x.tupletStyle.binary)},[(0,e.Lk)("div",{class:(0,o.C4)(x.tupletStyle.tuplets)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(A.possibleBinaryActions,ie=>(0,e.bo)(((0,e.uX)(),(0,e.CE)("a",{key:ie,onClick:Ne=>A.exec(ie)},null,8,S)),[[be,le.icons[le.actions[ie].icon],"svg"]])),128))],2),A.displayTupletCategories?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(x.tupletStyle.tupletsTypes)}," Binary ",2)):(0,e.Q3)("",!0)],2),(0,e.Lk)("div",{class:(0,o.C4)(x.tupletStyle.ternary)},[(0,e.Lk)("div",{class:(0,o.C4)(x.tupletStyle.tuplets)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(A.possibleTernaryActions,ie=>(0,e.bo)(((0,e.uX)(),(0,e.CE)("a",{key:ie,onClick:Ne=>A.exec(ie)},null,8,N)),[[be,le.icons[le.actions[ie].icon],"svg"]])),128))],2),A.displayTupletCategories?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(x.tupletStyle.tupletsTypes)}," Ternary ",2)):(0,e.Q3)("",!0)],2)],2)]),_:1},8,["direction"]))}var O=t(702868),X=t(27219),L=t(121648),y=t(909696),j=t(733268),w=t(674548),g=t(505522);const M={[O.A.DUPLET]:"addDuplet",[O.A.TRIPLET]:"addTriplet",[O.A.QUADRUPLET]:"addQuadruplet",[O.A.QUINTUPLET]:"addQuintuplet",[O.A.QUINTUPLET_COMPOUND]:"addQuintupletCompound",[O.A.SEXTUPLET]:"addSextuplet",[O.A.SEPTUPLET]:"addSeptuplet",[O.A.SEPTUPLET_COMPOUND]:"addSeptupletCompound",[O.A.NONUPLET]:"addNonuplet",[O.A.TUPLET_11]:"addTuplet11"},E=[O.A.DUPLET,O.A.QUADRUPLET,O.A.QUINTUPLET_COMPOUND,O.A.SEPTUPLET_COMPOUND],I=[O.A.TRIPLET,O.A.QUINTUPLET,O.A.SEXTUPLET,O.A.SEPTUPLET,O.A.NONUPLET,O.A.TUPLET_11],C={name:"TbTuplets",width:45,components:{Dropdown:j.m,DropdownTrigger:j.u},props:{scoreData:{type:Object,required:!0}},setup(){const x=(0,L.W)(),T=(0,y.q6)();return{isEditionBlocked:(0,e.EW)(()=>x.isEditionBlocked),displayMobileEditor:(0,e.EW)(()=>T.displayMobileEditor),tupletType:(0,e.EW)(()=>x.noteInfo.tupletType),possibleExpandedTuplets:(0,e.EW)(()=>x.noteInfo.possibleExpandedTuplets||[])}},data(){return{icons:g.default,actions:X.actions}},computed:{mobileText(){return w.MR.t("editor:tuplets.title")},ddnPlacement(){return this.displayMobileEditor?"top":"bottom"},activeIcon(){if(!this.tupletType)return null;const x=M[this.tupletType],T=X.actions[x].icon;return g.default[T]},removeTupletText(){return w.MR.t("editor:removeTuplet.title")},multipleTupletText(){return this.$t("editor:tuplets.title")},noTupletText(){return w.MR.t("editor:addTuplet.errNotAvailableDuration")},disabledText(){return w.MR.t("editor:action-disabled.editionBlocked")},possibleTernary(){return E.filter(x=>this.possibleExpandedTuplets.includes(x))},possibleTernaryActions(){return this.possibleTernary.map(x=>M[x])},possibleBinary(){return I.filter(x=>this.possibleExpandedTuplets.includes(x))},possibleBinaryActions(){return this.possibleBinary.map(x=>M[x])},noTupletAvailable(){return this.possibleExpandedTuplets.length===0},singleTupletType(){return this.possibleExpandedTuplets.length===1?this.possibleExpandedTuplets[0]:null},singleTupletAction(){return M[this.singleTupletType]},singleTupletIcon(){const x=X.actions[this.singleTupletAction].icon;return g.default[x]},singleTupletText(){return w.MR.t(`editor:${this.singleTupletAction}.title`)},displayTupletCategories(){return this.possibleTernary.length>0&&this.possibleBinary.length>0},rootClasses(){return this.displayMobileEditor?{[this.tbButtonStyle.rootCommon]:!0,[this.tbButtonStyle.rootMobileDetailed]:!0}:{[this.tbButtonStyle.rootCommon]:!0,[this.tbButtonStyle.rootDesktop]:!0}}},methods:{exec(x){this.scoreData.scoreActions.executePublicAction(x)}}};var Z=t(235398),te=t(430098),U=t.n(te),b=t(938793);const z={};z.tbButtonStyle=Z.default,z.tupletStyle=U();const se=(0,b.A)(C,[["render",k],["__cssModules",z]])},115033:(l,n,t)=>{"use strict";t.d(n,{A:()=>i});var e=t(614653),o=t(761300),r=t(525205);function i({root:s,kind:d,degrees:u,bass:m,type:v},_,S,N){const k=e.default.createJazz(s,d);u&&e.default.setDegrees(k,u),m&&e.default.setBass(k,m),v&&e.default.setType(k,v);const O=(0,r.A)(S,k,N);return O!=null?O:(0,o.A)(k,_)}},116450:(l,n,t)=>{"use strict";t.d(n,{gv:()=>X,I_:()=>L,iK:()=>j,mg:()=>E,tq:()=>M,Kr:()=>g,d4:()=>y});var e=t(121648),o=t(361744),r=t(474976),i=t(259563),s=t(956112),d=t(601277),u=t(353922),m=t(724095),v=t(603581),_=t(97324),S=t(359932),N=t(995677),k=t(909696);function O(I){return I}const X={copy:{name:"Copy",ro:!0},cut:{name:"Cut"},paste:{name:"Paste"},undo:{name:"ToolbarSimpleIcon",props:{action:"undo"}},redo:{name:"ToolbarSimpleIcon",props:{action:"redo"}},layout:{name:"ToolbarSimpleIcon",props:{action:"showLayoutSettings",powerWidth:30,premiumFeatures:["notesHeads","customLayout"]},width:59},export:{name:"Export",props:{mode:"export"},ro:!0,width:36},print:{name:"Export",props:{mode:"print"},ro:!0,width:36},zoomIn:{name:"Zoom",props:{mode:"+"},ro:!0,hideOnMobile:!0},zoomOut:{name:"Zoom",props:{mode:"-"},ro:!0,hideOnMobile:!0},switchScoreDisplayMode:{name:"DisplayMode",ro:!0},switchTouchUI:{name:"PianoKeyboard",hideOnMobile:!0,displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbTouchUI)},showKeyboardShortcuts:{name:"ToolbarSimpleIcon",hideOnMobile:!0,props:{action:"showKeyboardShortcuts"}},disableChromelessInterface:{name:"ToolbarSimpleIcon",props:{action:"disableChromelessInterface"},width:32,ro:!0,hideOnMobile:!0,displayConditionGetter:(0,o.EW)(()=>(0,k.q6)().displayChromelessUi)},voices:{name:"Voices",hideOnMobile:!0},setUnpitchedNoteHeadNormal:{name:"NoteUnpitchedHead",props:{head:u.A.NORMAL},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbPartHeadNormal),hideOnMobile:!0},setUnpitchedNoteHeadX:{name:"NoteUnpitchedHead",props:{head:u.A.X},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbPartHeadX),hideOnMobile:!0},setUnpitchedNoteHeadCircleX:{name:"NoteUnpitchedHead",props:{head:u.A.X_CIRCLE},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbPartHeadXCircle),hideOnMobile:!0},setUnpitchedNoteHeadDiamond:{name:"NoteUnpitchedHead",props:{head:u.A.DIAMOND},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbPartHeadDiamond),hideOnMobile:!0},setUnpitchedNoteHeadSlash:{name:"NoteUnpitchedHead",props:{head:u.A.SLASH},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbPartHeadSlash),hideOnMobile:!0},setUnpitchedNoteHeadSlashed:{name:"NoteUnpitchedHead",props:{head:u.A.SLASHED},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbPartHeadSlashed),hideOnMobile:!0},setUnpitchedNoteHeadBackSlashed:{name:"NoteUnpitchedHead",props:{head:u.A.BACK_SLASHED},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbPartHeadBackSlashed),hideOnMobile:!0},setUnpitchedNoteHeadTriangle:{name:"NoteUnpitchedHead",props:{head:u.A.TRIANGLE},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbPartHeadTriangle),hideOnMobile:!0},setUnpitchedNoteHeadInvertedTriangle:{name:"NoteUnpitchedHead",props:{head:u.A.INVERTED_TRIANGLE},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbPartHeadInvertedTriangle),hideOnMobile:!0},setUnpitchedNoteHeadSquare:{name:"NoteUnpitchedHead",props:{head:u.A.SQUARE},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbPartHeadSquare),hideOnMobile:!0},setUnpitchedNoteHeadCross:{name:"NoteUnpitchedHead",props:{head:u.A.CROSS},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbPartHeadSlash),hideOnMobile:!0},setUnpitchedNoteHeadArrowDown:{name:"NoteUnpitchedHead",props:{head:u.A.ARROW_DOWN},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbPartHeadArrowDown),hideOnMobile:!0},setUnpitchedNoteHeadArrowUp:{name:"NoteUnpitchedHead",props:{head:u.A.ARROW_UP},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbPartHeadArrowUp),hideOnMobile:!0},setNoteColor:{name:"NoteColor"},natural:{name:"NoteNatural",instrumentGroup:"pitched"},sharp:{name:"NoteAccidental",instrumentGroup:"pitched"},flat:{name:"NoteAccidental",instrumentGroup:"pitched"},quarterAccidental:{name:"QuarterAccidental",instrumentGroup:"pitched",displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbQuarterAccidental)},toggleConcertPitch:{name:"ConcertPitch",displayConditionGetter:(0,o.EW)(()=>(0,k.q6)().hasTransposingInstrument)},cycleEditionMode:{name:"EditionMode"},changeKeepExistingRestDuration:{name:"ChangeKeepExistingRestDuration",displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbIsReplaceMode)},switchEnharmonic:{name:"SwitchEnharmonic",instrumentGroup:"pitched"},transpose:{name:"Transpose",instrumentGroup:"pitched"},changeDurationWhole:{name:"NoteDuration",props:{duration:i.default.FULL},width:40},changeDurationHalf:{name:"NoteDuration",props:{duration:i.default.HALF},width:37},changeDurationQuarter:{name:"NoteDuration",props:{duration:i.default.QUARTER},width:37},changeDurationEighth:{name:"NoteDuration",props:{duration:i.default.EIGHT}},changeDurationSixteenth:{name:"NoteDuration",props:{duration:i.default.SIXTEENTH}},changeDurationThirtySecond:{name:"NoteDuration",props:{duration:i.default.THIRTY_SECOND}},changeDurationSixtyFourth:{name:"NoteDuration",props:{duration:i.default.SIXTY_FOURTH}},changeDurationMode:{name:"ChangeDurationMode",displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbIsReplaceMode)},insertRest:{name:"ToolbarSimpleIcon",props:{action:"insertRest"},width:43,displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbIsInsertMode)},dot:{name:"Dots"},tie:{name:"Tie"},beamingPolicy:{name:"BeamingPolicy",width:36},toggleForceBeam:{name:"Beam",width:40},toggleForceUnbeam:{name:"Beam",width:45},ghostNote:{name:"Ghost"},toggleDeadNote:{name:"Dead",instrumentGroup:"pitched"},insertSlashedGrace:{name:"ToolbarSimpleIcon",props:{action:"insertSlashedGrace"},width:43},insertGrace:{name:"ToolbarSimpleIcon",props:{action:"insertGrace"},width:43},octaveShift:{name:"OctaveShift",instrumentGroup:"pitched"},tuplets:{name:"Tuplets"},remove:{name:"ToolbarSimpleIcon",props:{action:"removeThenGoLeft"},width:36,hideOnMobile:!0},toggleStaccato:{name:"Articulation",props:{articulation:r.default.STACCATO}},toggleStaccatissimo:{name:"Articulation",props:{articulation:r.default.STACCATISSIMO}},toggleTenuto:{name:"Articulation",props:{articulation:r.default.TENUTO}},toggleDetachedLegato:{name:"Articulation",props:{articulation:r.default.STACCATO_TENUTO}},toggleAccent:{name:"Articulation",props:{articulation:r.default.ACCENT}},toggleStrongAccent:{name:"Articulation",props:{articulation:r.default.STRONG}},toggleDoit:{name:"Articulation",instrumentGroup:"expressive",props:{articulation:r.default.DOIT}},toggleFallOff:{name:"Articulation",instrumentGroup:"expressive",props:{articulation:r.default.FALLOFF}},togglePlop:{name:"Articulation",instrumentGroup:"expressive",props:{articulation:r.default.PLOP}},toggleScoop:{name:"Articulation",instrumentGroup:"expressive",props:{articulation:r.default.SCOOP}},toggleFermata:{name:"Articulation",props:{articulation:d.default.FERMATA}},toggleSlurAtNote:{name:"Slurs"},toggleGraceSlurAtNote:{name:"GraceSlurs"},togglePreBend:{name:"PreBend",instrumentGroup:"pluckedStrings"},toggleBend:{name:"Bend",instrumentGroup:"pluckedStrings"},toggleBendRelease0:{name:"BendRelease",instrumentGroup:"pluckedStrings"},toggleHarmonic:{name:"Harmonic",instrumentGroup:"stringsCommon"},toggleHammerOnPullOff:{name:"HammerOnPullOff"},toggleSlide:{name:"Slide",instrumentGroup:"pluckedStrings"},toggleBelowPalmMute:{name:"PluckedRange",instrumentGroup:"pluckedStrings",props:{pluckedRangeType:_.A.PALM_MUTE}},toggleBelowLetRing:{name:"PluckedRange",instrumentGroup:"pluckedStrings",props:{pluckedRangeType:_.A.LET_RING}},toggleUpStroke:{name:"Technical",instrumentGroup:"pluckedStrings",props:{technical:S.default.UPBOW}},toggleDownStroke:{name:"Technical",instrumentGroup:"pluckedStrings",props:{technical:S.default.DOWNBOW}},toggleUpBow:{name:"Technical",instrumentGroup:"strings",props:{technical:S.default.UPBOW}},toggleDownBow:{name:"Technical",instrumentGroup:"strings",props:{technical:S.default.DOWNBOW}},toggleSnapPizzicato:{name:"Technical",instrumentGroup:"strings",props:{technical:S.default.SNAP_PIZZICATO}},toggleLeftHandPizzicato:{name:"Technical",instrumentGroup:"strings",props:{technical:S.default.STOPPED}},toggleFingering:{name:"Fingerings",instrumentGroup:"pitched"},toggleThumbPosition:{name:"Technical",instrumentGroup:"strings",props:{technical:S.default.THUMB_POSITION}},toggleBreathMark:{name:"Articulation",instrumentGroup:"notStrings",props:{articulation:r.default.BREATHMARK}},toggleBowLift:{name:"Articulation",instrumentGroup:"strings",props:{articulation:r.default.BREATHMARK}},toggleCaesura:{name:"Articulation",props:{articulation:r.default.CAESURA}},toggleDrumroll:{name:"Drumroll",instrumentGroup:"percussions"},toggleBuzz:{name:"BinaryOrnament",props:{ornament:m.A.BUZZ},instrumentGroup:"percussions"},toggleTrill:{name:"BinaryOrnament",props:{ornament:m.A.TRILLMARK},instrumentGroup:"pitched"},tremolo:{name:"Tremolo",instrumentGroup:"pitched"},tremolo2:{name:"Tremolo2",instrumentGroup:"pitched"},toggleArpeggio:{name:"Arpeggio",instrumentGroup:"pitched"},mordent:{name:"Mordent",instrumentGroup:"pitched"},turn:{name:"Turn",instrumentGroup:"pitched"},toggleGlissando:{name:"Glissando",instrumentGroup:"pitched"},toggleCrescendoBelow:{name:"Wedge",props:{wedge:N.A.CRESCENDO}},toggleDiminuendoBelow:{name:"Wedge",props:{wedge:N.A.DIMINUENDO}},toggleDynamicsPpp:{name:"Dynamic",props:{dynamic:"ppp"}},toggleDynamicsPp:{name:"Dynamic",props:{dynamic:"pp"}},toggleDynamicsP:{name:"Dynamic",props:{dynamic:"p"}},toggleDynamicsMp:{name:"Dynamic",props:{dynamic:"mp"}},toggleDynamicsMf:{name:"Dynamic",props:{dynamic:"mf"}},toggleDynamicsF:{name:"Dynamic",props:{dynamic:"f"}},toggleDynamicsFf:{name:"Dynamic",props:{dynamic:"ff"}},toggleDynamicsFff:{name:"Dynamic",props:{dynamic:"fff"}},toggleDynamicsSfz:{name:"Dynamic",props:{dynamic:"sfz"}},toggleDynamicsRfz:{name:"Dynamic",props:{dynamic:"rfz"}},toggleDynamicsPf:{name:"Dynamic",props:{dynamic:"pf"}},toggleDynamicsFp:{name:"Dynamic",props:{dynamic:"fp"}},togglePizzPizzicato:{name:"Pizzicato",props:{pizzicato:v.A.PIZZICATO},instrumentGroup:"strings"},togglePizzArco:{name:"Pizzicato",props:{pizzicato:v.A.ARCO},instrumentGroup:"strings"},toggleMuteOn:{name:"Mute",props:{mute:s.A.ON},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().partHasMuteMode)},toggleMuteOff:{name:"Mute",props:{mute:s.A.OFF},displayConditionGetter:(0,o.EW)(()=>(0,e.W)().partHasMuteMode)},togglePedal:{name:"Pedal",instrumentGroup:"pedal"},insertMeasureBefore:{name:"ToolbarSimpleIcon",props:{action:"insertMeasureBefore"},width:69},insertMeasureAfter:{name:"ToolbarSimpleIcon",props:{action:"insertMeasureAfter"},width:59},removeMeasure:{name:"ToolbarSimpleIcon",props:{action:"removeMeasure"},width:59},toggleSystemBreak:{name:"SystemBreak"},togglePageBreak:{name:"PageBreak"},addMultiMeasureRest:{name:"MultiMeasureRest"},clef:{name:"Clef",instrumentGroup:"pitched"},keySignature:{name:"KeySignature",instrumentGroup:"pitched"},timeSignature:{name:"TimeSignature"},tempo:{name:"Tempo"},setSwing:{name:"Swing"},toggleDoubleBarline:{name:"Barline",props:{barline:"double"}},toggleLeftRepeatBarline:{name:"Barline",props:{barline:"leftBarline"}},toggleRightRepeatBarline:{name:"Barline",props:{barline:"rightBarline"}},addRepeatXTimes:{name:"RepeatXTimes"},ending:{name:"Ending"},jumpCall:{name:"JumpCall"},jumpTag:{name:"JumpTag"},toggleMeasureRepeat:{name:"MeasureRepeat"},measureSlash:{name:"Slash"},toggleAccelerando:{name:"TempoChange",props:{tempoChange:"accelerando"},width:64},toggleRitardando:{name:"TempoChange",props:{tempoChange:"ritardando"},width:47},rehearsal:{name:"Rehearsal"},toggleLyricMode:{name:"TextMode",props:{textMode:"lyric"}},toggleChordMode:{name:"TextMode",props:{textMode:"chord"}},toggleClassicChordMode:{name:"TextMode",props:{textMode:"classicChord"}},toggleFiguredBassMode:{name:"TextMode",props:{textMode:"figuredBass"},hideOnNativeMobile:!0},toggleAnnotationMode:{name:"TextMode",props:{textMode:"word"}}},L={unpitched:["unpitched-percussion"],percussions:["unpitched-percussion","pitched-percussion"],pitched:["brass","electronic-instruments","free-reed","keyboards","default-pitched","pitched-percussion","plucked-strings","special","strings","vocals","woodwinds"],strings:["strings"],notStrings:["brass","electronic-instruments","free-reed","keyboards","default-pitched","pitched-percussion","plucked-strings","special","vocals","woodwinds","unpitched-percussion"],pluckedStrings:["plucked-strings"],stringsCommon:["strings","plucked-strings"],brass:["brass"],expressive:["brass","strings","vocals","woodwinds"],pedal:["keyboards","pitched-percussion"]},y=[{name:"main",action:"useMainToolbar",title:"editor:toolbar.document.title",hideOnMobile:!0,groups:[{displayPriority:100,elements:["undo","redo"]},{displayPriority:100,elements:["copy","cut","paste"]},{displayPriority:100,elements:["export","print","layout"]},{displayPriority:100,elements:["zoomIn","zoomOut","switchScoreDisplayMode"]},{displayPriority:100,elements:["switchTouchUI","showKeyboardShortcuts","disableChromelessInterface"]}]},{name:"note",action:"useNoteToolbar",title:"editor:toolbar.notes.title",ro:!1,mobileIcon:"pianoKeyboard",groups:[{displayPriority:95,elements:["voices"]},{displayPriority:95,elements:["setUnpitchedNoteHeadNormal","setUnpitchedNoteHeadX","setUnpitchedNoteHeadSlash","setUnpitchedNoteHeadCircleX","setUnpitchedNoteHeadSlashed","setUnpitchedNoteHeadBackSlashed","setUnpitchedNoteHeadDiamond","setUnpitchedNoteHeadTriangle","setUnpitchedNoteHeadInvertedTriangle","setUnpitchedNoteHeadSquare","setUnpitchedNoteHeadCross","setUnpitchedNoteHeadArrowDown","setUnpitchedNoteHeadArrowUp"]},{displayPriority:95,elements:["natural","sharp","flat","switchEnharmonic","quarterAccidental"]},{cssClasses:["tb-durations"],displayPriority:100,elements:["changeDurationWhole","changeDurationHalf","changeDurationQuarter","changeDurationEighth","changeDurationSixteenth","changeDurationThirtySecond","changeDurationSixtyFourth","dot","tie","tuplets"]},{displayPriority:90,elements:["cycleEditionMode","insertRest","changeDurationMode","changeKeepExistingRestDuration"]},{displayPriority:50,elements:["beamingPolicy","toggleForceBeam","toggleForceUnbeam"]},{displayPriority:20,elements:["insertSlashedGrace","insertGrace","ghostNote","toggleDeadNote"]},{displayPriority:80,elements:["toggleConcertPitch","transpose","octaveShift"]},{displayPriority:80,elements:["setNoteColor"]},{displayPriority:99,elements:["remove"]}]},{name:"tab",action:"useTabToolbar",title:"editor:toolbar.tab.title",displayConditionGetter:(0,o.EW)(()=>(0,e.W)().tbDispalyTabToolbar),ro:!1,mobileIcon:"tab",groups:[{displayPriority:10,elements:["voices"]},{displayPriority:90,elements:["toggleBend","togglePreBend","toggleBendRelease0"]},{displayPriority:90,elements:["toggleHarmonic"]},{displayPriority:90,elements:["toggleHammerOnPullOff","toggleSlide"]},{displayPriority:80,elements:["toggleBelowPalmMute","toggleBelowLetRing"]},{displayPriority:80,elements:["toggleUpStroke","toggleDownStroke"]}]},{name:"articulation",action:"useArticulationToolbar",title:"editor:toolbar.articulations.title",mobileIcon:"slurs",ro:!1,groups:[{displayPriority:100,elements:["voices"]},{displayPriority:20,elements:["toggleStaccato","toggleStaccatissimo","toggleTenuto","toggleDetachedLegato"]},{displayPriority:20,elements:["toggleStrongAccent","toggleAccent"]},{displayPriority:20,elements:["toggleFermata","toggleSlurAtNote","toggleGraceSlurAtNote"]},{displayPriority:20,elements:["toggleMuteOn","toggleMuteOff"]},{displayPriority:20,elements:["toggleUpBow","toggleDownBow","togglePizzPizzicato","togglePizzArco","toggleSnapPizzicato","toggleLeftHandPizzicato","toggleHarmonic"]},{displayPriority:20,elements:["toggleDoit","toggleFallOff","togglePlop","toggleScoop"]},{displayPriority:20,elements:["toggleFingering","toggleThumbPosition"]},{displayPriority:20,elements:["toggleBreathMark","toggleBowLift","toggleCaesura"]},{displayPriority:20,elements:["toggleDrumroll","toggleBuzz"]},{displayPriority:100,elements:["remove"]}]},{name:"ornament",action:"useOrnamentToolbar",title:"editor:toolbar.ornaments.title",mobileIcon:"tremolo",ro:!1,displayConditionGetter:(0,o.EW)(()=>(0,e.W)().isPitchedPart),groups:[{displayPriority:100,elements:["voices"]},{displayPriority:20,elements:["toggleTrill","tremolo","tremolo2"]},{displayPriority:20,elements:["toggleArpeggio","toggleGlissando","mordent","turn"]},{displayPriority:100,elements:["remove"]}]},{name:"dynamic",action:"useDynamicToolbar",title:"editor:toolbar.dynamics.title",mobileIcon:"mobDyanmic",ro:!1,groups:[{displayPriority:50,elements:["voices"]},{displayPriority:80,elements:["toggleCrescendoBelow","toggleDiminuendoBelow"]},{displayPriority:70,elements:["toggleDynamicsPpp","toggleDynamicsPp","toggleDynamicsP","toggleDynamicsMp","toggleDynamicsMf","toggleDynamicsF","toggleDynamicsFf","toggleDynamicsFff"]},{displayPriority:30,elements:["toggleDynamicsSfz","toggleDynamicsRfz","toggleDynamicsFp","toggleDynamicsPf"]},{displayPriority:60,elements:["togglePedal"]},{displayPriority:100,elements:["remove"]}]},{name:"measure",action:"useMeasureToolbar",title:"editor:toolbar.measures.title",mobileIcon:"mobMeasure",ro:!1,groups:[{displayPriority:10,elements:["voices"]},{displayPriority:90,elements:["insertMeasureBefore","insertMeasureAfter","removeMeasure","toggleSystemBreak","togglePageBreak","addMultiMeasureRest"]},{displayPriority:80,elements:["clef","keySignature","timeSignature","tempo","setSwing","rehearsal"]},{displayPriority:50,elements:["toggleDoubleBarline","toggleLeftRepeatBarline","toggleRightRepeatBarline","addRepeatXTimes"]},{displayPriority:25,elements:["toggleMeasureRepeat","measureSlash"]},{displayPriority:20,elements:["jumpTag","jumpCall","ending"]},{displayPriority:19,elements:["toggleAccelerando","toggleRitardando"]},{displayPriority:99,elements:["remove"]}]},{name:"text",action:"useTextToolbar",title:"editor:toolbar.text.title",mobileIcon:"mobText",ro:!1,groups:[{displayPriority:10,elements:["voices"]},{displayPriority:100,elements:["toggleLyricMode"]},{displayPriority:100,elements:["toggleChordMode","toggleClassicChordMode","toggleFiguredBassMode"]},{displayPriority:100,elements:["toggleAnnotationMode"]},{displayPriority:90,elements:["remove"]}]}],j=1110,w=42,g=24,M=36,E=1+5*2},117535:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_Y1DCJ{z-index:1000;border-top-right-radius:8px;border-top-left-radius:8px;box-shadow:0 8px 18px -6px #2f34461f,0 12px 42px -4px #2f34461f;background-color:var(--f-bg-0);position:relative}.ddnRoot_jcez5{border-radius:8px;border:solid 1px var(--f-ink-10)}.arrow_H2IDE,.arrow_H2IDE:before{position:absolute;width:8px;height:8px;background:inherit;z-index:-1}.arrow_H2IDE{visibility:hidden}[data-popper-placement^=top]>[data-popper-arrow]{bottom:-4px}[data-popper-placement^=bottom]>[data-popper-arrow]{top:-4px}[data-popper-placement^=right]>[data-popper-arrow]{left:-4px}[data-popper-placement^=left]>[data-popper-arrow]{right:-4px}.arrow_H2IDE:before{visibility:visible;content:"";transform:rotate(45deg)}.bottomPadding_L95bX .BottomSheets{padding-bottom:20px}html[data-color-mode=dark] .root_Y1DCJ{background-color:var(--f-bg-dark)}html[data-color-mode=dark] .root_Y1DCJ .content_ayt9g{color:var(--f-subdue-40)}html[data-color-mode=dark] .root_Y1DCJ .BottomSheets-header,html[data-color-mode=dark] .root_Y1DCJ .dialog-header{color:#fff}html[data-color-mode=dark] .root_Y1DCJ .BottomSheets,html[data-color-mode=dark] .root_Y1DCJ [role=dialog]{background-color:var(--f-bg-dark)}html[data-color-mode=dark] .root_Y1DCJ .BottomSheets input,html[data-color-mode=dark] .root_Y1DCJ [role=dialog] input{color:var(--f-subdue-40);background-color:var(--f-bg-dark)}html[data-color-mode=dark] .ddnRoot_jcez5{border-color:var(--f-dark-subdue)}
`,""]),s.locals={root:"root_Y1DCJ",ddnRoot:"ddnRoot_jcez5",arrow:"arrow_H2IDE",bottomPadding:"bottomPadding_L95bX",content:"content_ayt9g"};const d=s},119167:(l,n,t)=>{"use strict";t.d(n,{A:()=>oo});var e=t(361744),o=t(538065),r=t(555381);const i=["placeholder"],s={key:1};function d(P,ye,Be,Et,qe,ke){const St=(0,e.g2)("TabItem"),dt=(0,e.g2)("Tab"),h=(0,e.g2)("arrowLeft"),D=(0,e.g2)("FButton"),he=(0,e.g2)("ChordPreview"),We=(0,e.g2)("arrowRight"),mt=(0,e.g2)("RootInput"),R=(0,e.g2)("QualityInput"),Y=(0,e.g2)("DegreeModInput"),ve=(0,e.g2)("InversionInput"),Mt=(0,e.g2)("InfoIcon"),Nt=(0,e.g2)("FButtonGroup"),Jt=(0,e.gN)("tooltip");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)({[P.$style.root]:!0,[P.$style.isMobile]:this.displayMobileEditor}),"data-cy":"ddn-inner-jazz-chords"},[(0,e.bF)(dt,{class:(0,o.C4)(P.$style.tabs)},{default:(0,e.k6)(()=>[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(ke.availableSteps,Wt=>((0,e.uX)(),(0,e.Wv)(St,{key:Wt,active:qe.currentStep===Wt,onClick:ro=>P.setStep(Wt),size:"small"},{default:(0,e.k6)(()=>[(0,e.eW)((0,o.v_)(P.$t(`editor:jazzChords.step.${Wt}${this.displayMobileEditor?"-short":""}`)),1)]),_:2},1032,["active","onClick"]))),128))]),_:1},8,["class"]),(0,e.Lk)("div",{class:(0,o.C4)(P.$style.preview)},[(0,e.bo)(((0,e.uX)(),(0,e.Wv)(D,{onClick:P.goLeft,theme:"ghost-subdue","aria-label":P.$t("editor:goLeft.title")},{default:(0,e.k6)(()=>[(0,e.bF)(h)]),_:1},8,["onClick","aria-label"])),[[Jt,{text:P.$t("editor:romanNumerals.shortcut.goLeft")}]]),(0,e.Lk)("div",{class:(0,o.C4)(P.$style.previewOuter)},[(0,e.bF)(he,{root:qe.chordData.root,quality:qe.chordData.quality,step:qe.currentStep,degrees:qe.chordData.degrees,bass:qe.chordData.bass,alter:qe.chordData.alter},null,8,["root","quality","step","degrees","bass","alter"]),(0,e.bF)(D,{type:"button",onClick:P.toggleAlter,theme:"ghost-subdue","default-text":ke.alterText,size:"small"},null,8,["onClick","default-text"])],2),(0,e.bo)(((0,e.uX)(),(0,e.Wv)(D,{onClick:P.goRight,"aria-label":P.$t("editor:goRight.title"),theme:"ghost-subdue"},{default:(0,e.k6)(()=>[(0,e.bF)(We)]),_:1},8,["onClick","aria-label"])),[[Jt,{text:P.$t("editor:romanNumerals.shortcut.goRight")}]])],2),qe.currentStep===qe.Step.ROOT?((0,e.uX)(),(0,e.Wv)(mt,{key:0,class:(0,o.C4)(P.$style.currentInput),step:ke.rootStep,alter:ke.rootAlter,onSetRootStep:P.setRootStep,onSetRootAlter:P.setRootAlter},null,8,["class","step","alter","onSetRootStep","onSetRootAlter"])):(0,e.Q3)("",!0),qe.currentStep===qe.Step.QUALITY?((0,e.uX)(),(0,e.Wv)(R,{key:1,class:(0,o.C4)(P.$style.currentInput),"quality-kind":ke.qualityKind,size:ke.size,onSetSize:P.setSize,onSetQuality:P.setQuality},null,8,["class","quality-kind","size","onSetSize","onSetQuality"])):(0,e.Q3)("",!0),qe.currentStep===qe.Step.DEGREE_MOD?((0,e.uX)(),(0,e.Wv)(Y,{key:2,ref:"degreeModInput",class:(0,o.C4)(P.$style.currentInput),root:qe.chordData.root,"quality-kind":ke.qualityKind,"provided-degrees":qe.chordData.degrees,"provided-can-use-suspended":qe.canUseSuspended,onSetDegrees:P.setDegrees},null,8,["class","root","quality-kind","provided-degrees","provided-can-use-suspended","onSetDegrees"])):(0,e.Q3)("",!0),qe.currentStep===qe.Step.INVERSION?((0,e.uX)(),(0,e.Wv)(ve,{key:3,class:(0,o.C4)(P.$style.currentInput),bass:qe.chordData.bass,root:qe.chordData.root,"quality-kind":ke.qualityKind,degrees:qe.chordData.degrees,onSetBass:P.setBass},null,8,["class","bass","root","quality-kind","degrees","onSetBass"])):(0,e.Q3)("",!0),(0,e.Lk)("div",{class:(0,o.C4)(P.$style.bottomBlock)},[ke.hasFormer||!Et.displayMobileEditor?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(P.$style.textBlock)},[Et.displayMobileEditor?(0,e.Q3)("",!0):(0,e.bo)(((0,e.uX)(),(0,e.CE)("input",{key:0,ref:"textInput",type:"text","onUpdate:modelValue":ye[0]||(ye[0]=Wt=>qe.textPreview=Wt),placeholder:qe.textPlaceholder,class:(0,o.C4)({[P.$style.input]:!0,[P.$style["input-small"]]:!0}),onKeypress:ye[1]||(ye[1]=(0,r.D$)(()=>{},["stop"])),onKeyup:ye[2]||(ye[2]=(0,r.D$)(()=>{},["stop"])),onKeydown:[ye[3]||(ye[3]=(0,r.jR)((...Wt)=>P.close&&P.close(...Wt),["esc"])),ye[4]||(ye[4]=(0,r.jR)((0,r.D$)((...Wt)=>P.next&&P.next(...Wt),["prevent"]),["space"])),ye[5]||(ye[5]=(0,r.jR)((0,r.D$)((...Wt)=>P.addChord&&P.addChord(...Wt),["prevent"]),["enter"])),ye[6]||(ye[6]=(0,r.D$)((...Wt)=>P.onKeyDown&&P.onKeyDown(...Wt),["stop"]))],onInput:ye[7]||(ye[7]=(...Wt)=>P.onTextInput&&P.onTextInput(...Wt))},null,42,i)),[[r.Jo,qe.textPreview]]),ke.hasFormer?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,o.C4)(P.$style.deleteBlock)},[(0,e.bF)(D,{type:"button",onClick:P.removeChord,theme:"ghost-subdue","default-text":"editor:jazzChords.deleteChord.title",size:"small"},null,8,["onClick"]),(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(P.$style.deleteInfo)},[(0,e.bF)(Mt)],2)),[[Jt,{text:P.$t("editor:jazzChords.deleteChord.desc"),placement:"bottom",arrow:!1,maxWidth:180,touch:!0}]])],2)):(0,e.Q3)("",!0)],2)):(0,e.Q3)("",!0),(0,e.Lk)("div",{class:(0,o.C4)(P.$style.footer)},[ke.canGoBack?((0,e.uX)(),(0,e.Wv)(D,{key:0,type:"button",onClick:P.back,theme:"ghost-subdue","default-text":ke.backText,size:"small"},null,8,["onClick","default-text"])):((0,e.uX)(),(0,e.CE)("div",s)),(0,e.bF)(Nt,null,{default:(0,e.k6)(()=>[ke.canGoNext?(0,e.bo)(((0,e.uX)(),(0,e.Wv)(D,{key:0,type:"button",onClick:P.next,theme:"outline","default-text":ke.nextText,size:"small"},null,8,["onClick","default-text"])),[[Jt,{text:P.$t("editor:jazzChords.shortcut.spacebar")}]]):(0,e.Q3)("",!0),(0,e.bo)((0,e.bF)(D,{type:"button",onClick:P.addChord,theme:"fill","default-text":ke.saveText,size:"small"},null,8,["onClick","default-text"]),[[Jt,{text:P.$t("editor:jazzChords.shortcut.enter")}]])]),_:1})],2)],2)],2)}var u=t(529355),m=t(697333),v=t(121648),_=t(909696),S=t(584527),N=t(575760),k=t(613481),O=t(599325),X=t(255793);const L=["data-cy"],y=["aria-pressed"],j=["aria-pressed"],w=["aria-selected","onClick"],g=["aria-selected","onClick"],M=["onClick"];function E(P,ye,Be,Et,qe,ke){const St=(0,e.g2)("AddDegreeModStep"),dt=(0,e.g2)("CloseIcon");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(P.$style.root)},[(0,e.Lk)("div",{class:(0,o.C4)(P.$style.addDegreeBlock)},[(0,e.Lk)("div",{class:(0,o.C4)(P.$style.baseChord)},(0,o.v_)(P.$t("editor:jazzChords.base-chord"))+": "+(0,o.v_)(ke.baseChordString),3),(0,e.Lk)("div",{class:(0,o.C4)(P.$style.addDegreeSelect)},[(0,e.bF)(St,{degrees:ke.addableDegrees,onAddStep:ke.addDegree},null,8,["degrees","onAddStep"])],2)],2),(0,e.Lk)("div",{class:(0,o.C4)(P.$style.pitchesList)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(ke.degreesList,h=>((0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(P.$style.buttons),"data-cy":ke.getRowDataCy(h),key:h},[h==="suspended"?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.Lk)("button",{type:"button",onClick:ye[0]||(ye[0]=(...D)=>ke.toggleSus2&&ke.toggleSus2(...D)),"aria-pressed":qe.hasSus2,class:(0,o.C4)({[P.$style.entry]:!0,[P.$style.active]:qe.hasSus2})},(0,o.v_)(P.$t("editor:jazzChords.sus2")),11,y),(0,e.Lk)("button",{type:"button",onClick:ye[1]||(ye[1]=(...D)=>ke.toggleSus4&&ke.toggleSus4(...D)),"aria-pressed":qe.hasSus4,class:(0,o.C4)({[P.$style.entry]:!0,[P.$style.active]:qe.hasSus4})},(0,o.v_)(P.$t("editor:jazzChords.sus4")),11,j)],64)):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.Lk)("div",{class:(0,o.C4)(P.$style.stepLabel)},(0,o.v_)(h),3),(0,e.Lk)("button",{type:"button",class:(0,o.C4)({[P.$style.entry]:!0,[P.$style.omit]:!0,[P.$style.active]:ke.isDegreeMissing(h),[P.$style.isDefault]:ke.canRemoveDegree(h)}),"aria-selected":ke.isDegreeMissing(h),onClick:D=>ke.unsetDegree(h)},(0,o.v_)(ke.getRemoveText(h)),11,w),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(qe.ALTERS,D=>((0,e.uX)(),(0,e.CE)("button",{key:D,type:"button",class:(0,o.C4)({[P.$style.entry]:!0,[P.$style.active]:ke.isDegreeSelected(h,D),[P.$style.isDefault]:ke.isDegreeFromKind(h,D)}),"aria-selected":ke.isDegreeSelected(h,D),onClick:he=>ke.setDegree(h,D)},(0,o.v_)(ke.getPitchText(h,D)),11,g))),128)),ke.canRemoveDegree(h)?((0,e.uX)(),(0,e.CE)("button",{key:0,type:"button","aria-label":"flat:remove",class:(0,o.C4)([P.$style.entry,P.$style.remove]),onClick:D=>ke.removeDegree(h)},[(0,e.bF)(dt)],10,M)):(0,e.Q3)("",!0)],64))],10,L))),128))],2)],2)}var I=t(544321),C=t(533343),Z=t(601202),te=t(74957),U=t(865349),b=t(184469),z=t(310868),ce=t(377180),se=t(464173),x=t(381216),T=t(487420);const ne=["disabled"],p=["onClick"];function le(P,ye,Be,Et,qe,ke){return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(P.$style.dropdown)},[(0,e.Lk)("div",{class:(0,o.C4)([P.$style.input,P.$style.ddnTrigger,P.$style["input-small"]]),disabled:ke.additionDisabled,onClick:ye[0]||(ye[0]=(...St)=>ke.toggleDdn&&ke.toggleDdn(...St))},(0,o.v_)(P.$t("editor:jazzChords.add-degree")),11,ne),(0,e.bo)((0,e.Lk)("div",{class:(0,o.C4)(P.$style.ddnContent)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Be.degrees,St=>((0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(P.$style.ddnItem),onClick:dt=>ke.addStep(St.value),key:St.value},(0,o.v_)(St.value)+" \u2014 "+(0,o.v_)(ke.pitchToString(St.pitch)),11,p))),128))],2),[[r.aG,qe.ddnOpen]])],2)}function A(P){return P===-1?"b":P===1?"#":""}const de={name:"AddDegreeModStep",emits:["addStep"],props:{degrees:{type:Array,required:!0}},data(){return{ddnOpen:!1}},computed:{additionDisabled(){return!this.degrees.length===0}},methods:{toggleDdn(){this.ddnOpen=!this.ddnOpen},pitchToString(P){const ye=P.step,Be=A(P.alter);return`${ye}${Be}`},addStep(P){this.$emit("addStep",P),this.ddnOpen=!1}}};var Ae=t(226787),be=t.n(Ae),ae=t(938793);const ie={};ie.$style=be();const $e=(0,ae.A)(de,[["render",le],["__cssModules",ie]]);var Pe=t(599322),we=t(637963);const Ze=[2,3,4,5,6,7,9,11,13],nt=[-1,0,1],Ke=0,at=new Set([se.A.MAJOR,se.A.AUGMENTED,se.A.MAJOR_6,se.A.SIX_NINE,se.A.DOMINANT_7_6,se.A.DOMINANT_7,se.A.MAJOR_7,se.A.AUGMENTED_7,se.A.AUGMENTED_MAJOR_7,se.A.DOMINANT_9,se.A.MAJOR_9,se.A.AUGMENTED_9,se.A.AUGMENTED_MAJOR_9,se.A.DOMINANT_11,se.A.MAJOR_11,se.A.AUGMENTED_11,se.A.AUGMENTED_MAJOR_11,se.A.DOMINANT_13,se.A.MAJOR_13,se.A.AUGMENTED_13,se.A.AUGMENTED_MAJOR_13]);function q(P,ye){let Be="";return ye===-2?Be="bb":ye===2?Be="##":ye===-1?Be="b":ye===1&&(Be="#"),`${P}${Be}`}const K={name:"DegreeModInput",emits:["setDegrees"],components:{AddDegreeModStep:$e,CloseIcon:T.A},props:{qualityKind:{type:String,required:!0},root:{type:Object,required:!0},providedDegrees:{type:Array,required:!0},providedCanUseSuspended:{type:Boolean,default:!0}},data(){return{allPossiblePitches:null,harmonyDefaultPitches:null,currentListPitches:null,selectedPitches:null,ALTERS:nt,currentDegrees:new Map,hasSus2:!1,hasSus4:!1,addedDegrees:new Set}},computed:{kindDegrees(){const P=(0,U.A)(this.qualityKind);return new Map(P.map(ye=>[te.A.getValue(ye),ye]))},addableDegrees(){return Ze.filter(P=>!this.kindDegrees.has(P)&&!this.addedDegrees.has(P)).map(P=>{const ye=ce.default.copy(I.T3[P]),Be=u.A.transpose(this.root,ye),Et=u.A.getAlter(Be),qe=u.A.getStep(Be);return{value:P,pitch:{step:qe,alter:Et}}})},canUseSuspended(){if(this.addedDegrees.has(2)||this.addedDegrees.has(4)||!this.currentDegrees.has(3))return!1;const P=this.currentDegrees.get(3);return te.A.getAlter(P)!==0?!1:at.has(this.qualityKind)},degreesList(){const P=Ze.filter(ye=>(this.addedDegrees.has(ye)||this.kindDegrees.has(ye))&&(!this.useSuspended||![2,3,4].includes(ye)));return this.canUseSuspended&&P.unshift("suspended"),P},useSuspended(){return this.hasSus2||this.hasSus4},baseChordString(){let P="";return this.qualityKind!==se.A.MAJOR&&(P=(0,Pe.d)({key:this.qualityKind})),`${(0,we.dI)(this.root)}${P}`}},methods:{getRowDataCy(P){return P==="suspended"?"suspended-row":"pitch-row"},isDegreeFromKind(P,ye){if(!this.kindDegrees.has(P))return!1;const Be=this.kindDegrees.get(P),Et=te.A.getAlter(Be);return ye===Et},isDegreeSelected(P,ye){if(!this.currentDegrees.has(P))return!1;const Be=this.currentDegrees.get(P),Et=te.A.getAlter(Be);return ye===Et},isDegreeMissing(P){return!this.currentDegrees.has(P)},canRemoveDegree(P){return this.addedDegrees.has(P)},getRemoveText(P){return this.canRemoveDegree(P)?this.$t("editor:jazzChords.no"):this.$t("editor:jazzChords.omit")},getPitchText(P,ye){P===7&&ye===-1&&(P=6,ye=0);const Be=ce.default.copy(I.T3[P]),Et=ce.default.getChromatic(Be);ce.default.setChromatic(Be,Et+ye);const qe=u.A.transpose(this.root,Be),ke=u.A.getAlter(qe),St=u.A.getStep(qe);return q(St,ke)},addDegree(P){this.addedDegrees.add(P);const ye=te.A.create(P,x.A.ADD,Ke);this.currentDegrees.set(P,ye),[2,4].includes(P)&&this.removeSuspended(),this.sendDegrees()},removeDegree(P){this.currentDegrees.delete(P),this.addedDegrees.delete(P),this.sendDegrees()},unsetDegree(P){this.currentDegrees.delete(P),this.sendDegrees()},setDegree(P,ye){P===3&&this.removeSuspended();const Be=te.A.create(P,x.A.ADD,ye);this.currentDegrees.set(P,Be),this.sendDegrees()},removeSuspended(){this.hasSus2=!1,this.hasSus4=!1},toggleSus2(){this.hasSus2=!this.hasSus2,this.sendDegrees()},toggleSus4(){this.hasSus4=!this.hasSus4,this.sendDegrees()},sendDegrees(){const P=[...this.currentDegrees.values()],ye=(0,b.A)(this.qualityKind,P);this.useSuspended&&(ye.push(te.A.create(3,x.A.SUBTRACT,0)),this.hasSus2&&ye.push(te.A.create(2,x.A.ADD,0)),this.hasSus4&&ye.push(te.A.create(4,x.A.ADD,0))),ye.sort(te.A.compare),this.$emit("setDegrees",{degrees:ye,useSuspended:this.useSuspended})},resetDegrees(){let P=(0,z.A)(this.qualityKind,this.providedDegrees);if(this.providedCanUseSuspended){const ye=(0,Z.A)({chordKind:this.qualityKind,allDegrees:P});this.hasSus2=[C.A.SUS_2,C.A.SUS_24].includes(ye.suspension),this.hasSus4=[C.A.SUS_4,C.A.SUS_24].includes(ye.suspension),P=ye.allDegrees}else this.hasSus2=!1,this.hasSus4=!1;this.currentDegrees.clear(),P.forEach(ye=>{const Be=te.A.getValue(ye);this.currentDegrees.set(Be,ye),!this.addedDegrees.has(Be)&&!this.kindDegrees.has(Be)&&this.addedDegrees.add(Be)})}},mounted(){this.resetDegrees()}};var pe=t(856580),Te=t.n(pe);const ge={};ge.$style=Te();const Re=(0,ae.A)(K,[["render",E],["__cssModules",ge]]),Fe=["onClick","aria-selected"];function xe(P,ye,Be,Et,qe,ke){return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(P.$style.root)},[(0,e.Lk)("h6",{class:(0,o.C4)(P.$style.title)},(0,o.v_)(P.$t("editor:jazzChords.inversion.title")),3),(0,e.Lk)("div",{class:(0,o.C4)(P.$style.buttons)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(ke.bassInversionsArray,(St,dt)=>((0,e.uX)(),(0,e.CE)("button",{key:St,type:"button",onClick:h=>ke.setBass(St),class:(0,o.C4)({[P.$style.entry]:!0,[P.$style.active]:ke.isSameBass(Be.bass,St,dt)}),"aria-selected":ke.isSameBass(Be.bass,St,dt)},[(0,e.Lk)("span",null,(0,o.v_)(P.$t(`editor:jazzChords.inversion.${dt}`)),1),ye[0]||(ye[0]=(0,e.Lk)("br",null,null,-1)),(0,e.Lk)("span",null,(0,o.v_)(ke.getInversionText(St)),1)],10,Fe))),128))],2)],2)}var Qe=t(681670),ze=t(614653);const yt={name:"InversionInput",components:{},emits:["setBass"],props:{bass:{type:Object,default:null},qualityKind:{type:String,required:!0},root:{type:Object,required:!0},degrees:{type:Array,required:!0}},data(){return{}},computed:{bassInversionsArray(){const P=ze.default.createJazz(this.root,this.qualityKind);this.degrees&&ze.default.setDegrees(P,this.degrees);const ye=(0,I.Ay)(P);return Object.keys(ye).map(Et=>Number(Et)).map(Et=>{const{step:qe,alter:ke}=ye[Et];return Qe.A.create(qe,Number(ke))})}},watch:{},methods:{getInversionText(P){const ye=Qe.A.getStep(P),Be=Qe.A.getAlter(P);return`${ye}${we.jk(Be)}`},setBass(P){this.$emit("setBass",P)},isSameBass(P,ye,Be){return Be===0&&P===null?!0:P&&ye&&Qe.A.isSame(P,ye)}},created(){}};var ft=t(327988),Oe=t.n(ft);const ut={};ut.$style=Oe();const ht=(0,ae.A)(yt,[["render",xe],["__cssModules",ut]]);var vt=t(985734);const Rt=["onClick","aria-selected"],It=["onClick","aria-selected"];function Lt(P,ye,Be,Et,qe,ke){const St=(0,e.g2)("FRadio");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(P.$style.root)},[(0,e.Lk)("div",{class:(0,o.C4)(P.$style.sizes)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(qe.SIZES,dt=>((0,e.uX)(),(0,e.Wv)(St,{key:dt,value:dt,modelValue:qe.localSize,"onUpdate:modelValue":ye[0]||(ye[0]=h=>qe.localSize=h),onChange:ye[1]||(ye[1]=h=>ke.setSize())},{default:(0,e.k6)(()=>[(0,e.Lk)("span",null,(0,o.v_)(P.$t(`editor:jazzChords.size.${dt}`)),1)]),_:2},1032,["value","modelValue"]))),128))],2),(0,e.Lk)("div",{class:(0,o.C4)(P.$style.buttons)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(ke.topRow,(dt,h)=>((0,e.uX)(),(0,e.CE)("div",{key:h,class:(0,o.C4)(P.$style.buttonContainer)},[dt!==null?((0,e.uX)(),(0,e.CE)("button",{key:0,type:"button",onClick:D=>ke.setQuality(dt),class:(0,o.C4)({[P.$style.entry]:!0,[P.$style.active]:Be.qualityKind===dt.key}),"aria-selected":Be.qualityKind===dt.key},(0,o.v_)(P.$t(`editor:jazzChords.quality.${dt.key}`)),11,Rt)):(0,e.Q3)("",!0)],2))),128))],2),(0,e.Lk)("div",{class:(0,o.C4)(P.$style.buttons)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(ke.bottomRow,(dt,h)=>((0,e.uX)(),(0,e.CE)("div",{key:h,class:(0,o.C4)(P.$style.buttonContainer)},[dt!==null?((0,e.uX)(),(0,e.CE)("button",{key:0,type:"button",onClick:D=>ke.setQuality(dt),class:(0,o.C4)({[P.$style.entry]:!0,[P.$style.active]:Be.qualityKind===dt.key}),"aria-selected":Be.qualityKind===dt.key},(0,o.v_)(P.$t(`editor:jazzChords.quality.${dt.key}`)),11,It)):(0,e.Q3)("",!0)],2))),128))],2)],2)}var Ct=t(531070),G=t(186980),J=t(993478);function Me(P,ye){return Array.from(Object.values(P)).reduce((Be,Et)=>(Et.size===ye&&Et.mode===G.A.MAJOR?Be.topRow.push(Et):Et.size===ye&&Et.mode===G.A.MINOR&&Be.bottomRow.push(Et),Be),{topRow:[],bottomRow:[]})}const Xe={[J.A.FIFTHS]:Me(vt.Ay,J.A.FIFTHS),[J.A.SIXTHS]:Me(vt.Ay,J.A.SIXTHS),[J.A.SEVENTHS]:Me(vt.Ay,J.A.SEVENTHS),[J.A.NINTHS]:Me(vt.Ay,J.A.NINTHS),[J.A.ELEVENTHS]:Me(vt.Ay,J.A.ELEVENTHS),[J.A.THIRTEENTHS]:Me(vt.Ay,J.A.THIRTEENTHS)},rt={name:"QualityInput",components:{FRadio:Ct.A},emits:["setQuality","setSize"],props:{qualityKind:{type:String,required:!0},size:{type:String,required:!0}},data(){return{SIZES:[J.A.FIFTHS,J.A.SIXTHS,J.A.SEVENTHS,J.A.NINTHS,J.A.ELEVENTHS,J.A.THIRTEENTHS],localSize:null}},watch:{size(){this.localSize=this.size}},computed:{topRow(){return Xe[this.size].topRow},bottomRow(){return Xe[this.size].bottomRow}},methods:{setQuality(P){this.$emit("setQuality",P)},setSize(){this.$emit("setSize",this.localSize)}},created(){this.localSize=this.size}};var He=t(669135),lt=t.n(He);const At={};At.$style=lt();const gt=(0,ae.A)(rt,[["render",Lt],["__cssModules",At]]),F=["onClick","aria-label","aria-selected"],re=["onClick","aria-selected"];function Se(P,ye,Be,Et,qe,ke){const St=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(P.$style.root)},[(0,e.Lk)("div",{class:(0,o.C4)(P.$style.buttons)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(qe.ALTERS,dt=>(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{type:"button",key:dt,onClick:h=>ke.setRootAlter(dt),class:(0,o.C4)({[P.$style.entry]:!0,[P.$style.active]:Be.alter===dt}),"aria-label":ke.getAlterLabel(dt),"aria-selected":Be.alter===dt},null,10,F)),[[St,ke.getAlterIcon(dt),"svg"]])),128))],2),(0,e.Lk)("div",{class:(0,o.C4)([P.$style.buttons,P.$style.steps])},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(qe.STEPS,(dt,h)=>((0,e.uX)(),(0,e.CE)("button",{type:"button",key:dt,onClick:D=>ke.setRootStep(h),class:(0,o.C4)({[P.$style.entry]:!0,[P.$style.active]:Be.step===qe.STEPS[h]}),"aria-selected":Be.step===qe.STEPS[h]},(0,o.v_)(dt),11,re))),128))],2)],2)}var B=t(505522);function W(P){return P.toLowerCase().replace(/([-_][a-z])/g,ye=>ye.toUpperCase().replace("-","").replace("_",""))}const V=new Map([[-2,"double-flat"],[-1,"flat"],[0,"natural"],[1,"sharp"],[2,"double-sharp"]]),Ie=["C","D","E","F","G","A","B"],Ee=[-2,-1,0,1,2],De=Array.from(Object.values(G.A)),ot={name:"RootInput",components:{},emits:["setRootAlter","setRootStep"],props:{step:{type:String,required:!0},alter:{type:Number,required:!0}},data(){return{STEPS:Ie,ALTERS:Ee,MODES:De,localMode:null}},watch:{mode(){this.localMode=this.mode}},methods:{getAlterIcon(P){const ye=`raw-${V.get(P)}`;return B.default[ye]},setRootAlter(P){this.$emit("setRootAlter",P)},setRootStep(P){const ye=Ie[P];this.$emit("setRootStep",ye)},getAlterLabel(P){let ye=V.get(P);return ye=W(ye),this.$t(`editor:${ye}.title`)}},created(){this.localMode=this.mode}};var je=t(734957),Ve=t.n(je);const a={};a.$style=Ve();const f=(0,ae.A)(ot,[["render",Se],["__cssModules",a]]);var oe=t(178273),Ue=t(581962);const Le={close(){this.$emit("close")},next(){this.canGoNext&&this.setStep(oe.U[this.stepIdx+1])},back(){this.canGoBack&&this.setStep(oe.U[this.stepIdx-1])},setStep(P){this.currentStep=P,this.updateTextPlaceholder(),this.displayMobileEditor||this.$refs.textInput.focus()}};var Pt=t(276132),Ot=t(155503),pt=t(794119),bt=t(252234);const ct={onKeyDown(P){P.code==="ArrowUp"?(P.preventDefault(),this.scoreData.scoreActions.executePublicAction("goPreviousStaff")):P.code==="ArrowDown"?(P.preventDefault(),this.scoreData.scoreActions.executePublicAction("goNextStaff")):(P.ctrlKey||P.metaKey)&&(P.code==="ArrowLeft"?(P.preventDefault(),this.goLeft()):P.code==="ArrowRight"?(P.preventDefault(),this.goRight()):P.code==="Backspace"&&this.tryDelete(P))},goLeft(){this.useNewDisplay?this.scoreData.scoreActions.executePublicAction("goLeftText"):this.scoreData.scoreActions.executePublicAction("goLeft")},goRight(){this.useNewDisplay?this.scoreData.scoreActions.executePublicAction("goRightText"):this.scoreData.scoreActions.executePublicAction("goRight")},onTextInput(){if(!this.textPreview.includes(" ")){if(this.currentStep===oe.A.ROOT){const P=we.$H(this.textPreview);if(P!==null){const{step:ye,alter:Be}=P;this.setRootStep(ye,!1),this.setRootAlter(Be,!1)}}else if(this.currentStep===oe.A.QUALITY){const P=Pe.$(this.textPreview);P!==null&&this.setQuality(P,!1)}else if(this.currentStep===oe.A.DEGREE_MOD){const P=(0,I.Ay)(ze.default.createJazz(this.chordData.root,this.qualityKind));delete P[1];const{useSuspended:ye,degrees:Be}=pt.$(this.textPreview,this.qualityKind);this.setDegrees({degrees:Be,useSuspended:ye},!1)}else if(this.currentStep===oe.A.INVERSION){const P=bt.$(this.textPreview);P!==null&&this.setBass(P,!1)}this.textPlaceholder=""}},updateTextPreview(){this.displayMobileEditor||(this.textPreview=this.computeTextPreview())},updateTextPlaceholder(){this.textPlaceholder=this.computeTextPreview(),this.textPreview=""},computeTextPreview(){return this.currentStep===oe.A.ROOT?we.dI(this.chordData.root):this.currentStep===oe.A.QUALITY?Pe.d(this.chordData.quality):this.currentStep===oe.A.DEGREE_MOD?pt.d({degrees:this.chordData.degrees,chordKind:this.chordData.quality.adagio,useSuspended:this.canUseSuspended}):this.currentStep===oe.A.INVERSION?bt.d(this.chordData.bass):""}};var Xt=Object.defineProperty,zt=Object.getOwnPropertySymbols,Kt=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable,kt=(P,ye,Be)=>ye in P?Xt(P,ye,{enumerable:!0,configurable:!0,writable:!0,value:Be}):P[ye]=Be,Ft=(P,ye)=>{for(var Be in ye||(ye={}))Kt.call(ye,Be)&&kt(P,Be,ye[Be]);if(zt)for(var Be of zt(ye))Ht.call(ye,Be)&&kt(P,Be,ye[Be]);return P};const Vt={"root-step":"C","root-alter":0},Zt={name:"DdnInnerJazzChords",components:{Tab:O.o,TabItem:O.V,ChordPreview:X.A,RootInput:f,QualityInput:gt,DegreeModInput:Re,InversionInput:ht,arrowLeft:S.A,arrowRight:N.A,InfoIcon:k.A},emits:["close"],props:{scoreData:{type:Object,required:!0},interaction:{type:Object,required:!0}},setup(){const P=(0,_.q6)(),ye=(0,v.W)();return{displayMobileEditor:(0,e.EW)(()=>P.displayMobileEditor),selectedType:(0,e.EW)(()=>ye.selectedType),noteInfo:(0,e.EW)(()=>ye.noteInfo)}},data(){return{Step:oe.A,currentStep:oe.A.ROOT,formerJazzChord:null,position:null,textPreview:"",textPlaceholder:"",canUseSuspended:!0,chordData:{root:Vt,quality:vt.Ay.MAJOR,degrees:[],bass:void 0,alter:!1}}},computed:{availableSteps(){return oe.U},canGoBack(){return this.stepIdx>0},stepIdx(){return oe.U.indexOf(this.currentStep)},canGoNext(){return this.stepIdx<oe.U.length-1},hasFormer(){return this.formerJazzChord!==null},backText(){return`editor:jazzChords.step.${oe.U[this.stepIdx-1]}${this.displayMobileEditor?"-short":""}`},nextText(){return`editor:jazzChords.step.${oe.U[this.stepIdx+1]}${this.displayMobileEditor?"-short":""}`},saveText(){return this.hasFormer?"flat:update":"flat:add"},rootMode(){var P;return(P=this.chordData.quality)==null?void 0:P.mode},size(){var P;return(P=this.chordData.quality)==null?void 0:P.size},qualityKind(){var P;return(P=this.chordData.quality)==null?void 0:P.adagio},rootAlter(){return u.A.getAlter(this.chordData.root)},rootStep(){return u.A.getStep(this.chordData.root)},isChordDifferent(){return!this.hasFormer||!u.A.isSame(this.formerJazzChord.root,this.chordData.root)||!this.isDegreeSame(this.formerJazzChord.degrees,this.chordData.degrees)||!this.isBaseSame(this.formerJazzChord.bass,this.chordData.bass)||this.chordData.quality.adagio!==this.formerJazzChord.quality.adagio||this.chordData.alter!==this.formerJazzChord.alter},alterText(){return this.chordData.alter?this.$t("editor:jazzChords.alter.remove"):this.$t("editor:jazzChords.alter.add")},useNewDisplay(){return(0,m.A)()}},methods:Ft(Ft(Ft(Ft(Ft({},Le),Ot.A),ct),Pt.A),Ue.A),mounted(){this.retrieveFormerChord(),this.retrieveStaffDetails(),this.displayMobileEditor||this.$refs.textInput.focus()}};var wt=t(481531),Gt=t.n(wt);const $t={};$t.$style=Gt();const oo=(0,ae.A)(Zt,[["render",d],["__cssModules",$t]])},121648:(l,n,t)=>{"use strict";t.d(n,{W:()=>ce,p:()=>b});var e=t(555172),o=t(383279),r=t(269032),i=t(668674),s=t(760367),d=t(989353),u=t(645369),m=t.n(u),v=t(6645),_=t(744056),S=t(361744),N=t(602494),k=t(426859),O=t(135972),X=t(727137),L=t(909696),y=t(599284),j=Object.defineProperty,w=Object.defineProperties,g=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,C=(se,x,T)=>x in se?j(se,x,{enumerable:!0,configurable:!0,writable:!0,value:T}):se[x]=T,Z=(se,x)=>{for(var T in x||(x={}))E.call(x,T)&&C(se,T,x[T]);if(M)for(var T of M(x))I.call(x,T)&&C(se,T,x[T]);return se},te=(se,x)=>w(se,g(x));const U=se=>JSON.parse(JSON.stringify(se)),b=se=>Object.fromEntries(Object.entries(se).map(([x,T])=>[x,(0,_.ux)(T.value)])),z=m()("flat:score:cursor"),ce=(0,v.nY)("scoreCursor",()=>{const se=(0,L.q6)(),x={duration:(0,_.KR)(null),accidental:(0,_.KR)(null),unpitchedHead:(0,_.KR)(null)},T=(0,_.KR)(!1),ne=U(x),p={accidentals:(0,_.KR)(null),articulations:(0,_.KR)(null),beamStatus:(0,_.KR)(null),bends:(0,_.KR)(null),harmonics:(0,_.KR)(null),canTryEnharmonicSwitch:(0,_.KR)(null),classicHarmony:(0,_.KR)(null),colors:(0,_.KR)(null),courtesyAccidentals:(0,_.KR)(null),dynamicIdx:(0,_.KR)(null),dynamicStyle:(0,_.KR)(null),durationType:(0,_.KR)(null),ghostNotes:(0,_.KR)(null),fingerings:(0,_.KR)(null),figuredBass:(0,_.KR)(null),hammerOnPullOffs:(0,_.KR)(null),hasArpeggio:(0,_.KR)(!1),hasGlissando:(0,_.KR)(!1),hasGrace:(0,_.KR)(!1),hasGraceSlur:(0,_.KR)(!1),harmony:(0,_.KR)(null),isChord:(0,_.KR)(!1),isGrace:(0,_.KR)(null),isInSlur:(0,_.KR)(!1),isRest:(0,_.KR)(!1),isSlashed:(0,_.KR)(null),isTied:(0,_.KR)(!1),ties:(0,_.KR)(null),tieDirections:(0,_.KR)(null),lines:(0,_.KR)(null),lyrics:(0,_.KR)([]),nbDots:(0,_.KR)(0),nbGraces:(0,_.KR)(0),noteheads:(0,_.KR)(null),octaveShift:(0,_.KR)(null),pluckedRange:(0,_.KR)(null),ornaments:(0,_.KR)(null),pedal:(0,_.KR)(null),pitches:(0,_.KR)(null),pizzicatoData:(0,_.KR)(null),muteData:(0,_.KR)(null),possibleTuplets:(0,_.KR)(null),possibleExpandedTuplets:(0,_.KR)(null),preBends:(0,_.KR)(null),restColor:(0,_.KR)(null),slideStarts:(0,_.KR)(null),slurPlacement:(0,_.KR)(null),tabsData:(0,_.KR)(null),technical:(0,_.KR)(null),tempoChange:(0,_.KR)(null),tupletType:(0,_.KR)(null),unpitched:(0,_.KR)(null),unpitchedPitch:(0,_.KR)(null),wedgeType:(0,_.KR)(null),wordData:(0,_.KR)(null)},le=b(p),A={beatsList:(0,_.KR)(null),clef:(0,_.KR)({}),displayedTime:(0,_.KR)({}),ending:(0,_.KR)([]),jumpCall:(0,_.KR)(null),jumpTag:(0,_.KR)(null),key:(0,_.KR)({}),leftBarline:(0,_.KR)(null),restsInsideBeams:(0,_.KR)(!1),rehearsal:(0,_.KR)(null),rehearsalType:(0,_.KR)(null),rightBarline:(0,_.KR)(null),pageBreak:(0,_.KR)(null),systemBreak:(0,_.KR)(null),measureRepeat:(0,_.KR)(null),multiMeasureRest:(0,_.KR)(null),swing:(0,_.KR)({}),time:(0,_.KR)({}),transpose:(0,_.KR)({}),voicesData:(0,_.KR)({}),measureVoicesData:(0,_.KR)([]),slash:(0,_.KR)(null),unpitchedStaffLines:(0,_.KR)(null)},de=b(A),Ae=(0,_.KR)({left:null,right:null}),be=(0,_.KR)(null),ae=(0,_.KR)(null),ie=(0,_.KR)(null),Ne=(0,_.KR)(null),$e=(0,_.KR)(null),Pe=(0,_.KR)(null),we=(0,_.KR)(0),Ze=(0,_.KR)(0),nt=(0,_.KR)(null),Ke=(0,_.KR)(!1),at=(0,_.KR)(N.xU),q=(0,_.KR)(!1),K=(0,_.KR)(!1),pe=(0,_.KR)(!1),Te=(0,_.KR)(!1),ge=(0,_.KR)(!1),Q={posTs:(0,_.KR)(0),measureIdx:(0,_.KR)(null),measureUuid:(0,_.KR)(null),partIdx:(0,_.KR)(null),partUuid:(0,_.KR)(null),staffIdx:(0,_.KR)(null),staffUuid:(0,_.KR)(null),voiceIdxInStaff:(0,_.KR)(null),voiceUuid:(0,_.KR)(null),line:(0,_.KR)(null),string:(0,_.KR)(null),noteIdx:(0,_.KR)(null),graceIdx:(0,_.KR)(null),dpq:(0,_.KR)(null),timePos:(0,_.KR)(null),lyricLvl:(0,_.KR)(0),figuredBassLvl:(0,_.KR)(0)};function Re(){return{posTs:(0,_.ux)(Q.posTs.value),measureIdx:(0,_.ux)(Q.measureIdx.value),measureUuid:(0,_.ux)(Q.measureUuid.value),partIdx:(0,_.ux)(Q.partIdx.value),partUuid:(0,_.ux)(Q.partUuid.value),staffIdx:(0,_.ux)(Q.staffIdx.value),staffUuid:(0,_.ux)(Q.staffUuid.value),voiceIdxInStaff:(0,_.ux)(Q.voiceIdxInStaff.value),voiceUuid:(0,_.ux)(Q.voiceUuid.value),line:(0,_.ux)(Q.line.value),string:(0,_.ux)(Q.string.value),noteIdx:(0,_.ux)(Q.noteIdx.value),graceIdx:(0,_.ux)(Q.graceIdx.value),dpq:(0,_.ux)(Q.dpq.value),timePos:(0,_.ux)(Q.timePos.value),lyricLvl:(0,_.ux)(Q.lyricLvl.value),figuredBassLvl:(0,_.ux)(Q.figuredBassLvl.value)}}const Fe=(0,S.EW)(()=>Pe.value?Pe.value:Re()),xe=(0,S.EW)(()=>{const R=typeof Q.line.value=="undefined"?null:Q.line.value;if(R!==null&&p.lines.value)return p.lines.value.indexOf(R);const Y=typeof Q.string.value=="undefined"?null:Q.string.value;return Y!==null&&p.tabsData.value?p.tabsData.value.findIndex(ve=>ve&&ve.string===Y):-1}),Qe=(0,S.EW)(()=>{const R=Q.partUuid.value;return R?se.parts.find(Y=>Y.uuid===R):null}),ze=(0,S.EW)(()=>{const R=Qe.value;return R?(0,k.A)(R):null}),yt=(0,S.EW)(()=>{var R;return!((R=ze.value)!=null&&R.header.unpitchedMapping)}),ft=(0,S.EW)(()=>be.value==="unpitched"?"unpitched":"piano"),Oe=(0,S.EW)(()=>{const R=(0,y.H)(),Y=R.enabledActionsSet.has("switchTouchUI");return se.displayMobileEditor?Y||R.tbAddNoteEnabled?ft.value:null:se.touchUiDisplayed&&Y?ft.value:null}),ut=(0,S.EW)(()=>at.value===N.i),Tt=(0,S.EW)(()=>at.value!==N.i),ht=(0,S.EW)(()=>pe.value),vt=(0,S.EW)(()=>Te.value),Rt=(0,S.EW)(()=>{if(!p.pitches.value)return null;const R=xe.value;return R!==-1&&R<p.pitches.value.length?p.pitches.value[R].alter:null}),It=(0,S.EW)(()=>{if(!p.ties.value)return!1;const R=xe.value;return R!==-1&&R<p.ties.value.length?p.ties.value[R]:!1}),Lt=(0,S.EW)(()=>!!p.isTied.value),Ct=(0,S.EW)(()=>!p.isTied.value),G=(0,S.EW)(()=>{if(!p.tieDirections.value)return!1;const R=xe.value;return R!==-1&&R<p.tieDirections.value.length?p.tieDirections.value[R]===s.A.FLIPPED:!1}),J=(0,S.EW)(()=>p.ghostNotes.value?p.ghostNotes.value[xe.value]:null),Me=(0,S.EW)(()=>{if(!p.fingerings.value)return null;const R=xe.value;return R!==-1&&R<p.fingerings.value.length?p.fingerings.value[R]:null}),Xe=(0,S.EW)(()=>{if(!p.octaveShift.value||Q.staffIdx.value!==p.octaveShift.value.staffIdx)return null;const R=p.octaveShift.value;return`${R.size}${R.type}`}),rt=(0,S.EW)(()=>!p.pluckedRange.value||Q.staffIdx.value!==p.pluckedRange.value.staffIdx?null:`${p.pluckedRange.value.type}`),He=(0,S.EW)(()=>{const R=p.ornaments.value;if(!R||!R.tremolo)return null;const Y=R.tremolo;return Y.type?null:Y.nbBeam}),lt=(0,S.EW)(()=>{if(!p.ornaments.value||!p.ornaments.value.tremolo)return null;const R=p.ornaments.value.tremolo;return R.type!=="start"?null:R.nbBeam}),At=(0,S.EW)(()=>{const R=A.rightBarline.value;if(R===null||!e.A.hasRepeat(R))return 0;const Y=e.A.getRepeat(R);return r.A.getNbRepeat(Y)}),xt=(0,S.EW)(()=>A.multiMeasureRest.value),gt=(0,S.EW)(()=>{const R=A.slash.value;return R===null?null:i.A.isUsingStems(R)}),F=(0,S.EW)(()=>{if(!p.ornaments.value)return null;let R,Y;if(p.ornaments.value.mordent)R="mordent",Y=p.ornaments.value.mordent;else if(p.ornaments.value["inverted-mordent"])R="inverted-mordent",Y=p.ornaments.value["inverted-mordent"];else return null;return Y=Y||{},Y.long&&(R+="-long"),Y.departure&&(R+=`-departure-${Y.departure}`),Y.approach&&(R+=`-approach-${Y.approach}`),R||null}),re=(0,S.EW)(()=>{if(!p.bends.value||!p.lines.value)return null;const R=p.bends.value[xe.value];return R?`${R.type}${R.alter}`:null}),Se=(0,S.EW)(()=>{if(!p.harmonics.value||!p.lines.value)return null;const R=p.harmonics.value[xe.value];return R||null}),B=(0,S.EW)(()=>{if(!p.preBends.value||!p.lines.value)return null;const R=p.preBends.value[xe.value];return R?`${R.alter}`:null}),W=(0,S.EW)(()=>{var R;const Y=ze.value;if(!Y||!Y.header||!Y.header["midi-instrument"]||!Y.header["midi-instrument"]["midi-program"])return!1;const ve=Y.header["midi-instrument"]["midi-program"],Mt=d._T[ve];return!!((R=Mt==null?void 0:Mt.children)!=null&&R.mute)}),V=(0,S.EW)(()=>{const R=ze.value;if(!R||!R.header.unpitchedMapping)return[];const Y=[];return Object.values(R.header.unpitchedMapping).forEach(ve=>{Object.keys(ve).forEach(Mt=>{Mt!=="default"&&!Y.includes(Mt)&&Y.push(Mt)})}),Y}),Ie=(0,S.EW)(()=>V.value.length>1&&V.value.includes("normal")),Ee=(0,S.EW)(()=>V.value.length>1&&V.value.includes("x")),De=(0,S.EW)(()=>V.value.length>1&&V.value.includes("circle-x")),ot=(0,S.EW)(()=>V.value.length>1&&V.value.includes("diamond")),je=(0,S.EW)(()=>V.value.length>1&&V.value.includes("slash")),Ve=(0,S.EW)(()=>V.value.length>1&&V.value.includes("triangle")),a=(0,S.EW)(()=>V.value.length>1&&V.value.includes("back slashed")),c=(0,S.EW)(()=>V.value.length>1&&V.value.includes("slashed")),f=(0,S.EW)(()=>V.value.length>1&&V.value.includes("square")),oe=(0,S.EW)(()=>V.value.length>1&&V.value.includes("cross")),Ue=(0,S.EW)(()=>V.value.length>1&&V.value.includes("inverted triangle")),Le=(0,S.EW)(()=>V.value.length>1&&V.value.includes("arrow down")),Pt=(0,S.EW)(()=>V.value.length>1&&V.value.includes("arrow up")),Ot=(0,S.EW)(()=>{if(typeof Q.line.value!="number"||!p.noteheads.value||p.noteheads.value.length===0)return null;const R=p.lines.value;if(!R)return null;const Y=R.indexOf(Q.line.value);return Y<0?null:p.noteheads.value[Y]}),pt=(0,S.EW)(()=>{var R;if(ge.value)return!0;const Y=(R=ze.value)==null?void 0:R.header;return Y?o.default.hasQuarterTone(Y):!1}),bt=(0,S.EW)(()=>{var R;return(0,X.x)().hasTab||((R=ze.value)==null?void 0:R.group)==="plucked-strings"}),ct=(0,S.EW)(()=>!(0,L.q6)().displayChromelessUi),Xt=(0,S.EW)(()=>{const R=p.pitches.value||[],Y=[{},{},{},{},{},{},{},{},{}];for(let ve=0;ve<R.length;ve++){const Mt=(0,O.A)(R[ve]);Y[Mt.octave.toString()]=Y[Mt.octave]=Y[Mt.octave]||{},Y[Mt.octave][Mt.step+Mt.alter]=R[ve]}return Y}),zt=(0,S.EW)(()=>!!nt.value);function Kt(R){for(const Y of Object.keys(R))R[Y]!==void 0&&(Q[Y].value=R[Y]);return Q.posTs.value=new Date().getTime(),Q}function Ht(R){be.value=R}function kt(R){ae.value=R}function Ft(R){ie.value=R}function Vt(R){for(const Y of Object.keys(p))R[Y]!==void 0?p[Y].value=R[Y]:p[Y].value=le[Y];return p}function Zt(R){for(const Y of Object.keys(A))A[Y]&&(R[Y]!==void 0?A[Y].value=R[Y]:A[Y].value=de[Y]);return A}function wt(R,Y){x[R].value=Y,T.value=!0}function Gt(R){for(const Y of Object.keys(R))R[Y]!==void 0?x[Y].value=R[Y]:x[Y].value=ne[Y];T.value=!0}function $t(){T.value&&(Gt(ne),T.value=!1)}function Qt(R){Ne.value=R,R?we.value=+new Date:Pe.value=null}function oo(R){$e.value=R,R&&(Ze.value=+new Date)}function P(R){R?Pe.value=Object.assign({},R):Pe.value=null}function ye(){Qt(null),P(null),h(null)}function Be(R){Ke.value=!!R}function Et(R){at.value=R,q.value=R===N.i}function qe(){K.value=!K.value}function ke(R){Te.value=!!R}function St(R){pe.value=!!R}function dt(R){return Ae.value=R,R}function h(R){R!==nt.value&&(nt.value=R,Q.lyricLvl.value=0,Q.figuredBassLvl.value=0)}function D(R){R>=0&&R<=5&&(Q.lyricLvl.value=R)}function he(R){R>=0&&R<=5&&(Q.figuredBassLvl.value=R)}function We(){Q.posTs.value=new Date().getTime()}function mt(R){ge.value=R}return te(Z({},Q),{pos:Q,upcomingAttributes:x,upcomingAttributesDirty:T,noteInfo:p,measureInfo:A,range:Ae,staffStyle:be,staffMode:ae,hasTabStaff:ie,selectedType:Ne,selectedPos:Pe,selectedEntity:$e,selectedTs:we,selectedEntityTs:Ze,textMode:nt,isConcertPitch:Ke,editionMode:at,isInsertMode:q,isEditionBlocked:K,isChangeDurationInsert:pe,keepExistingRestDuration:Te,keepQuarterTone:ge,contextPos:Fe,idxInChord:xe,currentPart:ze,currentPartsMetas:Qe,isPitchedPart:yt,touchUiType:ft,displayedTouchUi:Oe,tbIsInsertMode:ut,tbIsReplaceMode:Tt,tbIsChangeDurationInsert:ht,tbKeepExistingRestDuration:vt,tbNoteAccidental:Rt,tbHeadTied:It,tbIsTied:Lt,tbIsNotTied:Ct,tbHeadTieFlipped:G,tbGhostNote:J,tbFingerings:Me,tbOctaveShift:Xe,tbPluckedRange:rt,tbTremolo:He,tbTremolo2:lt,tbRepeatXTimes:At,tbMultiMeasureRest:xt,tbSlash:gt,tbMordent:F,tbBend:re,tbHarmonic:Se,tbPreBends:B,partHasMuteMode:W,partUnpitchedHeads:V,tbPartHeadNormal:Ie,tbPartHeadX:Ee,tbPartHeadXCircle:De,tbPartHeadDiamond:ot,tbPartHeadSlash:je,tbPartHeadTriangle:Ve,tbPartHeadBackSlashed:a,tbPartHeadSlashed:c,tbPartHeadSquare:f,tbPartHeadCross:oe,tbPartHeadInvertedTriangle:Ue,tbPartHeadArrowDown:Le,tbPartHeadArrowUp:Pt,tbCurrentUnpitchedNoteHead:Ot,tbQuarterAccidental:pt,tbDispalyTabToolbar:bt,tbTouchUI:ct,pitchesByOctave:Xt,mobToolbarReduced:zt,setPos:Kt,setStaffStyle:Ht,setStaffMode:kt,setHasTabStaff:Ft,setNoteInfo:Vt,setMeasureInfo:Zt,setUpcomingAttribute:wt,setUpcomingAttributes:Gt,resetUpcomingAttributes:$t,setSelectedType:Qt,setSelectedPos:P,setSelectedEntity:oo,unselect:ye,setConcertPitch:Be,setEditionMode:Et,toggleEditionBlocked:qe,changeKeepExistingRestDuration:ke,changeDurationMode:St,setRangeSelection:dt,setTextMode:h,setLyricLvl:D,setFiguredBassLvl:he,forceRefresh:We,setKeepQuarterTone:mt})})},122177:l=>{"use strict";l.exports='<svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 16"><path class="fill" fill-rule="evenodd" d="M12.86 1.443v.128c0 3.304-3.816 7.89-3.816 13.245 0 .93-.193 1.187-.513 1.187-.321 0-1.828-.289-2.63-.289-.802 0-1.507.289-2.085.289-.609 0-.609-.32-.609-.994 0-1.251.994-3.111 2.213-4.522C7.344 8.21 9.813 6.414 9.813 5.516c-.032-.192-.096-.289-.224-.289-.064 0-.193.065-.289.129-.256.192-.705.673-1.603.673-1.86 0-3.4-2.405-4.682-2.405-1.444 0-1.86 1.86-2.181 2.662-.128.352-.225.641-.481.641-.32 0-.353-.513-.353-.513V1.122C0 .834.16.738.32.738c.161 0 .321.096.386.224.16.32.577.77.833.77.225-.032.417-.16.866-.577C2.855.738 3.335 0 5.195 0c2.662 0 4.17 2.726 4.971 2.726.802 0 1.25-1.828 1.475-2.213.129-.224.642-.353.674-.353.545 0 .545.417.545 1.283z"/></svg>'},127495:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>x});var e=t(361744),o=t(538065),r=t(555381),i=Object.defineProperty,s=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(T,ne,p)=>ne in T?i(T,ne,{enumerable:!0,configurable:!0,writable:!0,value:p}):T[ne]=p,v=(T,ne)=>{for(var p in ne||(ne={}))d.call(ne,p)&&m(T,p,ne[p]);if(s)for(var p of s(ne))u.call(ne,p)&&m(T,p,ne[p]);return T};const _=["onClick","id"];function S(T,ne,p,le,A,de){const Ae=(0,e.g2)("DropdownTrigger"),be=(0,e.g2)("ToolbarComplexDdnInner"),ae=(0,e.gN)("dompurify-html");return(0,e.bo)(((0,e.uX)(),(0,e.Wv)(be,{ref:"ddn",title:de.mobileText},{trigger:(0,e.k6)(()=>[(0,e.bF)(Ae,{disabled:!!de.disabledReason,"aria-label":de.mobileText,class:(0,o.C4)(de.triggerClasses),"data-cy":p.dataCy},{default:(0,e.k6)(()=>[le.displayMobileEditor?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,o.C4)(T.tbButtonStyle.iconFlex)},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[T.tbButtonStyle.i]:!0,[T.tbButtonStyle.bigIcon]:de.isBigIcon})},null,2),[[ae,de.iconSvg,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(T.tbButtonStyle.t)},(0,o.v_)(de.mobileText),3)],2)):(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(T.tbButtonStyle.iconFlex)},null,2)),[[ae,de.iconSvg,"svg"]])]),_:1},8,["disabled","aria-label","class","data-cy"])]),default:(0,e.k6)(()=>[(0,e.Lk)("ul",{class:(0,o.C4)(v({[T.selectorStyle.root]:!0},de.contentClasses))},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(p.items,ie=>((0,e.uX)(),(0,e.CE)("li",{key:ie.value},[(0,e.Lk)("button",{onClick:Ne=>de.exec(ie),id:`tb-ddni-${ie.action}`,class:(0,o.C4)({active:p.active.includes(ie.value),disabled:de.disabledReason,[T.selectorStyle.item]:!0})},[(0,e.bo)((0,e.Lk)("div",{class:(0,o.C4)(T.selectorStyle.image)},null,2),[[ae,A.icons[ie.icon||ie.action],"svg"]]),(0,e.Lk)("div",{class:(0,o.C4)(T.selectorStyle.text)},[(0,e.Lk)("p",{class:(0,o.C4)(T.selectorStyle.title)},(0,o.v_)(T.$t(`editor:${ie.action}.title`)),3),ie.noDesc?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("p",{key:0,class:(0,o.C4)(T.selectorStyle.shortdesc)},(0,o.v_)(T.$t(`editor:${ie.action}.shortDescription`)),3))],2)],10,_)]))),128))],2)]),_:1},8,["title"])),[[r.aG,p.items.length>0]])}var N=t(27219),k=t(135519),O=t(121648),X=t(727137),L=t(909696),y=t(733268),j=t(653154),w=t(674548),g=t(243935),M=t(505522),E=t(34943),I=t(896099);const C={name:"ToolbarDetailedSelector",components:{DropdownTrigger:y.u,ToolbarComplexDdnInner:E.default},props:{items:{type:Array,required:!0},active:{type:Array,default:()=>[],required:!0},mainText:{type:String,default:null},scoreData:{type:Object,required:!0},defaultIcon:{type:String,default:null},onOpenCallback:{type:Function,default:null},onCloseCallback:{type:Function,default:null},dataCy:{type:String,default:""}},data(){return{icons:M.default}},setup(){const T=(0,k.d)(),ne=(0,O.W)(),p=(0,L.q6)();return{mainShortcutByAction:(0,e.EW)(()=>T.mainShortcutByAction),isEditionBlocked:(0,e.EW)(()=>ne.isEditionBlocked),displayMobileEditor:(0,e.EW)(()=>p.displayMobileEditor)}},watch:{mobileText(T){this.$tooltip&&T&&this.$tooltip.setContent(T)}},computed:{ddnPlacement(){return this.displayMobileEditor?"top":"bottom"},activeItems(){return this.items.filter(T=>this.active.includes(T.value))},firstActiveItem(){return this.activeItems.length>0&&this.activeItems[0]},firstActiveIcon(){return this.activeItems.length>0&&(this.activeItems[0].icon||this.activeItems[0].action)},resolvedIconkey(){return this.firstActiveIcon||this.defaultIcon},iconSvg(){return M.default[this.resolvedIconkey]},isBigIcon(){return(0,I.default)(this.resolvedIconkey)},mobileText(){if(this.mainText)return this.mainText;const T=N.actions,{action:ne}=this.firstActiveItem;return T[ne]?w.MR.t(`editor:${ne}.title`):((0,j.vV)(new Error(`No active text, action was "${ne}"`)),"")},disabledReason(){return this.isDisabledEditionBlocked?"editionBlocked":(0,X.x)()[`${this.resolvedIconkey}DisabledReason`]},isDisabledEditionBlocked(){return this.isEditionBlocked?!this.items.every(T=>N.actions[T.action].groups.includes("ro")):!1},contentClasses(){return this.displayMobileEditor?[this.ddnStyle.contentCommon,this.ddnStyle.contentMobile]:[this.ddnStyle.contentCommon]},triggerClasses(){const T=[this.tbButtonStyle.rootCommon];return this.disabledReason&&T.push("disabled"),this.displayMobileEditor?T.push(this.tbButtonStyle.rootMobileDetailed):T.push(this.tbButtonStyle.rootDesktop),T}},methods:{exec(T){return this.$refs.ddn.close(),this.disabledReason?Promise.resolve():this.scoreData.scoreActions.executePublicAction(T.action)},onClose(){this.setupMainTooltip(),this.onCloseCallback&&this.onCloseCallback()},setupMainTooltip(){document.body.classList.contains("touch")||(this.$tooltip&&this.$tooltip.destroy(),this.$tooltip=new g.vF(this.$el,{touch:!1,placement:"bottom",content:this.mobileText,arrow:g.qO,duration:[0,0]}))},onOpen(){this.destroyMainTooltip(),this.onOpenCallback&&this.onOpenCallback()},destroyMainTooltip(){this.$tooltip&&(this.$tooltip.destroy(),this.$tooltip=null)}},mounted(){document.body.classList.contains("touch")||this.setupMainTooltip()},beforeUnmount(){this.onCloseCallback&&this.onCloseCallback()}};var Z=t(235398),te=t(384188),U=t(278965),b=t.n(U),z=t(938793);const ce={};ce.tbButtonStyle=Z.default,ce.ddnStyle=te.default,ce.selectorStyle=b();const x=(0,z.A)(C,[["render",S],["__cssModules",ce]])},128683:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_bMm4z{display:flex;padding:16px;gap:16px}
`,""]),s.locals={root:"root_bMm4z"};const d=s},131051:l=>{"use strict";l.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path class="fill" fill-rule="evenodd" d="M1.803 6.022v.129c0 .097 0 .225.13.225.031 0 .096 0 .16-.032 1.03-.612 2.416-.934 4.283-.934a5.319 5.319 0 0 1 5.314 5.314c0 2.898-2.125 5.281-5.99 5.281-3.961 0-5.7-1.32-5.7-3.993 0-.193 0-.386.032-.58C.13 10.305.837 9.05 2.576 9.05a2.495 2.495 0 0 1 2.512 2.512c0 .902-.483 1.707-1.224 2.158-.16.096-.386.225-.386.45.032.226.225.355.386.452.226.096.484.096.741.096.837 0 2.737-.45 2.737-3.993 0-3.575-2.222-4.187-3.317-4.187-1.094 0-1.867.741-2.19 1.063-.354.354-.386.644-.708.644-.322 0-.644-.064-.644-.483v-.064L.837.547C.87.29 1.031 0 1.61 0c.548.064 3.317.322 4.348.322 1.03 0 3.542-.29 3.96-.29.355 0 .452.258.452.676 0 .516-.161 3.092-4.638 3.092-1.32 0-2.834-.225-3.156-.29h-.129c-.29 0-.45.161-.483.419-.032.29-.16 2.093-.16 2.093z"/></svg>'},135604:(l,n,t)=>{var e=t(430225);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("49bcaac1",e,!0,{})},145329:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.pitchesList_nbJnV{display:flex;align-items:center;flex-direction:column;gap:8px;max-height:265px;overflow:auto}.addDegreeBlock_gXgNg{display:flex;justify-content:center;align-items:center;width:100%;gap:20px;margin-bottom:10px}.baseChord_Bkz0h{display:flex;font-size:14px;font-weight:600;max-width:160px;width:calc(50% - 20px);color:var(--ink)}.addDegreeSelect_GcLXG{display:flex;max-width:150px;width:45%}.buttons_H5Izn{position:relative;display:flex;align-items:center;gap:8px}.stepLabel_fFMyH{display:flex;justify-content:center;align-items:center;height:32px;color:var(--f-subdue)}.entry_Db_xC{width:48px;height:32px;display:flex;justify-content:center;align-items:center;border:1px solid var(--f-subdue-40);border-radius:8px;background-color:#fff;color:var(--f-subdue);font-size:14px;font-weight:400}.entry_Db_xC .fill{fill:var(--f-subdue)}.entry_Db_xC>svg{display:block;height:16px}.entry_Db_xC.omit_iRlEU{width:100px;justify-content:start}.entry_Db_xC.remove_gb7FF{cursor:pointer;border:none;position:absolute;right:-29px;padding:0;width:auto}.entry_Db_xC.remove_gb7FF img{width:20px;height:20px}.entry_Db_xC.isDefault_opC6k{font-weight:600}.entry_Db_xC.active_zDLPR{border-color:var(--f-primary);color:var(--f-primary);background-color:var(--f-primary-10);font-weight:600}.entry_Db_xC.active_zDLPR .fill{fill:var(--f-primary)}.entry_Db_xC.disabled_wYGtF{border-color:var(--f-grey-disabled-content);color:var(--f-grey-disabled-content);background-color:var(--f-grey-disabled-container)}.entry_Db_xC.disabled_wYGtF .fill{fill:var(--f-grey-disabled-content)}*[data-color-mode=dark] .entry_Db_xC{background-color:var(--f-bg-dark);color:var(--f-subdue-40);border-color:var(--f-ink)}*[data-color-mode=dark] .entry_Db_xC.active_zDLPR{border-color:var(--f-primary);background-color:var(--f-ink)}*[data-color-mode=dark] .baseChord_Bkz0h{color:#fff}
`,""]),s.locals={pitchesList:"pitchesList_nbJnV",addDegreeBlock:"addDegreeBlock_gXgNg",baseChord:"baseChord_Bkz0h",addDegreeSelect:"addDegreeSelect_GcLXG",buttons:"buttons_H5Izn",stepLabel:"stepLabel_fFMyH",entry:"entry_Db_xC",omit:"omit_iRlEU",remove:"remove_gb7FF",isDefault:"isDefault_opC6k",active:"active_zDLPR",disabled:"disabled_wYGtF"};const d=s},152389:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>d,width:()=>s});var e=t(748049),o=t(121648),r=t(361744),i=t(299035);const s=55,d=(0,r.pM)({name:"TbBeam",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(u){const m=(0,o.W)(),v=(0,r.EW)(()=>u.name==="toggleForceBeam"&&m.noteInfo.beamStatus===e.A.YES||u.name==="toggleForceUnbeam"&&m.noteInfo.beamStatus===e.A.NO);return()=>(0,r.h)(i.default,{scoreData:u.scoreData,action:u.name,active:v.value})}})},155503:(l,n,t)=>{"use strict";t.d(n,{A:()=>N});var e=t(737903),o=t(104907),r=t(613903),i=t(115033),s=t(178273),d=Object.defineProperty,u=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,_=(k,O,X)=>O in k?d(k,O,{enumerable:!0,configurable:!0,writable:!0,value:X}):k[O]=X,S=(k,O)=>{for(var X in O||(O={}))m.call(O,X)&&_(k,X,O[X]);if(u)for(var X of u(O))v.call(O,X)&&_(k,X,O[X]);return k};const N={tryDelete(k){this.textPreview.trim()===""&&(this.currentStep===s.A.ROOT?(this.removeChord(),k.preventDefault()):this.currentStep===s.A.RELATIVE_ROOT&&(this.removeRelativeRoot(),k.preventDefault()))},addChord(){if(this.isChordDifferent){const k=S({},this.position),{root:O,degrees:X,bass:L,alter:y}=this.chordData,j=this.chordData.quality.adagio,w={position:k,root:O,kind:j,noCursorRefresh:this.useNewDisplay};if(L&&(w.bass=L),X&&(w.degrees=X),y&&(w.type=r.A.ALTERNATE),o.default.hasTabFrameEnabled(this.staffDetails)){const g=this.scoreData.adagioData;w.frame=(0,i.A)(w,this.staffDetails,g,(0,e.default)(this.position))}this.scoreData.scoreActions.executePublicAction("addHarmony",w)}this.goRight()},removeChord(){if(this.hasFormer){const k={position:S({},this.position),noCursorRefresh:this.useNewDisplay};this.scoreData.scoreActions.executePublicAction("removeHarmony",k)}this.goLeft()}}},161563:(l,n,t)=>{var e=t(744378);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("190cdd9a",e,!0,{})},164002:(l,n,t)=>{var e=t(211519);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("64648232",e,!0,{})},171686:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>d,width:()=>s});var e=t(121648),o=t(361744),r=t(299035);const i={toggleFiguredBassMode:30},s=42,d=(0,o.pM)({name:"TbTextMode",props:{name:{type:String,required:!0},textMode:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(u){const m=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:u.scoreData,action:u.name,active:m.textMode===u.textMode,powerWidth:i[u.name]})}})},171748:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>_});var e=t(361744);function o(S,N,k,O,X,L){const y=(0,e.g2)("ddn-inner-clef"),j=(0,e.g2)("ToolbarComplexDdn");return(0,e.uX)(),(0,e.Wv)(j,{ref:"ddn",class:"tb-clef","icon-key":"clef","mobile-text":L.mobileText,action:"setClefG2","ddn-classes":L.classesListToObject(["ddn-content"])},{default:(0,e.k6)(()=>[(0,e.bF)(y,{"score-data":k.scoreData,onClose:N[0]||(N[0]=w=>L.onClose())},null,8,["score-data"])]),_:1},8,["mobile-text","ddn-classes"])}var r=t(674548),i=t(21493),s=t(13626),d=t(361826);const u={name:"TbClef",width:42,props:{scoreData:{type:Object,required:!0}},components:{DdnInnerClef:i.A,ToolbarComplexDdn:s.default},computed:{mobileText(){return r.MR.t("editor:clef.title")}},methods:{onClose(){this.$refs.ddn.onClose()},classesListToObject:d.default}};var m=t(938793);const _=(0,m.A)(u,[["render",o]])},174097:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_bTyF9{display:flex;align-items:center;flex-direction:column;gap:8px}.title_GxLNi{color:var(--f-ink);font-size:14px;font-weight:600}.buttons_XpQUX{display:flex;gap:8px;max-width:370px;overflow:auto}.buttonContainer_YH78J{width:48px;height:32px}.entry_Ne1Yy{height:48px;border:1px solid var(--f-subdue-40);border-radius:8px;background-color:#fff;color:var(--f-subdue);font-size:14px;font-weight:400;line-height:20px;text-align:start}.entry_Ne1Yy .fill{fill:var(--f-subdue)}.entry_Ne1Yy>svg{display:block;height:16px}.entry_Ne1Yy.active_OidMH{border-color:var(--f-primary);color:var(--f-primary);background-color:var(--f-primary-10);font-weight:600}.entry_Ne1Yy.active_OidMH .fill{fill:var(--f-primary)}.entry_Ne1Yy.disabled_Z4rpS{border-color:var(--f-grey-disabled-content);color:var(--f-grey-disabled-content);background-color:var(--f-grey-disabled-container)}.entry_Ne1Yy.disabled_Z4rpS .fill{fill:var(--f-grey-disabled-content)}.sizes_AqogL{display:flex;gap:16px;margin-top:16px;margin-bottom:8px}*[data-color-mode=dark] .title_GxLNi{color:#fff}*[data-color-mode=dark] .entry_Ne1Yy{background-color:var(--f-bg-dark);color:var(--f-subdue-40);border-color:var(--f-subdue-40)}*[data-color-mode=dark] .entry_Ne1Yy.active_OidMH{border-color:var(--f-primary);background-color:var(--f-ink)}
`,""]),s.locals={root:"root_bTyF9",title:"title_GxLNi",buttons:"buttons_XpQUX",buttonContainer:"buttonContainer_YH78J",entry:"entry_Ne1Yy",active:"active_OidMH",disabled:"disabled_Z4rpS",sizes:"sizes_AqogL"};const d=s},178273:(l,n,t)=>{"use strict";t.d(n,{A:()=>o,U:()=>r});const e={ROOT:"root",QUALITY:"quality",DEGREE_MOD:"degree-modification",INVERSION:"inversion"},o=e,r=Array.from(Object.values(e))},182547:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_G9Vz8{position:relative}.root_G9Vz8>button{display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;padding:0;height:28px;width:28px;border-radius:8px}.root_G9Vz8>button .fill{fill:var(--f-subdue)}.root_G9Vz8>button .stroke{stroke:var(--f-subdue)}.root_G9Vz8>button.active_XDGBm{background-color:var(--f-primary)}.root_G9Vz8>button.active_XDGBm .fill{fill:#fff}.root_G9Vz8>button.active_XDGBm .stroke{stroke:#fff}.root_G9Vz8>button:active{background:var(--f-primary);border:1px solid var(--f-primary-dark)}.root_G9Vz8>button:active .fill{fill:#fff}.root_G9Vz8>button:active .stroke{stroke:#fff}svg.link_S02xq{position:absolute;bottom:-10px;left:-6px;fill:var(--f-ink-5)}.root_G9Vz8:not(:first-child) .leftFirst_DkMZr{display:none}.root_G9Vz8:not(:last-child) .rightLast_RPOy_{display:none}.root_G9Vz8:first-child .leftOthers_ph7TB{display:none}.root_G9Vz8:last-child .rightOthers_Saw4c{display:none}.hide_TE9SC{visibility:hidden}html[data-color-mode=dark] svg.link_S02xq{fill:var(--f-bg-dark)}
`,""]),s.locals={root:"root_G9Vz8",active:"active_XDGBm",link:"link_S02xq",leftFirst:"leftFirst_DkMZr",rightLast:"rightLast_RPOy_",leftOthers:"leftOthers_ph7TB",rightOthers:"rightOthers_Saw4c",hide:"hide_TE9SC"};const d=s},182781:l=>{"use strict";l.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path class="fill" fill-rule="evenodd" d="M6.079.032c1.323.096 5.26.96 5.26 3.904 0 .736-.19 1.472-.693 2.048-.347.416-.756.64-1.229.864-.283.16-.63.192-.976.288-.095.032-.126.16-.126.288 0 .064 0 .096.031.16.063.128.158.128.315.16l1.04.288.661.384c.315.192.567.416.756.672.252.288.473.608.599.928.189.416.252.864.283 1.312v.224C12 14.368 8.787 16 5.67 16h-.284C2.299 15.936.063 14.976 0 12.48c0-.704.157-1.472.693-1.952a2.853 2.853 0 0 1 1.512-.832c.126-.032.22-.032.346-.032.85 0 1.764.512 2.11 1.312.126.32.158.672.158.992-.032.928-.725 1.408-.725 2.112v.16c.032.48.63.48.882.512.032 0 .158.032.284.032.693 0 2.394-.384 2.394-3.776 0-.416-.284-2.912-3.906-2.912-.252 0-.787 0-.787-.384 0-.352.44-.512.756-.544C5.7 7.072 7.559 6.144 7.559 3.776v-.224c0-.768-.252-2.464-2.93-2.464-.283 0-1.259.256-1.322.8v.128c0 .448.473.384.63.448.157.064.945.128 1.04 1.312v.256c0 1.056-.694 2.08-2.08 2.08H2.74C.787 5.984.19 4.576.19 3.52.189 1.824 2.898 0 5.606 0c.158 0 .315.032.473.032z"/></svg>'},184190:(l,n,t)=>{"use strict";var e=t(361744),o=t(744056),r=t(538065),i=t(649331),s=t(989641),d=t(733268),u=t(536208),m=t(788964),v=t(257325),_=t(507596),S=(L,y,j)=>new Promise((w,g)=>{var M=C=>{try{I(j.next(C))}catch(Z){g(Z)}},E=C=>{try{I(j.throw(C))}catch(Z){g(Z)}},I=C=>C.done?w(C.value):Promise.resolve(C.value).then(M,E);I((j=j.apply(L,y)).next())});const N=(0,e.pM)({__name:"FCreateScoreButton",props:{fullWidth:{type:Boolean,default:!1},theme:{default:"fill"},defaultText:{default:"flat:collec.create-score"},size:{default:"medium"},direction:{},isEdu:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},trackingContext:{default:""}},emits:["onCreateScore","onImportScore"],setup(L,{emit:y}){const{t:j}=(0,i.Bd)(),w=(0,o.KR)(),g=L,M=y,{trackScoreCreation:E,trackImportScore:I}=(0,s.A)(),C=()=>{var b;(b=w.value)==null||b.close()},Z=()=>S(null,null,function*(){C(),E({context:"create_new_score_dropdown"}),M("onCreateScore")}),te=()=>{C(),I({context:"create_new_score_dropdown"}),M("onImportScore")},U=()=>{E({name:"score_creation_funnel_entered",context:g.trackingContext,content_visible_to_user:j(g.defaultText)})};return(b,z)=>((0,e.uX)(),(0,e.Wv)((0,o.R1)(d.m),{ref_key:"dropdownRef",ref:w,direction:b.direction,"show-arrow":!1,distance:[0,8]},(0,e.eX)({trigger:(0,e.k6)(({isOpen:ce})=>[(0,e.bF)(u.A,{theme:b.theme,"aria-label":(0,o.R1)(j)(ce?"flat:midi.calib.cancel":b.defaultText),"full-width":b.fullWidth,"default-text":"",size:b.size,"data-cy":"create-score-button",class:(0,r.C4)(b.isEdu&&"edu-button-create-score"),icon:b.isEdu&&!ce?(0,o.R1)(v.A):void 0,disabled:b.disabled,onClick:U},(0,e.eX)({default:(0,e.k6)(()=>[(0,e.eW)((0,r.v_)((0,o.R1)(j)(ce&&!b.disabled?"flat:midi.calib.cancel":b.defaultText)),1)]),_:2},[ce&&!b.disabled?{name:"icon",fn:(0,e.k6)(()=>[(0,e.bF)((0,o.R1)(_.default))]),key:"0"}:void 0]),1032,["theme","aria-label","full-width","default-text","size","class","icon","disabled"])]),_:2},[b.disabled?void 0:{name:"default",fn:(0,e.k6)(()=>[(0,e.bF)(m.A,{class:"create-score-list-dropdown",onOnCreateScore:Z,onOnImportScore:te})]),key:"0"}]),1032,["direction"]))}});var k=t(121030);const O=null,X=null},186980:(l,n,t)=>{"use strict";t.d(n,{A:()=>o});const o={MINOR:"minor",MAJOR:"major"}},187238:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>u,width:()=>d});var e=t(602494),o=t(121648),r=t(883892),i=t(361744),s=t(299035);const d=42,u=(0,i.pM)({name:"TbNoteDuration",props:{name:{type:String,required:!0},duration:{type:Number,required:!0},scoreData:{type:Object,required:!0}},setup(m){const v=(0,o.W)(),_=(0,i.EW)(()=>v.editionMode===e.i?v.upcomingAttributes.duration&&v.upcomingAttributes.duration.durationType===m.duration:v.noteInfo.durationType===m.duration),S=(0,r.S)(),N=(0,i.EW)(()=>S.highlightDurations);return()=>(0,i.h)(s.default,{scoreData:m.scoreData,action:m.name,active:_.value,highlight:N.value,powerWidth:32})}})},190780:(l,n,t)=>{var e=t(591781);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("0b4f2c90",e,!0,{})},192427:(l,n,t)=>{"use strict";t.d(n,{A:()=>j});var e=t(701387),o=t(989353),r=t(941271),i=t(459356),s=t(916504),d=t(645369),u=t.n(d),m=t(591340),v=t(318187),_=(w,g,M)=>new Promise((E,I)=>{var C=U=>{try{te(M.next(U))}catch(b){I(b)}},Z=U=>{try{te(M.throw(U))}catch(b){I(b)}},te=U=>U.done?E(U.value):Promise.resolve(U.value).then(C,Z);te((M=M.apply(w,g)).next())});const S=u()("flat:MIDI");class N{constructor(g){var M,E;this.interaction=g,this.adagioData=(M=g.scoreData)==null?void 0:M.adagioData,this.scoreActions=(E=g.scoreData)==null?void 0:E.scoreActions}setData(g){S("[InputMIDI] setData"),this.adagioData=g}addExperience(g){(0,r.B)().addExperience(g)}cacheAdagioDataFromInteractionObject(){var g;this.adagioData||(this.adagioData=(g=this.interaction.scoreData)==null?void 0:g.adagioData)}addChordMidi(g){return _(this,null,function*(){S("add chord midi %O",g),this.addExperience("editor.input-midi"),yield this.scoreActions.executePublicAction("addChordPitches",{pitches:g.pitches,cursorGoNextNote:!0,mute:!0}),this.scoreActions.cursor.scheduleScrollTo()})}getCurrentTempo(){this.cacheAdagioDataFromInteractionObject();const g=this.interaction.cursor.getPositionIdx(),E=this.adagioData.getCommonContent().getTempo(g.measureIdx).qpm||80;return Math.floor(E)}getCurrentNoteDuration(){this.cacheAdagioDataFromInteractionObject();const g=this.interaction.cursor.getPositionIdx(),M=this.adagioData.getMeasure(g.partIdx,g.measureIdx),E=Number(M.$adagio.attributes.divisions);return Number(M.note[g.noteIdx].duration)/E}}const k=N;var O=(w,g,M)=>new Promise((E,I)=>{var C=U=>{try{te(M.next(U))}catch(b){I(b)}},Z=U=>{try{te(M.throw(U))}catch(b){I(b)}},te=U=>U.done?E(U.value):Promise.resolve(U.value).then(C,Z);te((M=M.apply(w,g)).next())});const X=u()("flat:MIDI"),L=.2;class y{constructor(g,M){var E,I;this.MIDI=null,this.inputMIDI=null,this.outputMIDI=null,this.scoreData=g.scoreData,this.cursor=g.cursor,this.activeCalibration=!1,this.displayNotif=!0,this.data=null,this.commonContent=null,this.metaMap=[],this.interaction=g,this.audio=M,this.counter=0,this.measureStartRecordIdx=0,this.measureStartRecordUuid=null,this.midiRecordingAnimId=null,(I=(E=g.account)==null?void 0:E.plan)!=null&&I.features&&(g.account.plan.features.midiOutput||s.A.remove("midi.default-output"),g.account.plan.features.midiInput||s.A.remove("midi.default-device"))}setData(g){X("[MIDI] setData"),this.data=g,this.commonContent=this.data.getCommonContent(),this.editorInputMidi&&this.editorInputMidi.setData(g),this.generateMetaMap()}addExperience(g){(0,r.B)().addExperience(g)}init(){if(X("init MIDI component"),!this.audio||!this.audio.instrumentManager)return Promise.reject(new Error("Cannot initialize MIDI class because either audio or audio.instrumentManager are null or undefined"));if(!this.MIDI){this.MIDI=new o.eu(this.updateMIDIDevices.bind(this));try{return this.inputMIDI=this.MIDI.getMidiInput(),this.outputMIDI=this.MIDI.getMidiOutput(),this.editorInputMidi=new k(this.interaction),this.initInput(),this.audio.instrumentManager.setMidiOutput(this.outputMIDI),this.MIDI.init().then(()=>{this.updateMIDIDevices(!1)})}catch(g){if(g instanceof o.RL||g.message.indexOf("injector:unpr")>0)return this.inputMIDI=null,this.outputMIDI=null,Promise.reject(g);throw g}}return Promise.reject()}initInput(){this.inputMIDI&&this.inputMIDI.init(this.audio.instrumentManager,this.editorInputMidi.addChordMidi.bind(this.editorInputMidi),()=>{},this.editorInputMidi.getCurrentNoteDuration.bind(this.editorInputMidi),this.editorInputMidi.getCurrentTempo.bind(this.editorInputMidi))}updateMIDIDevices(g=!0){this.MIDI&&(this.fetchDevices("Input",g),this.fetchDevices("Output",g))}fetchDevices(g,M=!0){X("fetch %s devices",g);const E=g==="Input"?"midi.default-device":"midi.default-output",I=s.A.get(E),C=this.MIDI[`get${g}s`](),Z=[];if(X("found these devices: %o",C),C.length>0){Z.push({id:null,name:"none"});for(let se=0;se<C.length;se++)Z.push({id:C[se].id,name:C[se].name}),C[se].id===I&&this[`select${g}Device`](C[se],M);const b=(0,v.R)(),z=g==="Input"?b.selectedInputDevice:b.selectedOutputDevice;(0,m.U)().scoreWrite&&g==="Input"&&z.id===null&&(X("automatically select the first input device"),this[`select${g}Device`](C[0],M)),this.addExperience("editor.device-midi")}else this[`select${g}Device`]({id:null,name:"None"},M);const te=(0,v.R)();g==="Input"?te.updateInputList(Z):g==="Output"&&te.updateOutputList(Z);const{setMidiDevices:U}=(0,r.B)();U(C)}selectInputDevice(g,M=!0){if(!this.MIDI)throw new Error("Cannot select input device, no MIDI instance created");const E=(0,v.R)();E.selectedInputDevice.id!==g.id&&(g.id===null?(this.MIDI.unselectInputDevice(),M&&this.displayNotif&&(0,i.O)().displayMessage({text:{i18n:"flat:midi.inputs.notification.disable",i18nParams:{device:E.selectedInputDevice.name}},type:"default"})):(E.selectedOutputDevice.name===g.name&&this.selectOutputDevice({id:null,name:"None"}),this.MIDI.selectInputDevice(g.id),M&&this.displayNotif&&(0,i.O)().displayMessage({text:{i18n:"flat:midi.inputs.notification.selected",i18nParams:{device:g.name}},type:"success"})),E.selectInputDevice(g),s.A.set("midi.default-device",g.id))}selectOutputDevice(g,M=!0){if(!this.MIDI)throw new Error("Cannot select output device, no MIDI instance created");const E=(0,v.R)();E.selectedOutputDevice.id!==g.id&&(g.id===null?(this.audio.instrumentManager.disableMidiOutput(),this.MIDI.unselectOutputDevice(),M&&this.displayNotif&&(0,i.O)().displayMessage({text:{i18n:"flat:midi.outputs.notification.disable",i18nParams:{device:E.selectedOutputDevice.name}},type:"default"})):(E.selectedInputDevice.name===g.name&&this.selectInputDevice({id:null,name:"None"}),this.audio.instrumentManager.enableMidiOutput(),this.MIDI.selectOutputDevice(g.id),this.addExperience("editor.output-midi"),M&&this.displayNotif&&(0,i.O)().displayMessage({text:{i18n:"flat:midi.outputs.notification.selected",i18nParams:{device:g.name}},type:"success"})),E.selectOutputDevice(g),s.A.set("midi.default-output",g.id))}selectFreeInputDevice(){if(!this.MIDI||!this.interaction.account||!this.interaction.account.plan||!this.interaction.account.plan.features)return;const g=(0,v.R)(),M=this.MIDI.getInputs();if(this.interaction.account.plan.features.midiInput)for(let E=0;E<M.length;E++){const I=M[E];I.name===g.selectedOutputDevice.name||I.lock?I.lock=!0:this.selectInputDevice(I)}}toggleInputNotation(){this.inputMIDI.activeNotation?this.inputMIDI.disableNotation():this.inputMIDI.enableNotation()}getClickCount(){return this.audio.getMetronomeCountIn()}toggleMetronomeRecord(){if(!this.audio||!this.audio.transport||!this.audio.transport.metronome)throw new Error("Cannot toggle metronome, no audio, transport or metronome available");if(this.audio.getMetronomeMode()===o.p4.CONTINUOUS){X("metronome is on, let's disable it");const M=(0,v.R)();this.audio.setMetronomeMode(o.p4.DISABLED,{time:0,saveInLocalStorage:!1,stopCurrentSequence:!M.counting}),s.A.set("score-record.metronomeEnabled",!1)}else X("metronome is off, switch it on"),this.audio.setMetronomeMode(o.p4.CONTINUOUS,{time:0,saveInLocalStorage:!1}),s.A.set("score-record.metronomeEnabled",!0)}generateMetaMap(){X("generate meta map");const g=this.data.getNbMeasures();for(let M=0;M<g;M++){const E=this.data.getMeasure(0,M),I=e.default.getAnyTime(E),C=this.commonContent.getTempo(M);this.metaMap.push({beats:I.beats,beatType:I["beat-type"],tempo:C.qpm})}}startPerpetualMetronome(g){if(!this.audio||!this.audio.transport||!this.audio.transport.metronome)throw new Error("Cannot start metronome: no audio, transport or metronome available");this.audio.transport.startMetronomeSolo(g)}stopPerpetualMetronome(){if(!this.audio||!this.audio.transport||!this.audio.transport.metronome)throw new Error("Cannot stop metronome: no audio, transport or metronome available");this.audio.transport.stopMetronomeSolo()}openMIDICalibration(){X("open MIDI calibration window"),(0,v.R)().openCalibration()}closeMIDICalibration(){X("close MIDI calibration window"),(0,v.R)().closeCalibration()}startMIDICalibration(g,M){(0,v.R)().startCalibration(),this.inputMIDI.startCalibration(g,M)}stopMIDICalibration(g,M){(0,v.R)().stopCalibration();const I=`midi.config.${coreMidi.selectedInputDevice.name}`,C=this.inputMIDI.stopCalibration(g,M);return s.A.set(I,C.median),C}cancelMIDICalibration(g=!1){const M=(0,v.R)();if(M.stopCalibration(),M.closeCalibration(),this.inputMIDI.cancelCalibration(),g){const E=`midi.config.${M.selectedInputDevice.name}`;s.A.set(E,L)}}record(g=null){X("MIDI.record");const M=(0,v.R)();g&&(this.cbMetronome=g),this.measureStartRecordUuid=this.cursor.getPositionUuid().measureUuid,this.measureStartRecordIdx=this.cursor.getPositionIdx().measureIdx,this.audio.setMetronomeMode(o.p4.CONTINUOUS),M.selectedInputDevice&&M.selectedInputDevice.id===null&&this.selectFreeInputDevice(),this.startRecord(this.cbMetronome,L),this.addExperience("editor.live-midi")}startRecord(g,M){return O(this,null,function*(){var E,I;if((I=(E=this.interaction.account)==null?void 0:E.plan)!=null&&I.features&&!this.interaction.account.plan.features.midiInput)return;(0,v.R)().startRecording(),this.counting=!0;const Z=o.F6.context.currentTime+.1,te=this.getClickCount(),U=te.clicks*te.sequences*te.unitDuration;this.inputMIDI.setHumanDelay(M),this.inputMIDI.setMetaMap(this.metaMap),this.inputMIDI.startRecording(Z+U),s.A.get("score-record.metronomeEnabled")&&(X("metronome was enabled in the last recording session, enable it again at %d seconds",Z+U),this.startPerpetualMetronome({startTime:Z+U,timeSignatureMeasureIdx:this.measureStartRecordIdx}));const b={startTime:Z,sequenceOpts:te};this.counter=te.clicks*te.sequences,this.midiRecordingAnimId=requestAnimationFrame(this.updateMIDIRecordingDisplay.bind(this)),this.audio.transport.scheduleMetronomeCountdown(b)})}stopRecord(){(0,v.R)().stopRecording(),this.stopPerpetualMetronome(),this.midiRecordingAnimId!==null&&(cancelAnimationFrame(this.midiRecordingAnimId),this.midiRecordingAnimId=null);const g=this.inputMIDI.getStartRecordTime();s.A.get("score-audio.metronomeDisabled")?this.audio.setMetronomeMode(o.p4.DISABLED):this.audio.setMetronomeMode(o.p4.COUNT_IN);const M=this.inputMIDI.stopRecording(g),E=this.cursor.getFullPosition();M.resultEvents.sid=this.interaction.score.id,M.resultEvents.userId=this.interaction.account.id;const I=E.voiceIdxInStaff;return this.scoreData.scoreActions.executePublicAction("insertVoiceMIDI",{partUuid:E.partUuid,measureUuid:this.measureStartRecordUuid,staffUuid:E.staffUuid,voiceUuid:E.voiceUuid,timePos:0,dpq:1,data:{staves:[],voices:[{partIdx:0,staffIdx:0,idxInStaff:I,dpq:1,timePosShift:0,data:M.resultVoices}]}})}updateMIDIRecordingDisplay(){this.cbMetronome&&this.audio.transport.isMetronomeClickTime()&&(this.counter--,this.cbMetronome()),this.counter>0?this.midiRecordingAnimId=requestAnimationFrame(this.updateMIDIRecordingDisplay.bind(this)):((0,v.R)().finishCounting(),this.counting=!1,this.midiRecordingAnimId!==null&&cancelAnimationFrame(this.midiRecordingAnimId),this.midiRecordingAnimId=null)}toggleRecord(){this.inputMIDI.recording?this.stopRecord():this.record()}}const j=y},194953:(l,n,t)=>{"use strict";t.d(n,{A:()=>d});var e=t(123297),o=t(822940),r=t(154477),i=t(938793);const d=(0,i.A)(o.A,[["render",e.X]])},201223:(l,n,t)=>{var e=t(537408);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("186749bc",e,!0,{})},204143:(l,n,t)=>{"use strict";l.exports=t.p+"img/576646a276d91effffd8.png"},208917:(l,n,t)=>{"use strict";t.d(n,{A:()=>Ct});var e=t(361744),o=t(538065),r=t(555381);const i=["placeholder"],s=["aria-label"],d=["aria-label"];function u(G,J,Me,Xe,rt,He){const lt=(0,e.g2)("ChordPreview"),At=(0,e.g2)("FButton"),xt=(0,e.g2)("CollapseIcon"),gt=(0,e.g2)("CloseIcon");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)({[G.$style.root]:!0,[G.$style.rootWide]:Xe.displayMobileEditor&&Xe.isSmallScreen}),"data-cy":"ddn-inner-roman-numeral-text"},[(0,e.bF)(lt,{class:(0,o.C4)(G.$style.chordPreview),"small-height":!0,root:rt.root,inversion:rt.inversion,quality:rt.quality,"relative-root":rt.relativeRoot,"relative-quality":He.relativeQuality},null,8,["class","root","inversion","quality","relative-root","relative-quality"]),(0,e.bo)((0,e.Lk)("input",{ref:"textInput",type:"text","onUpdate:modelValue":J[0]||(J[0]=F=>rt.textPreview=F),placeholder:rt.textPlaceholder,class:(0,o.C4)({[G.$style.input]:!0,[G.$style["input-small"]]:!0}),onKeypress:J[1]||(J[1]=(0,r.D$)(()=>{},["stop"])),onKeyup:J[2]||(J[2]=(0,r.D$)(()=>{},["stop"])),onKeydown:[J[3]||(J[3]=(0,r.jR)((...F)=>He.close&&He.close(...F),["esc"])),J[4]||(J[4]=(0,r.jR)((0,r.D$)((...F)=>He.doButtonAction&&He.doButtonAction(...F),["prevent"]),["enter"])),J[5]||(J[5]=(0,r.D$)((...F)=>He.onKeyDown&&He.onKeyDown(...F),["stop"]))],onInput:J[6]||(J[6]=(...F)=>He.onTextInput&&He.onTextInput(...F))},null,42,i),[[r.Jo,rt.textPreview]]),(0,e.bF)(At,{type:"button",onClick:He.doButtonAction,theme:He.actionTheme,disabled:!He.canDoAction,"default-text":He.actionText,size:"small"},null,8,["onClick","theme","disabled","default-text"]),(0,e.Lk)("button",{type:"button",class:(0,o.C4)(G.$style.roundButton),onClick:J[7]||(J[7]=(...F)=>Xe.toggleRomanNumeralInputType&&Xe.toggleRomanNumeralInputType(...F)),"aria-label":G.$t("flat:expand")},[(0,e.bF)(xt,{class:(0,o.C4)({[G.$style.rotateIcon]:!0,[G.$style.reverse]:Xe.displayMobileEditor&&Xe.isSmallScreen})},null,8,["class"])],10,s),(0,e.Lk)("button",{type:"button",class:(0,o.C4)(G.$style.roundButton),onClick:J[8]||(J[8]=(...F)=>He.close&&He.close(...F)),"aria-label":G.$t("flat:close")},[(0,e.bF)(gt)],10,d)],2)}var m=t(842746),v=t(464173),_=t(697333),S=t(121648),N=t(680468),k=t(909696),O=t(487420),X=t(813897),L=t(612732),y=t(547574),j=t(66469),w=t(471633),g=t(344219);const M=[["7",0],["65",1],["43",2],["42",3],["2",3],["5",0],["64",2],["6",1]];function E(G,J){const Me=M.find(([Xe])=>G.includes(Xe));Me?J.inversion=Me[1]:J.inversion=0}var I=t(476943);function C(G,J){const Me=J.find(Xe=>G.startsWith(Xe));return Me||null}const Z=["maj","Maj","M","^"];function te(G){const J=C(G,Z);return J===null?null:{pattern:J,quality:w.Ay.MAJOR}}const U=["-","min","m"];function b(G){const J=C(G,U);return J===null?null:{pattern:J,quality:w.Ay.MINOR}}function z(G){const J=C(G,U);if(J===null)return null;G=G.slice(J.length);const Me=C(G,Z);return Me===null?null:{pattern:`${J}${Me}`,quality:w.Ay.MINOR_MAJOR}}const ce=["o","dim","d"];function se(G){const J=C(G,ce);return J===null?null:{pattern:J,quality:w.Ay.DIMINISHED}}const x=["+","aug","a"];function T(G){const J=C(G,x);return J===null?null:{pattern:J,quality:w.Ay.AUGMENTED}}const ne=["1/2dim","1/2o","1/2","\xF8"];function p(G){const J=C(G,ne);return J===null?null:{pattern:J,quality:w.Ay.HALF_DIMINISHED}}function le(G,J){let Me;G.isUpperCase?Me=w.Ay.MAJOR:Me=w.Ay.MINOR,J&&(Me=(0,w.ve)(Me)),G.quality=Me}const A=[te,b,z,T,se,p];function de(G,J){return G.pattern.length>J.pattern.length?G:J}const Ae=["7","65","43","42","2"];function be(G){return G=G.trimStart(G),Ae.some(J=>G.includes(J))}function ae(G,J){G=G.trimStart();let Me=A.map(He=>He(G));if(Me=Me.filter(I.default.isNotNull),Me.length===0){const He=be(G);return le(J,He),G}const{pattern:Xe,quality:rt}=Me.reduce(de);return G=G.slice(Xe.length),rt.size===g.A.SEVENTH?J.quality=rt:rt===w.Ay.MAJOR&&!J.isUpperCase?J.quality=w.Ay.MINOR_MAJOR:be(G)?rt===w.Ay.MAJOR?J.quality=w.Ay.MAJOR_7:J.quality=(0,w.ve)(rt):J.quality=rt,G}const ie=["vii","vi","iv","v","iii","ii","i"];function Ne(G,J){const Me=G.toLowerCase(),Xe=ie.find(lt=>Me.startsWith(lt));if(!Xe)return J.relativeRoot=null,J.relativeMode=null,G;J.relativeRoot.degree=Xe;const rt=G.slice(0,Xe.length),He=G.slice(Xe.length);return J.relativeRoot.isUpperCase=rt.split("").some(lt=>lt.toUpperCase()===lt),He}const $e=[["#",1],["b",-1],["s",1],["f",-1]];function Pe(G,J){G=G.trimStart();const Me=$e.find(([Xe])=>G.startsWith(Xe));return Me?(J.relativeRoot.alter=Me[1],G=G.slice(Me[0].length),G):(J.relativeRoot.alter=0,G)}function we(G,J){const Me=G.indexOf("/");return Me<0?(J.relativeRoot=null,J.relativeMode=null,G):(G=G.trimStart(),G=G.slice(Me+1),J.relativeRoot={},G=Pe(G,J),G=Ne(G,J),J.relativeRoot===null||(J.relativeMode=J.relativeRoot.isUpperCase?j.A.MAJOR:j.A.MINOR,delete J.relativeRoot.isUpperCase,J.relativeRoot.alter===0&&(G=Pe(G,J))),G)}const Ze=["n","vii","vi","iv","v","iii","ii","i"];function nt(G,J){const Me=G.toLowerCase(),Xe=Ze.find(lt=>Me.startsWith(lt));if(!Xe)return J.isUpperCase=!0,J.rootStep="i",G;J.rootStep=Xe;const rt=G.slice(0,Xe.length),He=G.slice(Xe.length);return J.isUpperCase=rt.split("").some(lt=>lt.toUpperCase()===lt),He}const Ke=[["#",1],["b",-1],["s",1],["f",-1]];function at(G,J){G=G.trimStart();const Me=Ke.find(([Xe])=>G.startsWith(Xe));return Me?(J.rootAlter=Me[1],G=G.slice(Me[0].length),G):(J.rootAlter=0,G)}function q(G,J){return G=G.trimStart(),G=at(G,J),G=nt(G,J),J.rootAlter===0&&(G=at(G,J)),G}function K(G){const J={};return G=q(G,J),G=ae(G,J),J.rootStep==="n"&&(J.rootStep="N",J.quality=w.Ay.MAJOR,J.rootAlter=0,J.isUpperCase=!0),E(G,J),we(G,J),J}var pe=t(280053),Te=t(58434);const ge=new Map([[w.Ay.MAJOR.key,""],[w.Ay.MINOR.key,""],[w.Ay.AUGMENTED.key,"+"],[w.Ay.DIMINISHED.key,"o"],[w.Ay.AUGMENTED_7.key,"+"],[w.Ay.DIMINISHED_7.key,"o"],[w.Ay.DOMINANT.key,""],[w.Ay.MINOR_7.key,""],[w.Ay.MAJOR_7.key,"M"],[w.Ay.MINOR_MAJOR.key,"M"],[w.Ay.HALF_DIMINISHED.key,"1/2"]]);function Q(G){return ge.get(G.key)}function Re(G){return G.relativeRoot?`/${(0,Te.d)({root:G.relativeRoot,mode:G.relativeMode})}`:""}function Fe(G){const{root:J,inversion:Me}=G,{mode:Xe,size:rt}=G.quality,He=(0,Te.d)({root:J,mode:Xe}),lt=Q(G.quality),At=(0,pe.d)({inversion:Me,size:rt}),xt=Re(G);return`${He}${lt}${At}${xt}`}var xe=Object.defineProperty,Qe=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable,ft=(G,J,Me)=>J in G?xe(G,J,{enumerable:!0,configurable:!0,writable:!0,value:Me}):G[J]=Me,Oe=(G,J)=>{for(var Me in J||(J={}))ze.call(J,Me)&&ft(G,Me,J[Me]);if(Qe)for(var Me of Qe(J))yt.call(J,Me)&&ft(G,Me,J[Me]);return G};function ut(G,J){const Me=G.secondaryFunction.toLowerCase(),Xe=G.secondaryAlter;J.relativeRoot={degree:Me,alter:Xe};const rt=(0,w.wE)(G.secondaryKind);J.relativeMode=rt.mode}const Tt={name:"DdnInnerRomanNumeralText",components:{CloseIcon:O.A,CollapseIcon:X.A,ChordPreview:y.A},emits:["close"],props:{scoreData:{type:Object,required:!0},interaction:{type:Object,required:!0}},setup(){const G=(0,L.k)(),J=(0,S.W)(),Me=(0,k.q6)(),Xe=(0,N.c)();return{isSmallScreen:(0,e.EW)(()=>G.isSmallScreen),selectedType:(0,e.EW)(()=>J.selectedType),noteInfo:(0,e.EW)(()=>J.noteInfo),displayMobileEditor:(0,e.EW)(()=>Me.displayMobileEditor),toggleRomanNumeralInputType:Xe.toggleRomanNumeralInputType}},data(){return{formerRomanNumeral:null,position:null,textPreview:"",textPlaceholder:"iv7",relativeRoot:null,relativeMode:j.A.MAJOR,root:{degree:"i",alter:0},quality:w.Ay.MAJOR,inversion:0,selectedElem:null}},computed:{hasRelativeRoot(){return this.relativeRoot!==null},hasFormer(){return this.formerRomanNumeral!==null},hasInput(){return this.textPreview.trim()!==""},canDoAction(){return this.hasFormer||this.hasInput},actionText(){return this.hasFormer?this.hasInput?"flat:update":"flat:remove":"flat:add"},actionTheme(){return this.hasFormer&&!this.hasInput?"fill-red":"fill"},isChordDifferent(){return!this.hasFormer||this.root.degree!==this.formerRomanNumeral.root.degree||this.root.alter!==this.formerRomanNumeral.root.alter||this.inversion!==this.formerRomanNumeral.inversion||this.quality.key!==this.formerRomanNumeral.quality.key||this.relativeRoot===null!=(this.formerRomanNumeral.relativeRoot===null)||this.relativeRoot!==null&&(this.relativeRoot.alter!==this.formerRomanNumeral.relativeRoot.alter||this.relativeRoot.degree!==this.formerRomanNumeral.relativeRoot.degree||this.relativeMode!==this.formerRomanNumeral.relativeMode)},relativeQuality(){if(this.relativeMode===null)return null;if(this.relativeMode===j.A.MAJOR)return w.Ay.MAJOR;if(this.relativeMode===j.A.MINOR)return w.Ay.MINOR;throw new Error(`Invalid mode: ${this.relativeMode}`)},useNewDisplay(){return(0,_.A)()}},methods:{doButtonAction(){this.hasInput?this.addChord():this.hasFormer?this.removeChord():this.goRight()},addChord(){if(this.isChordDifferent){const G=Oe({},this.position);let J=this.root.degree;const Me=this.root.alter;let Xe=this.quality.adagio;J==="N"&&(J="II",Xe=v.A.NEAPOLITAN);const rt=this.inversion;let He="",lt=0,At="";const xt=0;this.relativeRoot&&(He=this.relativeRoot.degree,lt=this.relativeRoot.alter,At=this.relativeQuality.adagio);const gt={position:G,chordFunction:J,alter:Me,kind:Xe,inversion:rt,secondaryFunction:He,secondaryAlter:lt,secondaryKind:At,secondaryInversion:xt,noCursorRefresh:this.useNewDisplay};this.scoreData.scoreActions.executePublicAction("addClassicHarmony",gt)}this.goRight()},removeChord(){if(this.hasFormer){const G={position:Oe({},this.position),noCursorRefresh:this.useNewDisplay};this.scoreData.scoreActions.executePublicAction("removeClassicHarmony",G)}this.goLeft()},close(){this.$emit("close")},onTextInput(){const G=K(this.textPreview);this.root={alter:G.rootAlter,degree:G.rootStep},this.quality=G.quality,this.inversion=G.inversion,this.textPlaceholder="",this.relativeRoot=G.relativeRoot,this.relativeMode=G.relativeMode},retrieveFormerChord(){var G;let J=null;if(this.selectedType==="classicChord"&&this.interaction.cursor.selectedElem)this.selectedElem=this.interaction.cursor.selectedElem,this.selectedElem.highLight(),J=Oe({},this.interaction.cursor.selectedElem.data),delete J.noteIdx,this.position=J;else if(((G=this.interaction.cursor.selectedEntity)==null?void 0:G.entityType)===m.A.ROMAN_NUMERAL){const Me=this.interaction.cursor.selectedEntity;this.position={partUuid:Me.partUuid,measureUuid:Me.measureUuid,timePos:Me.timePos,dpq:Me.dpq},Me.data&&(J={alter:Me.data.alter,chordFunction:Me.data.chordFunction,inversion:Me.data.inversion,kind:Me.data.kind},Me.data.secondary&&(J.secondaryFunction=Me.data.secondary.chordFunction,J.secondaryAlter=Me.data.secondary.alter,J.secondaryKind=Me.data.secondary.kind,J.secondaryInversion=Me.data.secondary.inversion))}else{const Me=this.interaction.cursor;this.position=Me.getFullPosition(),this.noteInfo.classicHarmony&&(J=this.noteInfo.classicHarmony)}if(J){let Me=J.chordFunction.toLowerCase(),Xe=J.alter,rt=(0,w.wE)(J.kind);const He=J.inversion;J.kind===v.A.NEAPOLITAN&&(Me="N",Xe=0,rt=w.Ay.MAJOR);const lt={root:{degree:Me,alter:Xe},quality:rt,inversion:He,relativeRoot:null,relativeMode:j.A.MAJOR};J.secondaryFunction&&ut(J,lt),this.formerRomanNumeral=lt,Object.assign(this,structuredClone(lt)),this.textPlaceholder=Fe(this.formerRomanNumeral),this.textPreview=this.textPlaceholder}},onKeyDown(G){G.code==="ArrowUp"?(G.preventDefault(),this.goUp()):G.code==="ArrowDown"?(G.preventDefault(),this.goDown()):G.ctrlKey||G.metaKey?G.code==="ArrowLeft"?(G.preventDefault(),this.goLeft()):G.code==="ArrowRight"?(G.preventDefault(),this.goRight()):G.code==="Backspace"&&(G.preventDefault(),this.removeChord()):G.code==="ArrowLeft"&&this.isOnLeftBoundary()?(G.preventDefault(),this.goLeft()):G.code==="ArrowRight"&&this.isOnRightBoundary()?(G.preventDefault(),this.goRight()):G.code==="Backspace"&&this.isOnLeftBoundary()&&(G.preventDefault(),this.removeChord())},goLeft(){this.useNewDisplay?this.scoreData.scoreActions.executePublicAction("goLeftText"):this.scoreData.scoreActions.executePublicAction("goLeft")},goRight(){this.useNewDisplay?this.scoreData.scoreActions.executePublicAction("goRightText"):this.scoreData.scoreActions.executePublicAction("goRight")},goUp(){this.useNewDisplay||this.scoreData.scoreActions.executePublicAction("goPreviousStaff")},goDown(){this.useNewDisplay||this.scoreData.scoreActions.executePublicAction("goNextStaff")},isOnLeftBoundary(){return this.$refs.textInput.selectionStart===0&&this.$refs.textInput.selectionEnd===0},isOnRightBoundary(){return this.$refs.textInput.selectionStart===this.textPreview.length&&this.$refs.textInput.selectionEnd===this.textPreview.length}},watch:{size(){this.size===g.A.TRIAD&&this.inversion===3&&(this.inversion=2)}},mounted(){this.retrieveFormerChord(),this.$refs.textInput.focus()},beforeUnmount(){this.selectedElem&&(this.selectedElem.clearElem(),this.selectedElem=null)}};var ht=t(367124),vt=t.n(ht),Rt=t(938793);const It={};It.$style=vt();const Ct=(0,Rt.A)(Tt,[["render",u],["__cssModules",It]])},209819:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_b4PZf{display:flex;padding:16px;gap:8px}
`,""]),s.locals={root:"root_b4PZf"};const d=s},209879:(l,n,t)=>{var e=t(551130);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("cff3223a",e,!0,{})},211495:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_NnhV6{display:flex;align-items:center;flex-direction:column}.buttons_jAN40{display:flex;gap:8px}.entry_iZ7FX{padding:0;width:24px;height:24px;display:flex;justify-content:center;align-items:center;border:1px solid var(--f-subdue-40);border-radius:8px;background-color:#fff;color:var(--f-subdue);font-size:14px;font-weight:400}.entry_iZ7FX .fill{fill:var(--f-subdue)}.entry_iZ7FX>svg{display:block;height:16px}.entry_iZ7FX.active_qb5L4{border-color:var(--f-primary);color:var(--f-primary);background-color:var(--f-primary-10);font-weight:600}.entry_iZ7FX.active_qb5L4 .fill{fill:var(--f-primary)}.entry_iZ7FX.disabled_ZpVYS{border-color:var(--f-grey-disabled-content);color:var(--f-grey-disabled-content);background-color:var(--f-grey-disabled-container)}.entry_iZ7FX.disabled_ZpVYS .fill{fill:var(--f-grey-disabled-content)}.modes_uQwkp{display:flex;gap:16px;margin-top:16px;margin-bottom:8px;font-weight:var(600)}*[data-color-mode=dark] .entry_iZ7FX{background-color:transparent}*[data-color-mode=dark] .entry_iZ7FX.active_qb5L4{background-color:var(--f-subdue-darker)}*[data-color-mode=dark] .modes_uQwkp{color:#fff}
`,""]),s.locals={root:"root_NnhV6",buttons:"buttons_jAN40",entry:"entry_iZ7FX",active:"active_qb5L4",disabled:"disabled_ZpVYS",modes:"modes_uQwkp"};const d=s},211519:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_ucMb6{display:flex;flex-grow:0;flex-shrink:0;gap:8px}
`,""]),s.locals={root:"root_ucMb6"};const d=s},213784:(l,n,t)=>{var e=t(410195);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("5ee01765",e,!0,{})},214343:l=>{"use strict";l.exports='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16"><path class="fill" fill-rule="evenodd" d="M.128 7.6L3.194.608C3.32.319 3.449 0 3.768 0c.032 0 .096.032.16.032.48.064 1.054.096 1.66.096C6.005.128 6.803 0 7.25 0c.447.032.638.224.638.735v13.157c0 .543.575 1.118 1.022 1.118.48 0 .48.479.48.479s0 .511-.512.511H2.076c-.415 0-.703-.16-.703-.511 0-.383.32-.479.543-.479.67 0 1.405-.48 1.405-1.214v-8.24c0-.19-.064-.446-.191-.446-.064 0-.192.096-.32.32-.35.606-1.724 2.81-1.724 2.81s-.128.287-.447.287c-.032 0-.16-.032-.288-.064C.096 8.367 0 8.176 0 8.016c0-.224.128-.415.128-.415z"/></svg>'},214521:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=38,s=(0,o.pM)({name:"TbDrumroll",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>u.tbTremolo),v=(0,o.EW)(()=>m.value?`drumroll${m.value}`:"drumroll1");return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,iconKey:v.value,active:!!m.value})}})},224481:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.hiddenScrollbar_M96a_{-ms-overflow-style:none;scrollbar-width:none}.hiddenScrollbar_M96a_::-webkit-scrollbar{display:none}
`,""]),s.locals={hiddenScrollbar:"hiddenScrollbar_M96a_"};const d=s},226787:(l,n,t)=>{var e=t(319986);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("177f0adf",e,!0,{})},229384:(l,n,t)=>{"use strict";t.d(n,{GZ:()=>r,jH:()=>s,t0:()=>i});var e;const o=window.flatappname||null;let r=!1;try{r=window.self!==window.top}catch(d){r=!0}const i=(e=window.location.search)==null?void 0:e.includes("__e2e__"),s=(o==null?void 0:o.includes("scoreembed"))||!1},232327:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.toolbarHighlightBox_T7qgx{height:calc(100% - 10px);position:absolute;border-radius:4px;border:1px solid var(--f-primary)}html button.toolbarMobileHighlightBox_Sc0RN{border:1px solid var(--f-primary)}
`,""]),s.locals={toolbarHighlightBox:"toolbarHighlightBox_T7qgx",toolbarMobileHighlightBox:"toolbarMobileHighlightBox_Sc0RN"};const d=s},234496:(l,n,t)=>{var e=t(379685);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("749a8bc2",e,!0,{})},235398:(l,n,t)=>{"use strict";t.d(n,{default:()=>o.a});var e=t(565743),o=t.n(e)},236519:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_zMAik{display:flex;flex-direction:column;transition:margin .4s ease,opacity .4s ease}.root_zMAik.v-enter-from,.root_zMAik.v-leave-to{margin-bottom:-319px;opacity:0}.root_zMAik.v-enter-to,.root_zMAik.v-leave-from{margin-bottom:0;opacity:1}.root_zMAik.hasBottomPadding_NDKB8.v-enter-from,.root_zMAik.hasBottomPadding_NDKB8.v-leave-to{margin-bottom:-339px}.toolbar_D1MAT{display:flex;flex-direction:column;padding:8px;gap:8px}
`,""]),s.locals={root:"root_zMAik",hasBottomPadding:"hasBottomPadding_NDKB8",toolbar:"toolbar_D1MAT"};const d=s},238853:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(909696),o=t(361744),r=t(299035);const i=36,s=(0,o.pM)({name:"TbZoom",props:{scoreData:{type:Object,required:!0},mode:{type:String,required:!0}},setup(d){const u=(0,e.q6)(),m=(0,o.EW)(()=>u.isZoomMin),v=(0,o.EW)(()=>u.isZoomMax);return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.mode==="+"?"zoomIn":"zoomOut",disabled:d.mode==="+"?v.value:m.value})}})},241126:(l,n,t)=>{"use strict";t.d(n,{s:()=>o});var e=t(701387);function o(r,i){const s=i.getMeasureUuid(0),d=i.getNbMeasures(),u=i.getMeasureUuid(d-1),m=i.uuidGetMeasure(r,u),v=e.default.getDpq(m),_=e.default.getNbDivisions(m),S=i.getPartIdxFromUuid(r),N=i.getPartNbStaves(S),k=[];for(let X=0;X<N;X++){const L=i.getPartStaffUuid(S,X);k.push({partUuid:r,staffUuid:L})}return{measureUuids:[s,u],startTimePos:0,startDpq:1,stopTimePos:_,stopDpq:v,content:k}}},243564:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>ne});var e=t(361744),o=t(538065),r=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(p,le,A)=>le in p?r(p,le,{enumerable:!0,configurable:!0,writable:!0,value:A}):p[le]=A,m=(p,le)=>{for(var A in le||(le={}))s.call(le,A)&&u(p,A,le[A]);if(i)for(var A of i(le))d.call(le,A)&&u(p,A,le[A]);return p};const v=["aria-label","onClick","id"];function _(p,le,A,de,Ae,be){const ae=(0,e.g2)("DropdownTrigger"),ie=(0,e.g2)("Dropdown"),Ne=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.Wv)(ie,{ref:"ddn",direction:be.ddnPlacement,"aria-disabled":!!be.disabledReason,class:(0,o.C4)(p.localDdnStyle.root),"overflow-root-viewport":!0},{trigger:(0,e.k6)(()=>[(0,e.bF)(ae,{class:(0,o.C4)(be.triggerClasses),"aria-label":be.mobileText,disabled:!!be.disabledReason},{default:(0,e.k6)(()=>[de.displayMobileEditor?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,o.C4)(p.tbButtonStyle.iconFlex)},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[p.tbButtonStyle.i]:!0,[p.tbButtonStyle.bigIcon]:be.isBigIcon})},null,2),[[Ne,be.iconSvg,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(p.tbButtonStyle.t)},(0,o.v_)(be.mobileText),3)],2)):((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.Lk)("div",{class:(0,o.C4)(p.tbButtonStyle.iconFlex)},[(0,e.bo)((0,e.Lk)("div",{class:(0,o.C4)(p.tbButtonStyle.iconFlex)},null,2),[[Ne,be.iconSvg,"svg"]]),A.highlight?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(p.highlightStyle.toolbarHighlightBox),style:(0,o.Tr)(be.desktopPowerStyle)},null,6)):(0,e.Q3)("",!0)],2),(0,e.Lk)("div",{class:(0,o.C4)(p.tbButtonStyle.caret)},null,2)],64))]),_:1},8,["class","aria-label","disabled"])]),default:(0,e.k6)(()=>[(0,e.Lk)("ul",{class:(0,o.C4)(be.contentClasses)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(A.items,$e=>((0,e.uX)(),(0,e.CE)("li",{key:$e.value},[(0,e.bo)((0,e.Lk)("button",{"aria-label":p.$t(`editor:${$e.action}.title`),onClick:Pe=>be.exec($e),id:`tb-ddni-${$e.action}`,class:(0,o.C4)(m({active:A.active.includes($e.value),disabled:be.disabledItem($e)},be.itemClasses))},null,10,v),[[Ne,Ae.icons[$e.icon||$e.action],"svg"]])]))),128))],2)]),_:1},8,["direction","aria-disabled","class"])}var S=t(27219),N=t(135519),k=t(121648),O=t(727137),X=t(909696),L=t(733268),y=t(653154),j=t(243935),w=t(26292),g=t(741522),M=t(505522),E=t(896099);const I={name:"ToolbarDropdown",components:{Dropdown:L.m,DropdownTrigger:L.u},props:{items:{type:Array,required:!0},active:{type:Array,default:()=>[]},defaultActionIcon:{type:String,required:!0},mainText:{type:String,default:null},scoreData:{type:Object,required:!0},powerWidth:{type:Number,default:null},highlight:{type:Boolean,default:!1}},data(){return{icons:M.default}},setup(){const p=(0,N.d)(),le=(0,k.W)(),A=(0,X.q6)();return{mainShortcutByAction:(0,e.EW)(()=>p.mainShortcutByAction),isEditionBlocked:(0,e.EW)(()=>le.isEditionBlocked),displayMobileEditor:(0,e.EW)(()=>A.displayMobileEditor)}},computed:{ddnPlacement(){return this.displayMobileEditor?"top":"bottom"},activeItems(){return this.items.filter(p=>this.active.includes(p.value))},firstActiveIcon(){return this.activeItems.length>0&&(this.activeItems[0].icon||this.activeItems[0].action)},firstActiveAction(){return this.activeItems.length>0&&(this.activeItems[0].action||this.activeItems[0].icon)},resolvedIconkey(){return this.firstActiveIcon||this.defaultActionIcon},iconSvg(){return M.default[this.resolvedIconkey]},mobileText(){if(this.mainText)return this.mainText;const p=S.actions;return this.firstActiveAction&&p[this.firstActiveAction]?this.$t(`editor:${this.firstActiveAction}.title`):p[this.defaultActionIcon]?this.$t(`editor:${this.defaultActionIcon}.title`):this.$t(`editor:${this.items[0].action}.title`)},isDisabledEditionBlocked(){return this.isEditionBlocked?!this.items.every(p=>S.actions[p.action].groups.includes("ro")):!1},disabledReason(){return this.isDisabledEditionBlocked?"editionBlocked":(0,O.x)()[`${this.defaultActionIcon}DisabledReason`]},desktopPowerStyle:g.X,triggerClasses(){const p={active:this.activeItems.length>0,disabled:this.disabledReason,[this.tbButtonStyle.rootCommon]:!0};return this.displayMobileEditor?(p[this.tbButtonStyle.rootMobileDetailed]=!0,this.highlight&&(p[this.highlightStyle.toolbarMobileHighlightBox]=!0,p["show-highlight"]=!0)):p[this.tbButtonStyle.rootDesktop]=!0,p},isBigIcon(){return(0,E.default)(this.defaultActionIcon)},itemClasses(){return this.displayMobileEditor?{[this.localDdnStyle.itemCommon]:!0,[this.localDdnStyle.itemMobile]:!0}:{[this.localDdnStyle.itemCommon]:!0,[this.localDdnStyle.itemDekstop]:!0}},contentClasses(){return this.displayMobileEditor?[this.localDdnStyle.contentRoot,this.ddnStyle.contentCommon,this.ddnStyle.contentMobile]:[this.localDdnStyle.contentRoot,this.ddnStyle.contentCommon]},alignClasses(){return{[this.ddnStyle.alignDesktop]:!this.displayMobileEditor}}},watch:{mobileText(p){this.$tooltip&&p&&this.$tooltip.setContent(p)}},methods:{exec(p){return this.$refs.ddn.close(),this.disabledReason||this.disabledItem(p)?Promise.resolve():this.scoreData.scoreActions.executePublicAction(p.action)},setupMainTooltip(){document.body.classList.contains("touch")||(this.$tooltip&&this.$tooltip.destroy(),this.$tooltip=new j.vF(this.$el,{touch:!1,placement:"bottom",content:this.mobileText,popperOptions:{positionFixed:!0},duration:[0,0]}))},destroyMainTooltip(){this.$tooltip&&(this.$tooltip.destroy(),this.$tooltip=null)},disabledItem(p){return this.isDisabledEditionBlocked&&!S.actions[p.action].groups.includes("ro")?"editionBlocked":(0,O.x)()[`${p.action}DisabledReason`]}},mounted(){document.body.classList.contains("touch")||(this.setupMainTooltip(),this.tooltips={},this.items.forEach(p=>{const le=`tb-ddni-${p.action}`,A=this.$el.querySelector(`#${le}`);if(A){const de=`${p.action}.title`;let Ae=this.$t(`editor:${de}`);de===Ae&&(0,y.vV)(new Error(`Missing i18n: ${de}`));const be=this.mainShortcutByAction[p.action];be&&(Ae+=` (${(0,w.lD)(be.shortcuts)})`),this.tooltips[le]=new j.vF(A,{placement:"right",content:Ae,arrow:j.qO,duration:[0,0]})}}))},beforeUnmount(){this.tooltips&&(Object.keys(this.tooltips).forEach(p=>{this.tooltips[p].destroy()}),this.tooltips={})}};var C=t(335014),Z=t.n(C),te=t(303511),U=t(540850),b=t.n(U),z=t(663189),ce=t.n(z),se=t(938793);const x={};x.highlightStyle=Z(),x.tbButtonStyle=te.default,x.ddnStyle=b(),x.localDdnStyle=ce();const ne=(0,se.A)(I,[["render",_],["__cssModules",x]])},243935:(l,n,t)=>{"use strict";t.d(n,{m_:()=>o.A,qO:()=>e.roundArrow,vF:()=>e.default});var e=t(490074),o=t(659004),r=null},245916:(l,n,t)=>{"use strict";t.d(n,{default:()=>o.a});var e=t(997829),o=t.n(e)},246551:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.input_kaZo1{background-color:var(--f-white);border:1px solid var(--border-neutral-tertiary);border-radius:var(--radius-standard);font-family:inherit;width:100%;font-size:14px;line-height:20px;color:var(--f-ink)}.input_kaZo1:focus,.input_kaZo1:active{border-color:var(--f-primary)}.input_kaZo1::placeholder{color:var(--f-subdue)}.input-x-small_N78Nm{padding:1px 8px}.input-small_yfdxP{padding:6px 8px}.input-medium_FBlf0{padding:9px 8px}.input-large_rdsGN{padding:13px 8px}.input_kaZo1[aria-disabled=true]{background-color:var(--f-bg-1);color:var(--f-grey-disabled-content)}.input_kaZo1[aria-invalid=true]{border-color:var(--f-safe-red)}.root_DiaZY{display:flex;flex-direction:column;padding:0 16px 24px;gap:24px;min-width:300px}.tabs_qVwtx{border-bottom:1px solid var(--f-subdue-40);--f-tab-active-color: var(--f-primary)}.preview_WZBnU{display:flex;justify-content:space-between;gap:8px}.previewOuter_dyK0y{display:flex;justify-content:center;gap:8px}.currentInput_xKDDL{min-height:100px}.bottomBlock_OI4Zl{display:flex;flex-direction:column;gap:24px;justify-content:end;align-items:center;width:100%}.deleteBlock_cyHXC{display:flex;gap:8px;align-items:center}.deleteInfo_EEIIE{display:flex;align-items:center;color:var(--f-subdue)}.textBlock_bSqDB{width:100%;display:flex;gap:8px;justify-content:center}.footer_TPNYx{width:100%;display:flex;justify-content:space-between}*[data-color-mode=dark] .ddnKeysigInner_dG4Ee .stroke{stroke:var(--f-subdue)}*[data-color-mode=dark] .ddnKeysigInner_dG4Ee .fill{fill:var(--f-subdue)}
`,""]),s.locals={input:"input_kaZo1","input-x-small":"input-x-small_N78Nm","input-small":"input-small_yfdxP","input-medium":"input-medium_FBlf0","input-large":"input-large_rdsGN",root:"root_DiaZY",tabs:"tabs_qVwtx",preview:"preview_WZBnU",previewOuter:"previewOuter_dyK0y",currentInput:"currentInput_xKDDL",bottomBlock:"bottomBlock_OI4Zl",deleteBlock:"deleteBlock_cyHXC",deleteInfo:"deleteInfo_EEIIE",textBlock:"textBlock_bSqDB",footer:"footer_TPNYx",ddnKeysigInner:"ddnKeysigInner_dG4Ee"};const d=s},247477:(l,n,t)=>{"use strict";t.d(n,{default:()=>o.a});var e=t(190780),o=t.n(e)},248121:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.bottomPadding_yncC0{padding-bottom:40px}
`,""]),s.locals={bottomPadding:"bottomPadding_yncC0"};const d=s},249142:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>i,width:()=>r});var e=t(361744),o=t(299035);const r=63,i=(0,e.pM)({name:"TbSwitchEnharmonic",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(s){return()=>(0,e.h)(o.default,{scoreData:s.scoreData,action:s.name})}})},252234:(l,n,t)=>{"use strict";t.d(n,{$:()=>s,d:()=>d});var e=t(681670),o=t(637963);const r=["A","B","C","D","E","F","G"];function i(u){const m=r.find(v=>u.includes(v));return m!=null?m:null}function s(u){const m=i(u);if(m===null)return null;const v=(0,o.Y)(u);return m?e.A.create(m,v):null}function d(u){var m;if(!u)return"";const v=e.A.getStep(u),_=e.A.getAlter(u),N=(m={"-2":"bb","-1":"b",1:"#",2:"##"}[_.toString()])!=null?m:"";return`${v}${N}`}},255793:(l,n,t)=>{"use strict";t.d(n,{A:()=>ne});var e=t(361744),o=t(538065),r=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(p,le,A)=>le in p?r(p,le,{enumerable:!0,configurable:!0,writable:!0,value:A}):p[le]=A,m=(p,le)=>{for(var A in le||(le={}))s.call(le,A)&&u(p,A,le[A]);if(i)for(var A of i(le))d.call(le,A)&&u(p,A,le[A]);return p};const v=["height","width"];function _(p,le,A,de,Ae,be){return(0,e.uX)(),(0,e.CE)("svg",{class:(0,o.C4)(m({[p.$style.root]:!0},be.selectedClass)),height:be.height,width:Ae.width,ref:"svg"},null,10,v)}var S=t(342023),N=t(669834),k=t(331751),O=t(153787),X=t(614653),L=t(659140),y=t(996636),j=t(613903),w=t(624740),g=t(864409),M=t(69587),E=t(985734),I=t(178273);const C=18,Z=140,te=52,U=34,b={name:"ChordPreview",components:{},props:{root:{type:Object,required:!0},step:{type:String,default:null},quality:{type:Object,default(){return E.Ay.MAJOR}},degrees:{type:Array,required:!0},bass:{type:Object,default:null},alter:{type:Boolean,required:!0},smallHeight:{type:Boolean,default:!1}},data(){return{width:Z}},computed:{height(){return this.smallHeight?U:te},hash(){return`${JSON.stringify(this.root)}
          ${this.quality.key}
          ${JSON.stringify(this.bass)}
          ${this.alter}
          ${JSON.stringify(this.degrees)}`},selectedClass(){const p={};return this.step===I.A.ROOT?p[this.$style.stepRoot]=!0:this.step===I.A.QUALITY?p[this.$style.stepQuality]=!0:this.step===I.A.DEGREE_MOD?p[this.$style.stepDegreeMod]=!0:this.step===I.A.INVERSION&&(p[this.$style.stepInversion]=!0),p}},watch:{hash(){this.drawChord()}},methods:{drawChord(){this.clearSvg(),g.default.getDocument()||g.default.setDocument(window.document);const p=this.quality.adagio,le=X.default.createJazz(this.root,p);X.default.setTimePos(le,0),X.default.setHarmonyUuid(le,null),this.degrees&&X.default.setDegrees(le,this.degrees),this.bass&&X.default.setBass(le,this.bass),this.alter&&X.default.setType(le,j.A.ALTERNATE);const A=new O.A;A.setDisplayOpts({jazzChordPartConfig:{[L.A.MAJOR]:y.A.UPPER_CASE,[L.A.MINOR]:y.A.LOWER_CASE,[L.A.DIMINISHED]:y.A.SYMBOL}});const de=A.build(le);de.setDrawingContext(this.drawingContext);const Ae=new S.default(this.$el);de.setParent(Ae);const be=de.getWidth(),ae=de.getHeight(),ie=this.width/2-be/2,Ne=this.height/2-ae/2;de.setPosX(ie),de.setPosY(Ne),de.draw()},clearSvg(){const p=this.$el;for(;p.firstChild;)p.removeChild(p.lastChild)}},mounted(){const p=new N.A(this.$el),le=w.default,A={harmonyText:{"font-family":"Century Schoolbook L","font-size":"2.8sp"}};this.drawingContext=new k.A(p,le,C,M.S,A),this.drawChord()}};var z=t(473927),ce=t.n(z),se=t(938793);const x={};x.$style=ce();const ne=(0,se.A)(b,[["render",_],["__cssModules",x]])},258518:l=>{"use strict";l.exports='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path class="fill" fill-rule="evenodd" d="M10.92 10.377h2.331c.351 0 .479.224.479.607s-.16.607-.479.607h-2.33v1.884c0 1.021.67 1.213.989 1.213.32 0 .702.191.702.639 0 .447-.319.67-.638.67H5.173c-.48 0-.607-.351-.607-.67 0-.32.224-.607.734-.607.575 0 1.278-.256 1.278-1.118v-2.011H.638c-.383 0-.638-.224-.638-.543 0-.096.032-.224.096-.351 0-.032.032-.064.032-.096l.191-.256c.958-1.34 4.087-5.779 4.087-9.738 0-.511.447-.607.735-.607.255 0 1.692.064 2.267.064S9.292 0 9.579 0c.256 0 .479.192.479.447 0 .064-.032.096-.032.16-.096.35-5.205 7.6-7.759 9.77h4.31V7.695c0-.383.16-.575.288-.734l3.033-3.672c.192-.224.352-.288.639-.288.351 0 .383.288.383.543v6.833z"/></svg>'},260690:(l,n,t)=>{var e=t(829177);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("2435ffa2",e,!0,{})},263975:(l,n,t)=>{var e=t(688208);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("52e40515",e,!0,{})},264191:(l,n,t)=>{var e=t(588484);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("849e3684",e,!0,{})},266456:l=>{"use strict";l.exports='<svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 16"><path class="fill" fill-rule="evenodd" d="M12.748 10.706c-.501 4.854-2.912 4.979-4.259 4.979-2.786 0-3.256-1.691-4.508-1.691-1.848 0-2.223 1.91-2.912 1.91-.063 0-.157 0-.25-.063-.345-.219-.564-.626-.564-.97 0-.063.03-.126.03-.188.533-1.973 1.754-3.507 3.476-4.603C5.296 9.14 6.172 8.39 7.3 6.886a5.226 5.226 0 0 0 1.064-3.193c0-.908-.031-3.006-2.818-3.006-1.847 0-2.41.751-2.473 1.19 0 .626 2.16.72 2.16 2.598 0 .783-.282 2.756-2.192 2.756-1.127 0-2.098-.752-2.567-1.722a3.582 3.582 0 0 1-.282-1.347c0-.845.344-1.628.877-2.285C1.82 1 2.916.342 4.012.123c.814-.188 1.879-.219 2.724-.219.689 0 3.131.188 4.728 1.534.814.69 1.44 1.754 1.44 3.225 0 1.378-.595 2.286-1.346 2.88C10.525 8.39 9.21 8.64 8.74 8.766c-.689.188-3.35 1.127-4.04 2.254a3.458 3.458 0 0 1 1.16-.187c1.283 0 2.755.5 3.38.751.314.157.533.188.94.344.22.063.376.094.533.094.657 0 .908-.594 1.22-1.346 0-.031.032-.063.032-.094.063-.188.157-.313.407-.313.22 0 .376.063.376.438z"/></svg>'},276132:(l,n,t)=>{"use strict";t.d(n,{A:()=>X});var e=t(842746),o=t(681670),r=t(737903),i=t(701387),s=t(529355),d=t(613903),u=t(985734),m=Object.defineProperty,v=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,N=(L,y,j)=>y in L?m(L,y,{enumerable:!0,configurable:!0,writable:!0,value:j}):L[y]=j,k=(L,y)=>{for(var j in y||(y={}))_.call(y,j)&&N(L,j,y[j]);if(v)for(var j of v(y))S.call(y,j)&&N(L,j,y[j]);return L},O=(L,y,j)=>new Promise((w,g)=>{var M=C=>{try{I(j.next(C))}catch(Z){g(Z)}},E=C=>{try{I(j.throw(C))}catch(Z){g(Z)}},I=C=>C.done?w(C.value):Promise.resolve(C.value).then(M,E);I((j=j.apply(L,y)).next())});const X={setRootStep(L,y=!0){s.A.setStep(this.chordData.root,L),this.resetBass(!1),this.resetDegrees(y),y&&this.updateTextPreview()},setRootAlter(L,y=!0){s.A.setAlter(this.chordData.root,L),this.resetBass(!1),this.resetDegrees(y),y&&this.updateTextPreview()},setQuality(L,y=!0){this.chordData.quality=L,this.resetBass(!1),this.resetDegrees(y),y&&this.updateTextPreview()},setSize(L){L!==this.size&&(this.chordData.quality=(0,u.lN)(L),this.updateTextPreview())},resetDegrees(L=!0){this.chordData.degrees=[],this.useSuspended=!0,L&&this.updateTextPreview()},setDegrees(L){return O(this,arguments,function*({degrees:y,useSuspended:j},w=!0){this.chordData.degrees=y,this.canUseSuspended=j,this.resetBass(!1),w?this.updateTextPreview():(yield this.$nextTick(),this.$refs.degreeModInput.resetDegrees())})},resetBass(L=!0){this.chordData.bass=void 0,L&&this.updateTextPreview()},setBass(L,y=!0){const j=o.A.getStep(L),w=o.A.getAlter(L),g=s.A.create(j,w);s.A.isSame(g,this.chordData.root)?this.chordData.bass=void 0:this.chordData.bass=L,y&&this.updateTextPreview()},toggleAlter(){this.chordData.alter=!this.chordData.alter},retrieveStaffDetails(){const L=this.scoreData.adagioData;let y=this.position.partIdx;y===void 0&&(y=L.getPartIdxFromUuid(this.position.partUuid));const j=L.getMeasure(y,0),[w]=i.default.getStaffDetails(j);this.staffDetails=(0,r.default)(w)},retrieveFormerChord(){let L=null;if(this.selectedType==="chord"&&this.interaction.cursor.selectedElem)L=k({},this.interaction.cursor.selectedElem.data),delete L.noteIdx,this.position=L;else if(this.interaction.cursor.selectedEntity&&this.interaction.cursor.selectedEntity.entityType===e.A.JAZZ_HARMONY){const y=this.interaction.cursor.selectedEntity;this.position={partUuid:y.partUuid,measureUuid:y.measureUuid,timePos:y.timePos,dpq:y.dpq},y.data&&(L={kind:y.data.kind,type:y.data.type,root:y.data.root,degrees:y.data.degreeModifications},y.data.bass&&(L.bass=y.data.bass))}else{const y=this.interaction.cursor;this.position=y.getFullPosition(),this.noteInfo.harmony&&(L=this.noteInfo.harmony)}if(L){const y=s.A.getStep(L.root),j=s.A.getAlter(L.root),w=s.A.create(y,j),g=(0,u.wE)(L.kind),M=L.degrees||[],E=L.bass?L.bass:null,I=L.type===d.A.ALTERNATE,C={root:w,quality:g};M&&(C.degrees=M),E&&(C.bass=E),I&&(C.alter=I),this.formerJazzChord=C,Object.assign(this.chordData,JSON.parse(JSON.stringify(C))),this.updateTextPreview()}}}},277460:(l,n,t)=>{"use strict";t.d(n,{A:()=>Se});var e=t(361744),o=t(538065),r=t(555381);const i=["placeholder"],s={key:1};function d(B,W,V,Ie,Ee,De){const ot=(0,e.g2)("TabItem"),je=(0,e.g2)("Tab"),Ve=(0,e.g2)("arrowLeft"),a=(0,e.g2)("FButton"),c=(0,e.g2)("ChordPreview"),f=(0,e.g2)("CloseIcon"),oe=(0,e.g2)("arrowRight"),Ue=(0,e.g2)("RootInput"),Le=(0,e.g2)("QualityInput"),Pt=(0,e.g2)("InversionInput"),Ot=(0,e.g2)("InfoIcon"),pt=(0,e.g2)("FButtonGroup"),bt=(0,e.gN)("tooltip");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(B.$style.root),"data-cy":"ddn-inner-roman-numeral"},[(0,e.bF)(je,{class:(0,o.C4)(B.$style.tabs)},{default:(0,e.k6)(()=>[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(De.availableSteps,ct=>((0,e.uX)(),(0,e.Wv)(ot,{key:ct,active:Ee.currentStep===ct,onClick:Xt=>De.setStep(ct),size:"small"},{default:(0,e.k6)(()=>[(0,e.eW)((0,o.v_)(B.$t(`editor:romanNumerals.step.${ct}`)),1)]),_:2},1032,["active","onClick"]))),128))]),_:1},8,["class"]),(0,e.Lk)("div",{class:(0,o.C4)(B.$style.preview)},[(0,e.bo)(((0,e.uX)(),(0,e.Wv)(a,{onClick:De.goLeft,theme:"ghost-subdue","aria-label":B.$t("editor:goLeft.title")},{default:(0,e.k6)(()=>[(0,e.bF)(Ve)]),_:1},8,["onClick","aria-label"])),[[bt,{text:B.$t("editor:romanNumerals.shortcut.goLeft")}]]),(0,e.Lk)("div",{class:(0,o.C4)(B.$style.previewOuter)},[(0,e.bF)(c,{root:Ee.root,inversion:Ee.inversion,quality:Ee.quality,step:Ee.currentStep,onGoRight:De.goRight},null,8,["root","inversion","quality","step","onGoRight"]),De.hasRelativeRoot?((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.bF)(c,{root:Ee.relativeRoot,inversion:0,quality:De.relativeQuality,step:Ee.currentStep===Ee.Step.RELATIVE_ROOT?Ee.Step.ROOT:null,"is-relative":!0},null,8,["root","quality","step"]),(0,e.bF)(a,{type:"button",onClick:De.removeRelativeRoot,"aria-label":B.$t("editor:romanNumerals.removeOfDegree"),theme:"ghost-subdue",size:"small"},{default:(0,e.k6)(()=>[(0,e.bF)(f)]),_:1},8,["onClick","aria-label"])],64)):(0,e.bo)(((0,e.uX)(),(0,e.Wv)(a,{key:0,type:"button",onClick:De.editRelativeRoot,theme:"ghost-subdue","default-text":"editor:romanNumerals.addSlash",size:"small"},null,8,["onClick"])),[[bt,{text:B.$t("editor:romanNumerals.shortcut.slash")}]])],2),(0,e.bo)(((0,e.uX)(),(0,e.Wv)(a,{onClick:De.goRight,"aria-label":B.$t("editor:goRight.title"),theme:"ghost-subdue"},{default:(0,e.k6)(()=>[(0,e.bF)(oe)]),_:1},8,["onClick","aria-label"])),[[bt,{text:B.$t("editor:romanNumerals.shortcut.goRight")}]])],2),Ee.currentStep===Ee.Step.ROOT?((0,e.uX)(),(0,e.Wv)(Ue,{key:0,class:(0,o.C4)(B.$style.currentInput),degree:Ee.root.degree,alter:Ee.root.alter,mode:De.rootMode,onSetMode:De.setRootMode,onSetDegree:De.setRootDegree,onSetAlter:De.setRootAlter},null,8,["class","degree","alter","mode","onSetMode","onSetDegree","onSetAlter"])):(0,e.Q3)("",!0),Ee.currentStep===Ee.Step.QUALITY?((0,e.uX)(),(0,e.Wv)(Le,{key:1,class:(0,o.C4)(B.$style.currentInput),"quality-key":Ee.quality.key,size:De.size,onSetSize:De.setSize,onSetQuality:De.setQuality},null,8,["class","quality-key","size","onSetSize","onSetQuality"])):(0,e.Q3)("",!0),Ee.currentStep===Ee.Step.INVERSION?((0,e.uX)(),(0,e.Wv)(Pt,{key:2,class:(0,o.C4)(B.$style.currentInput),inversion:Ee.inversion,size:De.size,onSetInversion:De.setInversion},null,8,["class","inversion","size","onSetInversion"])):(0,e.Q3)("",!0),Ee.currentStep===Ee.Step.RELATIVE_ROOT?((0,e.uX)(),(0,e.Wv)(Ue,{key:3,class:(0,o.C4)(B.$style.currentInput),degree:Ee.relativeRoot.degree,alter:Ee.relativeRoot.alter,mode:Ee.relativeMode,"is-relative":!0,onSetMode:De.setRelativeRootMode,onSetDegree:De.setRelativeRootDegree,onSetAlter:De.setRelativeRootAlter},null,8,["class","degree","alter","mode","onSetMode","onSetDegree","onSetAlter"])):(0,e.Q3)("",!0),(0,e.Lk)("div",{class:(0,o.C4)(B.$style.bottomBlock)},[De.hasFormer||!Ie.displayMobileEditor?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(B.$style.textBlock)},[Ie.displayMobileEditor?(0,e.Q3)("",!0):(0,e.bo)(((0,e.uX)(),(0,e.CE)("input",{key:0,ref:"textInput",type:"text","onUpdate:modelValue":W[0]||(W[0]=ct=>Ee.textPreview=ct),placeholder:Ee.textPlaceholder,class:(0,o.C4)({[B.$style.input]:!0,[B.$style["input-small"]]:!0}),onKeypress:W[1]||(W[1]=(0,r.D$)(()=>{},["stop"])),onKeyup:W[2]||(W[2]=(0,r.D$)(()=>{},["stop"])),onKeydown:[W[3]||(W[3]=(0,r.jR)((...ct)=>De.close&&De.close(...ct),["esc"])),W[4]||(W[4]=(0,r.jR)((0,r.D$)((...ct)=>De.next&&De.next(...ct),["prevent"]),["space"])),W[5]||(W[5]=(0,r.jR)((0,r.D$)((...ct)=>De.addChord&&De.addChord(...ct),["prevent"]),["enter"])),W[6]||(W[6]=(0,r.D$)((...ct)=>De.onKeyDown&&De.onKeyDown(...ct),["stop"]))],onInput:W[7]||(W[7]=(...ct)=>De.onTextInput&&De.onTextInput(...ct))},null,42,i)),[[r.Jo,Ee.textPreview]]),De.hasFormer?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,o.C4)(B.$style.deleteBlock)},[(0,e.bF)(a,{type:"button",onClick:De.removeChord,theme:"ghost-subdue","default-text":"editor:romanNumerals.deleteChord.title",size:"small"},null,8,["onClick"]),(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(B.$style.deleteInfo)},[(0,e.bF)(Ot)],2)),[[bt,{text:B.$t("editor:romanNumerals.deleteChord.desc"),placement:"bottom",arrow:!1,maxWidth:180,touch:!0}]])],2)):(0,e.Q3)("",!0)],2)):(0,e.Q3)("",!0),(0,e.Lk)("div",{class:(0,o.C4)(B.$style.footer)},[De.canGoBack?((0,e.uX)(),(0,e.Wv)(a,{key:0,type:"button",onClick:De.back,theme:"ghost-subdue","default-text":De.backText,size:"small"},null,8,["onClick","default-text"])):((0,e.uX)(),(0,e.CE)("div",s)),(0,e.bF)(pt,null,{default:(0,e.k6)(()=>[De.canGoNext?(0,e.bo)(((0,e.uX)(),(0,e.Wv)(a,{key:0,type:"button",onClick:De.next,theme:"outline","default-text":De.nextText,size:"small"},null,8,["onClick","default-text"])),[[bt,{text:B.$t("editor:romanNumerals.shortcut.spacebar")}]]):(0,e.Q3)("",!0),(0,e.bo)((0,e.bF)(a,{type:"button",onClick:De.addChord,theme:"fill","default-text":De.saveText,size:"small"},null,8,["onClick","default-text"]),[[bt,{text:B.$t("editor:romanNumerals.shortcut.enter")}]])]),_:1})],2)],2)],2)}var u=t(842746),m=t(464173),v=t(697333),_=t(121648),S=t(909696),N=t(487420),k=t(57794),O=t(584527),X=t(575760),L=t(599325),y=t(547574);const j=["onClick","aria-selected"];function w(B,W,V,Ie,Ee,De){return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(B.$style.root)},[(0,e.Lk)("h6",{class:(0,o.C4)(B.$style.title)},(0,o.v_)(B.$t("editor:romanNumerals.inversion.title")),3),(0,e.Lk)("div",{class:(0,o.C4)(B.$style.buttons)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(De.inversions,ot=>((0,e.uX)(),(0,e.CE)("button",{key:ot,type:"button",onClick:je=>De.setInversion(ot),class:(0,o.C4)({[B.$style.entry]:!0,[B.$style.active]:V.inversion===ot}),"aria-selected":V.inversion===ot},[(0,e.Lk)("span",null,(0,o.v_)(B.$t(`editor:romanNumerals.inversion.${ot}`)),1),W[0]||(W[0]=(0,e.Lk)("br",null,null,-1)),(0,e.Lk)("span",null,(0,o.v_)(De.getInversionText(ot)),1)],10,j))),128))],2)],2)}var g=t(344219);const M=[0,1,2],E=[0,1,2,3],I=new Map([[0,"5"],[1,"6"],[2,"6 4"]]),C=new Map([[0,"7"],[1,"6 5"],[2,"4 3"],[3,"4 2"]]),Z={name:"QualityInput",components:{},emits:["setInversion"],props:{size:{type:String,required:!0},inversion:{type:Number,required:!0}},computed:{inversions(){if(this.size===g.A.TRIAD)return M;if(this.size===g.A.SEVENTH)return E;throw new Error(`Invalid size: ${this.size}`)}},methods:{getInversionText(B){if(this.size===g.A.TRIAD)return I.get(B);if(this.size===g.A.SEVENTH)return C.get(B);throw new Error(`Invalid size: ${this.size}`)},setInversion(B){this.$emit("setInversion",B)}}};var te=t(772701),U=t.n(te),b=t(938793);const z={};z.$style=U();const se=(0,b.A)(Z,[["render",w],["__cssModules",z]]);var x=t(66469),T=t(471633);const ne=["onClick","aria-selected"],p=["onClick","aria-selected"];function le(B,W,V,Ie,Ee,De){const ot=(0,e.g2)("FRadio");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(B.$style.root)},[(0,e.Lk)("div",{class:(0,o.C4)(B.$style.sizes)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Ee.SIZES,je=>((0,e.uX)(),(0,e.Wv)(ot,{key:je,value:je,modelValue:Ee.localSize,"onUpdate:modelValue":W[0]||(W[0]=Ve=>Ee.localSize=Ve),onChange:W[1]||(W[1]=Ve=>De.setSize())},{default:(0,e.k6)(()=>[(0,e.Lk)("span",null,(0,o.v_)(B.$t(`editor:romanNumerals.size.${je}`)),1)]),_:2},1032,["value","modelValue"]))),128))],2),(0,e.Lk)("div",{class:(0,o.C4)(B.$style.buttons)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(De.topRow,(je,Ve)=>((0,e.uX)(),(0,e.CE)("div",{key:Ve,class:(0,o.C4)(B.$style.buttonContainer)},[je!==null?((0,e.uX)(),(0,e.CE)("button",{key:0,type:"button",onClick:a=>De.setQuality(je),class:(0,o.C4)({[B.$style.entry]:!0,[B.$style.active]:V.qualityKey===je.key}),"aria-selected":V.qualityKey===je.key},(0,o.v_)(B.$t(`editor:romanNumerals.quality.${je.key}`)),11,ne)):(0,e.Q3)("",!0)],2))),128))],2),(0,e.Lk)("div",{class:(0,o.C4)(B.$style.buttons)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(De.bottomRow,(je,Ve)=>((0,e.uX)(),(0,e.CE)("div",{key:Ve,class:(0,o.C4)(B.$style.buttonContainer)},[je!==null?((0,e.uX)(),(0,e.CE)("button",{key:0,type:"button",onClick:a=>De.setQuality(je),class:(0,o.C4)({[B.$style.entry]:!0,[B.$style.active]:V.qualityKey===je.key}),"aria-selected":V.qualityKey===je.key},(0,o.v_)(B.$t(`editor:romanNumerals.quality.${je.key}`)),11,p)):(0,e.Q3)("",!0)],2))),128))],2)],2)}var A=t(531070);const de=Array.from(Object.values(T.Ay)).filter(B=>B.size===g.A.TRIAD&&B.mode===x.A.MAJOR),Ae=Array.from(Object.values(T.Ay)).filter(B=>B.size===g.A.TRIAD&&B.mode===x.A.MINOR),be=[T.Ay.DOMINANT,T.Ay.MAJOR_7,T.Ay.AUGMENTED_7,T.Ay.MINOR_MAJOR],ae=[null,T.Ay.MINOR_7,T.Ay.DIMINISHED_7,T.Ay.HALF_DIMINISHED],ie={name:"QualityInput",components:{FRadio:A.A},emits:["setQuality","setSize"],props:{qualityKey:{type:String,required:!0},size:{type:String,required:!0}},data(){return{SIZES:[g.A.TRIAD,g.A.SEVENTH],localSize:null}},watch:{size(){this.localSize=this.size}},computed:{topRow(){if(this.size===g.A.TRIAD)return de;if(this.size===g.A.SEVENTH)return be;throw new Error(`Invalid size: ${this.size}`)},bottomRow(){if(this.size===g.A.TRIAD)return Ae;if(this.size===g.A.SEVENTH)return ae;throw new Error(`Invalid size: ${this.size}`)}},methods:{setQuality(B){this.$emit("setQuality",B)},setSize(){this.$emit("setSize",this.localSize)}},created(){this.localSize=this.size}};var Ne=t(3852),$e=t.n(Ne);const Pe={};Pe.$style=$e();const Ze=(0,b.A)(ie,[["render",le],["__cssModules",Pe]]),nt=["onClick","aria-label","aria-selected","disabled"],Ke=["onClick","aria-selected"];function at(B,W,V,Ie,Ee,De){const ot=(0,e.g2)("FRadio"),je=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(B.$style.root)},[(0,e.Lk)("div",{class:(0,o.C4)(B.$style.buttons)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Ee.ALTERS,Ve=>(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{type:"button",key:Ve,onClick:a=>De.setAlter(Ve),class:(0,o.C4)({[B.$style.entry]:!0,[B.$style.active]:V.alter===Ve,[B.$style.disabled]:De.isNeapolitan}),"aria-label":De.getAlterLabel(Ve),"aria-selected":V.alter===Ve,disabled:De.isNeapolitan},null,10,nt)),[[je,De.getAlterIcon(Ve),"svg"]])),128))],2),(0,e.Lk)("div",{class:(0,o.C4)(B.$style.modes)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Ee.MODES,Ve=>((0,e.uX)(),(0,e.Wv)(ot,{key:Ve,value:Ve,modelValue:Ee.localMode,"onUpdate:modelValue":W[0]||(W[0]=a=>Ee.localMode=a),onChange:W[1]||(W[1]=a=>De.setMode())},{default:(0,e.k6)(()=>[(0,e.eW)((0,o.v_)(B.$t(`editor:romanNumerals.mode.${Ve}`)),1)]),_:2},1032,["value","modelValue"]))),128))],2),(0,e.Lk)("div",{class:(0,o.C4)(B.$style.buttons)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(De.degrees,(Ve,a)=>((0,e.uX)(),(0,e.CE)("button",{type:"button",key:Ve,onClick:c=>De.setDegree(a),class:(0,o.C4)({[B.$style.entry]:!0,[B.$style.active]:V.degree===Ee.DEGREES_MINOR[a]}),"aria-selected":V.degree===Ee.DEGREES_MINOR[a]},(0,o.v_)(Ve),11,Ke))),128))],2)],2)}var q=t(351277),K=t(505522);const pe=new Map([[-1,"flat"],[0,"natural"],[1,"sharp"]]),Te=["i","ii","iii","iv","v","vi","vii","N"],ge=Te.map(B=>B.toUpperCase()),Q=[-1,0,1],Re=Array.from(Object.values(x.A)),Fe={name:"RootInput",components:{FRadio:A.A},emits:["setAlter","setDegree","setMode"],props:{mode:{type:String,required:!0},degree:{type:String,required:!0},alter:{type:Number,required:!0},isRelative:Boolean},data(){return{DEGREES_MINOR:Te,ALTERS:Q,MODES:Re,localMode:null}},watch:{mode(){this.localMode=this.mode}},computed:{degrees(){let B=this.mode===x.A.MINOR?Te:ge;return this.isRelative&&(B=B.slice(0,B.length-1)),B},isNeapolitan(){return this.degree==="N"}},methods:{getAlterIcon(B){const W=`raw-${pe.get(B)}`;return K.default[W]},setAlter(B){this.$emit("setAlter",B)},setDegree(B){const W=Te[B];this.$emit("setDegree",W)},setMode(){this.$emit("setMode",this.localMode)},getAlterLabel(B){const W=q.default.alterToAccidental(B);return this.$t(`editor:${W}.title`)}},created(){this.localMode=this.mode}};var xe=t(471548),Qe=t.n(xe);const ze={};ze.$style=Qe();const ft=(0,b.A)(Fe,[["render",at],["__cssModules",ze]]);var Oe=t(478044),ut=t(280053);const Tt="7",ht=[{patterns:["h","1","2","/","\xF8"],quality:T.Ay.HALF_DIMINISHED},{patterns:["minMaj","mmaj","mm","minm"],quality:T.Ay.MINOR_MAJOR},{patterns:["maj"],require7:!0,quality:T.Ay.MAJOR_7},{patterns:["a","aug","+"],require7:!0,quality:T.Ay.AUGMENTED_7},{patterns:["d","dim","o"],require7:!0,quality:T.Ay.DIMINISHED_7},{patternsSensitive:["M"],require7:!0,quality:T.Ay.MAJOR_7},{patterns:["^"],quality:T.Ay.MAJOR_7},{patterns:["min","-"],require7:!0,quality:T.Ay.MINOR_7},{patternsSensitive:["m"],require7:!0,quality:T.Ay.MINOR_7},{patternsStrict:["7"],quality:T.Ay.DOMINANT},{patterns:["maj"],quality:T.Ay.MAJOR},{patternsSensitive:["M"],quality:T.Ay.MAJOR},{patternsStrict:[""],quality:T.Ay.MAJOR},{patterns:["a","aug","+"],quality:T.Ay.AUGMENTED},{patterns:["d","dim","o"],quality:T.Ay.DIMINISHED},{patterns:["min","-"],quality:T.Ay.MINOR},{patternsSensitive:["m"],quality:T.Ay.MINOR}];function vt(B,W,V){if(B.require7&&!W.includes(Tt))return!1;if(B.patternsStrict){if(!B.patternsStrict.some(Ie=>Ie===W))return!1}else if(B.patternsSensitive){if(!B.patternsSensitive.some(Ie=>W.includes(Ie)))return!1}else if(B.patterns&&!B.patterns.some(Ie=>V.includes(Ie)))return!1;return!0}function Rt(B){B=B.trim();const W=B.toLowerCase(),V=ht.find(Ie=>vt(Ie,B,W));return V?V.quality:null}const It=new Map([[T.Ay.MAJOR.key,"Maj"],[T.Ay.AUGMENTED.key,"Aug"],[T.Ay.MINOR.key,"min"],[T.Ay.DIMINISHED.key,"dim"],[T.Ay.DOMINANT.key,"7"],[T.Ay.MAJOR_7.key,"Maj7"],[T.Ay.AUGMENTED_7.key,"Aug7"],[T.Ay.MINOR_MAJOR.key,"minMaj7"],[T.Ay.MINOR_7.key,"min7"],[T.Ay.DIMINISHED_7.key,"dim7"],[T.Ay.HALF_DIMINISHED.key,"halfdim7"]]);function Lt(B){return It.get(B.key)}var Ct=t(58434),G=Object.defineProperty,J=Object.getOwnPropertySymbols,Me=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,rt=(B,W,V)=>W in B?G(B,W,{enumerable:!0,configurable:!0,writable:!0,value:V}):B[W]=V,He=(B,W)=>{for(var V in W||(W={}))Me.call(W,V)&&rt(B,V,W[V]);if(J)for(var V of J(W))Xe.call(W,V)&&rt(B,V,W[V]);return B};function lt(B,W){const V=B.secondaryFunction.toLowerCase(),Ie=B.secondaryAlter;W.relativeRoot={degree:V,alter:Ie};const Ee=(0,T.wE)(B.secondaryKind);W.relativeMode=Ee.mode}const At={name:"DdnInnerRomanNumeral",components:{Tab:L.o,TabItem:L.V,CloseIcon:N.A,InfoIcon:k.A,arrowLeft:O.A,arrowRight:X.A,RootInput:ft,QualityInput:Ze,InversionInput:se,ChordPreview:y.A},emits:["close"],props:{scoreData:{type:Object,required:!0},interaction:{type:Object,required:!0}},setup(){const B=(0,S.q6)(),W=(0,_.W)();return{displayMobileEditor:(0,e.EW)(()=>B.displayMobileEditor),selectedType:(0,e.EW)(()=>W.selectedType),noteInfo:(0,e.EW)(()=>W.noteInfo)}},data(){return{Step:Oe.A,currentStep:Oe.A.ROOT,formerRomanNumeral:null,position:null,textPreview:"",textPlaceholder:"",relativeRoot:null,relativeMode:x.A.MAJOR,root:{degree:"i",alter:0},quality:T.Ay.MAJOR,inversion:0,selectedElem:null}},computed:{availableSteps(){return this.hasRelativeRoot?Oe.U:Oe.U.slice(0,-1)},hasRelativeRoot(){return this.relativeRoot!==null},stepIdx(){return Oe.U.indexOf(this.currentStep)},canGoBack(){return this.stepIdx>0},canGoNext(){return this.stepIdx<Oe.U.length-1},backText(){return`editor:romanNumerals.step.${Oe.U[this.stepIdx-1]}`},nextText(){return`editor:romanNumerals.step.${Oe.U[this.stepIdx+1]}`},hasFormer(){return this.formerRomanNumeral!==null},saveText(){return this.hasFormer?"flat:update":"flat:add"},rootMode(){return this.quality.mode},size(){return this.quality.size},isChordDifferent(){return!this.hasFormer||this.root.degree!==this.formerRomanNumeral.root.degree||this.root.alter!==this.formerRomanNumeral.root.alter||this.inversion!==this.formerRomanNumeral.inversion||this.quality.key!==this.formerRomanNumeral.quality.key||this.relativeRoot===null!=(this.formerRomanNumeral.relativeRoot===null)||this.relativeRoot!==null&&(this.relativeRoot.alter!==this.formerRomanNumeral.relativeRoot.alter||this.relativeRoot.degree!==this.formerRomanNumeral.relativeRoot.degree||this.relativeMode!==this.formerRomanNumeral.relativeMode)},relativeQuality(){if(this.relativeMode===x.A.MAJOR)return T.Ay.MAJOR;if(this.relativeMode===x.A.MINOR)return T.Ay.MINOR;throw new Error(`Invalid mode: ${this.relativeMode}`)},useNewDisplay(){return(0,v.A)()}},methods:{next(){this.canGoNext&&this.setStep(Oe.U[this.stepIdx+1])},back(){this.canGoBack&&this.setStep(Oe.U[this.stepIdx-1])},removeRelativeRoot(){this.currentStep===Oe.A.RELATIVE_ROOT&&this.setStep(Oe.A.ROOT),this.relativeRoot=null},editRelativeRoot(){this.setStep(Oe.A.RELATIVE_ROOT)},initRelativeRoot(){this.relativeRoot={degree:"v",alter:0}},setStep(B){B===Oe.A.RELATIVE_ROOT&&this.relativeRoot===null&&this.initRelativeRoot(),this.currentStep=B,this.updateTextPlaceholder(),this.displayMobileEditor||this.$refs.textInput.focus()},setRootDegree(B){this.root.degree=B,B==="N"&&(this.root.alter=0),this.updateTextPreview()},setRootAlter(B){this.root.alter=B,this.updateTextPreview()},setRootMode(B){B!==this.rootMode&&(this.quality=(0,T.rv)(this.quality),this.updateTextPreview())},setRootModeNoPreview(B){B!==this.rootMode&&(this.quality=(0,T.rv)(this.quality))},setQuality(B){this.quality=B,this.updateTextPreview()},setSize(B){B!==this.size&&(this.quality=(0,T.ve)(this.quality),this.updateTextPreview())},setInversion(B){this.inversion=B,this.updateTextPreview()},setRelativeRootMode(B){this.relativeMode=B,this.updateTextPreview()},setRelativeRootAlter(B){this.relativeRoot.alter=B,this.updateTextPreview()},setRelativeRootDegree(B){this.relativeRoot.degree=B,this.updateTextPreview()},addChord(){if(this.isChordDifferent){const B=He({},this.position);let W=this.root.degree;const V=this.root.alter;let Ie=this.quality.adagio;W==="N"&&(W="II",Ie=m.A.NEAPOLITAN);const Ee=this.inversion;let De="",ot=0,je="";const Ve=0;this.relativeRoot&&(De=this.relativeRoot.degree,ot=this.relativeRoot.alter,je=this.relativeQuality.adagio);const a={position:B,chordFunction:W,alter:V,kind:Ie,inversion:Ee,secondaryFunction:De,secondaryAlter:ot,secondaryKind:je,secondaryInversion:Ve,noCursorRefresh:this.useNewDisplay};this.scoreData.scoreActions.executePublicAction("addClassicHarmony",a)}this.goRight()},removeChord(){if(this.hasFormer){const B={position:He({},this.position),noCursorRefresh:this.useNewDisplay};this.scoreData.scoreActions.executePublicAction("removeClassicHarmony",B)}this.goLeft()},close(){this.$emit("close")},updateTextPreview(){this.displayMobileEditor||(this.textPreview=this.computeTextPreview())},updateTextPlaceholder(){this.textPlaceholder=this.computeTextPreview(),this.textPreview=""},computeTextPreview(){return this.currentStep===Oe.A.ROOT?Ct.d({root:this.root,mode:this.rootMode}):this.currentStep===Oe.A.QUALITY?Lt(this.quality):this.currentStep===Oe.A.INVERSION?ut.d({inversion:this.inversion,size:this.size}):this.currentStep===Oe.A.RELATIVE_ROOT?Ct.d({root:this.relativeRoot,mode:this.relativeMode}):""},onTextInput(){if(!this.textPreview.includes(" ")){if(this.currentStep===Oe.A.ROOT){const B=Ct.$(this.textPreview);B!==null&&(this.root=B.root,this.setRootModeNoPreview(B.mode))}else if(this.currentStep===Oe.A.QUALITY){const B=Rt(this.textPreview);B!==null&&(this.quality=B)}else if(this.currentStep===Oe.A.INVERSION){const B=ut.$(this.textPreview,this.size);B!==null&&(this.inversion=B)}else if(this.currentStep===Oe.A.RELATIVE_ROOT){const B=Ct.$(this.textPreview);B!==null&&(this.relativeRoot=B.root,this.relativeMode=B.mode)}this.textPlaceholder=""}},retrieveFormerChord(){var B;let W=null;if(this.selectedType==="classicChord"&&this.interaction.cursor.selectedElem)this.selectedElem=this.interaction.cursor.selectedElem,this.selectedElem.highLight(),W=He({},this.interaction.cursor.selectedElem.data),delete W.noteIdx,this.position=W;else if(((B=this.interaction.cursor.selectedEntity)==null?void 0:B.entityType)===u.A.ROMAN_NUMERAL){const V=this.interaction.cursor.selectedEntity;this.position={partUuid:V.partUuid,measureUuid:V.measureUuid,timePos:V.timePos,dpq:V.dpq},V.data&&(W={alter:V.data.alter,chordFunction:V.data.chordFunction,inversion:V.data.inversion,kind:V.data.kind},V.data.secondary&&(W.secondaryFunction=V.data.secondary.chordFunction,W.secondaryAlter=V.data.secondary.alter,W.secondaryKind=V.data.secondary.kind,W.secondaryInversion=V.data.secondary.inversion))}else{const V=this.interaction.cursor;this.position=V.getFullPosition(),this.noteInfo.classicHarmony&&(W=this.noteInfo.classicHarmony)}if(W){let V=W.chordFunction.toLowerCase(),Ie=W.alter,Ee=(0,T.wE)(W.kind);const De=W.inversion;W.kind===m.A.NEAPOLITAN&&(V="N",Ie=0,Ee=T.Ay.MAJOR);const ot={root:{degree:V,alter:Ie},quality:Ee,inversion:De,relativeRoot:null,relativeMode:x.A.MAJOR};W.secondaryFunction&&lt(W,ot),this.formerRomanNumeral=ot,Object.assign(this,structuredClone(ot)),this.updateTextPreview()}},tryDelete(B){this.textPreview.trim()===""&&(this.currentStep===Oe.A.ROOT?(this.removeChord(),B.preventDefault()):this.currentStep===Oe.A.RELATIVE_ROOT&&(this.removeRelativeRoot(),B.preventDefault()))},onKeyDown(B){B.code==="Slash"?this.trySlash(B):B.code==="ArrowUp"?(B.preventDefault(),this.goUp()):B.code==="ArrowDown"?(B.preventDefault(),this.goDown()):(B.ctrlKey||B.metaKey)&&(B.code==="ArrowLeft"?(B.preventDefault(),this.goLeft()):B.code==="ArrowRight"?(B.preventDefault(),this.goRight()):B.code==="Backspace"&&this.tryDelete(B))},goLeft(){this.useNewDisplay?this.scoreData.scoreActions.executePublicAction("goLeftText"):this.scoreData.scoreActions.executePublicAction("goLeft")},goRight(){this.useNewDisplay?this.scoreData.scoreActions.executePublicAction("goRightText"):this.scoreData.scoreActions.executePublicAction("goRight")},goUp(){this.useNewDisplay||this.scoreData.scoreActions.executePublicAction("goPreviousStaff")},goDown(){this.useNewDisplay||this.scoreData.scoreActions.executePublicAction("goNextStaff")},trySlash(B){(this.currentStep===Oe.A.ROOT||this.currentStep===Oe.A.INVERSION)&&(B.preventDefault(),this.setStep(Oe.A.RELATIVE_ROOT))}},watch:{size(){this.size===g.A.TRIAD&&this.inversion===3&&(this.inversion=2)}},mounted(){this.retrieveFormerChord(),this.displayMobileEditor||this.$refs.textInput.focus()},beforeUnmount(){this.selectedElem&&(this.selectedElem.clearElem(),this.selectedElem=null)}};var xt=t(690086),gt=t.n(xt);const F={};F.$style=gt();const Se=(0,b.A)(At,[["render",d],["__cssModules",F]])},278864:(l,n,t)=>{var e=t(117535);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("1216d1ec",e,!0,{})},278965:(l,n,t)=>{var e=t(726218);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("71bdf85c",e,!0,{})},280053:(l,n,t)=>{"use strict";t.d(n,{$:()=>d,d:()=>m});var e=t(344219);const o=[{patterns:["5"],inversion:0},{patterns:null,inversion:0},{patterns:["6","4"],inversion:2},{patterns:["6"],inversion:1}],r=[{patterns:["6","5"],inversion:1},{patterns:["4","3"],inversion:2},{patterns:["2"],inversion:3},{patterns:["7"],inversion:0},{patterns:null,inversion:0}];function i(v,_){return v.patterns===null?_==="":v.patterns.every(S=>_.includes(S))}function s(v){if(v===e.A.SEVENTH)return r;if(v===e.A.TRIAD)return o;throw new Error(`Invalid size: ${v}`)}function d(v,_){v=v.trim();const N=s(_).find(k=>i(k,v));return N?N.inversion:null}const u=new Map([[`${e.A.TRIAD}0`,""],[`${e.A.TRIAD}1`,"6"],[`${e.A.TRIAD}2`,"64"],[`${e.A.SEVENTH}0`,"7"],[`${e.A.SEVENTH}1`,"65"],[`${e.A.SEVENTH}2`,"43"],[`${e.A.SEVENTH}3`,"42"]]);function m({inversion:v,size:_}){const S=`${_}${v}`;return u.get(S)}},281313:(l,n,t)=>{"use strict";t.d(n,{AM:()=>e.A,DI:()=>o.A,fv:()=>r.A});var e=t(855626),o=t(194953),r=t(502223)},283089:(l,n,t)=>{var e=t(635244);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("7d84ebd6",e,!0,{})},286751:(l,n,t)=>{var e={"./ts0.svg":743314,"./ts1.svg":214343,"./ts2.svg":266456,"./ts3.svg":182781,"./ts4.svg":258518,"./ts5.svg":131051,"./ts6.svg":765996,"./ts7.svg":122177,"./ts8.svg":409114,"./ts9.svg":47023,"./tsCommon.svg":868431,"./tsCut.svg":902518};function o(i){var s=r(i);return t(s)}function r(i){if(!t.o(e,i)){var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}return e[i]}o.keys=function(){return Object.keys(e)},o.resolve=r,l.exports=o,o.id=286751},293402:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_XZ_lP{display:block;border-radius:8px;color:#fff;border:1px solid var(--f-ink-10)}.root_XZ_lP *{fill:var(--f-ink)}.root_XZ_lP .slash{fill:var(--f-subdue)}.root_XZ_lP.stepRoot_a_dsT .chord\\.rootStep,.root_XZ_lP.stepRoot_a_dsT .chord\\.rootAlter{fill:var(--f-primary)}.root_XZ_lP.stepQuality_PrVuk .chord\\.diminished,.root_XZ_lP.stepQuality_PrVuk .chord\\.augmented,.root_XZ_lP.stepQuality_PrVuk .chord\\.sus4,.root_XZ_lP.stepQuality_PrVuk .chord\\.chordKind,.root_XZ_lP.stepQuality_PrVuk .chord\\.major,.root_XZ_lP.stepQuality_PrVuk .chordKind,.root_XZ_lP.stepQuality_PrVuk .chord\\.minor{fill:var(--f-primary)}.root_XZ_lP.stepDegreeMod_QgqSK .chordDegree,.root_XZ_lP.stepDegreeMod_QgqSK .chord\\.chordDegree{fill:var(--f-primary)}.root_XZ_lP.stepInversion_HE_o2 .chord\\.rootStep:last-child:not(:first-child){fill:var(--f-primary)}*[data-color-mode=dark] .root_XZ_lP{border-color:var(--f-ink)}*[data-color-mode=dark] .root_XZ_lP *{fill:#fff}
`,""]),s.locals={root:"root_XZ_lP",stepRoot:"stepRoot_a_dsT",stepQuality:"stepQuality_PrVuk",stepDegreeMod:"stepDegreeMod_QgqSK",stepInversion:"stepInversion_HE_o2"};const d=s},298555:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=42,s=(0,o.pM)({name:"TbArticulation",props:{name:{type:String,required:!0},articulation:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>{var v;return(v=u.noteInfo.articulations)==null?void 0:v.includes(d.articulation)});return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:m.value})}})},299035:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>le});var e=t(361744),o=t(538065),r=Object.defineProperty,i=Object.defineProperties,s=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(A,de,Ae)=>de in A?r(A,de,{enumerable:!0,configurable:!0,writable:!0,value:Ae}):A[de]=Ae,_=(A,de)=>{for(var Ae in de||(de={}))u.call(de,Ae)&&v(A,Ae,de[Ae]);if(d)for(var Ae of d(de))m.call(de,Ae)&&v(A,Ae,de[Ae]);return A},S=(A,de)=>i(A,s(de));const N=["aria-label","data-cy"],k=["data-cy","aria-label"];function O(A,de,Ae,be,ae,ie){const Ne=(0,e.g2)("power-badge-icon"),$e=(0,e.gN)("dompurify-html");return A.displayMobileEditor?((0,e.uX)(),(0,e.CE)("button",{key:1,class:(0,o.C4)(_(S(_(_({active:A.active,disabled:A.disabledTool},A.mobilePowerClass),A.mobileHighlightClass),{[A.tbButtonStyle.rootCommon]:!0}),A.mobileRootClasses)),"data-cy":`tb-${A.action}`,"aria-label":A.tooltipText,onClick:de[1]||(de[1]=Pe=>A.exec())},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[A.tbButtonStyle.i]:!0,[A.tbButtonStyle.bigIcon]:A.isBigIcon})},null,2),[[$e,A.iconSvg,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(A.tbButtonStyle.t)},(0,o.v_)(A.tooltipText),3),A.showPowerOnly?((0,e.uX)(),(0,e.Wv)(Ne,{key:0,class:(0,o.C4)(A.powerStyle.toolbarPowerIcon)},null,8,["class"])):(0,e.Q3)("",!0)],10,k)):((0,e.uX)(),(0,e.CE)("button",{key:0,class:(0,o.C4)({active:A.active,disabled:A.disabledTool,[A.tbButtonStyle.rootCommon]:!0,[A.tbButtonStyle.rootDesktop]:!0}),onClick:de[0]||(de[0]=Pe=>A.exec()),"aria-label":A.tooltipText,"data-cy":`tb-${A.action}`},[(0,e.bo)((0,e.Lk)("div",{class:(0,o.C4)(A.tbButtonStyle.iconFlex)},null,2),[[$e,A.iconSvg,"svg"]]),A.showPowerOnly?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(A.powerStyle.toolbarPowerBox),style:(0,o.Tr)(A.desktopPowerStyle)},[(0,e.bF)(Ne,{class:(0,o.C4)(A.powerStyle.toolbarPowerIcon)},null,8,["class"])],6)):(0,e.Q3)("",!0),A.highlight?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,o.C4)(A.highlightStyle.toolbarHighlightBox),style:(0,o.Tr)(A.desktopPowerStyle)},null,6)):(0,e.Q3)("",!0)],10,N))}var X=t(27219),L=t(135519),y=t(121648),j=t(727137),w=t(909696),g=t(797727),M=t(653154),E=t(763939),I=t(243935),C=t(26292),Z=t(741522),te=t(505522),U=t(896099),b=t(66682);const z=(0,e.pM)({name:"ToolbarSimpleIcon",width:42,props:{action:{type:String,required:!0},active:{type:Boolean,default:!1},actionParams:{type:Object,default:()=>({})},disabled:{type:[String,Boolean],default:!1},scoreData:{type:Object,required:!0},iconKey:{type:String,default:""},powerWidth:{type:Number,default:null},premiumFeatures:{type:Array,default:null},highlight:{type:Boolean,default:!1},buttonStyle:{type:String,default:"detailed"}},components:{PowerBadgeIcon:g.default},setup(){const A=(0,E.F)(),de=(0,L.d)(),Ae=(0,w.q6)(),be=(0,y.W)();return{accountFeatures:(0,e.EW)(()=>A.accountFeatures),mainShortcutByAction:(0,e.EW)(()=>de.mainShortcutByAction),displayMobileEditor:(0,e.EW)(()=>Ae.displayMobileEditor),isEditionBlocked:(0,e.EW)(()=>be.isEditionBlocked)}},computed:{iconSvg(){return te.default[this.resolvedIconkey]},resolvedIconkey(){const A=this.iconKey||this.action;return te.default[A]?A:this.actionsMeta.icon},actionsMeta(){return X.actions[this.action]||{}},shortcut(){const A=this.mainShortcutByAction[this.action];return A?(0,C.lD)(A.shortcuts):null},tooltipText:b.tooltipText,disabledReason(){return this.isDisabledEditionBlocked?"editionBlocked":typeof this.disabled=="string"?this.disabled:(0,j.x)()[`${this.action}DisabledReason`]},isDisabledEditionBlocked(){return this.isEditionBlocked?!this.actionsMeta.groups.includes("ro"):!1},disabledTool(){return this.disabled||!!this.disabledReason},localPremiumFeatures(){return this.premiumFeatures?this.premiumFeatures:this.actionsMeta.premiumFeature?[this.actionsMeta.premiumFeature]:[]},showPowerOnly(){return this.localPremiumFeatures.some(A=>!this.accountFeatures[A])},desktopPowerStyle:Z.X,mobilePowerClass:Z.m,mobileHighlightClass(){return this.highlight?{[this.highlightStyle.toolbarMobileHighlightBox]:!0,"show-highlight":!0}:{}},isBigIcon(){return(0,U.default)(this.resolvedIconkey)},mobileRootClasses(){return this.buttonStyle==="detailed"?{[this.tbButtonStyle.rootMobileDetailed]:!0}:this.buttonStyle==="simple"?{[this.tbButtonStyle.rootMobileSimple]:!0}:this.buttonStyle==="nativeSimple"?{[this.tbButtonStyle.rootNativeSimple]:!0}:((0,M.vV)(new Error(`Invalid toolbar button style: ${this.buttonStyle}`)),{})}},watch:{tooltipText(){this.setupTooltip()}},methods:{exec(){this.disabledTool||this.scoreData.scoreActions.executePublicAction(this.action,this.actionParams,{muteUnavailableAction:!0})},setupTooltip(){document.body.classList.contains("touch")||(this.$tooltip&&this.$tooltip.destroy(),this.tooltipText?this.$tooltip=new I.vF(this.$el,{touch:!1,placement:"bottom",content:this.tooltipText,arrow:I.qO,duration:[0,0]}):(0,M.vV)(new Error(`Tooltip text not found for action ${this.action}`)))}},mounted(){this.setupTooltip()},beforeUnmount(){this.$tooltip&&(this.$tooltip.destroy(),this.$tooltip=null)}});var ce=t(247477),se=t(652588),x=t(245916),T=t(938793);const ne={};ne.powerStyle=ce.default,ne.highlightStyle=se.default,ne.tbButtonStyle=x.default;const le=(0,T.A)(z,[["render",O],["__cssModules",ne]])},300208:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(243564);const i=57,s=(0,o.pM)({name:"TbJumpTag",props:{scoreData:{type:Object,required:!0}},setup(d){const u=[{action:"toggleSegno",value:"segno",icon:"segno"},{action:"toggleCoda",value:"coda",icon:"coda"}],m=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,items:u,active:[m.measureInfo.jumpTag],defaultActionIcon:"segno"})}})},302225:(l,n,t)=>{"use strict";t.d(n,{A:()=>i});var e=t(550594),o=(s,d,u)=>new Promise((m,v)=>{var _=k=>{try{N(u.next(k))}catch(O){v(O)}},S=k=>{try{N(u.throw(k))}catch(O){v(O)}},N=k=>k.done?m(k.value):Promise.resolve(k.value).then(_,S);N((u=u.apply(s,d)).next())});const i={fetchScoreLayout(s){return e.A.get(`${e.A.apiv2baseurl}/me/editor/scoreLayouts/${s}`)},fetchScoreLayouts(){return e.A.get(`${e.A.apiv2baseurl}/me/editor/scoreLayouts`)},updateScoreLayout(s){let d=s.id;return d||(d=s.key),e.A.put(`${e.A.apiv2baseurl}/me/editor/scoreLayouts/${d}`,s)},removeScoreLayout(s){return o(this,null,function*(){yield e.A.delete(`${e.A.apiv2baseurl}/me/editor/scoreLayouts/${s}`)})}}},303511:(l,n,t)=>{"use strict";t.d(n,{default:()=>o.a});var e=t(315358),o=t.n(e)},305408:(l,n,t)=>{var e=t(586705);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("3dc1dcd6",e,!0,{})},308439:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>w});var e=t(361744),o=t(538065),r=t(555381);const i={class:"tb-export"},s=["aria-label"],d=["aria-label"];function u(g,M,E,I,C,Z){const te=(0,e.g2)("export-widget"),U=(0,e.gN)("dompurify-html"),b=(0,e.gN)("dropdown");return(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",i,[I.displayMobileEditor?((0,e.uX)(),(0,e.CE)("button",{key:1,class:(0,o.C4)(["ddn-trigger",{[g.tbButtonStyle.rootCommon]:!0,[g.tbButtonStyle.rootMobileDetailed]:!0}]),"aria-label":E.mode},[(0,e.Lk)("div",{class:(0,o.C4)(g.tbButtonStyle.iconFlex)},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[g.tbButtonStyle.i]:!0})},null,2),[[U,Z.iconSvg,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(g.tbButtonStyle.t)},(0,o.v_)(Z.mobileText),3)],2)],10,d)):((0,e.uX)(),(0,e.CE)("button",{key:0,class:(0,o.C4)(["ddn-trigger",{[g.tbButtonStyle.rootCommon]:!0,[g.tbButtonStyle.rootDesktop]:!0}]),"aria-label":E.mode},[(0,e.bo)((0,e.Lk)("div",{class:(0,o.C4)(g.tbButtonStyle.iconFlex)},null,2),[[U,Z.iconSvg,"svg"]])],10,s)),(0,e.Lk)("div",{class:"ddn-content",onClick:M[2]||(M[2]=(0,r.D$)(()=>{},["stop"]))},[M[3]||(M[3]=(0,e.Lk)("div",{"x-arrow":""},null,-1)),C.open?((0,e.uX)(),(0,e.Wv)(te,{key:0,mode:E.mode,"display-print-in-export":!1,"option-concert-pitch":I.isConcertPitch,"score-data":E.scoreData,"export-manager":Z.exportManager,onResized:M[0]||(M[0]=z=>Z.updateDdn()),onClose:M[1]||(M[1]=z=>Z.closeDdn())},null,8,["mode","option-concert-pitch","score-data","export-manager"])):(0,e.Q3)("",!0)])])),[[b,{positionFixed:!0,onOpen:Z.onOpen,onClose:Z.onClose}]])}var m=t(58163),v=t(121648),_=t(909696),S=t(860031),N=t(505522),k=t(66682);const O={name:"ToolbarExport",components:{ExportWidget:S.A},props:{scoreData:{type:Object,required:!0},mode:{type:String,default:"export"}},data(){return{open:!1}},setup(){const g=(0,_.q6)(),M=(0,v.W)(),E=(0,m.V)();return{displayMobileEditor:(0,e.EW)(()=>g.displayMobileEditor),isConcertPitch:(0,e.EW)(()=>M.isConcertPitch),isDialogDisplayed:(0,e.EW)(()=>E.isDialogDisplayed)}},computed:{iconSvg(){return N.default[this.mode]},mobileText(){return this.$t(`editor:${this.mode}.title`)},exportManager(){return this.scoreData.scoreActions.dependencies.exportManager}},methods:{onOpen(){this.open=!0,(0,k.destroyTooltip)(this)},onClose(){this.open=!1,(0,k.setupTooltip)(this)},closeDdn(){this.$el.classList.remove("open"),this.open=!1,(0,k.setupTooltip)(this)},updateDdn(){(0,e.dY)(()=>{this.$el.$popper&&this.$el.$popper.scheduleUpdate()})}},mounted(){(0,k.setupTooltip)(this)}};var X=t(235398),L=t(938793);const y={};y.tbButtonStyle=X.default;const w=(0,L.A)(O,[["render",u],["__cssModules",y]])},309033:(l,n,t)=>{"use strict";t.d(n,{mk:()=>i});var e=t(59400),o=t.n(e);const r=new(o());function i({action:m,type:v,object:_}){r.emit(`${m}.${v}`,_)}function s({action:m,type:v,callback:_}){r.on(`${m}.${v}`,_)}function d({action:m,type:v,callback:_}){r.off(`${m}.${v}`,_)}var u=null},312762:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(243564);const i=61,s=(0,o.pM)({name:"TbPreBend",props:{scoreData:{type:Object,required:!0}},setup(d){const u=[{value:"1",action:"togglePreBend1"},{value:"2",action:"togglePreBend2"}],m=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,css:"tb-pre-bend",items:u,active:[m.tbPreBends],defaultActionIcon:"togglePreBend"})}})},313162:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>O});var e=t(361744),o=t(538065);function r(X,L,y,j,w,g){const M=(0,e.g2)("ddn-inner-metronome"),E=(0,e.g2)("ToolbarComplexDdn");return(0,e.uX)(),(0,e.Wv)(E,{ref:"ddn",class:(0,o.C4)(["tb-tempo",X.ddnStyle.root]),"icon-key":"tempo","mobile-text":g.mobileText,action:"setTempo","ddn-opts":{positionFixed:!0},"ddn-classes":g.classesListToObject(["ddn-content","bottom",...this.contentClasses]),"tablet-ddn":!0},{default:(0,e.k6)(()=>[(0,e.bF)(M,{"score-data":y.scoreData,onClose:L[0]||(L[0]=I=>g.onClose())},null,8,["score-data"])]),_:1},8,["class","mobile-text","ddn-classes"])}var i=t(909696),s=t(674548),d=t(361e3),u=t(13626),m=t(361826);const v={name:"TempoPicker",width:66,props:{scoreData:{type:Object,required:!0}},components:{DdnInnerMetronome:d.A,ToolbarComplexDdn:u.default},setup(){const X=(0,i.q6)();return{displayMobileEditor:(0,e.EW)(()=>X.displayMobileEditor)}},computed:{mobileText(){return s.MR.t("editor:tempo.title")},contentClasses(){return this.displayMobileEditor?[this.ddnStyle.contentCommon,this.ddnStyle.contentMobile]:[this.ddnStyle.contentCommon]}},methods:{onClose(){this.$refs.ddn.onClose()},classesListToObject:m.default}};var _=t(655523),S=t(938793);const N={};N.ddnStyle=_.default;const O=(0,S.A)(v,[["render",r],["__cssModules",N]])},314445:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_G1Izx{display:flex;align-items:center;flex-direction:column;gap:8px}.buttons_a7QDH{display:flex;gap:8px}.buttonContainer_VwyX9{width:48px;height:32px}.entry_gVZ8Z{width:48px;height:32px;display:flex;justify-content:center;align-items:center;border:1px solid var(--f-subdue-40);border-radius:8px;background-color:#fff;color:var(--f-subdue);font-size:14px;font-weight:400}.entry_gVZ8Z .fill{fill:var(--f-subdue)}.entry_gVZ8Z>svg{display:block;height:16px}.entry_gVZ8Z.active_FIWBr{border-color:var(--f-primary);color:var(--f-primary);background-color:var(--f-primary-10);font-weight:600}.entry_gVZ8Z.active_FIWBr .fill{fill:var(--f-primary)}.entry_gVZ8Z.disabled_dObEm{border-color:var(--f-grey-disabled-content);color:var(--f-grey-disabled-content);background-color:var(--f-grey-disabled-container)}.entry_gVZ8Z.disabled_dObEm .fill{fill:var(--f-grey-disabled-content)}.sizes_wET7w{display:flex;gap:16px;font-weight:var(600)}*[data-color-mode=dark] .entry_gVZ8Z{background-color:transparent}*[data-color-mode=dark] .entry_gVZ8Z.active_FIWBr{background-color:var(--f-subdue-darker)}*[data-color-mode=dark] .sizes_wET7w{color:#fff}
`,""]),s.locals={root:"root_G1Izx",buttons:"buttons_a7QDH",buttonContainer:"buttonContainer_VwyX9",entry:"entry_gVZ8Z",active:"active_FIWBr",disabled:"disabled_dObEm",sizes:"sizes_wET7w"};const d=s},315158:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(96942);const i=42,s=(0,o.pM)({name:"TbFingerings",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,badge:u.tbFingerings})}})},315358:(l,n,t)=>{var e=t(347751);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("0cb8c4f4",e,!0,{})},318187:(l,n,t)=>{"use strict";t.d(n,{R:()=>i});var e=t(6645),o=t(744056),r=t(361744);const i=(0,e.nY)("scoreMIDI",()=>{const s=(0,o.KR)(!1),d=(0,o.KR)(!1),u=(0,o.KR)(!1),m=(0,o.KR)(!1),v=(0,o.Kh)({input:[],output:[]}),_=(0,o.Kh)({id:null,name:""}),S=(0,o.Kh)({id:null,name:""}),N=(0,r.EW)(()=>v.input.length>0||v.output.length>0);function k({id:te,name:U}){_.id=te,_.name=U}function O({id:te,name:U}){S.id=te,S.name=U}function X(te){te.id!==null&&S.name===te.name&&O({id:null,name:""}),k(te)}function L(te){te.id!==null&&_.name===te.name&&k({id:null,name:""}),O(te)}function y(te){v.input=te}function j(te){v.output=te}function w(){s.value=!0,m.value=!0}function g(){s.value=!1}function M(){m.value=!1}function E(){u.value=!0}function I(){u.value=!1}function C(){d.value=!0}function Z(){d.value=!1}return{recording:s,devices:v,activeCalibration:u,selectedInputDevice:_,selectedOutputDevice:S,hasDevices:N,counting:m,selectInputDevice:X,selectOutputDevice:L,updateInputList:y,updateOutputList:j,startRecording:w,stopRecording:g,finishCounting:M,openCalibration:E,closeCalibration:I,startCalibration:C,stopCalibration:Z}})},319986:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>_});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=t(793727),d=t.n(s),u=new URL(t(946402),t.b),m=i()(o()),v=d()(u);m.push([l.id,`.input_xorFi{background-color:var(--f-white);border:1px solid var(--border-neutral-tertiary);border-radius:var(--radius-standard);font-family:inherit;width:100%;font-size:14px;line-height:20px;color:var(--f-ink)}.input_xorFi:focus,.input_xorFi:active{border-color:var(--f-primary)}.input_xorFi::placeholder{color:var(--f-subdue)}.input-x-small_Lt_cM{padding:1px 8px}.input-small__eUv3{padding:6px 8px}.input-medium_Hy1dM{padding:9px 8px}.input-large_kCVMR{padding:13px 8px}.input_xorFi[aria-disabled=true]{background-color:var(--f-bg-1);color:var(--f-grey-disabled-content)}.input_xorFi[aria-invalid=true]{border-color:var(--f-safe-red)}.dropdown_iYqaH{position:relative;width:100%;z-index:10}.ddnTrigger_QckYB{width:100%;padding-right:35px;background:var(--f-bg-0) url(${v}) no-repeat;background-position:right 8px top 50%,0 0;color:var(--f-subdue)}.ddnTrigger_QckYB[disabled=true]{pointer-events:none;opacity:.5}.ddnContent_ntQuN{position:absolute;top:35px;left:0;right:0;border-radius:4px;border:1px solid var(--f-ink-10);background:var(--f-white);box-shadow:0 12px 42px -4px #2f34461f,0 8px 18px -6px #2f34461f}.ddnItem_VDau7{display:flex;height:24px;padding:2px 12px;align-items:center;gap:8px;align-self:stretch;color:var(--f-subdue);font-size:14px;line-height:20px}.ddnItem_VDau7:hover,.ddnItem_VDau7:active{background:var(--f-subdue-10)}
`,""]),m.locals={input:"input_xorFi","input-x-small":"input-x-small_Lt_cM","input-small":"input-small__eUv3","input-medium":"input-medium_Hy1dM","input-large":"input-large_kCVMR",dropdown:"dropdown_iYqaH",ddnTrigger:"ddnTrigger_QckYB",ddnContent:"ddnContent_ntQuN",ddnItem:"ddnItem_VDau7"};const _=m},322160:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(127495);const i=50,s=(0,o.pM)({name:"TbChangeKeepExistingRestDuration",props:{scoreData:{type:Object,required:!0}},setup(d){const u=[{action:"setKeepExistingRestDurationTrue",value:"true",noDesc:!0},{action:"setKeepExistingRestDurationFalse",value:"false",noDesc:!0}],m=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,items:u,active:[m.keepExistingRestDuration.toString()]})}})},327988:(l,n,t)=>{var e=t(174097);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("4349ac40",e,!0,{})},328889:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.ddnTransposeInner_RJpK7{max-width:100vw}.ddnTransposeInner_RJpK7.isDesktop_wQYrz{width:405px}.ddnTransposeInner_RJpK7 .tabs_CT06h{margin-top:16px;margin-left:16px;margin-right:16px;border-bottom:1px solid var(--f-subdue-40);--f-tab-active-color: var(--f-primary)}.ddnTransposeInner_RJpK7 .warnTranspoPart_h7ssh{color:var(--f-subdue);font-weight:400;font-size:14px;letter-spacing:.3px;line-height:20px;white-space:normal;margin-bottom:15px}.ddnTransposeInner_RJpK7 .tModes_UwDR6{display:flex;align-items:center}.ddnTransposeInner_RJpK7 .tModeTab_AffsQ{flex:1 1 135px;margin:0;padding:10px 20px;background:transparent;color:var(--f-subdue);white-space:nowrap;border-top:none;border-right:none;border-left:none;border-bottom:1px solid var(--f-divider);border-right:1px solid var(--f-divider)}.ddnTransposeInner_RJpK7 .tModeTab_AffsQ:first-child{border-top-left-radius:6px}.ddnTransposeInner_RJpK7 .tModeTab_AffsQ:last-child{border-right:0;border-top-right-radius:6px}.ddnTransposeInner_RJpK7 .tModeTab_AffsQ.active_FHrDW{box-shadow:0 3px 8px #0000000f;color:var(--f-primary)}.ddnTransposeInner_RJpK7 .tMode_qYJrc{padding:8px 16px 16px;max-height:calc(100vh - 200px);overflow:auto}.ddnTransposeInner_RJpK7 label.take40_Z6pgv{flex:0 0 40%;margin-bottom:0}.ddnTransposeInner_RJpK7 .tRow_bJPvX{display:flex;align-items:center;height:34px;margin-bottom:10px}.ddnTransposeInner_RJpK7 .tRow_bJPvX .options_Ag0Wr{display:flex;align-items:center;gap:15px}.ddnTransposeInner_RJpK7 .tRow_bJPvX.octave_SkaS_ input,.ddnTransposeInner_RJpK7 .tRow_bJPvX.semitones_vWg2F input{width:70px}.ddnTransposeInner_RJpK7 .wrap-switch-contain{height:auto}.ddnTransposeInner_RJpK7 .wrap-switch-contain .label-ext-small{margin-bottom:0;padding-left:8px}.ddnTransposeInner_RJpK7 .tRowMode_MRfux{margin-bottom:15px;align-items:center;flex-wrap:wrap}.ddnTransposeInner_RJpK7 .tRowMode_MRfux .label-ext-small{display:block}.ddnTransposeInner_RJpK7 .tRowModePitch_YB4vl{display:flex;align-items:center;flex-wrap:wrap;gap:10px}.ddnTransposeInner_RJpK7 .tRowModeStepAlter__OzXS{display:flex;align-items:center;gap:10px}.ddnTransposeInner_RJpK7 .stepInput_HoeN7{width:50px;padding:6px 4px}.ddnTransposeInner_RJpK7 .alterInput_LPHn4{width:100px}.ddnTransposeInner_RJpK7 .tModeOctave_dQ4sp{flex:0 0 auto;display:flex;align-items:center;gap:8px}.ddnTransposeInner_RJpK7 .tModeOctave_dQ4sp input{width:70px}.ddnTransposeInner_RJpK7 .tModeOctave_dQ4sp .label-ext-small{margin-bottom:0;white-space:nowrap}.ddnTransposeInner_RJpK7 .moreOptionsContainer_ajUzr{display:flex;justify-content:flex-end;margin-bottom:15px}.ddnTransposeInner_RJpK7 .moreOptions_UIidH{border:0;background:transparent;padding:0;color:var(--f-subdue);font-size:13px;letter-spacing:.5px;font-weight:500;font-style:italic}.ddnTransposeInner_RJpK7 .tPreview_fk6v_{border:1px solid var(--f-subdue-10);background-color:#fff;border-radius:6px;padding:5px 15px;display:flex;align-items:center;justify-content:center}.ddnTransposeInner_RJpK7 .tWarn_n0rdF{display:block;white-space:normal;font-weight:500;font-size:14px;letter-spacing:.3px;line-height:20px;color:var(--f-safe-red)}.ddnTransposeInner_RJpK7 .cta{display:flex;justify-content:center;margin-top:15px}@media (max-width: 400px){.ddnTransposeInner_RJpK7 .tModeTab_AffsQ{flex:1 1 135px;padding:10px 5px}.ddnTransposeInner_RJpK7 .tRowMode_MRfux .alterInput_LPHn4{width:75px;padding:6px 3px}}*[data-color-mode=dark] .ddnTransposeInner_RJpK7 .tMode_qYJrc *{color:var(--f-subdue-40)}*[data-color-mode=dark] .ddnTransposeInner_RJpK7 .cta *{color:#fff}*[data-color-mode=dark] .ddnTransposeInner_RJpK7 .take40_Z6pgv,*[data-color-mode=dark] .ddnTransposeInner_RJpK7 span.label-ext-small{color:#fff}
`,""]),s.locals={ddnTransposeInner:"ddnTransposeInner_RJpK7",isDesktop:"isDesktop_wQYrz",tabs:"tabs_CT06h",warnTranspoPart:"warnTranspoPart_h7ssh",tModes:"tModes_UwDR6",tModeTab:"tModeTab_AffsQ",active:"active_FHrDW",tMode:"tMode_qYJrc",take40:"take40_Z6pgv",tRow:"tRow_bJPvX",options:"options_Ag0Wr",octave:"octave_SkaS_",semitones:"semitones_vWg2F",tRowMode:"tRowMode_MRfux",tRowModePitch:"tRowModePitch_YB4vl",tRowModeStepAlter:"tRowModeStepAlter__OzXS",stepInput:"stepInput_HoeN7",alterInput:"alterInput_LPHn4",tModeOctave:"tModeOctave_dQ4sp",moreOptionsContainer:"moreOptionsContainer_ajUzr",moreOptions:"moreOptions_UIidH",tPreview:"tPreview_fk6v_",tWarn:"tWarn_n0rdF"};const d=s},330948:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=42,s=(0,o.pM)({name:"TbNoteUnpitchedHead",props:{name:{type:String,required:!0},head:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>u.tbCurrentUnpitchedNoteHead),v=(0,o.EW)(()=>u.tbIsInsertMode),_=(0,o.EW)(()=>u.noteInfo.unpitchedPitch),S=(0,o.EW)(()=>u.upcomingAttributes.unpitchedHead),N=(0,o.EW)(()=>u.currentPart),k=(0,o.EW)(()=>{if(v.value||!_.value||!N.value)return!1;const O=N.value.header.unpitchedMapping;return!O[_.value]||!O[_.value][d.head]?"unpitchedHeadNotAvailableForLine":!1});return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:!v.value&&d.head===m.value||d.head===S.value,disabled:k.value})}})},335014:(l,n,t)=>{var e=t(232327);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("cd316ebe",e,!0,{})},338153:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>y});var e=t(361744),o=t(538065);function r(j,w,g,M,E,I){const C=(0,e.g2)("ddn-inner-repeat-x-times"),Z=(0,e.g2)("ToolbarComplexDdn");return(0,e.uX)(),(0,e.Wv)(Z,{ref:"ddn",class:(0,o.C4)(["tb-rehearsal",j.ddnStyle.root]),"icon-key":"repeatXTimes","mobile-text":I.mobileText,action:"addRepeatXTimes","ddn-opts":I.ddnOpts,"ddn-classes":I.classesListToObject(["ddn-content","bottom",...this.contentClasses]),"power-width":30,active:I.active,"show-power-only":I.showPowerOnly,"tablet-ddn":!0},{default:(0,e.k6)(()=>[(0,e.bF)(C,{"score-data":g.scoreData,onClose:w[0]||(w[0]=te=>I.onClose())},null,8,["score-data"])]),_:1},8,["class","mobile-text","ddn-opts","ddn-classes","active","show-power-only"])}var i=t(121648),s=t(909696),d=t(674548),u=t(763939),m=t(941047),v=t(13626),_=t(361826);const S={name:"RepeatXTimes",width:66,props:{scoreData:{type:Object,required:!0}},components:{DdnInnerRepeatXTimes:m.A,ToolbarComplexDdn:v.default},setup(){const j=(0,u.F)(),w=(0,s.q6)(),g=(0,i.W)();return{accountFeatures:(0,e.EW)(()=>j.accountFeatures),displayMobileEditor:(0,e.EW)(()=>w.displayMobileEditor),tbRepeatXTimes:(0,e.EW)(()=>g.tbRepeatXTimes)}},computed:{active(){return this.tbRepeatXTimes>=2},ddnPlacement(){return this.displayMobileEditor?"top":"bottom"},mobileText(){return d.MR.t("editor:addRepeatXTimes.title")},showPowerOnly(){return!this.accountFeatures.customRepeatBarline},ddnOpts(){return{placement:this.ddnPlacement,positionFixed:!0}},contentClasses(){return this.displayMobileEditor?[this.ddnStyle.contentCommon,this.ddnStyle.contentMobile]:[this.ddnStyle.contentCommon]}},methods:{onClose(){this.$refs.ddn.onClose()},classesListToObject:_.default}};var N=t(247477),k=t(384188),O=t(938793);const X={};X.powerStyle=N.default,X.ddnStyle=k.default;const y=(0,O.A)(S,[["render",r],["__cssModules",X]])},338770:(l,n,t)=>{"use strict";l.exports=t.p+"img/30abc373471a8c8d6bb0.svg"},340828:(l,n,t)=>{"use strict";t.d(n,{A:()=>Te});var e=t(361744),o=t(538065),r=t(555381);const i={key:0,class:"sc-mid-ctrls no-select"},s={key:0,class:"ddn-content midi-dropdown-content"},d={class:"midi-devices-content"},u={key:0,class:"active-bar"},m={class:"midi-devices-list midi-inputs-list"},v=["onClick"],_={key:0},S={key:1},N={class:"wrap-switch flex"},k=["checked"],O={for:"midi-write-switcher"},X={key:1,class:"midi-devices-list midi-outputs-list"},L=["onClick"],y={key:0},j={key:1},w={key:2,class:"recording-midi"},g={key:0},M={class:"recording-sequences"},E={class:"recording-number"},I={key:1,class:"recording-block"},C={class:"recording-tools"};function Z(ge,Q,Re,Fe,xe,Qe){const ze=(0,e.g2)("midi-calibration"),yt=(0,e.gN)("tooltip"),ft=(0,e.gN)("dropdown");return Qe.displayMIDIControls?((0,e.uX)(),(0,e.CE)("div",i,[Fe.hasDevices&&Re.hasLiveMidi?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(["icon-recording",{active:Fe.recording&&!Fe.counting}]),onClick:Q[0]||(Q[0]=Oe=>Qe.record())},null,2)):(0,e.Q3)("",!0),Fe.activeCalibration?((0,e.uX)(),(0,e.Wv)(ze,{key:1,midi:Re.midi},null,8,["midi"])):(0,e.Q3)("",!0),(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",{ref:"ddnDevices",class:(0,o.C4)(["sc-mid-dropdown",{connected:Fe.hasDevices}])},[(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{class:(0,o.C4)(["ddn-trigger midi-dropdown-trigger",{unactive:!Fe.hasDevices,active:Fe.hasDevices}]),onClick:Q[1]||(Q[1]=(...Oe)=>Qe.clickOnDevicesTrigger&&Qe.clickOnDevicesTrigger(...Oe)),"aria-label":"MIDI Devices"},Q[9]||(Q[9]=[(0,e.Lk)("svg",{class:"midi-icon",inline:"",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("g",{fill:"#FFF","fill-rule":"evenodd"},[(0,e.Lk)("path",{class:"midi_cable_connection",d:"M1 .5v3a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0-.5.5zm11 12v3a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0-.5.5zM2 1h1v2H2V1zm11 12h1v2h-1v-2z"}),(0,e.Lk)("path",{class:"midi_cable_core",d:"M14 8.42V3.635a4.164 4.164 0 0 0-.387-1.778C13.079.707 12.054 0 10.5 0S7.921.707 7.387 1.858c-.3.646-.394 1.29-.387 1.779v8.727c-.001.068-.012.219-.042.417-.048.33-.131.66-.254.962-.33.81-.862 1.259-1.703 1.257-.842-.002-1.375-.448-1.704-1.248a4.13 4.13 0 0 1-.255-.955A3.581 3.581 0 0 1 3 12.375V7.58A2.303 2.303 0 0 0 5 5.3V4.229C5 3.554 4.445 3 3.766 3H1.234A1.23 1.23 0 0 0 0 4.229V5.3c0 1.173.87 2.134 2 2.28v4.804c.002.127.016.318.053.56.06.403.162.806.319 1.188.47 1.143 1.332 1.865 2.627 1.868 1.298.003 2.162-.725 2.631-1.88.156-.384.258-.789.318-1.193A4.58 4.58 0 0 0 8 12.373V3.636c-.005-.366.07-.872.295-1.357C8.67 1.469 9.35 1 10.5 1c1.15 0 1.83.47 2.205 1.279.226.485.3.991.295 1.343V8.42a2.303 2.303 0 0 0-2 2.28v1.072c0 .674.555 1.228 1.234 1.228h2.532A1.23 1.23 0 0 0 16 11.772V10.7c0-1.173-.87-2.134-2-2.28zm-.699.98h.398c.721 0 1.301.578 1.301 1.3v1.072a.23.23 0 0 1-.234.228h-2.532a.235.235 0 0 1-.234-.228V10.7c0-.717.584-1.3 1.301-1.3zM1.234 4h2.532c.127 0 .234.106.234.229V5.3c0 .717-.584 1.3-1.301 1.3H2.3A1.296 1.296 0 0 1 1 5.3V4.229A.23.23 0 0 1 1.234 4z"})])],-1)]),2)),[[yt,{text:ge.$t("editor:toolbar.midi.title")}]]),xe.ddnDevicesOpen?((0,e.uX)(),(0,e.CE)("div",s,[Q[11]||(Q[11]=(0,e.Lk)("div",{"x-arrow":""},null,-1)),(0,e.Lk)("div",null,[(0,e.Lk)("ul",{class:"midi-devices-tabs",onClick:Q[4]||(Q[4]=(0,r.D$)(()=>{},["stop"]))},[Fe.scoreWrite?((0,e.uX)(),(0,e.CE)("li",{key:0,class:(0,o.C4)({active:xe.midiTab===0})},[(0,e.Lk)("a",{onClick:Q[2]||(Q[2]=(0,r.D$)(Oe=>{xe.midiTab=0,Qe.updateDdn()},["stop"]))},(0,o.v_)(ge.$t("flat:midi.inputs.title")),1)],2)):(0,e.Q3)("",!0),(0,e.Lk)("li",{class:(0,o.C4)({active:xe.midiTab===1||!Fe.scoreWrite})},[(0,e.Lk)("a",{onClick:Q[3]||(Q[3]=(0,r.D$)(Oe=>{xe.midiTab=1,Qe.updateDdn()},["stop"]))},(0,o.v_)(ge.$t("flat:midi.outputs.title")),1)],2)]),(0,e.Lk)("div",d,[xe.midiTab===0&&Fe.scoreWrite&&Re.midi.inputMIDI?((0,e.uX)(),(0,e.CE)("div",u,[(0,e.Lk)("ul",m,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Fe.devices.input,Oe=>((0,e.uX)(),(0,e.CE)("li",{key:Oe,class:(0,o.C4)({active:Fe.selectedInputDevice.id===Oe.id})},[(0,e.Lk)("a",{onClick:(0,r.D$)(ut=>Re.midi.selectInputDevice(Oe),["stop"])},[Oe.name==="none"?((0,e.uX)(),(0,e.CE)("span",_,(0,o.v_)(ge.$t("flat:none")),1)):((0,e.uX)(),(0,e.CE)("span",S,(0,o.v_)(Oe.name),1))],8,v)],2))),128))]),(0,e.Lk)("div",{onClick:Q[6]||(Q[6]=(0,r.D$)(()=>{},["stop"])),class:"midi-switcher"},[(0,e.Lk)("div",N,[(0,e.Lk)("input",{type:"checkbox",id:"midi-write-switcher",checked:Re.midi.inputMIDI.activeNotation,onChange:Q[5]||(Q[5]=Oe=>Re.midi.toggleInputNotation())},null,40,k),Q[10]||(Q[10]=(0,e.Lk)("label",{for:"midi-write-switcher"},null,-1))]),(0,e.Lk)("label",O,(0,o.v_)(ge.$t("flat:midi.write-enable")),1)])])):((0,e.uX)(),(0,e.CE)("ul",X,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Fe.devices.output,Oe=>((0,e.uX)(),(0,e.CE)("li",{key:Oe,class:(0,o.C4)({active:Fe.selectedOutputDevice.id===Oe.id})},[(0,e.Lk)("a",{onClick:(0,r.D$)(ut=>Re.midi.selectOutputDevice(Oe),["stop"])},[Oe.name==="none"?((0,e.uX)(),(0,e.CE)("span",y,(0,o.v_)(ge.$t("flat:none")),1)):((0,e.uX)(),(0,e.CE)("span",j,(0,o.v_)(Oe.name),1))],8,L)],2))),128))]))])])])):(0,e.Q3)("",!0)],2)),[[ft,{onClose:Qe.onDdnDevicesClose}]]),Fe.recording?((0,e.uX)(),(0,e.CE)("div",w,[Fe.counting?((0,e.uX)(),(0,e.CE)("div",g,[(0,e.Lk)("h2",null,[(0,e.Lk)("span",null,(0,o.v_)(ge.$t("flat:midi.start-record")),1),Q[12]||(Q[12]=(0,e.Lk)("br",null,null,-1)),(0,e.Lk)("span",null,(0,o.v_)(xe.count.sequences*xe.count.clicks-xe.beatsRecording),1)]),(0,e.Lk)("div",M,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Qe.rangeCountSequences,Oe=>((0,e.uX)(),(0,e.CE)("div",{class:"recording-sequence",key:Oe},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Qe.rangeCountClicks,ut=>((0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(["recording-click",{active:Oe*xe.count.clicks+ut<xe.beatsRecording}]),key:ut},[Q[13]||(Q[13]=(0,e.Lk)("div",{class:"recording-fill"},null,-1)),(0,e.Lk)("span",E,(0,o.v_)(ut+1),1)],2))),128))]))),128))])])):(0,e.Q3)("",!0),Fe.counting?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",I,[(0,e.Lk)("h2",null,[(0,e.Lk)("span",null,(0,o.v_)(ge.$t("flat:midi.recording")),1)])])),(0,e.Lk)("div",C,[(0,e.Lk)("div",{class:(0,o.C4)(["recording-metronome recording-button",{active:Fe.isMetronomeInContinuousMode}]),onClick:Q[7]||(Q[7]=Oe=>Re.midi.toggleMetronomeRecord())},Q[14]||(Q[14]=[(0,e.Lk)("svg",{class:"icon",inline:"",width:"34",height:"42",viewBox:"0 0 34 42",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M23.704 15.112a.5.5 0 0 0-.704.073l-1.904 2.344-1.08-4.05a.676.676 0 0 0-.62-.48H14.38a.687.687 0 0 0-.62.48l-3.743 14.036c-.072.27.094.482.37.482h1.5v.5c0 .267.227.5.506.5h.99c.29 0 .505-.225.505-.5V28h6v.5c0 .268.226.5.505.5h.99c.29 0 .505-.224.505-.5V28h1.502c.278 0 .44-.216.37-.482l-2.346-8.795 2.362-2.908a.5.5 0 0 0-.072-.703zM21.52 23h-3.58l2.695-3.318L21.52 23zm-10.33 4l.8-3h9.797l.8 3H11.19zm3.467-13h4.463l1.197 4.488L16.65 23h-4.393l2.4-9zm3.74 11H15.38a.5.5 0 0 0 0 1h3.018c.275 0 .49-.224.49-.5a.5.5 0 0 0-.49-.5zm-2.004-9h.99c.29 0 .505-.224.505-.5 0-.268-.226-.5-.504-.5h-.99a.495.495 0 0 0-.506.5c0 .268.226.5.505.5zm0 2h.99c.29 0 .505-.224.505-.5 0-.268-.226-.5-.504-.5h-.99a.495.495 0 0 0-.506.5c0 .268.226.5.505.5zm.99 1h-.99a.495.495 0 0 0-.505.5c0 .268.226.5.504.5h.99a.495.495 0 0 0 .506-.5c0-.268-.226-.5-.505-.5z",class:"fill"})])],-1)]),2),(0,e.Lk)("div",{class:"recording-stop recording-button",onClick:Q[8]||(Q[8]=Oe=>Re.midi.stopRecord())},Q[15]||(Q[15]=[(0,e.Lk)("span",{class:"icon"},null,-1)]))])])):(0,e.Q3)("",!0)])):(0,e.Q3)("",!0)}var te=t(591340),U=t(318187),b=t(763939),z=t(544582),ce=t(727825);const se={class:"midi-calib-main dropdown-menu"},x={class:"midi-calib-header"},T={class:"midi-calib-title"},ne={class:"midi-calib-description"},p={class:"midi-calib-content"},le={class:"midi-calib-footer"},A={class:"midi-calib-left-footer midi-calib-footer-col"},de={class:"midi-calib-right-footer midi-calib-footer-col"},Ae=["target"];function be(ge,Q,Re,Fe,xe,Qe){const ze=(0,e.g2)("StaticEmbedScore");return(0,e.uX)(),(0,e.CE)("div",se,[(0,e.Lk)("div",x,[(0,e.Lk)("h4",T,[(0,e.Lk)("span",null,(0,o.v_)(ge.$t("flat:midi.calib.title")),1),Q[6]||(Q[6]=(0,e.Lk)("span",{class:"tag-beta"},"Beta",-1))]),(0,e.Lk)("p",ne,(0,o.v_)(ge.$t("flat:midi.calib.description")),1)]),(0,e.Lk)("div",p,[(0,e.bF)(ze,{ref:"svgNode",data:xe.data,dpi:xe.dpi,id:"midi-calib-score",onMounted:Q[0]||(Q[0]=yt=>Qe.scoreDrawn())},null,8,["data","dpi"])]),(0,e.Lk)("div",le,[(0,e.Lk)("div",A,[(0,e.Lk)("button",{class:(0,o.C4)(["midi-calib-cancel",{active:xe.step===0||xe.step===1}]),onClick:Q[1]||(Q[1]=(0,r.D$)(yt=>Qe.cancelCalibration(),["stop"]))},(0,o.v_)(ge.$t("flat:midi.calib.cancel")),3),(0,e.Lk)("button",{class:(0,o.C4)(["midi-calib-cancel",{active:xe.step===0||xe.step===1}]),onClick:Q[2]||(Q[2]=(0,r.D$)(yt=>Qe.skipCalibration(),["stop"]))}," Skip ",2),(0,e.Lk)("span",{class:(0,o.C4)(["midi-calib-error",{active:xe.step===3}])},(0,o.v_)(xe.error),3)]),(0,e.Lk)("div",de,[(0,e.Lk)("button",{class:(0,o.C4)(["midi-calib-start",{active:xe.step===0}]),onClick:Q[3]||(Q[3]=(0,r.D$)(yt=>Qe.startCalibration(),["stop"]))},[(0,e.Lk)("span",null,(0,o.v_)(ge.$t("flat:midi.calib.start")),1),Q[7]||(Q[7]=(0,e.Lk)("div",null,null,-1))],2),(0,e.Lk)("button",{class:(0,o.C4)(["midi-calib-recording",{active:xe.step===1}])},[(0,e.Lk)("span",null,(0,o.v_)(ge.$t("flat:midi.calib.recording")),1),Q[8]||(Q[8]=(0,e.Lk)("div",{class:"loader-circular"},[(0,e.Lk)("svg",{height:"36",width:"36",viewBox:"25 25 50 50"},[(0,e.Lk)("circle",{cx:"50",cy:"50",r:"20",fill:"none","stroke-width":"2"})])],-1))],2),(0,e.Lk)("button",{class:(0,o.C4)(["midi-calib-finish",{active:xe.step===2}]),onClick:Q[4]||(Q[4]=(0,r.D$)(yt=>Qe.quitCalibrationAndStartRecording(),["stop"]))},[(0,e.Lk)("span",null,(0,o.v_)(ge.$t("flat:midi.calib.finish")),1),Q[9]||(Q[9]=(0,e.Lk)("div",null,null,-1))],2),(0,e.Lk)("button",{class:(0,o.C4)(["midi-calib-start",{active:xe.step===3}]),onClick:Q[5]||(Q[5]=(0,r.D$)(yt=>Qe.startCalibration(),["stop"]))},[(0,e.Lk)("span",null,(0,o.v_)(ge.$t("flat:midi.calib.start-again")),1),Q[10]||(Q[10]=(0,e.Lk)("div",null,null,-1))],2)]),Re.midi.audio.interaction.account.plan.features.midiInput?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("a",{key:0,href:"/settings/upgrade?ref=editor-live-midi&hf=live-midi",class:"midi-upgrade-power active",target:Fe.hasAccessToken?"_blank":"_self"},[(0,e.Lk)("span",null,(0,o.v_)(ge.$t("flat:midi.calib.upgrade-power")),1)],8,Ae))])])}var ae=t(429145),ie=t(989353),Ne=t(803002),$e=t(774309);const Pe={name:"MidiCalibration",props:{midi:{type:Object,required:!0}},setup(){const ge=(0,b.F)();return{hasAccessToken:(0,e.EW)(()=>ge.hasAccessToken)}},components:{StaticEmbedScore:$e.A},methods:{startCalibration(){this.startTime=ie.F6.context.currentTime,this.step=1,this.noteIdx=0,this.midi.startMIDICalibration(this.unitDuration,this.validateNote)},cancelCalibration(){this.midi.cancelMIDICalibration()},skipCalibration(){this.midi.cancelMIDICalibration(!0),this.$parent.record()},stopCalibration(){let ge=null;try{this.midi.stopMIDICalibration(this.noteDurations,this.tempo)}catch(Q){if(ge=Q,!(ge instanceof ie.iF))throw ge}this.finishCalibration(ge)},finishCalibration(ge){if(ge){if(this.error=ge.message,this.reInitHeadColor(),this.step=3,!(ge instanceof ie.iF))throw ge}else this.step=2},quitCalibrationAndStartRecording(){this.midi.closeMIDICalibration(),this.midi.record()},setTempo(ge){this.tempo=ge,this.unitDuration=60/ge;for(let Q=0;Q<this.noteQuarterDurations.length;Q++)this.noteDurations[Q]=this.noteQuarterDurations[Q]*this.unitDuration;this.$refs.svgNode.setTempo(ge)},validateNote(){this.noteIdx<this.notes.length&&(this.notes[this.noteIdx].style.fill="#268FF4",this.notes[this.noteIdx].style.stroke="#268FF4",this.noteIdx++),this.noteIdx===this.notes.length&&this.stopCalibration()},fetchNoteHeads(){this.voice=Ne.A.getElementsByClassName(this.svgNode,"voice")[0],this.notes=Ne.A.getElementsByClassName(this.voice,"note")},reInitHeadColor(){for(let ge=0;ge<this.notes.length;ge++)this.notes[ge].style.fill="#000",this.notes[ge].style.stroke="#000"},scoreDrawn(){this.setTempo(80),this.fetchNoteHeads()}},mounted(){this.svgNode=this.$refs.svgNode.$el},data(){return{dpi:100,error:"",startTime:0,noteIdx:0,unitDuration:1,active:!1,step:0,beats:4,cancelStack:null,pageLayout:null,displayUpdater:null,noteQuarterDurations:[1,1,.5,.5,.25,.25,.25,.25],noteDurations:[],notes:[],svgNode:null,data:new ae.A({"score-partwise":{$version:"3.0","part-list":{"score-part":[{"part-name":"",voiceMapping:{0:[0]},staffMapping:[{mainVoiceIdx:0,voices:[0]}],"part-abbreviation":"","score-instrument":{"instrument-name":"",$id:"P1-I1"},"midi-instrument":{"midi-program":1,$id:"P1-I1","midi-channel":"1"},$id:"P1"}]},part:[{measure:[{note:[{staff:"1",voice:"1",duration:"4",pitch:{octave:"4",step:"F"}},{staff:"1",voice:"1",duration:"4",pitch:{octave:"4",step:"F"}},{staff:"1",voice:"1",duration:"2",pitch:{octave:"4",step:"F"},beam:{$number:"1",content:"begin"}},{staff:"1",voice:"1",duration:"2",pitch:{octave:"4",step:"F"},beam:{$number:"1",content:"end"}},{staff:"1",voice:"1",duration:"1",pitch:{octave:"4",step:"F"},beam:[{$number:"1",content:"begin"},{$number:"2",content:"begin"}]},{staff:"1",voice:"1",duration:"1",pitch:{octave:"4",step:"F"},beam:[{$number:"1",content:"continue"},{$number:"2",content:"continue"}]},{staff:"1",voice:"1",duration:"1",pitch:{octave:"4",step:"F"},beam:[{$number:"1",content:"continue"},{$number:"2",content:"continue"}]},{staff:"1",voice:"1",duration:"1",pitch:{octave:"4",step:"F"},beam:[{$number:"1",content:"end"},{$number:"2",content:"end"}]}],$number:"1",harmony:[],barline:{$location:"right","bar-style":"light-heavy"},attributes:[{staves:"1",divisions:"4",time:{beats:"4","beat-type":"4"},clef:[{sign:"G",line:"2",$number:"1"}],key:{fifths:"0"},"staff-details":{"staff-lines":"5"},noteBefore:"-1"}],sound:{$tempo:"80"}}],$id:"P1"}]}})}}};var we=t(603768),Ze=t.n(we),nt=t(938793);const Ke={};Ke.$style=Ze();const K={name:"ScoreMidiControls",props:{midi:{type:Object,required:!0},audio:{type:Object,required:!0},checkFeature:{type:Boolean,default:!0},hasLiveMidi:{type:Boolean,default:!0}},components:{MidiCalibration:(0,nt.A)(Pe,[["render",be],["__cssModules",Ke]])},data(){return{ddnDevicesOpen:!1,midiTab:0,beatsRecording:0,count:{sequences:0,clicks:0}}},setup(){const ge=(0,b.F)(),Q=(0,U.R)(),Re=(0,z.o)(),Fe=(0,te.U)(),xe=(0,ce.N)();return{accountFeatures:(0,e.EW)(()=>ge.accountFeatures),hasAccessToken:(0,e.EW)(()=>ge.hasAccessToken),recording:(0,e.EW)(()=>Q.recording),devices:(0,e.EW)(()=>Q.devices),counting:(0,e.EW)(()=>Q.counting),activeCalibration:(0,e.EW)(()=>Q.activeCalibration),hasDevices:(0,e.EW)(()=>Q.hasDevices),selectedInputDevice:Q.selectedInputDevice,selectedOutputDevice:Q.selectedOutputDevice,audioRecording:(0,e.EW)(()=>Re.recording),audioRecorded:(0,e.EW)(()=>Re.recorded),isMetronomeInContinuousMode:(0,e.EW)(()=>Re.isMetronomeInContinuousMode),scoreWrite:(0,e.EW)(()=>Fe.scoreWrite),env:(0,e.EW)(()=>Fe.env),scoreId:(0,e.EW)(()=>xe.scoreId)}},computed:{rangeCountSequences(){return this.getRange(this.count.sequences)},rangeCountClicks(){return this.getRange(this.count.clicks)},displayMIDIControls(){return this.env==="performance"?!1:!this.audioRecording&&!this.audioRecorded&&(this.scoreWrite||this.env==="embed")}},methods:{onDdnDevicesClose(){this.ddnDevicesOpen=!1},updateDdn(){(0,e.dY)(()=>this.$refs.ddnDevices.$popper.scheduleUpdate())},clickOnDevicesTrigger(){this.checkFeature&&(!this.accountFeatures.midiInput||!this.hasDevices)&&!this.hasAccessToken?window.location=`/midi-devices/setup?ref=editor-header&score=${this.scoreId}`:this.ddnDevicesOpen=!0},record(){this.beatsRecording=0,this.count=this.midi.getClickCount(),this.midi.record(()=>{this.beatsRecording++})},getRange(ge){const Q=[];for(let Re=0;Re<ge;Re++)Q.push(Re);return Q}}},Te=(0,nt.A)(K,[["render",Z]])},341043:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.rightButtons_IE6ns{display:flex;gap:8px}.rightButtons_IE6ns button{display:flex;border-width:0;background-color:var(--f-subdue-10);color:var(--f-subdue);border-radius:50%;padding:0;width:24px;height:24px;justify-content:center;align-items:center;flex-shrink:0}.rightButtons_IE6ns .rotateIcon_yGiM2{transform:rotate(-90deg)}.rightButtons_IE6ns .rotateIcon_yGiM2.reverse_b1DRM{transform:rotate(90deg)}*[data-color-mode=dark] .rightButtons_IE6ns button{background-color:var(--f-ink);color:var(--f-subdue-40)}
`,""]),s.locals={rightButtons:"rightButtons_IE6ns",rotateIcon:"rotateIcon_yGiM2",reverse:"reverse_b1DRM"};const d=s},344219:(l,n,t)=>{"use strict";t.d(n,{A:()=>o});const o={TRIAD:"triad",SEVENTH:"seventh"}},347751:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`html .rootCommon_mOJAa{display:flex;position:relative}html .rootCommon_mOJAa .badge_g_XBK{position:absolute;overflow:hidden;height:0;width:0;font-size:9px;line-height:14px;font-weight:700;border-radius:50%;transition:all .15s cubic-bezier(.25,.1,.25,1);transform-origin:center center}html .rootCommon_mOJAa.active .badge_g_XBK{height:16px;width:16px}html .rootCommon_mOJAa .iconFlex_UHLjj{display:flex}html .rootDesktop_NWPNl{background:transparent;border:0;padding:0;height:42px;align-items:center;justify-content:center}html .rootDesktop_NWPNl .badge_g_XBK{top:4px;right:4px;background-color:var(--f-primary);border:1px solid white;color:#fff}html .rootDesktop_NWPNl .iconFlex_UHLjj{align-items:center;justify-content:center}html .rootDesktop_NWPNl .caret_jsfjm{margin-right:10px;width:0;height:0;border-left:3px solid transparent;border-right:3px solid transparent;border-top:3px solid var(--f-subdue)}html .rootDesktop_NWPNl .fill{fill:var(--f-subdue)}html .rootDesktop_NWPNl .stroke{stroke:var(--f-subdue)}html .rootDesktop_NWPNl.active .fill{fill:var(--f-primary)}html .rootDesktop_NWPNl.active .stroke{stroke:var(--f-primary)}html .rootDesktop_NWPNl.disabled{cursor:not-allowed}html .rootDesktop_NWPNl.disabled .fill{fill:var(--f-grey-disabled-content)}html .rootDesktop_NWPNl.disabled .stroke{stroke:var(--f-grey-disabled-content)}html .rootMobileDetailed_biL_6{width:100%;border:1px solid var(--f-subdue-10);box-shadow:inset 0 -2px 4px #2f344633;background-color:#fff;border-radius:4px;height:68px;min-width:58px;padding:8px;flex-direction:column;align-items:flex-start;justify-content:flex-end;transition:all ease-in-out .3s}html .rootMobileDetailed_biL_6 .t_SeONS{font-size:11px;color:var(--f-ink);white-space:nowrap}html .rootMobileDetailed_biL_6 .i_T7TTk svg{margin:0 0 -5px -15px}html .rootMobileDetailed_biL_6 .fill{fill:var(--f-ink)}html .rootMobileDetailed_biL_6 .stroke{stroke:var(--f-ink)}html .rootMobileDetailed_biL_6 .i_T7TTk.bigIcon_aOHDY svg{margin:0 0 -5px -10px}html .rootMobileDetailed_biL_6 .badge_g_XBK{top:21px;right:8px;background-color:#fff;border:1px solid white;color:var(--f-primary)}html .rootMobileDetailed_biL_6 .iconFlex_UHLjj{flex-direction:column;align-items:flex-start;justify-content:flex-end}html .rootMobileDetailed_biL_6.active{background:var(--f-primary)}html .rootMobileDetailed_biL_6.active .fill{fill:#fff}html .rootMobileDetailed_biL_6.active .stroke{stroke:#fff}html .rootMobileDetailed_biL_6.active .t_SeONS{color:#fff}html .rootMobileDetailed_biL_6.disabled{background:var(--f-grey-disabled-container-light);border:1px solid var(--f-grey-disabled-container);cursor:not-allowed}html .rootMobileDetailed_biL_6.disabled .fill{fill:var(--f-grey-disabled-content)}html .rootMobileDetailed_biL_6.disabled .stroke{stroke:var(--f-grey-disabled-content)}html .rootMobileDetailed_biL_6.disabled .t_SeONS{color:var(--f-grey-disabled-content)}html .rootMobileDetailed_biL_6:active{background:var(--f-primary);border:1px solid var(--f-primary-dark)}html .rootMobileDetailed_biL_6:active .fill{fill:#fff}html .rootMobileDetailed_biL_6:active .stroke{stroke:#fff}html .rootMobileDetailed_biL_6:active .t_SeONS{color:#fff}html .rootMobileSimple_ujeJ_{background:transparent;border:0;padding:0;height:42px;width:100%;align-items:center;justify-content:center}html .rootMobileSimple_ujeJ_ .i_T7TTk{display:flex}html .rootMobileSimple_ujeJ_ .t_SeONS{display:none}html .rootMobileSimple_ujeJ_ .fill{fill:var(--f-ink)}html .rootMobileSimple_ujeJ_ .stroke{stroke:var(--f-ink)}html .rootMobileSimple_ujeJ_.disabled{cursor:not-allowed}html .rootMobileSimple_ujeJ_.disabled .fill{fill:var(--f-grey-disabled-container)}html .rootMobileSimple_ujeJ_.disabled .stroke{stroke:var(--f-grey-disabled-container)}html .rootNativeSimple_kLP9d{width:28px;height:28px;border:none;background:transparent;box-shadow:0 0 0 1px #363c500a,0 1px 4px #363c5024;border-radius:8px;align-items:center;justify-content:center}html .rootNativeSimple_kLP9d .i_T7TTk{color:var(--f-subdue);display:flex}html .rootNativeSimple_kLP9d .t_SeONS{display:none}html .rootNativeSimple_kLP9d .fill{fill:var(--f-subdue)}html .rootNativeSimple_kLP9d .stroke{stroke:var(--f-subdue)}html .rootNativeSimple_kLP9d.disabled{background-color:var(--f-grey-disabled-container-light);cursor:not-allowed}html .rootNativeSimple_kLP9d.disabled .fill{fill:var(--f-grey-disabled-content)}html .rootNativeSimple_kLP9d.disabled .stroke{stroke:var(--f-grey-disabled-content)}html .rootNativeSimple_kLP9d:active{background:var(--f-primary);border:1px solid var(--f-primary-dark)}html .rootNativeSimple_kLP9d:active .fill{fill:#fff}html .rootNativeSimple_kLP9d:active .stroke{stroke:#fff}html .rootNativeSimple_kLP9d:active .t_SeONS{color:#fff}*[data-color-mode=dark] .rootMobileDetailed_biL_6{border-color:var(--f-subdue-dark);background:linear-gradient(180deg,var(--f-subdue-darker) 0%,var(--f-subdue-dark) 100%)}*[data-color-mode=dark] .rootMobileDetailed_biL_6 .t_SeONS{color:#fff}*[data-color-mode=dark] .rootMobileDetailed_biL_6 .fill{fill:#fff}*[data-color-mode=dark] .rootMobileDetailed_biL_6 .stroke{stroke:#fff}*[data-color-mode=dark] .rootMobileDetailed_biL_6.disabled{border:none;background:none;box-shadow:none}*[data-color-mode=dark] .rootMobileDetailed_biL_6.disabled .t_SeONS{color:var(--f-dark-disabled-content)}*[data-color-mode=dark] .rootMobileDetailed_biL_6.disabled .fill{fill:var(--f-dark-disabled-content)}*[data-color-mode=dark] .rootMobileDetailed_biL_6.disabled .stroke{stroke:var(--f-dark-disabled-content)}*[data-color-mode=dark] .rootNativeSimple_kLP9d{box-shadow:none;border:1px solid var(--f-subdue-dark);background-color:var(--f-subdue-darker)}*[data-color-mode=dark] .rootNativeSimple_kLP9d.disabled{border:none;background:none}*[data-color-mode=dark] .rootNativeSimple_kLP9d.disabled .fill{fill:var(--f-dark-disabled-content)}*[data-color-mode=dark] .rootNativeSimple_kLP9d.disabled .stroke{stroke:var(--f-dark-disabled-content)}
`,""]),s.locals={rootCommon:"rootCommon_mOJAa",badge:"badge_g_XBK",iconFlex:"iconFlex_UHLjj",rootDesktop:"rootDesktop_NWPNl",caret:"caret_jsfjm",rootMobileDetailed:"rootMobileDetailed_biL_6",t:"t_SeONS",i:"i_T7TTk",bigIcon:"bigIcon_aOHDY",rootMobileSimple:"rootMobileSimple_ujeJ_",rootNativeSimple:"rootNativeSimple_kLP9d"};const d=s},350831:(l,n,t)=>{var e=t(789828);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("2d58ebdb",e,!0,{})},352111:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(243564);const i=61,s=(0,o.pM)({name:"TbMordent",props:{scoreData:{type:Object,required:!0}},setup(d){const u=[{value:"mordent",action:"toggleMordent"},{value:"inverted-mordent",action:"toggleInvertedMordent"},{value:"mordent-long",action:"toggleLongMordent"},{value:"inverted-mordent-long",action:"toggleLongInvertedMordent"},{value:"mordent-long-approach-above",action:"toggleLongMordentAboveApproach"},{value:"mordent-long-approach-below",action:"toggleLongMordentBelowApproach"},{value:"inverted-mordent-long-approach-above",action:"toggleLongInvertedMordentAboveApproach"},{value:"inverted-mordent-long-approach-below",action:"toggleLongInvertedMordentBelowApproach"},{value:"inverted-mordent-long-departure-above",action:"toggleLongInvertedMordentAboveDeparture"},{value:"inverted-mordent-long-departure-below",action:"toggleLongInvertedMordentBelowDeparture"}],m=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,css:"tb-mordents",items:u,active:[m.tbMordent],defaultActionIcon:"toggleMordent"})}})},361e3:(l,n,t)=>{"use strict";t.d(n,{A:()=>x});var e=t(361744),o=t(538065),r=t(555381);const i=["aria-label"];function s(T,ne,p,le,A,de){const Ae=(0,e.g2)("FNumberInputWithSteppers"),be=(0,e.g2)("f-button"),ae=(0,e.gN)("dompurify-html");return A.changeDurationValue?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,o.C4)(T.$style.ddnMetronomeInner)},[(0,e.bo)((0,e.Lk)("button",{class:(0,o.C4)({[T.$style.newDuration]:!0,[T.$style.active]:de.activeDurationKey==="whole0"}),onClick:ne[4]||(ne[4]=ie=>de.setDuration("whole",0))},null,2),[[ae,A.icons.whole,"svg"]]),(0,e.bo)((0,e.Lk)("button",{class:(0,o.C4)({[T.$style.newDuration]:!0,[T.$style.active]:de.activeDurationKey==="whole1"}),onClick:ne[5]||(ne[5]=ie=>de.setDuration("whole",1))},null,2),[[ae,A.icons.whole_dotted,"svg"]]),(0,e.bo)((0,e.Lk)("button",{class:(0,o.C4)({[T.$style.newDuration]:!0,[T.$style.active]:de.activeDurationKey==="half0"}),onClick:ne[6]||(ne[6]=ie=>de.setDuration("half",0))},null,2),[[ae,A.icons.half,"svg"]]),(0,e.bo)((0,e.Lk)("button",{class:(0,o.C4)({[T.$style.newDuration]:!0,[T.$style.active]:de.activeDurationKey==="half1"}),onClick:ne[7]||(ne[7]=ie=>de.setDuration("half",1))},null,2),[[ae,A.icons.half_dotted,"svg"]]),(0,e.bo)((0,e.Lk)("button",{class:(0,o.C4)({[T.$style.newDuration]:!0,[T.$style.active]:de.activeDurationKey==="quarter0"}),onClick:ne[8]||(ne[8]=ie=>de.setDuration("quarter",0))},null,2),[[ae,A.icons.quarter,"svg"]]),(0,e.bo)((0,e.Lk)("button",{class:(0,o.C4)({[T.$style.newDuration]:!0,[T.$style.active]:de.activeDurationKey==="quarter1"}),onClick:ne[9]||(ne[9]=ie=>de.setDuration("quarter",1))},null,2),[[ae,A.icons.quarter_dotted,"svg"]]),(0,e.bo)((0,e.Lk)("button",{class:(0,o.C4)({[T.$style.newDuration]:!0,[T.$style.active]:de.activeDurationKey==="eighth0"}),onClick:ne[10]||(ne[10]=ie=>de.setDuration("eighth",0))},null,2),[[ae,A.icons.eighth,"svg"]]),(0,e.bo)((0,e.Lk)("button",{class:(0,o.C4)({[T.$style.newDuration]:!0,[T.$style.active]:de.activeDurationKey==="16th0"}),onClick:ne[11]||(ne[11]=ie=>de.setDuration("16th",0))},null,2),[[ae,A.icons.sixteenth,"svg"]])],2)):((0,e.uX)(),(0,e.CE)("form",{key:0,class:(0,o.C4)(T.$style.ddnMetronomeInner),"aria-label":T.$t("editor:tempo.edition"),onSubmit:ne[3]||(ne[3]=(0,r.D$)(ie=>de.setTempo(),["prevent"]))},[(0,e.Lk)("button",{class:(0,o.C4)(T.$style.changeDuration),onClick:ne[0]||(ne[0]=(...ie)=>de.openChangeDuration&&de.openChangeDuration(...ie)),type:"button","aria-label":"Change duration"},[(0,e.bo)((0,e.Lk)("div",null,null,512),[[ae,de.activeDurationIcon,"svg"]]),(0,e.Lk)("div",{class:(0,o.C4)(T.$style.iconCaret)},null,2)],2),(0,e.bF)(Ae,{autofocus:"",required:!1,modelValue:de.bpmProxy,"onUpdate:modelValue":ne[1]||(ne[1]=ie=>de.bpmProxy=ie),onChange:de.setBpm,min:1,max:500,step:1,placeholder:"",onEsc:de.close,ref:"tempoNumberInput",size:"medium"},null,8,["modelValue","onChange","onEsc"]),de.displaySave?((0,e.uX)(),(0,e.Wv)(be,{key:0,disabled:de.disabledSave,type:"submit","default-text":"flat:save"},null,8,["disabled"])):((0,e.uX)(),(0,e.Wv)(be,{key:1,type:"submit","default-text":de.removeText,theme:"fill-red"},null,8,["default-text"])),de.displayTrashButton?((0,e.uX)(),(0,e.Wv)(be,{key:2,type:"button",theme:"ghost-red",size:"small",class:(0,o.C4)(T.$style.delete),icon:A.trashIcon,"icon-size":24,"aria-label":T.$t(de.removeText),onClick:de.removeTempo},null,8,["class","icon","aria-label","onClick"])):(0,e.Q3)("",!0),le.displayAdvancedIcon?((0,e.uX)(),(0,e.Wv)(be,{key:3,class:(0,o.C4)(T.$style.openFullMetronome),type:"button",theme:"ghost",size:"small",icon:A.volumeIcon,"icon-size":24,onClick:ne[2]||(ne[2]=ie=>de.openFullMetronome())},null,8,["class","icon"])):(0,e.Q3)("",!0)],42,i))}var d=t(370061),u=t(121648),m=t(591340),v=t(445895),_=t(318866),S=t(459356),N=t(71204),k=t(6645),O=t(744056),X=t(258230),L=t(505522),y=Object.defineProperty,j=Object.defineProperties,w=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,I=(T,ne,p)=>ne in T?y(T,ne,{enumerable:!0,configurable:!0,writable:!0,value:p}):T[ne]=p,C=(T,ne)=>{for(var p in ne||(ne={}))M.call(ne,p)&&I(T,p,ne[p]);if(g)for(var p of g(ne))E.call(ne,p)&&I(T,p,ne[p]);return T},Z=(T,ne)=>j(T,w(ne));const te={name:"DdnInnerMetronome",emits:["close"],props:{scoreData:{type:Object,required:!0},autoFocus:{type:Boolean,default:!0}},components:{FNumberInputWithSteppers:N.A},data(){return{bpm:null,duration:null,nbDots:0,initialBpm:null,initialDuration:null,initialNbDots:null,isOwn:null,isFirst:null,icons:L.default,trashIcon:(0,O.IG)(v.A),volumeIcon:(0,O.IG)(X.A),changeDurationValue:!1}},setup(){const T=(0,S.O)(),ne=(0,m.U)(),p=(0,u.W)();return{displayAdvancedIcon:(0,e.EW)(()=>ne.env!=="embed"),range:(0,e.EW)(()=>p.range),displayError:T.displayError}},computed:{bpmProxy:{set(T){this.bpm=Number.parseInt(T,10)},get(){return this.isEmpty?null:this.bpm}},isEmpty(){return Number.isNaN(this.bpm)||typeof this.bpm!="number"},hasRange(){return!!this.range},activeDurationKey(){return`${this.duration}${this.nbDots}`},activeDurationIcon(){let T=this.duration;return this.nbDots>0&&(T+="_dotted"),L.default[T]},inputDifferent(){return this.bpm!==this.initialBpm||this.duration!==this.initialDuration||this.nbDots!==this.initialNbDots},displaySave(){return!!(this.hasRange||!this.isEmpty||!this.isOwn)},displayTrashButton(){return!(this.hasRange||!this.isOwn||this.isEmpty)},disabledSave(){return this.isEmpty?!0:!(this.hasRange||this.isFirst||this.inputDifferent)},removeText(){return this.isFirst?"flat:hide":"flat:remove"}},methods:Z(C({},(0,k.i0)(_.j,["showDialog"])),{removeTempo(){this.scoreData.scoreActions.executePublicAction("removeTempo"),this.close()},setTempo(){this.isEmpty?this.scoreData.scoreActions.executePublicAction("removeTempo"):this.scoreData.scoreActions.executePublicAction("setTempo",{bpm:this.bpm,durationType:this.duration,nbDots:this.nbDots}).catch(T=>this.displayError({error:T})),this.close()},openChangeDuration(){this.changeDurationValue=!0},setDuration(T,ne){this.duration=T,this.nbDots=ne,this.changeDurationValue=!1,(0,e.dY)(()=>{this.$refs.tempoNumberInput.focus()})},openFullMetronome(){this.showDialog("metronome")},setBpm(T){this.bpmProxy=T},close(){this.$emit("close")},focusInput(){this.$refs.tempoNumberInput&&this.$refs.tempoNumberInput.focus()}}),created(){const T=(0,d.M)(this.scoreData.adagioData);this.bpm=T.bpm,this.duration=T.duration,this.nbDots=T.nbDots,this.initialBpm=T.bpm,this.initialDuration=T.duration,this.initialNbDots=T.nbDots,this.isOwn=T.isOwn,this.isFirst=T.isFirst},mounted(){this.$refs.tempoNumberInput&&this.autoFocus&&this.$refs.tempoNumberInput.focus()}};var U=t(828454),b=t.n(U),z=t(938793);const ce={};ce.$style=b();const x=(0,z.A)(te,[["render",s],["__cssModules",ce]])},361303:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=40,s=(0,o.pM)({name:"TbGhost",props:{scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:"ghostNote",active:u.tbGhostNote})}})},361826:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>e});function e(o){const r={};return o.forEach(i=>{r[i]=!0}),r}},366562:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=53,s=(0,o.pM)({name:"TbGlissando",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>{var v;return((v=u.noteInfo)==null?void 0:v.hasGlissando)||!1});return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:m.value})}})},367124:(l,n,t)=>{var e=t(468657);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("64ac4966",e,!0,{})},369900:(l,n,t)=>{"use strict";t.d(n,{A:()=>o});var e=t(292681);function o(r,i,s=20){return{unpitched:e.default.parse(r.unpitched),notehead:r.notehead,pixelStaffSize:s,nbStaffLines:i.metas.staffLines||i.metas.lines||5}}},370061:(l,n,t)=>{"use strict";t.d(n,{M:()=>O,r:()=>X});var e=t(842746),o=t(259563),r=t(744056),i=t(121648),s=t(334931),d=Object.defineProperty,u=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,_=(L,y,j)=>y in L?d(L,y,{enumerable:!0,configurable:!0,writable:!0,value:j}):L[y]=j,S=(L,y)=>{for(var j in y||(y={}))m.call(y,j)&&_(L,j,y[j]);if(u)for(var j of u(y))v.call(y,j)&&_(L,j,y[j]);return L};const N={[o.default.FULL]:"whole",[o.default.HALF]:"half",[o.default.QUARTER]:"quarter",[o.default.EIGHT]:"eighth",[o.default.SIXTEENTH]:"16th"};function k(L){var y;const j=(0,i.W)();let w;j.range&&j.selectedType!=="metronome"?w=(0,r.ux)(j.range.left):((y=j.selectedEntity)==null?void 0:y.entityType)===e.A.TEMPO?(w=(0,r.ux)(j.contextPos),w.measureUuid=j.selectedEntity.measureUuid):w=(0,r.ux)(j.contextPos);const g=s.A.positionUuidToIdx(L,Object.assign({},w));return S(S({},w),g)}function O(L){const y=k(L),j=Object.assign({},L.getRealTempo(y.measureIdx));return j.duration=N[j.durationType],j.measureTime=L.getStaffMeasure(Object.assign({},y)).time,j.isFirst=y.measureIdx===0,j.isOwn=L.getCommonContent().hasOwnTempo(y.measureIdx),j}function X(L){const y=k(L);return L.getStaffMeasure(y).time}},370964:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>d,width:()=>s});var e=t(353922),o=t(121648),r=t(361744),i=t(299035);const s=40,d=(0,r.pM)({name:"TbDead",props:{scoreData:{type:Object,required:!0}},setup(u){const m=(0,o.W)(),v=(0,r.EW)(()=>m.tbCurrentUnpitchedNoteHead===e.A.X);return()=>(0,r.h)(i.default,{scoreData:u.scoreData,action:"toggleDeadNote",active:v.value})}})},374208:(l,n,t)=>{var e=t(248121);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("97cdae14",e,!0,{})},379685:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.ddnRoot_utgwj{z-index:1000;border-radius:8px;box-shadow:0 8px 18px -6px #2f34461f,0 12px 42px -4px #2f34461f;border:solid 1px var(--f-ink-10);background-color:var(--f-bg-0)}.arrow_OpEFP,.arrow_OpEFP:before{position:absolute;width:8px;height:8px;background:inherit;z-index:-1}.arrow_OpEFP{visibility:hidden}[data-popper-placement^=top]>[data-popper-arrow]{bottom:-4px}[data-popper-placement^=bottom]>[data-popper-arrow]{top:-4px}.arrow_OpEFP:before{visibility:visible;content:"";transform:rotate(45deg)}.root_U4B2y [role=backdrop],.root_U4B2y .BottomSheets-bg{background:#2f344629}.root_U4B2y .BottomSheets [role=number-input]{flex:1}.bottomPadding_WTcK5 .BottomSheets{padding-bottom:40px}html[data-color-mode=dark] .root_U4B2y .content_ZJJGw{color:var(--f-subdue-40)}html[data-color-mode=dark] .root_U4B2y .BottomSheets-header,html[data-color-mode=dark] .root_U4B2y .dialog-header{color:#fff}html[data-color-mode=dark] .root_U4B2y .BottomSheets,html[data-color-mode=dark] .root_U4B2y [role=dialog]{background-color:var(--f-bg-dark)}html[data-color-mode=dark] .root_U4B2y .BottomSheets input,html[data-color-mode=dark] .root_U4B2y [role=dialog] input{color:var(--f-subdue-40);background-color:var(--f-bg-dark)}html[data-color-mode=dark] .ddnRoot_utgwj{background-color:var(--f-bg-dark)}
`,""]),s.locals={ddnRoot:"ddnRoot_utgwj",arrow:"arrow_OpEFP",root:"root_U4B2y",bottomPadding:"bottomPadding_WTcK5",content:"content_ZJJGw"};const d=s},384188:(l,n,t)=>{"use strict";t.d(n,{default:()=>o.a});var e=t(767183),o=t.n(e)},387836:(l,n,t)=>{var e=t(757113);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("5c6ba628",e,!0,{})},391488:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(243564);const i=38,s=(0,o.pM)({name:"TbTremolo2",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=[{value:1,action:"addTremolo2_1"},{value:2,action:"addTremolo2_2"},{value:3,action:"addTremolo2_3"},{value:4,action:"addTremolo2_4"}],m=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,defaultActionIcon:"toggleTremolo2",items:u,active:[m.tbTremolo2]})}})},397498:(l,n,t)=>{"use strict";t.d(n,{GW:()=>r,VJ:()=>i,oZ:()=>o,qN:()=>e,rl:()=>u,ux:()=>s,xt:()=>d});const e="default",o="solfege",r="solfege-local",i="english",s="japanese",d="german",u=[e,o,r,i,s,d]},398220:(l,n,t)=>{var e=t(954405);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("3114a22a",e,!0,{})},409114:l=>{"use strict";l.exports='<svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 16"><path class="fill" fill-rule="evenodd" d="M9.699 6.888c1.452.741 2.533 1.76 2.533 3.614 0 4.17-3.305 5.498-6.394 5.498C2.78 16 0 14.764 0 12.077c0-1.946 1.236-2.965 2.842-3.737C1.359 7.506.154 6.363.154 4.232.154 1.637 2.594 0 6.178 0c.834 0 5.374.463 5.374 3.614 0 1.544-.741 2.564-1.853 3.274zm-3.985 8.093c2.07 0 3.027-1.05 3.027-2.286 0-2.039-2.285-2.687-4.54-3.676-1.36.525-2.44 1.668-2.44 2.904 0 2.008 1.884 3.058 3.953 3.058zm2.379-8.803C9.112 5.59 9.73 4.788 9.73 3.552 9.73 1.39 7.104.896 6.116.896c-1.36 0-3.12.648-3.12 1.946 0 1.946 2.626 2.47 5.097 3.336z"/></svg>'},410195:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.alignDesktop_kmpug:not(.bottom_WAgkk){position:absolute;top:0;left:0;height:0;width:0}.contentCommon_BnVfS{z-index:1000}.contentMobile_GR_vG{min-width:58px;max-width:100vw}
`,""]),s.locals={alignDesktop:"alignDesktop_kmpug",bottom:"bottom_WAgkk",contentCommon:"contentCommon_BnVfS",contentMobile:"contentMobile_GR_vG"};const d=s},415162:(l,n,t)=>{var e=t(641853);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("46f35c64",e,!0,{})},415353:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>_});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=t(793727),d=t.n(s),u=new URL(t(204143),t.b),m=i()(o()),v=d()(u);m.push([l.id,`.unpitched-keyboard{position:relative;flex:0 0 92px;width:100%;background:#161821}.unpitched-keyboard .unpitched-keys{position:relative;overflow-x:scroll;display:flex;align-items:center;transition:left .1s ease-in-out;padding:8px 6px;gap:3px}.unpitched-keyboard .unpitched-keys::-webkit-scrollbar{width:0px;height:0px;background:transparent}.unpitched-keyboard.hasNavInside{flex-basis:110px}.unpitched-keyboard.hasNavInside .unpitched-keys{padding-top:26px}.unpitched-keyboard.hasNavInside .unpitched-nav-btn{top:0}.unpitched-keyboard .unpitched-nav-btn{z-index:5;position:absolute;top:-18px;width:36px;height:36px;border-radius:100px;background-image:linear-gradient(-180deg,#fefefe,#fbfcfc);box-shadow:0 2px 8px #28304f1a,0 1px 3px #28304f33}.unpitched-keyboard .unpitched-nav-btn svg{height:12px;position:absolute;top:12px;left:3px}.unpitched-keyboard .unpitched-nav-btn.prev path,.unpitched-keyboard .unpitched-nav-btn.next path{stroke:var(--f-primary);stroke-width:8px}.unpitched-keyboard .unpitched-nav-btn.prev{left:16px}.unpitched-keyboard .unpitched-nav-btn.prev svg{transform:rotate(180deg);left:2px}.unpitched-keyboard .unpitched-nav-btn.next{right:16px}.unpitched-keyboard .unpitched-nav-btn.unpitched-close{left:68px}.unpitched-keyboard .unpitched-nav-btn.unpitched-close svg{left:12px}.unpitched-keyboard .unpitched-inst{flex:1 0 78px;width:78px;height:78px;padding:2px 6px;display:flex;flex-direction:column;justify-content:flex-end;align-items:center;overflow:hidden;background:url(${v}) #454e69;border-radius:3px;box-shadow:inset 0 1px 2px #ffffff26,inset 0 -1px 2px #2e3445;color:#fffc}.unpitched-keyboard .unpitched-inst .shortcut-icon-line{display:flex;align-items:baseline;flex-direction:row;margin-bottom:14px}.unpitched-keyboard .unpitched-inst .kb-icon{transform:translateY(14px)}.unpitched-keyboard .unpitched-inst .kb-icon .staffLines line{stroke:#fffc}.unpitched-keyboard .unpitched-inst .kb-icon .legerLine{stroke:#fffc}.unpitched-keyboard .unpitched-inst .kb-icon .note path{fill:#fffc;stroke-width:.5px;stroke:#fffc}.unpitched-keyboard .unpitched-inst .s{border:1px solid rgba(255,255,255,.8);border-radius:3px;min-width:18px;padding:0 4px;height:18px;font-size:12px;line-height:18px;display:flex;align-items:center;justify-content:center;margin-right:7px}.unpitched-keyboard .unpitched-inst .n{font-size:11px;font-weight:600;line-height:16px;letter-spacing:.2px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.unpitched-keyboard .unpitched-inst.active{background:var(--f-primary);color:#fff}.unpitched-keyboard .unpitched-outer{width:8px;flex:0 0 8px}body.touch .unpitched-keyboard .unpitched-nav-btn.prev,body.touch .unpitched-keyboard .unpitched-nav-btn.next{display:none}body.touch .unpitched-keyboard .unpitched-nav-btn.unpitched-close{left:16px}@media (max-width: 770px){body.touch .unpitched-keyboard .unpitched-nav-btn.unpitched-close{left:8px}}@media (max-width: 770px){.unpitched-keyboard .unpitched-nav-btn.prev{left:8px}.unpitched-keyboard .unpitched-nav-btn.next{right:8px}.unpitched-keyboard .unpitched-nav-btn.unpitched-close{left:60px}}
`,""]);const _=m},417486:(l,n,t)=>{var e=t(981695);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("4ba2d7e0",e,!0,{})},418280:(l,n,t)=>{var e=t(128683);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("543e4bd4",e,!0,{})},422393:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>v,width:()=>m});var e=t(684188),o=t(121648),r=t(645369),i=t.n(r),s=t(361744),d=t(299035);const u=i()("tb:hammer"),m=48,v=(0,s.pM)({name:"TbSlide",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(_){const S=(0,o.W)(),N=(0,s.EW)(()=>{try{const k=_.scoreData.scoreActions.cursor,O=(0,e.J)(k);return!!S.noteInfo.slideStarts[O]}catch(k){return u(k),!1}});return()=>(0,s.h)(d.default,{scoreData:_.scoreData,action:_.name,active:N.value})}})},430098:(l,n,t)=>{var e=t(990969);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("68db4bb8",e,!0,{})},430225:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.timesig-draw{display:flex;flex-direction:column;align-items:center;justify-content:center;width:36px}.timesig-draw .ts-digit,.timesig-draw .ts-symbol,.timesig-draw span{display:flex}.timesig-draw .ts-symbol.common,.timesig-draw .ts-symbol.common svg{height:22px;width:20px}.timesig-draw .ts-symbol.cut,.timesig-draw .ts-symbol.cut svg{height:32px;width:20px}
`,""]);const d=s},435196:(l,n,t)=>{var e=t(764533);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("7a1358d7",e,!0,{})},438628:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>S});var e=t(361744),o=t(538065);const r={key:0,class:"sv-tb-playstop"},i={key:1,class:"icon-play-loader"};function s(N,k,O,X,L,y){return X.hideBtn?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",r,[(0,e.Lk)("button",{onClick:k[0]||(k[0]=j=>O.audio.playToggle()),class:"icon-player icon-play-stop main","aria-label":"Play / Stop"},[X.rendered&&!X.loading?((0,e.uX)(),(0,e.CE)("span",{key:0,class:(0,o.C4)(["icon-play-morph",{stop:X.playing}])},null,2)):((0,e.uX)(),(0,e.CE)("span",i))])]))}var d=t(909696),u=t(544582);const m={name:"ToolbarPlayStop",props:{audio:{type:Object,required:!0}},setup(){const N=(0,u.o)(),k=(0,d.q6)();return{hideBtn:(0,e.EW)(()=>N.errorCode||N.pendingRetry),playing:(0,e.EW)(()=>N.playing),loading:(0,e.EW)(()=>N.loading),rendered:(0,e.EW)(()=>k.rendered)}}};var v=t(938793);const S=(0,v.A)(m,[["render",s]])},465177:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.piano-keyboard{position:relative;flex:0 0 108px;height:108px;width:100%;background:#000}.piano-keyboard.hasNavInside{flex-basis:126px;height:126px}.piano-keyboard.hasNavInside .bkey{height:82px}.piano-keyboard.hasNavInside .wkey{height:126px}.piano-keyboard.hasNavInside .keyboard-nav-btn{top:0}.piano-keyboard .keyboard-keys{position:relative;overflow-x:scroll;overflow-y:hidden;scrollbar-width:thin;width:100%;height:100%}.piano-keyboard .keyboard-keys::-webkit-scrollbar{width:0px;height:0px;background:transparent}.piano-keyboard .keyboard-keys-container{display:flex;width:100%;height:100%;position:relative;transition:left .1s ease-in-out}.piano-keyboard .octave{position:relative;flex:0 0 378px}.piano-keyboard .key-label{display:block;position:absolute;bottom:10px;left:50%;transform:translate(-50%);min-width:22px;height:22px;padding-left:2px;padding-right:2px;background:#fff;border-radius:5px;border:1px solid var(--f-grey-2);color:var(--f-subdue-fixed);font-size:12px;white-space:nowrap;display:flex;align-items:center;justify-content:center}.piano-keyboard .wkey,.piano-keyboard .bkey{position:absolute;top:0;border-bottom-left-radius:6px;border-bottom-right-radius:6px}.piano-keyboard .wkey{height:108px;width:52px;margin-right:2px;background:linear-gradient(-180deg,#9698a0,#f7f7f7 32%,#f9f9f9 37%,#fefefe);box-shadow:inset 0 -4px 3px #f3f5f7}.piano-keyboard .wkey:nth-child(1){left:0}.piano-keyboard .wkey:nth-child(2){left:54px}.piano-keyboard .wkey:nth-child(3){left:108px}.piano-keyboard .wkey:nth-child(4){left:162px}.piano-keyboard .wkey:nth-child(5){left:216px}.piano-keyboard .wkey:nth-child(6){left:270px}.piano-keyboard .wkey:nth-child(7){left:324px}.piano-keyboard .wkey.disabled{background:linear-gradient(-180deg,#b9b7b7 0,#ababab);box-shadow:none}.piano-keyboard .wkey.disabled .octave-label{color:#fff}.piano-keyboard .wkey.disabled .key-label{color:#fff;border:1px solid #fff;background:transparent}.piano-keyboard .wkey.active,.piano-keyboard .wkey:not(.disabled):active{background:var(--f-primary);box-shadow:none}.piano-keyboard .wkey.active .octave-label,.piano-keyboard .wkey:not(.disabled):active .octave-label{color:#fff}.piano-keyboard .wkey.active .key-label,.piano-keyboard .wkey:not(.disabled):active .key-label{color:#fff;border:1px solid #fff;background:transparent}.piano-keyboard .bkey{height:64px;width:40px;background:radial-gradient(0% 0%,#323232,#1f1f1f,#141414);background:-webkit-radial-gradient(0% 0%,#323232 0%,#1f1f1f 50%,#141414 100%);box-shadow:0 0 10px 2px #14141445}.piano-keyboard .bkey:nth-child(1){left:33px}.piano-keyboard .bkey:nth-child(2){left:87px}.piano-keyboard .bkey:nth-child(3){left:195px}.piano-keyboard .bkey:nth-child(4){left:249px}.piano-keyboard .bkey:nth-child(5){left:303px}.piano-keyboard .bkey.active:after,.piano-keyboard .bkey:not(.disabled):active:after{transition:width .2s ease-in-out;display:block;content:"";margin-top:11px;margin-left:15px;width:6px;height:32px;border-radius:4px;background:var(--f-primary);box-shadow:0 0 1px 1px #171717}.piano-keyboard .bkey.disabled{background:radial-gradient(0 0,#4e4e4e 0,#424242);background:-webkit-radial-gradient(0 0,#4e4e4e 0,#424242 100%)}.piano-keyboard .keyboard-nav-btn{z-index:5;position:absolute;top:-18px;width:36px;height:36px;border-radius:100px;background-image:linear-gradient(-180deg,#fefefe,#fbfcfc);box-shadow:0 2px 8px #28304f1a,0 1px 3px #28304f33}.piano-keyboard .keyboard-nav-btn svg{height:12px;position:absolute;top:12px;left:3px}.piano-keyboard .keyboard-nav-btn.prev path,.piano-keyboard .keyboard-nav-btn.next path{stroke:var(--f-primary);stroke-width:8px}.piano-keyboard .keyboard-nav-btn.prev{left:40px}.piano-keyboard .keyboard-nav-btn.prev svg{transform:rotate(180deg);left:2px}.piano-keyboard .keyboard-nav-btn.next{right:40px}.piano-keyboard .keyboard-nav-btn.piano-close{left:92px}.piano-keyboard .keyboard-nav-btn.piano-close svg{left:12px}@media (min-width: 600px){body.touch .piano-keyboard:not(.mob){flex:0 0 138px;height:138px}body.touch .piano-keyboard:not(.mob) .octave{flex:0 0 476px}body.touch .piano-keyboard:not(.mob) .wkey{height:138px;width:66px}body.touch .piano-keyboard:not(.mob) .wkey:nth-child(2){left:68px}body.touch .piano-keyboard:not(.mob) .wkey:nth-child(3){left:136px}body.touch .piano-keyboard:not(.mob) .wkey:nth-child(4){left:204px}body.touch .piano-keyboard:not(.mob) .wkey:nth-child(5){left:272px}body.touch .piano-keyboard:not(.mob) .wkey:nth-child(6){left:340px}body.touch .piano-keyboard:not(.mob) .wkey:nth-child(7){left:408px}body.touch .piano-keyboard:not(.mob) .bkey{height:72px;width:44px}body.touch .piano-keyboard:not(.mob) .bkey:nth-child(1){left:45px}body.touch .piano-keyboard:not(.mob) .bkey:nth-child(2){left:113px}body.touch .piano-keyboard:not(.mob) .bkey:nth-child(3){left:249px}body.touch .piano-keyboard:not(.mob) .bkey:nth-child(4){left:317px}body.touch .piano-keyboard:not(.mob) .bkey:nth-child(5){left:385px}body.touch .piano-keyboard:not(.mob) .bkey:after{margin-top:20px;margin-left:22px}body.touch .piano-keyboard:not(.mob) .key-label{bottom:15px}}body.touch .piano-keyboard .keyboard-nav-btn.prev,body.touch .piano-keyboard .keyboard-nav-btn.next{display:none}body.touch .piano-keyboard .keyboard-nav-btn.piano-close{left:40px}@media (max-width: 770px){body.touch .piano-keyboard .keyboard-nav-btn.piano-close{left:8px}}body:not(.touch) .piano-keyboard .wkey:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;transition:background .2s ease-in-out;background:#1c1c1c00}body:not(.touch) .piano-keyboard .wkey:not(.active):hover:before{background:#1c1c1c1a}@media (max-width: 770px){.piano-keyboard .keyboard-nav-btn.prev{left:8px}.piano-keyboard .keyboard-nav-btn.next{right:8px}.piano-keyboard .keyboard-nav-btn.piano-close{left:60px}}
`,""]);const d=s},467611:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>_});var e=t(361744);function o(S,N,k,O,X,L){const y=(0,e.g2)("ddn-inner-timesig"),j=(0,e.g2)("ToolbarComplexDdn");return(0,e.uX)(),(0,e.Wv)(j,{ref:"ddn",class:"tb-timesig ddn","icon-key":"timeSignature","mobile-text":L.mobileText,action:"setKey0","ddn-classes":L.classesListToObject(["ddn-content"]),"tablet-ddn":!0},{default:(0,e.k6)(()=>[(0,e.bF)(y,{"score-data":k.scoreData,onClose:N[0]||(N[0]=w=>L.onClose())},null,8,["score-data"])]),_:1},8,["mobile-text","ddn-classes"])}var r=t(674548),i=t(94754),s=t(13626),d=t(361826);const u={name:"TimeSignature",width:42,props:{scoreData:{type:Object,required:!0}},components:{DdnInnerTimesig:i.A,ToolbarComplexDdn:s.default},computed:{mobileText(){return r.MR.t("editor:timeSignature.title")}},methods:{onClose(){this.$refs.ddn.onClose()},classesListToObject:d.default}};var m=t(938793);const _=(0,m.A)(u,[["render",o]])},468657:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.input_pGzMB{background-color:var(--f-white);border:1px solid var(--border-neutral-tertiary);border-radius:var(--radius-standard);font-family:inherit;width:100%;font-size:14px;line-height:20px;color:var(--f-ink)}.input_pGzMB:focus,.input_pGzMB:active{border-color:var(--f-primary)}.input_pGzMB::placeholder{color:var(--f-subdue)}.input-x-small_d1qDT{padding:1px 8px}.input-small_uXIJn{padding:6px 8px}.input-medium_lo4sK{padding:9px 8px}.input-large_ul1jn{padding:13px 8px}.input_pGzMB[aria-disabled=true]{background-color:var(--f-bg-1);color:var(--f-grey-disabled-content)}.input_pGzMB[aria-invalid=true]{border-color:var(--f-safe-red)}.root_KyXs_{display:flex;padding:8px;gap:8px;min-width:300px;max-width:356px;align-items:center}.root_KyXs_ .chordPreview_QwG5W{flex-shrink:0}.root_KyXs_ .input_pGzMB{flex-shrink:1}.root_KyXs_.rootWide_D18qR{max-width:initial}button.roundButton_iAymQ{display:flex;border-width:0;background-color:var(--f-subdue-10);color:var(--f-subdue);border-radius:50%;padding:0;width:24px;height:24px;justify-content:center;align-items:center;flex-shrink:0}.rotateIcon_jguS5{transform:rotate(90deg)}.rotateIcon_jguS5.reverse_NN4yc{transform:rotate(-90deg)}*[data-color-mode=dark] button.roundButton_iAymQ{background-color:var(--f-ink);color:var(--f-subdue-40)}*[data-color-mode=dark] .ddnKeysigInner_TU09O .stroke{stroke:var(--f-subdue)}*[data-color-mode=dark] .ddnKeysigInner_TU09O .fill{fill:var(--f-subdue)}*[data-color-mode=dark] input.input_pGzMB{color:var(--f-subdue-40);background-color:var(--f-bg-dark)}
`,""]),s.locals={input:"input_pGzMB","input-x-small":"input-x-small_d1qDT","input-small":"input-small_uXIJn","input-medium":"input-medium_lo4sK","input-large":"input-large_ul1jn",root:"root_KyXs_",chordPreview:"chordPreview_QwG5W",rootWide:"rootWide_D18qR",roundButton:"roundButton_iAymQ",rotateIcon:"rotateIcon_jguS5",reverse:"reverse_NN4yc",ddnKeysigInner:"ddnKeysigInner_TU09O"};const d=s},471548:(l,n,t)=>{var e=t(211495);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("03ce2ae3",e,!0,{})},471633:(l,n,t)=>{"use strict";t.d(n,{Ay:()=>d,rv:()=>m,ve:()=>v,wE:()=>S});var e=t(843678),o=t(464173),r=t(66469),i=t(344219);const s={MAJOR:{key:"major",mode:r.A.MAJOR,size:i.A.TRIAD,adagio:o.A.MAJOR},AUGMENTED:{key:"augmented",mode:r.A.MAJOR,size:i.A.TRIAD,adagio:o.A.AUGMENTED},MINOR:{key:"minor",mode:r.A.MINOR,size:i.A.TRIAD,adagio:o.A.MINOR},DIMINISHED:{key:"diminished",mode:r.A.MINOR,size:i.A.TRIAD,adagio:o.A.DIMINISHED},DOMINANT:{key:"dominant",mode:r.A.MAJOR,size:i.A.SEVENTH,adagio:o.A.DOMINANT},MAJOR_7:{key:"major-7",mode:r.A.MAJOR,size:i.A.SEVENTH,adagio:o.A.MAJOR_7},AUGMENTED_7:{key:"augmented-7",mode:r.A.MAJOR,size:i.A.SEVENTH,adagio:o.A.AUGMENTED_7},MINOR_MAJOR:{key:"minor-major",mode:r.A.MINOR,size:i.A.SEVENTH,adagio:o.A.MAJOR_MINOR},MINOR_7:{key:"minor-7",mode:r.A.MINOR,size:i.A.SEVENTH,adagio:o.A.MINOR_7},DIMINISHED_7:{key:"diminished-7",mode:r.A.MINOR,size:i.A.SEVENTH,adagio:o.A.DIMINISHED_7},HALF_DIMINISHED:{key:"half-dim-7",mode:r.A.MINOR,size:i.A.SEVENTH,adagio:o.A.HALF_DIMINISHED}},d=s,u=new Map([[s.MAJOR.key,{size:s.DOMINANT,mode:s.MINOR}],[s.AUGMENTED.key,{size:s.AUGMENTED_7,mode:s.DIMINISHED}],[s.MINOR.key,{size:s.MINOR_7,mode:s.MAJOR}],[s.DIMINISHED.key,{size:s.DIMINISHED_7,mode:s.AUGMENTED}],[s.DOMINANT.key,{size:s.MAJOR,mode:s.MINOR_7}],[s.MAJOR_7.key,{size:s.MAJOR,mode:s.MINOR_7}],[s.AUGMENTED_7.key,{size:s.AUGMENTED,mode:s.DIMINISHED_7}],[s.MINOR_MAJOR.key,{size:s.MAJOR_7,mode:s.MINOR}],[s.MINOR_7.key,{size:s.MINOR,mode:s.MAJOR_7}],[s.DIMINISHED_7.key,{size:s.DIMINISHED,mode:s.AUGMENTED_7}],[s.HALF_DIMINISHED.key,{size:s.DIMINISHED,mode:s.AUGMENTED_7}]]);function m(N){return u.get(N.key).mode}function v(N){return u.get(N.key).size}const _=e.default.fromList(Array.from(Object.values(s)),N=>N.adagio);function S(N){return _[N]}},473927:(l,n,t)=>{var e=t(293402);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("6c8a7590",e,!0,{})},473965:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>s});var e=t(501059),o=t(697752),r=t(938793);const s=(0,r.A)(o.A,[["render",e.X]])},474008:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>i,width:()=>r});var e=t(361744),o=t(299035);const r=36,i=(0,e.pM)({name:"TbCut",props:{scoreData:{type:Object,required:!0},buttonStyle:{type:String,default:"detailed"}},setup(s){return()=>(0,e.h)(o.default,{buttonStyle:s.buttonStyle,scoreData:s.scoreData,action:"cut"})}})},477113:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>d,width:()=>s});var e=t(602494),o=t(121648),r=t(361744),i=t(299035);const s=35,d=(0,r.pM)({name:"TbNoteNatural",props:{scoreData:{type:Object,required:!0}},setup(u){const m=(0,o.W)(),v=(0,r.EW)(()=>m.editionMode===e.i?m.upcomingAttributes.accidental===0:m.tbNoteAccidental===0||m.upcomingAttributes.accidental===0);return()=>(0,r.h)(i.default,{scoreData:u.scoreData,action:"natural",active:v.value})}})},478044:(l,n,t)=>{"use strict";t.d(n,{A:()=>o,U:()=>r});const e={ROOT:"root",QUALITY:"quality",INVERSION:"inversion",RELATIVE_ROOT:"relative-root"},o=e,r=Array.from(Object.values(e))},481531:(l,n,t)=>{var e=t(960982);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("1a5a21cc",e,!0,{})},481548:(l,n,t)=>{var e=t(236519);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("305c9fa8",e,!0,{})},491068:(l,n,t)=>{var e=t(465177);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("4af9c6d1",e,!0,{})},494924:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>d,width:()=>s});var e=t(602494),o=t(121648),r=t(361744),i=t(243564);const s=57,d=(0,r.pM)({name:"TbQuarterAccidental",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(u){const m=(0,o.W)(),v=(0,r.EW)(()=>m.tbNoteAccidental),_=(0,r.EW)(()=>{if(m.editionMode===e.i||m.noteInfo.isRest)return typeof m.upcomingAttributes.accidental!="number"||u.name==="flat"&&m.upcomingAttributes.accidental>=0||u.name==="sharp"&&m.upcomingAttributes.accidental<=0?void 0:Math.abs(m.upcomingAttributes.accidental||0);if(!(typeof v.value!="number"||u.name==="flat"&&v.value>=0||u.name==="sharp"&&v.value<=0))return v.value||0}),S=[{action:"addQuarterFlatOrToggleCourtesy",value:-.5,icon:"flatQuarter"},{action:"addThreeQuarterFlatOrToggleCourtesy",value:-1.5,icon:"flatThreeQuarter"},{action:"addQuarterSharpOrToggleCourtesy",value:.5,icon:"sharpQuarter"},{action:"addThreeQuarterSharpOrToggleCourtesy",value:1.5,icon:"sharpThreeQuarter"}];return()=>(0,r.h)(i.default,{scoreData:u.scoreData,items:S,active:[_.value],defaultActionIcon:"flatQuarter"})}})},496253:(l,n,t)=>{"use strict";t.d(n,{A:()=>at});var e=t(361744),o=t(555381),r=t(538065),i=t(338770);const s={class:"d-tempo-inner"},d={class:"svg-container",ref:"svgContainerRef"},u={class:"tempo-type-selector"},m={class:"selector ddn-trigger"},v={class:"ddn-content"},_={class:"ddn-inner"},S={class:"cta"};function N(q,K,pe,Te,ge,Q){const Re=(0,e.g2)("FButton"),Fe=(0,e.g2)("ContentDialog"),xe=(0,e.gN)("dompurify-html"),Qe=(0,e.gN)("dropdown");return(0,e.uX)(),(0,e.Wv)(Fe,{ref:"dialogRef",regularWidth:444},{default:(0,e.k6)(()=>[(0,e.Lk)("form",{class:"d-tempo",onSubmit:K[16]||(K[16]=(0,o.D$)(ze=>Q.setTempo(),["prevent"])),ref:"formRef"},[(0,e.Lk)("button",{type:"button",class:"d-close",onClick:K[0]||(K[0]=ze=>Q.closeDialog())},K[17]||(K[17]=[(0,e.Lk)("img",{src:i},null,-1)])),(0,e.Lk)("div",{class:(0,r.C4)(q.$style.tempoContainer)},[(0,e.Lk)("div",s,[(0,e.bo)((0,e.Lk)("div",d,null,512),[[xe,ge.tempoSelectorSvg,"svg"]]),K[20]||(K[20]=(0,e.Lk)("svg",{class:"tempo-inhibitor",width:"200px",height:"200px",viewBox:"0 0 200 200",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[(0,e.Lk)("circle",{cx:"100",cy:"100",r:"100",fill:"#fff"})],-1)),(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",u,[(0,e.Lk)("a",m,[(0,e.bo)((0,e.Lk)("div",null,null,512),[[xe,Q.activeDurationIcon,"svg"]]),K[18]||(K[18]=(0,e.Lk)("div",{class:"icon-caret"},null,-1))]),(0,e.Lk)("div",v,[K[19]||(K[19]=(0,e.Lk)("div",{"x-arrow":""},null,-1)),(0,e.Lk)("div",_,[(0,e.bo)((0,e.Lk)("button",{type:"button",class:(0,r.C4)(["new-duration",{active:Q.activeDurationKey==="whole0"}]),onClick:K[1]||(K[1]=ze=>Q.setDuration("whole",0))},null,2),[[xe,ge.icons.whole,"svg"]]),(0,e.bo)((0,e.Lk)("button",{type:"button",class:(0,r.C4)(["new-duration",{active:Q.activeDurationKey==="whole1"}]),onClick:K[2]||(K[2]=ze=>Q.setDuration("whole",1))},null,2),[[xe,ge.icons.whole_dotted,"svg"]]),(0,e.bo)((0,e.Lk)("button",{type:"button",class:(0,r.C4)(["new-duration",{active:Q.activeDurationKey==="half0"}]),onClick:K[3]||(K[3]=ze=>Q.setDuration("half",0))},null,2),[[xe,ge.icons.half,"svg"]]),(0,e.bo)((0,e.Lk)("button",{type:"button",class:(0,r.C4)(["new-duration",{active:Q.activeDurationKey==="half1"}]),onClick:K[4]||(K[4]=ze=>Q.setDuration("half",1))},null,2),[[xe,ge.icons.half_dotted,"svg"]]),(0,e.bo)((0,e.Lk)("button",{type:"button",class:(0,r.C4)(["new-duration",{active:Q.activeDurationKey==="quarter0"}]),onClick:K[5]||(K[5]=ze=>Q.setDuration("quarter",0))},null,2),[[xe,ge.icons.quarter,"svg"]]),(0,e.bo)((0,e.Lk)("button",{type:"button",class:(0,r.C4)(["new-duration",{active:Q.activeDurationKey==="quarter1"}]),onClick:K[6]||(K[6]=ze=>Q.setDuration("quarter",1))},null,2),[[xe,ge.icons.quarter_dotted,"svg"]]),(0,e.bo)((0,e.Lk)("button",{type:"button",class:(0,r.C4)(["new-duration",{active:Q.activeDurationKey==="eighth0"}]),onClick:K[7]||(K[7]=ze=>Q.setDuration("eighth",0))},null,2),[[xe,ge.icons.eighth,"svg"]]),(0,e.bo)((0,e.Lk)("button",{type:"button",class:(0,r.C4)(["new-duration",{active:Q.activeDurationKey==="16th"}]),onClick:K[8]||(K[8]=ze=>Q.setDuration("16th",0))},null,2),[[xe,ge.icons.sixteenth,"svg"]])])])])),[[Qe]]),(0,e.bo)((0,e.Lk)("input",{autofocus:"",type:"number",step:"1",min:"10",max:"500",class:"tempo-input","onUpdate:modelValue":K[9]||(K[9]=ze=>ge.bpm=ze),onFocus:K[10]||(K[10]=ze=>Q.updateDisplayFromTempo()),onChange:K[11]||(K[11]=ze=>Q.updateDisplayFromTempo()),onKeypress:K[12]||(K[12]=(0,o.D$)(()=>{},["stop"])),onKeydown:[K[13]||(K[13]=(0,o.jR)(ze=>Q.closeDialog(),["esc"])),K[14]||(K[14]=(0,o.D$)(()=>{},["stop"]))],onKeyup:K[15]||(K[15]=(0,o.D$)(()=>{},["stop"]))},null,544),[[o.Jo,ge.bpm,void 0,{number:!0}]]),K[21]||(K[21]=(0,e.Lk)("div",{class:"text-bpm"},"BPM",-1))])],2),(0,e.Lk)("div",S,[(0,e.bF)(Re,{type:"submit","default-text":"flat:save"})])],544)]),_:1},512)}var k=t(110976),O=t(259563),X=t(989353),L=t(370061),y=t(86624),j=t(318866),w=t(459356),g=t(6645),M=t(505522),E=Object.defineProperty,I=Object.defineProperties,C=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,b=(q,K,pe)=>K in q?E(q,K,{enumerable:!0,configurable:!0,writable:!0,value:pe}):q[K]=pe,z=(q,K)=>{for(var pe in K||(K={}))te.call(K,pe)&&b(q,pe,K[pe]);if(Z)for(var pe of Z(K))U.call(K,pe)&&b(q,pe,K[pe]);return q},ce=(q,K)=>I(q,C(K));const se=[{minDeg:10,maxDeg:100,minTempo:40,maxTempo:60},{minDeg:100,maxDeg:145,minTempo:60,maxTempo:76},{minDeg:145,maxDeg:240,minTempo:76,maxTempo:120},{minDeg:240,maxDeg:305,minTempo:120,maxTempo:160},{minDeg:305,maxDeg:350,minTempo:160,maxTempo:208}],x=[{minTempo:0,maxTempo:60,text:"largo"},{minTempo:60,maxTempo:66,text:"larghetto"},{minTempo:66,maxTempo:76,text:"adagio"},{minTempo:76,maxTempo:108,text:"adante"},{minTempo:108,maxTempo:120,text:"moderato"},{minTempo:120,maxTempo:168,text:"allegro"},{minTempo:168,maxTempo:200,text:"presto"},{minTempo:200,maxTempo:301,text:"prestissimo"}],T={whole:O.default.FULL,half:O.default.HALF,quarter:O.default.QUARTER,eighth:O.default.EIGHT,"16th":O.default.SIXTEENTH},ne=16,p=364,le=300;function A(q){for(let K=0;K<se.length;K++)if(!(q<se[K].minDeg||q>se[K].maxDeg))return Math.round(se[K].minTempo+(q-se[K].minDeg)*(se[K].maxTempo-se[K].minTempo)/(se[K].maxDeg-se[K].minDeg));return null}function de(q){q<40?q=40:q>208&&(q=208);for(let K=0;K<se.length;K++)if(!(q<se[K].minTempo||q>se[K].maxTempo))return Math.round(se[K].minDeg+(q-se[K].minTempo)*(se[K].maxDeg-se[K].minDeg)/(se[K].maxTempo-se[K].minTempo));return null}function Ae(q){let K=q.target;for(;K;){if(K.nodeName==="svg")return K;K=K.parentElement}return K}function be(q){const K=q.getBoundingClientRect();return{top:K.top,left:K.left,x:K.left+K.width/2,y:K.top+K.height/2}}function ae(q){return q.type.indexOf("mouse")===-1&&(q=(q.originalEvent||q).changedTouches[0]),{x:q.clientX,y:q.clientY}}function ie(q,K){const pe=-(Math.atan2(q.y-K.y,K.x-q.x)-Math.PI/2);return(pe>0?pe:2*Math.PI+pe)*360/(2*Math.PI)}function Ne(q){return q<10?q=10:q>350&&(q=350),q}const $e={name:"DialogMetronome",components:{ContentDialog:y.A},props:{scoreData:{type:Object,required:!0}},data(){return{bpm:null,duration:null,nbDots:0,icons:M.default,svgClicked:!1,tempoSelectorSvg:M.default.tempoSelector,formElement:null,svgElement:null}},computed:ce(z({},(0,g.aH)(j.j,["currentDialogParams"])),{dialogParams(){return this.currentDialogParams},activeDurationKey(){return`${this.duration}${this.nbDots}`},activeDurationIcon(){let q=this.duration;return this.nbDots>0&&(q+="_dotted"),M.default[q]}}),methods:ce(z(z({},(0,g.i0)(w.O,["displayError"])),(0,g.i0)(j.j,["hideDialog"])),{closeDialog(){this.hideDialog(),this.scoreData.scoreActions.executePublicAction("unselect")},setTempo(){this.bpm===""?this.scoreData.scoreActions.executePublicAction("removeTempo"):this.scoreData.scoreActions.executePublicAction("setTempo",{bpm:this.bpm,durationType:this.duration,nbDots:this.nbDots}).catch(q=>this.displayError({error:q})),this.closeDialog()},updateToogleFromAngle(q){var K;for(q=-q*(Math.PI/180)-Math.PI/2;q<0;)q+=2*Math.PI;const pe=le/2,Te=p/2;let ge=pe*Math.cos(q),Q=pe*Math.sin(q);ge>0?ge+=Te:ge=Te+ge,Q>0,Q=Te-Q,ge-=ne/2,Q-=ne/2;const Re=(K=this.formElement)==null?void 0:K.querySelector(".tempoToogle");Re&&Re.setAttribute("transform",`translate(${ge},${Q})`)},updateDisplayFromTempo(){this.bpm<=10?this.bpm=10:this.bpm>500&&(this.bpm=500);const q=de(this.bpm);this.updateToogleFromAngle(q),this.updateToogleBouncing(),this.updateText()},updateToogleBouncing(){var q;if(!this.measureTime||!this.formElement)return;const K=k.default.bpmToQpm(this.bpm,T[this.duration],this.nbDots),pe=4/this.measureTime["beat-type"]*(60/K),Te=this.formElement.querySelector(".tempoToogleInside");if(!Te)return;Te.style.animation="none";const ge=(q=this.scoreData.scoreActions)==null?void 0:q.dependencies.audio;ge!=null&&ge.transport&&ge.getMetronomeMode()!==X.p4.DISABLED&&(ge.setMetronomeMode(X.p4.COUNT_IN,{saveInLocalStorage:!1}),ge.transport.stopMetronomeSequence()),this.lastBounceTimeout&&(clearTimeout(this.lastBounceTimeout),this.lastBounceTimeout=null),this.lastBounceTimeout=setTimeout(()=>{Te&&(Te.style.animation=`${pe}s tempo-bounce .25s infinite`),ge!=null&&ge.transport&&ge.getMetronomeMode()!==X.p4.DISABLED&&ge.transport.scheduleMetronomeSequence({sequences:Number.POSITIVE_INFINITY,clicks:this.measureTime.beats,unitDuration:pe},X.F6.context.currentTime+.25)},300)},updateText(){if(!this.formElement)return;for(let Te=0;Te<x.length;Te++)if(this.bpm>x[Te].minTempo&&this.bpm<=x[Te].maxTempo){if(x[Te].text===this.activeText)return;this.activeText=x[Te].text;break}if(!this.activeText)return;const q=this.formElement.querySelectorAll('[class^="tempo-label-"], [class^="tempo-line-"]');Array.prototype.forEach.call(q,Te=>Te.classList.remove("active"));const K=this.formElement.querySelector(`.tempo-label-${this.activeText}`),pe=this.formElement.querySelector(`.tempo-line-${this.activeText}`);K&&K.classList.add("active"),pe&&pe.classList.add("active")},updateTempoFromEvent(q){const K=Ae(q),pe=ae(q),Te=be(K);let ge=ie(pe,Te);if(ge=Ne(ge),this.bpm=A(ge),this.updateToogleFromAngle(ge),this.updateToogleBouncing(),this.updateText(),this.bpm>=208&&this.formElement){const Q=this.formElement.querySelector(".tempo-input");Q&&Q.focus()}},setDuration(q,K){this.duration=q,this.nbDots=K,this.updateToogleBouncing()},eventStart(q){var K;this.svgClicked=!0;const pe=(K=this.formElement)==null?void 0:K.querySelector(".tempoToogleInside");pe&&pe.classList.add("focus"),this.updateTempoFromEvent(q),q.preventDefault()},eventMove(q){this.svgClicked&&this.updateTempoFromEvent(q),q.preventDefault()},eventEnd(q){var K;this.svgClicked=!1;const pe=(K=this.formElement)==null?void 0:K.querySelector(".tempoToogleInside");pe&&pe.classList.remove("focus"),q.preventDefault()},initializeEventListeners(){if(!this.$refs.svgContainerRef)return;const q=this.$refs.svgContainerRef.querySelector("svg");q&&(q.addEventListener("mousedown",this.eventStart),q.addEventListener("mousemove",this.eventMove),q.addEventListener("mouseup",this.eventEnd),q.addEventListener("mouseleave",this.eventEnd),q.addEventListener("touchstart",this.eventStart),q.addEventListener("touchmove",this.eventMove),q.addEventListener("touchend",this.eventEnd),this.svgElement=q)}}),mounted(){this.formElement=this.$refs.formRef,this.$nextTick(()=>{this.initializeEventListeners(),this.updateDisplayFromTempo()})},created(){const q=(0,L.M)(this.scoreData.adagioData);this.bpm=q.bpm,this.duration=q.duration,this.nbDots=q.nbDots,this.measureTime=(0,L.r)(this.scoreData.adagioData)},beforeUnmount(){this.svgElement&&(this.svgElement.removeEventListener("mousedown",this.eventStart),this.svgElement.removeEventListener("mousemove",this.eventMove),this.svgElement.removeEventListener("mouseup",this.eventEnd),this.svgElement.removeEventListener("mouseleave",this.eventEnd),this.svgElement.removeEventListener("touchstart",this.eventStart),this.svgElement.removeEventListener("touchmove",this.eventMove),this.svgElement.removeEventListener("touchend",this.eventEnd)),setTimeout(()=>{var q;const K=(q=this.scoreData.scoreActions)==null?void 0:q.dependencies.audio;K!=null&&K.transport&&K.transport.stopMetronomeSequence()},600)}};var Pe=t(590353),we=t.n(Pe),Ze=t(938793);const nt={};nt.$style=we();const at=(0,Ze.A)($e,[["render",N],["__cssModules",nt]])},497258:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_A0y6v{display:flex;justify-content:center;align-items:center;width:28px;height:28px;padding:0;border:none;box-shadow:0 0 0 1px #363c500a,0 1px 4px #363c5024;border-radius:8px;background:transparent;color:var(--f-subdue)}.root_A0y6v .fill{fill:var(--f-subdue)}.root_A0y6v .stroke{stroke:var(--f-subdue)}.root_A0y6v.noShadow_Uf1gn{box-shadow:none}.root_A0y6v.disabled_aq2j3{background-color:var(--f-grey-disabled-container);color:var(--f-grey-disabled-content)}.root_A0y6v.disabled_aq2j3 .fill{fill:var(--f-grey-disabled-content)}.root_A0y6v.disabled_aq2j3 .stroke{stroke:var(--f-grey-disabled-content)}.root_A0y6v.active_TuxaW{color:var(--f-primary)}.root_A0y6v.active_TuxaW .fill{fill:var(--f-primary)}.root_A0y6v.active_TuxaW .stroke{stroke:var(--f-primary)}*[data-color-mode=dark] .root_A0y6v{border:1px solid var(--f-subdue-dark);background-color:var(--f-subdue-darker);box-shadow:none}*[data-color-mode=dark] .root_A0y6v.active_TuxaW{border:1px solid var(--f-primary-dark)}*[data-color-mode=dark] .root_A0y6v.noShadow_Uf1gn{background-color:transparent;border:none}
`,""]),s.locals={root:"root_A0y6v",noShadow:"noShadow_Uf1gn",disabled:"disabled_aq2j3",active:"active_TuxaW"};const d=s},497660:(l,n,t)=>{var e=t(556251);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("897c9042",e,!0,{})},501804:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.alignDesktop_kmpug:not(.bottom_WAgkk){position:absolute;top:0;left:0;height:0;width:0}.contentCommon_BnVfS{z-index:1000}.contentMobile_GR_vG{min-width:58px;max-width:100vw}
`,""]),s.locals={alignDesktop:"alignDesktop_kmpug",bottom:"bottom_WAgkk",contentCommon:"contentCommon_BnVfS",contentMobile:"contentMobile_GR_vG"};const d=s},502764:(l,n,t)=>{var e=t(209819);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("0b7f2adc",e,!0,{})},504848:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_VAKBM{display:flex;align-items:center;flex-direction:column;gap:8px}.title_l9Moa{color:var(--f-ink);font-size:14px;font-weight:600}.buttons_ThodG{display:flex;gap:8px}.buttonContainer_PQW_Y{width:48px;height:32px}.entry_vRJz0{padding:6px;border:1px solid var(--f-subdue-40);border-radius:8px;background-color:#fff;color:var(--f-subdue);font-size:14px;font-weight:400;line-height:20px;text-align:start}.entry_vRJz0 .fill{fill:var(--f-subdue)}.entry_vRJz0>svg{display:block;height:16px}.entry_vRJz0.active_pOIFe{border-color:var(--f-primary);color:var(--f-primary);background-color:var(--f-primary-10);font-weight:600}.entry_vRJz0.active_pOIFe .fill{fill:var(--f-primary)}.entry_vRJz0.disabled_PFvMl{border-color:var(--f-grey-disabled-content);color:var(--f-grey-disabled-content);background-color:var(--f-grey-disabled-container)}.entry_vRJz0.disabled_PFvMl .fill{fill:var(--f-grey-disabled-content)}*[data-color-mode=dark] .entry_vRJz0{background-color:transparent}*[data-color-mode=dark] .entry_vRJz0.active_pOIFe{background-color:var(--f-subdue-darker)}*[data-color-mode=dark] .title_l9Moa{color:#fff}
`,""]),s.locals={root:"root_VAKBM",title:"title_l9Moa",buttons:"buttons_ThodG",buttonContainer:"buttonContainer_PQW_Y",entry:"entry_vRJz0",active:"active_pOIFe",disabled:"disabled_PFvMl"};const d=s},505522:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>i});var e=t(27219);const o={};function r(s){s.keys().forEach(d=>{o[d.replace("./","").replace(".svg","")]=s(d)})}r(t(819329)),Object.keys(e.actions).forEach(s=>{e.actions[s].icon&&(o[s]=o[e.actions[s].icon])}),o["16th"]=o.sixteenth;const i=o},509238:(l,n,t)=>{"use strict";t.d(n,{A:()=>Ho});var e=t(361744),o=t(538065),r=t(555381);function i(H,ue,fe,Ye,Je,it){const _t=(0,e.g2)("EditToolbar"),Ut=(0,e.g2)("ROToolbar");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)({[H.$style.bottomUI]:!0,[H.$style.bottomPadding]:it.hasBottomPadding}),"data-cy":"scoreEditorMobBottom"},[(0,e.bF)(r.eB,null,{default:(0,e.k6)(()=>[it.hasEditUi?((0,e.uX)(),(0,e.Wv)(_t,{key:"2","is-native":fe.isNative,"score-data":fe.scoreData},null,8,["is-native","score-data"])):((0,e.uX)(),(0,e.Wv)(Ut,{key:"1","is-native":fe.isNative,"score-data":fe.scoreData},null,8,["is-native","score-data"]))]),_:1})],2)}var s=t(121648),d=t(591340),u=t(883892),m=t(6645);function v(H,ue,fe,Ye,Je,it){const _t=(0,e.g2)("TopToolbar"),Ut=(0,e.g2)("MiddleToolbar"),jt=(0,e.g2)("TabletToolbar"),eo=(0,e.g2)("BottomToolbar"),to=(0,e.g2)("TouchKeyboard");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)({[H.$style.root]:!0,[H.$style.hasBottomPadding]:it.hasHomeButton})},[(0,e.Lk)("div",{class:(0,o.C4)(H.$style.toolbar)},[Ye.isSmallScreen?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.bF)(_t,{"score-data":fe.scoreData,"is-native":fe.isNative},null,8,["score-data","is-native"]),(0,e.bF)(Ut,{"score-data":fe.scoreData,"available-toolbars-set":it.availableToolbarsSet},null,8,["score-data","available-toolbars-set"])],64)):((0,e.uX)(),(0,e.Wv)(jt,{key:1,"is-native":fe.isNative,"score-data":fe.scoreData,"available-toolbars-set":it.availableToolbarsSet},null,8,["is-native","score-data","available-toolbars-set"])),it.displayedToolbarGroups?((0,e.uX)(),(0,e.Wv)(eo,{key:2,"score-data":fe.scoreData,groups:it.displayedToolbarGroups,"aria-label":it.ariaLabel},null,8,["score-data","groups","aria-label"])):(0,e.Q3)("",!0)],2),it.isReady&&Ye.mode==="note"?((0,e.uX)(),(0,e.Wv)(to,{key:0,"score-data":fe.scoreData},null,8,["score-data"])):(0,e.Q3)("",!0)],2)}var _=t(727137),S=t(909696),N=t(599284),k=t(612732),O=t(303953),X=t(727825),L=Object.defineProperty,y=(H,ue,fe)=>ue in H?L(H,ue,{enumerable:!0,configurable:!0,writable:!0,value:fe}):H[ue]=fe,j=(H,ue,fe)=>y(H,typeof ue!="symbol"?ue+"":ue,fe);const w=t(793052),g=w.keys();class M{constructor(){j(this,"modulesMap"),this.modulesMap=new Map}getModule(ue){return this.modulesMap.has(ue)||this.loadModule(ue),this.modulesMap.get(ue)}loadModule(ue){let fe=`./${ue}.vue`;g.includes(fe)||(fe=`./${ue}.js`);let Ye=w(fe);Ye=Ye.default||Ye,Ye.component||(Ye={component:Ye,width:Ye.width}),this.modulesMap.set(ue,Ye)}}var E=t(992031),I=t(645369),C=t.n(I),Z=t(116450),te=Object.defineProperty,U=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,ce=(H,ue,fe)=>ue in H?te(H,ue,{enumerable:!0,configurable:!0,writable:!0,value:fe}):H[ue]=fe,se=(H,ue)=>{for(var fe in ue||(ue={}))b.call(ue,fe)&&ce(H,fe,ue[fe]);if(U)for(var fe of U(ue))z.call(ue,fe)&&ce(H,fe,ue[fe]);return H};const x=C()("tb:config");function T(H={}){return Z.d4.forEach(ue=>{(ue.groups||[]).forEach(fe=>{fe.components=(fe.elements||[]).map(Ye=>{let Je;return H[Ye]?Je=H[Ye]:Je=Z.gv[Ye],Je.elementName=Ye,Je.instrumentGroup&&(Je.instrumentGroups=Z.I_[Je.instrumentGroup],delete Je.instrumentGroup),Je})})}),Z.d4}function ne(H){var ue;const fe=(0,N.H)();if(fe.toolbarActions&&!fe.toolbarActions.includes(H.elementName)){x("component %s of toolbar is not part of available actions/groups (restricted by toolset/embed)",H.elementName),H.displayed=!1;return}if(!H.ro&&!(0,d.U)().scoreWrite){x("element %s not displayed because of read only context",H.elementName),H.displayed=!1;return}if(H.instrumentGroups&&!H.instrumentGroups.includes(((ue=(0,s.W)().currentPartsMetas)==null?void 0:ue.group)||"unknown")){x("element %s not displayed because of instrument groups requirements",H.elementName),H.displayed=!1;return}if(typeof H.displayConditionGetter=="boolean"&&!H.displayConditionGetter){x("toolbar %s not displayed because of unmet condition = %s (%o)",H.elementName,H.displayConditionGetter),H.displayed=!1;return}if(H.hideOnMobile&&(0,S.q6)().displayMobileEditor){x("element %s not displayed because of mobile context",H.elementName),H.displayed=!1;return}if(H.hideOnNativeMobile&&(0,X.N)().displayMobileNativeEditor){x("element %s not displayed because of native mobile context",H.elementName),H.displayed=!1;return}H.displayed=!0}function p(H){var ue,fe;if((ue=H.components)==null||ue.forEach(ne),(fe=H.components)!=null&&fe.every(Ye=>!Ye.displayed)){x("group containing %s not displayed because its content is not displayed",H.components[0].elementName),H.displayed=!1;return}H.displayed=!0}function le(H){if(H.hideOnMobile&&(0,S.q6)().displayMobileEditor){x("toolbar %s not displayed because of mobile context",H.name),H.displayed=!1;return}if(!H.ro&&!(0,d.U)().scoreWrite){x("toolbar %s not displayed because of read only context",H.name),H.displayed=!1;return}if(typeof H.displayConditionGetter=="boolean"&&!H.displayConditionGetter){x("toolbar %s not displayed because of unmet condition getter %s",H.name,H.displayConditionGetter),H.displayed=!1;return}if(H.groups.forEach(p,this),H.groups.every(ue=>!ue.displayed)){x("toolbar %s not displayed because its content is not displayed",H.name),H.displayed=!1;return}H.displayed=!0}function A(H){H.forEach(le)}function de(H){return!!H.displayed}function Ae(H){return H.filter(de).map(ue=>{const fe=ue.groups.filter(de).map(Ye=>{const Je=(Ye.components||[]).filter(de);return Ye=se({},Ye),Ye.components=Je,Ye});return ue=se({},ue),ue.groups=fe,ue})}function be(H){const ue=this.getModule(H.name);return H=se({},H),H.props=H.props||{},H.props.name=H.elementName,H.instrumentGroup&&(H.instrumentGroups=Z.I_[H.instrumentGroup],delete H.instrumentGroup),H.component=ue.component,H.width=ue.width,H}function ae(H,ue){return H.groups.map(fe=>(fe=se({},fe),fe.components=(fe.components||[]).map(be,ue),fe))}function ie(H,ue,fe,Ye,Je,it){const _t=(0,e.g2)("ToolbarGroup");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)([H.$style.wrapper,H.scrollableStyle.hiddenScrollbar])},[(0,e.bF)(_t,{class:(0,o.C4)([H.$style.root]),"score-data":fe.scoreData,groups:fe.groups,"aria-label":fe.ariaLabel},null,8,["class","score-data","groups","aria-label"])],2)}var Ne=t(521402);const $e={name:"BottomToolbar",props:{scoreData:{type:Object,required:!0},groups:{type:Array,default:null},ariaLabel:{type:String}},components:{ToolbarGroup:Ne.A}};var Pe=t(814956),we=t.n(Pe),Ze=t(264191),nt=t.n(Ze),Ke=t(938793);const at={};at.scrollableStyle=we(),at.$style=nt();const K=(0,Ke.A)($e,[["render",ie],["__cssModules",at]]);function pe(H,ue,fe,Ye,Je,it){const _t=(0,e.g2)("Voices"),Ut=(0,e.g2)("ToolbarCategories"),jt=(0,e.g2)("FlexSpacer"),eo=(0,e.g2)("ReadOnlyMode");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(H.$style.root)},[(0,e.bF)(_t,{"score-data":fe.scoreData,"button-style":"nativeSimple"},null,8,["score-data"]),(0,e.bF)(Ut,{"available-toolbars-set":fe.availableToolbarsSet},null,8,["available-toolbars-set"]),(0,e.Lk)("div",{class:(0,o.C4)(H.$style.rightBlock)},[(0,e.bF)(jt),(0,e.bF)(eo,{"score-data":fe.scoreData},null,8,["score-data"])],2)],2)}var Te=t(671187);function ge(H,ue,fe,Ye,Je,it){return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(H.$style.root)},null,2)}const Q={name:"FlexSpacer"};var Re=t(603703),Fe=t.n(Re);const xe={};xe.$style=Fe();const ze=(0,Ke.A)(Q,[["render",ge],["__cssModules",xe]]),yt={key:0,inline:"",width:"24",height:"25",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ft={key:1,inline:"",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Oe(H,ue,fe,Ye,Je,it){return(0,e.uX)(),(0,e.CE)("button",{"aria-label":"Read Only mode","data-cy":"tb-editionBlocked",type:"button",class:(0,o.C4)([H.buttonStyle.root,H.buttonStyle.noShadow]),onClick:ue[0]||(ue[0]=(..._t)=>it.toggleReadOnly&&it.toggleReadOnly(..._t))},[Ye.isEditionBlocked?((0,e.uX)(),(0,e.CE)("svg",yt,ue[1]||(ue[1]=[(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M21 20.03H3V9.773h18V20.03zm-1.2-1.2v-7.857H4.2v7.857h15.6zM11.966 4.814l2.868 2.683 1.052-.984-3.92-3.666-3.92 3.666 1.052.984 2.868-2.683z",fill:"#000",class:"fill"},null,-1)]))):((0,e.uX)(),(0,e.CE)("svg",ft,ue[2]||(ue[2]=[(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 4.2h18v10.258H3V4.2zm1.2 1.2v7.858h15.6V5.4H4.2zm7.834 14.016l-2.868-2.683-1.052.984 3.92 3.667 3.92-3.667-1.052-.984-2.868 2.683z",fill:"#000",class:"fill"},null,-1)])))],2)}const ut={name:"ReadOnlyMode",props:{scoreData:{type:Object,required:!0}},setup(){const H=(0,s.W)();return{isEditionBlocked:(0,e.EW)(()=>H.isEditionBlocked)}},methods:{toggleReadOnly(){this.scoreData.scoreActions.executePublicAction("toggleEditionBlocked")}}};var Tt=t(878149),ht=t.n(Tt);const vt={};vt.buttonStyle=ht();const It=(0,Ke.A)(ut,[["render",Oe],["__cssModules",vt]]);function Lt(H,ue,fe,Ye,Je,it){const _t=(0,e.g2)("ToolbarCategory");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)({[H.$style.root]:!0,[H.scrollableStyle.hiddenScrollbar]:!0})},[(0,e.Lk)("div",{class:(0,o.C4)({[H.$style.innerContainer]:!0,[H.$style.isFirst]:it.isFirst,[H.$style.isLast]:it.isLast})},[fe.availableToolbarsSet[Je.ToolbarId.NOTE]?((0,e.uX)(),(0,e.Wv)(_t,{key:0,"toolbar-id":Je.ToolbarId.NOTE,"toolbar-action":Je.ToolbarActions[Je.ToolbarId.NOTE]},{default:(0,e.k6)(()=>[(0,e.RG)(H.$slots,"default",{},()=>[ue[0]||(ue[0]=(0,e.Lk)("svg",{inline:"",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{d:"M12.498 4.167h-.832v5.05c-.503.08-1.222.294-2.119.823-.13.078-.257.16-.38.246v-6.12H7.5v6.671a.83.83 0 0 1-.833.83h-.835a.836.836 0 0 1-.832-.83v-6.67h-.825c-.931 0-1.675.745-1.675 1.675v8.316c0 .931.746 1.675 1.675 1.675h2.7c.105.295.246.575.422.834H4.174a2.503 2.503 0 0 1-2.507-2.509V5.842a2.503 2.503 0 0 1 2.508-2.509h8.323v.834zM6.667 14.352a4.095 4.095 0 0 0 0 .452v1.03h-.834v-4.167h.834v2.685zm11.665-7.427l-.576.575-2.758-2.117v7.534h-.005c.001 1.1-.772 2.333-2.058 3.1-1.701 1.016-3.648.825-4.35-.434-.701-1.25.11-3.091 1.81-4.108 1.355-.8 2.857-.833 3.77-.183v-6.55h-.001v-.575h.834l3.334 2.758z",fill:"#000",class:"fill"})],-1))])]),_:3},8,["toolbar-id","toolbar-action"])):(0,e.Q3)("",!0),fe.availableToolbarsSet[Je.ToolbarId.TAB]?((0,e.uX)(),(0,e.Wv)(_t,{key:1,"toolbar-id":Je.ToolbarId.TAB,"toolbar-action":Je.ToolbarActions[Je.ToolbarId.TAB]},{default:(0,e.k6)(()=>[(0,e.RG)(H.$slots,"default",{},()=>[ue[1]||(ue[1]=(0,e.Lk)("svg",{inline:"",width:"40",height:"42",viewBox:"0 0 40 42",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("g",{class:"fill","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M29.235 28H17.764c-.421 0-.764.22-.764.5s.343.5.764.5h11.47c.422 0 .766-.22.766-.5s-.344-.5-.765-.5zm.301-3H17.464c-.256 0-.464.22-.464.5s.208.5.464.5h12.072c.256 0 .464-.22.464-.5s-.208-.5-.464-.5zM17.65 22c-.358 0-.649.22-.649.5s.291.5.65.5h11.7c.359 0 .65-.22.65-.5s-.291-.5-.65-.5h-11.7zm-.185-2h12.072c.256 0 .464-.22.464-.5s-.208-.5-.464-.5H17.464c-.256 0-.464.22-.464.5s.208.5.464.5zm12.072-3c.256 0 .464-.22.464-.5s-.208-.5-.464-.5H17.464c-.256 0-.464.22-.464.5s.208.5.464.5h12.072zm-12.072-3h12.072c.256 0 .464-.22.464-.5s-.208-.5-.464-.5H17.464c-.256 0-.464.22-.464.5s.208.5.464.5z"}),(0,e.Lk)("path",{d:"M15.127 13.56h-1.63v4.424h-.635v-4.423h-1.64V13h3.905v.56zm.222 9.937h-.709l-.518-1.492h-1.916l-.529 1.492H11l1.778-4.973h.825l1.746 4.973zm-1.397-2.031L13.18 19.2l-.815 2.265h1.587zm1.08 6.105c0 .826-.572 1.429-1.471 1.429h-2.244v-4.984h2.022c.941 0 1.47.54 1.47 1.27 0 .497-.232.867-.687 1.08.635.242.91.613.91 1.205zm-.857-2.2c0-.509-.286-.794-.995-.794h-1.228v1.587h1.228c.709 0 .995-.286.995-.794zm.222 2.211c0-.487-.296-.857-.89-.857h-1.555v1.714h1.556c.593 0 .889-.38.889-.857z","fill-rule":"nonzero"})])],-1))])]),_:3},8,["toolbar-id","toolbar-action"])):(0,e.Q3)("",!0),fe.availableToolbarsSet[Je.ToolbarId.ARTICULATION]?((0,e.uX)(),(0,e.Wv)(_t,{key:2,"toolbar-id":Je.ToolbarId.ARTICULATION,"toolbar-action":Je.ToolbarActions[Je.ToolbarId.ARTICULATION]},{default:(0,e.k6)(()=>[(0,e.RG)(H.$slots,"default",{},()=>[ue[2]||(ue[2]=(0,e.Lk)("svg",{inline:"",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.982 8.011l-.635 4.446H3v-.8h1.653L5.604 5l.793.005 1.258 9.644 1.047-3.492h2.072L12.5 8.279l1.726 2.878H15.5v.8h-1.726L12.5 9.834l-1.274 2.123H9.299l-1.415 4.715-.78-.064-1.121-8.597zM20.5 11.957h-2v-.8h2v.8z",fill:"#000",class:"fill"}),(0,e.Lk)("path",{d:"M20.807 8.5l.692-.69-4.001-3.31h-1v8.55c-1.096-.78-2.898-.74-4.524.22-2.04 1.22-3.013 3.43-2.171 4.93.841 1.51 3.178 1.74 5.219.52 1.543-.92 2.471-2.4 2.47-3.72l.006-9.04 3.309 2.54z",fill:"#000",class:"fill"})],-1))])]),_:3},8,["toolbar-id","toolbar-action"])):(0,e.Q3)("",!0),fe.availableToolbarsSet[Je.ToolbarId.ORNAMENT]?((0,e.uX)(),(0,e.Wv)(_t,{key:3,"toolbar-id":Je.ToolbarId.ORNAMENT,"toolbar-action":Je.ToolbarActions[Je.ToolbarId.ORNAMENT]},{default:(0,e.k6)(()=>[(0,e.RG)(H.$slots,"default",{},()=>[ue[3]||(ue[3]=(0,e.Lk)("svg",{inline:"",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.678 6c-.808 0-1.46.385-1.46 1.211 0 .606.39.99.938.99.757 0 .783-.632 1.331-.632.443 0 .86.578.86 1.293 0 1.184-.782 1.762-1.695 1.762-.835 0-1.695-.743-2.817-2.064-1.278-1.487-2.426-2.532-4.122-2.532C3.991 6.028 3 7.404 3 9.165 3 11.147 4.2 12 5.322 12c.808 0 1.46-.385 1.46-1.211 0-.605-.39-.99-.939-.99-.756 0-.782.632-1.33.632-.443 0-.86-.578-.86-1.293 0-1.184.782-1.762 1.695-1.762.835 0 1.695.743 2.817 2.064 1.278 1.487 2.426 2.533 4.122 2.533 1.722 0 2.713-1.377 2.713-3.138C15 6.853 13.8 6 12.678 6z",fill:"#000",class:"fill"}),(0,e.Lk)("path",{d:"M20.307 8.5l.692-.69-4.001-3.31h-1v8.55c-1.096-.78-2.898-.74-4.524.22-2.04 1.22-3.013 3.43-2.171 4.93.841 1.51 3.178 1.74 5.219.52 1.543-.92 2.471-2.4 2.47-3.72l.006-9.04 3.309 2.54z",fill:"#000",class:"fill"})],-1))])]),_:3},8,["toolbar-id","toolbar-action"])):(0,e.Q3)("",!0),fe.availableToolbarsSet[Je.ToolbarId.DYNAMIC]?((0,e.uX)(),(0,e.Wv)(_t,{key:4,"toolbar-id":Je.ToolbarId.DYNAMIC,"toolbar-action":Je.ToolbarActions[Je.ToolbarId.DYNAMIC]},{default:(0,e.k6)(()=>[(0,e.RG)(H.$slots,"default",{},()=>[ue[4]||(ue[4]=(0,e.Lk)("svg",{inline:"",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{d:"M10.875 9.364v2.939l.75-.727V9.364a1.124 1.124 0 1 0-2.25-.005v6.035l.75-1.953V9.359a.374.374 0 1 1 .75.005zm-2.322 8.17l.27-.701a.371.371 0 0 1-.2-.33v-9.38a1.125 1.125 0 0 0-2.248.002v7.125a.377.377 0 0 1-.375.375.373.373 0 0 1-.375-.375V12c0-.626-.506-1.125-1.127-1.125H3.375a.375.375 0 0 0 0 .75h1.123c.21 0 .377.167.377.375v2.25c0 .62.5 1.125 1.125 1.125.622 0 1.125-.507 1.125-1.125V7.125c0-.209.166-.375.374-.375.206 0 .373.17.373.372v9.38c0 .464.28.86.681 1.032z",fill:"#000",class:"fill"}),(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.698 17.637l-.573-.508.786-2.642v-.145L18.294 7.1c.47-.467 1.295-.467 1.765 0l.54.508c.487.483.563 1.417.077 1.9l-1.245 1.257-6.07 6.002h-.154l-2.509.87zm1.852-1.338l-1.098-1.08-.515 1.612 1.613-.532zm6.167-5.977l-1.244-1.256-5.672 5.582 1.278 1.289 5.638-5.615zm.395-2.835a.402.402 0 0 0-.294.12l-.917.903 1.295 1.32.918-.901a.416.416 0 0 0-.001-.588l-.642-.66c-.078-.081-.247-.194-.359-.194z",fill:"#000",class:"fill"})],-1))])]),_:3},8,["toolbar-id","toolbar-action"])):(0,e.Q3)("",!0),fe.availableToolbarsSet[Je.ToolbarId.MEASURE]?((0,e.uX)(),(0,e.Wv)(_t,{key:5,"toolbar-id":Je.ToolbarId.MEASURE,"toolbar-action":Je.ToolbarActions[Je.ToolbarId.MEASURE]},{default:(0,e.k6)(()=>[(0,e.RG)(H.$slots,"default",{},()=>[ue[5]||(ue[5]=(0,e.Lk)("svg",{inline:"",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20.28 6c.398 0 .72.327.72.72v10.8c0 .398-.32.72-.72.72h-.72V6h.72zm-1.44 0v12.24H3.36a.355.355 0 0 1-.36-.353V6.353A.36.36 0 0 1 3.36 6h15.48zm-.72 9.36H3.72v2.16h14.4v-2.16zm0-2.88H3.72v2.16h14.4v-2.16zM3.72 9.6v2.16h14.4V9.6H3.72zm0-.72h14.4V6.72H3.72v2.16z",fill:"#000",class:"fill"})],-1))])]),_:3},8,["toolbar-id","toolbar-action"])):(0,e.Q3)("",!0),fe.availableToolbarsSet[Je.ToolbarId.TEXT]?((0,e.uX)(),(0,e.Wv)(_t,{key:6,"toolbar-id":Je.ToolbarId.TEXT,"toolbar-action":Je.ToolbarActions[Je.ToolbarId.TEXT]},{default:(0,e.k6)(()=>[(0,e.RG)(H.$slots,"default",{},()=>[ue[6]||(ue[6]=(0,e.Lk)("svg",{inline:"",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.608 10.624c1.029 0 1.787.372 2.445 1.165v-.996h1.197v7.005h-1.197v-.98c-.64.777-1.416 1.182-2.428 1.182-2.09 0-3.372-1.755-3.372-3.73s1.298-3.646 3.355-3.646zM10.426 6l1.81 4.236a5.02 5.02 0 0 0-.858 1.053l-.986-2.352-1.922 4.506h2.152a6.11 6.11 0 0 0-.046 1.165H7.965l-1.35 3.19H5.25L10.426 6zm5.368 5.705c-1.434 0-2.31 1.215-2.31 2.565 0 1.367.843 2.633 2.31 2.633 1.5 0 2.326-1.232 2.326-2.633 0-1.384-.86-2.565-2.326-2.565z",fill:"#000",class:"fill"})],-1))])]),_:3},8,["toolbar-id","toolbar-action"])):(0,e.Q3)("",!0)],2)],2)}const Ct=["aria-label","id"],G=["width"],J={transform:"translate(34, 0)"};function Me(H,ue,fe,Ye,Je,it){return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(H.$style.root)},[(0,e.Lk)("button",{type:"button",ref:"trigger",class:(0,o.C4)({[H.$style.active]:it.isActive}),onClick:ue[0]||(ue[0]=(..._t)=>Ye.changeToolbarCategory&&Ye.changeToolbarCategory(..._t)),"aria-label":it.tooltipText,id:`tb-mode-${fe.toolbarId}`},[(0,e.RG)(H.$slots,"default")],10,Ct),it.isActive?((0,e.uX)(),(0,e.CE)("svg",{key:0,class:(0,o.C4)(H.$style.link),width:it.linkWidth,direction:"bottom",height:"8"},[(0,e.Lk)("path",{class:(0,o.C4)(H.$style.leftFirst),d:`
            M 4,0
            L 6,0
            L 6,8
            L 0,8
            A 4,4, 0 0,0 4,4
            L 4,0
          `},null,2),(0,e.Lk)("path",{class:(0,o.C4)(H.$style.leftOthers),d:`
            M 2,0
            A 4,4, 0 0,1 2,8
            L 6,8
            L 6,0
            L 2,0
          `},null,2),ue[1]||(ue[1]=(0,e.Lk)("rect",{x:"6",y:"0",height:"8",width:"28"},null,-1)),(0,e.Lk)("g",J,[(0,e.Lk)("path",{class:(0,o.C4)(H.$style.rightLast),d:`
            M 0,0
            L 2,0
            L 2,4
            A 4,4, 0 0,0 6,8
            L 0,8
            L 0,0
          `},null,2),(0,e.Lk)("path",{class:(0,o.C4)(H.$style.rightOthers),d:`
            M 0,0
            L 4,0
            A 4,4, 0 0,0 4,8
            L 0,8
            L 0,0
          `},null,2)])],10,G)):(0,e.Q3)("",!0)],2)}const Xe={name:"ToolbarCategories",props:{toolbarId:{type:String,required:!0},toolbarAction:{type:String}},setup(H){const ue=(0,u.S)();return{mode:(0,e.EW)(()=>ue.mode),changeToolbarCategory:()=>ue.setMode(H.toolbarId)}},computed:{isActive(){return this.toolbarId===this.mode},linkWidth(){return 28+6*2},action(){return this.toolbarAction},tooltipText(){const H=`${this.action}.title`;return this.$t(`editor:${H}`)}}};var rt=t(698324),He=t.n(rt);const lt={};lt.$style=He();const xt=(0,Ke.A)(Xe,[["render",Me],["__cssModules",lt]]),gt={NOTE:"note",TAB:"tab",ARTICULATION:"articulation",ORNAMENT:"ornament",DYNAMIC:"dynamic",MEASURE:"measure",TEXT:"text"},F={[gt.NOTE]:"useNoteToolbar",[gt.TAB]:"useTabToolbar",[gt.ARTICULATION]:"useArticulationToolbar",[gt.ORNAMENT]:"useOrnamentToolbar",[gt.DYNAMIC]:"useDynamicToolbar",[gt.MEASURE]:"useMeasureToolbar",[gt.TEXT]:"useTextToolbar"},re=[gt.NOTE,gt.TAB,gt.ARTICULATION,gt.ORNAMENT,gt.DYNAMIC,gt.MEASURE,gt.TEXT],Se={name:"ToolbarCategories",components:{ToolbarCategory:xt},data(){return{ToolbarId:gt,ToolbarActions:F}},props:{availableToolbarsSet:{type:Object,required:!0}},setup(){const H=(0,u.S)();return{mode:(0,e.EW)(()=>H.mode)}},computed:{filteredList(){return re.filter(H=>!!this.availableToolbarsSet[H])},isFirst(){return this.filteredList[0]===this.mode},isLast(){return this.filteredList[this.filteredList.length-1]===this.mode}}};var B=t(415162),W=t.n(B);const V={};V.scrollableStyle=we(),V.$style=W();const Ee=(0,Ke.A)(Se,[["render",Lt],["__cssModules",V]]),De={name:"MidToolbar",components:{Voices:Te.default,ToolbarCategories:Ee,ReadOnlyMode:It,FlexSpacer:ze},props:{scoreData:{type:Object,required:!0},availableToolbarsSet:{type:Object,required:!0}}};var ot=t(260690),je=t.n(ot);const Ve={};Ve.$style=je();const c=(0,Ke.A)(De,[["render",pe],["__cssModules",Ve]]);function f(H,ue,fe,Ye,Je,it){const _t=(0,e.g2)("AudioControls"),Ut=(0,e.g2)("Voices"),jt=(0,e.g2)("ToolbarCategories"),eo=(0,e.g2)("FlexSpacer"),to=(0,e.g2)("ActionsBlock"),xo=(0,e.g2)("ReadOnlyMode");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(H.$style.root)},[(0,e.bF)(_t,{"score-data":fe.scoreData,"is-native":fe.isNative},null,8,["score-data","is-native"]),(0,e.bF)(Ut,{"score-data":fe.scoreData,"button-style":"nativeSimple"},null,8,["score-data"]),(0,e.bF)(jt,{"available-toolbars-set":fe.availableToolbarsSet},null,8,["available-toolbars-set"]),(0,e.bF)(eo),(0,e.bF)(to,{"score-data":fe.scoreData},null,8,["score-data"]),(0,e.bF)(xo,{"score-data":fe.scoreData},null,8,["score-data"])],2)}function oe(H,ue,fe,Ye,Je,it){const _t=(0,e.g2)("ToolbarSimpleIcon"),Ut=(0,e.g2)("Copy"),jt=(0,e.g2)("Cut"),eo=(0,e.g2)("Paste"),to=(0,e.g2)("LightModeIcon"),xo=(0,e.g2)("DarkModeIcon");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(H.$style.root)},[(0,e.bF)(_t,{"score-data":fe.scoreData,"button-style":"nativeSimple",action:"undo","icon-key":"undo-mob"},null,8,["score-data"]),(0,e.bF)(_t,{"score-data":fe.scoreData,"button-style":"nativeSimple",action:"redo","icon-key":"redo-mob"},null,8,["score-data"]),Ye.range?((0,e.uX)(),(0,e.Wv)(Ut,{key:0,"score-data":fe.scoreData,"button-style":"nativeSimple"},null,8,["score-data"])):(0,e.Q3)("",!0),Ye.range?((0,e.uX)(),(0,e.Wv)(jt,{key:1,"score-data":fe.scoreData,"button-style":"nativeSimple"},null,8,["score-data"])):((0,e.uX)(),(0,e.Wv)(eo,{key:2,"score-data":fe.scoreData,"button-style":"nativeSimple"},null,8,["score-data"])),(0,e.bF)(_t,{"score-data":fe.scoreData,"button-style":"nativeSimple",action:"removeThenGoLeft","icon-key":"remove-mob"},null,8,["score-data"]),it.showDarkModeButton?((0,e.uX)(),(0,e.CE)("button",{key:3,type:"button",class:(0,o.C4)([H.tbButtonStyle.rootNativeSimple]),onClick:ue[0]||(ue[0]=(...Vo)=>Ye.toggleTheme&&Ye.toggleTheme(...Vo))},[(0,e.Lk)("span",{class:(0,o.C4)(H.tbButtonStyle.i)},[Ye.theme==="light"?((0,e.uX)(),(0,e.Wv)(to,{key:0})):Ye.theme==="dark"?((0,e.uX)(),(0,e.Wv)(xo,{key:1})):(0,e.Q3)("",!0)],2)],2)):(0,e.Q3)("",!0)],2)}var Ue=t(468729),Le=t(974001),Pt=t(68926),Ot=t(789051),pt=t(474008),bt=t(941287),ct=t(299035);const Xt={name:"ActionsBlock",props:{scoreData:{type:Object,required:!0}},setup(){const H=(0,Pt.h)(),ue=(0,s.W)();function fe(){H.theme==="light"?H.changeTheme("dark"):H.changeTheme("light")}return{toggleTheme:fe,theme:(0,e.EW)(()=>H.theme),range:(0,e.EW)(()=>ue.range)}},computed:{showDarkModeButton(){return window.flatSettings.darkModeButton}},components:{ToolbarSimpleIcon:ct.default,Copy:Ot.component,Cut:pt.component,Paste:bt.component,DarkModeIcon:Ue.A,LightModeIcon:Le.A}};var zt=t(235398),Kt=t(164002),Ht=t.n(Kt);const kt={};kt.tbButtonStyle=zt.default,kt.$style=Ht();const Vt=(0,Ke.A)(Xt,[["render",oe],["__cssModules",kt]]);function Zt(H,ue,fe,Ye,Je,it){const _t=(0,e.g2)("AudioWarning"),Ut=(0,e.g2)("AudioPlayStop"),jt=(0,e.g2)("AudioRewind"),eo=(0,e.g2)("AudioPause"),to=(0,e.g2)("AudioSettings");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(H.$style.root)},[it.displayWarn?((0,e.uX)(),(0,e.Wv)(_t,{key:0})):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.bF)(Ut,{audio:it.audio},null,8,["audio"]),Ye.playing?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.bF)(jt,{audio:it.audio},null,8,["audio"]),(0,e.bF)(eo,{audio:it.audio},null,8,["audio"])],64)):(0,e.Q3)("",!0)],64)),(0,e.bF)(to,{"is-native":fe.isNative},null,8,["is-native"])],2)}var wt=t(544582);function Gt(H,ue,fe,Ye,Je,it){return(0,e.uX)(),(0,e.CE)("button",{onClick:ue[0]||(ue[0]=_t=>fe.audio.pauseToggle()),"aria-label":"Pause",type:"button",class:(0,o.C4)({[H.buttonStyle.root]:!0,[H.buttonStyle.active]:Ye.pausing})},ue[1]||(ue[1]=[(0,e.Lk)("svg",{inline:"",width:"10",height:"12",viewBox:"0 0 10 12",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{d:"M0 1.002A1 1 0 0 1 1 0h1c.553 0 1 .456 1 1.002v9.996A1 1 0 0 1 2 12H1c-.553 0-1-.456-1-1.002V1.002zm7 0A1 1 0 0 1 8 0h1c.553 0 1 .456 1 1.002v9.996A1 1 0 0 1 9 12H8c-.553 0-1-.456-1-1.002V1.002z",fill:"#E7E8EC","fill-rule":"evenodd",class:"fill"})],-1)]),2)}const $t={name:"AudioPause",props:{audio:{type:Object,required:!0}},setup(){const H=(0,wt.o)();return{pausing:(0,e.EW)(()=>H.pausing)}}},Qt={};Qt.buttonStyle=ht();const P=(0,Ke.A)($t,[["render",Gt],["__cssModules",Qt]]),ye=["disabled"];function Be(H,ue,fe,Ye,Je,it){const _t=(0,e.g2)("StopIcon"),Ut=(0,e.g2)("PlayIcon");return(0,e.uX)(),(0,e.CE)("button",{"aria-label":"Play or Stop",type:"button",onClick:ue[0]||(ue[0]=jt=>fe.audio.playToggle()),"data-cy":"play-button",class:(0,o.C4)(it.rootClasses),disabled:it.disabled},[it.displayLoading?((0,e.uX)(),(0,e.CE)("span",{key:0,class:(0,o.C4)(H.audioStyle.audioPlayLoader)},null,2)):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[Ye.playing?((0,e.uX)(),(0,e.Wv)(_t,{key:0})):((0,e.uX)(),(0,e.Wv)(Ut,{key:1}))],64))],10,ye)}var Et=t(778288),qe=t(992218);const ke={name:"AudioPlayStop",components:{StopIcon:Et.A,PlayIcon:qe.A},props:{audio:{type:Object,required:!0}},setup(){const H=(0,wt.o)(),ue=(0,S.q6)();return{playing:(0,e.EW)(()=>H.playing),soundfontStatus:(0,e.EW)(()=>H.soundfontStatus),rendered:(0,e.EW)(()=>ue.rendered)}},computed:{disabled(){return this.displayLoading||this.soundfontStatus&&this.soundfontStatus!=="loaded"},displayLoading(){return!this.rendered||this.soundfontStatus==="loading"},rootClasses(){return this.displayLoading?[this.audioStyle.rootCommon,this.audioStyle.rootLoading]:[this.audioStyle.rootCommon,this.audioStyle.rootPlay]}}};var St=t(387836),dt=t.n(St);const h={};h.audioStyle=dt();const he=(0,Ke.A)(ke,[["render",Be],["__cssModules",h]]);function We(H,ue,fe,Ye,Je,it){return(0,e.uX)(),(0,e.CE)("button",{onClick:ue[0]||(ue[0]=_t=>fe.audio.goBeginning()),"aria-label":"Play at the beginning",type:"button",class:(0,o.C4)(H.buttonStyle.root)},ue[1]||(ue[1]=[(0,e.Lk)("svg",{inline:"",width:"9",height:"12",viewBox:"0 0 9 12",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{d:"M1 6.83l7.545 5.12a.3.3 0 0 0 .3.017.286.286 0 0 0 .155-.253V.286a.288.288 0 0 0-.155-.254.3.3 0 0 0-.3.018L1 5.17V0H0v12h1V6.83z",fill:"#E7E8EC","fill-rule":"evenodd",class:"fill stoke"})],-1)]),2)}const mt={name:"AudioRewind",props:{audio:{type:Object,required:!0}}},R={};R.buttonStyle=ht();const ve=(0,Ke.A)(mt,[["render",We],["__cssModules",R]]);function Mt(H,ue,fe,Ye,Je,it){return(0,e.uX)(),(0,e.CE)("button",{onClick:ue[0]||(ue[0]=(..._t)=>it.openAudioControls&&it.openAudioControls(..._t)),"data-cy":"open-audio-settings","aria-label":"Audio Controls",type:"button",class:(0,o.C4)(H.buttonStyle.root)},ue[1]||(ue[1]=[(0,e.Lk)("svg",{inline:"",xmlns:"http://www.w3.org/2000/svg",width:"37",height:"42",viewBox:"0 0 37 42"},[(0,e.Lk)("path",{class:"fill","fill-rule":"evenodd",d:"M20.405 13v1.168c3.278.555 5.78 3.398 5.78 6.832 0 3.434-2.502 6.277-5.78 6.832V29c3.919-.566 6.936-3.93 6.936-8 0-4.08-3.017-7.434-6.936-8zm3.468 8a4.033 4.033 0 0 0-3.468-3.988v1.156a2.89 2.89 0 0 1 0 5.664v1.156c1.958-.289 3.468-1.953 3.468-3.988zm-9.249-3.04l3.468-2.162v10.404l-3.468-2.173v-6.07zm-1.156 5.352h-1.734a.575.575 0 0 1-.578-.578v-3.468c0-.324.259-.578.578-.578h1.734v4.624zm-2.312-5.78c-.638 0-1.156.52-1.156 1.156v4.624c0 .636.518 1.156 1.156 1.156h2.312l5.78 3.468V14.064l-5.78 3.468h-2.312z"})],-1)]),2)}var Nt=t(318866),Jt=Object.defineProperty,Wt=Object.defineProperties,ro=Object.getOwnPropertyDescriptors,io=Object.getOwnPropertySymbols,mo=Object.prototype.hasOwnProperty,ho=Object.prototype.propertyIsEnumerable,vo=(H,ue,fe)=>ue in H?Jt(H,ue,{enumerable:!0,configurable:!0,writable:!0,value:fe}):H[ue]=fe,fo=(H,ue)=>{for(var fe in ue||(ue={}))mo.call(ue,fe)&&vo(H,fe,ue[fe]);if(io)for(var fe of io(ue))ho.call(ue,fe)&&vo(H,fe,ue[fe]);return H},go=(H,ue)=>Wt(H,ro(ue));const yo={name:"AudioSettings",props:{isNative:{type:Boolean,required:!0}},methods:go(fo({},(0,m.i0)(Nt.j,["showDialog"])),{openAudioControls(){this.isNative?(0,s.W)().setSelectedType("audioControls"):this.showDialog("mobilePlaybackSettings")}})},ao={};ao.buttonStyle=ht();const bo=(0,Ke.A)(yo,[["render",Mt],["__cssModules",ao]]);var lo=t(744056),Eo=t(785188);const uo=(0,e.pM)({__name:"AudioWarning",setup(H){const ue=(0,wt.o)();return(fe,Ye)=>((0,e.uX)(),(0,e.CE)("button",{type:"button","aria-label":"Retry loading audio playback",class:(0,o.C4)([fe.audioStyle.rootCommon,fe.audioStyle.rootWarn]),onClick:Ye[0]||(Ye[0]=Je=>(0,lo.R1)(ue).setShowRetry())},[(0,e.bF)((0,lo.R1)(Eo.A))],2))}}),Do={};Do.audioStyle=dt();const Mo={name:"AudioControls",components:{AudioWarning:(0,Ke.A)(uo,[["__cssModules",Do]]),AudioPlayStop:he,AudioRewind:ve,AudioPause:P,AudioSettings:bo},props:{isNative:{type:Boolean,required:!0},scoreData:{type:Object,required:!0}},setup(){const H=(0,wt.o)(),ue=(0,S.q6)();return{errorCode:(0,e.EW)(()=>H.errorCode),playing:(0,e.EW)(()=>H.playing),pendingRetry:(0,e.EW)(()=>H.pendingRetry),soundfontStatus:(0,e.EW)(()=>H.soundfontStatus),rendered:(0,e.EW)(()=>ue.rendered),parts:(0,e.EW)(()=>ue.parts)}},computed:{audio(){return this.scoreData.audio},displayWarn(){return this.soundfontStatus==="error"}},methods:{}};var To=t(888839),Uo=t.n(To);const co={};co.$style=Uo();const so=(0,Ke.A)(Mo,[["render",Zt],["__cssModules",co]]),Ao={name:"MidToolbar",components:{AudioControls:so,Voices:Te.default,ToolbarCategories:Ee,ReadOnlyMode:It,ActionsBlock:Vt,FlexSpacer:ze},props:{isNative:{type:Boolean,required:!0},scoreData:{type:Object,required:!0},availableToolbarsSet:{type:Object,required:!0}}};var No=t(766981),ko=t.n(No);const _o={};_o.$style=ko();const So=(0,Ke.A)(Ao,[["render",f],["__cssModules",_o]]);function $(H,ue,fe,Ye,Je,it){const _t=(0,e.g2)("AudioControls"),Ut=(0,e.g2)("FlexSpacer"),jt=(0,e.g2)("ActionsBlock");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(H.$style.root)},[(0,e.bF)(_t,{"score-data":fe.scoreData,"is-native":fe.isNative},null,8,["score-data","is-native"]),(0,e.bF)(Ut),(0,e.bF)(jt,{"score-data":fe.scoreData},null,8,["score-data"])],2)}const ee={name:"TopToolbar",components:{AudioControls:so,ActionsBlock:Vt,FlexSpacer:ze},props:{isNative:{type:Boolean,required:!0},scoreData:{type:Object,required:!0}}};var _e=t(305408),me=t.n(_e);const Ge={};Ge.$style=me();const st=(0,Ke.A)(ee,[["render",$],["__cssModules",Ge]]);var tt=t(680468);function et(){const H={toggleLyricMode:{name:"TextModeNative",props:{action:"toggleLyricMode",textModeTrigger:"lyricLine"}},toggleAnnotationMode:{name:"TextModeNative",props:{action:"toggleAnnotationMode",textModeTrigger:"word"}},tempo:{name:"TextModeNative",props:{action:"tempo",textModeTrigger:"metronome"}},timeSignature:{name:"TextModeNative",props:{action:"timeSignature",textModeTrigger:"timeSignature"}}},ue=(0,tt.c)();return ue.hasNewRomanNumeralsInput||(H.toggleClassicChordMode={name:"TextModeNative",props:{action:"toggleClassicChordMode",textModeTrigger:"classicChord"}}),ue.hasNewJazzChordInput||(H.toggleChordMode={name:"TextModeNative",props:{action:"toggleChordMode",textModeTrigger:"chord"}}),H}const Dt={name:"EditToolbar",props:{isNative:{type:Boolean,required:!0},scoreData:{type:Object,required:!0}},components:{TopToolbar:st,MiddleToolbar:c,TabletToolbar:So,BottomToolbar:K,TouchKeyboard:E.A},data(){let H={};return this.isNative&&(H=et()),{isCreated:!1,toolbars:T(H),filteredToolbars:[]}},setup(){const H=(0,k.k)(),ue=(0,u.S)(),fe=(0,d.U)(),Ye=(0,_.x)(),Je=(0,S.q6)(),it=(0,X.N)(),_t=(0,s.W)(),Ut=(0,N.H)();return{isSmallScreen:(0,e.EW)(()=>H.isSmallScreen),mode:(0,e.EW)(()=>ue.mode),scoreWrite:(0,m.bP)(fe).scoreWrite,hasTab:(0,e.EW)(()=>Ye.hasTab),currentPart:(0,e.EW)(()=>_t.currentPart),currentPartsMetas:(0,e.EW)(()=>_t.currentPartsMetas),tbIsInsertMode:(0,e.EW)(()=>_t.tbIsInsertMode),posTs:(0,e.EW)(()=>_t.posTs),parts:(0,e.EW)(()=>Je.parts),displayMobileEditor:(0,e.EW)(()=>Je.displayMobileEditor),displayMobileNativeEditor:(0,e.EW)(()=>it.displayMobileNativeEditor),allowedActions:(0,e.EW)(()=>Ut.toolbarActions),toolsetReady:(0,e.EW)(()=>Ut.ready)}},computed:{instrumentGroup(){return this.currentPartsMetas?this.currentPartsMetas.group:null},availableToolbarsSet(){const H={};return this.filteredToolbars.forEach(ue=>{H[ue.name]=!0}),H},readyToBuild(){return this.isCreated&&this.toolsetReady&&this.posTs>0},isReady(){return this.scoreData.isReady},displayedToolbarGroups(){const H=this.filteredToolbars.find(fe=>fe.name===this.mode);if(!H)return null;const ue=ae(H,this.componentsCache);return ue.forEach(fe=>{fe.width=1}),ue},ariaLabel(){return this.$t(`editor:toolbarTab.${this.mode}.title`)},hasHomeButton(){return O.A.hasHomeButton}},methods:{buildToolbars(){this.readyToBuild&&(A(this.toolbars),this.filteredToolbars=Ae(this.toolbars))}},watch:{readyToBuild(){this.buildToolbars()},parts(){this.buildToolbars()},currentPart(){this.buildToolbars()},scoreWrite(){this.buildToolbars()},tbIsInsertMode(){this.buildToolbars()},toolsetReady(){this.buildToolbars()},hasTab(){this.buildToolbars()}},created(){this.isCreated=!0,this.componentsCache=new M}};var Bt=t(481548),qt=t.n(Bt);const Yt={};Yt.$style=qt();const no=(0,Ke.A)(Dt,[["render",v],["__cssModules",Yt]]);function Co(H,ue,fe,Ye,Je,it){const _t=(0,e.g2)("AudioControls"),Ut=(0,e.g2)("FlexSpacer"),jt=(0,e.g2)("ReadOnlyMode");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)({[H.$style.root]:!0,[H.$style.hasBottomPadding]:it.hasHomeButton})},[(0,e.bF)(_t,{"score-data":fe.scoreData,"is-native":fe.isNative},null,8,["score-data","is-native"]),(0,e.bF)(Ut),Ye.scoreWrite?((0,e.uX)(),(0,e.Wv)(jt,{key:0,"score-data":fe.scoreData},null,8,["score-data"])):(0,e.Q3)("",!0)],2)}const Io={name:"MidToolbar",components:{AudioControls:so,ReadOnlyMode:It,FlexSpacer:ze},props:{isNative:{type:Boolean,required:!0},scoreData:{type:Object,required:!0}},computed:{hasHomeButton(){return window.flatSettings.hasHomeButton}},setup(){const H=(0,d.U)();return{scoreWrite:(0,m.bP)(H).scoreWrite}}};var Po=t(900889),Oo=t.n(Po);const Ko={};Ko.$style=Oo();const jo={name:"ScoreEditorMobBottom",components:{EditToolbar:no,ROToolbar:(0,Ke.A)(Io,[["render",Co],["__cssModules",Ko]])},props:{isNative:{type:Boolean,required:!0},scoreData:{type:Object,required:!0},adagioQueue:{type:Object,required:!0}},setup(){const{mode:H}=(0,m.bP)((0,u.S)()),{scoreWrite:ue}=(0,m.bP)((0,d.U)()),fe=(0,s.W)();return{mode:H,scoreWrite:ue,isEditionBlocked:(0,e.EW)(()=>fe.isEditionBlocked)}},computed:{hasHomeButton(){return window.flatSettings.hasHomeButton},hasEditUi(){return!this.isEditionBlocked&&this.scoreWrite},hasBottomPadding(){return this.hasHomeButton&&this.hasEditUi&&this.mode!=="note"}}};var Xo=t(750252),zo=t.n(Xo);const Fo={};Fo.$style=zo();const Ho=(0,Ke.A)(jo,[["render",i],["__cssModules",Fo]])},510047:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.fretboard[data-v-25233492]{position:relative;flex:0 0 auto;width:100%;background-color:#08080d}.bottomPadding[data-v-25233492]{padding-bottom:40px}.hasNavInside[data-v-25233492]{padding-top:9px}
`,""]);const d=s},521402:(l,n,t)=>{"use strict";t.d(n,{A:()=>g});var e=t(883892),o=t(909696),r=t(612732),i=t(6645),s=t(361744),d=t(850569),u=t(104662),m=Object.defineProperty,v=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,N=(M,E,I)=>E in M?m(M,E,{enumerable:!0,configurable:!0,writable:!0,value:I}):M[E]=I,k=(M,E)=>{for(var I in E||(E={}))_.call(E,I)&&N(M,I,E[I]);if(v)for(var I of v(E))S.call(E,I)&&N(M,I,E[I]);return M};const O={name:"ToolbarGroup",props:{groups:{type:Array,required:!0},hasMore:{type:Boolean,default:!1},scoreData:{type:Object,required:!0}},setup(){const{mode:M}=(0,i.bP)((0,e.S)()),{isSmallScreen:E}=(0,i.bP)((0,r.k)()),{displayMobileEditor:I}=(0,i.bP)((0,o.q6)());return{mode:M,isSmallScreen:E,displayMobileEditor:I}},computed:{groupClasses(){if(!this.displayMobileEditor)return{[this.$style.groupDesktop]:!0};const M={[this.$style.groupMobile]:!0};return this.mode==="note"&&this.isSmallScreen&&(M[this.$style.singleLine]=!0),M}},render(){const M=[];for(let E=0;E<this.groups.length;E++){const I=this.groups[E];E>0&&I.width>0&&M.push((0,s.h)(u.default));const C=[];I.components.forEach(te=>{te.displayed&&C.push((0,s.h)(te.component,k({scoreData:this.scoreData},te.props)))});const Z=k({"tb-group":!0},this.groupClasses);(I.cssClasses||[]).forEach(te=>{Z[te]=!0}),M.push((0,s.h)("div",{class:Z},C))}return this.hasMore&&M.push((0,s.h)(u.default),(0,s.h)(d.default)),(0,s.h)("div",{},M)}};var X=t(749226),L=t.n(X),y=t(938793);const j={};j.$style=L();const g=(0,y.A)(O,[["__cssModules",j]])},527058:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.contentRoot_fYAPI{padding:10px 12px}ul>li>button.itemCommon_R8bkR{width:100%;padding:0;display:flex;align-items:center;justify-content:center;position:relative;height:42px;border:0;background:transparent;font-weight:400;white-space:nowrap}ul>li>button.itemCommon_R8bkR.active .fill{fill:var(--f-primary)}ul>li>button.itemCommon_R8bkR.active .stroke{stroke:var(--f-primary)}ul>li>button.itemCommon_R8bkR.disabled{cursor:not-allowed}ul>li>button.itemCommon_R8bkR.disabled .fill{fill:var(--f-grey-disabled-container)}ul>li>button.itemCommon_R8bkR.disabled .stroke{stroke:var(--f-grey-disabled-container)}ul>li>button.itemDekstop_RT_nN .fill{fill:var(--f-subdue)}ul>li>button.itemDekstop_RT_nN .stroke{stroke:var(--f-subdue)}ul>li>button.itemMobile_qFJUs .fill{fill:var(--f-ink)}ul>li>button.itemMobile_qFJUs .stroke{stroke:var(--f-ink)}*[data-color-mode=dark] .root_BB1AB [role=menu]{background-color:var(--f-bg-dark)}*[data-color-mode=dark] .root_BB1AB [role=menu] ul>li button .fill{fill:var(--f-subdue-40)}*[data-color-mode=dark] .root_BB1AB [role=menu] ul>li button .stroke{stroke:var(--f-subdue-40)}*[data-color-mode=dark] .root_BB1AB [role=menu] ul>li button.active .fill{fill:var(--f-primary)}*[data-color-mode=dark] .root_BB1AB [role=menu] ul>li button.active .stroke{stroke:var(--f-primary)}
`,""]),s.locals={contentRoot:"contentRoot_fYAPI",itemCommon:"itemCommon_R8bkR",itemDekstop:"itemDekstop_RT_nN",itemMobile:"itemMobile_qFJUs",root:"root_BB1AB"};const d=s},531070:(l,n,t)=>{"use strict";t.d(n,{A:()=>e.A,h:()=>o});var e=t(815e3);const o=e.A},537408:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.fretboard-nav .enharmonic-options svg{transform:scale(.6)}.fretboard-nav .enharmonic-options path{fill:var(--f-ink)}.fretboard-nav .enharmonic-options.active path{fill:#fff}
`,""]);const d=s},537587:(l,n,t)=>{"use strict";t.d(n,{A:()=>_});var e=t(823828),o=t(645369),r=t.n(o),i=t(744056),s=t(361744),d=t(591340),u=t(990244),m=(S,N,k)=>new Promise((O,X)=>{var L=w=>{try{j(k.next(w))}catch(g){X(g)}},y=w=>{try{j(k.throw(w))}catch(g){X(g)}},j=w=>w.done?O(w.value):Promise.resolve(w.value).then(L,y);j((k=k.apply(S,N)).next())});const v=r()("flat:rt");class _{constructor({endpoint:N,accessToken:k,accountId:O,reqAs:X,scoreData:L,interaction:y,queue:j,storageProvider:w,logError:g,fake:M=!1,multiTabs:E=!1,deviceId:I=null,deviceType:C=null}){this.endpoint=N,this.accessToken=k,this.accountId=O,this.reqAs=X,this.interaction=y,this.scoreData=L||y.scoreData,this.queue=j,this.storageProvider=w,this.fake=M,this.multiTabs=E,this.exclusiveConnection=!1,this.logError=g||(Z=>{v(Z)}),this.instanceTime=+new Date,this.deviceId=I,this.deviceType=C}setup(){return this.fake?this.setupFake():this.setupRegular()}setupFake(){return m(this,null,function*(){const N=t(824467).A;return this.rt=(0,i.IG)(new N({accountId:this.accountId,revisionId:this.scoreData.getRevisionId(),scoreId:this.scoreData.scoreId,sharingKey:this.scoreData.sharingKey,scoreData:this.scoreData,queue:this.queue,logError:this.logError})),yield this.rt.setup(),this.scoreData.setRt(this.rt),(0,d.U)().setState({key:"stRtReady",value:!0}),this.rt})}setupRegular(){return m(this,null,function*(){const N=t(297534).A,{setParentGroupId:k}=(0,u.s)(),O=g=>{k(g)};this.rt=(0,i.IG)(new N({exclusiveConnection:this.exclusiveConnection,endpoint:this.endpoint,accessToken:this.accessToken,accountId:this.accountId,reqAs:this.reqAs,revisionId:this.scoreData.getRevisionId(),scoreId:this.scoreData.scoreId,sharingKey:this.scoreData.sharingKey,scoreData:this.scoreData,queue:this.queue,storageProvider:this.storageProvider,logError:this.logError,deviceId:this.deviceId,deviceType:this.deviceType,groupIdWatcher:O})),this.multiTabs&&this.watchMultiTabs(),yield this.rt.setup();const X=(0,d.U)();X.setState({key:"stRtReady",value:!0}),this.rt.on("rights",g=>{v("rights = %s",g),X.setState({key:"scoreWrite",value:g==="rw"})});const{setOnline:L,setRcvAck:y,memoryOnline:j}=(0,u.s)();this.rt.on("synced",g=>{v("synced"),X.setState({key:"stRtReady",value:!0}),L(!0),g.n&&y()});const w=()=>{const g=(0,u.s)();(0,s.EW)(()=>g.online).value&&(v("disconnected"),L(!1))};return this.rt.on("connectError",w),this.rt.on("disconnect",w),this.rt.on("inMemoryOnly",()=>{v("inMemoryOnly"),X.setState({key:"stRtReady",value:!1}),j()}),this.rt.on("ack",()=>{v("ack"),y()}),this.interaction&&(this.rt.on("processReceivedAction",()=>{this.interaction.cursor.bumpFocus()}),this.rt.on("collaborators",g=>{const M=g.joined||g.left,E=this.interaction.cursor;E.collaborators&&(g.joined?(E.collaborators.setOnline(M),E.addGuys(M)):g.left&&(E.collaborators.setOffline(M),E.delGuys(M)),M&&(0,e.k)().get(M))}),this.rt.on("position",g=>{g.userId!==this.accountId&&this.interaction.cursor.changeFocus(g,{id:g.userId})})),yield this.rt.queue.add(this.rt.synchronizeScoreWithStoredGroups.bind(this.rt)),this.scoreData.setRt(this.rt),this.rt})}watchMultiTabs(){v("will watch for multi tabs");const N=k=>{try{const O=JSON.parse(k.data);if(O.type!=="scoreFocus"||O.score!==this.scoreData.scoreId){v("focus: != msg or scoreId");return}if(O.rt===this.rt.instanceId)return;if(O.rtTime>this.instanceTime)v("older tab, need to be the only one"),this.sendFocusMessage();else{v("stop own instance, recent"),this.rt.disconnect(),this.rt.disconnectStorage();const X=(0,d.U)();X.setState({key:"stRtReady",value:!1}),X.setState({key:"stScoreWrite",value:!1}),(0,u.s)().setGlobalError(4090)}}catch(O){v("rcv from sw, not for me: %o",O)}};"serviceWorker"in navigator&&navigator.serviceWorker.controller&&typeof navigator.serviceWorker.addEventListener=="function"?(this.sendFocusMessage(),navigator.serviceWorker.addEventListener("message",N)):(v("no sw, require exclusive connection"),this.exclusiveConnection=!0)}sendFocusMessage(){navigator.serviceWorker.controller.postMessage(JSON.stringify({type:"scoreFocus",score:this.scoreData.scoreId,rt:this.rt.instanceId,rtTime:this.instanceTime}))}}},540850:(l,n,t)=>{var e=t(59541);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("20f88c67",e,!0,{})},547574:(l,n,t)=>{"use strict";t.d(n,{A:()=>ne});var e=t(361744),o=t(538065),r=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(p,le,A)=>le in p?r(p,le,{enumerable:!0,configurable:!0,writable:!0,value:A}):p[le]=A,m=(p,le)=>{for(var A in le||(le={}))s.call(le,A)&&u(p,A,le[A]);if(i)for(var A of i(le))d.call(le,A)&&u(p,A,le[A]);return p};const v=["height","width"];function _(p,le,A,de,Ae,be){return(0,e.uX)(),(0,e.CE)("svg",{class:(0,o.C4)(m({[p.$style.root]:!0},be.selectedClass)),height:be.height,width:Ae.width,ref:"svg"},null,10,v)}var S=t(342023),N=t(669834),k=t(331751),O=t(200675),X=t(706627),L=t(732868),y=t(614653),j=t(624740),w=t(864409),g=t(69587),M=t(66469),E=t(471633),I=t(478044);const C=18,Z=88,te=52,U=34,b={name:"ChordPreview",components:{},props:{root:{type:Object,required:!0},inversion:{type:Number,default:0},quality:{type:Object,default(){return E.Ay.MAJOR}},step:{type:String,default:null},isRelative:{type:Boolean,default:!1},smallHeight:{type:Boolean,default:!1},relativeRoot:{type:Object,default:null},relativeQuality:{type:Object,default:null}},data(){return{width:Z}},computed:{height(){return this.smallHeight?U:te},hash(){return`${this.root.degree}${this.root.alter}${this.quality.key}${this.inversion}${this.relativeHash}`},relativeHash(){return this.relativeRoot?`${this.relativeRoot.degree}${this.relativeRoot.alter}${this.relativeQuality.key}`:"null"},selectedClass(){const p={};return this.step===I.A.ROOT&&(p[this.$style.stepRoot]=!0),this.step===I.A.QUALITY&&(p[this.$style.stepQuality]=!0),this.step===I.A.INVERSION&&(p[this.$style.stepInversion]=!0),p}},watch:{hash(){this.drawChord()}},methods:{drawChord(){this.clearSvg(),w.default.getDocument()||w.default.setDocument(window.document);let p=this.root.degree;if(this.quality.mode===M.A.MAJOR)p=p.toUpperCase();else if(this.quality.mode===M.A.MINOR)p=p.toLowerCase();else throw new Error(`Invalid mode: ${this.quality.mode}`);p==="n"&&(p="N");const le=this.root.alter,A=this.quality.adagio,de=this.inversion,Ae=y.default.createClassic(p,A,de);if(y.default.setAlter(Ae,le),y.default.setTimePos(Ae,0),y.default.setHarmonyUuid(Ae,null),this.relativeRoot){let Ze=this.relativeRoot.degree;this.relativeQuality===E.Ay.MAJOR&&(Ze=Ze.toUpperCase()),y.default.setSecondaryFunction(Ae,Ze);const nt=this.relativeRoot.alter;y.default.setSecondaryAlter(Ae,nt);const Ke=this.relativeQuality.adagio;y.default.setSecondaryKind(Ae,Ke)}const ae=new L.A().build(Ae);if(this.isRelative){const Ze=new X.A("\xA0","");ae.symbols.unshift(Ze);const nt=new O.A("/");nt.name="slash",ae.symbols.unshift(nt)}ae.setDrawingContext(this.drawingContext);const ie=new S.default(this.$el);ae.setParent(ie);const Ne=ae.getWidth(),$e=ae.getHeight(),Pe=this.width/2-Ne/2,we=this.height/2-$e/2;ae.setPosX(Pe),ae.setPosY(we),ae.draw()},clearSvg(){const p=this.$el;for(;p.firstChild;)p.removeChild(p.lastChild)}},mounted(){const p=new N.A(this.$el),le=j.default,A={harmonyText:{"font-family":"Century Schoolbook L","font-size":"2.8sp"}};this.drawingContext=new k.A(p,le,C,g.S,A),this.drawChord()}};var z=t(283089),ce=t.n(z),se=t(938793);const x={};x.$style=ce();const ne=(0,se.A)(b,[["render",_],["__cssModules",x]])},551130:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.input_nEPNj{background-color:var(--f-white);border:1px solid var(--border-neutral-tertiary);border-radius:var(--radius-standard);font-family:inherit;width:100%;font-size:14px;line-height:20px;color:var(--f-ink)}.input_nEPNj:focus,.input_nEPNj:active{border-color:var(--f-primary)}.input_nEPNj::placeholder{color:var(--f-subdue)}.input-x-small_N447F{padding:1px 8px}.input-small_VKAZE{padding:6px 8px}.input-medium_KwGOH{padding:9px 8px}.input-large_fmF4T{padding:13px 8px}.input_nEPNj[aria-disabled=true]{background-color:var(--f-bg-1);color:var(--f-grey-disabled-content)}.input_nEPNj[aria-invalid=true]{border-color:var(--f-safe-red)}.root_fn7St{display:flex;padding:8px;gap:8px;min-width:300px;max-width:420px;align-items:center}.root_fn7St .chordPreview_jOx3F{flex-shrink:0}.root_fn7St .input_nEPNj{flex-shrink:1}.root_fn7St.rootWide_TUmFd{max-width:initial}button.roundButton_y0M7O{display:flex;border-width:0;background-color:var(--f-subdue-10);color:var(--f-subdue);border-radius:50%;padding:0;width:24px;height:24px;justify-content:center;align-items:center;flex-shrink:0}.rotateIcon__tPJ1{transform:rotate(90deg)}.rotateIcon__tPJ1.reverse_CneLV{transform:rotate(-90deg)}*[data-color-mode=dark] button.roundButton_y0M7O{background-color:var(--f-ink);color:var(--f-subdue-40)}*[data-color-mode=dark] .ddnKeysigInner_LEp5u .stroke{stroke:var(--f-subdue)}*[data-color-mode=dark] .ddnKeysigInner_LEp5u .fill{fill:var(--f-subdue)}*[data-color-mode=dark] input.input_nEPNj{color:var(--f-subdue-40);background-color:var(--f-bg-dark)}
`,""]),s.locals={input:"input_nEPNj","input-x-small":"input-x-small_N447F","input-small":"input-small_VKAZE","input-medium":"input-medium_KwGOH","input-large":"input-large_fmF4T",root:"root_fn7St",chordPreview:"chordPreview_jOx3F",rootWide:"rootWide_TUmFd",roundButton:"roundButton_y0M7O",rotateIcon:"rotateIcon__tPJ1",reverse:"reverse_CneLV",ddnKeysigInner:"ddnKeysigInner_LEp5u"};const d=s},551636:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>L});var e=t(361744),o=t(538065);function r(y,j,w,g,M,E){const I=(0,e.g2)("ddn-inner-multi-measure-rest"),C=(0,e.g2)("ToolbarComplexDdn");return(0,e.uX)(),(0,e.Wv)(C,{ref:"ddn",class:(0,o.C4)(["tb-mmr tb-rehearsal",y.ddnStyle.root]),active:E.active,"icon-key":"multiMeasureRest","mobile-text":E.mobileText,"power-width":30,"show-power-only":E.showPowerOnly,action:"addMultiMeasureRest","ddn-opts":E.ddnOpts,"ddn-classes":E.classesListToObject(["ddn-content","bottom",...this.contentClasses]),"tablet-ddn":!0},{default:(0,e.k6)(()=>[(0,e.bF)(I,{"score-data":w.scoreData,onClose:j[0]||(j[0]=Z=>E.onClose())},null,8,["score-data"])]),_:1},8,["class","active","mobile-text","show-power-only","ddn-opts","ddn-classes"])}var i=t(121648),s=t(909696),d=t(763939),u=t(736600),m=t(13626),v=t(361826);const _={name:"MultiMeasureRest",width:66,props:{scoreData:{type:Object,required:!0}},components:{DdnInnerMultiMeasureRest:u.A,ToolbarComplexDdn:m.default},setup(){const y=(0,d.F)(),j=(0,s.q6)(),w=(0,i.W)();return{accountFeatures:(0,e.EW)(()=>y.accountFeatures),displayMobileEditor:(0,e.EW)(()=>j.displayMobileEditor),tbMultiMeasureRest:(0,e.EW)(()=>w.tbMultiMeasureRest)}},computed:{ddnOpts(){return{placement:this.ddnPlacement,positionFixed:!0}},active(){return this.tbMultiMeasureRest!==null},ddnPlacement(){return this.displayMobileEditor?"top":"bottom"},mobileText(){return this.$t("editor:multiMeasureRest.title")},showPowerOnly(){return!this.accountFeatures.mmr},contentClasses(){return this.displayMobileEditor?[this.ddnStyle.contentCommon,this.ddnStyle.contentMobile]:[this.ddnStyle.contentCommon]}},methods:{onClose(){this.$refs.ddn.onClose()},classesListToObject:v.default}};var S=t(247477),N=t(384188),k=t(938793);const O={};O.powerStyle=S.default,O.ddnStyle=N.default;const L=(0,k.A)(_,[["render",r],["__cssModules",O]])},556251:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.ddnKeysigInner_ilsra{display:flex;flex-wrap:wrap;align-items:center;max-width:450px;max-height:calc(100vh - 170px);overflow:auto}@media (max-width: 465px){.ddnKeysigInner_ilsra{max-width:360px}}@media (max-width: 370px){.ddnKeysigInner_ilsra{max-width:270px}}.ddnKeysigInner_ilsra a{display:flex;padding:15px}.ddnKeysigInner_ilsra svg{width:60px;height:60px;margin:-10px 0}.ddnKeysigInner_ilsra .stroke{stroke:var(--f-ink)}.ddnKeysigInner_ilsra .fill{fill:var(--f-ink)}.ddnKeysigInner_ilsra .allParts_KVoQ0{margin:0 0 10px 15px}.BottomSheets .ddnKeysigInner_ilsra{max-width:unset}*[data-color-mode=dark] .ddnKeysigInner_ilsra .stroke{stroke:var(--f-subdue)}*[data-color-mode=dark] .ddnKeysigInner_ilsra .fill{fill:var(--f-subdue)}
`,""]),s.locals={ddnKeysigInner:"ddnKeysigInner_ilsra",allParts:"allParts_KVoQ0"};const d=s},560150:(l,n,t)=>{"use strict";t.d(n,{A:()=>k});var e=t(361744),o=t(538065);const r=["onClick"],i=["onClick"];function s(O,X,L,y,j,w){const g=(0,e.g2)("toggle"),M=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(O.$style.ddnKeysigInner)},[(0,e.bo)(((0,e.uX)(),(0,e.CE)("a",{key:0,onClick:X[0]||(X[0]=E=>w.exec("0"))})),[[M,j.icons["keysign-0"],"svg"]]),((0,e.uX)(),(0,e.CE)(e.FK,null,(0,e.pI)([1,2,3,4,5,6,7],E=>(0,e.bo)((0,e.Lk)("a",{key:`s${E}`,onClick:I=>w.exec(`S${E}`)},null,8,r),[[M,j.icons[`keysign-s${E}`],"svg"]])),64)),((0,e.uX)(),(0,e.CE)(e.FK,null,(0,e.pI)([1,2,3,4,5,6,7],E=>(0,e.bo)((0,e.Lk)("a",{key:`b${E}`,onClick:I=>w.exec(`B${E}`)},null,8,i),[[M,j.icons[`keysign-b${E}`],"svg"]])),64)),(0,e.bF)(g,{class:(0,o.C4)(O.$style.allParts),id:"t-allParts",modelValue:j.allParts,"onUpdate:modelValue":X[1]||(X[1]=E=>j.allParts=E)},{default:(0,e.k6)(()=>[(0,e.eW)((0,o.v_)(O.$t("flat:key-signature.concert-pitch")),1)]),_:1},8,["class","modelValue"])],2)}var d=t(998219);const u={name:"DdnInnerKeysign",emits:["close"],props:{scoreData:{type:Object,required:!0}},data(){return{allParts:!0,icons:d.A}},methods:{exec(O){this.scoreData.scoreActions.executePublicAction(`setKey${O}`,{allParts:this.allParts}),this.$emit("close")}}};var m=t(497660),v=t.n(m),_=t(938793);const S={};S.$style=v();const k=(0,_.A)(u,[["render",s],["__cssModules",S]])},560581:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.power-badge_uFsPX{height:16px;width:16px}
`,""]),s.locals={"power-badge":"power-badge_uFsPX"};const d=s},565743:(l,n,t)=>{var e=t(733718);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("28d118b2",e,!0,{})},566357:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>L});var e=t(361744),o=t(538065);function r(y,j,w,g,M,E){const I=(0,e.g2)("checkbox"),C=(0,e.g2)("FRadio"),Z=(0,e.g2)("f-button");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(["tb-split-staff",y.$style.root])},[(0,e.bF)(I,{id:"removeSource",modelValue:M.removeSource,"onUpdate:modelValue":j[0]||(j[0]=te=>M.removeSource=te)},{default:(0,e.k6)(()=>[(0,e.eW)((0,o.v_)(y.$t("editor:splitStaff.removeSource")),1)]),_:1},8,["modelValue"]),E.canChooseStructure?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.bF)(C,{id:E.StructureType.STAFF,modelValue:E.splitStaffType,"onUpdate:modelValue":j[1]||(j[1]=te=>E.splitStaffType=te),value:E.StructureType.STAFF},{default:(0,e.k6)(()=>[(0,e.eW)((0,o.v_)(y.$t("editor:splitStaff.structureStaff")),1)]),_:1},8,["id","modelValue","value"]),(0,e.bF)(C,{id:E.StructureType.PART,modelValue:E.splitStaffType,"onUpdate:modelValue":j[2]||(j[2]=te=>E.splitStaffType=te),value:E.StructureType.PART},{default:(0,e.k6)(()=>[(0,e.eW)((0,o.v_)(y.$t("editor:splitStaff.structurePart")),1)]),_:1},8,["id","modelValue","value"])],64)):(0,e.Q3)("",!0),(0,e.Lk)("div",{class:(0,o.C4)(y.$style.buttons)},[(0,e.bF)(Z,{type:"button",onClick:E.validate,"default-text":"editor:splitStaff.validate",theme:E.btnTheme},null,8,["onClick","theme"])],2)],2)}var i=t(167090),s=t(541381),d=t(727137),u=t(531070),m=t(763939);const v="splitStaff",_={name:"SplitStaff",emits:["close"],props:{scoreData:{type:Object,required:!0}},components:{FRadio:u.h},computed:{StructureType(){return s.A},splitStaffType:{get(){return this.structureType},set(y){this.structureType=y}},canChooseStructure(){return!this.isUnpitchedPart&&!this.hasTab},enabledAdvancedVoices(){return this.accountFeatures.advancedVoices},btnTheme(){return this.enabledAdvancedVoices?"fill":"fill-orange"}},data(){return{structureType:s.A.PART,removeSource:!0}},setup(){const y=(0,m.F)(),j=(0,d.x)();return{accountFeatures:(0,e.EW)(()=>y.accountFeatures),isUnpitchedPart:(0,e.EW)(()=>j.isUnpitchedPart),hasTab:(0,e.EW)(()=>j.hasTab)}},methods:{validate(){let y=this.structureType;this.canChooseStructure||(y=s.A.PART);const j={structureType:y,removeSource:this.removeSource,splitPolicy:i.A.MEASURE};this.scoreData.scoreActions.executePublicAction(v,j),this.$emit("close")}}};var S=t(838074),N=t.n(S),k=t(938793);const O={};O.$style=N();const L=(0,k.A)(_,[["render",r],["__cssModules",O]])},570315:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.pickerWrapper__Ikqo{padding:10px;min-width:116px}body.touch .pickerWrapper__Ikqo{min-width:212px}.colors_fruKT{display:flex;flex-wrap:wrap;max-width:96px;background-color:#fff}.colors_fruKT.isBig_A0E1M{max-width:192px}.colors_fruKT.isBig_A0E1M .colorItem_IPRgD{width:48px;height:48px}.colorItem_IPRgD{width:24px;height:24px;border:0;padding:0;margin:0}.colorItem_IPRgD.cwht_hr5wq{border-top:1px solid var(--f-divider);border-right:1px solid var(--f-divider)}.customColors_AyYSd{position:relative}.customColors_AyYSd input[type=color]{opacity:0;width:100px;position:absolute}.customColors_AyYSd .customLabel_RZoru{line-height:22px;font-size:13px;letter-spacing:.5px;font-weight:500;color:var(--f-subdue)}
`,""]),s.locals={pickerWrapper:"pickerWrapper__Ikqo",colors:"colors_fruKT",isBig:"isBig_A0E1M",colorItem:"colorItem_IPRgD",cwht:"cwht_hr5wq",customColors:"customColors_AyYSd",customLabel:"customLabel_RZoru"};const d=s},573825:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>d,width:()=>s});var e=t(121648),o=t(674548),r=t(361744),i=t(243564);const s=70,d=(0,r.pM)({name:"TbEnding",props:{scoreData:{type:Object,required:!0}},setup(u){const m=[{value:1,action:"toggleEnding1"},{value:2,action:"toggleEnding2"},{value:3,action:"toggleEnding3"},{value:4,action:"toggleEnding4"}],v=(0,e.W)();return()=>(0,r.h)(i.default,{scoreData:u.scoreData,css:"tb-ending",mainText:o.MR.t("editor:ending.title"),items:m,active:v.measureInfo.ending,defaultActionIcon:"toggleEnding1"})}})},581962:(l,n,t)=>{"use strict";t.d(n,{A:()=>r});var e=t(681670),o=t(359363);const r={isBaseSame(i,s){return!i&&!s?!0:!i&&s||!s&&i?!1:e.A.isSame(i,s)},isDegreeSame(i,s){return!i&&!s?!0:!i&&s||!s&&i?!1:o.A.isSame(i,s)}}},584314:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>O,width:()=>k});var e=t(121648),o=t(361744),r=t(766144),i=Object.defineProperty,s=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,_=(X,L,y)=>L in X?i(X,L,{enumerable:!0,configurable:!0,writable:!0,value:y}):X[L]=y,S=(X,L)=>{for(var y in L||(L={}))m.call(L,y)&&_(X,y,L[y]);if(u)for(var y of u(L))v.call(L,y)&&_(X,y,L[y]);return X},N=(X,L)=>s(X,d(L));const k=61,O=(0,o.pM)({name:"TbTie",props:{scoreData:{type:Object,required:!0}},setup(X){const L={css:"tb-tie",addValue:{value:"tie",action:"tie",icon:"tie"},removeValue:{value:"removeTie",action:"removeTie",icon:"removeTie"}},y=(0,e.W)(),j=(0,o.EW)(()=>{const g=[];return y.tbHeadTied&&g.push({value:"flipTie",action:"flipTie",icon:"flipTie"}),g}),w=(0,o.EW)(()=>{const g=[];return y.tbHeadTieFlipped&&g.push("flipTie"),g});return()=>(0,o.h)(r.default,N(S({scoreData:X.scoreData},L),{items:j.value,active:y.noteInfo.isTied,activeOptions:w.value}))}})},586705:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_Hwh0M{display:flex;width:100%}
`,""]),s.locals={root:"root_Hwh0M"};const d=s},588484:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.wrapper_B_iSI{display:flex;overflow-x:auto;padding:0 8px;margin:0 -8px}.root_OqMG2{display:flex;flex-grow:1;gap:4px;padding:4px;border-radius:4px;background-color:var(--f-ink-5)}.root_OqMG2>:first-child{padding-left:0}.root_OqMG2>:last-child{padding-right:0}.root_OqMG2 .separator{align-self:center}*[data-color-mode=dark] .root_OqMG2{background-color:var(--f-bg-dark)}
`,""]),s.locals={wrapper:"wrapper_B_iSI",root:"root_OqMG2"};const d=s},588892:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>s});var e=t(406112),o=t(413385),r=t(938793);const s=(0,r.A)(o.A,[["render",e.X]])},589552:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=65,s=(0,o.pM)({name:"TbPedal",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>u.selectedType==="pedal"||u.noteInfo.pedal&&u.noteInfo.pedal.staffIdx===u.staffIdx);return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:m.value})}})},590353:(l,n,t)=>{var e=t(853408);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("573f70dc",e,!0,{})},591781:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`html .toolbarPowerBox_VARrr{height:calc(100% - 12px);position:absolute;border-radius:4px;border:1px solid var(--f-power-border)}html .toolbarPowerIcon_NDLF5{width:12px;height:12px;position:absolute;top:-5px;right:-4px}html button.toolbarMobilePowerBox_A0WqR{border:1px solid var(--f-power-border)}html button.toolbarMobilePowerBox_A0WqR .toolbarPowerIcon_NDLF5{top:4px;right:4px}*[data-color-mode=dark] button.toolbarMobilePowerBox_A0WqR{border:1px solid var(--f-power-border)}
`,""]),s.locals={toolbarPowerBox:"toolbarPowerBox_VARrr",toolbarPowerIcon:"toolbarPowerIcon_NDLF5",toolbarMobilePowerBox:"toolbarMobilePowerBox_A0WqR"};const d=s},593636:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.piano-keyboard.bottomPadding_nZgs6{padding-bottom:40px;flex:0 0 calc(40px + 108px + var(--sab));height:calc(40px + 108px + var(--sab))}
`,""]),s.locals={bottomPadding:"bottomPadding_nZgs6"};const d=s},599322:(l,n,t)=>{"use strict";t.d(n,{$:()=>i,d:()=>d});var e=t(985734);const o=[{patterns:["min","-"],requireStrings:["6","9"],quality:e.Ay.MINOR_69},{patternsSensitive:["m"],requireStrings:["6","9"],quality:e.Ay.MINOR_69},{requireStrings:["7","6"],quality:e.Ay.DOMINANT_7_6},{requireStrings:["6","9"],quality:e.Ay.SIX_NINE},{patterns:["h","/","\xF8"],requireStrings:["13"],quality:e.Ay.HALF_DIMINISHED_13},{patterns:["h","/","\xF8"],requireStrings:["11"],quality:e.Ay.HALF_DIMINISHED_11},{patterns:["h","/","\xF8"],requireStrings:["9"],quality:e.Ay.HALF_DIMINISHED_9},{patterns:["h","/","\xF8"],quality:e.Ay.HALF_DIMINISHED_7},{patterns:["maj"],requireStrings:["6"],quality:e.Ay.MAJOR_6},{patternsSensitive:["M"],requireStrings:["6"],quality:e.Ay.MAJOR_6},{patterns:["min","-"],requireStrings:["6"],quality:e.Ay.MINOR_6},{patternsSensitive:["m"],requireStrings:["6"],quality:e.Ay.MINOR_6},{requireStrings:["6"],quality:e.Ay.MAJOR_6},{patterns:["minMaj","mmaj","mm","minm"],requireStrings:["13"],quality:e.Ay.MINOR_MAJOR_13},{patterns:["minMaj","mmaj","mm","minm"],requireStrings:["11"],quality:e.Ay.MINOR_MAJOR_11},{patterns:["minMaj","mmaj","mm","minm"],requireStrings:["9"],quality:e.Ay.MINOR_MAJOR_9},{patterns:["minMaj","mmaj","mm","minm"],quality:e.Ay.MINOR_MAJOR_7},{patternsSensitive:["aM","augM","+M"],requireStrings:["13"],quality:e.Ay.AUGMENTED_MAJOR_13},{patterns:["amaj","augmaj","+maj"],requireStrings:["13"],quality:e.Ay.AUGMENTED_MAJOR_13},{patternsSensitive:["aM","augM","+M"],requireStrings:["11"],quality:e.Ay.AUGMENTED_MAJOR_11},{patterns:["amaj","augmaj","+maj"],requireStrings:["11"],quality:e.Ay.AUGMENTED_MAJOR_11},{patternsSensitive:["aM","augM","+M"],requireStrings:["9"],quality:e.Ay.AUGMENTED_MAJOR_9},{patterns:["amaj","augmaj","+maj"],requireStrings:["9"],quality:e.Ay.AUGMENTED_MAJOR_9},{patternsSensitive:["aM","augM","+M"],requireStrings:["7"],quality:e.Ay.AUGMENTED_MAJOR_7},{patterns:["amaj","augmaj","+maj"],requireStrings:["7"],quality:e.Ay.AUGMENTED_MAJOR_7},{patterns:["d","dim","o"],requireStrings:["13"],quality:e.Ay.DIMINISHED_13},{patterns:["d","dim","o"],requireStrings:["11"],quality:e.Ay.DIMINISHED_11},{patterns:["d","dim","o"],requireStrings:["9"],quality:e.Ay.DIMINISHED_9},{patterns:["d","dim","o"],requireStrings:["7"],quality:e.Ay.DIMINISHED_7},{patterns:["maj"],requireStrings:["13"],quality:e.Ay.MAJOR_13},{patternsSensitive:["M"],requireStrings:["13"],quality:e.Ay.MAJOR_13},{patterns:["^"],quality:e.Ay.MAJOR_13},{patterns:["min","-"],requireStrings:["13"],quality:e.Ay.MINOR_13},{patternsSensitive:["m"],requireStrings:["13"],quality:e.Ay.MINOR_13},{patterns:["maj"],requireStrings:["11"],quality:e.Ay.MAJOR_11},{patternsSensitive:["M"],requireStrings:["11"],quality:e.Ay.MAJOR_11},{patterns:["^"],quality:e.Ay.MAJOR_11},{patterns:["min","-"],requireStrings:["11"],quality:e.Ay.MINOR_11},{patternsSensitive:["m"],requireStrings:["11"],quality:e.Ay.MINOR_11},{patterns:["maj"],requireStrings:["9"],quality:e.Ay.MAJOR_9},{patternsSensitive:["M"],requireStrings:["9"],quality:e.Ay.MAJOR_9},{patterns:["^"],quality:e.Ay.MAJOR_9},{patterns:["min","-"],requireStrings:["9"],quality:e.Ay.MINOR_9},{patternsSensitive:["m"],requireStrings:["9"],quality:e.Ay.MINOR_9},{patterns:["maj"],requireStrings:["7"],quality:e.Ay.MAJOR_7},{patternsSensitive:["M"],requireStrings:["7"],quality:e.Ay.MAJOR_7},{patterns:["^"],quality:e.Ay.MAJOR_7},{patterns:["min","-"],requireStrings:["7"],quality:e.Ay.MINOR_7},{patternsSensitive:["m"],requireStrings:["7"],quality:e.Ay.MINOR_7},{patterns:["a","aug","+"],requireStrings:["13"],quality:e.Ay.AUGMENTED_13},{patterns:["a","aug","+"],requireStrings:["11"],quality:e.Ay.AUGMENTED_11},{patterns:["a","aug","+"],requireStrings:["9"],quality:e.Ay.AUGMENTED_9},{patterns:["a","aug","+"],requireStrings:["7"],quality:e.Ay.AUGMENTED_7},{requireStrings:["13"],quality:e.Ay.DOMINANT_13},{requireStrings:["11"],quality:e.Ay.DOMINANT_11},{requireStrings:["9"],quality:e.Ay.DOMINANT_9},{requireStrings:["7"],quality:e.Ay.DOMINANT_7},{requireStrings:["5"],quality:e.Ay.POWER},{patterns:["maj"],requireStrings:["2"],quality:e.Ay.MAJOR_2},{patternsSensitive:["M"],requireStrings:["2"],quality:e.Ay.MAJOR_2},{patterns:["min","-"],requireStrings:["2"],quality:e.Ay.MINOR_2},{patternsSensitive:["m"],requireStrings:["2"],quality:e.Ay.MINOR_2},{requireStrings:["2"],quality:e.Ay.MAJOR_2},{patterns:["maj"],quality:e.Ay.MAJOR},{patternsSensitive:["M"],quality:e.Ay.MAJOR},{patternsStrict:[""],quality:e.Ay.MAJOR},{patterns:["a","aug","+"],quality:e.Ay.AUGMENTED},{patterns:["d","dim","o"],quality:e.Ay.DIMINISHED},{patterns:["min","-"],quality:e.Ay.MINOR},{patternsSensitive:["m"],quality:e.Ay.MINOR}];function r(u,m,v){if(u.requireStrings&&!u.requireStrings.every(_=>m.includes(_)))return!1;if(u.patternsStrict){if(!u.patternsStrict.some(_=>_===m))return!1}else if(u.patternsSensitive){if(!u.patternsSensitive.some(_=>m.includes(_)))return!1}else if(u.patterns&&!u.patterns.some(_=>v.includes(_)))return!1;return!0}function i(u){u=u.trim();const m=u.toLowerCase(),v=o.find(_=>r(_,u,m));return v?v.quality:null}const s=new Map([[e.Ay.POWER.key,"5"],[e.Ay.MAJOR.key,"M"],[e.Ay.AUGMENTED.key,"+"],[e.Ay.MAJOR_2.key,"2"],[e.Ay.MINOR.key,"m"],[e.Ay.DIMINISHED.key,"o"],[e.Ay.MINOR_2.key,"m2"],[e.Ay.MAJOR_6.key,"6"],[e.Ay.SIX_NINE.key,"6/9"],[e.Ay.DOMINANT_7_6.key,"7/6"],[e.Ay.MINOR_6.key,"m6"],[e.Ay.MINOR_69.key,"m6/9"],[e.Ay.DOMINANT_7.key,"7"],[e.Ay.MAJOR_7.key,"M7"],[e.Ay.AUGMENTED_7.key,"+7"],[e.Ay.AUGMENTED_MAJOR_7.key,"+M7"],[e.Ay.MINOR_MAJOR_7.key,"mM7"],[e.Ay.MINOR_7.key,"m7"],[e.Ay.DIMINISHED_7.key,"o7"],[e.Ay.HALF_DIMINISHED_7.key,"\xF87"],[e.Ay.DOMINANT_9.key,"9"],[e.Ay.MAJOR_9.key,"M9"],[e.Ay.AUGMENTED_9.key,"+9"],[e.Ay.AUGMENTED_MAJOR_9.key,"+M9"],[e.Ay.MINOR_MAJOR_9.key,"mM9"],[e.Ay.MINOR_9.key,"m9"],[e.Ay.DIMINISHED_9.key,"o9"],[e.Ay.HALF_DIMINISHED_9.key,"\xF89"],[e.Ay.DOMINANT_11.key,"11"],[e.Ay.MAJOR_11.key,"M11"],[e.Ay.AUGMENTED_11.key,"+11"],[e.Ay.AUGMENTED_MAJOR_11.key,"+M11"],[e.Ay.MINOR_MAJOR_11.key,"mM11"],[e.Ay.MINOR_11.key,"m11"],[e.Ay.DIMINISHED_11.key,"o11"],[e.Ay.HALF_DIMINISHED_11.key,"\xF811"],[e.Ay.DOMINANT_13.key,"13"],[e.Ay.MAJOR_13.key,"M13"],[e.Ay.AUGMENTED_13.key,"+13"],[e.Ay.AUGMENTED_MAJOR_13.key,"+M13"],[e.Ay.MINOR_MAJOR_13.key,"mM13"],[e.Ay.MINOR_13.key,"m13"],[e.Ay.DIMINISHED_13.key,"o13"],[e.Ay.HALF_DIMINISHED_13.key,"\xF813"]]);function d(u){return s.get(u.key)}},599325:(l,n,t)=>{"use strict";t.d(n,{o:()=>S,V:()=>z});var e=t(361744),o=t(538065);const r=["aria-label"];function i(ce,se,x,T,ne,p){return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(ce.$style.tab),role:"tablist","aria-label":x.ariaLabel},[(0,e.RG)(ce.$slots,"default")],10,r)}const s={name:"FTab",props:{ariaLabel:{type:String,default:""}}};var d=t(12186),u=t.n(d),m=t(938793);const v={};v.$style=u();const S=(0,m.A)(s,[["render",i],["__cssModules",v]]);var N=t(555381),k=t(372499),O=t(727824),X=Object.defineProperty,L=Object.defineProperties,y=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,M=(ce,se,x)=>se in ce?X(ce,se,{enumerable:!0,configurable:!0,writable:!0,value:x}):ce[se]=x,E=(ce,se)=>{for(var x in se||(se={}))w.call(se,x)&&M(ce,x,se[x]);if(j)for(var x of j(se))g.call(se,x)&&M(ce,x,se[x]);return ce},I=(ce,se)=>L(ce,y(se));const C={name:"TabItem",props:{active:{type:Boolean,default:!1},ariaControls:{type:String,default:""},to:{type:String,default:void 0},target:{type:String,default:null},size:{type:String,default:"medium",validator(ce){return["small","medium"].includes(ce)}}},mixins:[O.A],setup(ce,{slots:se}){const x=(0,N.D)();return()=>{const T=[];se.default&&T.push(se.default());const{generateRouteLink:ne}=(0,k.c)(),{tag:p,data:le}=ne({as:ce.as,to:ce.to,href:ce.href,target:ce.target}),A=typeof p=="object"?()=>T:T;return(0,e.h)(p,I(E({},le),{class:[x["tab-item"],ce.active?x.active:"",x[`tab-${ce.size}`]],role:"tab","aria-selected":ce.active,"aria-controls":ce.ariaControls}),A)}}};var Z=t(398220),te=t.n(Z);const U={};U.$style=te();const z=(0,m.A)(C,[["__cssModules",U]])},599877:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(909696),o=t(361744),r=t(299035);const i=36,s=(0,o.pM)({name:"TbDisplayMode",props:{scoreData:{type:Object,required:!0},buttonStyle:{type:String,default:"detailed"}},setup(d){const u=(0,e.q6)();return()=>(0,o.h)(r.default,{buttonStyle:d.buttonStyle,scoreData:d.scoreData,action:"switchScoreDisplayMode",iconKey:u.layout})}})},603703:(l,n,t)=>{var e=t(98326);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("e3b590de",e,!0,{})},603768:(l,n,t)=>{var e=t(560581);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("f01bbbcc",e,!0,{})},614976:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>X});var e=t(361744),o=t(538065);function r(L,y,j,w,g,M){const E=(0,e.g2)("ddn-inner-rehearsal"),I=(0,e.g2)("ToolbarComplexDdn");return(0,e.uX)(),(0,e.Wv)(I,{ref:"ddn",class:(0,o.C4)(["tb-rehearsal",L.ddnStyle.root]),"icon-key":M.iconKey,"mobile-text":M.mobileText,action:"toggleAutoRehearsal","ddn-opts":M.ddnOpts,"ddn-classes":M.classesListToObject(["ddn-content","bottom",...this.contentClasses]),active:M.active,"tablet-ddn":!0},{default:(0,e.k6)(()=>[(0,e.bF)(E,{"score-data":j.scoreData,onClose:y[0]||(y[0]=C=>M.onClose())},null,8,["score-data"])]),_:1},8,["class","icon-key","mobile-text","ddn-opts","ddn-classes","active"])}var i=t(121648),s=t(909696),d=t(674548),u=t(666532),m=t(13626),v=t(361826);const _={name:"RehearsalInput",width:66,props:{scoreData:{type:Object,required:!0}},components:{DdnInnerRehearsal:u.A,ToolbarComplexDdn:m.default},setup(){const L=(0,s.q6)(),y=(0,i.W)();return{displayMobileEditor:(0,e.EW)(()=>L.displayMobileEditor),rehearsalType:(0,e.EW)(()=>y.measureInfo.rehearsalType)}},computed:{iconKey(){return this.rehearsalType==="measure-number"?"rehearsalNumber":"rehearsalLetter"},ddnPlacement(){return this.displayMobileEditor?"top":"bottom"},mobileText(){return d.MR.t("editor:rehearsal.title")},ddnOpts(){return{placement:this.ddnPlacement,positionFixed:!0}},active(){return!!this.rehearsalType},contentClasses(){return this.displayMobileEditor?[this.ddnStyle.contentCommon,this.ddnStyle.contentMobile]:[this.ddnStyle.contentCommon]}},methods:{onClose(){this.$refs.ddn.onClose()},classesListToObject:v.default}};var S=t(655523),N=t(938793);const k={};k.ddnStyle=S.default;const X=(0,N.A)(_,[["render",r],["__cssModules",k]])},622391:(l,n,t)=>{var e=t(794112);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("6b440241",e,!0,{})},627554:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>u,width:()=>d});var e=t(602494),o=t(121648),r=t(883892),i=t(361744),s=t(243564);const d=58,u=(0,i.pM)({name:"TbDots",props:{scoreData:{type:Object,required:!0}},setup(m){const v=(0,o.W)(),_=(0,r.S)(),S=(0,i.EW)(()=>{var O;return v.editionMode===e.i?(O=v.upcomingAttributes.duration)==null?void 0:O.nbDots:v.noteInfo.nbDots}),N=[{value:1,action:"addOneDot"},{value:2,action:"addTwoDots"}],k=(0,i.EW)(()=>_.highlightDurations);return()=>(0,i.h)(s.default,{scoreData:m.scoreData,items:N,active:[S.value],defaultActionIcon:"addOneDot",highlight:k.value,powerWidth:32})}})},631185:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.ddnTriggerNative_ZLYgT .inner_qYDUJ{display:flex;align-items:center;justify-content:center}.ddnTriggerNative_ZLYgT .badge_ETdCX{display:none}.ddnTriggerCommon_KFV3Q{position:relative}.ddnTriggerCommon_KFV3Q .inner_qYDUJ{display:flex;align-items:center;justify-content:center;width:46px;height:24px;padding:0 8px 0 4px;border-radius:100px;border:1px solid var(--f-ink-10);color:#fff}.ddnTriggerDesktop_OCk4k{height:42px}.ddnTriggerDesktop_OCk4k .inner_qYDUJ{margin:0 10px 0 15px}.ddnTriggerMobile_SzZ5C{height:auto}.ddnTriggerMobile_SzZ5C .inner_qYDUJ{margin:0 10px}.tb-voices .BottomSheets .popoverItem_SA1pl{min-height:50px;padding:8px;border-radius:8px;margin:0 16px;width:unset}.tb-voices .BottomSheets .popoverItem_SA1pl:hover,.tb-voices .BottomSheets .popoverItem_SA1pl:active{background:var(--f-primary-10)}.tb-voices .BottomSheets .popoverItem_SA1pl [class*=popover-item-icon-left]{margin-right:15px;width:24px;height:24px}.tb-voices .BottomSheets .popoverItem_SA1pl [class*=popover-item-icon-left] svg{display:block;width:24px;height:24px}.tb-voices .BottomSheets .popoverItem_SA1pl [class*=popover-item-content]{font-weight:600;color:var(--f-ink)}.greyIcon_fj4lw .fill{fill:var(--f-subdue)}.greyIcon_fj4lw .stroke{stroke:var(--f-subdue)}.greyIcon_fj4lw:hover .fill{fill:var(--f-ink)}.greyIcon_fj4lw:hover .stroke{stroke:var(--f-ink)}.badge_ETdCX{height:12px;width:12px;border-radius:50%;font-size:8px;font-weight:500;color:#fff;display:flex;align-items:center;justify-content:center}.backgroundVoice0_kh98Z{background:var(--f-score-voice-0)}.backgroundVoice1_IZKqX{background:var(--f-score-voice-1)}.backgroundVoiceDisabled_qbPSn{background:var(--f-grey-disabled-container)}.iconVoice0_Cqhcb .fill{fill:var(--f-score-voice-0)}.iconVoice0_Cqhcb .stroke{stroke:var(--f-score-voice-0)}.iconVoice0_Cqhcb .fillTop{fill:var(--f-score-voice-0)}.iconVoice0_Cqhcb .fillBottom{fill:var(--f-subdue)}.iconVoice1_y0FZe .fill{fill:var(--f-score-voice-1)}.iconVoice1_y0FZe .stroke{stroke:var(--f-score-voice-1)}.iconVoice1_y0FZe .fillTop{fill:var(--f-subdue)}.iconVoice1_y0FZe .fillBottom{fill:var(--f-score-voice-1)}.iconVoiceDisabled_hVrWo{color:var(--f-grey-disabled-container)}.iconVoiceDisabled_hVrWo .fillTop{fill:var(--f-grey-disabled-container)}.iconVoiceDisabled_hVrWo .fillBottom{fill:var(--f-grey-disabled-container)}*[data-color-mode=dark] .tb-voices .BottomSheets .popoverItem_SA1pl [class*=popover-item-content]{color:var(--f-subdue-40)}
`,""]),s.locals={ddnTriggerNative:"ddnTriggerNative_ZLYgT",inner:"inner_qYDUJ",badge:"badge_ETdCX",ddnTriggerCommon:"ddnTriggerCommon_KFV3Q",ddnTriggerDesktop:"ddnTriggerDesktop_OCk4k",ddnTriggerMobile:"ddnTriggerMobile_SzZ5C",popoverItem:"popoverItem_SA1pl",greyIcon:"greyIcon_fj4lw",backgroundVoice0:"backgroundVoice0_kh98Z",backgroundVoice1:"backgroundVoice1_IZKqX",backgroundVoiceDisabled:"backgroundVoiceDisabled_qbPSn",iconVoice0:"iconVoice0_Cqhcb",iconVoice1:"iconVoice1_y0FZe",iconVoiceDisabled:"iconVoiceDisabled_hVrWo"};const d=s},635244:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_erdh1{display:block;border-radius:8px;color:#fff;border:1px solid var(--f-ink-10)}.root_erdh1 *{fill:var(--f-ink)}.root_erdh1 .slash{fill:var(--f-subdue)}.root_erdh1.stepRoot_hKagO .chord\\.rootStep,.root_erdh1.stepRoot_hKagO .chord\\.rootAlter{fill:var(--f-primary)}.root_erdh1.stepQuality_ChrOM .chord\\.diminished,.root_erdh1.stepQuality_ChrOM .chord\\.augmented,.root_erdh1.stepQuality_ChrOM .chord\\.major{fill:var(--f-primary)}.root_erdh1.stepInversion_ZZqDw .chord\\.inversion{fill:var(--f-primary)}*[data-color-mode=dark] .root_erdh1{border-color:var(--f-ink)}*[data-color-mode=dark] .root_erdh1 *{fill:#fff}
`,""]),s.locals={root:"root_erdh1",stepRoot:"stepRoot_hKagO",stepQuality:"stepQuality_ChrOM",stepInversion:"stepInversion_ZZqDw"};const d=s},637963:(l,n,t)=>{"use strict";t.d(n,{$H:()=>d,Y:()=>r,dI:()=>m,jk:()=>u});var e=t(529355);const o=[["##",2],["bb",-2],["ss",2],["ff",-2],["#",1],["b",-1],["s",1],["f",-1]];function r(v){const _=o.find(([S])=>v.includes(S));return _?_[1]:0}const i=["A","B","C","D","E","F","G"];function s(v){const _=i.find(S=>v.includes(S));return _!=null?_:null}function d(v){const _=s(v);if(_===null)return null;const S=r(v);return{step:_,alter:S}}function u(v){return v===-1?"b":v===1?"#":v===2?"##":v===-2?"bb":""}function m(v){const _=e.A.getStep(v),S=u(e.A.getAlter(v));return`${_}${S}`}},641853:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_o29YD{height:40px;display:flex;overflow-x:auto;flex-grow:0;flex-shrink:1;margin-bottom:-8px;margin-left:-4px;margin-right:-4px}.innerContainer_eF1JU{margin-left:4px;margin-right:4px;height:32px;display:flex;align-items:center;gap:8px;border-radius:8px;padding-left:2px;padding-right:2px;background-color:var(--f-ink-5)}.innerContainer_eF1JU.isFirst_GCgR6{border-bottom-left-radius:0}.innerContainer_eF1JU.isLast_wuSFn{border-bottom-right-radius:0}html[data-color-mode=dark] .innerContainer_eF1JU{background-color:var(--f-bg-dark)}
`,""]),s.locals={root:"root_o29YD",innerContainer:"innerContainer_eF1JU",isFirst:"isFirst_GCgR6",isLast:"isLast_wuSFn"};const d=s},652588:(l,n,t)=>{"use strict";t.d(n,{default:()=>o.a});var e=t(799001),o=t.n(e)},653119:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.ddnFrameInner_REBc4{display:flex;flex-direction:column;align-items:center;padding:15px}.ddnFrameInner_REBc4 .chordName_K9zHN{margin-bottom:15px;font-size:24px;line-height:28px;font-family:Century Schoolbook L,serif}.ddnFrameInner_REBc4 .frameContent_AHc6X .frameInputs_FlFpj{display:flex;align-items:center;margin-bottom:10px}.ddnFrameInner_REBc4 .frameContent_AHc6X .frameInputs_FlFpj.shiftLeft_akVoC{padding-left:28px}.ddnFrameInner_REBc4 .frameContent_AHc6X input{text-align:center;width:31px;padding:0}.ddnFrameInner_REBc4 .frameContent_AHc6X input:focus,.ddnFrameInner_REBc4 .frameContent_AHc6X input:hover{z-index:1}.ddnFrameInner_REBc4 .frameContent_AHc6X input:first-child{width:32px}.ddnFrameInner_REBc4 .frameContent_AHc6X input:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0;margin-left:-1px}.ddnFrameInner_REBc4 .frameContent_AHc6X input:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.ddnFrameInner_REBc4 .frameContent_AHc6X input[type=number]::-webkit-inner-spin-button,.ddnFrameInner_REBc4 .frameContent_AHc6X input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.ddnFrameInner_REBc4 .frameContent_AHc6X svg line{stroke:#000}.ddnFrameInner_REBc4 .framePreview_Uit5r{display:flex;max-height:350px;overflow:auto}.ddnFrameInner_REBc4 button{margin-top:10px}html[data-color-mode=dark] .ddnFrameInner_REBc4 svg line{stroke:var(--f-subdue-40)}html[data-color-mode=dark] .ddnFrameInner_REBc4 svg path{fill:var(--f-subdue-40)}
`,""]),s.locals={ddnFrameInner:"ddnFrameInner_REBc4",chordName:"chordName_K9zHN",frameContent:"frameContent_AHc6X",frameInputs:"frameInputs_FlFpj",shiftLeft:"shiftLeft_akVoC",framePreview:"framePreview_Uit5r"};const d=s},655523:(l,n,t)=>{"use strict";t.d(n,{default:()=>o.a});var e=t(213784),o=t.n(e)},656459:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>te});var e=t(361744),o=t(538065),r=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(U,b,z)=>b in U?r(U,b,{enumerable:!0,configurable:!0,writable:!0,value:z}):U[b]=z,m=(U,b)=>{for(var z in b||(b={}))s.call(b,z)&&u(U,z,b[z]);if(i)for(var z of i(b))d.call(b,z)&&u(U,z,b[z]);return U};const v=["data-cy"];function _(U,b,z,ce,se,x){const T=(0,e.g2)("power-badge-icon"),ne=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("button",{type:"button",class:(0,o.C4)(m(m({[U.tbButtonStyle.rootCommon]:!0,[U.tbButtonStyle.rootMobileDetailed]:!0},x.mobilePowerClass),x.mobileHighlightClass)),"data-cy":`tb-${z.action}`,onClick:b[0]||(b[0]=(...p)=>x.openTextMode&&x.openTextMode(...p))},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[U.tbButtonStyle.i]:!0,[U.tbButtonStyle.bigIcon]:x.isBigIcon})},null,2),[[ne,x.iconSvg,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(U.tbButtonStyle.t)},(0,o.v_)(x.tooltipText),3),x.showPowerOnly?((0,e.uX)(),(0,e.Wv)(T,{key:0,class:(0,o.C4)(U.powerStyle.toolbarPowerIcon)},null,8,["class"])):(0,e.Q3)("",!0)],10,v)}var S=t(27219),N=t(135519),k=t(121648),O=t(797727),X=t(763939),L=t(741522),y=t(505522),j=t(896099);const w={name:"TbScoreSelectedNative",width:42,components:{PowerBadgeIcon:O.default},props:{scoreData:{type:Object,required:!0},textModeTrigger:{type:String,required:!0},action:{type:String,required:!0},premiumFeatures:{type:Array,default:null},highlight:{type:Boolean,default:!1}},setup(){const U=(0,N.d)(),b=(0,X.F)(),z=(0,k.W)();return{mainShortcutByAction:(0,e.EW)(()=>U.mainShortcutByAction),accountFeatures:(0,e.EW)(()=>b.accountFeatures),isEditionBlocked:(0,e.EW)(()=>z.isEditionBlocked)}},computed:{localPremiumFeatures(){return this.premiumFeatures?this.premiumFeatures:this.actionsMeta.premiumFeature?[this.actionsMeta.premiumFeature]:[]},tooltipText(){const U=`${this.action}.title`;return this.$t(`editor:${U}`)},iconSvg(){return y.default[this.resolvedIconkey]},isBigIcon(){return(0,j.default)(this.resolvedIconkey)},resolvedIconkey(){const U=this.action;return y.default[U]?U:this.actionsMeta.icon},actionsMeta(){return S.actions[this.action]||{}},mobilePowerClass:L.m,mobileHighlightClass(){return this.highlight?{[this.highlightStyle.toolbarMobileHighlightBox]:!0,"show-highlight":!0}:{}},showPowerOnly(){return this.localPremiumFeatures.some(U=>!this.accountFeatures[U])}},methods:{openTextMode(){(0,k.W)().setSelectedType(this.textModeTrigger)}}};var g=t(247477),M=t(652588),E=t(245916),I=t(938793);const C={};C.powerStyle=g.default,C.highlightStyle=M.default,C.tbButtonStyle=E.default;const te=(0,I.A)(w,[["render",_],["__cssModules",C]])},663189:(l,n,t)=>{var e=t(527058);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("5c436c54",e,!0,{})},665732:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_SMcUd{display:flex;align-items:center;gap:8px}
`,""]),s.locals={root:"root_SMcUd"};const d=s},666532:(l,n,t)=>{"use strict";t.d(n,{A:()=>E});var e=t(361744),o=t(538065),r=t(555381);function i(I,C,Z,te,U,b){const z=(0,e.g2)("FButton"),ce=(0,e.g2)("FInput"),se=(0,e.gN)("dompurify-html");return te.customRehearsalUiDisplayed?((0,e.uX)(),(0,e.CE)("form",{key:1,class:(0,o.C4)(I.$style.ddnRehearsalCInner),"data-cy":"ddnRehearsalCInner",onSubmit:C[6]||(C[6]=(0,r.D$)(x=>b.setCustom(),["prevent"]))},[(0,e.bF)(ce,{size:"medium",autofocus:"",modelValue:U.customText,"onUpdate:modelValue":C[4]||(C[4]=x=>U.customText=x),placeholder:I.$t("flat:editor.placeholer-rehearsal-custom"),class:"form-control",onKeydown:C[5]||(C[5]=(0,r.jR)(x=>b.close(),["esc"])),ref:"rehearsalTextInput"},null,8,["modelValue","placeholder"]),(0,e.bF)(z,{type:"submit","default-text":"flat:add"})],34)):((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(I.$style.ddnRehearsalInner)},[(0,e.bo)((0,e.Lk)("a",{onClick:C[0]||(C[0]=x=>b.exec("toggleAutoRehearsal")),class:(0,o.C4)({[I.$style.active]:b.rehearsalType==="auto"})},null,2),[[se,U.icons.rehearsalLetter,"svg"]]),(0,e.bo)((0,e.Lk)("a",{onClick:C[1]||(C[1]=x=>b.exec("toggleMeasureNumberRehearsal")),class:(0,o.C4)({[I.$style.active]:b.rehearsalType==="measure-number"})},null,2),[[se,U.icons.rehearsalNumber,"svg"]]),(0,e.bo)((0,e.Lk)("a",{onClick:C[2]||(C[2]=x=>b.displayCustomUi()),class:(0,o.C4)({[I.$style.active]:b.rehearsalType==="custom"})},null,2),[[se,U.icons.rehearsalCustom,"svg"]]),b.rehearsalType?((0,e.uX)(),(0,e.Wv)(z,{key:0,type:"button",theme:"ghost-red",size:"small","default-text":"",icon:b.removeIcon,onClick:C[3]||(C[3]=x=>b.exec("removeRehearsal"))},null,8,["icon"])):(0,e.Q3)("",!0)],2))}var s=t(842746),d=t(472838),u=t(561248),m=t(121648),v=t(909696),_=t(445895),S=t(227468),N=t(279596),k=t(727825),O=t(505522),X=(I,C,Z)=>new Promise((te,U)=>{var b=se=>{try{ce(Z.next(se))}catch(x){U(x)}},z=se=>{try{ce(Z.throw(se))}catch(x){U(x)}},ce=se=>se.done?te(se.value):Promise.resolve(se.value).then(b,z);ce((Z=Z.apply(I,C)).next())});const L={name:"DdnInnerRehearsal",components:{FInput:N.Le,FButton:S.Iy},emits:["close"],props:{scoreData:{type:Object,required:!0},interaction:{type:Object,required:!1}},data(){return{customText:"",watchingViewport:!1,icons:{rehearsalLetter:O.default.rehearsalLetter,rehearsalNumber:O.default.rehearsalNumber,rehearsalCustom:O.default.rehearsalCustom}}},setup(){const I=(0,m.W)(),C=(0,v.q6)(),Z=(0,k.N)();return{contextPos:(0,e.EW)(()=>I.contextPos),customRehearsalUiDisplayed:(0,e.EW)(()=>C.customRehearsalUiDisplayed),displayMobileEditor:(0,e.EW)(()=>C.displayMobileEditor),setCustomRehearsalUiDisplayed:C.setCustomRehearsalUiDisplayed,watchViewport:Z.watchViewport,unwatchViewport:Z.unwatchViewport}},watch:{customRehearsalUiDisplayed(){return X(this,null,function*(){this.customRehearsalUiDisplayed&&(yield(0,e.dY)(),yield(0,d.default)(),this.$refs.rehearsalTextInput&&this.$refs.rehearsalTextInput.focus())})}},computed:{rehearsal(){var I,C;return((C=(I=this.interaction)==null?void 0:I.cursor.selectedEntity)==null?void 0:C.entityType)===s.A.REHEARSAL?u.A.getText(this.interaction.cursor.selectedEntity.rehearsalData):this.scoreData.adagioData.getStaffMeasure(Object.assign({},this.contextPos)).rehearsal},rehearsalType(){var I,C;return((C=(I=this.interaction)==null?void 0:I.cursor.selectedEntity)==null?void 0:C.entityType)===s.A.REHEARSAL?u.A.getType(this.interaction.cursor.selectedEntity.rehearsalData):this.scoreData.adagioData.getStaffMeasure(Object.assign({},this.contextPos)).rehearsalType},removeIcon(){return _.A}},methods:{exec(I){this.scoreData.scoreActions.executePublicAction(I),this.close()},displayCustomUi(){this.setCustomRehearsalUiDisplayed(!0)},setCustom(){this.scoreData.scoreActions.executePublicAction("addCustomRehearsal",{rehearsal:this.customText||""}),this.close()},close(){this.setCustomRehearsalUiDisplayed(!1),this.$emit("close")}},beforeMount(){this.displayMobileEditor&&(this.watchViewport(),this.watchingViewport=!0)},beforeUnmount(){this.watchingViewport&&this.unwatchViewport()},unmounted(){this.close()},created(){this.rehearsal&&(this.customText=this.rehearsal)}};var y=t(847641),j=t.n(y),w=t(938793);const g={};g.$style=j();const E=(0,w.A)(L,[["render",i],["__cssModules",g]])},667688:(l,n,t)=>{var e=t(64327);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("f083ba6a",e,!0,{})},669135:(l,n,t)=>{var e=t(822678);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("082a08d7",e,!0,{})},671187:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>U});var e=t(361744),o=t(538065);function r(b,z,ce,se,x,T){const ne=(0,e.g2)("DropdownTrigger"),p=(0,e.g2)("PopoverItem"),le=(0,e.g2)("PowerBadgeIcon"),A=(0,e.g2)("Popover"),de=(0,e.g2)("SplitStaff"),Ae=(0,e.g2)("ToolbarComplexDdnInner"),be=(0,e.gN)("tooltip"),ae=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.Wv)(Ae,{class:"tb-voices",direction:T.ddnDirection,onOpenChange:T.onOpenChange,ref:"ddn","tablet-ddn":!0,title:b.$t("editor:toolbar.voice.ddnHeader")},{trigger:(0,e.k6)(()=>[(0,e.bo)(((0,e.uX)(),(0,e.Wv)(ne,{"aria-label":b.$t("editor:toolbar.voice.title",{voiceShortcut:T.voiceShortcut}),class:(0,o.C4)(T.triggerClasses),disabled:se.isEditionBlocked},{default:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,o.C4)([b.voiceStyle.inner,T.currentVoiceClass])},[z[7]||(z[7]=(0,e.Lk)("svg",{inline:"",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.75 3.19c-3.25 0-3.917 2.642-3.917 3.31v11.69h.513V7.701c.342.291.838.463 1.437.463 2.96 0 3.883-2.3 3.883-3.328 0-1.047-.838-1.648-1.916-1.648zm-.46 3.38c-.976.566-1.591.771-2.002.771-.376 0-.582-.171-.718-.411a.755.755 0 0 1-.12-.378c0-.394.41-.875 1.796-1.784.89-.6 1.505-.806 1.933-.806.41 0 .65.205.787.446a.82.82 0 0 1 .12.394c0 .43-.428.978-1.796 1.767z",class:"fillBottom"}),(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.64 12.113c-.335-.293-.827-.448-1.406-.448-2.162 0-3.901 1.568-3.901 3.238 0 1.017.843 1.62 1.915 1.62 1.757 0 3.918-1.602 3.918-3.239V1.522h-.527v10.591z",class:"fillTop"})],-1)),(0,e.Lk)("span",{class:(0,o.C4)([b.voiceStyle.badge,T.currentVoiceBackgroundClass])},(0,o.v_)(T.displayableVoiceId),3)],2)]),_:1},8,["aria-label","class","disabled"])),[[be,{text:T.tooltipText}]])]),default:(0,e.k6)(()=>[x.display===x.Display.MAIN?((0,e.uX)(),(0,e.Wv)(A,{key:0},{default:(0,e.k6)(()=>[se.voiceIdxInStaff===1?((0,e.uX)(),(0,e.Wv)(p,{key:0,class:(0,o.C4)(b.voiceStyle.popoverItem),as:"button",onClick:z[0]||(z[0]=ie=>T.exec("goVoice1"))},{icon:(0,e.k6)(()=>[((0,e.uX)(),(0,e.CE)("svg",{class:(0,o.C4)(b.voiceStyle.iconVoice0),inline:"",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},z[8]||(z[8]=[(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.75 3.19c-3.25 0-3.917 2.642-3.917 3.31v11.69h.513V7.701c.342.291.838.463 1.437.463 2.96 0 3.883-2.3 3.883-3.328 0-1.047-.838-1.648-1.916-1.648zm-.46 3.38c-.976.566-1.591.771-2.002.771-.376 0-.582-.171-.718-.411a.755.755 0 0 1-.12-.378c0-.394.41-.875 1.796-1.784.89-.6 1.505-.806 1.933-.806.41 0 .65.205.787.446a.82.82 0 0 1 .12.394c0 .43-.428.978-1.796 1.767z",class:"fillBottom"},null,-1),(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.64 12.113c-.335-.293-.827-.448-1.406-.448-2.162 0-3.901 1.568-3.901 3.238 0 1.017.843 1.62 1.915 1.62 1.757 0 3.918-1.602 3.918-3.239V1.522h-.527v10.591z",class:"fillTop"},null,-1)]),2))]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,o.v_)(b.$t("editor:goVoice1.title")),1)]),_:1},8,["class"])):se.voiceIdxInStaff===0?((0,e.uX)(),(0,e.Wv)(p,{key:1,class:(0,o.C4)(b.voiceStyle.popoverItem),as:"button",onClick:z[1]||(z[1]=ie=>T.exec("goVoice2"))},{icon:(0,e.k6)(()=>[((0,e.uX)(),(0,e.CE)("svg",{class:(0,o.C4)(b.voiceStyle.iconVoice1),inline:"",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},z[9]||(z[9]=[(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.75 3.19c-3.25 0-3.917 2.642-3.917 3.31v11.69h.513V7.701c.342.291.838.463 1.437.463 2.96 0 3.883-2.3 3.883-3.328 0-1.047-.838-1.648-1.916-1.648zm-.46 3.38c-.976.566-1.591.771-2.002.771-.376 0-.582-.171-.718-.411a.755.755 0 0 1-.12-.378c0-.394.41-.875 1.796-1.784.89-.6 1.505-.806 1.933-.806.41 0 .65.205.787.446a.82.82 0 0 1 .12.394c0 .43-.428.978-1.796 1.767z",class:"fillBottom"},null,-1),(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.64 12.113c-.335-.293-.827-.448-1.406-.448-2.162 0-3.901 1.568-3.901 3.238 0 1.017.843 1.62 1.915 1.62 1.757 0 3.918-1.602 3.918-3.239V1.522h-.527v10.591z",class:"fillTop"},null,-1)]),2))]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,o.v_)(b.$t("editor:goVoice2.title")),1)]),_:1},8,["class"])):(0,e.Q3)("",!0),T.canRemoveVoice(0)?((0,e.uX)(),(0,e.Wv)(p,{key:2,class:(0,o.C4)(b.voiceStyle.popoverItem),as:"button",onClick:z[2]||(z[2]=ie=>T.exec("removeVoice1"))},{icon:(0,e.k6)(()=>[((0,e.uX)(),(0,e.CE)("svg",{class:(0,o.C4)(b.voiceStyle.iconVoice0),inline:"",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15"},z[10]||(z[10]=[(0,e.Lk)("path",{class:"fill",d:"M9.885 5.11c-.184-.18-.492-.17-.688.03L7.5 6.82 5.806 5.14c-.197-.2-.504-.21-.688-.03-.184.19-.174.49.022.69l1.695 1.68L5.14 9.17c-.197.2-.207.5-.023.68.183.19.49.18.688-.02L7.5 8.15l1.697 1.68c.196.2.504.21.688.02.183-.18.174-.48-.023-.68L8.166 7.48 9.862 5.8c.197-.2.206-.5.023-.69zM7.5 14a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13zm0-14a7.5 7.5 0 1 0 0 15 7.5 7.5 0 0 0 0-15z"},null,-1)]),2))]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,o.v_)(b.$t("editor:removeVoice1.title")),1)]),_:1},8,["class"])):(0,e.Q3)("",!0),T.canRemoveVoice(1)?((0,e.uX)(),(0,e.Wv)(p,{key:3,class:(0,o.C4)(b.voiceStyle.popoverItem),as:"button",onClick:z[3]||(z[3]=ie=>T.exec("removeVoice2"))},{icon:(0,e.k6)(()=>[((0,e.uX)(),(0,e.CE)("svg",{class:(0,o.C4)(b.voiceStyle.iconVoice1),inline:"",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15"},z[11]||(z[11]=[(0,e.Lk)("path",{class:"fill",d:"M9.885 5.11c-.184-.18-.492-.17-.688.03L7.5 6.82 5.806 5.14c-.197-.2-.504-.21-.688-.03-.184.19-.174.49.022.69l1.695 1.68L5.14 9.17c-.197.2-.207.5-.023.68.183.19.49.18.688-.02L7.5 8.15l1.697 1.68c.196.2.504.21.688.02.183-.18.174-.48-.023-.68L8.166 7.48 9.862 5.8c.197-.2.206-.5.023-.69zM7.5 14a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13zm0-14a7.5 7.5 0 1 0 0 15 7.5 7.5 0 0 0 0-15z"},null,-1)]),2))]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,o.v_)(b.$t("editor:removeVoice2.title")),1)]),_:1},8,["class"])):(0,e.Q3)("",!0),x.isEmbedApp?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(p,{key:4,class:(0,o.C4)([b.voiceStyle.popoverItem,b.voiceStyle.greyIcon]),"soft-disabled":!T.hasRange,ref:"swapVoices",as:"button",onClick:z[4]||(z[4]=ie=>T.exec("swapVoices"))},(0,e.eX)({icon:(0,e.k6)(()=>[(0,e.bo)((0,e.Lk)("div",null,null,512),[[ae,x.swapVoicesIcon,"svg"]])]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,o.v_)(b.$t("editor:swapVoices.title"))+" ",1)]),_:2},[T.enabledAdvancedVoices?void 0:{name:"rightIcon",fn:(0,e.k6)(()=>[(0,e.bF)(le)]),key:"0"}]),1032,["class","soft-disabled"])),x.isEmbedApp?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(p,{key:5,class:(0,o.C4)([b.voiceStyle.popoverItem,b.voiceStyle.greyIcon]),as:"button",onClick:z[5]||(z[5]=ie=>T.setDisplay(x.Display.SPLIT_STAFF))},(0,e.eX)({icon:(0,e.k6)(()=>[(0,e.bo)((0,e.Lk)("div",null,null,512),[[ae,x.splitStaffIcon,"svg"]])]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,o.v_)(b.$t("editor:splitStaff.title"))+" ",1)]),_:2},[T.enabledAdvancedVoices?void 0:{name:"rightIcon",fn:(0,e.k6)(()=>[(0,e.bF)(le)]),key:"0"}]),1032,["class"]))]),_:1})):x.display===x.Display.SPLIT_STAFF?((0,e.uX)(),(0,e.Wv)(A,{key:1},{default:(0,e.k6)(()=>[(0,e.bF)(de,{"score-data":ce.scoreData,onClose:z[6]||(z[6]=ie=>T.closeDdn())},null,8,["score-data"])]),_:1})):(0,e.Q3)("",!0)]),_:1},8,["direction","onOpenChange","title"])}var i=t(135519),s=t(121648),d=t(909696),u=t(733268),m=t(797727),v=t(229384),_=t(763939),S=t(459356),N=t(281313),k=t(243935),O=t(26292),X=t(505522),L=t(566357),y=t(34943),j=t(66682);const w={MAIN:"main",SPLIT_STAFF:"splitStaff"},g={name:"VoicesControls",width:97,emits:["resized"],props:{scoreData:{type:Object,required:!0},buttonStyle:{type:String,default:"detailed"}},components:{ToolbarComplexDdnInner:y.default,DropdownTrigger:u.u,Popover:N.AM,PopoverItem:N.fv,SplitStaff:L.default,PowerBadgeIcon:m.default},data(){return{Display:w,display:w.MAIN,splitStaffIcon:X.default.splitStaff,swapVoicesIcon:X.default.swapVoices,isEmbedApp:v.jH}},setup(){const b=(0,_.F)(),z=(0,i.d)(),ce=(0,d.q6)(),se=(0,S.O)(),x=(0,s.W)();return{accountFeatures:(0,e.EW)(()=>b.accountFeatures),mainShortcutByAction:(0,e.EW)(()=>z.mainShortcutByAction),displayMobileEditor:(0,e.EW)(()=>ce.displayMobileEditor),voiceIdxInStaff:(0,e.EW)(()=>x.voiceIdxInStaff),isEditionBlocked:(0,e.EW)(()=>x.isEditionBlocked),range:(0,e.EW)(()=>x.range),measureInfo:(0,e.EW)(()=>x.measureInfo),displayMessage:se.displayMessage}},computed:{ddnDirection(){return this.displayMobileEditor?"top":"bottom"},enabledAdvancedVoices(){return this.accountFeatures.advancedVoices},currentVoiceClass(){return this.isEditionBlocked?this.voiceStyle.iconVoiceDisabled:this.voiceStyle[`iconVoice${this.voiceIdxInStaff}`]},currentVoiceBackgroundClass(){return this.isEditionBlocked?this.voiceStyle.backgroundVoiceDisabled:this.voiceStyle[`backgroundVoice${this.voiceIdxInStaff}`]},displayableVoiceId(){return this.voiceIdxInStaff+1},tooltipText(){return this.isEditionBlocked?this.$t("editor:toolbar.voice.editionBlocked"):this.$t("editor:toolbar.voice.title",{voiceShortcut:this.voiceShortcut})},voiceShortcut(){const b=this.mainShortcutByAction.circleVoice;return b?(0,O.lD)(b.shortcuts):""},hasRange(){return this.range!==null},triggerClasses(){return this.buttonStyle==="nativeSimple"?{[this.voiceStyle.ddnTriggerNative]:!0,[this.tbButtonStyle.rootNativeSimple]:!0}:this.displayMobileEditor?{[this.voiceStyle.ddnTriggerCommon]:!0,[this.voiceStyle.ddnTriggerMobile]:!0}:{[this.voiceStyle.ddnTriggerCommon]:!0,[this.voiceStyle.ddnTriggerDesktop]:!0}},swapVoicesTooltipText(){const b={action:"swapVoices",disabledReason:"hasRangeTrue"};return j.tooltipText.call(b)}},watch:{hasRange(b){b&&this.$tooltipSwapVoices&&(this.$tooltipSwapVoices.destroy(),this.$tooltipSwapVoices=null)}},methods:{exec(b){if(b==="swapVoices"&&!this.hasRange){this.displayMobileEditor&&this.displayMessage({text:"",message:this.swapVoicesTooltipText,type:"default"});return}this.closeDdn(),this.scoreData.scoreActions.executePublicAction(b)},setDisplay(b){this.$emit("resized"),this.display=b},canRemoveVoice(b){return this.range!==null?!0:this.measureInfo.measureVoicesData.some(({voiceIdxInStaff:ce})=>ce===b)},closeDdn(){this.$refs.ddn.close()},onOpenChange(b){this.display=w.MAIN,b&&!this.hasRange&&this.$nextTick(()=>{this.setuptooltipSwapVoices()})},setuptooltipSwapVoices(){if(document.body.classList.contains("touch"))return;this.$tooltipSwapVoices&&this.$tooltipSwapVoices.destroy();const b=this.$refs.swapVoices;b&&(this.$tooltipSwapVoices=new k.vF(b.$el,{touch:!1,placement:"bottom",content:this.swapVoicesTooltipText,arrow:k.qO,duration:[0,0]}))}}};var M=t(235398),E=t(905618),I=t.n(E),C=t(938793);const Z={};Z.tbButtonStyle=M.default,Z.voiceStyle=I();const U=(0,C.A)(g,[["render",r],["__cssModules",Z]])},688208:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_BWo8i .dialog-header{font-family:var(--f-font-common)}.root_BWo8i .BottomSheets-nav{font-family:var(--f-font-common)}.root_BWo8i [role=backdrop],.root_BWo8i .BottomSheets-bg{background:#2f344629}.root_BWo8i .BottomSheets [role=number-input]{flex:1}.bottomPadding_Sv1ix .BottomSheets{padding-bottom:40px}*[data-color-mode=dark] .root_BWo8i .BottomSheets,*[data-color-mode=dark] .root_BWo8i [role=dialog],*[data-color-mode=dark] .root_BWo8i [role=menu]{background-color:var(--f-bg-dark)}*[data-color-mode=dark] .root_BWo8i .BottomSheets input,*[data-color-mode=dark] .root_BWo8i [role=dialog] input,*[data-color-mode=dark] .root_BWo8i [role=menu] input{color:var(--f-subdue-40);background-color:var(--f-bg-dark)}
`,""]),s.locals={root:"root_BWo8i",bottomPadding:"bottomPadding_Sv1ix"};const d=s},688333:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(127495);const i=50,s=(0,o.pM)({name:"TbChangeDurationMode",props:{scoreData:{type:Object,required:!0}},setup(d){const u=[{action:"setChangeDurationReplace",value:"false"},{action:"setChangeDurationInsert",value:"true"}],m=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,items:u,active:[m.isChangeDurationInsert.toString()]})}})},688761:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_bs6Eg{margin:8px}.root_bs6Eg .radio-wrapper,.root_bs6Eg .checkbox-wrapper{margin-bottom:12px}.buttons_PjRY9{display:flex;justify-content:center;align-items:center}
`,""]),s.locals={root:"root_bs6Eg",buttons:"buttons_PjRY9"};const d=s},690086:(l,n,t)=>{var e=t(246551);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("a9736660",e,!0,{})},696104:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>gt});var e=t(361744);function o(F,re,Se,B,W,V){const Ie=(0,e.g2)("ddn-inner-transpose"),Ee=(0,e.g2)("ToolbarComplexDdn");return(0,e.uX)(),(0,e.Wv)(Ee,{ref:"ddn",class:"tb-transpose","icon-key":"transpose","mobile-text":V.mobileText,"power-width":30,"show-power-only":V.showPowerOnly,action:"transpose","ddn-classes":V.ddnClasses},{default:(0,e.k6)(()=>[(0,e.bF)(Ie,{"score-data":Se.scoreData,onClose:re[0]||(re[0]=De=>V.onClose())},null,8,["score-data"])]),_:1},8,["mobile-text","show-power-only","ddn-classes"])}var r=t(674548),i=t(763939),s=t(538065),d=t(555381);const u={class:"label-ext-small"},m={for:"t-from-octave",class:"label-ext-small"},v={class:"label-ext-small"},_={for:"t-to-octave",class:"label-ext-small"},S={class:"cta"};function N(F,re,Se,B,W,V){const Ie=(0,e.g2)("TabItem"),Ee=(0,e.g2)("Tab"),De=(0,e.g2)("FSelectInput"),ot=(0,e.g2)("FNumberInputWithSteppers"),je=(0,e.g2)("FRadio"),Ve=(0,e.g2)("toggle"),a=(0,e.g2)("StaticEmbedScore"),c=(0,e.g2)("FButton");return(0,e.uX)(),(0,e.CE)("div",{class:(0,s.C4)({[F.$style.ddnTransposeInner]:!0,[F.$style.isDesktop]:!B.displayMobileEditor})},[(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tabs)},[(0,e.bF)(Ee,{class:(0,s.C4)(F.$style.tModes)},{default:(0,e.k6)(()=>[(0,e.bF)(Ie,{active:W.mode===W.Mode.INTERVAL,onClick:re[0]||(re[0]=f=>V.setMode(W.Mode.INTERVAL))},{default:(0,e.k6)(()=>[(0,e.eW)((0,s.v_)(F.$t("flat:transpose.by-interval")),1)]),_:1},8,["active"]),(0,e.bF)(Ie,{active:W.mode===W.Mode.KEY,onClick:re[1]||(re[1]=f=>V.setMode(W.Mode.KEY))},{default:(0,e.k6)(()=>[(0,e.eW)((0,s.v_)(F.$t("flat:transpose.by-key")),1)]),_:1},8,["active"]),(0,e.bF)(Ie,{active:W.mode===W.Mode.SEMITONE,onClick:re[2]||(re[2]=f=>V.setMode(W.Mode.SEMITONE))},{default:(0,e.k6)(()=>[(0,e.eW)((0,s.v_)(F.$t("flat:transpose.by-semitone")),1)]),_:1},8,["active"])]),_:1},8,["class"])],2),(0,e.Lk)("form",{class:(0,s.C4)(F.$style.tMode),onSubmit:re[35]||(re[35]=(0,d.D$)(f=>V.processTranspose(),["prevent"]))},[W.transposingPart?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,s.C4)(F.$style.warnTranspoPart)},(0,s.v_)(F.$t("flat:transpose.warn-whole-part",{instrument:W.transposingPart})),3)):(0,e.Q3)("",!0),(0,e.bo)((0,e.Lk)("div",null,[(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tRow)},[(0,e.Lk)("label",{for:"t-interval",class:(0,s.C4)(["label-ext-small",F.$style.take40])},(0,s.v_)(F.$t("flat:transpose.interval"))+":",3),(0,e.bF)(De,{modelValue:V.diatonicStr,"onUpdate:modelValue":re[3]||(re[3]=f=>V.diatonicStr=f),id:"t-interval",onChange:re[4]||(re[4]=f=>V.updateTransposeFromInterval()),values:V.diatonicValues,size:"small"},null,8,["modelValue","values"])],2),(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tRow)},[(0,e.Lk)("label",{for:"t-quality",class:(0,s.C4)(["label-ext-small",F.$style.take40])},(0,s.v_)(F.$t("flat:transpose.quality"))+":",3),(0,e.bF)(De,{modelValue:V.chromaticStr,"onUpdate:modelValue":re[5]||(re[5]=f=>V.chromaticStr=f),id:"t-quality",onChange:re[6]||(re[6]=f=>V.updateTransposeFromInterval()),values:V.qualityValues,size:"small"},null,8,["modelValue","values"])],2),(0,e.Lk)("div",{class:(0,s.C4)([F.$style.octave,F.$style.tRow])},[(0,e.Lk)("label",{for:"t-octave",class:(0,s.C4)(["label-ext-small",F.$style.take40])},(0,s.v_)(F.$t("flat:transpose.octave"))+":",3),(0,e.bF)(ot,{onChange:V.setIntervalOctave,"onUpdate:modelValue":V.setIntervalOctave,"model-value":W.octave,min:0,max:4,step:1,placeholder:"",size:"small"},null,8,["onChange","onUpdate:modelValue","model-value"])],2),(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tRow)},[(0,e.Lk)("label",{for:"t-direction",class:(0,s.C4)(["label-ext-small",F.$style.take40])},(0,s.v_)(F.$t("flat:transpose.direction"))+":",3),(0,e.Lk)("div",{class:(0,s.C4)(F.$style.options)},[(0,e.bF)(je,{value:"up",modelValue:W.direction,"onUpdate:modelValue":re[7]||(re[7]=f=>W.direction=f),name:"t-direction",onChange:re[8]||(re[8]=f=>V.updateTransposeFromInterval())},{default:(0,e.k6)(()=>[(0,e.Lk)("span",null,(0,s.v_)(F.$t("flat:transpose.up")),1)]),_:1},8,["modelValue"]),(0,e.bF)(je,{value:"down",modelValue:W.direction,"onUpdate:modelValue":re[9]||(re[9]=f=>W.direction=f),name:"t-direction",onChange:re[10]||(re[10]=f=>V.updateTransposeFromInterval())},{default:(0,e.k6)(()=>[(0,e.Lk)("span",null,(0,s.v_)(F.$t("flat:transpose.down")),1)]),_:1},8,["modelValue"])],2)],2)],512),[[d.aG,W.mode===W.Mode.INTERVAL]]),(0,e.bo)((0,e.Lk)("div",null,[(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tRowMode)},[(0,e.Lk)("span",u,(0,s.v_)(F.$t("flat:transpose.keyFrom"))+":",1),(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tRowModePitch)},[(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tRowModeStepAlter)},[(0,e.bF)(De,{class:(0,s.C4)(F.$style.stepInput),modelValue:W.fromKey.step,"onUpdate:modelValue":re[11]||(re[11]=f=>W.fromKey.step=f),onChange:re[12]||(re[12]=f=>V.updateTransposeFromKey()),values:V.stepsValues,size:"small"},null,8,["class","modelValue","values"]),(0,e.bF)(De,{class:(0,s.C4)(F.$style.alterInput),modelValue:V.fromAccidentalStr,"onUpdate:modelValue":re[13]||(re[13]=f=>V.fromAccidentalStr=f),onChange:re[14]||(re[14]=f=>V.updateTransposeFromKey()),values:V.accidentalsValues,size:"small"},null,8,["class","modelValue","values"])],2),(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tModeOctave)},[(0,e.Lk)("label",m,(0,s.v_)(F.$t("flat:transpose.atOctave"))+":",1),(0,e.bF)(ot,{id:"t-from-octave",onChange:V.setFromOctave,"onUpdate:modelValue":V.setFromOctave,"model-value":W.fromKey.octave,min:0,max:8,step:1,placeholder:"",size:"small","no-buttons":!1},null,8,["onChange","onUpdate:modelValue","model-value"])],2)],2)],2),(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tRowMode)},[(0,e.Lk)("span",v,(0,s.v_)(F.$t("flat:transpose.keyTo"))+":",1),(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tRowModePitch)},[(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tRowModeStepAlter)},[(0,e.bF)(De,{class:(0,s.C4)(F.$style.stepInput),modelValue:W.toKey.step,"onUpdate:modelValue":re[15]||(re[15]=f=>W.toKey.step=f),onChange:re[16]||(re[16]=f=>V.updateTransposeFromKey()),values:V.stepsValues,size:"small"},null,8,["class","modelValue","values"]),(0,e.bF)(De,{class:(0,s.C4)(F.$style.alterInput),modelValue:V.toAccidentalStr,"onUpdate:modelValue":re[17]||(re[17]=f=>V.toAccidentalStr=f),onChange:re[18]||(re[18]=f=>V.updateTransposeFromKey()),values:V.accidentalsValues,size:"small"},null,8,["class","modelValue","values"])],2),(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tModeOctave)},[(0,e.Lk)("label",_,(0,s.v_)(F.$t("flat:transpose.atOctave"))+":",1),(0,e.bF)(ot,{id:"t-to-octave",onChange:V.setToOctave,"onUpdate:modelValue":V.setToOctave,"model-value":W.toKey.octave,min:0,max:8,step:1,placeholder:"",size:"small","no-buttons":!1},null,8,["onChange","onUpdate:modelValue","model-value"])],2)],2)],2)],512),[[d.aG,W.mode===W.Mode.KEY]]),(0,e.bo)((0,e.Lk)("div",null,[(0,e.Lk)("div",{class:(0,s.C4)([F.$style.semitones,F.$style.tRow])},[(0,e.Lk)("label",{for:"t-semitones",class:(0,s.C4)(["label-ext-small",F.$style.take40])},(0,s.v_)(F.$t("flat:transpose.by-semitone"))+":",3),(0,e.bF)(ot,{id:"t-semitones",onChange:V.setNbSemitones,"onUpdate:modelValue":V.setNbSemitones,"model-value":W.semiTones,min:-50,max:50,step:1,placeholder:"",size:"small"},null,8,["onChange","onUpdate:modelValue","model-value"])],2),(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tRowMode)},[re[36]||(re[36]=(0,e.Lk)("span",{class:"label-ext-small"},(0,s.v_)("Interval")+":",-1)),(0,e.Lk)("div",{class:(0,s.C4)(F.$style.tRowModePitch)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(V.semiToneIntervals,f=>((0,e.uX)(),(0,e.Wv)(je,{key:f.diatonic,value:f.diatonic.toString(),modelValue:V.diatonicStr,"onUpdate:modelValue":re[19]||(re[19]=oe=>V.diatonicStr=oe),name:"t-semitone-interval",onChange:re[20]||(re[20]=oe=>V.updateTransposeFromSemiTone())},{default:(0,e.k6)(()=>[(0,e.Lk)("span",null,(0,s.v_)(V.getFullIntervalName(f.diatonic,f.value)),1)]),_:2},1032,["value","modelValue"]))),128))],2)],2)],512),[[d.aG,W.mode===W.Mode.SEMITONE]]),(0,e.Lk)("div",{class:(0,s.C4)(F.$style.moreOptionsContainer)},[W.optionDisplayed?((0,e.uX)(),(0,e.CE)("button",{key:1,type:"button",class:(0,s.C4)(F.$style.moreOptions),onClick:re[25]||(re[25]=(0,d.D$)(f=>V.showOptions(!1),["prevent"])),onKeypress:re[26]||(re[26]=(0,d.D$)(()=>{},["stop"])),onKeydown:re[27]||(re[27]=(0,d.D$)(()=>{},["stop"])),onKeyup:re[28]||(re[28]=(0,d.D$)(()=>{},["stop"]))},(0,s.v_)(F.$t("flat:show-less-options")),35)):((0,e.uX)(),(0,e.CE)("button",{key:0,type:"button",class:(0,s.C4)(F.$style.moreOptions),onClick:re[21]||(re[21]=(0,d.D$)(f=>V.showOptions(!0),["prevent"])),onKeypress:re[22]||(re[22]=(0,d.D$)(()=>{},["stop"])),onKeydown:re[23]||(re[23]=(0,d.D$)(()=>{},["stop"])),onKeyup:re[24]||(re[24]=(0,d.D$)(()=>{},["stop"]))},(0,s.v_)(F.$t("flat:show-more-options")),35))],2),W.optionDisplayed?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,s.C4)([F.$style.tRow,"wrap-switch-contain"])},[(0,e.bF)(Ve,{id:"t-updateKeys",modelValue:W.updateKeys,"onUpdate:modelValue":re[29]||(re[29]=f=>W.updateKeys=f)},{default:(0,e.k6)(()=>[(0,e.eW)((0,s.v_)(F.$t("flat:transpose.updateKeys")),1)]),_:1},8,["modelValue"])],2)):(0,e.Q3)("",!0),W.optionDisplayed?((0,e.uX)(),(0,e.CE)("div",{key:2,class:(0,s.C4)([F.$style.tRow,"wrap-switch-contain"])},[(0,e.bF)(Ve,{id:"t-updateHarmonies",modelValue:W.updateHarmonies,"onUpdate:modelValue":re[30]||(re[30]=f=>W.updateHarmonies=f)},{default:(0,e.k6)(()=>[(0,e.eW)((0,s.v_)(F.$t("flat:transpose.updateChords")),1)]),_:1},8,["modelValue"])],2)):(0,e.Q3)("",!0),W.previewData?((0,e.uX)(),(0,e.Wv)(a,{class:(0,s.C4)(F.$style.tPreview),key:W.previewKey,data:W.previewData,dpi:60,"display-opts":W.displayOpts},null,8,["class","data","display-opts"])):(0,e.Q3)("",!0),W.transpositionPossible?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",{key:4,class:(0,s.C4)(F.$style.tWarn)},(0,s.v_)(F.$t("flat:transpose.warn-overflow")),3)),(0,e.Lk)("div",S,[(0,e.bF)(c,{theme:V.ctaTheme,type:"submit",onClick:re[31]||(re[31]=f=>V.processTranspose()),loading:W.processing,disabled:!W.transpositionPossible,onKeypress:re[32]||(re[32]=(0,d.D$)(()=>{},["stop"])),onKeydown:re[33]||(re[33]=(0,d.D$)(()=>{},["stop"])),onKeyup:re[34]||(re[34]=(0,d.D$)(()=>{},["stop"]))},{default:(0,e.k6)(()=>[(0,e.eW)((0,s.v_)(F.$t("flat:transpose.transpose")),1)]),_:1},8,["theme","loading","disabled"])])],34)],2)}var k=t(569445),O=t(364596),X=t(701387),L=t(351277),y=t(377180),j=t(241126),w=t(429145),g=t(832560),M=t(179397);function E({data:F,partUuid:re,staffUuid:Se,measureUuid:B}){const W=F.getPartIdxFromUuid(re),V=F.getPartStaffIdxFromUuid(W,Se),Ie=F.getMeasureIdxFromUuid(B),Ee=F.uuidGetMeasure(re,B);let De=new g.A(Ee);const ot=F.getPartStaffVoicesIndexes(W,V),je=Object.values(ot.filter(De.hasVoice,De)).map(f=>F.getPartVoiceUuid(W,f)),Ve=new w.A;Ve.setNbMeasures(1),De=F.getStaffMeasure({partIdx:W,measureIdx:Ie,staffIdx:V}),Ve.setTime(De.time),Ve.setScaling(6.35,40),Ve["action.AddPart"]({partIdx:0,instrumentName:"",MIDIProgram:"1",staves:[De]});const a=(0,M.A)(F,{partUuid:re,staffUuid:Se,measureUuid:B,voiceUuid:je[je.length-1]})-1,c=F.getMultiStavesRangeContent({content:[{partUuid:re,staffUuid:Se}],startPartUuid:re,stopPartUuid:re,startMeasureUuid:B,stopMeasureUuid:B,startVoiceUuid:je[0],stopVoiceUuid:je[je.length-1],startNoteIdx:0,stopNoteIdx:a});return Ve["action.InsertMultiStavesRangeContentAtIdx"]({partUuid:Ve.getPartUuid(0),measureUuid:Ve.getMeasureUuid(0),voiceIdx:Ve.getPartVoicesIndexes(0)[0],staffUuid:Ve.getPartStaffUuid(0,0),noteIdx:0,addVoice:!0,data:c}),Ve}var I=t(121648),C=t(909696),Z=t(531070),te=t(931720),U=t(653154),b=t(71204),z=t(279596),ce=t(599325),se=t(916504),x=t(645369),T=t.n(x),ne=t(6645),p=t(744056),le=t(774309);function A(){return window.flatappname&&window.flatappname.includes("vue-scoreditor")}function de(F,re,Se){return F!==0?F>0?"up":"down":re!==0?re>0?"up":"down":Se<0?"down":"up"}function Ae(F){return F===0?0:F}function be(F){const re=y.default.getDiatonic(F),Se=y.default.getChromatic(F),B=y.default.getOctaveChange(F),W=de(B,re,Se),V=W==="up"?1:-1,Ie=Ae(re*V),Ee=Ae(Se*V),De=Ae(B*V);return{direction:W,diatonic:Ie,chromatic:Ee,octave:De}}function ae({diatonic:F,chromatic:re,direction:Se,octave:B}){const W=Se==="down"?-1:1;return y.default.createComplete(re*W,F*W,B*W)}function ie(F,re){return L.default.transpose(re,F,!0)}function Ne({fromKey:F,toKey:re}){return L.default.getTransposeDiff(re,F)}function $e(F){const re=y.default.getOctaveChange(F),Se=y.default.getChromatic(F),B=Math.abs(y.default.getDiatonic(F));return{nbSemiTones:Se+re*y.default.NB_CHROMATIC,diatonic:B}}function Pe({nbSemiTones:F,diatonic:re}){let Se=1;F!==0&&(Se=F/Math.abs(F),F=Math.abs(F));const B=F%y.default.NB_CHROMATIC,W=Math.floor(F/y.default.NB_CHROMATIC);return y.default.createComplete(B*Se,re*Se,W*Se)}var we=Object.defineProperty,Ze=Object.defineProperties,nt=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,K=(F,re,Se)=>re in F?we(F,re,{enumerable:!0,configurable:!0,writable:!0,value:Se}):F[re]=Se,pe=(F,re)=>{for(var Se in re||(re={}))at.call(re,Se)&&K(F,Se,re[Se]);if(Ke)for(var Se of Ke(re))q.call(re,Se)&&K(F,Se,re[Se]);return F},Te=(F,re)=>Ze(F,nt(re)),ge=(F,re,Se)=>new Promise((B,W)=>{var V=De=>{try{Ee(Se.next(De))}catch(ot){W(ot)}},Ie=De=>{try{Ee(Se.throw(De))}catch(ot){W(ot)}},Ee=De=>De.done?B(De.value):Promise.resolve(De.value).then(V,Ie);Ee((Se=Se.apply(F,re)).next())});const Q=T()("flat:transpose"),Re=F=>JSON.parse(JSON.stringify(F)),Fe={INTERVAL:"interval",KEY:"key",SEMITONE:"semitone"},xe={0:[{value:"flat:transpose.diminished",chromatic:-1},{value:"flat:transpose.perfect",chromatic:0,default:!0},{value:"flat:transpose.augmented",chromatic:1}],1:[{value:"flat:transpose.diminished",chromatic:0},{value:"flat:transpose.minor",chromatic:1},{value:"flat:transpose.major",chromatic:2,default:!0},{value:"flat:transpose.augmented",chromatic:3}],2:[{value:"flat:transpose.diminished",chromatic:2},{value:"flat:transpose.minor",chromatic:3},{value:"flat:transpose.major",chromatic:4,default:!0},{value:"flat:transpose.augmented",chromatic:5}],3:[{value:"flat:transpose.diminished",chromatic:4},{value:"flat:transpose.perfect",chromatic:5,default:!0},{value:"flat:transpose.augmented",chromatic:6}],4:[{value:"flat:transpose.diminished",chromatic:6},{value:"flat:transpose.perfect",chromatic:7,default:!0},{value:"flat:transpose.augmented",chromatic:8}],5:[{value:"flat:transpose.diminished",chromatic:7},{value:"flat:transpose.minor",chromatic:8},{value:"flat:transpose.major",chromatic:9,default:!0},{value:"flat:transpose.augmented",chromatic:10}],6:[{value:"flat:transpose.diminished",chromatic:9},{value:"flat:transpose.minor",chromatic:10},{value:"flat:transpose.major",chromatic:11,default:!0}]},Qe={0:[{value:"flat:transpose.perfect",diatonic:0,default:!0}],1:[{value:"flat:transpose.augmented",diatonic:0},{value:"flat:transpose.minor",diatonic:1,default:!0}],2:[{value:"flat:transpose.major",diatonic:1,default:!0},{value:"flat:transpose.diminished",diatonic:2}],3:[{value:"flat:transpose.augmented",diatonic:1},{value:"flat:transpose.minor",diatonic:2,default:!0}],4:[{value:"flat:transpose.major",diatonic:2,default:!0},{value:"flat:transpose.diminished",diatonic:3}],5:[{value:"flat:transpose.augmented",diatonic:2},{value:"flat:transpose.perfect",diatonic:3,default:!0}],6:[{value:"flat:transpose.augmented",diatonic:3,default:!0},{value:"flat:transpose.diminished",diatonic:4}],7:[{value:"flat:transpose.perfect",diatonic:4,default:!0},{value:"flat:transpose.diminished",diatonic:5}],8:[{value:"flat:transpose.augmented",diatonic:4},{value:"flat:transpose.minor",diatonic:5,default:!0}],9:[{value:"flat:transpose.major",diatonic:5,default:!0},{value:"flat:transpose.diminished",diatonic:6}],10:[{value:"flat:transpose.augmented",diatonic:5},{value:"flat:transpose.minor",diatonic:6,default:!0}],11:[{value:"flat:transpose.major",diatonic:6,default:!0}]},ze=["flat:transpose.unison","flat:transpose.second","flat:transpose.third","flat:transpose.fourth","flat:transpose.fifth","flat:transpose.sixth","flat:transpose.seventh"],yt=["C","D","E","F","G","A","B"],ft=[{value:"editor:doubleFlat.title",alter:-2},{value:"editor:flat.title",alter:-1},{value:"editor:natural.title",alter:0},{value:"editor:sharp.title",alter:1},{value:"editor:doubleSharp.title",alter:2}],Oe="score-editor.transpo-mode";function ut(F,re){if(xe[F].findIndex(B=>B.chromatic===re)>=0)return re;const Se=xe[F].find(B=>B.default);if(!Se)throw new Error(`No default chromatif found for diatonic ${F}`);return Se.chromatic}function Tt(F,re){const Se=Math.abs(F)%y.default.NB_CHROMATIC;if(Qe[Se].findIndex(W=>W.diatonic===re)>=0)return re;const B=Qe[Se].find(W=>W.default);if(!B)throw new Error(`No default diatonic found for chromatic ${Se}`);return B.diatonic}function ht(F){const re=L.default.getAlter(F),Se=L.default.getOctave(F),B=L.default.getStep(F);return{octave:Se,step:B,alter:re}}function vt(F){const re=y.default.getDiatonic(F),Se=y.default.getOctaveChange(F),B=y.default.getChromatic(F);return{diatonic:re,chromatic:B,octave:Se}}const Rt={name:"DdnInnerTranspose",components:{StaticEmbedScore:le.A,Tab:ce.o,TabItem:ce.V,FSelectInput:z.N9,FNumberInputWithSteppers:b.A,FRadio:Z.A},emits:["close","resized"],props:{scoreData:{type:Object,required:!0}},setup(){const F=(0,i.F)(),re=(0,C.q6)(),Se=(0,I.W)();return{accountFeatures:(0,e.EW)(()=>F.accountFeatures),currentPart:(0,e.EW)(()=>Se.currentPart),displayMobileEditor:(0,e.EW)(()=>re.displayMobileEditor)}},data(){return{Mode:Fe,mode:se.A.get(Oe)||Fe.INTERVAL,processing:!1,optionDisplayed:!1,steps:yt,accidentals:ft,transposingPart:null,transpositionPossible:!0,transposeValue:y.default.createDefault(),diatonic:0,chromatic:0,direction:"up",octave:0,initialFromKey:{step:"C",alter:0,octave:4},fromKey:{step:"C",alter:0,octave:4},toKey:{step:"C",alter:0,octave:4},semiTones:0,previewData:null,previewKey:null,displayOpts:{hideTempo:!0,trackLeftMargin:0,trackRightMargin:0,trackTopMargin:1,trackBottomMargin:1},updateKeys:!0,updateHarmonies:!0}},watch:{diatonic(F){if(this.mode!==Fe.INTERVAL)return;const re=xe[F];!re||re.find(Se=>Se===this.chromatic)||(this.chromatic=re.find(Se=>Se.default).chromatic)},updateHarmonies(){this.updatePreview()},updateKeys(){this.updatePreview()}},computed:{isMainEditor:A,hasAccessToTranspo(){return!this.isMainEditor||this.accountFeatures.transposition},ctaTheme(){return this.hasAccessToTranspo?"fill":"fill-power"},qualities(){return xe[this.diatonic]},transposeActionParams(){return{updateKeys:this.updateKeys,updateHarmonies:this.updateHarmonies,transpose:vt(this.transposeValue)}},diatonicValues(){return[{value:"0",name:this.$t("flat:transpose.unison")},{value:"1",name:this.$t("flat:transpose.second")},{value:"2",name:this.$t("flat:transpose.third")},{value:"3",name:this.$t("flat:transpose.fourth")},{value:"4",name:this.$t("flat:transpose.fifth")},{value:"5",name:this.$t("flat:transpose.sixth")},{value:"6",name:this.$t("flat:transpose.seventh")}]},stepsValues(){return this.steps.map(F=>({value:F,name:F}))},accidentalsValues(){return this.accidentals.map(F=>({value:F.alter.toString(),name:this.$t(F.value)}))},fromAccidentalStr:{get(){return this.fromKey.alter.toString()},set(F){this.fromKey.alter=Number.parseInt(F,10)}},toAccidentalStr:{get(){return this.toKey.alter.toString()},set(F){this.toKey.alter=Number.parseInt(F,10)}},qualityValues(){return this.qualities.map(F=>({value:F.chromatic,name:this.$t(F.value)}))},diatonicStr:{get(){return this.diatonic.toString()},set(F){this.diatonic=Number.parseInt(F,10)}},chromaticStr:{get(){return this.chromatic.toString()},set(F){this.chromatic=Number.parseInt(F,10)}},semiToneIntervals(){let F=this.semiTones;F!==0&&(F=Math.abs(F));const re=F%y.default.NB_CHROMATIC;return Qe[re]}},methods:Te(pe({},(0,ne.i0)(te.B,["showUpgradeDialog"])),{setMode(F){this.mode=F,this.populateModeDataFromTranspose(),this.$emit("resized"),se.A.set(Oe,this.mode)},showOptions(F){this.optionDisplayed=F,this.$emit("resized")},getFullIntervalName(F,re){const Se=this.$t(re);return F=this.getDiatonicName(F),this.$t("flat:transpose.full-interval",{quality:Se,diatonic:F})},getDiatonicName(F){return this.$t(ze[F])},getTranspoMeasure(){const{scoreActions:F}=this.scoreData,{cursor:re,rangeSelect:Se}=F;let B,W,V;if(Se.hasRange()){const Ie=Se.getPartsStavesRange(),Ee=Se.getMeasuresUuids();({partUuid:B,staffUuid:W}=Ie[0]),V=Ee[0]}else({partUuid:B,staffUuid:W,measureUuid:V}=re.getPositionUuid());return{partUuid:B,staffUuid:W,measureUuid:V}},loadCurrentKey(){const{adagioData:F}=this.scoreData,{partUuid:re,measureUuid:Se}=this.getTranspoMeasure(),B=F.uuidGetMeasure(re,Se),W=X.default.getWrappedKey(B).getEntry(0),V=O.default.getTonic(W);this.initialFromKey.step=V.step,this.initialFromKey.alter=Number.parseInt(V.alter||0,10),Q("fromKey: step = %s, alter = %s",this.fromKey.step,this.fromKey.alter)},setupPreview(){try{const{adagioData:F}=this.scoreData,{partUuid:re,staffUuid:Se,measureUuid:B}=this.getTranspoMeasure(),W=E({data:F,partUuid:re,staffUuid:Se,measureUuid:B}),V=(0,j.s)(W.getPartUuid(0),W);V.updateKeys=this.updateKeys,V.updateHarmonies=this.updateHarmonies,V.transpose=y.default.copy(this.transposeValue);try{W["action.TransposeMultiStavesRange"](V)}catch(Ie){if(!(Ie instanceof k.A))throw Ie}this.previewData=(0,p.IG)(W),this.previewKey=new Date().getTime()}catch(F){(0,U.vV)(F,{logger:"transposePreview"}),this.previewData=null,this.transpositionPossible=!1}},setNbSemitones(F){this.semiTones=Number.parseInt(F,10),this.diatonic=this.semiToneIntervals.find(re=>re.default).diatonic,this.updateTransposeFromSemiTone()},updatePreview(){return ge(this,null,function*(){const F=Object.assign({},this.transposeActionParams,{dryRun:!0});this.transpositionPossible=yield this.scoreData.scoreActions.executePublicAction("transpose",F),this.transpositionPossible?(0,e.dY)(()=>this.setupPreview()):this.previewData=null})},setIntervalOctave(F){this.octave=Number.parseInt(F,10),this.updateTransposeFromInterval()},setFromOctave(F){this.fromKey.octave=Number.parseInt(F,10),this.updateTransposeFromKey()},setToOctave(F){this.toKey.octave=Number.parseInt(F,10),this.updateTransposeFromKey()},processTranspose(){return ge(this,null,function*(){if(!this.hasAccessToTranspo){this.showUpgradeDialog({feature:"transposition"});return}this.processing||(this.processing=!0,yield this.scoreData.scoreActions.executePublicAction("transpose",this.transposeActionParams),this.$emit("close"),this.processing=!1)})},populateModeDataFromTranspose(){if(this.mode===Fe.INTERVAL){const{chromatic:F,diatonic:re,octave:Se,direction:B}=be(this.transposeValue);this.diatonic=re>=0?re:0,this.octave=Se,this.direction=B,this.chromatic=ut(this.diatonic,F),this.updateTransposeFromInterval()}else if(this.mode===Fe.KEY)this.fromKey=Re(this.initialFromKey),this.toKey=ht(ie(this.transposeValue,this.fromKey)),this.updateTransposeFromKey();else if(this.mode===Fe.SEMITONE){const{nbSemiTones:F,diatonic:re}=$e(this.transposeValue);this.semiTones=F,this.diatonic=Tt(F,re),this.updateTransposeFromSemiTone()}},updateTransposeFromInterval(){this.transposeValue=ae({diatonic:this.diatonic,octave:this.octave,direction:this.direction,chromatic:this.chromatic}),this.updatePreview()},updateTransposeFromKey(){this.transposeValue=Ne({fromKey:this.fromKey,toKey:this.toKey}),this.updatePreview()},updateTransposeFromSemiTone(){this.transposeValue=Pe({nbSemiTones:this.semiTones,diatonic:this.diatonic}),this.updatePreview()}}),created(){this.loadCurrentKey(),this.populateModeDataFromTranspose(),this.transpositionPossible=!1,this.previewData=null,this.scoreData.scoreActions.rangeSelect.hasRange()||(this.transposingPart=this.currentPart.name)}};var It=t(778308),Lt=t.n(It),Ct=t(938793);const G={};G.$style=Lt();const Me=(0,Ct.A)(Rt,[["render",N],["__cssModules",G]]);var Xe=t(13626),rt=t(361826);const He={name:"ToolbarTranspose",width:44,props:{scoreData:{type:Object,required:!0}},components:{DdnInnerTranspose:Me,ToolbarComplexDdn:Xe.default},setup(){const F=(0,i.F)();return{accountFeatures:(0,e.EW)(()=>F.accountFeatures)}},computed:{mobileText(){return r.MR.t("editor:transpose.title")},isMainEditor:A,showPowerOnly(){return this.isMainEditor&&!this.accountFeatures.transposition},ddnClasses(){return(0,rt.default)(["ddn-content","ddn-transpose"])}},methods:{onClose(){this.$refs.ddn.onClose()}}};var lt=t(247477);const At={};At.powerStyle=lt.default;const gt=(0,Ct.A)(He,[["render",o],["__cssModules",At]])},698324:(l,n,t)=>{var e=t(182547);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("4668a590",e,!0,{})},703153:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=48,s=(0,o.pM)({name:"TbDynamic",props:{name:{type:String,required:!0},dynamic:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>u.noteInfo.dynamicStyle===d.dynamic);return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:m.value})}})},715484:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(243564);const i=56,s=(0,o.pM)({name:"TbOctaveShift",props:{scoreData:{type:Object,required:!0}},setup(d){const u=[{action:"toggle8va",value:"8down",icon:"8va"},{action:"toggle8ba",value:"8up",icon:"8ba"},{action:"toggle15va",value:"15down",icon:"15ma"},{action:"toggle15ba",value:"15up",icon:"15maBelow"}],m=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,css:"tb-8va",items:u,active:[m.tbOctaveShift],defaultActionIcon:"8va"})}})},717223:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=42,s=(0,o.pM)({name:"TbTechnicals",props:{name:{type:String,required:!0},technical:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>{var v;return(v=u.noteInfo.technical)==null?void 0:v.includes(d.technical)});return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:m.value})}})},725789:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(766144);const i=65,s=(0,o.pM)({name:"TbSlurs",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>u.noteInfo.isInSlur),v=(0,o.EW)(()=>u.noteInfo.slurPlacement),_=(0,o.EW)(()=>{const O=[];return v.value==="auto"&&O.push("setSlurPlacementAuto"),v.value==="above"&&O.push("setSlurPlacementAbove"),v.value==="below"&&O.push("setSlurPlacementBelow"),O}),S={value:"toggleSlurAtNote",action:"toggleSlurAtNote",icon:"toggleSlurAtNote"},N={value:"removeSlurAtNote",action:"removeSlurAtNote",icon:"removeSlurAtNote"},k=[{value:"setSlurPlacementAbove",action:"setSlurPlacementAbove",icon:"setSlurPlacementAbove"},{value:"setSlurPlacementBelow",action:"setSlurPlacementBelow",icon:"setSlurPlacementBelow"},{value:"setSlurPlacementAuto",action:"setSlurPlacementAuto",icon:"setSlurPlacementAuto"}];return()=>(0,o.h)(r.default,{scoreData:d.scoreData,css:"tb-slur",addValue:S,removeValue:N,items:k,active:m.value,activeOptions:_.value})}})},726218:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_AIf5R{width:auto;padding:12px}ul>li>button.item_Alidu{display:flex;width:337px;background:transparent;border:0;padding:12px 12px 12px 0;align-items:center;justify-content:center}ul>li>button.item_Alidu .fill{fill:var(--f-subdue)}ul>li>button.item_Alidu.active{background:#268ff433;border-radius:6px}.BottomSheets ul>li>button.item_Alidu{width:auto}.image_OKlAr{flex:0 0 55px}.text_UVrAD{flex:1 1 auto}.title_kqgaF{text-align:left;font-weight:700;font-size:14px;line-height:16px;color:var(--f-ink);margin-bottom:5px}.shortdesc_m0YuX{text-align:left;white-space:normal;font-size:13px;color:var(--f-subdue);letter-spacing:0;line-height:18px}*[data-color-mode=dark] .root_AIf5R li>button.item_Alidu .fill{fill:#fff}*[data-color-mode=dark] .root_AIf5R li>button.item_Alidu .title_kqgaF{color:#fff}*[data-color-mode=dark] .root_AIf5R li>button.item_Alidu.active{background-color:var(--f-ink)}
`,""]),s.locals={root:"root_AIf5R",item:"item_Alidu",image:"image_OKlAr",text:"text_UVrAD",title:"title_kqgaF",shortdesc:"shortdesc_m0YuX"};const d=s},733268:(l,n,t)=>{"use strict";t.d(n,{m:()=>e.A,u:()=>u});var e=t(5695),o=t(306441),r=t(945753),i=t(938793);const s={};s.$style=r.default;const u=(0,i.A)(o.A,[["__cssModules",s]])},733718:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`html .rootCommon_mOJAa{display:flex;position:relative}html .rootCommon_mOJAa .badge_g_XBK{position:absolute;overflow:hidden;height:0;width:0;font-size:9px;line-height:14px;font-weight:700;border-radius:50%;transition:all .15s cubic-bezier(.25,.1,.25,1);transform-origin:center center}html .rootCommon_mOJAa.active .badge_g_XBK{height:16px;width:16px}html .rootCommon_mOJAa .iconFlex_UHLjj{display:flex}html .rootDesktop_NWPNl{background:transparent;border:0;padding:0;height:42px;align-items:center;justify-content:center}html .rootDesktop_NWPNl .badge_g_XBK{top:4px;right:4px;background-color:var(--f-primary);border:1px solid white;color:#fff}html .rootDesktop_NWPNl .iconFlex_UHLjj{align-items:center;justify-content:center}html .rootDesktop_NWPNl .caret_jsfjm{margin-right:10px;width:0;height:0;border-left:3px solid transparent;border-right:3px solid transparent;border-top:3px solid var(--f-subdue)}html .rootDesktop_NWPNl .fill{fill:var(--f-subdue)}html .rootDesktop_NWPNl .stroke{stroke:var(--f-subdue)}html .rootDesktop_NWPNl.active .fill{fill:var(--f-primary)}html .rootDesktop_NWPNl.active .stroke{stroke:var(--f-primary)}html .rootDesktop_NWPNl.disabled{cursor:not-allowed}html .rootDesktop_NWPNl.disabled .fill{fill:var(--f-grey-disabled-content)}html .rootDesktop_NWPNl.disabled .stroke{stroke:var(--f-grey-disabled-content)}html .rootMobileDetailed_biL_6{width:100%;border:1px solid var(--f-subdue-10);box-shadow:inset 0 -2px 4px #2f344633;background-color:#fff;border-radius:4px;height:68px;min-width:58px;padding:8px;flex-direction:column;align-items:flex-start;justify-content:flex-end;transition:all ease-in-out .3s}html .rootMobileDetailed_biL_6 .t_SeONS{font-size:11px;color:var(--f-ink);white-space:nowrap}html .rootMobileDetailed_biL_6 .i_T7TTk svg{margin:0 0 -5px -15px}html .rootMobileDetailed_biL_6 .fill{fill:var(--f-ink)}html .rootMobileDetailed_biL_6 .stroke{stroke:var(--f-ink)}html .rootMobileDetailed_biL_6 .i_T7TTk.bigIcon_aOHDY svg{margin:0 0 -5px -10px}html .rootMobileDetailed_biL_6 .badge_g_XBK{top:21px;right:8px;background-color:#fff;border:1px solid white;color:var(--f-primary)}html .rootMobileDetailed_biL_6 .iconFlex_UHLjj{flex-direction:column;align-items:flex-start;justify-content:flex-end}html .rootMobileDetailed_biL_6.active{background:var(--f-primary)}html .rootMobileDetailed_biL_6.active .fill{fill:#fff}html .rootMobileDetailed_biL_6.active .stroke{stroke:#fff}html .rootMobileDetailed_biL_6.active .t_SeONS{color:#fff}html .rootMobileDetailed_biL_6.disabled{background:var(--f-grey-disabled-container-light);border:1px solid var(--f-grey-disabled-container);cursor:not-allowed}html .rootMobileDetailed_biL_6.disabled .fill{fill:var(--f-grey-disabled-content)}html .rootMobileDetailed_biL_6.disabled .stroke{stroke:var(--f-grey-disabled-content)}html .rootMobileDetailed_biL_6.disabled .t_SeONS{color:var(--f-grey-disabled-content)}html .rootMobileDetailed_biL_6:active{background:var(--f-primary);border:1px solid var(--f-primary-dark)}html .rootMobileDetailed_biL_6:active .fill{fill:#fff}html .rootMobileDetailed_biL_6:active .stroke{stroke:#fff}html .rootMobileDetailed_biL_6:active .t_SeONS{color:#fff}html .rootMobileSimple_ujeJ_{background:transparent;border:0;padding:0;height:42px;width:100%;align-items:center;justify-content:center}html .rootMobileSimple_ujeJ_ .i_T7TTk{display:flex}html .rootMobileSimple_ujeJ_ .t_SeONS{display:none}html .rootMobileSimple_ujeJ_ .fill{fill:var(--f-ink)}html .rootMobileSimple_ujeJ_ .stroke{stroke:var(--f-ink)}html .rootMobileSimple_ujeJ_.disabled{cursor:not-allowed}html .rootMobileSimple_ujeJ_.disabled .fill{fill:var(--f-grey-disabled-container)}html .rootMobileSimple_ujeJ_.disabled .stroke{stroke:var(--f-grey-disabled-container)}html .rootNativeSimple_kLP9d{width:28px;height:28px;border:none;background:transparent;box-shadow:0 0 0 1px #363c500a,0 1px 4px #363c5024;border-radius:8px;align-items:center;justify-content:center}html .rootNativeSimple_kLP9d .i_T7TTk{color:var(--f-subdue);display:flex}html .rootNativeSimple_kLP9d .t_SeONS{display:none}html .rootNativeSimple_kLP9d .fill{fill:var(--f-subdue)}html .rootNativeSimple_kLP9d .stroke{stroke:var(--f-subdue)}html .rootNativeSimple_kLP9d.disabled{background-color:var(--f-grey-disabled-container-light);cursor:not-allowed}html .rootNativeSimple_kLP9d.disabled .fill{fill:var(--f-grey-disabled-content)}html .rootNativeSimple_kLP9d.disabled .stroke{stroke:var(--f-grey-disabled-content)}html .rootNativeSimple_kLP9d:active{background:var(--f-primary);border:1px solid var(--f-primary-dark)}html .rootNativeSimple_kLP9d:active .fill{fill:#fff}html .rootNativeSimple_kLP9d:active .stroke{stroke:#fff}html .rootNativeSimple_kLP9d:active .t_SeONS{color:#fff}*[data-color-mode=dark] .rootMobileDetailed_biL_6{border-color:var(--f-subdue-dark);background:linear-gradient(180deg,var(--f-subdue-darker) 0%,var(--f-subdue-dark) 100%)}*[data-color-mode=dark] .rootMobileDetailed_biL_6 .t_SeONS{color:#fff}*[data-color-mode=dark] .rootMobileDetailed_biL_6 .fill{fill:#fff}*[data-color-mode=dark] .rootMobileDetailed_biL_6 .stroke{stroke:#fff}*[data-color-mode=dark] .rootMobileDetailed_biL_6.disabled{border:none;background:none;box-shadow:none}*[data-color-mode=dark] .rootMobileDetailed_biL_6.disabled .t_SeONS{color:var(--f-dark-disabled-content)}*[data-color-mode=dark] .rootMobileDetailed_biL_6.disabled .fill{fill:var(--f-dark-disabled-content)}*[data-color-mode=dark] .rootMobileDetailed_biL_6.disabled .stroke{stroke:var(--f-dark-disabled-content)}*[data-color-mode=dark] .rootNativeSimple_kLP9d{box-shadow:none;border:1px solid var(--f-subdue-dark);background-color:var(--f-subdue-darker)}*[data-color-mode=dark] .rootNativeSimple_kLP9d.disabled{border:none;background:none}*[data-color-mode=dark] .rootNativeSimple_kLP9d.disabled .fill{fill:var(--f-dark-disabled-content)}*[data-color-mode=dark] .rootNativeSimple_kLP9d.disabled .stroke{stroke:var(--f-dark-disabled-content)}
`,""]),s.locals={rootCommon:"rootCommon_mOJAa",badge:"badge_g_XBK",iconFlex:"iconFlex_UHLjj",rootDesktop:"rootDesktop_NWPNl",caret:"caret_jsfjm",rootMobileDetailed:"rootMobileDetailed_biL_6",t:"t_SeONS",i:"i_T7TTk",bigIcon:"bigIcon_aOHDY",rootMobileSimple:"rootMobileSimple_ujeJ_",rootNativeSimple:"rootNativeSimple_kLP9d"};const d=s},734957:(l,n,t)=>{var e=t(971706);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("1ab9a6f0",e,!0,{})},736600:(l,n,t)=>{"use strict";t.d(n,{A:()=>E});var e=t(361744),o=t(538065),r=t(555381);const i=["aria-label"];function s(I,C,Z,te,U,b){const z=(0,e.g2)("FNumberInputWithSteppers"),ce=(0,e.g2)("f-button"),se=(0,e.g2)("f-power-button");return(0,e.uX)(),(0,e.CE)("form",{class:(0,o.C4)(I.$style.root),onSubmit:C[3]||(C[3]=(0,r.D$)(x=>b.addMmr(),["prevent"])),"aria-label":I.$t("editor:multiMeasureRest.edition")},[(0,e.bF)(z,{modelValue:U.nbMeasures,"onUpdate:modelValue":C[0]||(C[0]=x=>U.nbMeasures=x),onChange:b.setNbMeasures,min:U.min,max:U.max,step:1,placeholder:U.min.toString(),onEsc:C[1]||(C[1]=x=>b.close()),ref:"mmrNumberInput",size:"small"},null,8,["modelValue","onChange","min","max","placeholder"]),b.enabledFeature?((0,e.uX)(),(0,e.Wv)(ce,{key:0,type:"submit","default-text":b.buttonText,theme:"fill",size:"small"},null,8,["default-text"])):((0,e.uX)(),(0,e.Wv)(se,{key:1,"show-icon":!1,type:"submit","default-text":b.buttonText,size:"small"},null,8,["default-text"])),b.active?((0,e.uX)(),(0,e.Wv)(ce,{key:2,type:"button",theme:"ghost-red",size:"small","default-text":"","aria-label":I.$t("flat:remove"),icon:b.removeIcon,onClick:C[2]||(C[2]=x=>b.removeMmr())},null,8,["aria-label","icon"])):(0,e.Q3)("",!0)],42,i)}var d=t(842746),u=t(472838),m=t(274486),v=t(121648),_=t(909696),S=t(445895),N=t(763939),k=t(71204),O=t(227468),X=t(727825);const L={name:"DdnInnerMultiMeasureRest",emits:["close"],props:{scoreData:{type:Object,required:!0},autoFocus:{type:Boolean,default:!0}},data(){return{nbMeasures:m.A.MIN_NB_MEASURES,min:m.A.MIN_NB_MEASURES,max:m.A.MAX_NB_MEASURES,watchingViewport:!1}},components:{FPowerButton:O.QY,FNumberInputWithSteppers:k.A},setup(){const I=(0,N.F)(),C=(0,v.W)(),Z=(0,_.q6)(),te=(0,X.N)();return{accountFeatures:(0,e.EW)(()=>I.accountFeatures),tbMultiMeasureRest:(0,e.EW)(()=>C.tbMultiMeasureRest),displayMobileEditor:(0,e.EW)(()=>Z.displayMobileEditor),selectedEntity:(0,e.EW)(()=>C.selectedEntity),watchViewport:te.watchViewport,unwatchViewport:te.unwatchViewport}},computed:{active(){var I;return this.tbMultiMeasureRest!==null||((I=this.selectedEntity)==null?void 0:I.entityType)===d.A.MULTI_MEASURE_REST},buttonText(){return this.active?"flat:edit":"flat:add"},removeIcon(){return S.A},enabledFeature(){return this.accountFeatures.mmr}},watch:{tbMultiMeasureRest(I){I!=null&&I.nbMeasures&&(this.nbMeasures=I.nbMeasures)},selectedEntity(I){(I==null?void 0:I.entityType)===d.A.MULTI_MEASURE_REST&&(this.nbMeasures=I.nbMeasures)}},methods:{addMmr(){this.scoreData.scoreActions.executePublicAction("addMultiMeasureRest",{nbMeasures:this.nbMeasures}),this.close()},removeMmr(){this.scoreData.scoreActions.executePublicAction("removeMultiMeasureRest"),this.close()},close(){this.$emit("close")},focusInput(){this.$refs.mmrNumberInput.focus()},setNbMeasures(I){this.nbMeasures=Number.parseInt(I,10)}},beforeMount(){this.displayMobileEditor&&(0,u.default)().then(()=>{this.watchViewport(),this.watchingViewport=!0})},beforeUnmount(){this.watchingViewport&&this.unwatchViewport()},created(){var I,C;if(((I=this.selectedEntity)==null?void 0:I.entityType)===d.A.MULTI_MEASURE_REST){this.nbMeasures=this.selectedEntity.nbMeasures;return}(C=this.tbMultiMeasureRest)!=null&&C.nbMeasures&&(this.nbMeasures=this.tbMultiMeasureRest.nbMeasures)},mounted(){this.autoFocus&&this.$refs.mmrNumberInput.focus()}};var y=t(502764),j=t.n(y),w=t(938793);const g={};g.$style=j();const E=(0,w.A)(L,[["render",s],["__cssModules",g]])},738307:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.tab_lYt28{display:flex;align-items:flex-start}
`,""]),s.locals={tab:"tab_lYt28"};const d=s},739813:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(243564);const i=57,s=(0,o.pM)({name:"TbSlash",props:{scoreData:{type:Object,required:!0}},setup(d){const u=[{action:"toggleSlashNotation",value:"false",icon:"slash"},{action:"toggleRhytmicNotation",value:"true",icon:"rhythmic"}],m=(0,e.W)(),v=(0,o.EW)(()=>m.tbSlash===null?[]:[m.tbSlash.toString()]);return()=>(0,o.h)(r.default,{scoreData:d.scoreData,css:"tb-slash",items:u,active:v.value,defaultActionIcon:"slash"})}})},741522:(l,n,t)=>{"use strict";t.d(n,{X:()=>e,m:()=>o});function e(){return{width:`${this.powerWidth}px`}}function o(){return this.showPowerOnly?{[this.powerStyle.toolbarMobilePowerBox]:!0}:{}}},743314:l=>{"use strict";l.exports='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path class="fill" fill-rule="evenodd" d="M13.733 8.016c0 4.407-3.066 7.984-6.867 7.984C3.066 16 0 12.423 0 8.016 0 3.576 3.066 0 6.866 0s6.867 3.577 6.867 8.016zM6.866.99c-1.341 0-2.395 3.034-2.395 6.802 0 3.737 1.054 6.77 2.395 6.77 1.31 0 2.395-3.033 2.395-6.77C9.261 4.024 8.176.99 6.866.99z"/></svg>'},744378:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.fretboard-nav.hasNavInside .fretboard-nav-btn[data-v-786d454c],.fretboard-nav.hasNavInside .enharmonic-switch[data-v-786d454c]{top:0}.fretboard-nav .fretboard-nav-btn[data-v-786d454c],.fretboard-nav .enharmonic-switch[data-v-786d454c]{z-index:5;position:absolute;top:-18px;color:var(--f-primary);display:flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:100px;background-image:linear-gradient(-180deg,#fefefe,#fbfcfc);box-shadow:0 2px 8px #28304f1a,0 1px 3px #28304f33}.fretboard-nav .fretboard-nav-btn.prev[data-v-786d454c],.fretboard-nav .enharmonic-switch.prev[data-v-786d454c]{left:8px}.fretboard-nav .fretboard-nav-btn.next[data-v-786d454c],.fretboard-nav .enharmonic-switch.next[data-v-786d454c]{right:8px}.fretboard-nav .enharmonic-switch[data-v-786d454c]{cursor:pointer;display:inline-flex;left:50px;width:64px}.fretboard-nav .enharmonic-switch .enharmonic-options[data-v-786d454c]{margin:2px;display:flex;justify-content:center;width:28px;height:28px;line-height:28px;border-radius:50%;color:var(--f-ink)}.fretboard-nav .enharmonic-switch .enharmonic-options.active[data-v-786d454c]{color:#fff;background:var(--f-primary)}
`,""]);const d=s},747648:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.ddnBeamingInner_hThit{width:380px;max-width:100vw;padding:16px 0}.BottomSheets .ddnBeamingInner_hThit{width:380px;width:unset}.dialog-content-wrapper .ddnBeamingInner_hThit{width:380px;width:unset}.ddnBeamingInner_hThit .tabs_vvWtf{margin:0 16px;border-bottom:1px solid var(--f-subdue-40);--f-tab-active-color: var(--f-primary)}.ddnBeamingInner_hThit .bSuggestions_DFln5{display:flex;flex-direction:column;padding:15px 0;max-height:50vh;overflow:auto}.ddnBeamingInner_hThit .bSuggestion_E8SQm{cursor:pointer;flex:0 0 auto;border:0;background:transparent;padding:5px 16px}.ddnBeamingInner_hThit .bCta_qiMQU{display:flex;align-items:center;justify-content:center}.ddnBeamingInner_hThit .restsCheckbox_XpQ0D{padding:0 16px}@media (max-width: 400px){.ddnBeamingInner_hThit .bTab_QuiCZ{flex:1 1 190px;padding:10px 5px}}*[data-color-mode=dark] .tabs_vvWtf{border-bottom-color:var(--f-subdue-fixed)}
`,""]),s.locals={ddnBeamingInner:"ddnBeamingInner_hThit",tabs:"tabs_vvWtf",bSuggestions:"bSuggestions_DFln5",bSuggestion:"bSuggestion_E8SQm",bCta:"bCta_qiMQU",restsCheckbox:"restsCheckbox_XpQ0D",bTab:"bTab_QuiCZ"};const d=s},749226:(l,n,t)=>{var e=t(817257);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("617f437b",e,!0,{})},750252:(l,n,t)=>{var e=t(951713);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("1f13a372",e,!0,{})},753700:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=46,s=(0,o.pM)({name:"TbWedge",props:{name:{type:String,required:!0},wedge:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>u.noteInfo.wedgeType===d.wedge);return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:m.value})}})},755540:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.ddnClefInner_pOpMR{display:flex;flex-wrap:wrap;align-items:center;max-width:360px;max-height:calc(100vh - 170px);overflow:auto;padding-bottom:22px}.ddnClefInner_pOpMR a{display:flex;margin:0 0 -22px}.ddnClefInner_pOpMR button{display:flex;margin:0 0 -22px;background-color:inherit;border:none;padding:0;cursor:pointer}.ddnClefInner_pOpMR svg{width:60px;margin:-5px 0}.ddnClefInner_pOpMR .stroke{stroke:var(--f-ink)}.ddnClefInner_pOpMR .fill{fill:var(--f-ink)}@media (max-width: 365px){.ddnClefInner_pOpMR{max-width:300px}}@media (max-width: 308px){.ddnClefInner_pOpMR{max-width:240px}}.BottomSheets .ddnClefInner_pOpMR{max-width:unset}.dialog-content-wrapper .ddnClefInner_pOpMR{max-width:unset}*[data-color-mode=dark] .ddnClefInner_pOpMR .stroke{fill:var(--f-subdue)}*[data-color-mode=dark] .ddnClefInner_pOpMR .fill{fill:var(--f-subdue)}
`,""]),s.locals={ddnClefInner:"ddnClefInner_pOpMR"};const d=s},757113:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.rootCommon_eBpxo{padding:0;display:flex;justify-content:center;align-items:center;width:28px;height:28px;border-radius:100px;border:none;box-shadow:0 0 0 1px #363c500a,0 1px 4px #363c5024}.rootPlay_rKTcq{background-color:transparent;color:var(--f-subdue)}.rootLoading_I5dag{background-color:transparent}.rootWarn_qQkBI{background-color:transparent;color:var(--f-safe-terracota)}.rootWarn_qQkBI svg{margin-top:-1px}@keyframes aud-ctrls-loader_TRqSk{0%{transform:rotate(0)}to{transform:rotate(359deg)}}.audioPlayLoader_K0Eux{display:block;width:20px;height:20px;border:2px var(--f-ink-20) solid;border-top:2px var(--f-primary) solid;border-radius:50%;animation:aud-ctrls-loader_TRqSk .6s infinite linear}*[data-color-mode=dark] .rootCommon_eBpxo{border:1px solid var(--f-subdue-dark)}*[data-color-mode=dark] .rootLoading_I5dag,*[data-color-mode=dark] .rootWarn_qQkBI,*[data-color-mode=dark] .rootPlay_rKTcq{background-color:var(--f-subdue-darker)}*[data-color-mode=dark] .rootPlay_rKTcq{color:#fff}
`,""]),s.locals={rootCommon:"rootCommon_eBpxo",rootPlay:"rootPlay_rKTcq",rootLoading:"rootLoading_I5dag",rootWarn:"rootWarn_qQkBI",audioPlayLoader:"audioPlayLoader_K0Eux","aud-ctrls-loader":"aud-ctrls-loader_TRqSk"};const d=s},764533:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root__hfHh{width:auto;padding:6px}ul>li>button.item_s1Nk6{display:flex;min-width:150px;width:100%;background:transparent;border:0;padding:6px;align-items:center;justify-content:center}ul>li>button.item_s1Nk6.active{background:#268ff433;border-radius:6px}ul>li>button.item_s1Nk6 .fill{fill:var(--f-subdue)}.image_Gd3JZ{flex:0 0 auto;margin-right:16px}.text_xTNPR{flex:1 1 auto}.title_RiGHW{text-align:left;font-weight:700;font-size:14px;line-height:16px;color:var(--f-ink);margin-bottom:5px}*[data-color-mode=dark] .root__hfHh li>button.item_s1Nk6 .title_RiGHW{color:var(--f-subdue-40)}*[data-color-mode=dark] .root__hfHh li>button.item_s1Nk6.active{background-color:var(--f-ink)}
`,""]),s.locals={root:"root__hfHh",item:"item_s1Nk6",image:"image_Gd3JZ",text:"text_xTNPR",title:"title_RiGHW"};const d=s},765996:l=>{"use strict";l.exports='<svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 16"><path class="fill" fill-rule="evenodd" d="M7.681 4.833c-.032-.032-.096-.064-.128-.128-.32-.352-.48-.832-.48-1.312 0-.32.064-.64.224-.929.192-.384.8-.768.8-1.216 0-.32-.416-.48-1.056-.48-.672 0-2.56.16-2.656 6.081 0 .512.096.768.288.768.064 0 .128 0 .192-.064a4.433 4.433 0 0 1 2.912-1.12c.992 0 1.985.352 2.849.992 1.024.768 1.824 1.888 1.952 3.2 0 .16.032.289.032.449 0 1.44-.736 2.88-1.856 3.776C9.602 15.78 8 16.003 6.56 16.003c-.8 0-1.76-.096-2.56-.449-1.249-.544-2.337-1.856-3.009-3.072C.288 11.202.032 9.538 0 8.065v-.128c0-1.504.544-3.2 1.248-4.544C2.4 1.216 4.673.032 7.105 0c.832 0 1.76.096 2.529.416.96.352 1.856 1.12 2.016 2.176.032.128.032.224.032.352 0 1.025-.768 2.049-1.76 2.305-.256.064-.545.128-.8.128-.513 0-1.057-.16-1.44-.544zM6.465 7.969c-1.024 0-1.856 1.6-1.856 3.585 0 1.984.832 3.584 1.856 3.584s1.888-1.6 1.888-3.584-.864-3.585-1.888-3.585z"/></svg>'},766144:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>ne});var e=t(361744),o=t(538065),r=t(555381),i=Object.defineProperty,s=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(p,le,A)=>le in p?i(p,le,{enumerable:!0,configurable:!0,writable:!0,value:A}):p[le]=A,v=(p,le)=>{for(var A in le||(le={}))d.call(le,A)&&m(p,A,le[A]);if(s)for(var A of s(le))u.call(le,A)&&m(p,A,le[A]);return p};const _=["aria-label"],S=["onClick","id"];function N(p,le,A,de,Ae,be){const ae=(0,e.g2)("DropdownTrigger"),ie=(0,e.g2)("ToolbarComplexDdnInner"),Ne=(0,e.gN)("dompurify-html"),$e=(0,e.gN)("tooltip");return(0,e.uX)(),(0,e.CE)("div",null,[(0,e.bo)((0,e.Lk)("div",null,[de.displayMobileEditor?((0,e.uX)(),(0,e.CE)("button",{key:1,class:(0,o.C4)({disabled:be.disabledReason,[p.tbButtonStyle.rootCommon]:!0,[p.tbButtonStyle.rootMobileDetailed]:!0}),onClick:le[1]||(le[1]=Pe=>be.exec(A.addValue))},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[p.tbButtonStyle.i]:!0,[p.tbButtonStyle.bigIcon]:be.isBigIcon})},null,2),[[Ne,be.iconSvg,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(p.tbButtonStyle.t)},(0,o.v_)(be.mobileText),3)],2)):(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{key:0,class:(0,o.C4)({disabled:be.disabledReason,[p.tbButtonStyle.rootCommon]:!0,[p.tbButtonStyle.rootDesktop]:!0}),onClick:le[0]||(le[0]=Pe=>be.exec(A.addValue)),"aria-label":be.mobileText},null,10,_)),[[Ne,be.iconSvg,"svg"]])],512),[[r.aG,!A.active]]),(0,e.bo)((0,e.bF)(ie,{ref:"ddn",title:be.mobileText,"tablet-ddn":!0},{trigger:(0,e.k6)(()=>[(0,e.bo)(((0,e.uX)(),(0,e.Wv)(ae,{"aria-label":be.mobileText,class:(0,o.C4)(be.triggerClasses)},{default:(0,e.k6)(()=>[de.displayMobileEditor?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,o.C4)(p.tbButtonStyle.iconFlex)},[(0,e.bo)((0,e.Lk)("span",{class:(0,o.C4)({[p.tbButtonStyle.i]:!0,[p.tbButtonStyle.bigIcon]:be.isBigIcon})},null,2),[[Ne,be.iconSvg,"svg"]]),(0,e.Lk)("span",{class:(0,o.C4)(p.tbButtonStyle.t)},(0,o.v_)(be.mobileText),3)],2)):(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(p.tbButtonStyle.iconFlex)},null,2)),[[Ne,be.iconSvg,"svg"]])]),_:1},8,["aria-label","class"])),[[$e,{text:be.tooltipText}]])]),default:(0,e.k6)(()=>[(0,e.Lk)("ul",{class:(0,o.C4)(v({[p.optionsStyle.root]:!0},be.contentClasses))},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(be.ddnItems,Pe=>((0,e.uX)(),(0,e.CE)("li",{key:Pe.value},[(0,e.Lk)("button",{onClick:we=>be.exec(Pe),id:`tb-ddni-${Pe.action}`,class:(0,o.C4)({[p.optionsStyle.item]:!0,active:A.activeOptions.includes(Pe.value),disabled:be.disabledItem(Pe)})},[(0,e.bo)((0,e.Lk)("div",{class:(0,o.C4)(p.optionsStyle.image)},null,2),[[Ne,Ae.icons[Pe.icon||Pe.action],"svg"]]),(0,e.Lk)("div",{class:(0,o.C4)(p.optionsStyle.text)},[(0,e.Lk)("p",{class:(0,o.C4)(p.optionsStyle.title)},(0,o.v_)(p.$t(`editor:${Pe.action}.title`)),3)],2)],10,S)]))),128))],2)]),_:1},8,["title"]),[[r.aG,A.active]])])}var k=t(27219),O=t(135519),X=t(121648),L=t(727137),y=t(909696),j=t(733268),w=t(653154),g=t(243935),M=t(26292),E=t(505522),I=t(34943),C=t(896099),Z=t(66682);const te={name:"ToolbarDropdown",components:{DropdownTrigger:j.u,ToolbarComplexDdnInner:I.default},props:{addValue:{type:Object,required:!0},removeValue:{type:Object,required:!0},items:{type:Array,required:!0},active:{type:Boolean,default:!1},activeOptions:{type:Array,default:()=>[]},mainText:{type:String,default:null},scoreData:{type:Object,required:!0}},data(){return{icons:E.default}},setup(){const p=(0,O.d)(),le=(0,y.q6)(),A=(0,X.W)();return{mainShortcutByAction:(0,e.EW)(()=>p.mainShortcutByAction),displayMobileEditor:(0,e.EW)(()=>le.displayMobileEditor),isEditionBlocked:(0,e.EW)(()=>A.isEditionBlocked)}},computed:{ddnPlacement(){return this.displayMobileEditor?"top":"bottom"},ddnItems(){return[this.removeValue].concat(this.items)},iconSvg(){return E.default[this.addValue.icon]},action(){return this.addValue.action},shortcut(){const p=this.mainShortcutByAction[this.addValue.action];return p?(0,M.lD)(p.shortcuts):null},mobileText(){if(this.mainText)return this.mainText;const p=k.actions;let le;return p[this.addValue.icon]&&(le=this.$t(`editor:${this.addValue.icon}.title`)),le=this.$t(`editor:${this.addValue.action}.title`),this.shortcut&&!this.displayMobileEditor&&(le+=` (${this.shortcut})`),le},tooltipText:Z.tooltipText,isDisabledEditionBlocked(){return this.isEditionBlocked?Object.prototype.hasOwnProperty.call(k.groups,"tie"):!1},disabledReason(){return this.isDisabledEditionBlocked?"editionBlocked":typeof this.disabled=="string"&&this.disabled||(0,L.x)()[`${this.addValue.action}DisabledReason`]},isBigIcon(){return(0,C.default)(this.addValue.icon)},contentClasses(){return this.displayMobileEditor?[this.ddnStyle.contentCommon,this.ddnStyle.contentMobile]:[this.ddnStyle.contentCommon]},triggerClasses(){const p=["active",this.tbButtonStyle.rootCommon];return this.disabledReason&&p.push("disabled"),this.displayMobileEditor?p.push(this.tbButtonStyle.rootMobileDetailed):p.push(this.tbButtonStyle.rootDesktop),p}},watch:{tooltipText(){this.setupMainTooltip()}},methods:{exec(p){return this.$refs.ddn.close(),this.disabledReason||this.disabledItem(p)?Promise.resolve():this.scoreData.scoreActions.executePublicAction(p.action)},setupMainTooltip(){document.body.classList.contains("touch")||(this.$tooltip&&this.$tooltip.destroy(),this.$tooltip=new g.vF(this.$el,{touch:!1,placement:"bottom",content:this.tooltipText,arrow:g.qO,duration:[0,0]}))},destroyMainTooltip(){this.$tooltip&&(this.$tooltip.destroy(),this.$tooltip=null)},disabledItem(p){return(0,L.x)()[`${p.action}DisabledReason`]}},mounted(){document.body.classList.contains("touch")||(this.setupMainTooltip(),this.items.forEach(p=>{const le=`tb-ddni-${p.action}`;if(this.$el.querySelector(`#${le}`)){const de=`${p.action}.title`;let Ae=this.$t(`editor:${de}`);de===Ae&&(0,w.vV)(new Error(`Missing i18n: ${de}`));const be=this.mainShortcutByAction[p.action];be&&(Ae+=` (${(0,M.lD)(be.shortcuts)})`)}}))},beforeUnmount(){this.destroyMainTooltip()}};var U=t(235398),b=t(384188),z=t(435196),ce=t.n(z),se=t(938793);const x={};x.tbButtonStyle=U.default,x.ddnStyle=b.default,x.optionsStyle=ce();const ne=(0,se.A)(te,[["render",N],["__cssModules",x]])},766914:(l,n,t)=>{"use strict";t.d(n,{U:()=>i,s:()=>s});var e=t(259563);const o=["articulations","classicHarmony","dynamicStyle","ghostNotes","hammerOnPullOffs","harmony","hasArpeggio","hasGlissando","isChord","isInSlur","isRest","isTied","lines","lyrics","nbDots","nbGraces","ornaments","pitches","technical","tupletType","wedgeType"],r=["clef","key","time","displayedTime","transpose"];function i({payload:d}){const u={};return o.forEach(m=>{u[m]=d[m]}),u.durationType=e.default.toMxl(d.durationType),u}function s({payload:d}){const u={};return r.forEach(m=>{u[m]=d[m]}),u}},766981:(l,n,t)=>{var e=t(34062);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("bda6438e",e,!0,{})},767183:(l,n,t)=>{var e=t(501804);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("3fec51e6",e,!0,{})},770184:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(909696),o=t(361744),r=t(299035);const i=40,s=(0,o.pM)({name:"TbPianoKeyboard",props:{scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.q6)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:"switchTouchUI",iconKey:"pianoKeyboard",active:u.touchUiDisplayed})}})},771714:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(243564);const i=57,s=(0,o.pM)({name:"TbJumpCall",props:{scoreData:{type:Object,required:!0}},setup(d){const u=[{action:"toggleFine",value:"fine",icon:"fine"},{action:"toggleDalSegno",value:"dalsegno",icon:"dalSegno"},{action:"toggleDacapo",value:"dacapo",icon:"dacapo"},{action:"toggleToCoda",value:"tocoda",icon:"toCoda"}],m=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,css:"tb-jump-call",items:u,active:[m.measureInfo.jumpCall],defaultActionIcon:"fine"})}})},772701:(l,n,t)=>{var e=t(504848);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("9d0bfc0e",e,!0,{})},774309:(l,n,t)=>{"use strict";t.d(n,{A:()=>j});var e=t(361744);const o={class:"static-embed-score score-drawer"};function r(w,g){return(0,e.uX)(),(0,e.CE)("div",o)}var i=t(269352),s=t(669834),d=t(624740),u=t(59377),m=t(937718),v=t(779197),_=t(616877),S=t.n(_),N=(w,g,M)=>new Promise((E,I)=>{var C=U=>{try{te(M.next(U))}catch(b){I(b)}},Z=U=>{try{te(M.throw(U))}catch(b){I(b)}},te=U=>U.done?E(U.value):Promise.resolve(U.value).then(C,Z);te((M=M.apply(w,g)).next())});const k=1,O=Number.POSITIVE_INFINITY,X={name:"staticEmbedScore",props:{data:{type:Object,required:!0},dpi:{type:Number,default:100},displayOpts:{type:Object,default(){return{}}}},methods:{setTempo(w){this.drawQueue.add(()=>N(this,null,function*(){this.data["action.SetTempo"]({tempo:w,startMeasureIdx:0,stopMeasureIdx:0},this.cancelStack)})),this.updateDisplay()},updateDisplay(){this.drawQueue.add(()=>N(this,null,function*(){yield this.displayUpdater.update(this.cancelStack),this.cancelStack=this.cancelStack.createSubstack("newDrawStack")}))}},mounted(){const w=new i.A("svg"),g=w.node();this.$el.appendChild(g);const M=new s.A(g);this.data.setScaling(6.35,24),this.cancelStack=new u.default,this.pageLayout=new m.A(this.data,this.dpi,M,d.default,this.displayOpts),this.displayUpdater=new v.A(this.data,this.pageLayout),this.drawQueue.add(()=>N(this,null,function*(){yield this.pageLayout.fillNextPage(w),this.$emit("mounted")}))},created(){this.drawQueue=new(S())(k,O)}};var L=t(938793);const j=(0,L.A)(X,[["render",r]])},778308:(l,n,t)=>{var e=t(328889);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("4c006678",e,!0,{})},780897:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>v,width:()=>m});var e=t(602494),o=t(121648),r=t(599284),i=t(941271),s=t(361744),d=t(127495);const u=[{action:"setEditionModeInsert",value:e.i},{action:"setEditionModeMelody",value:e.xU},{action:"setEditionModeChord",value:e.Nu}],m=39,v=(0,s.pM)({name:"TbEditionMode",props:{scoreData:{type:Object,required:!0}},setup(_){const S=(0,o.W)(),N=(0,r.H)(),k=(0,s.EW)(()=>u.filter(L=>!!N.enabledActionsSet.has(L.action)));function O(){(0,i.B)().addExperience("onboarding.editionMode.open")}function X(){(0,i.B)().addExperience("onboarding.editionMode.close")}return()=>(0,s.h)(d.default,{scoreData:_.scoreData,items:k.value,active:[S.editionMode],onOpenCallback:O,onCloseCallback:X,dataCy:"tb-editionMode"})}})},782449:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.ddnTimesigInner_d1pFs{display:flex}.BottomSheets .ddnTimesigInner_d1pFs{flex-direction:column;align-items:center}.ddnTimesigInner_d1pFs .tsSuggestions_mo6d1{display:flex;flex-wrap:wrap;width:108px;margin:15px 0 0 15px}.ddnTimesigInner_d1pFs .tsSuggestions_mo6d1 .fill{fill:var(--f-ink)}.ddnTimesigInner_d1pFs .tsSuggestions_mo6d1 .timesig-draw{cursor:pointer;padding-right:15px;padding-bottom:15px}.BottomSheets .ddnTimesigInner_d1pFs .tsSuggestions_mo6d1{max-width:350px;width:100%}.BottomSheets .ddnTimesigInner_d1pFs .tsSuggestions_mo6d1 .timesig-draw{flex:1 0 33%}.ddnTimesigInner_d1pFs .tsActions_RhHpJ{display:flex;align-items:center;border-left:1px solid var(--f-divider);margin:15px 15px 15px 0;padding-left:15px}.BottomSheets .ddnTimesigInner_d1pFs .tsActions_RhHpJ{display:flex;align-items:center;width:100%;max-width:350px;border-left:none;border-top:1px solid var(--f-divider);padding-left:0;padding-top:15px}.ddnTimesigInner_d1pFs .tsAction_zQoj_{display:flex;flex-direction:column;width:75px;align-items:center}.ddnTimesigInner_d1pFs .tsAction_zQoj_ .fill{fill:var(--f-ink)}.BottomSheets .ddnTimesigInner_d1pFs .tsAction_zQoj_{flex:1}.ddnTimesigInner_d1pFs .tsAction_zQoj_ .t_bprs_{text-align:center;text-transform:uppercase;font-weight:700;font-size:12px;color:var(--f-subdue);letter-spacing:.3px;margin-top:10px}.ddnTimesigCInner_ovOEf{max-width:240px}.ddnTimesigCInner_ovOEf .fill{fill:var(--f-ink)}.BottomSheets .ddnTimesigCInner_ovOEf{max-width:unset;display:flex;flex-direction:column;align-items:center}.BottomSheets .ddnTimesigCInner_ovOEf>*{max-width:350px}.ddnTimesigCInner_ovOEf .tsCustom_fPd7X{display:flex;align-content:flex-start;justify-content:space-between;padding:15px}.BottomSheets .ddnTimesigCInner_ovOEf .tsCustom_fPd7X{padding-bottom:30px}.ddnTimesigCInner_ovOEf .tsItem_hviVI{display:flex;flex-wrap:wrap}.ddnTimesigCInner_ovOEf .inputs_FV59K{display:flex;flex-direction:column}.ddnTimesigCInner_ovOEf .inputs_FV59K input{width:57px;padding:5px 10px;margin-top:8px}.ddnTimesigCInner_ovOEf .inputs_FV59K input.hasError_juDaj{border:1px solid var(--f-safe-red);color:var(--f-safe-red)}.ddnTimesigCInner_ovOEf .tsLabel_bZXmO{flex:1 1 100%;text-transform:uppercase;font-weight:700;font-size:12px;color:var(--f-subdue);display:flex;align-items:center;justify-content:center}.ddnTimesigCInner_ovOEf .tsLabel_bZXmO img{width:12px;height:12px;margin-left:5px}.ddnTimesigCInner_ovOEf .timesig-draw{width:42px}.ddnTimesigCInner_ovOEf .ts-cta{display:flex;align-content:center;justify-content:center;width:100%}.ddnTimesigCInner_ovOEf .ts-cta button{margin:0 0 15px;flex:0 0 auto}.BottomSheets .ddnTimesigCInner_ovOEf .ts-cta button{margin-bottom:25px}.ddnTimesigCInner_ovOEf .tsReal_NadAI .fill{fill:var(--f-grey-2)}.ddnTimesigCInner_ovOEf .tsSymbolCheckbox_ZuGWn{display:flex;align-content:center;justify-content:center;width:100%;margin-bottom:10px}.BottomSheets .ddnTimesigCInner_ovOEf .tsSymbolCheckbox_ZuGWn{margin-bottom:35px}*[data-color-mode=dark] .ddnTimesigInner_d1pFs .fill{fill:var(--f-subdue)}
`,""]),s.locals={ddnTimesigInner:"ddnTimesigInner_d1pFs",tsSuggestions:"tsSuggestions_mo6d1",tsActions:"tsActions_RhHpJ",tsAction:"tsAction_zQoj_",t:"t_bprs_",ddnTimesigCInner:"ddnTimesigCInner_ovOEf",tsCustom:"tsCustom_fPd7X",tsItem:"tsItem_hviVI",inputs:"inputs_FV59K",hasError:"hasError_juDaj",tsLabel:"tsLabel_bZXmO",tsReal:"tsReal_NadAI",tsSymbolCheckbox:"tsSymbolCheckbox_ZuGWn"};const d=s},789051:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>i,width:()=>r});var e=t(361744),o=t(299035);const r=36,i=(0,e.pM)({name:"TbCopy",props:{scoreData:{type:Object,required:!0},buttonStyle:{type:String,default:"detailed"}},setup(s){return()=>(0,e.h)(o.default,{buttonStyle:s.buttonStyle,scoreData:s.scoreData,action:"copy"})}})},789828:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.b-beaming-display{overflow:auto;background:linear-gradient(to right,#fff,#fff,#fff0 1.5em),radial-gradient(farthest-side at 0 50%,#22222280,#fff0),linear-gradient(to left,#fff,#fff,#fff0 1.5em),radial-gradient(farthest-side at 100% 50%,#22222280,#fff0) 100%;background-color:#fff;background-repeat:no-repeat;background-attachment:local,scroll,local,scroll;background-size:100% 100%,.75em 100%,100% 100%,.75em 100%;height:100%;color:var(--f-ink)}.b-beaming-display .fill{fill:var(--f-ink)}.b-beaming-display.active{background:linear-gradient(to right,#d7e9fd,#d7e9fd,#fff0 1.5em),radial-gradient(farthest-side at 0 50%,#22222280,#fff0),linear-gradient(to left,#d7e9fd,#d7e9fd,#fff0 1.5em),radial-gradient(farthest-side at 100% 50%,#22222280,#fff0) 100%;background-color:#d7e9fd;background-repeat:no-repeat;background-attachment:local,scroll,local,scroll;background-size:100% 100%,.75em 100%,100% 100%,.75em 100%;height:100%;border-radius:6px}.b-beaming-display .b-beats{display:flex}.b-beaming-display .b-beats>span{display:flex}.b-beaming-display .b-beats>span:first-child{margin-left:auto}.b-beaming-display .b-beats>span:last-child{margin-right:auto}.b-beaming-display .b-beat-beam-wrap{position:relative;z-index:100;width:20px}.b-beaming-display .b-beat-beam{display:block;position:relative;height:3px;width:20px;top:21px}.b-beaming-display .b-beat-beam.active{background:var(--f-primary)}.b-beaming-display.edit{margin:20px 0}.b-beaming-display.edit .b-beat-beam-wrap{cursor:pointer}.b-beaming-display.edit .b-beat-beam{background:var(--f-grey-2)}.b-beaming-display.edit .b-beat-beam.active{background:var(--f-primary)}.b-beaming-display.disabled{color:var(--f-grey-disabled-content)}.b-beaming-display.disabled .fill{fill:var(--f-grey-disabled-content)}.b-beaming-display.disabled .b-beat-beam{background:var(--f-grey-disabled-content)}.b-beaming-display .b-beat-icon{display:flex}.b-beaming-display .b-beat-icon svg{margin:0 -5px}.b-beaming-display .b-legend{text-align:center;letter-spacing:2px;line-height:20px;font-size:14px;padding-bottom:5px}*[data-color-mode=dark] .b-beaming-display{background:linear-gradient(to right,var(--f-bg-dark),var(--f-bg-dark),rgba(255,255,255,0) 1.5em),radial-gradient(farthest-side at 0 50%,#22222280,#fff0),linear-gradient(to left,var(--f-bg-dark),var(--f-bg-dark),rgba(255,255,255,0) 1.5em),radial-gradient(farthest-side at 100% 50%,#22222280,#fff0) 100%;background-color:var(--f-bg-dark);background-repeat:no-repeat;background-attachment:local,scroll,local,scroll;background-size:100% 100%,.75em 100%,100% 100%,.75em 100%;height:100%;color:var(--f-subdue)}*[data-color-mode=dark] .b-beaming-display.active{background:linear-gradient(to right,var(--f-ink),var(--f-ink),rgba(255,255,255,0) 1.5em),radial-gradient(farthest-side at 0 50%,#22222280,#fff0),linear-gradient(to left,var(--f-ink),var(--f-ink),rgba(255,255,255,0) 1.5em),radial-gradient(farthest-side at 100% 50%,#22222280,#fff0) 100%;background-color:var(--f-ink);background-repeat:no-repeat;background-attachment:local,scroll,local,scroll;background-size:100% 100%,.75em 100%,100% 100%,.75em 100%;height:100%;border-radius:6px}*[data-color-mode=dark] .b-beaming-display .fill{fill:var(--f-subdue)}*[data-color-mode=dark] .b-beaming-display.disabled{color:var(--f-dark-disabled-content)}*[data-color-mode=dark] .b-beaming-display.disabled .fill{fill:var(--f-dark-disabled-content)}*[data-color-mode=dark] .b-beaming-display.disabled .b-beat-beam{background:var(--f-dark-disabled-content)}
`,""]);const d=s},793052:(l,n,t)=>{var e={"./Arpeggio.js":59004,"./Articulation.js":298555,"./Barline.js":82799,"./Beam.js":152389,"./BeamingPolicy.vue":102062,"./Bend.js":41629,"./BendRelease.js":926424,"./BinaryOrnament.js":828023,"./BtnMore.vue":850569,"./ChangeDurationMode.js":688333,"./ChangeKeepExistingRestDuration.js":322160,"./Clef.vue":171748,"./ConcertPitch.js":977598,"./Copy.js":789051,"./Cut.js":474008,"./Dead.js":370964,"./DisplayMode.js":599877,"./Dots.js":627554,"./Drumroll.js":214521,"./Dynamic.js":703153,"./EditionMode.js":780897,"./Ending.js":573825,"./Export.vue":308439,"./Fingerings.js":315158,"./Ghost.js":361303,"./Glissando.js":366562,"./GraceSlurs.js":900591,"./HammerOnPullOff.js":987041,"./Harmonic.js":100273,"./Icons.js":505522,"./JumpCall.js":771714,"./JumpTag.js":300208,"./KeySignature.vue":862096,"./MeasureRepeat.js":927663,"./Mordent.js":352111,"./MultiMeasureRest.vue":551636,"./Mute.js":898419,"./NoteAccidental.js":864058,"./NoteColor.vue":88681,"./NoteDuration.js":187238,"./NoteNatural.js":477113,"./NoteUnpitchedHead.js":330948,"./OctaveShift.js":715484,"./PageBreak.js":806022,"./Paste.js":941287,"./Pedal.js":589552,"./PianoKeyboard.js":770184,"./Pizzicato.js":63039,"./PluckedRange.js":983567,"./PreBend.js":312762,"./QuarterAccidental.js":494924,"./Rehearsal.vue":614976,"./RepeatXTimes.vue":338153,"./ScoreSelectedNative.vue":656459,"./Separator.vue":104662,"./Slash.js":739813,"./Slide.js":422393,"./Slurs.js":725789,"./SplitStaff.vue":566357,"./Swing.js":104410,"./SwitchEnharmonic.js":249142,"./SystemBreak.js":945056,"./Technical.js":717223,"./Tempo.vue":313162,"./TempoChange.js":59271,"./TextMode.js":171686,"./TextModeNative.vue":80790,"./Tie.js":584314,"./TimeSignature.vue":467611,"./ToggleWithOptions.vue":766144,"./ToolbarBadgeIcon.vue":96942,"./ToolbarComplexDdn.vue":13626,"./ToolbarComplexDdnInner.vue":34943,"./ToolbarDetailedSelector.vue":127495,"./ToolbarDropdown.vue":243564,"./ToolbarInstruments.vue":879321,"./ToolbarInstrumentsItem.vue":588892,"./ToolbarInstrumentsList.vue":473965,"./ToolbarPlayStop.vue":438628,"./ToolbarSimpleIcon.vue":299035,"./Transpose.vue":696104,"./Tremolo.js":16072,"./Tremolo2.js":391488,"./Tuplets.vue":112980,"./Turn.js":849421,"./Voices.vue":671187,"./Wedge.js":753700,"./Zoom.js":238853,"./classesListToObject.js":361826,"./isBigIcon.js":896099,"./tooltipHelpers.js":66682};function o(i){var s=r(i);return t(s)}function r(i){if(!t.o(e,i)){var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}return e[i]}o.keys=function(){return Object.keys(e)},o.resolve=r,l.exports=o,o.id=793052},794112:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.se-txt-input[data-v-03d0310d]{white-space:nowrap}.score-text-input[data-v-03d0310d]{display:inline-block;vertical-align:middle;min-height:18px}.score-input-arrow[data-v-03d0310d]{--f-touch-zone-enlarge: 3px;box-sizing:content-box;display:inline-block;vertical-align:middle;width:16px;height:18px;padding:var(--f-touch-zone-enlarge);background-color:#eaeaec;background-clip:content-box;border-radius:calc(2px + var(--f-touch-zone-enlarge));border:0;margin-left:-4px}.score-input-arrow+.score-input-arrow[data-v-03d0310d]{margin-left:-8px}.score-input-arrow .icon[data-v-03d0310d]{margin-top:2px}.score-input-arrow[data-v-03d0310d]:active{background-color:var(--f-primary)}.score-input-arrow:active svg path[data-v-03d0310d]{fill:#fff}
`,""]);const d=s},794119:(l,n,t)=>{"use strict";t.d(n,{$:()=>C,d:()=>U});var e=t(533343),o=t(601202),r=t(74957),i=t(865349),s=t(184469),d=t(310868),u=t(381216);const m=["11","13","2","3","4","5","6","7","9"],v=["no","omit"],_=["2","3","4"],S=new Map([["#",1],["+",1],["=",0],["b",-1],["-",-1]]),N=["add","no","#","b","-","+","sus","omit",","];function k(b,z){return b<0&&z>=0?z:b>=0&&z<0?b:Math.min(b,z)}function O(b){b=b.slice(1);const z=N.map(ce=>b.indexOf(ce)).reduce(k,-1);return z===-1?z:z+1}function X(b){const z=[];for(;;){const ce=O(b);if(ce<0)break;z.push(b.slice(0,ce)),b=b.slice(ce)}return b.length>0&&z.push(b),z}function L(b){return b.includes("24")?{sus:24}:b.includes("2")?{sus:2}:b.includes("4")?{sus:4}:{sus:4}}function y(b){const z=m.find(ce=>b.includes(ce));return z?Number.parseInt(z,10):null}function j(b){return v.some(z=>b.includes(z))}function w(b){const z=[...S.keys()].find(ce=>b.includes(ce));return z?S.get(z):0}function g(b){if(b.includes("sus"))return L(b);const z=y(b);return z===null?null:j(b)?{omit:!0,value:z}:{alter:w(b),value:z}}function M(b){let z=null;return b=b.filter(ce=>ce.sus?(z=ce.sus,!1):!0),{suspended:z,entries:b}}function E(b){return b.filter(z=>!_.includes(z.value))}function I(b,z){if(z.delete(3),[2,24].includes(b)){const ce=r.A.create(2,u.A.ADD,0);z.set(2,ce)}if([4,24].includes(b)){const ce=r.A.create(4,u.A.ADD,0);z.set(4,ce)}}function C(b,z){b=b.toLowerCase();let se=X(b).map(g);se=se.filter(A=>A!==null);const x=M(se),{suspended:T}=x;se=x.entries,T&&(se=E(se));const ne=new Map((0,i.A)(z).map(A=>[r.A.getValue(A),A]));se.forEach(A=>{if(A.omit)ne.delete(A.value);else{const de=r.A.create(A.value,u.A.ADD,A.alter);ne.set(A.value,de)}}),T&&I(T,ne);const p=[...ne.values()];p.sort(r.A.compare);const le=(0,s.A)(z,p);return{useSuspended:!!T,degrees:le}}const Z=new Map([[-1,"b"],[0,""],[1,"#"]]),te=new Map([[e.A.SUS_2,"sus2"],[e.A.SUS_4,"sus4"],[e.A.SUS_24,"sus24"]]);function U({chordKind:b,degrees:z,useSuspended:ce}){if(z.length===0)return"";let se=(0,d.A)(b,z),x=null;ce&&({suspension:x,allDegrees:se}=(0,o.A)({chordKind:b,allDegrees:se}),z=(0,s.A)(b,se));const T=new Map(se.map(p=>[r.A.getValue(p),p])),ne=[];return x&&ne.push(te.get(x)),z.forEach(p=>{let le="";const A=r.A.getValue(p);if(r.A.getType(p)===u.A.SUBTRACT)le+="no";else{const Ae=T.get(A),be=r.A.getAlter(Ae);be===0&&ne.length>0&&(le+=","),le+=Z.get(be)}le+=A,ne.push(le)}),ne.join("")}},799001:(l,n,t)=>{var e=t(105884);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("0206e000",e,!0,{})},806022:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=42,s=(0,o.pM)({name:"TbPageBreak",props:{scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:"togglePageBreak",iconKey:"pageBreak",active:u.measureInfo.pageBreak==="yes"})}})},807720:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.ddnRehearsalInner_UStNc{display:flex;align-items:center}.ddnRehearsalInner_UStNc .stroke{stroke:var(--f-subdue)}.ddnRehearsalInner_UStNc .fill{fill:var(--f-subdue)}.ddnRehearsalInner_UStNc a{display:flex;padding:5px 0}.ddnRehearsalInner_UStNc a.active_nGirR .fill{fill:var(--f-primary)}.ddnRehearsalInner_UStNc a.active_nGirR .stroke{stroke:var(--f-primary)}.ddnRehearsalInner_UStNc .btn:last-child{padding-right:5px}.ddnRehearsalCInner_cdEcw{display:flex;padding:16px;gap:8px}
`,""]),s.locals={ddnRehearsalInner:"ddnRehearsalInner_UStNc",active:"active_nGirR",ddnRehearsalCInner:"ddnRehearsalCInner_cdEcw"};const d=s},813668:(l,n,t)=>{var e=t(415353);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("63719239",e,!0,{})},814956:(l,n,t)=>{var e=t(224481);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("75a2af5a",e,!0,{})},817257:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.groupDesktop_PDtai{display:flex;flex-wrap:nowrap;white-space:nowrap}.groupMobile_XdxDE{display:grid;grid-gap:4px;grid-auto-flow:column;grid-auto-columns:max-content}.groupMobile_XdxDE:not(.singleLine_OStys){grid-template-rows:68px 68px}.groupMobile_XdxDE:first-child{padding-left:8px}.groupMobile_XdxDE:last-child{padding-right:8px}
`,""]),s.locals={groupDesktop:"groupDesktop_PDtai",groupMobile:"groupMobile_XdxDE",singleLine:"singleLine_OStys"};const d=s},822678:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_at7gi{display:flex;align-items:center;flex-direction:column;gap:8px}.buttons_M0K5i{display:flex;gap:8px}.buttonContainer_ycw3S{width:48px;height:32px}.entry_mvv8T{width:48px;height:32px;display:flex;justify-content:center;align-items:center;border:1px solid var(--f-subdue-40);border-radius:8px;background-color:#fff;color:var(--f-subdue);font-size:14px;font-weight:400}.entry_mvv8T .fill{fill:var(--f-subdue)}.entry_mvv8T>svg{display:block;height:16px}.entry_mvv8T.active_R78Yb{border-color:var(--f-primary);color:var(--f-primary);background-color:var(--f-primary-10);font-weight:600}.entry_mvv8T.active_R78Yb .fill{fill:var(--f-primary)}.entry_mvv8T.disabled_bGYdH{border-color:var(--f-grey-disabled-content);color:var(--f-grey-disabled-content);background-color:var(--f-grey-disabled-container)}.entry_mvv8T.disabled_bGYdH .fill{fill:var(--f-grey-disabled-content)}.sizes__ec_A{display:flex;gap:16px}*[data-color-mode=dark] .root_at7gi .radio{border-color:var(--f-ink)}*[data-color-mode=dark] .root_at7gi .radio-content{color:#fff}*[data-color-mode=dark] .entry_mvv8T{background-color:var(--f-bg-dark);color:var(--f-subdue-40);border-color:var(--f-subdue-40)}*[data-color-mode=dark] .entry_mvv8T.active_R78Yb{border-color:var(--f-primary);background-color:var(--f-ink)}
`,""]),s.locals={root:"root_at7gi",buttons:"buttons_M0K5i",buttonContainer:"buttonContainer_ycw3S",entry:"entry_mvv8T",active:"active_R78Yb",disabled:"disabled_bGYdH",sizes:"sizes__ec_A"};const d=s},827717:(l,n,t)=>{"use strict";t.d(n,{A:()=>T});var e=t(342023),o=t(331751),r=t(513411),i=t(934825),s=t(83738),d=t(282610),u=t(398719),m=t(781942),v=t(35802),_=t(721247),S=t(701387),N=t(589085),k=t(104907),O=t(292681),X=t(538783),L=t(624740),y=t(390253);const j=y.A.POINTS_BY_INCH,w=5,g=1,M=1,E=2,I=1,C=4,Z="drumIcon",te={stemStrategy:X.A.UP,noteIdx:0,isAlone:!1,isPickup:!1,timePos:0},U=new Map,b=new Map;function z(ne){if(!U.has(ne)){const p={};v.default.setNbStaves(p,g),v.default.setDpq(p,M),v.default.setClef(p,[_.default.createPercussion()]);const le=k.default.create(ne);v.default.setStaffDetails(p,[le]);const A={};S.default.setAttributes(A,p);const de=new u.A(A);U.set(ne,de)}return U.get(ne)}function ce(ne){if(!b.has(ne)){const le={},A=new o.A(null,L.default,ne,j,le);b.set(ne,A)}return b.get(ne)}const se=[i.A,s.A];function x(ne,p){ne.setDrawingContext(p),ne.initLocalVerticalAlignment();const le=ne.getDisplayData();se.forEach(A=>{const de=new A(le);de.canDraw()&&de.draw(ne,p)}),ne.bindHeads()}function T(ne){const p=new e.default,le=new e.default("g");le.attr("class",Z),p.append(le);const A=ce(ne.pixelStaffSize),de=A.getSpaceSize(),Ae=de*w,be=N.A.create(ne.nbStaffLines,!1,!1,!1),ae=new r.A;ae.setParent(le),ae.setStaffData(be),ae.setWidth(Ae),ae.setDrawingContext(A),ae.setPosition(0),ae.draw();const ie={duration:1,unpitched:O.default.copy(ne.unpitched),notehead:ne.notehead},Ne=z(ne.nbStaffLines),$e=(0,m.A)([ie],Ne,te),Pe=new d.A($e);Pe.setParent(le),x(Pe,A);const we=Pe.getWidth();Pe.setPosition(Ae/2-we/2),Pe.draw();const Ze=de*C,nt=de*I,Ke=de*E;let at=0-Pe.getHighestY();at=Math.max(at+nt,Ke);let q=Pe.getLowestY()-Ze;q=Math.max(q+nt,Ke),le.attr("transform",`translate(0 ${at})`);const K=at+Ze+q;return p.attr("width",Ae),p.attr("height",K),p.node()}},828023:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>u,width:()=>d});var e=t(724095),o=t(568357),r=t(121648),i=t(361744),s=t(299035);const d=42,u=(0,i.pM)({name:"TbBinOrnament",props:{name:{type:String,required:!0},ornament:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(m){const v=(0,r.W)(),_=(0,i.EW)(()=>{if(!v.noteInfo.ornaments)return!1;if(m.ornament===e.A.TREMOLO){const S=v.noteInfo.ornaments[m.ornament];return!!S&&!o.A.isValid(S.type)}return!!v.noteInfo.ornaments[m.ornament]});return()=>(0,i.h)(s.default,{scoreData:m.scoreData,action:m.name,active:_.value})}})},828454:(l,n,t)=>{var e=t(996387);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("f5af4f9e",e,!0,{})},829177:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_bOta2{display:flex;gap:8px;width:100%;align-items:center}.rightBlock_TMRn5{display:flex;flex-grow:1;flex-shrink:1}
`,""]),s.locals={root:"root_bOta2",rightBlock:"rightBlock_TMRn5"};const d=s},838074:(l,n,t)=>{var e=t(688761);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("387f5575",e,!0,{})},845126:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_dtOJX{display:flex;gap:8px;align-items:center;padding:8px;transition:opacity .4s ease}.root_dtOJX.v-enter-active{position:fixed;bottom:0;left:0;right:0}.root_dtOJX.v-enter-from{opacity:0}.root_dtOJX.v-enter-to{opacity:1}.root_dtOJX.v-leave-to,.root_dtOJX.v-leave-from{display:none}.root_dtOJX.hasBottomPadding_FzXmx{padding-bottom:40px}
`,""]),s.locals={root:"root_dtOJX",hasBottomPadding:"hasBottomPadding_FzXmx"};const d=s},847641:(l,n,t)=>{var e=t(807720);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("17b2e17e",e,!0,{})},849324:(l,n,t)=>{"use strict";t.d(n,{A:()=>at});var e=t(361744),o=t(744056),r=t(538065),i=t(121648),s=t(591340),d=t(883892),u=t(909696),m=t(599284),v=t(544582),_=t(612732),S=t(645369),N=t.n(S),k=t(116450),O=t(521402);const X={class:"se-tb-mid"},L={class:"se-tb-mid-r"};function y(q,K,pe,Te,ge,Q){const Re=(0,e.g2)("voices"),Fe=(0,e.g2)("toolbar-simple-icon"),xe=(0,e.g2)("copy"),Qe=(0,e.g2)("cut"),ze=(0,e.g2)("paste"),yt=(0,e.g2)("display-mode");return(0,e.uX)(),(0,e.CE)("div",X,[q.tbVoiceEnabled?((0,e.uX)(),(0,e.Wv)(Re,{key:0,"score-data":q.scoreData},null,8,["score-data"])):(0,e.Q3)("",!0),(0,e.Lk)("div",L,[(0,e.bF)(Fe,{"score-data":q.scoreData,"button-style":"simple",action:"undo"},null,8,["score-data"]),(0,e.bF)(Fe,{"score-data":q.scoreData,"button-style":"simple",action:"redo"},null,8,["score-data"]),q.range?((0,e.uX)(),(0,e.Wv)(xe,{key:0,"score-data":q.scoreData,"button-style":"simple"},null,8,["score-data"])):(0,e.Q3)("",!0),q.range?((0,e.uX)(),(0,e.Wv)(Qe,{key:1,"score-data":q.scoreData,"button-style":"simple"},null,8,["score-data"])):((0,e.uX)(),(0,e.Wv)(ze,{key:2,"score-data":q.scoreData,"button-style":"simple"},null,8,["score-data"])),(0,e.bF)(Fe,{"score-data":q.scoreData,"button-style":"simple",action:"removeThenGoLeft"},null,8,["score-data"]),(0,e.bF)(yt,{"score-data":q.scoreData,"button-style":"simple","data-cy":"tb-switchScoreDisplayMode"},null,8,["score-data"])])])}var j=t(789051),w=t(474008),g=t(599877),M=t(941287),E=t(299035),I=t(671187);const C=(0,e.pM)({name:"ToolbarMobMid",props:{scoreData:{type:Object,required:!0}},components:{ToolbarSimpleIcon:E.default,Voices:I.default,DisplayMode:g.component,Copy:j.component,Cut:w.component,Paste:M.component},setup(){const q=(0,m.H)(),K=(0,i.W)();return{tbVoiceEnabled:(0,e.EW)(()=>q.tbVoiceEnabled),range:(0,e.EW)(()=>K.range)}}});var Z=t(938793);const U=(0,Z.A)(C,[["render",y]]),b=["id","aria-label"],z=["id","aria-label"];function ce(q,K,pe,Te,ge,Q){const Re=(0,e.gN)("dompurify-html");return Te.displayMobileEditor?(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{key:0,class:(0,r.C4)({active:pe.active}),onClick:K[0]||(K[0]=(...Fe)=>Q.setMode&&Q.setMode(...Fe)),id:`tb-mode-${pe.tb.name}`,"aria-label":Q.tooltipText},null,10,b)),[[Re,ge.icons[pe.tb.mobileIcon],"svg"]]):((0,e.uX)(),(0,e.CE)("button",{key:1,class:(0,r.C4)({active:pe.active}),onClick:K[1]||(K[1]=(...Fe)=>Q.setMode&&Q.setMode(...Fe)),id:`tb-mode-${pe.tb.name}`,"aria-label":Q.tooltipText},(0,r.v_)(q.$t(pe.tb.title)),11,z))}var se=t(135519),x=t(26292),T=t(505522),ne=t(66682);const p={name:"ToolbarTab",emits:["setMode"],props:{tb:{type:Object,required:!0},active:{type:Boolean,required:!0}},data(){return{icons:T.default}},setup(){const q=(0,se.d)(),K=(0,u.q6)();return{mainShortcutByAction:(0,e.EW)(()=>q.mainShortcutByAction),displayMobileEditor:(0,e.EW)(()=>K.displayMobileEditor)}},computed:{tooltipText:ne.tooltipText,action(){return this.tb.action},shortcut(){const q=this.mainShortcutByAction[this.action];return q?(0,x.lD)(q.shortcuts):null}},watch:{tooltipText(){this.setupTooltip()}},methods:{setupTooltip(){(0,ne.setupTooltip)(this)},setMode(){this.$emit("setMode",this.tb.name)}},mounted(){this.setupTooltip()},beforeUnmount(){(0,ne.destroyTooltip)(this)}},A=(0,Z.A)(p,[["render",ce]]);var de=t(992031),Ae=t(879321),be=t(438628);const ae={key:0,class:"se-tb no-select reg",role:"region","aria-label":"Toolbars","data-cy":"editorToolbars"},ie={class:"se-tb-inner"},Ne={class:"se-tb-main"},$e={class:"se-tb-main-edition"},Pe={key:1,class:"se-tb no-select mob",role:"region","aria-label":"Toolbars"},we={class:"se-tb-inner"},Ze={class:"se-tb-main-edition"},at=(0,e.pM)({__name:"ScoreEditorToolbar",props:{scoreData:{},adagioQueue:{}},setup(q){const K=q,pe=N()("tb:config"),Te=t(793052),ge=Te.keys(),Q=(0,o.KR)([]),Re=(0,o.KR)({}),Fe=(0,o.KR)(!1),xe=(0,o.KR)(!!window.embedMode),Qe=(0,_.k)(),ze=(0,d.S)(),yt=(0,s.U)(),ft=(0,u.q6)(),Oe=(0,i.W)(),ut=(0,v.o)(),Tt=(0,m.H)(),ht=(0,e.EW)(()=>Qe.width>k.iK),vt=(0,e.EW)(()=>Oe.mobToolbarReduced&&Oe.textMode!=="classicChord"&&Oe.textMode!=="chord"),Rt=(0,e.EW)(()=>Fe.value&&Tt.ready),It=(0,e.EW)(()=>{let W=Qe.width-k.Kr;return xe.value||(W-=k.tq),W}),Lt=(0,e.EW)(()=>{var W,V;return(V=(W=Oe.currentPartsMetas)==null?void 0:W.group)!=null?V:null}),Ct=(0,e.EW)(()=>ut.isPerformerMode),G=(0,e.EW)(()=>ze.mode),J=(0,e.EW)(()=>ze.showMore),Me=ze.setMode,Xe=(0,e.EW)(()=>Q.value.filter(W=>W.displayed)),rt=(0,e.EW)(()=>Xe.value.filter(W=>!ht.value||W.name!=="main")),He=(0,e.EW)(()=>{const W=ze.mode,V=Re.value[W];if(!V)return null;const Ie=Xe.value.find(Ee=>Ee.name===W);return Ie?{toolbar:Ie,build:V}:null});function lt(){Rt.value&&(Q.value=k.d4.filter(W=>{const V=At(W);return V===null?!1:(Re.value[W.name]=V,W.displayed=(yt.scoreWrite||W.ro)&&(!W.hideOnMobile||!ft.displayMobileEditor)&&(W.displayConditionGetter===void 0||W.displayConditionGetter.value),!W.displayed&&W.name===G.value&&ze.setDefaultMode(),!0)}))}function At(W){var V,Ie,Ee,De;let ot=0;const je=[...W.groups||[]];for(let c=je.length-1;c>=0;c--){const f=je[c];f.components||gt(f),xt(f),f.width===0?je.splice(c,1):ot+=((V=f.width)!=null?V:0)+k.mg}const Ve=[...je];let a=[];if(!ft.displayMobileEditor&&ot>It.value){const c=[...je].sort((f,oe)=>f.displayPriority-oe.displayPriority);for(;ot>It.value&&Ve.length>1;){const f=c.shift();if(!f)break;const oe=Ve.indexOf(f);Ve.splice(oe,1),ot-=(Ie=f.width)!=null?Ie:0}a=[...je];for(let f=a.length;f>=0;f--)Ve.includes(a[f])&&a.splice(f,1)}return Ve.length===0||B(Ve)?null:{regular:Ve,more:a,regularHash:`${W.name}:regular:${(Ee=Oe.currentPartsMetas)==null?void 0:Ee.group}`,moreHash:`${W.name}:more:${(De=Oe.currentPartsMetas)==null?void 0:De.group}`}}function xt(W){var V;let Ie=0;return(V=W.components)==null||V.forEach(Ee=>{Ee.enabled?Ee.instrumentGroups&&!Ee.instrumentGroups.includes(Lt.value)||Ee.hideOnMobile&&ft.displayMobileEditor||Ee.displayConditionGetter!==void 0&&!Ee.displayConditionGetter.value?Ee.displayed=!1:(Ee.displayed=!0,Ee.width||pe("no elem width set %o",Ee),Ee.width&&(Ie+=Ee.width)):Ee.displayed=!1}),W.width=Ie,Ie}function gt(W){if(!W.components){W.components=[];for(let V=W.elements.length-1;V>=0;V--){const Ie=W.elements[V],Ee=k.gv[Ie];if(Ee.enabled=Tt.toolbarActions.includes(Ie)&&(Ee.ro||yt.scoreWrite),!Ee.enabled){pe("component %s is not enabled",Ie);continue}const De=Object.assign({},Ee,{name:Ie,props:Object.assign({},Ee.props,{name:Ie})});Ee.instrumentGroup&&(De.instrumentGroups=k.I_[Ee.instrumentGroup]);let ot=`./${Ee.name}.vue`;ge.includes(ot)||(ot=`./${Ee.name}.js`);let je=Te(ot);je=je.default||je,je.component||(je={component:je,width:je.width}),(0,o.IG)(je.component),W.components.unshift(Object.assign({},je,De))}}}function F(W){return W.some(V=>{var Ie;return(Ie=V.elements)==null?void 0:Ie.some(Ee=>Ee==="voices")})}function re(W){return W.some(V=>{var Ie;return(Ie=V.elements)==null?void 0:Ie.some(Ee=>Ee==="remove")})}function Se(W){let V=0;return W.forEach(Ie=>{V+=Ie.elements.length}),V}function B(W){let V=0;return re(W)&&V++,F(W)&&V++,Se(W)===V}return(0,e.wB)(ht,W=>{ze.setMainToolbarOnTop(W)},{immediate:!0}),(0,e.wB)([Rt,It,()=>ft.parts,()=>Oe.currentPart,()=>yt.scoreWrite,()=>ft.displayChromelessUi,()=>Oe.tbIsInsertMode,()=>Tt.ready],()=>{lt()}),(0,e.sV)(()=>{Fe.value=!0}),(W,V)=>(0,o.R1)(ft).displayMobileEditor?((0,e.uX)(),(0,e.CE)("div",Pe,[(0,e.Lk)("div",we,[(0,e.Lk)("div",Ze,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(Xe.value,Ie=>((0,e.uX)(),(0,e.Wv)(A,{key:Ie.name,tb:Ie,active:G.value===Ie.name,onSetMode:(0,o.R1)(Me)},null,8,["tb","active","onSetMode"]))),128))]),vt.value?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(U,{key:0,"score-data":W.scoreData},null,8,["score-data"])),He.value&&!vt.value?((0,e.uX)(),(0,e.Wv)(O.A,{key:He.value.build.regularHash,groups:He.value.build.regular,"score-data":W.scoreData,class:(0,r.C4)([He.value.toolbar.name,"se-tb-sub active"])},null,8,["groups","score-data","class"])):(0,e.Q3)("",!0)]),G.value==="note"?((0,e.uX)(),(0,e.Wv)(de.A,{key:0,"score-data":W.scoreData,class:"mob"},null,8,["score-data"])):(0,e.Q3)("",!0)])):((0,e.uX)(),(0,e.CE)("div",ae,[(0,o.R1)(ft).displayChromelessUi?((0,e.uX)(),(0,e.Wv)(be.default,{key:0,audio:W.scoreData.scoreActions.dependencies.audio},null,8,["audio"])):!xe.value&&!Ct.value?((0,e.uX)(),(0,e.Wv)(Ae.default,{key:1,"adagio-queue":W.adagioQueue,class:"se-tb-instruments"},null,8,["adagio-queue"])):(0,e.Q3)("",!0),(0,e.Lk)("div",ie,[(0,e.Lk)("div",Ne,[(0,e.Lk)("div",$e,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(rt.value,Ie=>((0,e.uX)(),(0,e.Wv)(A,{key:Ie.name,tb:Ie,active:G.value===Ie.name,onSetMode:(0,o.R1)(Me)},null,8,["tb","active","onSetMode"]))),128))]),ht.value&&Re.value.main?((0,e.uX)(),(0,e.Wv)(O.A,{key:0,class:"se-tb-main-doc","score-data":W.scoreData,groups:Re.value.main.regular},null,8,["score-data","groups"])):(0,e.Q3)("",!0)]),V[0]||(V[0]=(0,e.Lk)("div",{class:"se-tb-divider"},null,-1)),He.value&&(!ht.value||G.value!=="main")?((0,e.uX)(),(0,e.Wv)(O.A,{key:He.value.build.regularHash,groups:He.value.build.regular,"score-data":W.scoreData,"has-more":He.value.build.more.length>0,"aria-label":`Toolbar: ${W.$t(He.value.toolbar.title)}`,class:"se-tb-sub active"},null,8,["groups","score-data","has-more","aria-label"])):(0,e.Q3)("",!0),J.value&&Re.value[G.value].more.length>0?((0,e.uX)(),(0,e.Wv)(O.A,{key:Re.value[G.value].moreHash,groups:Re.value[G.value].more,"score-data":W.scoreData,class:"se-tb-sub active more"},null,8,["groups","score-data"])):(0,e.Q3)("",!0)])]))}})},849421:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(243564);const i=56,s=(0,o.pM)({name:"TbTurn",props:{scoreData:{type:Object,required:!0}},setup(d){const u=[{value:"turn",action:"toggleTurn"},{value:"inverted-turn",action:"toggleInvertedTurn"}],m=(0,e.W)(),v=(0,o.EW)(()=>m.noteInfo.ornaments?m.noteInfo.ornaments.turn?"turn":m.noteInfo.ornaments["inverted-turn"]?"inverted-turn":!1:!1);return()=>(0,o.h)(r.default,{scoreData:d.scoreData,css:"tb-turn",items:u,active:[v.value],defaultActionIcon:"toggleTurn"})}})},850569:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>g});var e=t(361744),o=t(538065),r=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(M,E,I)=>E in M?r(M,E,{enumerable:!0,configurable:!0,writable:!0,value:I}):M[E]=I,m=(M,E)=>{for(var I in E||(E={}))s.call(E,I)&&u(M,I,E[I]);if(i)for(var I of i(E))d.call(E,I)&&u(M,I,E[I]);return M};function v(M,E,I,C,Z,te){const U=(0,e.gN)("dompurify-html");return(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{class:(0,o.C4)(["tb-more-btn",m({active:C.showMore},te.rootClasses)]),onClick:E[0]||(E[0]=b=>C.switchShowMore())},null,2)),[[U,Z.iconSvg,"svg"]])}var _=t(883892),S=t(909696),N=t(674548),k=t(243935),O=t(505522);const X={name:"BtnMore",data(){return{iconSvg:O.default.more}},setup(){const M=(0,_.S)(),E=(0,S.q6)(),I=(0,e.EW)(()=>M.showMore);return{showMore:I,switchShowMore:()=>M.setShowMore(!I.value),displayMobileEditor:(0,e.EW)(()=>E.displayMobileEditor)}},computed:{rootClasses(){return this.displayMobileEditor?{[this.tbButtonStyle.rootCommon]:!0,[this.tbButtonStyle.rootMobileDetailed]:!0}:{[this.tbButtonStyle.rootCommon]:!0,[this.tbButtonStyle.rootDesktop]:!0}}},mounted(){document.body.classList.contains("touch")||(this.$tooltip=new k.vF(this.$el,{touch:!1,placement:"bottom",content:N.MR.t("flat:display-more"),arrow:k.qO,duration:[0,0]}))},beforeUnmount(){this.$tooltip&&(this.$tooltip.destroy(),this.$tooltip=null)}};var L=t(235398),y=t(938793);const j={};j.tbButtonStyle=L.default;const g=(0,y.A)(X,[["render",v],["__cssModules",j]])},853408:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.tempoContainer_GMI18{display:flex;justify-content:center;align-items:center}
`,""]),s.locals={tempoContainer:"tempoContainer_GMI18"};const d=s},855626:(l,n,t)=>{"use strict";t.d(n,{A:()=>d});var e=t(768355),o=t(475102),r=t(938793);const i={};i.$style=o.default;const d=(0,r.A)(e.A,[["__cssModules",i]])},856580:(l,n,t)=>{var e=t(145329);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("d1ad477e",e,!0,{})},862096:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>_});var e=t(361744);function o(S,N,k,O,X,L){const y=(0,e.g2)("ddn-inner-keysig"),j=(0,e.g2)("ToolbarComplexDdn");return(0,e.uX)(),(0,e.Wv)(j,{ref:"ddn",class:"tb-keysig","icon-key":"keySignature","mobile-text":L.mobileText,action:"setKey0","ddn-opts":{positionFixed:!0},"ddn-classes":L.classesListToObject(["ddn-content"])},{default:(0,e.k6)(()=>[(0,e.bF)(y,{"score-data":k.scoreData,onClose:N[0]||(N[0]=w=>L.onClose())},null,8,["score-data"])]),_:1},8,["mobile-text","ddn-classes"])}var r=t(674548),i=t(560150),s=t(13626),d=t(361826);const u={name:"KeySignature",width:42,props:{scoreData:{type:Object,required:!0}},components:{DdnInnerKeysig:i.A,ToolbarComplexDdn:s.default},computed:{mobileText(){return r.MR.t("editor:keySignature.title")}},methods:{onClose(){this.$refs.ddn.onClose()},classesListToObject:d.default}};var m=t(938793);const _=(0,m.A)(u,[["render",o]])},864058:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>u,width:()=>d});var e=t(726042),o=t(602494),r=t(121648),i=t(361744),s=t(96942);const d=35,u=(0,i.pM)({name:"TbNoteAccidental",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(m){const v=(0,r.W)(),_=(0,i.EW)(()=>{if(v.editionMode===o.i||v.noteInfo.isRest)return typeof v.upcomingAttributes.accidental!="number"||m.name==="flat"&&v.upcomingAttributes.accidental>=0||m.name==="sharp"&&v.upcomingAttributes.accidental<=0?void 0:Math.abs(v.upcomingAttributes.accidental||0);if(!(typeof v.tbNoteAccidental!="number"||m.name==="flat"&&v.tbNoteAccidental>=0||m.name==="sharp"&&v.tbNoteAccidental<=0||!e.default.isInteger(v.tbNoteAccidental)))return Math.abs(v.tbNoteAccidental||0)});return()=>(0,i.h)(s.default,{scoreData:m.scoreData,action:m.name,badge:_.value})}})},868104:(l,n,t)=>{"use strict";t.d(n,{A:()=>w});var e=t(361744),o=t(538065),r=t(555381);const i=["data-cy","onClick"],s={class:"color-picker"},d=["onClick"];function u(g,M,E,I,C,Z){return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)(g.$style.pickerWrapper)},[(0,e.Lk)("div",{class:(0,o.C4)({[g.$style.colors]:!0,[g.$style.isBig]:I.displayMobileEditor})},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(C.colors,te=>((0,e.uX)(),(0,e.CE)("button",{key:te,"data-cy":`note-color-picker-${te}`,onClick:(0,r.D$)(U=>Z.setColor(te),["stop"]),class:(0,o.C4)({[g.$style.colorItem]:!0,[g.$style.cwht]:te==="#FFFFFF00"}),style:(0,o.Tr)({background:te})},null,14,i))),128))],2),C.hasColorInputSupport?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(g.$style.customColors)},[(0,e.Lk)("div",s,[(0,e.bo)((0,e.Lk)("input",{type:"color",onChange:M[0]||(M[0]=te=>Z.setCustomColor(te)),onClick:M[1]||(M[1]=(0,r.D$)(()=>{},["stop"])),"onUpdate:modelValue":M[2]||(M[2]=te=>C.customColor=te)},null,544),[[r.Jo,C.customColor]]),(0,e.Lk)("div",{class:(0,o.C4)(g.$style.customLabel)},(0,o.v_)(g.$t("flat:custom"))+"...",3)]),C.recents.length>0?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,o.C4)(g.$style.colors)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(C.recents,te=>((0,e.uX)(),(0,e.CE)("button",{key:te,onClick:U=>Z.setColor(te),class:(0,o.C4)(g.$style.colorItem),style:(0,o.Tr)({background:te})},null,14,d))),128))],2)):(0,e.Q3)("",!0)],2)):(0,e.Q3)("",!0)],2)}var m=t(909696),v=t(916504),_=(g,M,E)=>new Promise((I,C)=>{var Z=b=>{try{U(E.next(b))}catch(z){C(z)}},te=b=>{try{U(E.throw(b))}catch(z){C(z)}},U=b=>b.done?I(b.value):Promise.resolve(b.value).then(Z,te);U((E=E.apply(g,M)).next())});const S=["#000000","#707070","#607D8B","#FFFFFF00","#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722"],N=function(){try{const M=document.createElement("input");return M.type="color",M.value="!",M.type==="color"&&M.value!=="!"}catch(M){return!1}}(),k={name:"NoteColorPicker",emits:["setColor","closeDropdown"],setup(){const g=(0,m.q6)();return{displayMobileEditor:(0,e.EW)(()=>g.displayMobileEditor)}},data(){return{colors:S,hasColorInputSupport:N,customColor:null,recents:v.A.get("score-editor.colors-recent")||[]}},methods:{setColor(g){g==="#000000"&&(g=void 0),g==="#FFFFFF"&&(g="#FFFFFF00"),this.$emit("setColor",g),this.$emit("closeDropdown")},setCustomColor(){this.timeoutCustomColor&&clearTimeout(this.timeoutCustomColor),this.timeoutCustomColor=setTimeout(()=>_(this,null,function*(){this.timeoutCustomColor=null;const g=this.customColor.toUpperCase();this.$emit("setColor",g),this.addRecentCustomColor(g)}),300)},addRecentCustomColor(g){this.recents.includes(g)||this.recents.push(g),this.recents.length>8&&this.recents.shift(),v.A.set("score-editor.colors-recent",this.recents)}}};var O=t(872552),X=t.n(O),L=t(938793);const y={};y.$style=X();const w=(0,L.A)(k,[["render",u],["__cssModules",y]])},868431:l=>{"use strict";l.exports='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path class="fill" fill-rule="evenodd" d="M7.297 0c.608 0 5.44.384 5.44 4.577 0 2.656-2.431 2.752-2.431 2.752-.897 0-2.465-.576-2.465-2.4 0-.992.736-2.369 2.016-2.369.48 0 .577-.416.577-.704 0-.32-.673-1.088-2.337-1.088-1.728 0-4.16 1.088-4.16 6.37 0 5.28 1.376 7.808 3.968 7.808 1.024 0 4.545-.96 4.545-5.089 0-.544.224-.576.48-.576.128 0 .48 0 .48.704 0 .929-.832 6.017-6.433 6.017-1.92 0-3.68-.672-4.897-2.144-1.056-1.28-1.888-2.912-2.048-4.64C0 8.928 0 8.64 0 8.352 0 5.313 1.504 1.888 4.353.64 5.217.256 6.337 0 7.297 0z"/></svg>'},872552:(l,n,t)=>{var e=t(570315);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("ecb6f840",e,!0,{})},878149:(l,n,t)=>{var e=t(497258);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("6ba31440",e,!0,{})},879321:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(250449),o=t(751610),r=t(485036),i=t(938793);const d=(0,i.A)(o.A,[["render",e.X]])},888839:(l,n,t)=>{var e=t(665732);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("1ab116dc",e,!0,{})},892481:(l,n,t)=>{var e=t(747648);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("2055af19",e,!0,{})},894715:(l,n,t)=>{"use strict";t.d(n,{A:()=>Ve});var e=t(361744);const o={class:"se-txt-tools"};function r(a,c){const f=(0,e.g2)("score-text-lyrics"),oe=(0,e.g2)("score-text-word"),Ue=(0,e.g2)("score-text-harmony"),Le=(0,e.g2)("score-text-classic-chord"),Pt=(0,e.g2)("score-text-figured-bass");return(0,e.uX)(),(0,e.CE)("div",o,[a.textMode==="lyric"?((0,e.uX)(),(0,e.Wv)(f,{interaction:a.interaction,key:a.componentKey},null,8,["interaction"])):a.textMode==="word"?((0,e.uX)(),(0,e.Wv)(oe,{interaction:a.interaction,key:a.componentKey},null,8,["interaction"])):a.textMode==="chord"&&!a.hasNewJazzChordInput?((0,e.uX)(),(0,e.Wv)(Ue,{interaction:a.interaction,key:a.componentKey},null,8,["interaction"])):a.textMode==="classicChord"&&!a.hasNewRomanNumeralsInput?((0,e.uX)(),(0,e.Wv)(Le,{interaction:a.interaction,key:a.componentKey},null,8,["interaction"])):a.textMode==="figuredBass"?((0,e.uX)(),(0,e.Wv)(Pt,{interaction:a.interaction,key:a.componentKey},null,8,["interaction"])):(0,e.Q3)("",!0)])}var i=t(121648),s=t(680468),d=t(538065);const u={key:0,class:"suggest noselect"},m=["onPointerup"];function v(a,c){const f=(0,e.g2)("score-text-input");return(0,e.uX)(),(0,e.Wv)(f,{interaction:a.interaction,inputType:"classicChord",selectedType:"classicChord",getText:a.getText,updateSuggestions:a.updateSuggestions,actionEnter:a.enter,actionDestroy:a.destroy,actionBackspace:a.backspace,checkAddRemove:a.checkAddRemove,actionLeft:a.left,actionRight:a.right,onLeftRightAddRemove:!1,fontFamily:a.fontFamily,fontStyle:a.fontStyle,getFontSize:a.getFontSize,getTextY:a.getTextY,getRightElem:a.getRightElem,getRightMeasure:a.getRightMeasure,applyMargin:a.applyMargin},{default:(0,e.k6)(()=>[a.hasSuggestions?((0,e.uX)(),(0,e.CE)("div",u,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.displayedSuggestions,(oe,Ue)=>((0,e.uX)(),(0,e.CE)("button",{onPointerup:Le=>a.chooseSuggestion(Le,Ue),class:(0,d.C4)(["idea",{"chord-focus":oe.focus,"chord-unfocus":!oe.focus}])},(0,d.v_)(oe.letter),43,m))),256))])):(0,e.Q3)("",!0)]),_:1},8,["interaction","getText","updateSuggestions","actionEnter","actionDestroy","actionBackspace","checkAddRemove","actionLeft","actionRight","fontFamily","fontStyle","getFontSize","getTextY","getRightElem","getRightMeasure","applyMargin"])}var _=t(640231),S=t(516045),N=t.n(S),k=t(555381);const O={class:"se-txt-input"};function X(a,c){return(0,e.uX)(),(0,e.CE)("div",O,[(0,e.bo)((0,e.Lk)("input",{type:"text",class:"form-control score-text-input","onUpdate:modelValue":c[0]||(c[0]=f=>a.content=f),ref:"input",onInput:c[1]||(c[1]=f=>a.content=f.target.value),onKeydown:c[2]||(c[2]=f=>a.onKeydown(f)),autocomplete:"false",autocapitalize:"off",autocorrect:"off"},null,544),[[k.Jo,a.content]]),(0,e.RG)(a.$slots,"default",{},void 0,!0),a.isTouch&&a.canMoveDown?((0,e.uX)(),(0,e.CE)("button",{key:0,class:"score-input-arrow down",onTouchend:c[3]||(c[3]=(0,k.D$)(f=>a.moveDown(),["stop","prevent"]))},c[5]||(c[5]=[(0,e.Lk)("svg",{class:"icon",inline:"",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{d:"M6.99327 0.883379C6.93551 0.38604 6.51284 0 6 0C5.44772 0 5 0.447715 5 1V8.69872L2.39668 6.26895L2.29966 6.18906C1.89709 5.89773 1.33115 5.94499 0.983304 6.31769C0.60647 6.72144 0.62829 7.35423 1.03204 7.73106L5.30872 11.7226C5.39673 11.807 5.49668 11.8722 5.60316 11.9182C5.71062 11.9647 5.82785 11.9929 5.95092 11.9988C5.96744 11.9996 5.98397 12 6.0005 12C6.02017 12 6.03985 11.9994 6.0595 11.9983C6.16416 11.9921 6.26449 11.9699 6.35806 11.934C6.36586 11.931 6.37364 11.9279 6.38138 11.9247C6.49368 11.8785 6.59908 11.8111 6.69135 11.7226L10.968 7.73106L11.0544 7.63977C11.3728 7.25823 11.3646 6.69038 11.0168 6.31769C10.6399 5.91393 10.0072 5.89211 9.6034 6.26895L7 8.69879V1L6.99327 0.883379Z",fill:"#2F3446"})],-1)]),32)):(0,e.Q3)("",!0),a.isTouch&&a.canMoveUp?((0,e.uX)(),(0,e.CE)("button",{key:1,class:"score-input-arrow up",onTouchend:c[4]||(c[4]=(0,k.D$)(f=>a.moveUp(),["stop","prevent"]))},c[6]||(c[6]=[(0,e.Lk)("svg",{class:"icon",inline:"",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{d:"M11.0168 5.68232C10.6689 6.05502 10.103 6.10228 9.70042 5.81095L9.6034 5.73106L7.00008 3.30129V11C7.00008 11.5523 6.55236 12 6.00008 12C5.48724 12 5.06457 11.614 5.0068 11.1166L5.00008 11V3.30122L2.39668 5.73106C1.99293 6.10789 1.36014 6.08607 0.983304 5.68232C0.635457 5.30963 0.627292 4.74178 0.945655 4.36023L1.03204 4.26895L5.30873 0.277376C5.401 0.188951 5.5064 0.121518 5.6187 0.075292C5.6221 0.0738896 5.62552 0.0725067 5.62894 0.0711434C5.76284 0.017754 5.90622 -0.00569261 6.0486 0.00116413C6.17186 0.00705313 6.28928 0.0352595 6.39689 0.0818308C6.50338 0.12779 6.60334 0.193034 6.69135 0.277378L10.968 4.26895C11.3718 4.64578 11.3936 5.27857 11.0168 5.68232Z",fill:"#2F3446"})],-1)]),32)):(0,e.Q3)("",!0)])}var L=t(612732),y=t(645369),j=t.n(y),w=t(6645),g=t(909696),M=Object.defineProperty,E=Object.defineProperties,I=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,U=(a,c,f)=>c in a?M(a,c,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[c]=f,b=(a,c)=>{for(var f in c||(c={}))Z.call(c,f)&&U(a,f,c[f]);if(C)for(var f of C(c))te.call(c,f)&&U(a,f,c[f]);return a},z=(a,c)=>E(a,I(c)),ce=(a,c,f)=>new Promise((oe,Ue)=>{var Le=pt=>{try{Ot(f.next(pt))}catch(bt){Ue(bt)}},Pt=pt=>{try{Ot(f.throw(pt))}catch(bt){Ue(bt)}},Ot=pt=>pt.done?oe(pt.value):Promise.resolve(pt.value).then(Le,Pt);Ot((f=f.apply(a,c)).next())});const se=j()("flat:text"),x=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),T={name:"scoreTextInput",props:{interaction:{type:Object,required:!0},fontFamily:{type:String,required:!0},fontStyle:{type:String,required:!0},lvl:{type:Number,default:0},placement:{type:String,default:"below"},selectedType:{type:String},inputType:{type:String},getText:{type:Function,required:!0},checkAddRemove:{type:Function,required:!0},initAttr:{type:Function},actionDown:{type:Function},actionUp:{type:Function},actionLeft:{type:Function},actionRight:{type:Function},actionMinus:{type:Function},actionUnderscore:{type:Function},actionSpace:{type:Function},actionEnter:{type:Function},actionBackspace:{type:Function},actionDestroy:{type:Function},updateSuggestions:{type:Function},getFontSize:{type:Function,required:!0},getTextY:{type:Function,required:!0},getRightElem:{type:Function,required:!0},getRightMeasure:{type:Function},applyMargin:{type:Function,required:!0}},data(){return{content:""}},setup(){const a=(0,L.k)(),c=(0,i.W)();return{viewportHeight:(0,e.EW)(()=>a.height),viewportWidth:(0,e.EW)(()=>a.width),cursorPos:(0,e.EW)(()=>c.pos),selectedPos:(0,e.EW)(()=>c.selectedPos),storeSelectedType:(0,e.EW)(()=>c.selectedType),posTs:(0,e.EW)(()=>c.posTs),selectedTs:(0,e.EW)(()=>c.selectedTs),textMode:(0,e.EW)(()=>c.textMode)}},computed:z(b({},(0,w.aH)(g.q6,["layout","zoom","lastDrawTs","scrollLeft","scrollTop"])),{isSelectedElem(){return this.storeSelectedType===this.selectedType},pos(){return this.isSelectedElem?this.selectedPos:this.cursorPos},ts(){return Math.max(this.posTs,this.selectedTs)},isTouch(){return typeof document!="undefined"&&"ontouchstart"in document},canMoveUp(){return(this.placement==="below"||this.originalType==="lyric")&&this.actionUp},canMoveDown(){return(this.placement==="above"||this.originalType==="lyric")&&this.actionDown}}),watch:{placement(){this.positionListener()},zoom(){this.positionListener({keepContent:!0}),this.$refs.input.style["font-size"]=`${this.getFontSize()}px`},lvl(){this.positionListener()},lastDrawTs(){this.positionListenerRetry({keepContent:!0})},scrollLeft(){this.positionListener({keepContent:!0})},scrollTop(){this.positionListener({keepContent:!0})},content(){this.updateInputWidth()},viewportHeight(){this.updateInputWidth(),this.$refs.input.style["font-size"]=`${this.getFontSize()}px`},viewportWidth(){this.updateInputWidth(),this.$refs.input.style["font-size"]=`${this.getFontSize()}px`}},methods:{positionListenerRetry(a={}){const c=this.getRightElem();if(c){if(!this.calcPos(c,a)){se("positionListenerRetry: `elem or measure are not attached to DOM, retrying later`"),requestAnimationFrame(()=>{this.positionListener(a)});return}this.updateInputWidth()}else se("positionListenerRetry: `elem` is not returned, skip for now")},positionListener(a={}){const c=this.getRightElem();c?this.calcPos(c,a)?this.updateInputWidth():se("positionListener: `elem or measure are not attached to DOM`"):se("positionListener: `elem` is not returned, skip for now")},calcPos(a,c={}){this.elemToFocus=a;const{svgTools:f}=this.interaction;let oe;const Ue=f.getAbsCoord(a);this.getRightMeasure?oe=this.getRightMeasure():oe=f.findParent(a,"measure");const Le=f.getAbsCoord(oe);if(Le.x===0&&Le.y===0||Ue.x===0&&Ue.y===0)return!1;const Ot=this.getTextY(),pt=document.getElementById("svg-content").getBoundingClientRect(),bt=oe.getAttribute("data-adagio-measure-uuid"),ct=oe.getAttribute("data-adagio-part-uuid"),zt=f.pageLayout.uuidGetMeasurePageSvgParent({partUuid:ct,measureUuid:bt}).elem.getBoundingClientRect(),Kt=zt.left-pt.left,Ht=zt.top-pt.top,kt=Kt+Ue.x,Ft=Le.y+Ot+Ht;return this.moveTo(kt,Ft,c),!0},moveTo(a,c,{keepContent:f=!1}={}){const{svgTools:oe}=this.interaction;this.baseX=a,this.baseY=c,f||(this.content=this.getText()||""),this.inputMinWidth=Math.max(oe.textWidth(this.content,`${this.getFontSize()}px`,this.fontFamily,this.fontStyle),20)},getWidthMargin(a){return Math.round(a/8)},updateInputWidth(){const{svgTools:a}=this.interaction;let c;if(this.$el){const f=this.$el.style;let oe=Math.max(this.inputMinWidth,a.textWidth(this.content,`${this.getFontSize()}px`,this.fontFamily,this.fontStyle));c=this.getWidthMargin(oe),oe+=c,this.$el.style.width=`${oe}px`,f.left=`${this.baseX-c/2}px`,f.top=`${this.baseY}px`,this.applyMargin(oe,c),this.updateSuggestions&&this.updateSuggestions(this.content),this.$refs.input&&this.$refs.input.focus()}},moveDown(){this.actionDown&&this.actionDown(this.content)},moveUp(){this.actionUp&&this.actionUp(this.content)},onKeydown(a){return ce(this,null,function*(){var c,f;const{key:oe}=a;if((a.ctrlKey||a.metaKey)&&(oe==="z"||oe==="y"))return a.preventDefault(),Promise.resolve();if(a.stopPropagation(),oe==="Esc"||oe==="Escape")return this.canceled=!0,this.close(this.content);if(this.actionDown&&oe==="ArrowDown")return this.actionDown(this.content);if(this.actionUp&&oe==="ArrowUp")return this.actionUp(this.content);if(this.actionMinus&&oe==="-"){const Le=this.actionMinus(this.content,a);return this.interaction.scoreData.scoreActions.cursor.scheduleScrollTo(),Le}if(this.actionUnderscore&&oe==="_"){const Le=this.actionUnderscore(this.content,a);return this.interaction.scoreData.scoreActions.cursor.scheduleScrollTo(),Le}if(this.actionSpace&&oe===" "){const Le=this.actionSpace(this.content,a);return this.interaction.scoreData.scoreActions.cursor.scheduleScrollTo(),Le}if(this.actionEnter&&(oe==="Enter"||oe==="NumpadEnter")){const Le=this.actionEnter(this.content,a);return this.interaction.scoreData.scoreActions.cursor.scheduleScrollTo(),Le}if(this.actionBackspace&&oe==="Backspace"&&this.isOnLeftBoundary()){const Le=this.actionBackspace(this.content,a);return this.interaction.scoreData.scoreActions.cursor.scheduleScrollTo(),Le}if(oe==="ArrowLeft"){if((c=this.actionLeft)!=null&&c.call(this))return Promise.resolve();if(this.isOnLeftBoundary()){const{scoreActions:Le}=this.interaction.scoreData;a.preventDefault(),(this.selectedType==="classicChord"||this.selectedType==="chord")&&(this.canceled=!0);const Pt=Le.executePublicAction("goLeft");return Le.cursor.scheduleScrollTo(),Pt}}if(oe==="ArrowRight"){if((f=this.actionRight)!=null&&f.call(this))return Promise.resolve();if(this.isOnRightBoundary()){const{scoreActions:Le}=this.interaction.scoreData;a.preventDefault(),(this.selectedType==="classicChord"||this.selectedType==="chord")&&(this.canceled=!0);const Pt=Le.executePublicAction("goRight");return Le.cursor.scheduleScrollTo(),Pt}}return Promise.resolve()})},close(){se("close()"),this.interaction.cursor.clearSelected(),this.interaction.cursor.setTextMode(null)},isOnLeftBoundary(){return this.$refs.input.selectionStart===0&&this.$refs.input.selectionEnd===0},isOnRightBoundary(){return this.$refs.input.selectionStart===this.content.length&&this.$refs.input.selectionEnd===this.content.length}},beforeMount(){this.originalType=this.inputType||this.selectedType},mounted(){const{svgTools:a}=this.interaction;se("mounting input component"),this.$refs.input.style["font-size"]=`${this.getFontSize()}px`,this.$refs.input.style["font-family"]=this.fontFamily,this.$refs.input.style["font-style"]=this.fontStyle,x||(this.$refs.input.style.height=`${Math.max(a.textHeight(this.getText(),`${this.getFontSize()}px`,this.fontFamily,this.fontStyle),this.getFontSize())}px`),this.initAttr&&this.initAttr(),this.positionListener(),this.originalPos=Object.assign({},this.pos),this.originalTs=this.ts,this.getRightElem()&&this.$refs.input.focus()},beforeUnmount(){this.canceled||(se("beforeUnmount input component"),this.actionDestroy&&this.actionDestroy(this.content,this.originalPos))}};var ne=t(622391),p=t(938793);const A=(0,p.A)(T,[["render",X],["__scopeId","data-v-03d0310d"]]);var de=Object.defineProperty,Ae=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,ie=(a,c,f)=>c in a?de(a,c,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[c]=f,Ne=(a,c)=>{for(var f in c||(c={}))be.call(c,f)&&ie(a,f,c[f]);if(Ae)for(var f of Ae(c))ae.call(c,f)&&ie(a,f,c[f]);return a};const $e={name:"scoreTextClassicChord",components:{ScoreTextInput:A},props:{interaction:{type:Object,required:!0}},data(){return{originalText:null,checkAddRemoveExecuted:!1,suggestions:[],focusIdx:0,fontFamily:"Noto Serif",fontStyle:"normal",libClassic:new(N())({ClassicChordKind:_.A})}},setup(){const a=(0,i.W)();return{harmonyData:(0,e.EW)(()=>a.noteInfo.classicHarmony||{}),pos:(0,e.EW)(()=>a.pos),selectedType:(0,e.EW)(()=>a.selectedType)}},computed:{hasSuggestions(){return this.suggestions.length>0},displayedSuggestions(){return this.suggestions.slice(0,10)}},methods:{enter(a,c){const{scoreActions:f}=this.interaction.scoreData;return this.checkAddRemove(a),f.executePublicAction("goRight"),c.preventDefault(),Promise.resolve()},backspace(a,c){const{scoreActions:f}=this.interaction.scoreData;return this.checkAddRemove(a),f.executePublicAction("goLeft"),c.preventDefault(),Promise.resolve()},destroy(a,c){return this.checkAddRemove(a,c,!0),Promise.resolve()},updateSuggestions(a){try{const c=[].slice.call(this.libClassic.resolveString(a));c.forEach(f=>{f.letter=this.libClassic.resolveChord(f),f.focus=!1}),c.length>0&&(c[0].focus=!0,this.focusIdx=0),this.suggestions=c}catch(c){const{scoreActions:f}=this.interaction.scoreData;f.logError(c,{textContent:a})}},left(){return this.suggestions.length>0&&this.focusIdx>0?(this.suggestions[this.focusIdx].focus=!1,this.focusIdx--,this.suggestions[this.focusIdx].focus=!0,!0):!1},right(){return this.suggestions.length>0&&this.focusIdx+1<this.suggestions.length?(this.suggestions[this.focusIdx].focus=!1,this.focusIdx++,this.suggestions[this.focusIdx].focus=!0,!0):!1},chooseSuggestion(a,c){const{scoreActions:f}=this.interaction.scoreData;f.executePublicAction("addClassicHarmony",this.suggestions[c]),this.checkAddRemoveExecuted=!0,f.executePublicAction("goRight"),a.stopPropagation()},close(){this.interaction.cursor.setTextMode(null),this.interaction.cursor.clearSelected()},checkAddRemove(a,c,f){this.checkAddRemoveExecuted||(this.checkAddRemoveExecuted=!0,a.trim().length===0?this.checkRemove(a,c):this.checkAdd(a,c,f))},checkAdd(a,c,f){const{scoreActions:oe}=this.interaction.scoreData;f?this.getText()!==a&&this.suggestions.length>0&&oe.executePublicAction("addClassicHarmony",Ne({position:c},this.suggestions[this.focusIdx])):this.suggestions.length>0&&this.getText()!==a?oe.executePublicAction("addClassicHarmony",Ne({position:c},this.suggestions[this.focusIdx])):this.suggestions.length>1&&this.focusIdx>0&&oe.executePublicAction("addClassicHarmony",Ne({position:c},this.suggestions[this.focusIdx]))},checkRemove(a,c){const{scoreActions:f}=this.interaction.scoreData;this.getText().length>0&&a!==this.getText()&&f.executePublicAction("removeClassicHarmony",{position:c})},getText(){if(this.originalText!==null)return this.originalText;if(this.selectedType==="classicChord")return this.originalText=this.libClassic.resolveChord(this.interaction.cursor.selectedElem.data),this.originalText;const a=this.harmonyData;return a&&(this.originalText=this.libClassic.resolveChord(a)),this.originalText===null&&(this.originalText=""),this.originalText},getTextY(){const{svgTools:a,cursor:c}=this.interaction;let f;if(this.selectedType!=="classicChord")f=c.pageLayout.uuidGetSystemBottomStaffClassicHarmonyY({partUuid:this.pos.partUuid,measureUuid:this.pos.measureUuid});else{const{pos:oe}=c.selectedElem;f=c.pageLayout.uuidGetSystemBottomStaffClassicHarmonyY({partUuid:oe.partUuid,measureUuid:oe.measureUuid})}return f*a.scaling},getRightElem(){const{cursor:a}=this.interaction;if(a.selectedElem&&this.selectedType==="classicChord")return a.selectedElem.elem;const c=a.getNote();return c?c.head?c.head:c.note:null},getRightMeasure(){const{cursor:a,svgTools:c}=this.interaction;return a.selectedElem&&this.selectedType==="classicChord"?c.findParent(a.selectedElem.elem,"measure"):a.pageLayout.uuidGetPartBottomMeasureElem({partUuid:this.pos.partUuid,measureUuid:this.pos.measureUuid}).elem},getFontSize(){const{svgTools:a}=this.interaction;return a.harmonySize},applyMargin(){const a=this.$el.style;a.top=`${Number.parseFloat(a.top,10)-this.$el.offsetHeight+2}px`}}},we=(0,p.A)($e,[["render",v]]);function Ze(a,c){const f=(0,e.g2)("score-text-input");return(0,e.uX)(),(0,e.Wv)(f,{interaction:a.interaction,lvl:a.storeFiguredBassLvl,getText:a.getText,actionDestroy:a.destroy,actionEnter:a.enter,actionBackspace:a.backspace,actionDown:a.down,actionUp:a.up,checkAddRemove:a.checkAddRemove,getRightMeasure:a.getRightMeasure,fontFamily:a.fontFamily,fontStyle:a.fontStyle,getFontSize:a.getFontSize,getTextY:a.getTextY,getRightElem:a.getRightElem,applyMargin:a.applyMargin},null,8,["interaction","lvl","getText","actionDestroy","actionEnter","actionBackspace","actionDown","actionUp","checkAddRemove","getRightMeasure","fontFamily","fontStyle","getFontSize","getTextY","getRightElem","applyMargin"])}var nt=t(832560),Ke=t(737903),at=t(701387),q=t(434243),K=t(808988),pe=t(948446),Te=t.n(pe),ge=(a,c,f)=>new Promise((oe,Ue)=>{var Le=pt=>{try{Ot(f.next(pt))}catch(bt){Ue(bt)}},Pt=pt=>{try{Ot(f.throw(pt))}catch(bt){Ue(bt)}},Ot=pt=>pt.done?oe(pt.value):Promise.resolve(pt.value).then(Le,Pt);Ot((f=f.apply(a,c)).next())});const Q={name:"scoreFiguredBass",components:{ScoreTextInput:A},props:{interaction:{type:Object,required:!0}},data(){return{content:"",fontStyle:"Noto Serif",fontFamily:"normal",level:0,originalFiguresData:null,libFigure:new(Te())({figurePrefix:q.A,figureSuffix:K.A})}},setup(){const a=(0,i.W)();return{cursorPos:(0,e.EW)(()=>a.pos),selectedPos:(0,e.EW)(()=>a.selectedPos),selectedType:(0,e.EW)(()=>a.selectedType),figuredBassData:(0,e.EW)(()=>a.noteInfo.figuredBass||null),storeFiguredBassLvl:(0,e.EW)(()=>a.figuredBassLvl)}},computed:{pos(){if(this.selectedType==="figuredBass")return this.selectedPos;const a=this.cursorPos,c=this.interaction.scoreData.adagioData,f=c.getPartVoiceIdxFromUuid(a.partIdx,a.voiceUuid),oe=c.getMeasure(a.partIdx,a.measureIdx),Le=new nt.A(oe).getVoice(f);return a.timePos=Le.getRangeSpace(0,a.noteIdx),a.dpq=at.default.getDpq(oe),a}},methods:{enter(a,c){return ge(this,null,function*(){yield this.checkAddRemove(a),(0,i.W)().setFiguredBassLvl(this.level+1),c.preventDefault()})},backspace(a,c){return ge(this,null,function*(){const{scoreActions:f}=this.interaction.scoreData,oe=(0,i.W)();yield this.checkAddRemove(a),this.originalFiguresData===null||this.originalFiguresData.length===1?f.executePublicAction("goLeft"):a===""&&this.level>0?oe.setFiguredBassLvl(this.level-1):oe.forceRefresh(),c.preventDefault()})},destroy(a){return this.checkAddRemove(a),Promise.resolve()},down(a){return ge(this,null,function*(){yield this.checkAddRemove(a),(0,i.W)().setFiguredBassLvl(this.level+1)})},up(a){return ge(this,null,function*(){yield this.checkAddRemove(a),(0,i.W)().setFiguredBassLvl(this.level-1)})},checkAddRemove(a){return this.checkAddRemoveCalled?Promise.resolve():(this.checkAddRemoveCalled=!0,a.trim().length===0?this.checkRemove(a):this.checkAdd(a))},checkAdd(a){const{scoreActions:c}=this.interaction.scoreData,f=this.getText();if(a.length>0&&f!==a){const oe=this.libFigure.resolveString(a);return c.executePublicAction("addFiguredBass",{position:this.originalPos,figuresData:oe,level:this.level})}return Promise.resolve()},checkRemove(a){const{scoreActions:c}=this.interaction.scoreData;return this.getText().length>0&&a!==this.getText()?c.executePublicAction("removeFiguredBass",{position:this.originalPos,level:this.level}):Promise.resolve()},getText(){return this.originalFiguresData===null||this.level+1>this.originalFiguresData.length?"":this.libFigure.resolveChord([this.originalFiguresData[this.level]])},getTextY(){const{svgTools:a,cursor:c}=this.interaction;return c.pageLayout.uuidGetSystemBottomStaffFiguredBassY({staffUuid:this.pos.staffUuid,partUuid:this.pos.partUuid,measureUuid:this.pos.measureUuid,level:this.level})*a.scaling},getRightMeasure(){const{cursor:a}=this.interaction;return a.pageLayout.uuidGetPartBottomMeasureElem({partUuid:this.pos.partUuid,measureUuid:this.pos.measureUuid}).elem},getRightElem(){const{cursor:a}=this.interaction;if(a.selectedElem&&this.selectedType==="figuredBass")return a.realSelectedElem;const c=a.getNote();return c?c.head?c.head:c.note:null},getFontSize(){const{svgTools:a}=this.interaction;return Math.ceil(a.fontSize)},applyMargin(a,c){const{svgTools:f}=this.interaction,oe=this.$el.style;oe.left=`${Number.parseFloat(oe.left,10)-(a-c)/2+f.spaceLine/2}px`,oe.top=`${Number.parseFloat(oe.top,10)-this.$el.offsetHeight+2}px`}},beforeMount(){if(this.selectedType==="figuredBass"?(this.interaction.cursor.selectedElem.refreshData(),this.originalFiguresData=(0,Ke.default)(this.interaction.cursor.selectedElem.data.figuresData)):this.figuredBassData?this.originalFiguresData=(0,Ke.default)(this.figuredBassData.figuresData):this.originalFiguresData=null,this.level=this.storeFiguredBassLvl,this.storeFiguredBassLvl>0&&(this.originalFiguresData===null||this.originalFiguresData.length<this.level)){this.checkAddRemoveCalled=!0;let a=0;this.originalFiguresData!==null&&(a=this.originalFiguresData.length),(0,i.W)().setFiguredBassLvl(a)}},mounted(){this.originalPos=this.pos}},Fe=(0,p.A)(Q,[["render",Ze]]),xe={key:0,class:"suggest noselect"},Qe=["onPointerup"];function ze(a,c){const f=(0,e.g2)("score-text-input");return(0,e.uX)(),(0,e.Wv)(f,{interaction:a.interaction,selectedType:"chord",getText:a.getText,updateSuggestions:a.updateSuggestions,actionDestroy:a.destroy,actionEnter:a.enter,actionBackspace:a.backspace,checkAddRemove:a.checkAddRemove,actionLeft:a.left,actionRight:a.right,onLeftRightAddRemove:!1,fontFamily:a.fontFamily,fontStyle:a.fontStyle,getFontSize:a.getFontSize,getTextY:a.getTextY,getRightElem:a.getRightElem,applyMargin:a.applyMargin},{default:(0,e.k6)(()=>[a.hasSuggestions?((0,e.uX)(),(0,e.CE)("div",xe,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.displayedSuggestions,(oe,Ue)=>((0,e.uX)(),(0,e.CE)("button",{onPointerup:Le=>a.chooseSuggestion(Le,Ue),class:(0,d.C4)(["idea",{"chord-focus":oe.focus,"chord-unfocus":!oe.focus}])},(0,d.v_)(oe.letter),43,Qe))),256))])):(0,e.Q3)("",!0)]),_:1},8,["interaction","getText","updateSuggestions","actionDestroy","actionEnter","actionBackspace","checkAddRemove","actionLeft","actionRight","fontFamily","fontStyle","getFontSize","getTextY","getRightElem","applyMargin"])}var yt=t(74957),ft=t(464173),Oe=t(381216),ut=t(613903),Tt=t(947704),ht=t.n(Tt),vt=t(727137),Rt=t(115033),It=Object.defineProperty,Lt=Object.getOwnPropertySymbols,Ct=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,J=(a,c,f)=>c in a?It(a,c,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[c]=f,Me=(a,c)=>{for(var f in c||(c={}))Ct.call(c,f)&&J(a,f,c[f]);if(Lt)for(var f of Lt(c))G.call(c,f)&&J(a,f,c[f]);return a};const Xe={name:"scoreTextHarmony",components:{ScoreTextInput:A},props:{interaction:{type:Object,required:!0}},data(){return{originalText:null,suggestions:[],focusIdx:0,fontFamily:"Noto Serif",fontStyle:"normal",libChord:new(ht())({degreeUtils:yt.A,chordKind:ft.A,degreeType:Oe.A,harmonyType:ut.A})}},setup(){const a=(0,i.W)(),c=(0,vt.x)();return{harmonyData:(0,e.EW)(()=>a.noteInfo.harmony||{}),pos:(0,e.EW)(()=>a.pos),selectedType:(0,e.EW)(()=>a.selectedType),hasTabFrame:(0,e.EW)(()=>c.hasTabFrame)}},computed:{hasSuggestions(){return this.suggestions.length>0},displayedSuggestions(){return this.suggestions.slice(0,10)}},methods:{enter(a,c){const{scoreActions:f}=this.interaction.scoreData;return this.checkAddRemove(a),f.executePublicAction("goRight"),c.preventDefault(),Promise.resolve()},backspace(a,c){const{scoreActions:f}=this.interaction.scoreData;return this.checkAddRemove(a),f.executePublicAction("goLeft"),c.preventDefault(),Promise.resolve()},destroy(a,c){return this.checkAddRemove(a,c,!0),Promise.resolve()},getStaffDetails(){const a=this.interaction.cursor.getPositionUuid(),c=this.interaction.scoreData.getCurrentAdagioData().uuidGetMeasure(a.partUuid,a.measureUuid),[f]=at.default.getStaffDetails(c);return f},updateSuggestions(a){try{const c=[].slice.call(this.libChord.resolveString(a));c.forEach(f=>{f.letter=this.libChord.resolveChord(f),f.focus=!1}),c.length>0&&(c[0].focus=!0,this.focusIdx=0),this.suggestions=c}catch(c){const{scoreActions:f}=this.interaction.scoreData;f.logError(c,{textContent:a})}},left(){return this.suggestions.length>0&&this.focusIdx>0?(this.suggestions[this.focusIdx].focus=!1,this.focusIdx--,this.suggestions[this.focusIdx].focus=!0,!0):!1},right(){return this.suggestions.length>0&&this.focusIdx+1<this.suggestions.length?(this.suggestions[this.focusIdx].focus=!1,this.focusIdx++,this.suggestions[this.focusIdx].focus=!0,!0):!1},chooseSuggestion(a,c){const{scoreActions:f}=this.interaction.scoreData,oe=(0,Ke.default)(this.suggestions[c]);if(this.hasTabFrame){const Ue=this.getStaffDetails();oe.frame=(0,Rt.A)(oe,Ue,this.interaction.scoreData.adagioData,this.pos)}f.executePublicAction("addHarmony",oe),this.checkAddRemoveExecuted=!0,f.executePublicAction("goRight"),a.stopPropagation()},close(){this.interaction.cursor.setTextMode(null),this.interaction.cursor.clearSelected()},checkAddRemove(a,c,f){this.checkAddRemoveExecuted||(this.checkAddRemoveExecuted=!0,a.trim().length===0?this.checkRemove(a,c):this.checkAdd(a,c,f))},checkAdd(a,c,f){f?this.getText()!==a&&this.suggestions.length>0&&this.execAdd(a,c):this.suggestions.length>0&&this.getText()!==a?this.execAdd(a,c):this.suggestions.length>1&&this.focusIdx>0&&this.execAdd(a,c)},execAdd(a,c){const{scoreActions:f}=this.interaction.scoreData,oe=(0,Ke.default)(this.suggestions[this.focusIdx]);if(this.hasTabFrame){const Ue=this.getStaffDetails();oe.frame=(0,Rt.A)(oe,Ue,this.interaction.scoreData.adagioData,this.pos)}f.executePublicAction("addHarmony",Me({position:c},oe))},checkRemove(a,c){const{scoreActions:f}=this.interaction.scoreData;this.getText().length>0&&a!==this.getText()&&f.executePublicAction("removeHarmony",{position:c})},getText(){if(this.originalText!==null)return this.originalText;if(this.selectedType==="chord")return this.originalText=this.libChord.resolveChord(this.interaction.cursor.selectedElem.data),this.originalText;const a=this.harmonyData;return a&&(this.originalText=this.libChord.resolveChord(a)),this.originalText===null&&(this.originalText=""),this.originalText},getTextY(){const{svgTools:a,cursor:c}=this.interaction;let f;if(this.selectedType!=="chord")f=c.pageLayout.uuidGetSystemChordsY({partUuid:this.pos.partUuid,measureUuid:this.pos.measureUuid});else{const{pos:oe}=c.selectedElem;f=c.pageLayout.uuidGetSystemChordsY({partUuid:oe.partUuid,measureUuid:oe.measureUuid})}return f*a.scaling},getRightElem(){const{cursor:a}=this.interaction;if(a.selectedElem&&this.selectedType==="chord")return a.realSelectedElem;const c=a.getNote();return c?c.head?c.head:c.note:null},getFontSize(){const{svgTools:a}=this.interaction;return a.harmonySize},applyMargin(){const a=this.$el.style;a.top=`${Number.parseFloat(a.top,10)-this.$el.offsetHeight+2}px`}}},He=(0,p.A)(Xe,[["render",ze]]);function lt(a,c){const f=(0,e.g2)("score-text-input");return(0,e.uX)(),(0,e.Wv)(f,{interaction:a.interaction,selectedType:"lyric",lvl:a.lvl,getText:a.getText,actionDestroy:a.destroy,actionDown:a.down,actionUp:a.up,actionMinus:a.minus,actionUnderscore:a.underscore,actionSpace:a.space,actionEnter:a.enter,actionBackspace:a.backspace,checkAddRemove:a.checkAddRemove,fontFamily:a.fontFamily,fontStyle:a.fontStyle,getFontSize:a.getFontSize,getTextY:a.getTextY,getRightElem:a.getRightElem,applyMargin:a.applyMargin},null,8,["interaction","lvl","getText","actionDestroy","actionDown","actionUp","actionMinus","actionUnderscore","actionSpace","actionEnter","actionBackspace","checkAddRemove","fontFamily","fontStyle","getFontSize","getTextY","getRightElem","applyMargin"])}var At=t(273885),xt=t(398738),gt=t(303953),F=t(135519),re=(a,c,f)=>new Promise((oe,Ue)=>{var Le=pt=>{try{Ot(f.next(pt))}catch(bt){Ue(bt)}},Pt=pt=>{try{Ot(f.throw(pt))}catch(bt){Ue(bt)}},Ot=pt=>pt.done?oe(pt.value):Promise.resolve(pt.value).then(Le,Pt);Ot((f=f.apply(a,c)).next())});const Se={name:"ScoreTextLyrics",components:{ScoreTextInput:A},props:{interaction:{type:Object,required:!0}},data(){return{lvl:0,content:"",fontFamily:"Century Schoolbook L",fontStyle:"normal",syllabic:"",hyphen:!1,selectingJapaneseCharacter:!1}},setup(){const a=(0,F.d)(),c=(0,i.W)();return{backspacePressed:(0,e.EW)(()=>a.backspacePressed),setBackspacePressed:a.setBackspacePressed,lyrics:(0,e.EW)(()=>c.noteInfo.lyrics||[]),storeLyricLvl:(0,e.EW)(()=>c.lyricLvl),pos:(0,e.EW)(()=>c.pos),setLyricLvl:c.setLyricLvl}},methods:{down(){return this.selectingJapaneseCharacter||this.setLyricLvl(this.lvl+1),Promise.resolve()},up(){return this.selectingJapaneseCharacter||this.setLyricLvl(this.lvl-1),Promise.resolve()},minus(a,c){const{scoreActions:f}=this.interaction.scoreData;return this.checkAddRemove(a,!0),f.executePublicAction("goRight"),c.preventDefault(),Promise.resolve()},underscore(a,c){const{scoreActions:f}=this.interaction.scoreData;return this.checkAddRemove(a,!1,!0),f.executePublicAction("goRight"),c.preventDefault(),Promise.resolve()},space(a,c){if(gt.A.language==="ja")return this.space_japanese(a,c);if(c.shiftKey||c.altKey)return Promise.resolve();const{scoreActions:f}=this.interaction.scoreData;return this.checkAddRemove(a,!1),f.executePublicAction("goRight"),c.preventDefault(),Promise.resolve()},space_japanese(a,c){if(!c.shiftKey&&!c.altKey)return this.selectingJapaneseCharacter=!0,Promise.resolve();this.selectingJapaneseCharacter=!1;const{scoreActions:f}=this.interaction.scoreData;return this.checkAddRemove(a,!1),f.executePublicAction("goRight"),c.preventDefault(),Promise.resolve()},enter(a,c){if(this.selectingJapaneseCharacter)return this.selectingJapaneseCharacter=!1,Promise.resolve();const{scoreActions:f}=this.interaction.scoreData;return this.checkAddRemove(a,this.hyphen),f.executePublicAction("goRight"),c.preventDefault(),Promise.resolve()},backspace(a,c){return re(this,null,function*(){if(this.backspacePressed)return;this.setBackspacePressed(!0),this.selectingJapaneseCharacter=!1;const{scoreActions:f}=this.interaction.scoreData;try{yield this.checkAddRemove(a,this.hyphen),yield f.executePublicAction("goLeft"),c.preventDefault(),this.setBackspacePressed(!1)}catch(oe){throw c.preventDefault(),this.setBackspacePressed(!1),oe}})},destroy(a){return this.selectingJapaneseCharacter=!1,this.checkAddRemove(a,this.hyphen),Promise.resolve()},checkAddRemove(a,c,f){return re(this,null,function*(){this.checkAddRemoveCalled||(this.checkAddRemoveCalled=!0,a.trim().length===0&&!f?yield this.checkRemove(a):yield this.checkAdd(a,c,f))})},checkAdd(a,c,f=!1){return re(this,null,function*(){this.selectingJapaneseCharacter=!1;const{scoreActions:oe}=this.interaction.scoreData,Ue=this.getOriginalLyrics(),Le=Ue.text||"";(a.length>0&&Le!==a||typeof c=="boolean"&&Le.length>0&&c!==Ue.hasRightConnection||f&&!Ue.hasRightMelisma)&&(yield oe.executePublicAction("addLyric",{text:a,level:this.lvl,hasRightConnection:c,position:this.originalPos,hasMelisma:f}))})},checkRemove(a){return re(this,null,function*(){this.selectingJapaneseCharacter=!1;const{scoreActions:c}=this.interaction.scoreData,f=this.getOriginalLyrics(),oe=f.text||"";(oe.length>0&&a!==oe||f.isMelisma)&&(yield c.executePublicAction("removeLyric",{level:this.lvl,position:this.originalPos}))})},getOriginalLyrics(){return this.originalLyrics.find(a=>a.level===this.lvl)||{}},getText(){return this.getOriginalLyrics().text||""},getTextY(){const{svgTools:a,cursor:c}=this.interaction;return c.pageLayout.uuidGetStaffLyricsUpY({staffUuid:this.pos.staffUuid,partUuid:this.pos.partUuid,measureUuid:this.pos.measureUuid,level:this.lvl})*a.scaling},getRightElem(){const{cursor:a}=this.interaction,c=a.getNote();return c?c.head?c.head:c.note:null},getFontSize(){const{svgTools:a}=this.interaction;return Math.ceil(a.fontSize)},applyMargin(a,c){const{svgTools:f}=this.interaction,oe=this.$el.style;oe.left=`${Number.parseFloat(oe.left,10)-(a-c)/2+f.spaceLine/2}px`,oe.top=`${Number.parseFloat(oe.top,10)-2}px`}},beforeMount(){this.originalLyrics=this.lyrics;const a=this.interaction.scoreData.adagioData;this.fontFamily=At.A.getTextTypeFontFamily(a.getDefaults(),xt.default.LYRICS)},mounted(){this.lvl=this.storeLyricLvl,this.originalPos=structuredClone(this.pos),this.hyphen=this.getOriginalLyrics().hasRightConnection||!1}},W=(0,p.A)(Se,[["render",lt]]);function V(a,c){const f=(0,e.g2)("score-text-input");return(0,e.uX)(),(0,e.Wv)(f,{interaction:a.interaction,selectedType:"word",getText:a.getText,actionDestroy:a.destroy,actionDown:a.down,actionUp:a.up,actionEnter:a.enter,actionBackspace:a.backspace,checkAddRemove:a.checkAddRemove,fontFamily:a.fontFamily,fontStyle:a.fontStyle,placement:a.placement,getFontSize:a.getFontSize,getTextY:a.getTextY,getRightElem:a.getRightElem,applyMargin:a.applyMargin,initAttr:a.initAttr},null,8,["interaction","getText","actionDestroy","actionDown","actionUp","actionEnter","actionBackspace","checkAddRemove","fontFamily","fontStyle","placement","getFontSize","getTextY","getRightElem","applyMargin","initAttr"])}const Ie={name:"scoreTextWord",components:{ScoreTextInput:A},props:{interaction:{type:Object,required:!0}},data(){return{originalText:null,content:"",placement:"above",fontFamily:"Noto Serif",fontStyle:"italic"}},setup(){const a=(0,i.W)();return{pos:(0,e.EW)(()=>a.pos),selectedType:(0,e.EW)(()=>a.selectedType),wordData:(0,e.EW)(()=>a.noteInfo.wordData||{})}},methods:{down(){return this.placement==="above"&&(this.placement="below"),Promise.resolve()},up(){return this.placement==="below"&&(this.placement="above"),Promise.resolve()},destroy(a,c){return this.checkAddRemove(a,c),Promise.resolve()},enter(a,c){const{scoreActions:f}=this.interaction.scoreData;return this.checkAddRemove(a),f.executePublicAction("goRight"),c.preventDefault(),Promise.resolve()},backspace(a,c){const{scoreActions:f}=this.interaction.scoreData;return this.checkAddRemove(a),f.executePublicAction("goLeft"),c.preventDefault(),Promise.resolve()},checkAddRemove(a,c){this.checkAddRemoveExecuted||(this.checkAddRemoveExecuted=!0,a.trim().length===0?this.checkRemove(a,c):this.checkAdd(a,c))},checkAdd(a,c){const{scoreActions:f}=this.interaction.scoreData;(this.getText()!==a||this.placement!==this.getPlacement())&&f.executePublicAction("addWord",{text:a,placement:this.placement,position:c})},checkRemove(a,c){const{scoreActions:f}=this.interaction.scoreData;this.getText().length>0&&a!==this.getText()&&f.executePublicAction("removeWord",{position:c})},getText(){var a;return this.originalText!==null?this.originalText:this.selectedType==="word"?(this.originalText=this.interaction.cursor.selectedElem.data.text,this.originalText):(this.originalText="",(a=this.wordData)!=null&&a.text&&(this.originalText=this.wordData.text),this.originalText)},getPlacement(){return this.originalData.placement||"above"},getTextY(){const{svgTools:a,cursor:c}=this.interaction;let f;if(this.selectedType!=="word")f=c.pageLayout.uuidGetStaffWordsY({staffUuid:this.pos.staffUuid,partUuid:this.pos.partUuid,measureUuid:this.pos.measureUuid,placement:this.placement});else{const oe=c.selectedElem.pos;f=c.pageLayout.uuidGetStaffWordsY({staffUuid:oe.staffUuid,partUuid:oe.partUuid,measureUuid:oe.measureUuid,placement:this.placement})}return f*a.scaling},getRightElem(){const{cursor:a}=this.interaction;if(a.selectedElem&&this.selectedType==="word")return a.selectedElem.elem;const c=a.getNote();return c?c.head?c.head:c.note:null},getFontSize(){const{svgTools:a}=this.interaction;return a.wordSize},applyMargin(){const a=this.$el.style;a.top=`${Number.parseFloat(a.top,10)-4*this.$el.offsetHeight/5}px`},initAttr(){this.placement=this.getPlacement()}},beforeMount(){this.selectedType==="word"?this.originalData=this.interaction.cursor.selectedElem.data:this.originalData=this.wordData}},ot={name:"scoreTextTools",components:{ScoreTextLyrics:W,ScoreTextWord:(0,p.A)(Ie,[["render",V]]),ScoreTextHarmony:He,ScoreTextClassicChord:we,ScoreTextFiguredBass:Fe},props:{interaction:{type:Object,required:!0}},setup(){const a=(0,i.W)(),c=(0,s.c)();return{textMode:(0,e.EW)(()=>a.textMode),selectedType:(0,e.EW)(()=>a.selectedType),selectedTs:(0,e.EW)(()=>a.selectedTs),posTs:(0,e.EW)(()=>a.posTs),lyricLvl:(0,e.EW)(()=>a.lyricLvl),figuredBassLvl:(0,e.EW)(()=>a.figuredBassLvl),hasNewRomanNumeralsInput:(0,e.EW)(()=>c.hasNewRomanNumeralsInput),hasNewJazzChordInput:(0,e.EW)(()=>c.hasNewJazzChordInput)}},computed:{ts(){return Math.max(this.selectedTs||0,this.posTs||0)},componentKey(){return`se-text-${this.ts}-${this.lyricLvl}-${this.figuredBassLvl}`}}},Ve=(0,p.A)(ot,[["render",r]])},896099:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>o});const e=["tuplets","beamingPolicy","toggleForceBeam","toggleForceUnbeam","transpose","8va","noteColor","fine","systemBreak","toggleGraceSlurAtNote","setEditionModeMelody","setChangeDurationReplace","setChangeDurationInsert","multiMeasureRest"];function o(r){return e.includes(r)}},898419:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=65,s=(0,o.pM)({name:"TbMute",props:{name:{type:String,required:!0},mute:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>u.noteInfo.muteData&&u.noteInfo.muteData.type===d.mute);return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:m.value})}})},900591:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(727137),o=t(361744),r=t(299035);const i=65,s=(0,o.pM)({name:"TbGraceSlurs",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:(0,e.x)().hasGraceSlur})}})},900889:(l,n,t)=>{var e=t(845126);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("77477c28",e,!0,{})},902518:l=>{"use strict";l.exports='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16"><path class="fill" fill-rule="evenodd" d="M3.889 11.644v-7.31c0-.178-.133-.356-.245-.356-.022 0-.044 0-.066.044-.49.69-.845 1.734-.845 3.422 0 2.067.311 3.556.911 4.4a.122.122 0 0 0 .112.067c.066 0 .133-.067.133-.267zm4.955-2.733h.09c.11 0 .333 0 .355.422 0 .69-.6 4.156-4.378 4.223-.155.066-.244.177-.244.31v1.756c0 .2-.156.378-.4.378-.178 0-.378-.178-.378-.378v-1.71c0-.2-.267-.49-.422-.556a3.824 3.824 0 0 1-2-1.29c-.778-.91-1.334-2.022-1.445-3.2C0 8.667 0 8.445 0 8.245c0-2.11 1.022-4.466 3.022-5.333l.6-.222c.045 0 .267-.2.267-.356V.378c0-.178.2-.378.378-.378.244 0 .4.2.4.378V2c0 .111.11.489.244.511.156 0 .089-.022.133-.022.423 0 3.778.267 3.778 3.155 0 1.845-1.689 1.912-1.689 1.912-.622 0-1.71-.4-1.71-1.645 0-.689.51-1.644 1.4-1.644.333 0 .4-.311.4-.49 0-.221-.49-.755-1.623-.755-.111 0-.244 0-.378.022-.155.023-.555.4-.555.556v8.8c0 .178.133.311.222.333.178.045.355.067.578.067.71 0 3.155-.667 3.155-3.511 0-.333.134-.378.222-.378z"/></svg>'},905618:(l,n,t)=>{var e=t(631185);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("7170655e",e,!0,{})},920302:(l,n,t)=>{var e=t(510047);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("00c3dc07",e,!0,{})},926424:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(243564);const i=61,s=(0,o.pM)({name:"TbBendRelease",props:{scoreData:{type:Object,required:!0}},setup(d){const u=[{value:"release0",action:"toggleBendRelease0"},{value:"release1",action:"toggleBendRelease1"}],m=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,css:"tb-bend-release",items:u,active:[m.tbBend],defaultActionIcon:"toggleBendRelease0"})}})},927663:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=48,s=(0,o.pM)({name:"TbMeasureRepeat",props:{scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:"toggleMeasureRepeat",iconKey:"measureRepeat",active:u.measureInfo.measureRepeat!==null})}})},931720:(l,n,t)=>{"use strict";t.d(n,{B:()=>d});var e=t(763939),o=t(849123),r=t(6645),i=t(744056),s=t(318866);const d=(0,r.nY)("dialogUpgrade",()=>{const u=(0,i.KR)(null);function m(v){const _=(0,e.F)(),S=(0,o.k)(),{showDialog:N}=(0,s.j)();_.isMusicSnippet?u.value=structuredClone(v):!_.account||_.account.type!=="user"?window.location.href="/auth/signup":_.account.organization?window.location.href="/settings/your-plan":S.isSubscriptionActive||S.isSubscriptionPastDue?window.location.href="/settings/account/billing":N({key:"upgrade",params:v,shouldStack:!0})}return{restrictedFeatureAttempt:u,showUpgradeDialog:m}})},935076:(l,n,t)=>{var e=t(782449);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("7ecfebf2",e,!0,{})},941047:(l,n,t)=>{"use strict";t.d(n,{A:()=>E});var e=t(361744),o=t(538065),r=t(555381);const i=["aria-label"];function s(I,C,Z,te,U,b){const z=(0,e.g2)("FNumberInputWithSteppers"),ce=(0,e.g2)("f-button"),se=(0,e.g2)("f-power-button");return(0,e.uX)(),(0,e.CE)("form",{class:(0,o.C4)(I.$style.root),onSubmit:C[2]||(C[2]=(0,r.D$)(x=>b.setCustom(),["prevent"])),"aria-label":I.$t("editor:addRepeatXTimes.title")},[(0,e.bF)(z,{autofocus:"",modelValue:U.times,"onUpdate:modelValue":C[0]||(C[0]=x=>U.times=x),onChange:b.setNbTimes,min:U.min,max:U.max,step:1,placeholder:b.plaeholderRepeatTime,onEsc:b.close,ref:"repeatNumberInput",size:"small"},null,8,["modelValue","onChange","min","max","placeholder","onEsc"]),b.enabledFeature?((0,e.uX)(),(0,e.Wv)(ce,{key:0,type:"submit","default-text":b.buttonText,theme:"fill",size:"small"},null,8,["default-text"])):((0,e.uX)(),(0,e.Wv)(se,{key:1,"show-icon":!1,type:"submit","default-text":b.buttonText,size:"small"},null,8,["default-text"])),b.active?((0,e.uX)(),(0,e.Wv)(ce,{key:2,type:"button",theme:"ghost-red",size:"small","default-text":"","aria-label":I.$t("flat:remove"),icon:b.removeIcon,onClick:C[1]||(C[1]=x=>b.removeRepeatBarline())},null,8,["aria-label","icon"])):(0,e.Q3)("",!0)],42,i)}var d=t(842746),u=t(472838),m=t(269032),v=t(121648),_=t(445895),S=t(674548),N=t(763939),k=t(71204),O=t(227468),X=t(727825);const L={name:"DdnInnerRepeatXTimes",emits:["close"],props:{scoreData:{type:Object,required:!0},autoFocus:{type:Boolean,default:!0}},setup(){const I=(0,N.F)(),C=(0,v.W)(),Z=(0,X.N)();return{accountFeatures:(0,e.EW)(()=>I.accountFeatures),contextPos:(0,e.EW)(()=>C.contextPos),tbRepeatXTimes:(0,e.EW)(()=>{var te;return((te=C.selectedEntity)==null?void 0:te.entityType)===d.A.BARLINE_REPEAT_TIMES?C.selectedEntity.nbTimes:C.tbRepeatXTimes}),displayMobileEditor:(0,e.EW)(()=>Z.displayMobileEditor),watchViewport:Z.watchViewport,unwatchViewport:Z.unwatchViewport}},data(){return{times:1,min:m.A.MIN_TIMES,max:m.A.MAX_TIMES-1,watchingViewport:!1}},components:{FPowerButton:O.QY,FNumberInputWithSteppers:k.A},computed:{plaeholderRepeatTime(){return S.MR.t("flat:editor.placeholer-repeat-times")},buttonText(){return this.active?"flat:edit":"flat:add"},active(){return this.tbRepeatXTimes>=2},removeIcon(){return _.A},enabledFeature(){return this.accountFeatures.customRepeatBarline}},methods:{setCustom(){this.scoreData.scoreActions.executePublicAction("addRepeatXTimes",{times:this.times}),this.close()},removeRepeatBarline(){this.scoreData.scoreActions.executePublicAction("addRightRepeatBarline"),this.close()},close(){this.$emit("close")},focusInput(){this.$refs.repeatNumberInput.focus()},setNbTimes(I){this.times=Number.parseInt(I,10)}},created(){this.times=this.tbRepeatXTimes,this.times===0&&(this.times=2)},beforeMount(){this.displayMobileEditor&&(0,u.default)().then(()=>{this.watchingViewport=!0,this.watchViewport()})},beforeUnmount(){this.watchingViewport&&this.unwatchViewport()},mounted(){this.autoFocus&&this.$refs.repeatNumberInput.focus()}};var y=t(418280),j=t.n(y),w=t(938793);const g={};g.$style=j();const E=(0,w.A)(L,[["render",s],["__cssModules",g]])},941287:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>i,width:()=>r});var e=t(361744),o=t(299035);const r=36,i=(0,e.pM)({name:"TbPaste",props:{scoreData:{type:Object,required:!0},buttonStyle:{type:String,default:"detailed"}},setup(s){return()=>(0,e.h)(o.default,{buttonStyle:s.buttonStyle,scoreData:s.scoreData,action:"paste"})}})},941379:(l,n,t)=>{"use strict";t.d(n,{A:()=>Ve});var e=t(361744),o=t(538065),r=t(555381);const i=["placeholder"],s=["aria-label"],d=["aria-label"];function u(a,c,f,oe,Ue,Le){const Pt=(0,e.g2)("ChordPreview"),Ot=(0,e.g2)("FButton"),pt=(0,e.g2)("CollapseIcon"),bt=(0,e.g2)("CloseIcon");return(0,e.uX)(),(0,e.CE)("div",{class:(0,o.C4)({[a.$style.root]:!0,[a.$style.rootWide]:oe.displayMobileEditor&&oe.isSmallScreen}),"data-cy":"ddn-inner-jazz-chords-text"},[(0,e.bF)(Pt,{class:(0,o.C4)(a.$style.chordPreview),"small-height":!0,root:Ue.chordData.root,quality:Ue.chordData.quality,degrees:Ue.chordData.degrees,bass:Ue.chordData.bass,alter:Ue.chordData.alter},null,8,["class","root","quality","degrees","bass","alter"]),(0,e.bo)((0,e.Lk)("input",{ref:"textInput",type:"text","onUpdate:modelValue":c[0]||(c[0]=ct=>Ue.textPreview=ct),placeholder:Ue.textPlaceholder,class:(0,o.C4)({[a.$style.input]:!0,[a.$style["input-small"]]:!0}),onKeypress:c[1]||(c[1]=(0,r.D$)(()=>{},["stop"])),onKeyup:c[2]||(c[2]=(0,r.D$)(()=>{},["stop"])),onKeydown:[c[3]||(c[3]=(0,r.jR)((...ct)=>Le.close&&Le.close(...ct),["esc"])),c[4]||(c[4]=(0,r.jR)((0,r.D$)((...ct)=>Le.doButtonAction&&Le.doButtonAction(...ct),["prevent"]),["enter"])),c[5]||(c[5]=(0,r.D$)((...ct)=>Le.onKeyDown&&Le.onKeyDown(...ct),["stop"]))],onInput:c[6]||(c[6]=(...ct)=>Le.onTextInput&&Le.onTextInput(...ct))},null,42,i),[[r.Jo,Ue.textPreview]]),(0,e.bF)(Ot,{type:"button",onClick:Le.doButtonAction,theme:Le.actionTheme,disabled:!Le.canDoAction,"default-text":Le.actionText,size:"small"},null,8,["onClick","theme","disabled","default-text"]),(0,e.Lk)("button",{type:"button",class:(0,o.C4)(a.$style.roundButton),onClick:c[7]||(c[7]=(...ct)=>oe.toggleJazzChordsInputType&&oe.toggleJazzChordsInputType(...ct)),"aria-label":a.$t("flat:expand")},[(0,e.bF)(pt,{class:(0,o.C4)({[a.$style.rotateIcon]:!0,[a.$style.reverse]:oe.displayMobileEditor&&oe.isSmallScreen})},null,8,["class"])],10,s),(0,e.Lk)("button",{type:"button",class:(0,o.C4)(a.$style.roundButton),onClick:c[8]||(c[8]=(...ct)=>Le.close&&Le.close(...ct)),"aria-label":a.$t("flat:close")},[(0,e.bF)(bt)],10,d)],2)}var m=t(529355),v=t(697333),_=t(121648),S=t(680468),N=t(909696),k=t(487420),O=t(813897),X=t(612732),L=t(255793),y=t(985734),j=t(581962),w=t(276132),g=t(155503);const M=["alt","Alt"];function E(a,c){c.alter=M.some(f=>a.includes(f))}var I=t(681670);const C=["C","D","E","F","G","A","B"];function Z(a,c){const f=a.toUpperCase(),oe=C.find(Le=>f.startsWith(Le));return oe?(c.bass=I.A.create(oe,0),a.slice(oe.length)):a}const te=[["##",2],["bb",-2],["#",1],["b",-1]];function U(a,c){a=a.trimStart();const f=te.find(([Ue])=>a.startsWith(Ue));if(!f)return a;const oe=f[1];return I.A.setAlter(c.bass,oe),a=a.slice(f[0].length),a}function b(a,c){c.bass=null;const f=a.indexOf("/");return f<0||(a=a.slice(f+1),a=a.trimStart(),a=Z(a,c),c.bass===null)||(a=U(a,c)),a}var z=t(794119);const ce=["alt","Alt","/"];function se(a){const c=ce.map(oe=>a.indexOf(oe)).filter(oe=>oe>=0);if(c.length===0)return[a,""];const f=Math.min(...c);return[a.slice(0,f),a.slice(f)]}function x(a,c){const[f,oe]=se(a),{useSuspended:Ue,degrees:Le}=(0,z.$)(f,c.quality.adagio);return c.degrees=Le,c.useSuspended=Ue,oe}var T=t(476943);function ne(a,c){const f=c.find(oe=>a.startsWith(oe));return f||null}function p(a,c,f){const oe=c.find(([Ue])=>a.startsWith(Ue));if(oe){const[Ue,Le]=oe;return{numberPattern:Ue,quality:Le}}return{numberPattern:"",quality:f}}const le=["maj","Maj","M","^"],A=[["7",y.Ay.MAJOR_7],["9",y.Ay.MAJOR_9],["11",y.Ay.MAJOR_11],["13",y.Ay.MAJOR_13]],de=y.Ay.MAJOR_7;function Ae(a){const c=ne(a,le);if(c===null)return null;a=a.slice(c.length);const{numberPattern:f,quality:oe}=p(a,A,de);return{pattern:`${c}${f}`,quality:oe}}const be=["-","min","m"],ae=[["2",y.Ay.MINOR_2],["5",y.Ay.MINOR],["6/9",y.Ay.MINOR_69],["69",y.Ay.MINOR_69],["6",y.Ay.MINOR_6],["7",y.Ay.MINOR_7],["9",y.Ay.MINOR_9],["11",y.Ay.MINOR_11],["13",y.Ay.MINOR_13]],ie=y.Ay.MINOR;function Ne(a){const c=ne(a,be);if(c===null)return null;a=a.slice(c.length);const{numberPattern:f,quality:oe}=p(a,ae,ie);return{pattern:`${c}${f}`,quality:oe}}const $e=[["7",y.Ay.MINOR_MAJOR_7],["9",y.Ay.MINOR_MAJOR_9],["11",y.Ay.MINOR_MAJOR_11],["13",y.Ay.MINOR_MAJOR_13]],Pe=y.Ay.MINOR_MAJOR_7;function we(a){const c=ne(a,be);if(c===null)return null;a=a.slice(c.length);const f=ne(a,le);if(f===null)return null;a=a.slice(f.length);const{numberPattern:oe,quality:Ue}=p(a,$e,Pe);return{pattern:`${c}${f}${oe}`,quality:Ue}}const Ze=["o","dim","d"],nt=[["7",y.Ay.DIMINISHED_7],["9",y.Ay.DIMINISHED_9],["11",y.Ay.DIMINISHED_11],["13",y.Ay.DIMINISHED_13]],Ke=y.Ay.DIMINISHED;function at(a){const c=ne(a,Ze);if(c===null)return null;a=a.slice(c.length);const{numberPattern:f,quality:oe}=p(a,nt,Ke);return{pattern:`${c}${f}`,quality:oe}}const q=["+","aug"],K=[["7",y.Ay.AUGMENTED_7],["9",y.Ay.AUGMENTED_9],["11",y.Ay.AUGMENTED_11],["13",y.Ay.AUGMENTED_13]],pe=y.Ay.AUGMENTED;function Te(a){const c=ne(a,q);if(c===null)return null;a=a.slice(c.length);const{numberPattern:f,quality:oe}=p(a,K,pe);return{pattern:`${c}${f}`,quality:oe}}const ge=["1/2dim","1/2o","1/2","\xF8"],Q=[["7",y.Ay.HALF_DIMINISHED_7],["9",y.Ay.HALF_DIMINISHED_9],["11",y.Ay.HALF_DIMINISHED_11],["13",y.Ay.HALF_DIMINISHED_13]],Re=y.Ay.HALF_DIMINISHED_7;function Fe(a){const c=ne(a,ge);if(c===null)return null;a=a.slice(c.length);const{numberPattern:f,quality:oe}=p(a,Q,Re);return{pattern:`${c}${f}`,quality:oe}}const xe=[["7",y.Ay.AUGMENTED_MAJOR_7],["9",y.Ay.AUGMENTED_MAJOR_9],["11",y.Ay.AUGMENTED_MAJOR_11],["13",y.Ay.AUGMENTED_MAJOR_13]],Qe=y.Ay.AUGMENTED_MAJOR_7;function ze(a){const c=ne(a,q);if(c===null)return null;a=a.slice(c.length);const f=ne(a,le);if(f===null)return null;a=a.slice(f.length);const{numberPattern:oe,quality:Ue}=p(a,xe,Qe);return{pattern:`${c}${f}${oe}`,quality:Ue}}const yt=[["2",y.Ay.MAJOR_2],["5",y.Ay.POWER],["6/9",y.Ay.SIX_NINE],["69",y.Ay.SIX_NINE],["7/6",y.Ay.DOMINANT_7_6],["76",y.Ay.DOMINANT_7_6],["67",y.Ay.DOMINANT_7_6],["6",y.Ay.MAJOR_6],["7",y.Ay.DOMINANT_7],["9",y.Ay.DOMINANT_9],["11",y.Ay.DOMINANT_11],["13",y.Ay.DOMINANT_13]],ft=y.Ay.MAJOR;function Oe(a){const{numberPattern:c,quality:f}=p(a,yt,ft);return{pattern:c,quality:f}}const ut=[Ae,Ne,we,Te,at,Fe,ze,Oe];function Tt(a,c){return a.pattern.length>c.pattern.length?a:c}function ht(a,c){a=a.trimStart();let f=ut.map(Le=>Le(a));if(f=f.filter(T.default.isNotNull),f.length===0)throw new Error(`Should find at least a candidate for string ${a}`);const{pattern:oe,quality:Ue}=f.reduce(Tt);return a=a.slice(oe.length),c.quality=Ue,a}const vt=["C","D","E","F","G","A","B"];function Rt(a,c){const f=a.toUpperCase(),oe=vt.find(Le=>f.startsWith(Le));return oe?(c.root=m.A.create(oe,0),a.slice(oe.length)):(c.root=m.A.create("C",0),a)}const It=[["##",2],["bb",-2],["#",1],["b",-1]];function Lt(a,c){a=a.trimStart();const f=It.find(([Ue])=>a.startsWith(Ue));if(!f)return a;const oe=f[1];return m.A.setAlter(c.root,oe),a=a.slice(f[0].length),a}function Ct(a,c){return a=a.trimStart(),a=Rt(a,c),a=Lt(a,c),a}function G(a){const c={};return a=Ct(a,c),a=ht(a,c),a=x(a,c),a=b(a,c),E(a,c),c}var J=t(252234),Me=t(599322),Xe=t(637963);function rt(a){const c=(0,Xe.dI)(a.root),f=(0,Me.d)(a.quality),oe=(0,z.d)({chordKind:a.quality.adagio,degrees:a.degrees,useSuspended:!0});let Ue=(0,J.d)(a.bass);Ue&&(Ue=`/${Ue}`);const Le=a.alter?" alt.":"";return`${c}${f}${oe}${Ue}${Le}`}var He=Object.defineProperty,lt=Object.defineProperties,At=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,re=(a,c,f)=>c in a?He(a,c,{enumerable:!0,configurable:!0,writable:!0,value:f}):a[c]=f,Se=(a,c)=>{for(var f in c||(c={}))gt.call(c,f)&&re(a,f,c[f]);if(xt)for(var f of xt(c))F.call(c,f)&&re(a,f,c[f]);return a},B=(a,c)=>lt(a,At(c));const W={"root-step":"C","root-alter":0},V={name:"DdnInnerJazzChordsText",components:{CloseIcon:k.A,CollapseIcon:O.A,ChordPreview:L.A},emits:["close"],props:{scoreData:{type:Object,required:!0},interaction:{type:Object,required:!0}},setup(){const a=(0,X.k)(),c=(0,S.c)(),f=(0,_.W)(),oe=(0,N.q6)();return{isSmallScreen:(0,e.EW)(()=>a.isSmallScreen),toggleJazzChordsInputType:c.toggleJazzChordsInputType,selectedType:(0,e.EW)(()=>f.selectedType),noteInfo:(0,e.EW)(()=>f.noteInfo),displayMobileEditor:(0,e.EW)(()=>oe.displayMobileEditor)}},data(){return{formerJazzChord:null,position:null,textPreview:"",textPlaceholder:"C7",chordData:{root:W,quality:y.Ay.MAJOR,degrees:[],bass:void 0,alter:!1}}},computed:{hasFormer(){return this.formerJazzChord!==null},hasInput(){return this.textPreview.trim()!==""},canDoAction(){return this.hasFormer||this.hasInput},actionText(){return this.hasFormer?this.hasInput?"flat:update":"flat:remove":"flat:add"},actionTheme(){return this.hasFormer&&!this.hasInput?"fill-red":"fill"},isChordDifferent(){return!this.hasFormer||!m.A.isSame(this.formerJazzChord.root,this.chordData.root)||!this.isDegreeSame(this.formerJazzChord.degrees,this.chordData.degrees)||!this.isBaseSame(this.formerJazzChord.bass,this.chordData.bass)||this.chordData.quality.adagio!==this.formerJazzChord.quality.adagio||this.chordData.alter!==this.formerJazzChord.alter},useNewDisplay(){return(0,v.A)()}},methods:B(Se(Se({},g.A),j.A),{retrieveFormerChord:w.A.retrieveFormerChord,retrieveStaffDetails:w.A.retrieveStaffDetails,close(){this.$emit("close")},doButtonAction(){this.hasInput?this.addChord():this.hasFormer?this.removeChord():this.goRight()},onTextInput(){const a=G(this.textPreview);Object.assign(this.chordData,a)},onKeyDown(a){a.code==="ArrowUp"?(a.preventDefault(),this.goUp()):a.code==="ArrowDown"?(a.preventDefault(),this.goDown()):a.ctrlKey||a.metaKey?a.code==="ArrowLeft"?(a.preventDefault(),this.goLeft()):a.code==="ArrowRight"?(a.preventDefault(),this.goRight()):a.code==="Backspace"&&(a.preventDefault(),this.removeChord()):a.code==="ArrowLeft"&&this.isOnLeftBoundary()?(a.preventDefault(),this.goLeft()):a.code==="ArrowRight"&&this.isOnRightBoundary()?(a.preventDefault(),this.goRight()):a.code==="Backspace"&&this.isOnLeftBoundary()&&(a.preventDefault(),this.removeChord())},goLeft(){this.useNewDisplay?this.scoreData.scoreActions.executePublicAction("goLeftText"):this.scoreData.scoreActions.executePublicAction("goLeft")},goRight(){this.useNewDisplay?this.scoreData.scoreActions.executePublicAction("goRightText"):this.scoreData.scoreActions.executePublicAction("goRight")},goUp(){this.useNewDisplay||this.scoreData.scoreActions.executePublicAction("goPreviousStaff")},goDown(){this.useNewDisplay||this.scoreData.scoreActions.executePublicAction("goNextStaff")},isOnLeftBoundary(){return this.$refs.textInput.selectionStart===0&&this.$refs.textInput.selectionEnd===0},isOnRightBoundary(){return this.$refs.textInput.selectionStart===this.textPreview.length&&this.$refs.textInput.selectionEnd===this.textPreview.length},updateTextPreview(){this.textPlaceholder=rt(this.formerJazzChord),this.textPreview=this.textPlaceholder}}),mounted(){this.retrieveFormerChord(),this.retrieveStaffDetails(),this.$refs.textInput.focus()}};var Ie=t(209879),Ee=t.n(Ie),De=t(938793);const ot={};ot.$style=Ee();const Ve=(0,De.A)(V,[["render",u],["__cssModules",ot]])},945056:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=42,s=(0,o.pM)({name:"TbSystemBreak",props:{scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:"toggleSystemBreak",iconKey:"systemBreak",active:u.measureInfo.systemBreak==="yes"})}})},946402:(l,n,t)=>{"use strict";l.exports=t.p+"img/0c7c1e319b38f83e40dd.svg"},949966:(l,n,t)=>{var e=t(653119);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("63477202",e,!0,{})},951713:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.bottomUI_rzATq{box-shadow:0 8px 18px -6px #2f34461f,0 12px 42px -4px #2f34461f;z-index:1;flex-grow:0;flex-shrink:0;display:flex;flex-direction:column;width:100%;background-color:#fff}*[data-color-mode=dark] .bottomUI_rzATq{background-color:var(--f-bg-dark-lighter)}.bottomPadding_PaWrN{padding-bottom:20px}
`,""]),s.locals={bottomUI:"bottomUI_rzATq",bottomPadding:"bottomPadding_PaWrN"};const d=s},954405:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.tab-medium_CuJ3V{font-size:16px;padding-bottom:14px}.tab-small_aG2ke{font-size:12px;padding-bottom:8px}.tab-item_nbY8R{color:var(--f-subdue);line-height:24px;cursor:pointer}.tab-item_nbY8R:not(:last-child){margin-right:24px}.tab-item_nbY8R.active_mcPfC{color:var(--f-tab-active-color, var(--f-ink));border-bottom:2px solid var(--f-tab-active-color, var(--f-ink))}
`,""]),s.locals={"tab-medium":"tab-medium_CuJ3V","tab-small":"tab-small_aG2ke","tab-item":"tab-item_nbY8R",active:"active_mcPfC"};const d=s},960982:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.input_L8Ccp{background-color:var(--f-white);border:1px solid var(--border-neutral-tertiary);border-radius:var(--radius-standard);font-family:inherit;width:100%;font-size:14px;line-height:20px;color:var(--f-ink)}.input_L8Ccp:focus,.input_L8Ccp:active{border-color:var(--f-primary)}.input_L8Ccp::placeholder{color:var(--f-subdue)}.input-x-small_kZXPX{padding:1px 8px}.input-small_HS81O{padding:6px 8px}.input-medium_Pc4Cf{padding:9px 8px}.input-large_uKk3M{padding:13px 8px}.input_L8Ccp[aria-disabled=true]{background-color:var(--f-bg-1);color:var(--f-grey-disabled-content)}.input_L8Ccp[aria-invalid=true]{border-color:var(--f-safe-red)}.root_uIz3C{display:flex;flex-direction:column;padding:0 16px 24px;gap:24px;min-width:388px}.root_uIz3C.isMobile_VvhKh{min-width:320px}.tabs_bFaIs{border-bottom:1px solid var(--f-subdue-40);--f-tab-active-color: var(--f-primary)}.preview_OqpDR{display:flex;justify-content:space-between;gap:8px}.previewOuter_nU7X3{display:flex;justify-content:center;gap:8px}.bottomBlock_y0amC{display:flex;flex-direction:column;gap:24px;justify-content:end;align-items:center;width:100%}.deleteBlock_oAtle{display:flex;gap:8px;align-items:center}.deleteInfo_sxjfi{display:flex;align-items:center;color:var(--f-subdue)}.textBlock_hFFT0{width:100%;display:flex;gap:8px;justify-content:center}.footer_LXqZa{width:100%;display:flex;justify-content:space-between}
`,""]),s.locals={input:"input_L8Ccp","input-x-small":"input-x-small_kZXPX","input-small":"input-small_HS81O","input-medium":"input-medium_Pc4Cf","input-large":"input-large_uKk3M",root:"root_uIz3C",isMobile:"isMobile_VvhKh",tabs:"tabs_bFaIs",preview:"preview_OqpDR",previewOuter:"previewOuter_nU7X3",bottomBlock:"bottomBlock_y0amC",deleteBlock:"deleteBlock_oAtle",deleteInfo:"deleteInfo_sxjfi",textBlock:"textBlock_hFFT0",footer:"footer_LXqZa"};const d=s},968506:(l,n,t)=>{"use strict";t.d(n,{A:()=>g});var e=t(766914),o=t(121648),r=t(727137),i=t(931720),s=t(653154),d=t(544582),u=t(612732),m=t(645369),v=t.n(m),_=t(361744),S=t(727825),N=(M,E,I)=>new Promise((C,Z)=>{var te=z=>{try{b(I.next(z))}catch(ce){Z(ce)}},U=z=>{try{b(I.throw(z))}catch(ce){Z(ce)}},b=z=>z.done?C(z.value):Promise.resolve(z.value).then(te,U);b((I=I.apply(M,E)).next())});const k=v()("flat:apijs"),O=M=>{try{return JSON.parse(JSON.stringify(M))}catch(E){return M}},X=["ping","addEventListener","removeEventListener","getEmbedConfig","setEditorConfig","getFlatScoreMetadata","loadFlatScore","loadMusicXML","loadMIDI","loadJSON","getJSON","setZoom","setAutoZoom","focusScore"],L={setPos:"playbackPosition",setStart:"play",setPause:"pause",setStop:"stop"},y={setNoteInfo:{name:"noteDetails",formatter:M=>(0,e.U)({payload:(0,o.p)(M)})},setMeasureInfo:{name:"measureDetails",formatter:M=>(0,e.s)({payload:(0,o.p)(M)})},setPos:{name:"cursorPosition",formatter:M=>Object.assign((0,o.p)(M),{posTs:void 0})},setRangeSelection:{name:"rangeSelection"}},j=["ready","scoreLoaded","play","pause","stop","fullscreen","playbackPosition","cursorPosition","cursorContext","noteDetails","measureDetails","rangeSelection","restrictedFeatureAttempt"];class w{constructor({embed:E}){this.embed=E,this.subscribedEvent={},this.handleMessages(),this.watchPinia(),this.handlePiniaStoreEvents()}watchPinia(){const E=(0,i.B)();(0,_.wB)(()=>E.restrictedFeatureAttempt,I=>{const C="restrictedFeatureAttempt";this.subscribedEvent[C]&&this.event(C,O(I))})}handlePiniaStoreEvents(){(0,d.o)().$onAction(({name:E,after:I})=>{const C=L[E];!C||!this.subscribedEvent[C]||I(Z=>{this.event(C,O(Z))})}),(0,o.W)().$onAction(({name:E,after:I})=>{const C=y[E];!C||!this.subscribedEvent[C.name]||I(Z=>{C.formatter&&(Z=C.formatter(Z)),this.event(C.name,O(Z))})}),(0,r.x)().$onAction(({name:E,after:I})=>{E==="update"&&I(C=>{this.event("cursorContext",O(C))})}),(0,u.k)().$onAction(({name:E,after:I})=>{E==="toggleFullscreen"&&this.subscribedEvent.fullscreen&&I(C=>{this.event("fullscreen",O(C))})})}handleMessages(){window.addEventListener("message",E=>{var I,C;if(E.source!==window.parent)return;if(!E.data){k("No `data` in message");return}const Z=E.data;if(Z.source)return;if(k("rcvd msg",Z),typeof Z.method!="string"){k("No `method` in message");return}!(Z.parameters instanceof ArrayBuffer)&&!(Z.parameters instanceof Uint8Array)&&(Z.parameters=O(Z.parameters)),this.addBreadcrumb&&this.addBreadcrumb(Z);let te;if(X.includes(Z.method))te=this[Z.method](Z.parameters);else if((C=(I=this.embed)==null?void 0:I.scoreData)!=null&&C.scoreActions)te=this.embed.scoreData.scoreActions.executePublicAction(Z.method,Z.parameters);else{k("`method` not local or public action");return}te.then(U=>{if(U instanceof Blob){const b=new FileReader;b.onloadend=()=>{this.sendMessage({method:Z.method,response:Array.from(new Uint8Array(b.result))})},b.readAsArrayBuffer(U)}else U instanceof Uint8Array?this.sendMessage({method:Z.method,response:Array.from(U)}):this.sendMessage({method:Z.method,response:U})}).catch(U=>{U instanceof Error&&((0,s.vV)(U,{logger:"embedJsApi",extra:{method:Z.method,parameters:Z.parameters}}),U=this.formatError(U)),this.sendMessage({method:Z.method,error:U})})},!1)}formatError(E,I){const C={};return typeof E=="string"?(C.message=E,C.code=I):(C.message=E.message,C.code=E.code||E.name),C}ready(){this._ready||(this._ready=!0,this.event("ready"))}event(E,I){k("snd ev: %s (%o)",E,I);const C={event:E};I&&(C.parameters=I),this.sendMessage(C)}sendMessage(E){setTimeout(()=>{k("snd msg: %o",E),window.parent.postMessage(JSON.stringify(E),"*")})}addEventListener(E){return N(this,null,function*(){if(typeof E!="string")throw new TypeError("Missing or invalid event name");if(!j.includes(E))throw new TypeError(`Unkown event "${E}"`);this.subscribedEvent[E]=!0})}removeEventListener(E){return N(this,null,function*(){if(typeof E!="string")throw new TypeError("Missing or invalid event name");if(!j.includes(E))throw new TypeError(`Unkown event "${E}"`);delete this.subscribedEvent[E]})}ping(){return Promise.resolve()}getEmbedConfig(){return N(this,null,function*(){return this.embed.getEmbedConfig()})}getFlatScoreMetadata(){return N(this,null,function*(){if(!this.embed.scoreData||!this.embed.scoreData.adagioData)throw this.formatError("No score loaded","NO_SCORE_LOADED");const E=(0,S.N)().score;if(!E)throw this.formatError("No score loaded with metadata","NO_SCORE_LOADED");return O(E)})}getJSON(){return N(this,null,function*(){if(!this.embed.scoreData||!this.embed.scoreData.adagioData)throw this.formatError("No score loaded","NO_SCORE_LOADED");return this.embed.scoreData.adagioData.exportData()})}setZoom(E){return this.embed.scoreData.scoreActions.executePublicAction("setZoom",{zoomValue:E})}setAutoZoom(E){return this.embed.scoreData.scoreActions.executePublicAction("setAutoZoom",{zoomAuto:E})}focusScore(){return window.focus(),Promise.resolve()}}const g=w},971706:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_DHZSo{display:flex;align-items:center;flex-direction:column;gap:8px}.buttons_b2LOV{display:flex;gap:8px}.steps_TvoYY{margin-top:8px}.entry_sQGeA{padding:0;width:32px;height:32px;display:flex;justify-content:center;align-items:center;border:1px solid var(--f-subdue-40);border-radius:8px;background-color:#fff;color:var(--f-subdue);font-size:14px;font-weight:400}.entry_sQGeA .fill{fill:var(--f-subdue)}.entry_sQGeA>svg{display:block;height:16px}.entry_sQGeA.active__pfHU{border-color:var(--f-primary);color:var(--f-primary);background-color:var(--f-primary-10);font-weight:600}.entry_sQGeA.active__pfHU .fill{fill:var(--f-primary)}.entry_sQGeA.disabled_YjIeS{border-color:var(--f-grey-disabled-content);color:var(--f-grey-disabled-content);background-color:var(--f-grey-disabled-container)}.entry_sQGeA.disabled_YjIeS .fill{fill:var(--f-grey-disabled-content)}*[data-color-mode=dark] .entry_sQGeA{background-color:var(--f-bg-dark);color:var(--f-subdue-40);border-color:var(--f-subdue-40)}*[data-color-mode=dark] .entry_sQGeA.active__pfHU{color:var(--f-primary);border-color:var(--f-primary);background-color:var(--f-ink)}
`,""]),s.locals={root:"root_DHZSo",buttons:"buttons_b2LOV",steps:"steps_TvoYY",entry:"entry_sQGeA",active:"active__pfHU",disabled:"disabled_YjIeS"};const d=s},977598:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=65,s=(0,o.pM)({name:"TbConcertPitch",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)();return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:u.isConcertPitch})}})},981695:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.rootDesktop_lqO_O{height:22px;border-left:1px solid #d9dae1;margin:0 5px}.rootMobile_XB6XI{height:5px;width:5px;background:var(--f-grey-disabled-container);border-radius:50%;flex:0 0 5px;margin:0 3px}*[data-color-mode=dark] .rootMobile_XB6XI{background:var(--f-dark-disabled-content)}
`,""]),s.locals={rootDesktop:"rootDesktop_lqO_O",rootMobile:"rootMobile_XB6XI"};const d=s},983567:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>s,width:()=>i});var e=t(121648),o=t(361744),r=t(299035);const i=65,s=(0,o.pM)({name:"TbPluckedRange",props:{name:{type:String,required:!0},pluckedRangeType:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(d){const u=(0,e.W)(),m=(0,o.EW)(()=>u.noteInfo.pluckedRange&&u.noteInfo.pluckedRange.type===d.pluckedRangeType);return()=>(0,o.h)(r.default,{scoreData:d.scoreData,action:d.name,active:m.value})}})},985734:(l,n,t)=>{"use strict";t.d(n,{Ay:()=>d,lN:()=>v,wE:()=>m});var e=t(843678),o=t(464173),r=t(186980),i=t(993478);const s={MAJOR:{key:"major",mode:r.A.MAJOR,size:i.A.FIFTHS,adagio:o.A.MAJOR},AUGMENTED:{key:"augmented",mode:r.A.MAJOR,size:i.A.FIFTHS,adagio:o.A.AUGMENTED},POWER:{key:"power",mode:r.A.MAJOR,size:i.A.FIFTHS,adagio:o.A.POWER},MAJOR_2:{key:"adagio-major-2",mode:r.A.MAJOR,size:i.A.FIFTHS,adagio:o.A.MAJOR_2},MINOR:{key:"minor",mode:r.A.MINOR,size:i.A.FIFTHS,adagio:o.A.MINOR},DIMINISHED:{key:"diminished",mode:r.A.MINOR,size:i.A.FIFTHS,adagio:o.A.DIMINISHED},MINOR_2:{key:"adagio-minor-2",mode:r.A.MINOR,size:i.A.FIFTHS,adagio:o.A.MINOR_2},MAJOR_6:{key:"major-sixth",mode:r.A.MAJOR,size:i.A.SIXTHS,adagio:o.A.MAJOR_6},SIX_NINE:{key:"adagio-6-9",mode:r.A.MAJOR,size:i.A.SIXTHS,adagio:o.A.SIX_NINE},DOMINANT_7_6:{key:"adagio-7-6",mode:r.A.MAJOR,size:i.A.SIXTHS,adagio:o.A.DOMINANT_7_6},MINOR_6:{key:"minor-sixth",mode:r.A.MINOR,size:i.A.SIXTHS,adagio:o.A.MINOR_6},MINOR_69:{key:"adagio-minor-6-9",mode:r.A.MINOR,size:i.A.SIXTHS,adagio:o.A.MINOR_69},DOMINANT_7:{key:"dominant",mode:r.A.MAJOR,size:i.A.SEVENTHS,adagio:o.A.DOMINANT_7},MAJOR_7:{key:"major-seventh",mode:r.A.MAJOR,size:i.A.SEVENTHS,adagio:o.A.MAJOR_7},AUGMENTED_7:{key:"augmented-seventh",mode:r.A.MAJOR,size:i.A.SEVENTHS,adagio:o.A.AUGMENTED_7},AUGMENTED_MAJOR_7:{key:"adagio-augmented-major-7",mode:r.A.MAJOR,size:i.A.SEVENTHS,adagio:o.A.AUGMENTED_MAJOR_7},MINOR_MAJOR_7:{key:"major-minor",mode:r.A.MINOR,size:i.A.SEVENTHS,adagio:o.A.MAJOR_MINOR},MINOR_7:{key:"minor-seventh",mode:r.A.MINOR,size:i.A.SEVENTHS,adagio:o.A.MINOR_7},DIMINISHED_7:{key:"diminished-seventh",mode:r.A.MINOR,size:i.A.SEVENTHS,adagio:o.A.DIMINISHED_7},HALF_DIMINISHED_7:{key:"half-diminished",mode:r.A.MINOR,size:i.A.SEVENTHS,adagio:o.A.HALF_DIMINISHED_7},DOMINANT_9:{key:"dominant-ninth",mode:r.A.MAJOR,size:i.A.NINTHS,adagio:o.A.DOMINANT_9},MAJOR_9:{key:"major-ninth",mode:r.A.MAJOR,size:i.A.NINTHS,adagio:o.A.MAJOR_9},AUGMENTED_9:{key:"adagio-augmented-9",mode:r.A.MAJOR,size:i.A.NINTHS,adagio:o.A.AUGMENTED_9},AUGMENTED_MAJOR_9:{key:"adagio-augmented-major-9",mode:r.A.MAJOR,size:i.A.NINTHS,adagio:o.A.AUGMENTED_MAJOR_9},MINOR_MAJOR_9:{key:"adagio-minor-major-9",mode:r.A.MINOR,size:i.A.NINTHS,adagio:o.A.MINOR_MAJOR_9},MINOR_9:{key:"minor-ninth",mode:r.A.MINOR,size:i.A.NINTHS,adagio:o.A.MINOR_9},DIMINISHED_9:{key:"adagio-diminished-9",mode:r.A.MINOR,size:i.A.NINTHS,adagio:o.A.DIMINISHED_9},HALF_DIMINISHED_9:{key:"adagio-half-diminished-9",mode:r.A.MINOR,size:i.A.NINTHS,adagio:o.A.HALF_DIMINISHED_9},DOMINANT_11:{key:"dominant-11th",mode:r.A.MAJOR,size:i.A.ELEVENTHS,adagio:o.A.DOMINANT_11},MAJOR_11:{key:"major-11th",mode:r.A.MAJOR,size:i.A.ELEVENTHS,adagio:o.A.MAJOR_11},AUGMENTED_11:{key:"adagio-augmented-11",mode:r.A.MAJOR,size:i.A.ELEVENTHS,adagio:o.A.AUGMENTED_11},AUGMENTED_MAJOR_11:{key:"adagio-augmented-major-11",mode:r.A.MAJOR,size:i.A.ELEVENTHS,adagio:o.A.AUGMENTED_MAJOR_11},MINOR_MAJOR_11:{key:"adagio-minor-major-11",mode:r.A.MINOR,size:i.A.ELEVENTHS,adagio:o.A.MINOR_MAJOR_11},MINOR_11:{key:"minor-11th",mode:r.A.MINOR,size:i.A.ELEVENTHS,adagio:o.A.MINOR_11},DIMINISHED_11:{key:"adagio-diminished-11",mode:r.A.MINOR,size:i.A.ELEVENTHS,adagio:o.A.DIMINISHED_11},HALF_DIMINISHED_11:{key:"adagio-half-diminished-11",mode:r.A.MINOR,size:i.A.ELEVENTHS,adagio:o.A.HALF_DIMINISHED_11},DOMINANT_13:{key:"dominant-13th",mode:r.A.MAJOR,size:i.A.THIRTEENTHS,adagio:o.A.DOMINANT_13},MAJOR_13:{key:"major-13th",mode:r.A.MAJOR,size:i.A.THIRTEENTHS,adagio:o.A.MAJOR_13},AUGMENTED_13:{key:"adagio-augmented-13",mode:r.A.MAJOR,size:i.A.THIRTEENTHS,adagio:o.A.AUGMENTED_13},AUGMENTED_MAJOR_13:{key:"adagio-augmented-major-13",mode:r.A.MAJOR,size:i.A.THIRTEENTHS,adagio:o.A.AUGMENTED_MAJOR_13},MINOR_MAJOR_13:{key:"adagio-minor-major-13",mode:r.A.MINOR,size:i.A.THIRTEENTHS,adagio:o.A.MINOR_MAJOR_13},MINOR_13:{key:"minor-13th",mode:r.A.MINOR,size:i.A.THIRTEENTHS,adagio:o.A.MINOR_13},DIMINISHED_13:{key:"adagio-diminished-13",mode:r.A.MINOR,size:i.A.THIRTEENTHS,adagio:o.A.DIMINISHED_13},HALF_DIMINISHED_13:{key:"adagio-half-diminished-13",mode:r.A.MINOR,size:i.A.THIRTEENTHS,adagio:o.A.HALF_DIMINISHED_13}},d=s,u=e.default.fromList(Array.from(Object.values(s)),_=>_.adagio);function m(_){return u[_]}function v(_){return Array.from(Object.values(s)).find(S=>S.size===_)}},987041:(l,n,t)=>{"use strict";t.r(n),t.d(n,{component:()=>v,width:()=>m});var e=t(684188),o=t(121648),r=t(645369),i=t.n(r),s=t(361744),d=t(299035);const u=i()("tb:hammer"),m=42,v=(0,s.pM)({name:"TbHammerOnPullOff",props:{name:{type:String,required:!0},scoreData:{type:Object,required:!0}},setup(_){const S=(0,o.W)(),N=(0,s.EW)(()=>{try{const k=_.scoreData.scoreActions.cursor,O=(0,e.J)(k);return!!S.noteInfo.hammerOnPullOffs[O]}catch(k){return u(k),!1}});return()=>(0,s.h)(d.default,{scoreData:_.scoreData,action:_.name,active:N.value})}})},990969:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.root_cUYH3{padding:12px}.root_cUYH3.hasCategories_k4Zx_{padding:12px 0}.content_FTzkr{display:flex;align-items:center}.binary_o7Bij,.ternary_RS5SU{display:flex;flex-direction:column}.ternary_RS5SU{border-left:1px solid var(--f-divider);margin-left:-1px}.binary_o7Bij{border-right:1px solid var(--f-divider)}.tupletsTypes_lLtzG{text-align:center;text-transform:uppercase;font-weight:700;font-size:12px;color:var(--f-subdue);letter-spacing:.3px;margin:0 15px}.tuplets_Ps7Ru{display:flex;align-items:center;justify-content:center}.tuplets_Ps7Ru a{display:flex}.tuplets_Ps7Ru .fill{fill:var(--f-ink)}.tuplets_Ps7Ru .stroke{stroke:var(--f-ink)}@media (max-width: 500px){.content_FTzkr{display:grid;grid-template-columns:max-content max-content}.binary_o7Bij,.ternary_RS5SU{align-items:center;min-width:84px;height:100%}.tuplets_Ps7Ru{max-width:60px;flex-wrap:wrap;order:1}}*[data-color-mode=dark] .tuplets_Ps7Ru .fill{fill:var(--f-subdue-40)}*[data-color-mode=dark] .tuplets_Ps7Ru .stroke{stroke:var(--f-subdue-40)}
`,""]),s.locals={root:"root_cUYH3",hasCategories:"hasCategories_k4Zx_",content:"content_FTzkr",binary:"binary_o7Bij",ternary:"ternary_RS5SU",tupletsTypes:"tupletsTypes_lLtzG",tuplets:"tuplets_Ps7Ru"};const d=s},992031:(l,n,t)=>{"use strict";t.d(n,{A:()=>dt});var e=t(361744);function o(h,D,he,We,mt,R){const Y=(0,e.g2)("UnpitchedKeyboard"),ve=(0,e.g2)("FretboardEditor"),Mt=(0,e.g2)("PianoKeyboard");return We.displayedTouchUi==="unpitched"?((0,e.uX)(),(0,e.Wv)(Y,{key:0,"score-data":he.scoreData},null,8,["score-data"])):We.displayedTouchUi==="piano"&&We.staffMode==="tab"?((0,e.uX)(),(0,e.Wv)(ve,{key:1,"score-data":he.scoreData},null,8,["score-data"])):We.displayedTouchUi==="piano"?((0,e.uX)(),(0,e.Wv)(Mt,{key:2,"score-data":he.scoreData},null,8,["score-data"])):(0,e.Q3)("",!0)}var r=t(121648),i=t(538065);function s(h,D,he,We,mt,R){const Y=(0,e.g2)("FretboardNav"),ve=(0,e.g2)("FretboardBody");return(0,e.uX)(),(0,e.CE)("div",{class:(0,i.C4)(["fretboard",{touch:h.isTouch,bottomPadding:h.hasHomeButton,hasNavInside:h.hasNavInside}])},[h.displayMobileEditor?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(Y,{key:0,"enharmonic-switch-values":h.enharmonicSwitchValues,"has-nav-inside":h.hasNavInside,onScrollFretboard:h.scrollFretboard,onSwitchEnharmonic:h.switchEnharmonic},null,8,["enharmonic-switch-values","has-nav-inside","onScrollFretboard","onSwitchEnharmonic"])),(0,e.bF)(ve,{"staff-details":h.staffDetails,"pressed-notes":h.pressedNotes,"selected-fret-string":h.selectedFret,"get-pitch-from-string-fret":h.getPitchFromStringFret,onClickFret:h.clickFret},null,8,["staff-details","pressed-notes","selected-fret-string","get-pitch-from-string-fret","onClickFret"])],2)}var d=t(851083),u=t(737903),m=t(595382),v=t(351277),_=t(878363),S=t(963202),N=t(602494),k=t(727137),O=t(909696),X=t(941271);function L(h,D){const he=v.default.getStepIdx(h),We=v.default.getStepIdx(D);return he===0&&We===6?1:he===6&&We===0?-1:he-We}var y=t(884089);function j(h,D,he,We,mt,R){const Y=(0,e.g2)("CaratLeft"),ve=(0,e.g2)("PitchWithAlter"),Mt=(0,e.g2)("CaratRight");return(0,e.uX)(),(0,e.CE)("div",{class:(0,i.C4)(["fretboard-nav",{hasNavInside:he.hasNavInside}])},[(0,e.Lk)("a",{class:"fretboard-nav-btn prev",onClick:D[0]||(D[0]=Nt=>R.scrollFretboard(-1))},[(0,e.bF)(Y)]),he.enharmonicSwitchValues?((0,e.uX)(),(0,e.CE)("div",{key:0,class:"enharmonic-switch",onClick:D[1]||(D[1]=(...Nt)=>R.switchEnharmonic&&R.switchEnharmonic(...Nt))},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(he.enharmonicSwitchValues,(Nt,Jt)=>((0,e.uX)(),(0,e.CE)("div",{key:Jt,class:(0,i.C4)(["enharmonic-options",{active:Nt.isCurrent}])},[(0,e.bF)(ve,{pitch:Nt.pitch,"no-octave":!0},null,8,["pitch"])],2))),128))])):(0,e.Q3)("",!0),(0,e.Lk)("a",{class:"fretboard-nav-btn next",onClick:D[2]||(D[2]=Nt=>R.scrollFretboard(1))},[(0,e.bF)(Mt)])],2)}var w=t(141831),g=t(452840),M=t(635049);const E={name:"FretboardNav",components:{PitchWithAlter:M.A,CaratLeft:w.A,CaratRight:g.A},emits:["scrollFretboard","switchEnharmonic"],props:{enharmonicSwitchValues:{type:Array,default:null},hasNavInside:{type:Boolean,default:!1}},methods:{scrollFretboard(h){this.$emit("scrollFretboard",h)},switchEnharmonic(){this.$emit("switchEnharmonic")}}};var I=t(161563),C=t(201223),Z=t(938793);const U=(0,Z.A)(E,[["render",j],["__scopeId","data-v-786d454c"]]);var b=(h,D,he)=>new Promise((We,mt)=>{var R=Mt=>{try{ve(he.next(Mt))}catch(Nt){mt(Nt)}},Y=Mt=>{try{ve(he.throw(Mt))}catch(Nt){mt(Nt)}},ve=Mt=>Mt.done?We(Mt.value):Promise.resolve(Mt.value).then(R,Y);ve((he=he.apply(h,D)).next())});const z={name:"fretboardEditor",components:{FretboardNav:U,FretboardBody:y.A},props:{scoreData:{type:Object,required:!0}},data(){return{hardSelectedFret:null,staffDetails:null,partUuid:null}},setup(){const h=(0,O.q6)(),D=(0,r.W)(),he=(0,k.x)(),We=(0,X.B)();return{lastDrawTs:(0,e.EW)(()=>h.lastDrawTs),layout:(0,e.EW)(()=>h.layout),displayMobileEditor:(0,e.EW)(()=>h.displayMobileEditor),pos:(0,e.EW)(()=>D.pos),posTs:(0,e.EW)(()=>D.posTs),noteInfo:(0,e.EW)(()=>D.noteInfo),tabsData:(0,e.EW)(()=>D.noteInfo.tabsData||[]),editionMode:(0,e.EW)(()=>D.editionMode),canSwitchEnharmonic:(0,e.EW)(()=>he.canSwitchEnharmonic),addExperience:We.addExperience}},computed:{selectedFret(){return this.hardSelectedFret?this.hardSelectedFret:this.cursorTabData},selectedPitch(){return this.pressedNotes.find(({tabData:D})=>this.fretStringPredicate(D)).pitch},enharmonicSwitchValues(){if(!this.hasNoteSelected||!this.canSwitchEnharmonic)return null;const h=v.default.copy(this.selectedPitch),D=m.A.switchEnharmonic(h,this.key),he=[h,D];return he.sort(L),he.map(mt=>{const R=v.default.isSameLine(mt,h);return{pitch:mt,isCurrent:R}})},hasNoteSelected(){return this.cursorTabData!==null},isTouch(){return typeof document!="undefined"&&"ontouchstart"in document},pressedNotes(){const h=[];return this.tabsData.forEach((D,he)=>{if(D===null)return;D=(0,u.default)(D);let We=this.noteInfo.pitches[he];We=v.default.copy(We),h.push({pitch:We,tabData:D})}),h},cursorTabData(){if(typeof this.pos.line=="number"){const D=(this.noteInfo.lines||[]).indexOf(this.pos.line);if(D<0)return null;const he=this.tabsData[D];return he===null?null:(0,u.default)(he)}if(this.pos.string){const h=this.tabsData.find(D=>D===null?!1:D.string===this.pos.string);return h?(0,u.default)(h):null}return null},hasHomeButton(){return window.flatSettings.hasHomeButton},hasNavInside(){return!this.displayMobileEditor&&this.layout==="track"}},watch:{"pos.partUuid":{handler(h){h!==this.partUuid&&this.updateStaffDetails()}},posTs(){this.updateKey()},lastDrawTs(){this.updateStaffDetails(),this.updateKey()}},methods:{fretStringPredicate(h){return h.fret===this.cursorTabData.fret&&h.string===this.cursorTabData.string},addNoteFret(h,D){return b(this,null,function*(){this.addExperience("editor.addnote.touch"),yield this.scoreData.scoreActions.executePublicAction("addNoteTab",{string:h,fret:D,source:_.default.TOUCH_UI_FRETBOARD}),this.addExperience("editor.fretboard.addnotefret"),this.editionMode===N.Nu?this.selectFret(h,D):(yield this.scoreData.scoreActions.executePublicAction("goRight",{mute:!0,isEditing:!0}),yield this.scoreData.scoreActions.executePublicAction("scrollToCursor"))})},removeNoteFret(){const h=this.cursorTabData.string;this.scoreData.scoreActions.executePublicAction("remove"),this.addExperience("editor.fretboard.removenotefret"),this.scoreData.scoreActions.executePublicAction("goStringByIdx",{stringIdx:h})},clickFret({string:h,fret:D}){this.isTouch?this.clickFretTouchMode(h,D):this.clickFretDesktopMode(h,D)},clickFretTouchMode(h,D){this.isSelected(h,D)?this.isPressed(h,D)?(this.removeNoteFret(),this.clearSelected()):(this.addNoteFret(h,D),this.selectFret(h,D)):this.selectFret(h,D)},clickFretDesktopMode(h,D){this.isPressed(h,D)?this.isSelected(h,D)?(this.removeNoteFret(),this.clearSelected()):this.selectFret(h,D):(this.addNoteFret(h,D),this.selectFret(h,D))},isPressed(h,D){return!!this.pressedNotes.some(({tabData:he})=>he.string===h&&he.fret===D)},isSelected(h,D){return this.selectedFret&&this.selectedFret.fret===D&&this.selectedFret.string===h},switchEnharmonic(){this.scoreData.scoreActions.executePublicAction("switchEnharmonic"),this.addExperience("editor.fretboard.switchenharmonic")},selectFret(h,D){this.isTouch&&(this.hardSelectedFret={string:h,fret:D}),this.scoreData.scoreActions.executePublicAction("goStringByIdx",{stringIdx:h})},clearSelected(){this.hardSelectedFret=null,this.scoreData.scoreActions.cursor.clearSelected()},getPitchFromStringFret(h,D,he=!1){if(!he){const mt=this.pressedNotes.find(({tabData:R})=>R.string===h&&R.fret===D);if(mt)return mt.pitch}return(0,d.A)({string:h,fret:D},this.staffDetails,this.key)},getFretboardScroller(){const h=this.$el.getElementsByClassName("fretboard-scroller");return h.length>0?h[0]:null},getLeft(){const h=this.getFretboardScroller();this.left=h?h.scrollLeft:0},scrollFretboard(h,D=100){const he=this.getFretboardScroller();h<0?he.scrollLeft-=D:he.scrollLeft+=D,this.getLeft()},updateStaffDetails(){const h=(0,u.default)(this.pos);this.partUuid=h.measureUuid;const We=(0,S.A)(this.scoreData.adagioData,h).getStaffDetails(0);this.staffDetails=(0,u.default)(We)},updateKey(){const h=(0,u.default)(this.pos),We=(0,S.A)(this.scoreData.adagioData,h).getKey(0);this.key=(0,u.default)(We)}},created(){this.updateStaffDetails(),this.updateKey()}};var ce=t(920302);const x=(0,Z.A)(z,[["render",s],["__scopeId","data-v-25233492"]]);var T=t(555381);const ne={key:0,class:"keyboard-nav"},p={class:"keyboard-keys"},le={class:"keyboard-keys-container"},A={class:"wkeys"},de=["aria-label","onPointerdown","onPointerup","onPointerout","onPointermove"],Ae={class:"key-label"},be=["aria-label","onPointerdown","onPointerup","onPointerout","onPointermove"],ae={class:"key-label"},ie=["aria-label","onPointerdown","onPointerup","onPointerout","onPointermove"],Ne={class:"key-label"},$e=["aria-label","onPointerdown","onPointerup","onPointerout","onPointermove"],Pe={class:"key-label"},we=["aria-label","onPointerdown","onPointerup","onPointerout","onPointermove"],Ze={class:"key-label"},nt=["aria-label","onPointerdown","onPointerup","onPointerout","onPointermove"],Ke={class:"key-label"},at=["aria-label","onPointerdown","onPointerup","onPointerout","onPointermove"],q={class:"key-label"},K={class:"bkeys"},pe=["aria-label","onPointerdown","onPointerup","onPointerout","onPointermove"],Te=["aria-label","onPointerdown","onPointerup","onPointerout","onPointermove"],ge=["aria-label","onPointerdown","onPointerup","onPointerout","onPointermove"],Q=["aria-label","onPointerdown","onPointerup","onPointerout","onPointermove"],Re=["aria-label","onPointerdown","onPointerup","onPointerout","onPointermove"];function Fe(h,D,he,We,mt,R){return(0,e.uX)(),(0,e.CE)("div",{class:(0,i.C4)(["piano-keyboard no-select",{[h.$style.bottomPadding]:R.hasHomeButton,hasNavInside:!We.displayMobileEditor&&We.layout==="track"}]),onKeydown:D[15]||(D[15]=(0,T.D$)(()=>{},["prevent"]))},[We.displayMobileEditor?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",ne,[(0,e.Lk)("a",{class:"keyboard-nav-btn prev",onClick:D[0]||(D[0]=Y=>R.move(-1))},D[16]||(D[16]=[(0,e.Lk)("svg",{inline:"",width:"32",height:"60",viewBox:"0 0 32 60",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{d:"M1.5 59l29-29-29-29",stroke:"#000","stroke-width":"2",fill:"none"})],-1)])),(0,e.Lk)("a",{class:"keyboard-nav-btn piano-close",onMousedown:D[1]||(D[1]=Y=>We.switchTouchUI())},D[17]||(D[17]=[(0,e.Lk)("svg",{inline:"",width:"12",height:"14",viewBox:"0 0 12 14",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("g",{stroke:"#858FA9","stroke-width":"2",fill:"none","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"},[(0,e.Lk)("path",{d:"M10.5 9L6 13 1.5 9M6 13V1"})])],-1)]),32),(0,e.Lk)("a",{class:"keyboard-nav-btn next",onClick:D[2]||(D[2]=Y=>R.move(1))},D[18]||(D[18]=[(0,e.Lk)("svg",{inline:"",width:"32",height:"60",viewBox:"0 0 32 60",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{d:"M1.5 59l29-29-29-29",stroke:"#000","stroke-width":"2",fill:"none"})],-1)]))])),(0,e.Lk)("div",p,[(0,e.Lk)("div",le,[((0,e.uX)(),(0,e.CE)(e.FK,null,(0,e.pI)([0,1,2,3,4,5,6,7,8],Y=>(0,e.Lk)("div",{class:"octave",key:Y},[(0,e.Lk)("div",A,[(0,e.Lk)("a",{"aria-label":`C${Y}`,class:(0,i.C4)(["wkey key",{active:R.pitchesByOctave[Y].C0,disabled:R.disabledPitchesByOctave[Y].C0}]),onContextmenu:D[3]||(D[3]=(0,T.D$)(()=>{},["prevent"])),onPointerdown:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}C0`]),onPointerup:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}C0`]),onPointerout:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}C0`]),onPointermove:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}C0`])},[(0,e.Lk)("span",Ae,(0,i.v_)(R.getKeyText("C",Y)),1)],42,de),(0,e.Lk)("a",{"aria-label":`D${Y}`,class:(0,i.C4)(["wkey key",{active:R.pitchesByOctave[Y].D0,disabled:R.disabledPitchesByOctave[Y].D0}]),onContextmenu:D[4]||(D[4]=(0,T.D$)(()=>{},["prevent"])),onPointerdown:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}D0`]),onPointerup:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}D0`]),onPointerout:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}D0`]),onPointermove:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}D0`])},[(0,e.Lk)("span",ae,(0,i.v_)(R.getKeyText("D",Y)),1)],42,be),(0,e.Lk)("a",{"aria-label":`E${Y}`,class:(0,i.C4)(["wkey key",{active:R.pitchesByOctave[Y].E0,disabled:R.disabledPitchesByOctave[Y].E0}]),onContextmenu:D[5]||(D[5]=(0,T.D$)(()=>{},["prevent"])),onPointerdown:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}E0`]),onPointerup:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}E0`]),onPointerout:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}E0`]),onPointermove:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}E0`])},[(0,e.Lk)("span",Ne,(0,i.v_)(R.getKeyText("E",Y)),1)],42,ie),(0,e.Lk)("a",{"aria-label":`F${Y}`,class:(0,i.C4)(["wkey key",{active:R.pitchesByOctave[Y].F0,disabled:R.disabledPitchesByOctave[Y].F0}]),onContextmenu:D[6]||(D[6]=(0,T.D$)(()=>{},["prevent"])),onPointerdown:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}F0`]),onPointerup:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}F0`]),onPointerout:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}F0`]),onPointermove:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}F0`])},[(0,e.Lk)("span",Pe,(0,i.v_)(R.getKeyText("F",Y)),1)],42,$e),(0,e.Lk)("a",{"aria-label":`G${Y}`,class:(0,i.C4)(["wkey key",{active:R.pitchesByOctave[Y].G0,disabled:R.disabledPitchesByOctave[Y].G0}]),onContextmenu:D[7]||(D[7]=(0,T.D$)(()=>{},["prevent"])),onPointerdown:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}G0`]),onPointerup:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}G0`]),onPointerout:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}G0`]),onPointermove:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}G0`])},[(0,e.Lk)("span",Ze,(0,i.v_)(R.getKeyText("G",Y)),1)],42,we),(0,e.Lk)("a",{"aria-label":`A${Y}`,class:(0,i.C4)(["wkey key",{active:R.pitchesByOctave[Y].A0,disabled:R.disabledPitchesByOctave[Y].A0}]),onContextmenu:D[8]||(D[8]=(0,T.D$)(()=>{},["prevent"])),onPointerdown:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}A0`]),onPointerup:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}A0`]),onPointerout:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}A0`]),onPointermove:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}A0`])},[(0,e.Lk)("span",Ke,(0,i.v_)(R.getKeyText("A",Y)),1)],42,nt),(0,e.Lk)("a",{"aria-label":`B${Y}`,class:(0,i.C4)(["wkey key",{active:R.pitchesByOctave[Y].B0,disabled:R.disabledPitchesByOctave[Y].B0}]),onContextmenu:D[9]||(D[9]=(0,T.D$)(()=>{},["prevent"])),onPointerdown:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}B0`]),onPointerup:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}B0`]),onPointerout:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}B0`]),onPointermove:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}B0`])},[(0,e.Lk)("span",q,(0,i.v_)(R.getKeyText("B",Y)),1)],42,at)]),(0,e.Lk)("div",K,[(0,e.Lk)("a",{"aria-label":`C${Y}#`,class:(0,i.C4)(["bkey key",{active:R.pitchesByOctave[Y].C1,disabled:R.disabledPitchesByOctave[Y].C1}]),onContextmenu:D[10]||(D[10]=(0,T.D$)(()=>{},["prevent"])),onPointerdown:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}C1`]),onPointerup:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}C1`]),onPointerout:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}C1`]),onPointermove:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}C1`])},null,42,pe),(0,e.Lk)("a",{"aria-label":`D${Y}#`,class:(0,i.C4)(["bkey key",{active:R.pitchesByOctave[Y].D1,disabled:R.disabledPitchesByOctave[Y].D1}]),onContextmenu:D[11]||(D[11]=(0,T.D$)(()=>{},["prevent"])),onPointerdown:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}D1`]),onPointerup:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}D1`]),onPointerout:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}D1`]),onPointermove:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}D1`])},null,42,Te),(0,e.Lk)("a",{"aria-label":`F${Y}#`,class:(0,i.C4)(["bkey key",{active:R.pitchesByOctave[Y].F1,disabled:R.disabledPitchesByOctave[Y].F1}]),onContextmenu:D[12]||(D[12]=(0,T.D$)(()=>{},["prevent"])),onPointerdown:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}F1`]),onPointerup:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}F1`]),onPointerout:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}F1`]),onPointermove:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}F1`])},null,42,ge),(0,e.Lk)("a",{"aria-label":`G${Y}#`,class:(0,i.C4)(["bkey key",{active:R.pitchesByOctave[Y].G1,disabled:R.disabledPitchesByOctave[Y].G1}]),onContextmenu:D[13]||(D[13]=(0,T.D$)(()=>{},["prevent"])),onPointerdown:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}G1`]),onPointerup:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}G1`]),onPointerout:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}G1`]),onPointermove:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}G1`])},null,42,Q),(0,e.Lk)("a",{"aria-label":`A${Y}#`,class:(0,i.C4)(["bkey key",{active:R.pitchesByOctave[Y].A1,disabled:R.disabledPitchesByOctave[Y].A1}]),onContextmenu:D[14]||(D[14]=(0,T.D$)(()=>{},["prevent"])),onPointerdown:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}A1`]),onPointerup:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}A1`]),onPointerout:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}A1`]),onPointermove:ve=>h.handlePointerEvent(ve,R.pitchesList[`${Y}A1`])},null,42,Re)])])),64))])])],34)}var xe=t(231088),Qe=t(364596),ze=t(701387),yt=t(614426),ft=t(397498),Oe=t(645369),ut=t.n(Oe);const Tt=ut()("flat:keyboard"),ht={noTouch:"NO_TOUCH",touchStandby:"TOUCH_STANDBY",touchMoving:"TOUCH_MOVING",touching:"TOUCHING"},vt={pointerdown:"POINTER_DOWN",pointerup:"POINTER_UP",pointerout:"POINTER_UP",pointermove:"POINTER_MOVE",standbyCountdown:"STANDBY_COUNTDOWN"},Rt=300,It=5,Lt={[ht.noTouch]:{[vt.pointerdown](h,D){this.pointerState=ht.touchStandby,this.startStandbyCountdown(),this.recordInitialPosition(h),this.addPitchToSet(D)},[vt.pointerup](h,D){this.removePitchFromSet(D)}},[ht.touchStandby]:{[vt.pointerdown](h,D){this.pointerState=ht.touching,this.clearStandbyCountdown(),this.addPitchToSet(D),this.togglePitchesInSet()},[vt.standbyCountdown](){this.pointerState=ht.touching,this.togglePitchesInSet()},[vt.pointerup](h,D){this.pointerState=ht.noTouch,this.togglePitchesInSet(),this.removePitchFromSet(D),this.clearStandbyCountdown(),this.hasAddedNote&&(this.hasAddedNote=!1,this.tryMoveCursorForward())},[vt.pointermove](h){this.isFarEnoughFromInitialPosition(h)&&(this.pointerState=ht.touchMoving,this.clearStandbyCountdown())}},[ht.touching]:{[vt.pointerdown](h,D){const he=this.addPitchToSet(D);this.togglePitchPrepare(he)},[vt.pointerup](h,D){this.removePitchFromSet(D),this.pitchesSet.size===0&&(this.pointerState=ht.noTouch,this.hasAddedNote&&(this.hasAddedNote=!1,this.tryMoveCursorForward()))}},[ht.touchMoving]:{[vt.pointerdown](h,D){this.addPitchToSet(D)},[vt.pointerup](h,D){this.removePitchFromSet(D),this.pitchesSet.size===0&&(this.pointerState=ht.noTouch)}}},Ct={state:{pitchesSet:new Set,pointerState:ht.noTouch,initialPosition:null,standbyTimeoutId:null,hasAddedNote:!1},methods:{handlePointerEvent(h,D){const he=D?this.pitchToString(D):null;Tt("state `%s`, handle event `%s`, instrument: `%s`",this.pointerState,h.type,he);const We=vt[h.type],mt=Lt[this.pointerState][We];mt&&mt.call(this,h,D)},pitchToString(h){return typeof h.octave!="undefined"&&h.step?`${h.octave}-${h.step}-${h.alter}`:h.midiProgram&&h.midiKey?`${h.midiProgram}:${h.midiKey}`:null},pitchStringToObj(h){if(h.split(":").length>1){const D=h.split(":");return{midiProgram:D[0],midiKey:D[1]}}if(h.split("-").length>2){const D=h.split("-"),he=Number.parseInt(D[2],10);return{octave:Number.parseInt(D[0],10),step:D[1],alter:he,accidental:v.default.alterToAccidental(he)}}return null},addPitchToSet(h){const D=this.pitchToString(h);return D?(this.pitchesSet.add(D),Tt("addPitchToSet `%s`, new size: `%d`",D,this.pitchesSet.size),D):null},removePitchFromSet(h){const D=this.pitchToString(h);D&&(this.pitchesSet.delete(D),Tt("removePitchFromSet `%s`, new size: `%d`",D,this.pitchesSet.size))},togglePitchesInSet(){this.pitchesSet.forEach(h=>{this.togglePitchPrepare(h)})},togglePitchPrepare(h){const D=this.pitchStringToObj(h);Tt("togglePitchPrepare `%s`",h),this.togglePitchAction(D)},startStandbyCountdown(){Tt("startStandbyCountdown"),this.standbyTimeoutId=setTimeout(()=>{this.handlePointerEvent({type:"standbyCountdown"})},Rt)},clearStandbyCountdown(){Tt("clearStandbyCountdown"),clearTimeout(this.standbyTimeoutId)},recordInitialPosition(h){this.initialPosition={x:h.clientX}},isFarEnoughFromInitialPosition(h){const D=h.clientX-this.initialPosition.x,he=Math.abs(D)>It;return Tt("isFarEnoughFromInitialPosition dx=`%s`",D),he},tryMoveCursorForward(){this.editionMode!==N.Nu&&(this.scoreData.scoreActions.executePublicAction("goRight",{mute:!0,isEditing:!0}),this.scoreData.scoreActions.executePublicAction("scrollToCursor"))}}};var G=Object.defineProperty,J=Object.defineProperties,Me=Object.getOwnPropertyDescriptors,Xe=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable,lt=(h,D,he)=>D in h?G(h,D,{enumerable:!0,configurable:!0,writable:!0,value:he}):h[D]=he,At=(h,D)=>{for(var he in D||(D={}))rt.call(D,he)&&lt(h,he,D[he]);if(Xe)for(var he of Xe(D))He.call(D,he)&&lt(h,he,D[he]);return h},xt=(h,D)=>J(h,Me(D));const gt=ut()("flat:keyboard"),F="pitchrange",re={[ft.oZ]:{C:"Do",D:"Re",E:"Mi",F:"Fa",G:"So",A:"La",B:"Si"},[ft.ux]:{B:"\u30B7",A:"\u30E9",G:"\u30BD",F:"\u30D5\u30A1",E:"\u30DF",D:"\u30EC",C:"\u30C9"},[ft.VJ]:{C:"C",D:"D",E:"E",F:"F",G:"G",A:"A",B:"B"},[ft.xt]:{C:"C",D:"D",E:"E",F:"F",G:"G",A:"A",B:"H"}},Se=[{step:"C",alter:0},{step:"C",alter:1},{step:"D",alter:0},{step:"D",alter:1},{step:"E",alter:0},{step:"F",alter:0},{step:"F",alter:1},{step:"G",alter:0},{step:"G",alter:1},{step:"A",alter:0},{step:"A",alter:1},{step:"B",alter:0}],B=[0,1,2,3,4,5,6,7,8],W=Qe.default.createDefault();function V(h){return h=m.A.normalize(h,W),v.default.getAlter(h)===-1&&(h=m.A.switchEnharmonic(h,W)),h}const Ie={name:"PianoKeyboard",props:{scoreData:{type:Object,required:!0}},data(){return At({},Ct.state)},setup(){const h=(0,O.q6)(),D=(0,r.W)(),he=(0,X.B)();return{layout:(0,e.EW)(()=>h.layout),pianoKeyboardLang:(0,e.EW)(()=>h.pianoKeyboardLang),displayMobileEditor:(0,e.EW)(()=>h.displayMobileEditor),parts:(0,e.EW)(()=>h.parts),pitches:(0,e.EW)(()=>D.noteInfo.pitches||[]),partIdx:(0,e.EW)(()=>D.partIdx),measureIdx:(0,e.EW)(()=>D.measureIdx),staffIdx:(0,e.EW)(()=>D.staffIdx),isConcertPitch:(0,e.EW)(()=>D.isConcertPitch),editionMode:(0,e.EW)(()=>D.editionMode),isEditionBlocked:(0,e.EW)(()=>D.isEditionBlocked),noteInfo:(0,e.EW)(()=>D.noteInfo),switchTouchUI:h.switchTouchUI,addExperience:he.addExperience}},computed:{pitchesByOctave(){const h=this.noteInfo.pitches||[],D=[{},{},{},{},{},{},{},{},{}];for(let he=0;he<h.length;he++){const We=V(h[he]);D[We.octave.toString()]=D[We.octave]=D[We.octave]||{},D[We.octave][We.step+(We.alter||0)]=h[he]}return D},pitchesList(){const h={};return B.forEach(D=>{Se.forEach(he=>{const We={octave:D,step:he.step,alter:he.alter,accidental:he.alter?yt.default.SHARP:yt.default.NATURAL};h[`${D}${he.step}${he.alter}`]=We})}),h},measure(){const D=this.scoreData.adagioData.getNbMeasures();let he=this.measureIdx;return he>=D&&(he=D-1),this.scoreData.adagioData.getMeasure(this.partIdx,he)},transpose(){return ze.default.getWrappedTranspose(this.measure).getEntry(this.staffIdx)},instrumentPitchRange(){const h=this.parts[this.partIdx];if(!h)return null;const D=h.metas;return typeof D[F]=="undefined"?null:D[F]},disabledPitchesByOctave(){const h={};for(let D=0;D<=8;D++){const he={};h[D]=he,Se.forEach(({step:We,alter:mt})=>{const R=v.default.create(D,We,mt),Y=this.isPitchDisabled(R),ve=We+mt;he[ve]=Y})}return h},hasHomeButton(){return window.flatSettings.hasHomeButton}},methods:xt(At({},Ct.methods),{isPitchDisabled(h){if(this.partIdx===null)return!1;const D=this.instrumentPitchRange;if(D===null)return!1;if(!this.isConcertPitch){const We=this.transpose;try{h=v.default.transpose(h,We)}catch(mt){if(mt instanceof xe.default)return!0;throw mt}}const he=v.default.toMIDIPitch(h);return he<D.min||he>D.max},getKkEl(){const h=this.$el.getElementsByClassName("keyboard-keys");return h.length>0?h[0]:null},getLeft(){const h=this.getKkEl();this.left=h?h.scrollLeft:0},move(h,D=100){const he=this.getKkEl();h<0?he.scrollLeft-=D:he.scrollLeft+=D,this.getLeft()},togglePitchAction(h){if(this.isEditionBlocked)return;const D=this.pitchesByOctave[h.octave]&&this.pitchesByOctave[h.octave][h.step+h.alter];if(D){const he={step:D.step,octave:Number.parseInt(D.octave,10)};gt("removeKey %o",he),this.scoreData.scoreActions.executePublicAction("removeSelectedNoteByPitch",he),this.scoreData.scoreActions.executePublicAction("scrollToCursor")}else{const he=xt(At({},h),{cursorGoNextNote:!1,autoEnharmonic:!0,source:_.default.TOUCH_UI_PIANO});gt("addKey %o",he),this.addExperience("editor.addnote.touch"),this.scoreData.scoreActions.executePublicAction("addNotePitch",he),this.scoreData.scoreActions.executePublicAction("scrollToCursor"),this.hasAddedNote=!0}},getKeyText(h,D){let he;return this.pianoKeyboardLang===ft.qN?he=this.$t(`editor:piano-keyboard.${h}`):this.pianoKeyboardLang===ft.GW?he=this.$t(`editor:piano-keyboard-solfege.${h}`):he=re[this.pianoKeyboardLang][h],`${he}${D}`}}),mounted(){this.modeStep=this.$el.querySelector(".keyboard-keys-container > .octave:first-child").offsetWidth,this.keyWidth=this.$el.querySelector(".wkey").offsetWidth,this.getKkEl().scrollLeft=this.modeStep*4.5}};var Ee=t(9785),De=t.n(Ee),ot=t(491068);const je={};je.$style=De();const a=(0,Z.A)(Ie,[["render",Fe],["__cssModules",je]]),c={key:0,class:"unpitched-nav"},f={class:"unpitched-keys"},oe=["title","onPointerdown","onPointerup","onPointerout","onPointermove"],Ue={class:"shortcut-icon-line"},Le={key:0,class:"s"},Pt={key:1,class:"kb-icon"},Ot={class:"n"};function pt(h,D){const he=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("div",{class:(0,i.C4)(["unpitched-keyboard no-select",{[h.$style.bottomPadding]:h.hasHomeButton,hasNavInside:!h.displayMobileEditor&&h.layout==="track"}]),onKeydown:D[4]||(D[4]=(0,T.D$)(()=>{},["prevent"]))},[h.displayMobileEditor?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",c,[h.displayNavigation?((0,e.uX)(),(0,e.CE)("a",{key:0,class:"unpitched-nav-btn prev",onClick:D[0]||(D[0]=We=>h.move(-1))},D[5]||(D[5]=[(0,e.Lk)("svg",{inline:"",width:"32",height:"60",viewBox:"0 0 32 60",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{d:"M1.5 59l29-29-29-29",stroke:"#000","stroke-width":"2",fill:"none"})],-1)]))):(0,e.Q3)("",!0),(0,e.Lk)("a",{class:"unpitched-nav-btn unpitched-close",onMousedown:D[1]||(D[1]=We=>h.switchTouchUI())},D[6]||(D[6]=[(0,e.Lk)("svg",{inline:"",width:"12",height:"14",viewBox:"0 0 12 14",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("g",{stroke:"#858FA9","stroke-width":"2",fill:"none","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"},[(0,e.Lk)("path",{d:"M10.5 9L6 13 1.5 9M6 13V1"})])],-1)]),32),h.displayNavigation?((0,e.uX)(),(0,e.CE)("a",{key:1,class:"unpitched-nav-btn next",onClick:D[2]||(D[2]=We=>h.move(1))},D[7]||(D[7]=[(0,e.Lk)("svg",{inline:"",width:"32",height:"60",viewBox:"0 0 32 60",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{d:"M1.5 59l29-29-29-29",stroke:"#000","stroke-width":"2",fill:"none"})],-1)]))):(0,e.Q3)("",!0)])),(0,e.Lk)("div",f,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(h.instruments,We=>((0,e.uX)(),(0,e.CE)("a",{class:(0,i.C4)(["unpitched-inst",{active:h.activeUnpitched.includes(`${We.midiProgram}:${We.midiKey}`)}]),title:We.shortname||We.longname,onContextmenu:D[3]||(D[3]=(0,T.D$)(()=>{},["prevent"])),onPointerdown:mt=>h.handlePointerEvent(mt,We),onPointerup:mt=>h.handlePointerEvent(mt,We),onPointerout:mt=>h.handlePointerEvent(mt,We),onPointermove:mt=>h.handlePointerEvent(mt,We)},[(0,e.Lk)("div",Ue,[!h.displayMobileEditor&&We.shortcuts&&h.stringDisplayableKb(We.shortcuts,!0)?((0,e.uX)(),(0,e.CE)("div",Le,(0,i.v_)(h.stringDisplayableKb(We.shortcuts,!0)),1)):(0,e.Q3)("",!0),We.iconOptions?(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",Pt,null,512)),[[he,h.createDrumIcon(We.iconOptions).outerHTML,"svg"]]):(0,e.Q3)("",!0)]),(0,e.Lk)("div",Ot,(0,i.v_)(We.shortname||We.longname),1)],42,oe))),256)),D[8]||(D[8]=(0,e.Lk)("div",{class:"unpitched-outer"},null,-1))])],34)}var bt=t(26292),ct=t(827717),Xt=t(369900),zt=Object.defineProperty,Kt=Object.defineProperties,Ht=Object.getOwnPropertyDescriptors,kt=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Vt=Object.prototype.propertyIsEnumerable,Zt=(h,D,he)=>D in h?zt(h,D,{enumerable:!0,configurable:!0,writable:!0,value:he}):h[D]=he,wt=(h,D)=>{for(var he in D||(D={}))Ft.call(D,he)&&Zt(h,he,D[he]);if(kt)for(var he of kt(D))Vt.call(D,he)&&Zt(h,he,D[he]);return h},Gt=(h,D)=>Kt(h,Ht(D));const $t=ut()("flat:keyboard"),Qt={name:"unpitchedKeyboard",props:{scoreData:{type:Object,required:!0}},data(){return wt({displayNavigation:!1,stringDisplayableKb:bt.lD},Ct.state)},setup(){const h=(0,O.q6)(),D=(0,r.W)(),he=(0,X.B)();return{displayMobileEditor:(0,e.EW)(()=>h.displayMobileEditor),layout:(0,e.EW)(()=>h.layout),currentPart:(0,e.EW)(()=>D.currentPart),editionMode:(0,e.EW)(()=>D.editionMode),isEditionBlocked:(0,e.EW)(()=>D.isEditionBlocked),activeUnpitched:(0,e.EW)(()=>(D.noteInfo.unpitched||[]).map(mt=>`${mt.MIDIProgram}:${mt.MIDIUnpitched}`)),switchTouchUI:h.switchTouchUI,addExperience:he.addExperience}},computed:{instruments(){const{standardizedMapping:h}=this.currentPart;return h.forEach(D=>{if(D.notehead&&D.unpitched){const he=(0,Xt.A)(D,this.currentPart,18);he&&(D.iconOptions=he)}}),h},hasHomeButton(){return window.flatSettings.hasHomeButton}},methods:Gt(wt({},Ct.methods),{getKkEl(){const h=this.$el.getElementsByClassName("unpitched-keys");return h.length>0?h[0]:null},getLeft(){const h=this.getKkEl();this.left=h?h.scrollLeft:0},move(h,D=100){const he=this.getKkEl();h<0?he.scrollLeft-=D:he.scrollLeft+=D,this.getLeft()},togglePitchAction(h){if(this.isEditionBlocked)return;const D={midiProgram:h.midiProgram,midiKey:Number.parseInt(h.midiKey,10),cursorGoNextNote:!1};this.activeUnpitched.includes(`${h.midiProgram}:${h.midiKey}`)?($t("removeKey %o",D),this.scoreData.scoreActions.executePublicAction("removeUnpitchedNote",D),this.scoreData.scoreActions.executePublicAction("scrollToCursor")):($t("addKey %o",D),this.addExperience("editor.addnote.touch"),this.scoreData.scoreActions.executePublicAction("addUnpitchedNote",Gt(wt({},D),{source:_.default.TOUCH_UI_DRUMS})),this.scoreData.scoreActions.executePublicAction("scrollToCursor"),this.hasAddedNote=!0)},updateDisplayNavigation(){this.displayNavigation=this.getKkEl().scrollWidth>this.getKkEl().clientWidth},createDrumIcon:ct.A}),mounted(){this.keyWidth=this.$el.querySelector(".unpitched-inst").offsetWidth,this.updateDisplayNavigation(),window.addEventListener("resize",this.updateDisplayNavigation)},unmounted(){window.removeEventListener("resize",this.updateDisplayNavigation)}};var oo=t(813668),P=t(374208),ye=t.n(P);const Be={};Be.$style=ye();const ke={name:"TouchKeyboard",components:{PianoKeyboard:a,UnpitchedKeyboard:(0,Z.A)(Qt,[["render",pt],["__cssModules",Be]]),FretboardEditor:x},props:{scoreData:{type:Object,required:!0}},setup(){const h=(0,r.W)();return{staffMode:(0,e.EW)(()=>h.staffMode),displayedTouchUi:(0,e.EW)(()=>h.displayedTouchUi)}}},dt=(0,Z.A)(ke,[["render",o]])},993478:(l,n,t)=>{"use strict";t.d(n,{A:()=>o});const o={FIFTHS:"fifths",SIXTHS:"sixths",SEVENTHS:"sevenths",NINTHS:"ninths",ELEVENTHS:"elevenths",THIRTEENTHS:"thirteenths"}},994232:(l,n,t)=>{var e=t(341043);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("36f3e4ca",e,!0,{})},996387:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`.ddnMetronomeInner_Xg_bS{display:flex;align-items:center;padding:16px;gap:8px}.ddnMetronomeInner_Xg_bS .bpm_eYYGa{height:auto;padding:9px 10px;width:75px}.ddnMetronomeInner_Xg_bS .btn_wnvuE{margin:0}.ddnMetronomeInner_Xg_bS .changeDuration_ORuBL,.ddnMetronomeInner_Xg_bS .newDuration_oaaWT{appearance:none;background:transparent;border:0;padding:0;margin:0}.ddnMetronomeInner_Xg_bS .changeDuration_ORuBL{display:flex;align-items:center}.ddnMetronomeInner_Xg_bS .changeDuration_ORuBL .fill{fill:var(--f-primary)}.ddnMetronomeInner_Xg_bS .delete_g8IFN,.ddnMetronomeInner_Xg_bS .openFullMetronome_DYfWA{padding:8px}.ddnMetronomeInner_Xg_bS .openFullMetronome_DYfWA{margin-left:-8px}.ddnMetronomeInner_Xg_bS .newDuration_oaaWT .fill{fill:var(--f-subdue)}.ddnMetronomeInner_Xg_bS .newDuration_oaaWT.active_Vw1za .fill{fill:var(--f-primary)}.ddnMetronomeInner_Xg_bS .iconCaret_tUoS3{margin-right:10px;width:0;height:0;border-left:3px solid transparent;border-right:3px solid transparent;border-top:3px solid var(--f-primary)}
`,""]),s.locals={ddnMetronomeInner:"ddnMetronomeInner_Xg_bS",bpm:"bpm_eYYGa",btn:"btn_wnvuE",changeDuration:"changeDuration_ORuBL",newDuration:"newDuration_oaaWT",delete:"delete_g8IFN",openFullMetronome:"openFullMetronome_DYfWA",active:"active_Vw1za",iconCaret:"iconCaret_tUoS3"};const d=s},997092:(l,n,t)=>{"use strict";t.d(n,{A:()=>d});var e=t(766062),o=t(814775),r=t(938793);const i={};i.$style=o.default;const d=(0,r.A)(e.A,[["__cssModules",i]])},997829:(l,n,t)=>{var e=t(999020);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[l.id,e,""]]),e.locals&&(l.exports=e.locals);var o=t(929234).A,r=o("07afc765",e,!0,{})},999020:(l,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var e=t(814779),o=t.n(e),r=t(927860),i=t.n(r),s=i()(o());s.push([l.id,`html .rootCommon_mOJAa{display:flex;position:relative}html .rootCommon_mOJAa .badge_g_XBK{position:absolute;overflow:hidden;height:0;width:0;font-size:9px;line-height:14px;font-weight:700;border-radius:50%;transition:all .15s cubic-bezier(.25,.1,.25,1);transform-origin:center center}html .rootCommon_mOJAa.active .badge_g_XBK{height:16px;width:16px}html .rootCommon_mOJAa .iconFlex_UHLjj{display:flex}html .rootDesktop_NWPNl{background:transparent;border:0;padding:0;height:42px;align-items:center;justify-content:center}html .rootDesktop_NWPNl .badge_g_XBK{top:4px;right:4px;background-color:var(--f-primary);border:1px solid white;color:#fff}html .rootDesktop_NWPNl .iconFlex_UHLjj{align-items:center;justify-content:center}html .rootDesktop_NWPNl .caret_jsfjm{margin-right:10px;width:0;height:0;border-left:3px solid transparent;border-right:3px solid transparent;border-top:3px solid var(--f-subdue)}html .rootDesktop_NWPNl .fill{fill:var(--f-subdue)}html .rootDesktop_NWPNl .stroke{stroke:var(--f-subdue)}html .rootDesktop_NWPNl.active .fill{fill:var(--f-primary)}html .rootDesktop_NWPNl.active .stroke{stroke:var(--f-primary)}html .rootDesktop_NWPNl.disabled{cursor:not-allowed}html .rootDesktop_NWPNl.disabled .fill{fill:var(--f-grey-disabled-content)}html .rootDesktop_NWPNl.disabled .stroke{stroke:var(--f-grey-disabled-content)}html .rootMobileDetailed_biL_6{width:100%;border:1px solid var(--f-subdue-10);box-shadow:inset 0 -2px 4px #2f344633;background-color:#fff;border-radius:4px;height:68px;min-width:58px;padding:8px;flex-direction:column;align-items:flex-start;justify-content:flex-end;transition:all ease-in-out .3s}html .rootMobileDetailed_biL_6 .t_SeONS{font-size:11px;color:var(--f-ink);white-space:nowrap}html .rootMobileDetailed_biL_6 .i_T7TTk svg{margin:0 0 -5px -15px}html .rootMobileDetailed_biL_6 .fill{fill:var(--f-ink)}html .rootMobileDetailed_biL_6 .stroke{stroke:var(--f-ink)}html .rootMobileDetailed_biL_6 .i_T7TTk.bigIcon_aOHDY svg{margin:0 0 -5px -10px}html .rootMobileDetailed_biL_6 .badge_g_XBK{top:21px;right:8px;background-color:#fff;border:1px solid white;color:var(--f-primary)}html .rootMobileDetailed_biL_6 .iconFlex_UHLjj{flex-direction:column;align-items:flex-start;justify-content:flex-end}html .rootMobileDetailed_biL_6.active{background:var(--f-primary)}html .rootMobileDetailed_biL_6.active .fill{fill:#fff}html .rootMobileDetailed_biL_6.active .stroke{stroke:#fff}html .rootMobileDetailed_biL_6.active .t_SeONS{color:#fff}html .rootMobileDetailed_biL_6.disabled{background:var(--f-grey-disabled-container-light);border:1px solid var(--f-grey-disabled-container);cursor:not-allowed}html .rootMobileDetailed_biL_6.disabled .fill{fill:var(--f-grey-disabled-content)}html .rootMobileDetailed_biL_6.disabled .stroke{stroke:var(--f-grey-disabled-content)}html .rootMobileDetailed_biL_6.disabled .t_SeONS{color:var(--f-grey-disabled-content)}html .rootMobileDetailed_biL_6:active{background:var(--f-primary);border:1px solid var(--f-primary-dark)}html .rootMobileDetailed_biL_6:active .fill{fill:#fff}html .rootMobileDetailed_biL_6:active .stroke{stroke:#fff}html .rootMobileDetailed_biL_6:active .t_SeONS{color:#fff}html .rootMobileSimple_ujeJ_{background:transparent;border:0;padding:0;height:42px;width:100%;align-items:center;justify-content:center}html .rootMobileSimple_ujeJ_ .i_T7TTk{display:flex}html .rootMobileSimple_ujeJ_ .t_SeONS{display:none}html .rootMobileSimple_ujeJ_ .fill{fill:var(--f-ink)}html .rootMobileSimple_ujeJ_ .stroke{stroke:var(--f-ink)}html .rootMobileSimple_ujeJ_.disabled{cursor:not-allowed}html .rootMobileSimple_ujeJ_.disabled .fill{fill:var(--f-grey-disabled-container)}html .rootMobileSimple_ujeJ_.disabled .stroke{stroke:var(--f-grey-disabled-container)}html .rootNativeSimple_kLP9d{width:28px;height:28px;border:none;background:transparent;box-shadow:0 0 0 1px #363c500a,0 1px 4px #363c5024;border-radius:8px;align-items:center;justify-content:center}html .rootNativeSimple_kLP9d .i_T7TTk{color:var(--f-subdue);display:flex}html .rootNativeSimple_kLP9d .t_SeONS{display:none}html .rootNativeSimple_kLP9d .fill{fill:var(--f-subdue)}html .rootNativeSimple_kLP9d .stroke{stroke:var(--f-subdue)}html .rootNativeSimple_kLP9d.disabled{background-color:var(--f-grey-disabled-container-light);cursor:not-allowed}html .rootNativeSimple_kLP9d.disabled .fill{fill:var(--f-grey-disabled-content)}html .rootNativeSimple_kLP9d.disabled .stroke{stroke:var(--f-grey-disabled-content)}html .rootNativeSimple_kLP9d:active{background:var(--f-primary);border:1px solid var(--f-primary-dark)}html .rootNativeSimple_kLP9d:active .fill{fill:#fff}html .rootNativeSimple_kLP9d:active .stroke{stroke:#fff}html .rootNativeSimple_kLP9d:active .t_SeONS{color:#fff}*[data-color-mode=dark] .rootMobileDetailed_biL_6{border-color:var(--f-subdue-dark);background:linear-gradient(180deg,var(--f-subdue-darker) 0%,var(--f-subdue-dark) 100%)}*[data-color-mode=dark] .rootMobileDetailed_biL_6 .t_SeONS{color:#fff}*[data-color-mode=dark] .rootMobileDetailed_biL_6 .fill{fill:#fff}*[data-color-mode=dark] .rootMobileDetailed_biL_6 .stroke{stroke:#fff}*[data-color-mode=dark] .rootMobileDetailed_biL_6.disabled{border:none;background:none;box-shadow:none}*[data-color-mode=dark] .rootMobileDetailed_biL_6.disabled .t_SeONS{color:var(--f-dark-disabled-content)}*[data-color-mode=dark] .rootMobileDetailed_biL_6.disabled .fill{fill:var(--f-dark-disabled-content)}*[data-color-mode=dark] .rootMobileDetailed_biL_6.disabled .stroke{stroke:var(--f-dark-disabled-content)}*[data-color-mode=dark] .rootNativeSimple_kLP9d{box-shadow:none;border:1px solid var(--f-subdue-dark);background-color:var(--f-subdue-darker)}*[data-color-mode=dark] .rootNativeSimple_kLP9d.disabled{border:none;background:none}*[data-color-mode=dark] .rootNativeSimple_kLP9d.disabled .fill{fill:var(--f-dark-disabled-content)}*[data-color-mode=dark] .rootNativeSimple_kLP9d.disabled .stroke{stroke:var(--f-dark-disabled-content)}
`,""]),s.locals={rootCommon:"rootCommon_mOJAa",badge:"badge_g_XBK",iconFlex:"iconFlex_UHLjj",rootDesktop:"rootDesktop_NWPNl",caret:"caret_jsfjm",rootMobileDetailed:"rootMobileDetailed_biL_6",t:"t_SeONS",i:"i_T7TTk",bigIcon:"bigIcon_aOHDY",rootMobileSimple:"rootMobileSimple_ujeJ_",rootNativeSimple:"rootNativeSimple_kLP9d"};const d=s}}]);})();


//# debugId=038b43a7-1bc7-5c25-8e11-bd3cbea396f3

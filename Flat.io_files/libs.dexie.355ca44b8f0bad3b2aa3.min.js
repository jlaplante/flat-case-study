"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="71cd6e4c-cf9c-5af9-88a3-f01d84c53519")}catch(e){}}();
(()=>{/*! Copyright (c) 2025 Tutteo Ltd. */(self.webpackChunk_flat_flat=self.webpackChunk_flat_flat||[]).push([[63516],{900448:(qi,pr,yr)=>{yr.d(pr,{Ay:()=>qe});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pt=function(e,t){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Pt(e,t)};function mr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Pt(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var P=function(){return P=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},P.apply(this,arguments)};function tt(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var Y=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:window,V=Object.keys,N=Array.isArray;typeof Promise!="undefined"&&!Y.Promise&&(Y.Promise=Promise);function X(e,t){return typeof t!="object"||V(t).forEach(function(n){e[n]=t[n]}),e}var Oe=Object.getPrototypeOf,gr={}.hasOwnProperty;function H(e,t){return gr.call(e,t)}function Ce(e,t){typeof t=="function"&&(t=t(Oe(e))),(typeof Reflect=="undefined"?V:Reflect.ownKeys)(t).forEach(function(n){oe(e,n,t[n])})}var An=Object.defineProperty;function oe(e,t,n,r){An(e,t,X(n&&H(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Te(e){return{from:function(t){return e.prototype=Object.create(t.prototype),oe(e.prototype,"constructor",e),{extend:Ce.bind(null,e.prototype)}}}}var br=Object.getOwnPropertyDescriptor;function Sn(e,t){var n=br(e,t),r;return n||(r=Oe(e))&&Sn(r,t)}var wr=[].slice;function nt(e,t,n){return wr.call(e,t,n)}function kn(e,t){return t(e)}function Le(e){if(!e)throw new Error("Assertion Failed")}function On(e){Y.setImmediate?setImmediate(e):setTimeout(e,0)}function _r(e,t){return e.reduce(function(n,r,i){var a=t(r,i);return a&&(n[a[0]]=a[1]),n},{})}function ie(e,t){if(typeof t=="string"&&H(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=ie(e,t[r]);n.push(a)}return n}var u=t.indexOf(".");if(u!==-1){var o=e[t.substr(0,u)];return o==null?void 0:ie(o,t.substr(u+1))}}function G(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Le(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)G(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var u=t.substr(0,a),o=t.substr(a+1);if(o==="")n===void 0?N(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=n;else{var s=e[u];(!s||!H(e,u))&&(s=e[u]={}),G(s,o,n)}}else n===void 0?N(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function xr(e,t){typeof t=="string"?G(e,t,void 0):"length"in t&&[].map.call(t,function(n){G(e,n,void 0)})}function Cn(e){var t={};for(var n in e)H(e,n)&&(t[n]=e[n]);return t}var Er=[].concat;function Tn(e){return Er.apply([],e)}var Kr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Tn([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return Y[e]}),Dn=new Set(Kr.map(function(e){return Y[e]}));function Pn(e){var t={};for(var n in e)if(H(e,n)){var r=e[n];t[n]=!r||typeof r!="object"||Dn.has(r.constructor)?r:Pn(r)}return t}function Ar(e){for(var t in e)if(H(e,t))return!1;return!0}var ze=null;function me(e){ze=new WeakMap;var t=It(e);return ze=null,t}function It(e){if(!e||typeof e!="object")return e;var t=ze.get(e);if(t)return t;if(N(e)){t=[],ze.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(It(e[n]))}else if(Dn.has(e.constructor))t=e;else{var i=Oe(e);t=i===Object.prototype?{}:Object.create(i),ze.set(e,t);for(var a in e)H(e,a)&&(t[a]=It(e[a]))}return t}var Sr={}.toString;function Rt(e){return Sr.call(e).slice(8,-1)}var Bt=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",kr=typeof Bt=="symbol"?function(e){var t;return e!=null&&(t=e[Bt])&&t.apply(e)}:function(){return null};function ge(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var De={};function ae(e){var t,n,r,i;if(arguments.length===1){if(N(e))return e.slice();if(this===De&&typeof e=="string")return[e];if(i=kr(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Mt=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Or=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],In=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ft=Or.concat(In),Cr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Pe(e,t){this.name=e,this.message=t}Te(Pe).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Rn(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function rt(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Rn(e,t)}Te(rt).from(Pe);function Ie(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Rn(e,this.failures)}Te(Ie).from(Pe);var jt=Ft.reduce(function(e,t){return e[t]=t+"Error",e},{}),Tr=Pe,C=Ft.reduce(function(e,t){var n=t+"Error";function r(i,a){this.name=n,i?typeof i=="string"?(this.message="".concat(i).concat(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=Cr[t]||n,this.inner=null)}return Te(r).from(Tr),e[t]=r,e},{});C.Syntax=SyntaxError,C.Type=TypeError,C.Range=RangeError;var Bn=In.reduce(function(e,t){return e[t+"Error"]=C[t],e},{});function Dr(e,t){if(!e||e instanceof Pe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Bn[e.name])return e;var n=new Bn[e.name](t||e.message,e);return"stack"in e&&oe(n,"stack",{get:function(){return this.inner.stack}}),n}var it=Ft.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=C[t]),e},{});it.ModifyError=rt,it.DexieError=Pe,it.BulkError=Ie;function F(){}function Ve(e){return e}function Pr(e,t){return e==null||e===Ve?t:function(n){return t(e(n))}}function be(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Ir(e,t){return e===F?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?be(r,this.onsuccess):r),i&&(this.onerror=this.onerror?be(i,this.onerror):i),a!==void 0?a:n}}function Rr(e,t){return e===F?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?be(n,this.onsuccess):n),r&&(this.onerror=this.onerror?be(r,this.onerror):r)}}function Br(e,t){return e===F?t:function(n){var r=e.apply(this,arguments);X(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?be(i,this.onsuccess):i),a&&(this.onerror=this.onerror?be(a,this.onerror):a),r===void 0?u===void 0?void 0:u:X(r,u)}}function Mr(e,t){return e===F?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Nt(e,t){return e===F?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var ee=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Mn(e,t){ee=e}var We={},Fn=100,Lt=typeof Promise=="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,Oe(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Oe(t),e]}(),jn=Lt[0],Nn=Lt[1],Fr=Lt[2],jr=Nn&&Nn.then,we=jn&&jn.constructor,zt=!!Fr;function Nr(){queueMicrotask(zr)}var Ye=function(e,t){Ue.push([e,t]),at&&(Nr(),at=!1)},Vt=!0,at=!0,_e=[],ut=[],Wt=Ve,se={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:F,pgp:!1,env:{},finalize:F},k=se,Ue=[],xe=0,ot=[];function K(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=k;if(typeof e!="function"){if(e!==We)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Ut(this,this._value);return}this._state=null,this._value=null,++t.ref,zn(this,e)}var Yt={get:function(){var e=k,t=ft;function n(r,i){var a=this,u=!e.global&&(e!==k||t!==ft),o=u&&!le(),s=new K(function(c,h){$t(a,new Ln(Yn(r,e,u,o),Yn(i,e,u,o),c,h,e))});return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return n.prototype=We,n},set:function(e){oe(this,"then",e&&e.prototype===We?Yt:{get:function(){return e},set:Yt.set})}};Ce(K.prototype,{then:Yt,_then:function(e,t){$t(this,new Ln(null,null,e,t,k))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):st(r)}):this.then(null,function(r){return r&&r.name===t?n(r):st(r)})},finally:function(e){return this.then(function(t){return K.resolve(e()).then(function(){return t})},function(t){return K.resolve(e()).then(function(){return st(t)})})},timeout:function(e,t){var n=this;return e<1/0?new K(function(r,i){var a=setTimeout(function(){return i(new C.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol!="undefined"&&Symbol.toStringTag&&oe(K.prototype,Symbol.toStringTag,"Dexie.Promise"),se.env=Wn();function Ln(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Ce(K,{all:function(){var e=ae.apply(null,arguments).map(ht);return new K(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return K.resolve(i).then(function(u){e[a]=u,--r||t(e)},n)})})},resolve:function(e){if(e instanceof K)return e;if(e&&typeof e.then=="function")return new K(function(n,r){e.then(n,r)});var t=new K(We,!0,e);return t},reject:st,race:function(){var e=ae.apply(null,arguments).map(ht);return new K(function(t,n){e.map(function(r){return K.resolve(r).then(t,n)})})},PSD:{get:function(){return k},set:function(e){return k=e}},totalEchoes:{get:function(){return ft}},newPSD:ce,usePSD:Ee,scheduler:{get:function(){return Ye},set:function(e){Ye=e}},rejectionMapper:{get:function(){return Wt},set:function(e){Wt=e}},follow:function(e,t){return new K(function(n,r){return ce(function(i,a){var u=k;u.unhandleds=[],u.onunhandled=a,u.finalize=be(function(){var o=this;Vr(function(){o.unhandleds.length===0?i():a(o.unhandleds[0])})},u.finalize),e()},t,n,r)})}}),we&&(we.allSettled&&oe(K,"allSettled",function(){var e=ae.apply(null,arguments).map(ht);return new K(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return K.resolve(i).then(function(u){return r[a]={status:"fulfilled",value:u}},function(u){return r[a]={status:"rejected",reason:u}}).then(function(){return--n||t(r)})})})}),we.any&&typeof AggregateError!="undefined"&&oe(K,"any",function(){var e=ae.apply(null,arguments).map(ht);return new K(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,u){return K.resolve(a).then(function(o){return t(o)},function(o){i[u]=o,--r||n(new AggregateError(i))})})})}),we.withResolvers&&(K.withResolvers=we.withResolvers));function zn(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Re();n&&typeof n.then=="function"?zn(e,function(i,a){n instanceof K?n._then(i,a):n.then(i,a)}):(e._state=!0,e._value=n,Vn(e)),r&&Be()}},Ut.bind(null,e))}catch(n){Ut(e,n)}}function Ut(e,t){if(ut.push(t),e._state===null){var n=e._lib&&Re();t=Wt(t),e._state=!1,e._value=t,Wr(e),Vn(e),n&&Be()}}function Vn(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)$t(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),xe===0&&(++xe,Ye(function(){--xe===0&&Ht()},[]))}function $t(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++xe,Ye(Lr,[n,e,t])}function Lr(e,t,n){try{var r,i=t._value;!t._state&&ut.length&&(ut=[]),r=ee&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),!t._state&&ut.indexOf(i)===-1&&Yr(t),n.resolve(r)}catch(a){n.reject(a)}finally{--xe===0&&Ht(),--n.psd.ref||n.psd.finalize()}}function zr(){Ee(se,function(){Re()&&Be()})}function Re(){var e=Vt;return Vt=!1,at=!1,e}function Be(){var e,t,n;do for(;Ue.length>0;)for(e=Ue,Ue=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Ue.length>0);Vt=!0,at=!0}function Ht(){var e=_e;_e=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=ot.slice(0),n=t.length;n;)t[--n]()}function Vr(e){function t(){e(),ot.splice(ot.indexOf(t),1)}ot.push(t),++xe,Ye(function(){--xe===0&&Ht()},[])}function Wr(e){_e.some(function(t){return t._value===e._value})||_e.push(e)}function Yr(e){for(var t=_e.length;t;)if(_e[--t]._value===e._value){_e.splice(t,1);return}}function st(e){return new K(We,!1,e)}function j(e,t){var n=k;return function(){var r=Re(),i=k;try{return fe(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{fe(i,!1),r&&Be()}}}var W={awaits:0,echoes:0,id:0},Ur=0,ct=[],lt=0,ft=0,$r=0;function ce(e,t,n,r){var i=k,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++$r,se.env,a.env=zt?{Promise:K,PromiseProp:{value:K,configurable:!0,writable:!0},all:K.all,race:K.race,allSettled:K.allSettled,any:K.any,resolve:K.resolve,reject:K.reject}:{},t&&X(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=Ee(a,e,n,r);return a.ref===0&&a.finalize(),u}function Me(){return W.id||(W.id=++Ur),++W.awaits,W.echoes+=Fn,W.id}function le(){return W.awaits?(--W.awaits===0&&(W.id=0),W.echoes=W.awaits*Fn,!0):!1}(""+jr).indexOf("[native code]")===-1&&(Me=le=F);function ht(e){return W.echoes&&e&&e.constructor===we?(Me(),e.then(function(t){return le(),t},function(t){return le(),z(t)})):e}function Hr(e){++ft,(!W.echoes||--W.echoes===0)&&(W.echoes=W.awaits=W.id=0),ct.push(k),fe(e,!0)}function Qr(){var e=ct[ct.length-1];ct.pop(),fe(e,!1)}function fe(e,t){var n=k;if((t?W.echoes&&(!lt++||e!==k):lt&&(!--lt||e!==k))&&queueMicrotask(t?Hr.bind(null,e):Qr),e!==k&&(k=e,n===se&&(se.env=Wn()),zt)){var r=se.env.Promise,i=e.env;(n.global||e.global)&&(Object.defineProperty(Y,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Wn(){var e=Y.Promise;return zt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Y,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ee(e,t,n,r,i){var a=k;try{return fe(e,!0),t(n,r,i)}finally{fe(a,!1)}}function Yn(e,t,n,r){return typeof e!="function"?e:function(){var i=k;n&&Me(),fe(t,!0);try{return e.apply(this,arguments)}finally{fe(i,!1),r&&queueMicrotask(le)}}}function Qt(e){Promise===we&&W.echoes===0?lt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var z=K.reject;function Xt(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!k.letThrough&&!e._vip){if(e._state.openComplete)return z(new C.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return z(new C.DatabaseClosed);e.open().catch(F)}return e._state.dbReadyPromise.then(function(){return Xt(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===jt.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Xt(e,t,n,r)})):z(a)}return i._promise(t,function(a,u){return ce(function(){return k.trans=i,r(a,u,i)})}).then(function(a){if(t==="readwrite")try{i.idbtrans.commit()}catch(u){}return t==="readonly"?a:i._completion.then(function(){return a})})}}var Un="4.0.11",Ke="\uFFFF",Gt=-1/0,ue="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",$n="String expected.",Fe=[],vt="__dbnames",Jt="readonly",Zt="readwrite";function Ae(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Hn={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function dt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=me(t),delete t[e]),t}:function(t){return t}}function Xr(){throw C.Type()}function B(e,t){try{var n=Qn(e),r=Qn(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Jr(Xn(e),Xn(t));case"Array":return Gr(e,t)}}catch(i){}return NaN}function Gr(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var u=B(e[a],t[a]);if(u!==0)return u}return n===r?0:n<r?-1:1}function Jr(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function Qn(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Rt(e);return n==="ArrayBuffer"?"binary":n}function Xn(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Gn=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||k.trans,a=this.name,u=ee&&typeof console!="undefined"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function o(h,l,p){if(!p.schema[a])throw new C.NotFound("Table "+a+" not part of transaction");return n(p.idbtrans,p)}var s=Re();try{var c=i&&i.db._novip===this.db._novip?i===k.trans?i._promise(t,o,r):ce(function(){return i._promise(t,o,r)},{trans:i,transless:k.transless||k}):Xt(this.db,t,[this.name],o);return u&&(c._consoleTask=u,c=c.catch(function(h){return console.trace(h),z(h)})),c}finally{s&&Be()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):t==null?z(new C.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(N(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var n=V(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(h){if(h.compound&&n.every(function(p){return h.keyPath.indexOf(p)>=0})){for(var l=0;l<n.length;++l)if(n.indexOf(h.keyPath[l])===-1)return!1;return!0}return!1}).sort(function(h,l){return h.keyPath.length-l.keyPath.length})[0];if(r&&this.db._maxKey!==Ke){var i=r.keyPath.slice(0,n.length);return this.where(i).equals(i.map(function(h){return t[h]}))}!r&&ee&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var a=this.schema.idxByName;function u(h,l){return B(h,l)===0}var o=n.reduce(function(h,l){var p=h[0],_=h[1],f=a[l],v=t[l];return[p||f,p||!f?Ae(_,f&&f.multi?function(d){var b=ie(d,l);return N(b)&&b.some(function(m){return u(v,m)})}:function(d){return u(v,ie(d,l))}):_]},[null,null]),s=o[0],c=o[1];return s?this.where(s.name).equals(t[s.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,N(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var n=this,r=n.db,i=n.name;this.schema.mappedClass=t,t.prototype instanceof Xr&&(t=function(s){mr(c,s);function c(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(c.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),c.prototype.table=function(){return i},c}(t));for(var a=new Set,u=t.prototype;u;u=Oe(u))Object.getOwnPropertyNames(u).forEach(function(s){return a.add(s)});var o=function(s){if(!s)return s;var c=Object.create(t.prototype);for(var h in s)if(!a.has(h))try{c[h]=s[h]}catch(l){}return c};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),t},e.prototype.defineClass=function(){function t(n){X(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,u=i.keyPath,o=t;return u&&a&&(o=dt(u)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})}).then(function(s){return s.numFailures?K.reject(s.failures[0]):s.lastResult}).then(function(s){if(u)try{G(t,u,s)}catch(c){}return s})},e.prototype.update=function(t,n){if(typeof t=="object"&&!N(t)){var r=ie(t,this.schema.primKey.keyPath);return r===void 0?z(new C.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,u=i.keyPath,o=t;return u&&a&&(o=dt(u)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?K.reject(s.failures[0]):s.lastResult}).then(function(s){if(u)try{G(t,u,s)}catch(c){}return s})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?K.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Hn})}).then(function(n){return n.numFailures?K.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var u=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var s=i.schema.primKey,c=s.auto,h=s.keyPath;if(h&&a)throw new C.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new C.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,p=h&&c?t.map(dt(h)):t;return i.core.mutate({trans:o,type:"add",keys:a,values:p,wantResults:u}).then(function(_){var f=_.numFailures,v=_.results,d=_.lastResult,b=_.failures,m=u?v:d;if(f===0)return m;throw new Ie("".concat(i.name,".bulkAdd(): ").concat(f," of ").concat(l," operations failed"),b)})})},e.prototype.bulkPut=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var u=r?r.allKeys:void 0;return this._trans("readwrite",function(o){var s=i.schema.primKey,c=s.auto,h=s.keyPath;if(h&&a)throw new C.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new C.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,p=h&&c?t.map(dt(h)):t;return i.core.mutate({trans:o,type:"put",keys:a,values:p,wantResults:u}).then(function(_){var f=_.numFailures,v=_.results,d=_.lastResult,b=_.failures,m=u?v:d;if(f===0)return m;throw new Ie("".concat(i.name,".bulkPut(): ").concat(f," of ").concat(l," operations failed"),b)})})},e.prototype.bulkUpdate=function(t){var n=this,r=this.core,i=t.map(function(o){return o.key}),a=t.map(function(o){return o.changes}),u=[];return this._trans("readwrite",function(o){return r.getMany({trans:o,keys:i,cache:"clone"}).then(function(s){var c=[],h=[];t.forEach(function(p,_){var f=p.key,v=p.changes,d=s[_];if(d){for(var b=0,m=Object.keys(v);b<m.length;b++){var g=m[b],w=v[g];if(g===n.schema.primKey.keyPath){if(B(w,f)!==0)throw new C.Constraint("Cannot update primary key in bulkUpdate()")}else G(d,g,w)}u.push(_),c.push(f),h.push(d)}});var l=c.length;return r.mutate({trans:o,type:"put",keys:c,values:h,updates:{keys:i,changeSpecs:a}}).then(function(p){var _=p.numFailures,f=p.failures;if(_===0)return l;for(var v=0,d=Object.keys(f);v<d.length;v++){var b=d[v],m=u[Number(b)];if(m!=null){var g=f[b];delete f[b],f[m]=g}}throw new Ie("".concat(n.name,".bulkUpdate(): ").concat(_," of ").concat(l," operations failed"),f)})})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var a=i.numFailures,u=i.lastResult,o=i.failures;if(a===0)return u;throw new Ie("".concat(n.name,".bulkDelete(): ").concat(a," of ").concat(r," operations failed"),o)})},e}();function $e(e){var t={},n=function(o,s){if(s){for(var c=arguments.length,h=new Array(c-1);--c;)h[c-1]=arguments[c];return t[o].subscribe.apply(null,h),e}else if(typeof o=="string")return t[o]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(o,s,c){if(typeof o=="object")return u(o);s||(s=Mr),c||(c=F);var h={subscribers:[],fire:c,subscribe:function(l){h.subscribers.indexOf(l)===-1&&(h.subscribers.push(l),h.fire=s(h.fire,l))},unsubscribe:function(l){h.subscribers=h.subscribers.filter(function(p){return p!==l}),h.fire=h.subscribers.reduce(s,c)}};return t[o]=n[o]=h,h}function u(o){V(o).forEach(function(s){var c=o[s];if(N(c))a(s,o[s][0],o[s][1]);else if(c==="asap")var h=a(s,Ve,function(){for(var p=arguments.length,_=new Array(p);p--;)_[p]=arguments[p];h.subscribers.forEach(function(f){On(function(){f.apply(null,_)})})});else throw new C.InvalidArgument("Invalid event config")})}}function He(e,t){return Te(t).from({prototype:e}),t}function Zr(e){return He(Gn.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:$e(null,{creating:[Ir,F],reading:[Pr,Ve],updating:[Br,F],deleting:[Rr,F]})})}function je(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function qt(e,t){e.filter=Ae(e.filter,t)}function en(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ae(r(),t())}:t,e.justLimit=n&&!r}function qr(e,t){e.isMatch=Ae(e.isMatch,t)}function pt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new C.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Jn(e,t,n){var r=pt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function yt(e,t,n,r){var i=e.replayFilter?Ae(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},u=function(o,s,c){if(!i||i(s,c,function(p){return s.stop(p)},function(p){return s.fail(p)})){var h=s.primaryKey,l=""+h;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(h)),H(a,l)||(a[l]=!0,t(o,s,c))}};return Promise.all([e.or._iterate(u,n),Zn(Jn(e,r,n),e.algorithm,u,!e.keysOnly&&e.valueMapper)])}else return Zn(Jn(e,r,n),Ae(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Zn(e,t,n,r){var i=r?function(u,o,s){return n(r(u),o,s)}:n,a=j(i);return e.then(function(u){if(u)return u.start(function(){var o=function(){return u.continue()};(!t||t(u,function(s){return o=s},function(s){u.stop(s),o=F},function(s){u.fail(s),o=F}))&&a(u.value,u,function(s){return o=s}),o()})})}var mt=function(){function e(t){this["@@propmod"]=t}return e.prototype.execute=function(t){var n,r=this["@@propmod"];if(r.add!==void 0){var i=r.add;if(N(i))return tt(tt([],N(t)?t:[],!0),i,!0).sort();if(typeof i=="number")return(Number(t)||0)+i;if(typeof i=="bigint")try{return BigInt(t)+i}catch(o){return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(r.remove!==void 0){var a=r.remove;if(N(a))return N(t)?t.filter(function(o){return!a.includes(o)}).sort():[];if(typeof a=="number")return Number(t)-a;if(typeof a=="bigint")try{return BigInt(t)-a}catch(o){return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}var u=(n=r.replacePrefix)===null||n===void 0?void 0:n[0];return u&&typeof t=="string"&&t.startsWith(u)?r.replacePrefix[1]+t.substring(u.length):t},e}(),ei=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,z.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,z.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Ae(n.algorithm,t)},e.prototype._iterate=function(t,n){return yt(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&X(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return yt(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(je(i,!0))return a.count({trans:r,query:{index:pt(i,a.schema),range:i.range}}).then(function(o){return Math.min(o,i.limit)});var u=0;return yt(i,function(){return++u,!1},r,a).then(function(){return u})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],a=r.length-1;function u(c,h){return h?u(c[r[h]],h-1):c[i]}var o=this._ctx.dir==="next"?1:-1;function s(c,h){var l=u(c,a),p=u(h,a);return B(l,p)*o}return this.toArray(function(c){return c.sort(s)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&je(i,!0)&&i.limit>0){var a=i.valueMapper,u=pt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:u,range:i.range}}).then(function(s){var c=s.result;return a?c.map(a):c})}else{var o=[];return yt(i,function(s){return o.push(s)},r,i.table.core).then(function(){return o})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,je(n)?en(n,function(){var r=t;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):en(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),en(this._ctx,function(){var n=t;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},e.prototype.until=function(t,n){return qt(this._ctx,function(r,i,a){return t(r.value)?(i(a),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return qt(this._ctx,function(n){return t(n.value)}),qr(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&je(n,!0)&&n.limit>0)return this._read(function(i){var a=pt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return qt(this._ctx,function(i){var a=i.primaryKey.toString(),u=H(r,a);return r[a]=!0,!u}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof t=="function")a=t;else{var u=V(t),o=u.length;a=function(m){for(var g=!1,w=0;w<o;++w){var y=u[w],x=t[y],A=ie(m,y);x instanceof mt?(G(m,y,x.execute(A)),g=!0):A!==x&&(G(m,y,x),g=!0)}return g}}var s=r.table.core,c=s.schema.primaryKey,h=c.outbound,l=c.extractKey,p=200,_=n.db._options.modifyChunkSize;_&&(typeof _=="object"?p=_[s.name]||_["*"]||200:p=_);var f=[],v=0,d=[],b=function(m,g){var w=g.failures,y=g.numFailures;v+=m-y;for(var x=0,A=V(w);x<A.length;x++){var E=A[x];f.push(w[E])}};return n.clone().primaryKeys().then(function(m){var g=je(r)&&r.limit===1/0&&(typeof t!="function"||t===tn)&&{index:r.index,range:r.range},w=function(y){var x=Math.min(p,m.length-y);return s.getMany({trans:i,keys:m.slice(y,y+x),cache:"immutable"}).then(function(A){for(var E=[],T=[],R=h?[]:null,S=[],I=0;I<x;++I){var D=A[I],M={value:me(D),primKey:m[y+I]};a.call(M,M.value,M)!==!1&&(M.value==null?S.push(m[y+I]):!h&&B(l(D),l(M.value))!==0?(S.push(m[y+I]),E.push(M.value)):(T.push(M.value),h&&R.push(m[y+I])))}return Promise.resolve(E.length>0&&s.mutate({trans:i,type:"add",values:E}).then(function(O){for(var L in O.failures)S.splice(parseInt(L),1);b(E.length,O)})).then(function(){return(T.length>0||g&&typeof t=="object")&&s.mutate({trans:i,type:"put",keys:R,values:T,criteria:g,changeSpec:typeof t!="function"&&t,isAdditionalChunk:y>0}).then(function(O){return b(T.length,O)})}).then(function(){return(S.length>0||g&&t===tn)&&s.mutate({trans:i,type:"delete",keys:S,criteria:g,isAdditionalChunk:y>0}).then(function(O){return b(S.length,O)})}).then(function(){return m.length>y+x&&w(y+p)})})};return w(0).then(function(){if(f.length>0)throw new rt("Error modifying one or more objects",f,v,d);return m.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return je(t)&&(t.isPrimKey||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,a=n;return t.table.core.count({trans:r,query:{index:i,range:a}}).then(function(u){return t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(o){var s=o.failures;o.lastResult,o.results;var c=o.numFailures;if(c)throw new rt("Could not delete some values",Object.keys(s).map(function(h){return s[h]}),u-c);return u-c})})}):this.modify(tn)},e}(),tn=function(e,t){return t.value=null};function ti(e){return He(ei.prototype,function(n,r){this.db=e;var i=Hn,a=null;if(r)try{i=r()}catch(c){a=c}var u=n._ctx,o=u.table,s=o.hook.reading.fire;this._ctx={table:o,index:u.index,isPrimKey:!u.index||o.schema.primKey.keyPath&&u.index===o.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:u.or,valueMapper:s!==Ve?s:null}})}function ni(e,t){return e<t?-1:e===t?0:1}function ri(e,t){return e>t?-1:e===t?0:1}function J(e,t,n){var r=e instanceof er?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Ne(e){return new e.Collection(e,function(){return qn("")}).limit(0)}function ii(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function ai(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function ui(e,t,n,r,i,a){for(var u=Math.min(e.length,r.length),o=-1,s=0;s<u;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):o>=0?e.substr(0,o)+t[o]+n.substr(o+1):null;i(e[s],c)<0&&(o=s)}return u<r.length&&a==="next"?e+n.substr(e.length):u<e.length&&a==="prev"?e.substr(0,n.length):o<0?null:e.substr(0,o)+r[o]+n.substr(o+1)}function gt(e,t,n,r){var i,a,u,o,s,c,h,l=n.length;if(!n.every(function(v){return typeof v=="string"}))return J(e,$n);function p(v){i=ii(v),a=ai(v),u=v==="next"?ni:ri;var d=n.map(function(b){return{lower:a(b),upper:i(b)}}).sort(function(b,m){return u(b.lower,m.lower)});o=d.map(function(b){return b.upper}),s=d.map(function(b){return b.lower}),c=v,h=v==="next"?"":r}p("next");var _=new e.Collection(e,function(){return he(o[0],s[l-1]+r)});_._ondirectionchange=function(v){p(v)};var f=0;return _._addAlgorithm(function(v,d,b){var m=v.key;if(typeof m!="string")return!1;var g=a(m);if(t(g,s,f))return!0;for(var w=null,y=f;y<l;++y){var x=ui(m,g,o[y],s[y],u,c);x===null&&w===null?f=y+1:(w===null||u(w,x)>0)&&(w=x)}return d(w!==null?function(){v.continue(w+h)}:b),!1}),_}function he(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function qn(e){return{type:1,lower:e,upper:e}}var er=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?Ne(this):new this.Collection(this,function(){return he(t,n,!r,!i)})}catch(a){return J(this,ue)}},e.prototype.equals=function(t){return t==null?J(this,ue):new this.Collection(this,function(){return qn(t)})},e.prototype.above=function(t){return t==null?J(this,ue):new this.Collection(this,function(){return he(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?J(this,ue):new this.Collection(this,function(){return he(t,void 0,!1)})},e.prototype.below=function(t){return t==null?J(this,ue):new this.Collection(this,function(){return he(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?J(this,ue):new this.Collection(this,function(){return he(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?J(this,$n):this.between(t,t+Ke,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):gt(this,function(n,r){return n.indexOf(r[0])===0},[t],Ke)},e.prototype.equalsIgnoreCase=function(t){return gt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=ae.apply(De,arguments);return t.length===0?Ne(this):gt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=ae.apply(De,arguments);return t.length===0?Ne(this):gt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Ke)},e.prototype.anyOf=function(){var t=this,n=ae.apply(De,arguments),r=this._cmp;try{n.sort(r)}catch(u){return J(this,ue)}if(n.length===0)return Ne(this);var i=new this.Collection(this,function(){return he(n[0],n[n.length-1])});i._ondirectionchange=function(u){r=u==="next"?t._ascending:t._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(u,o,s){for(var c=u.key;r(c,n[a])>0;)if(++a,a===n.length)return o(s),!1;return r(c,n[a])===0?!0:(o(function(){u.continue(n[a])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[Gt,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=ae.apply(De,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch(r){return J(this,ue)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Gt,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,a=this._ascending,u=this._descending,o=this._min,s=this._max;if(t.length===0)return Ne(this);if(!t.every(function(y){return y[0]!==void 0&&y[1]!==void 0&&a(y[0],y[1])<=0}))return J(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",C.InvalidArgument);var c=!n||n.includeLowers!==!1,h=n&&n.includeUppers===!0;function l(y,x){for(var A=0,E=y.length;A<E;++A){var T=y[A];if(i(x[0],T[1])<0&&i(x[1],T[0])>0){T[0]=o(T[0],x[0]),T[1]=s(T[1],x[1]);break}}return A===E&&y.push(x),y}var p=a;function _(y,x){return p(y[0],x[0])}var f;try{f=t.reduce(l,[]),f.sort(_)}catch(y){return J(this,ue)}var v=0,d=h?function(y){return a(y,f[v][1])>0}:function(y){return a(y,f[v][1])>=0},b=c?function(y){return u(y,f[v][0])>0}:function(y){return u(y,f[v][0])>=0};function m(y){return!d(y)&&!b(y)}var g=d,w=new this.Collection(this,function(){return he(f[0][0],f[f.length-1][1],!c,!h)});return w._ondirectionchange=function(y){y==="next"?(g=d,p=a):(g=b,p=u),f.sort(_)},w._addAlgorithm(function(y,x,A){for(var E=y.key;g(E);)if(++v,v===f.length)return x(A),!1;return m(E)?!0:(r._cmp(E,f[v][1])===0||r._cmp(E,f[v][0])===0||x(function(){p===a?y.continue(f[v][0]):y.continue(f[v][1])}),!1)}),w},e.prototype.startsWithAnyOf=function(){var t=ae.apply(De,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?Ne(this):this.inAnyRange(t.map(function(n){return[n,n+Ke]})):J(this,"startsWithAnyOf() only works with strings")},e}();function oi(e){return He(er.prototype,function(n,r,i){if(this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i},this._cmp=this._ascending=B,this._descending=function(a,u){return B(u,a)},this._max=function(a,u){return B(a,u)>0?a:u},this._min=function(a,u){return B(a,u)<0?a:u},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new C.MissingAPI})}function te(e){return j(function(t){return Qe(t),e(t.target.error),!1})}function Qe(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Xe="storagemutated",nn="x-storagemutated-1",ve=$e(null,Xe),si=function(){function e(){}return e.prototype._lock=function(){return Le(!k.global),++this._reculock,this._reculock===1&&!k.global&&(k.lockOwnerFor=this),this},e.prototype._unlock=function(){if(Le(!k.global),--this._reculock===0)for(k.global||(k.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Ee(t[1],t[0])}catch(n){}}return this},e.prototype._locked=function(){return this._reculock&&k.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(Le(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new C.DatabaseClosed(i);case"MissingAPIError":throw new C.MissingAPI(i.message,i);default:throw new C.OpenFailed(i)}if(!this.active)throw new C.TransactionInactive;return Le(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=j(function(a){Qe(a),n._reject(t.error)}),t.onabort=j(function(a){Qe(a),n.active&&n._reject(new C.Abort(t.error)),n.active=!1,n.on("abort").fire(a)}),t.oncomplete=j(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&ve.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return z(new C.ReadOnly("Transaction is readonly"));if(!this.active)return z(new C.TransactionInactive);if(this._locked())return new K(function(u,o){i._blockedFuncs.push([function(){i._promise(t,n,r).then(u,o)},k])});if(r)return ce(function(){var u=new K(function(o,s){i._lock();var c=n(o,s,i);c&&c.then&&c.then(o,s)});return u.finally(function(){return i._unlock()}),u._lib=!0,u});var a=new K(function(u,o){var s=n(u,o,i);s&&s.then&&s.then(u,o)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=K.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function u(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=u)})()}var a=n._waitingFor;return new K(function(u,o){r.then(function(s){return n._waitingQueue.push(j(u.bind(null,s)))},function(s){return n._waitingQueue.push(j(o.bind(null,s)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new C.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(H(n,t))return n[t];var r=this.schema[t];if(!r)throw new C.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function ci(e){return He(si.prototype,function(n,r,i,a,u){var o=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=$e(this,"complete","error","abort"),this.parent=u||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new K(function(s,c){o._resolve=s,o._reject=c}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(s){var c=o.active;return o.active=!1,o.on.error.fire(s),o.parent?o.parent._reject(s):c&&o.idbtrans&&o.idbtrans.abort(),z(s)})})}function rn(e,t,n,r,i,a,u){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!u?"&":"")+(r?"*":"")+(i?"++":"")+tr(t)}}function tr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function an(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:_r(n,function(r){return[r.name,r]})}}function li(e){return e.length===1?e[0]:e}var Ge=function(e){try{return e.only([[]]),Ge=function(){return[[]]},[[]]}catch(t){return Ge=function(){return Ke},Ke}};function un(e){return e==null?function(){}:typeof e=="string"?fi(e):function(t){return ie(t,e)}}function fi(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return ie(n,e)}}function nr(e){return[].slice.call(e)}var hi=0;function Je(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function vi(e,t,n){function r(l,p){var _=nr(l.objectStoreNames);return{schema:{name:l.name,tables:_.map(function(f){return p.objectStore(f)}).map(function(f){var v=f.keyPath,d=f.autoIncrement,b=N(v),m=v==null,g={},w={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:m,compound:b,keyPath:v,autoIncrement:d,unique:!0,extractKey:un(v)},indexes:nr(f.indexNames).map(function(y){return f.index(y)}).map(function(y){var x=y.name,A=y.unique,E=y.multiEntry,T=y.keyPath,R=N(T),S={name:x,compound:R,keyPath:T,unique:A,multiEntry:E,extractKey:un(T)};return g[Je(T)]=S,S}),getIndexByKeyPath:function(y){return g[Je(y)]}};return g[":id"]=w.primaryKey,v!=null&&(g[Je(v)]=w.primaryKey),w})},hasGetAll:_.length>0&&"getAll"in p.objectStore(_[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var p=l.lower,_=l.upper,f=l.lowerOpen,v=l.upperOpen,d=p===void 0?_===void 0?null:t.upperBound(_,!!v):_===void 0?t.lowerBound(p,!!f):t.bound(p,_,!!f,!!v);return d}function a(l){var p=l.name;function _(d){var b=d.trans,m=d.type,g=d.keys,w=d.values,y=d.range;return new Promise(function(x,A){x=j(x);var E=b.objectStore(p),T=E.keyPath==null,R=m==="put"||m==="add";if(!R&&m!=="delete"&&m!=="deleteRange")throw new Error("Invalid operation type: "+m);var S=(g||w||{length:1}).length;if(g&&w&&g.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(S===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var I,D=[],M=[],O=0,L=function(re){++O,Qe(re)};if(m==="deleteRange"){if(y.type===4)return x({numFailures:O,failures:M,results:[],lastResult:void 0});y.type===3?D.push(I=E.clear()):D.push(I=E.delete(i(y)))}else{var U=R?T?[w,g]:[w,null]:[g,null],ne=U[0],Q=U[1];if(R)for(var Z=0;Z<S;++Z)D.push(I=Q&&Q[Z]!==void 0?E[m](ne[Z],Q[Z]):E[m](ne[Z])),I.onerror=L;else for(var Z=0;Z<S;++Z)D.push(I=E[m](ne[Z])),I.onerror=L}var ye=function(re){var et=re.target.result;D.forEach(function(q,Dt){return q.error!=null&&(M[Dt]=q.error)}),x({numFailures:O,failures:M,results:m==="delete"?g:D.map(function(q){return q.result}),lastResult:et})};I.onerror=function(re){L(re),ye(re)},I.onsuccess=ye})}function f(d){var b=d.trans,m=d.values,g=d.query,w=d.reverse,y=d.unique;return new Promise(function(x,A){x=j(x);var E=g.index,T=g.range,R=b.objectStore(p),S=E.isPrimaryKey?R:R.index(E.name),I=w?y?"prevunique":"prev":y?"nextunique":"next",D=m||!("openKeyCursor"in S)?S.openCursor(i(T),I):S.openKeyCursor(i(T),I);D.onerror=te(A),D.onsuccess=j(function(M){var O=D.result;if(!O){x(null);return}O.___id=++hi,O.done=!1;var L=O.continue.bind(O),U=O.continuePrimaryKey;U&&(U=U.bind(O));var ne=O.advance.bind(O),Q=function(){throw new Error("Cursor not started")},Z=function(){throw new Error("Cursor not stopped")};O.trans=b,O.stop=O.continue=O.continuePrimaryKey=O.advance=Q,O.fail=j(A),O.next=function(){var ye=this,re=1;return this.start(function(){return re--?ye.continue():ye.stop()}).then(function(){return ye})},O.start=function(ye){var re=new Promise(function(q,Dt){q=j(q),D.onerror=te(Dt),O.fail=Dt,O.stop=function(Zi){O.stop=O.continue=O.continuePrimaryKey=O.advance=Z,q(Zi)}}),et=function(){if(D.result)try{ye()}catch(q){O.fail(q)}else O.done=!0,O.start=function(){throw new Error("Cursor behind last entry")},O.stop()};return D.onsuccess=j(function(q){D.onsuccess=et,et()}),O.continue=L,O.continuePrimaryKey=U,O.advance=ne,et(),re},x(O)},A)})}function v(d){return function(b){return new Promise(function(m,g){m=j(m);var w=b.trans,y=b.values,x=b.limit,A=b.query,E=x===1/0?void 0:x,T=A.index,R=A.range,S=w.objectStore(p),I=T.isPrimaryKey?S:S.index(T.name),D=i(R);if(x===0)return m({result:[]});if(d){var M=y?I.getAll(D,E):I.getAllKeys(D,E);M.onsuccess=function(ne){return m({result:ne.target.result})},M.onerror=te(g)}else{var O=0,L=y||!("openKeyCursor"in I)?I.openCursor(D):I.openKeyCursor(D),U=[];L.onsuccess=function(ne){var Q=L.result;if(!Q)return m({result:U});if(U.push(y?Q.value:Q.primaryKey),++O===x)return m({result:U});Q.continue()},L.onerror=te(g)}})}}return{name:p,schema:l,mutate:_,getMany:function(d){var b=d.trans,m=d.keys;return new Promise(function(g,w){g=j(g);for(var y=b.objectStore(p),x=m.length,A=new Array(x),E=0,T=0,R,S=function(O){var L=O.target;(A[L._pos]=L.result)!=null,++T===E&&g(A)},I=te(w),D=0;D<x;++D){var M=m[D];M!=null&&(R=y.get(m[D]),R._pos=D,R.onsuccess=S,R.onerror=I,++E)}E===0&&g(A)})},get:function(d){var b=d.trans,m=d.key;return new Promise(function(g,w){g=j(g);var y=b.objectStore(p),x=y.get(m);x.onsuccess=function(A){return g(A.target.result)},x.onerror=te(w)})},query:v(s),openCursor:f,count:function(d){var b=d.query,m=d.trans,g=b.index,w=b.range;return new Promise(function(y,x){var A=m.objectStore(p),E=g.isPrimaryKey?A:A.index(g.name),T=i(w),R=T?E.count(T):E.count();R.onsuccess=j(function(S){return y(S.target.result)}),R.onerror=te(x)})}}}var u=r(e,n),o=u.schema,s=u.hasGetAll,c=o.tables.map(function(l){return a(l)}),h={};return c.forEach(function(l){return h[l.name]=l}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(l){var p=h[l];if(!p)throw new Error("Table '".concat(l,"' not found"));return h[l]},MIN_KEY:-1/0,MAX_KEY:Ge(t),schema:o}}function di(e,t){return t.reduce(function(n,r){var i=r.create;return P(P({},n),i(n))},e)}function pi(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=di(vi(t,i,r),e.dbcore);return{dbcore:a}}function bt(e,t){var n=t.db,r=pi(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(function(i){var a=i.name;e.core.schema.tables.some(function(u){return u.name===a})&&(i.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=i.core))})}function wt(e,t,n,r){n.forEach(function(i){var a=r[i];t.forEach(function(u){var o=Sn(u,i);(!o||"value"in o&&o.value===void 0)&&(u===e.Transaction.prototype||u instanceof e.Transaction?oe(u,i,{get:function(){return this.table(i)},set:function(s){An(this,i,{value:s,writable:!0,configurable:!0,enumerable:!0})}}):u[i]=new e.Table(i,a))})})}function on(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function yi(e,t){return e._cfg.version-t._cfg.version}function mi(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=an("$meta",ir("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var u=a._reject.bind(a),o=k.transless||k;ce(function(){if(k.trans=a,k.transless=o,t===0)V(i).forEach(function(s){cn(n,s,i[s].primKey,i[s].indexes)}),bt(e,n),K.follow(function(){return e.on.populate.fire(a)}).catch(u);else return bt(e,n),bi(e,a,t).then(function(s){return wi(e,s,a,n)}).catch(u)})}function gi(e,t){rr(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=xt(e,e.idbdb,t);Et(e,e._dbSchema,t);for(var r=sn(n,e._dbSchema),i=function(c){if(c.change.length||c.recreate)return console.warn("Unable to patch indexes of table ".concat(c.name," because it has changes on the type of index or primary key.")),{value:void 0};var h=t.objectStore(c.name);c.add.forEach(function(l){ee&&console.debug("Dexie upgrade patch: Creating missing index ".concat(c.name,".").concat(l.src)),_t(h,l)})},a=0,u=r.change;a<u.length;a++){var o=u[a],s=i(o);if(typeof s=="object")return s.value}}function bi(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(r){return r!=null?r:n}):K.resolve(n)}function wi(e,t,n,r){var i=[],a=e._versions,u=e._dbSchema=xt(e,e.idbdb,r),o=a.filter(function(c){return c._cfg.version>=t});if(o.length===0)return K.resolve();o.forEach(function(c){i.push(function(){var h=u,l=c._cfg.dbschema;Et(e,h,r),Et(e,l,r),u=e._dbSchema=l;var p=sn(h,l);p.add.forEach(function(m){cn(r,m[0],m[1].primKey,m[1].indexes)}),p.change.forEach(function(m){if(m.recreate)throw new C.Upgrade("Not yet support for changing primary key");var g=r.objectStore(m.name);m.add.forEach(function(w){return _t(g,w)}),m.change.forEach(function(w){g.deleteIndex(w.name),_t(g,w)}),m.del.forEach(function(w){return g.deleteIndex(w)})});var _=c._cfg.contentUpgrade;if(_&&c._cfg.version>t){bt(e,r),n._memoizedTables={};var f=Cn(l);p.del.forEach(function(m){f[m]=h[m]}),on(e,[e.Transaction.prototype]),wt(e,[e.Transaction.prototype],V(f),f),n.schema=f;var v=Mt(_);v&&Me();var d,b=K.follow(function(){if(d=_(n),d&&v){var m=le.bind(null,null);d.then(m,m)}});return d&&typeof d.then=="function"?K.resolve(d):b.then(function(){return d})}}),i.push(function(h){var l=c._cfg.dbschema;_i(l,h),on(e,[e.Transaction.prototype]),wt(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),i.push(function(h){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===c._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(l){return l!=="$meta"})):h.objectStore("$meta").put(c._cfg.version,"version"))})});function s(){return i.length?K.resolve(i.shift()(n.idbtrans)).then(s):K.resolve()}return s().then(function(){rr(u,r)})}function sn(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],a=t[r];if(!i)n.add.push([r,a]);else{var u={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)u.recreate=!0,n.change.push(u);else{var o=i.idxByName,s=a.idxByName,c=void 0;for(c in o)s[c]||u.del.push(c);for(c in s){var h=o[c],l=s[c];h?h.src!==l.src&&u.change.push(l):u.add.push(l)}(u.del.length>0||u.add.length>0||u.change.length>0)&&n.change.push(u)}}}return n}function cn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return _t(i,a)}),i}function rr(e,t){V(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(ee&&console.debug("Dexie: Creating missing table",n),cn(t,n,e[n].primKey,e[n].indexes))})}function _i(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function _t(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function xt(e,t,n){var r={},i=nt(t.objectStoreNames,0);return i.forEach(function(a){for(var u=n.objectStore(a),o=u.keyPath,s=rn(tr(o),o||"",!0,!1,!!u.autoIncrement,o&&typeof o!="string",!0),c=[],h=0;h<u.indexNames.length;++h){var l=u.index(u.indexNames[h]);o=l.keyPath;var p=rn(l.name,o,!!l.unique,!!l.multiEntry,!1,o&&typeof o!="string",!1);c.push(p)}r[a]=an(a,s,c)}),r}function xi(e,t,n){e.verno=t.version/10;var r=e._dbSchema=xt(e,t,n);e._storeNames=nt(t.objectStoreNames,0),wt(e,[e._allTables],V(r),r)}function Ei(e,t){var n=xt(e,e.idbdb,t),r=sn(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Et(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],u=n.objectStore(a);e._hasGetAll="getAll"in u;for(var o=0;o<u.indexNames.length;++o){var s=u.indexNames[o],c=u.index(s).keyPath,h=typeof c=="string"?c:"["+nt(c).join("+")+"]";if(t[a]){var l=t[a].idxByName[h];l&&(l.name=s,delete t[a].idxByName[h],t[a].idxByName[s]=l)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Y.WorkerGlobalScope&&Y instanceof Y.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ir(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return rn(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),N(i),n===0)})}var Ki=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){V(t).forEach(function(r){if(t[r]!==null){var i=ir(t[r]),a=i.shift();if(a.unique=!0,a.multi)throw new C.Schema("Primary key cannot be multi-valued");i.forEach(function(u){if(u.auto)throw new C.Schema("Only primary key can be marked as autoIncrement (++)");if(!u.keyPath)throw new C.Schema("Index must have a name and cannot be an empty string")}),n[r]=an(r,a,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?X(this._cfg.storesSource,t):t;var r=n._versions,i={},a={};return r.forEach(function(u){X(i,u._cfg.storesSource),a=u._cfg.dbschema={},u._parseStoresSpec(i,a)}),n._dbSchema=a,on(n,[n._allTables,n,n.Transaction.prototype]),wt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],V(a),a),n._storeNames=V(a),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Nt(this._cfg.contentUpgrade||F,t),this},e}();function Ai(e){return He(Ki.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ln(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new qe(vt,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function fn(e){return e&&typeof e.databases=="function"}function Si(e){var t=e.indexedDB,n=e.IDBKeyRange;return fn(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==vt})}):ln(t,n).toCollection().primaryKeys()}function ki(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!fn(n)&&t!==vt&&ln(n,r).put({name:t}).catch(F)}function Oi(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!fn(n)&&t!==vt&&ln(n,r).delete(t).catch(F)}function hn(e){return ce(function(){return k.letThrough=!0,e()})}function Ci(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}var vn;function dn(e){return!("from"in e)}var $=function(e,t){if(this)X(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new $;return e&&"d"in e&&X(n,e),n}};Ce($.prototype,(vn={add:function(e){return Kt(this,e),this},addKey:function(e){return Ze(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Ze(t,n,n)}),this},hasKey:function(e){var t=At(this).next(e).value;return t&&B(t.from,e)<=0&&B(t.to,e)>=0}},vn[Bt]=function(){return At(this)},vn));function Ze(e,t,n){var r=B(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(dn(e))return X(e,{from:t,to:n,d:1});var i=e.l,a=e.r;if(B(n,e.from)<0)return i?Ze(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},ar(e);if(B(t,e.to)>0)return a?Ze(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},ar(e);B(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),B(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var u=!e.r;i&&!e.l&&Kt(e,i),a&&u&&Kt(e,a)}}function Kt(e,t){function n(r,i){var a=i.from,u=i.to,o=i.l,s=i.r;Ze(r,a,u),o&&n(r,o),s&&n(r,s)}dn(t)||n(e,t)}function Ti(e,t){var n=At(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=At(e),u=a.next(i.from),o=u.value;!r.done&&!u.done;){if(B(o.from,i.to)<=0&&B(o.to,i.from)>=0)return!0;B(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(u=a.next(i.from)).value}return!1}function At(e){var t=dn(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&B(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||B(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function ar(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",u=P({},e),o=e[i];e.from=o.from,e.to=o.to,e[i]=o[i],u[i]=o[a],e[a]=u,u.d=ur(u)}e.d=ur(e)}function ur(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function St(e,t){return V(t).forEach(function(n){e[n]?Kt(e[n],t[n]):e[n]=Pn(t[n])}),e}function pn(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Ti(t[n],e[n])})}var Se={},yn={},mn=!1;function kt(e,t){St(yn,e),mn||(mn=!0,setTimeout(function(){mn=!1;var n=yn;yn={},gn(n,!1)},0))}function gn(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(Se);r<i.length;r++){var a=i[r];or(a,e,n,t)}else for(var u in e){var o=/^idb\:\/\/(.*)\/(.*)\//.exec(u);if(o){var s=o[1],c=o[2],a=Se["idb://".concat(s,"/").concat(c)];a&&or(a,e,n,t)}}n.forEach(function(h){return h()})}function or(e,t,n,r){for(var i=[],a=0,u=Object.entries(e.queries.query);a<u.length;a++){for(var o=u[a],s=o[0],c=o[1],h=[],l=0,p=c;l<p.length;l++){var _=p[l];pn(t,_.obsSet)?_.subscribers.forEach(function(b){return n.add(b)}):r&&h.push(_)}r&&i.push([s,h])}if(r)for(var f=0,v=i;f<v.length;f++){var d=v[f],s=d[0],h=d[1];e.queries.query[s]=h}}function Di(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?z(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(e.verno*10),a=!1;function u(){if(t.openCanceller!==r)throw new C.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,s=null,c=!1,h=function(){return new K(function(l,p){if(u(),!n)throw new C.MissingAPI;var _=e.name,f=t.autoSchema||!i?n.open(_):n.open(_,i);if(!f)throw new C.MissingAPI;f.onerror=te(p),f.onblocked=j(e._fireOnBlocked),f.onupgradeneeded=j(function(v){if(s=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=Qe,s.abort(),f.result.close();var d=n.deleteDatabase(_);d.onsuccess=d.onerror=j(function(){p(new C.NoSuchDatabase("Database ".concat(_," doesnt exist")))})}else{s.onerror=te(p);var b=v.oldVersion>Math.pow(2,62)?0:v.oldVersion;c=b<1,e.idbdb=f.result,a&&gi(e,s),mi(e,b/10,s,p)}},p),f.onsuccess=j(function(){s=null;var v=e.idbdb=f.result,d=nt(v.objectStoreNames);if(d.length>0)try{var b=v.transaction(li(d),"readonly");if(t.autoSchema)xi(e,v,b);else if(Et(e,e._dbSchema,b),!Ei(e,b)&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),v.close(),i=v.version+1,a=!0,l(h());bt(e,b)}catch(m){}Fe.push(e),v.onversionchange=j(function(m){t.vcFired=!0,e.on("versionchange").fire(m)}),v.onclose=j(function(m){e.on("close").fire(m)}),c&&ki(e._deps,_),l()},p)}).catch(function(l){switch(l==null?void 0:l.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),h();break;case"VersionError":if(i>0)return i=0,h();break}return K.reject(l)})};return K.race([r,(typeof navigator=="undefined"?K.resolve():Ci()).then(h)]).then(function(){return u(),t.onReadyBeingFired=[],K.resolve(hn(function(){return e.on.ready.fire(e.vip)})).then(function l(){if(t.onReadyBeingFired.length>0){var p=t.onReadyBeingFired.reduce(Nt,F);return t.onReadyBeingFired=[],K.resolve(hn(function(){return p(e.vip)})).then(l)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(l){t.dbOpenError=l;try{s&&s.abort()}catch(p){}return r===t.openCanceller&&e._close(),z(l)}).finally(function(){t.openComplete=!0,o()}).then(function(){if(c){var l={};e.tables.forEach(function(p){p.schema.indexes.forEach(function(_){_.name&&(l["idb://".concat(e.name,"/").concat(p.name,"/").concat(_.name)]=new $(-1/0,[[[]]]))}),l["idb://".concat(e.name,"/").concat(p.name,"/")]=l["idb://".concat(e.name,"/").concat(p.name,"/:dels")]=new $(-1/0,[[[]]])}),ve(Xe).fire(l),gn(l,!0)}return e})}function bn(e){var t=function(u){return e.next(u)},n=function(u){return e.throw(u)},r=a(t),i=a(n);function a(u){return function(o){var s=u(o),c=s.value;return s.done?c:!c||typeof c.then!="function"?N(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return a(t)()}function Pi(e,t,n){var r=arguments.length;if(r<2)throw new C.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=Tn(i);return[e,a,n]}function sr(e,t,n,r,i){return K.resolve().then(function(){var a=k.transless||k,u=e._createTransaction(t,n,e._dbSchema,r);u.explicit=!0;var o={trans:u,transless:a};if(r)u.idbtrans=r.idbtrans;else try{u.create(),u.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(l){return l.name===jt.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return sr(e,t,n,null,i)})):z(l)}var s=Mt(i);s&&Me();var c,h=K.follow(function(){if(c=i.call(u,u),c)if(s){var l=le.bind(null,null);c.then(l,l)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=bn(c))},o);return(c&&typeof c.then=="function"?K.resolve(c).then(function(l){return u.active?l:z(new C.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):h.then(function(){return c})).then(function(l){return r&&u._resolve(),u._completion.then(function(){return l})}).catch(function(l){return u._reject(l),z(l)})})}function Ot(e,t,n){for(var r=N(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function Ii(e){return P(P({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function u(v,d,b){var m=Je(v),g=i[m]=i[m]||[],w=v==null?0:typeof v=="string"?1:v.length,y=d>0,x=P(P({},b),{name:y?"".concat(m,"(virtual-from:").concat(b.name,")"):b.name,lowLevelIndex:b,isVirtual:y,keyTail:d,keyLength:w,extractKey:un(v),unique:!y&&b.unique});if(g.push(x),x.isPrimaryKey||a.push(x),w>1){var A=w===2?v[0]:v.slice(0,w-1);u(A,d+1,b)}return g.sort(function(E,T){return E.keyTail-T.keyTail}),x}var o=u(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[o];for(var s=0,c=r.indexes;s<c.length;s++){var h=c[s];u(h.keyPath,0,h)}function l(v){var d=i[Je(v)];return d&&d[0]}function p(v,d){return{type:v.type===1?2:v.type,lower:Ot(v.lower,v.lowerOpen?e.MAX_KEY:e.MIN_KEY,d),lowerOpen:!0,upper:Ot(v.upper,v.upperOpen?e.MIN_KEY:e.MAX_KEY,d),upperOpen:!0}}function _(v){var d=v.query.index;return d.isVirtual?P(P({},v),{query:{index:d.lowLevelIndex,range:p(v.query.range,d.keyTail)}}):v}var f=P(P({},n),{schema:P(P({},r),{primaryKey:o,indexes:a,getIndexByKeyPath:l}),count:function(v){return n.count(_(v))},query:function(v){return n.query(_(v))},openCursor:function(v){var d=v.query.index,b=d.keyTail,m=d.isVirtual,g=d.keyLength;if(!m)return n.openCursor(v);function w(y){function x(E){E!=null?y.continue(Ot(E,v.reverse?e.MAX_KEY:e.MIN_KEY,b)):v.unique?y.continue(y.key.slice(0,g).concat(v.reverse?e.MIN_KEY:e.MAX_KEY,b)):y.continue()}var A=Object.create(y,{continue:{value:x},continuePrimaryKey:{value:function(E,T){y.continuePrimaryKey(Ot(E,e.MAX_KEY,b),T)}},primaryKey:{get:function(){return y.primaryKey}},key:{get:function(){var E=y.key;return g===1?E[0]:E.slice(0,g)}},value:{get:function(){return y.value}}});return A}return n.openCursor(_(v)).then(function(y){return y&&w(y)})}});return f}})}var Ri={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ii};function wn(e,t,n,r){return n=n||{},r=r||"",V(e).forEach(function(i){if(!H(t,i))n[r+i]=void 0;else{var a=e[i],u=t[i];if(typeof a=="object"&&typeof u=="object"&&a&&u){var o=Rt(a),s=Rt(u);o!==s?n[r+i]=t[i]:o==="Object"?wn(a,u,n,r+i+"."):a!==u&&(n[r+i]=t[i])}else a!==u&&(n[r+i]=t[i])}}),V(t).forEach(function(i){H(e,i)||(n[r+i]=t[i])}),n}function _n(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Bi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return P(P({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=P(P({},n),{mutate:function(a){var u=k.trans,o=u.table(t).hook,s=o.deleting,c=o.creating,h=o.updating;switch(a.type){case"add":if(c.fire===F)break;return u._promise("readwrite",function(){return l(a)},!0);case"put":if(c.fire===F&&h.fire===F)break;return u._promise("readwrite",function(){return l(a)},!0);case"delete":if(s.fire===F)break;return u._promise("readwrite",function(){return l(a)},!0);case"deleteRange":if(s.fire===F)break;return u._promise("readwrite",function(){return p(a)},!0)}return n.mutate(a);function l(f){var v=k.trans,d=f.keys||_n(r,f);if(!d)throw new Error("Keys missing");return f=f.type==="add"||f.type==="put"?P(P({},f),{keys:d}):P({},f),f.type!=="delete"&&(f.values=tt([],f.values,!0)),f.keys&&(f.keys=tt([],f.keys,!0)),Mi(n,f,d).then(function(b){var m=d.map(function(g,w){var y=b[w],x={onerror:null,onsuccess:null};if(f.type==="delete")s.fire.call(x,g,y,v);else if(f.type==="add"||y===void 0){var A=c.fire.call(x,g,f.values[w],v);g==null&&A!=null&&(g=A,f.keys[w]=g,r.outbound||G(f.values[w],r.keyPath,g))}else{var E=wn(y,f.values[w]),T=h.fire.call(x,E,g,y,v);if(T){var R=f.values[w];Object.keys(T).forEach(function(S){H(R,S)?R[S]=T[S]:G(R,S,T[S])})}}return x});return n.mutate(f).then(function(g){for(var w=g.failures,y=g.results,x=g.numFailures,A=g.lastResult,E=0;E<d.length;++E){var T=y?y[E]:d[E],R=m[E];T==null?R.onerror&&R.onerror(w[E]):R.onsuccess&&R.onsuccess(f.type==="put"&&b[E]?f.values[E]:T)}return{failures:w,results:y,numFailures:x,lastResult:A}}).catch(function(g){return m.forEach(function(w){return w.onerror&&w.onerror(g)}),Promise.reject(g)})})}function p(f){return _(f.trans,f.range,1e4)}function _(f,v,d){return n.query({trans:f,values:!1,query:{index:r,range:v},limit:d}).then(function(b){var m=b.result;return l({type:"delete",keys:m,trans:f}).then(function(g){return g.numFailures>0?Promise.reject(g.failures[0]):m.length<d?{failures:[],numFailures:0,lastResult:void 0}:_(f,P(P({},v),{lower:m[m.length-1],lowerOpen:!0}),d)})})}}});return i}})}};function Mi(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function cr(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)B(t.keys[i],e[a])===0&&(r.push(n?me(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch(u){return null}}var Fi={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return P(P({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=cr(r.keys,r.trans._cache,r.cache==="clone");return i?K.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?me(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function lr(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function fr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var ji={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new $(e.MIN_KEY,e.MAX_KEY);return P(P({},e),{transaction:function(r,i,a){if(k.subscr&&i!=="readonly")throw new C.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(k.querier));return e.transaction(r,i,a)},table:function(r){var i=e.table(r),a=i.schema,u=a.primaryKey,o=a.indexes,s=u.extractKey,c=u.outbound,h=u.autoIncrement&&o.filter(function(f){return f.compound&&f.keyPath.includes(u.keyPath)}),l=P(P({},i),{mutate:function(f){var v,d,b=f.trans,m=f.mutatedParts||(f.mutatedParts={}),g=function(D){var M="idb://".concat(t,"/").concat(r,"/").concat(D);return m[M]||(m[M]=new $)},w=g(""),y=g(":dels"),x=f.type,A=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[_n(u,f).filter(function(D){return D}),f.values]:[],E=A[0],T=A[1],R=f.trans._cache;if(N(E)){w.addKeys(E);var S=x==="delete"||E.length===T.length?cr(E,R):null;S||y.addKeys(E),(S||T)&&Ni(g,a,S,T)}else if(E){var I={from:(v=E.lower)!==null&&v!==void 0?v:e.MIN_KEY,to:(d=E.upper)!==null&&d!==void 0?d:e.MAX_KEY};y.add(I),w.add(I)}else w.add(n),y.add(n),a.indexes.forEach(function(D){return g(D.name).add(n)});return i.mutate(f).then(function(D){return E&&(f.type==="add"||f.type==="put")&&(w.addKeys(D.results),h&&h.forEach(function(M){for(var O=f.values.map(function(Q){return M.extractKey(Q)}),L=M.keyPath.findIndex(function(Q){return Q===u.keyPath}),U=0,ne=D.results.length;U<ne;++U)O[U][L]=D.results[U];g(M.name).addKeys(O)})),b.mutatedParts=St(b.mutatedParts||{},m),D})}}),p=function(f){var v,d,b=f.query,m=b.index,g=b.range;return[m,new $((v=g.lower)!==null&&v!==void 0?v:e.MIN_KEY,(d=g.upper)!==null&&d!==void 0?d:e.MAX_KEY)]},_={get:function(f){return[u,new $(f.key)]},getMany:function(f){return[u,new $().addKeys(f.keys)]},count:p,query:p,openCursor:p};return V(_).forEach(function(f){l[f]=function(v){var d=k.subscr,b=!!d,m=lr(k,i)&&fr(f,v),g=m?v.obsSet={}:d;if(b){var w=function(S){var I="idb://".concat(t,"/").concat(r,"/").concat(S);return g[I]||(g[I]=new $)},y=w(""),x=w(":dels"),A=_[f](v),E=A[0],T=A[1];if(f==="query"&&E.isPrimaryKey&&!v.values?x.add(T):w(E.name||"").add(T),!E.isPrimaryKey)if(f==="count")x.add(n);else{var R=f==="query"&&c&&v.values&&i.query(P(P({},v),{values:!1}));return i[f].apply(this,arguments).then(function(S){if(f==="query"){if(c&&v.values)return R.then(function(O){var L=O.result;return y.addKeys(L),S});var I=v.values?S.result.map(s):S.result;v.values?y.addKeys(I):x.addKeys(I)}else if(f==="openCursor"){var D=S,M=v.values;return D&&Object.create(D,{key:{get:function(){return x.addKey(D.primaryKey),D.key}},primaryKey:{get:function(){var O=D.primaryKey;return x.addKey(O),O}},value:{get:function(){return M&&y.addKey(D.primaryKey),D.value}}})}return S})}}return i[f].apply(this,arguments)}}),l}})}};function Ni(e,t,n,r){function i(a){var u=e(a.name||"");function o(c){return c!=null?a.extractKey(c):null}var s=function(c){return a.multiEntry&&N(c)?c.forEach(function(h){return u.addKey(h)}):u.addKey(c)};(n||r).forEach(function(c,h){var l=n&&o(n[h]),p=r&&o(r[h]);B(l,p)!==0&&(l!=null&&s(l),p!=null&&s(p))})}t.indexes.forEach(i)}function hr(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(n.numFailures===r)return null;var i=P({},t);return N(i.keys)&&(i.keys=i.keys.filter(function(a,u){return!(u in n.failures)})),"values"in i&&N(i.values)&&(i.values=i.values.filter(function(a,u){return!(u in n.failures)})),i}function Li(e,t){return t.lower===void 0?!0:t.lowerOpen?B(e,t.lower)>0:B(e,t.lower)>=0}function zi(e,t){return t.upper===void 0?!0:t.upperOpen?B(e,t.upper)<0:B(e,t.upper)<=0}function xn(e,t){return Li(e,t)&&zi(e,t)}function vr(e,t,n,r,i,a){if(!n||n.length===0)return e;var u=t.query.index,o=u.multiEntry,s=t.query.range,c=r.schema.primaryKey,h=c.extractKey,l=u.extractKey,p=(u.lowLevelIndex||u).extractKey,_=n.reduce(function(f,v){var d=f,b=[];if(v.type==="add"||v.type==="put")for(var m=new $,g=v.values.length-1;g>=0;--g){var w=v.values[g],y=h(w);if(!m.hasKey(y)){var x=l(w);(o&&N(x)?x.some(function(S){return xn(S,s)}):xn(x,s))&&(m.addKey(y),b.push(w))}}switch(v.type){case"add":{var A=new $().addKeys(t.values?f.map(function(S){return h(S)}):f);d=f.concat(t.values?b.filter(function(S){var I=h(S);return A.hasKey(I)?!1:(A.addKey(I),!0)}):b.map(function(S){return h(S)}).filter(function(S){return A.hasKey(S)?!1:(A.addKey(S),!0)}));break}case"put":{var E=new $().addKeys(v.values.map(function(S){return h(S)}));d=f.filter(function(S){return!E.hasKey(t.values?h(S):S)}).concat(t.values?b:b.map(function(S){return h(S)}));break}case"delete":var T=new $().addKeys(v.keys);d=f.filter(function(S){return!T.hasKey(t.values?h(S):S)});break;case"deleteRange":var R=v.range;d=f.filter(function(S){return!xn(h(S),R)});break}return d},e);return _===e?e:(_.sort(function(f,v){return B(p(f),p(v))||B(h(f),h(v))}),t.limit&&t.limit<1/0&&(_.length>t.limit?_.length=t.limit:e.length===t.limit&&_.length<t.limit&&(i.dirty=!0)),a?Object.freeze(_):_)}function dr(e,t){return B(e.lower,t.lower)===0&&B(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Vi(e,t,n,r){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var i=B(e,t);if(i===0){if(n&&r)return 0;if(n)return 1;if(r)return-1}return i}function Wi(e,t,n,r){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var i=B(e,t);if(i===0){if(n&&r)return 0;if(n)return-1;if(r)return 1}return i}function Yi(e,t){return Vi(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&Wi(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function Ui(e,t,n,r){var i=Se["idb://".concat(e,"/").concat(t)];if(!i)return[];var a=i.queries[n];if(!a)return[null,!1,i,null];var u=r.query?r.query.index.name:null,o=a[u||""];if(!o)return[null,!1,i,null];switch(n){case"query":var s=o.find(function(l){return l.req.limit===r.limit&&l.req.values===r.values&&dr(l.req.query.range,r.query.range)});if(s)return[s,!0,i,o];var c=o.find(function(l){var p="limit"in l.req?l.req.limit:1/0;return p>=r.limit&&(r.values?l.req.values:!0)&&Yi(l.req.query.range,r.query.range)});return[c,!1,i,o];case"count":var h=o.find(function(l){return dr(l.req.query.range,r.query.range)});return[h,!!h,i,o]}}function $i(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){e.subscribers.delete(n),e.subscribers.size===0&&Hi(e,t)})}function Hi(e,t){setTimeout(function(){e.subscribers.size===0&&ge(t,e)},3e3)}var Qi={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,n=P(P({},e),{transaction:function(r,i,a){var u=e.transaction(r,i,a);if(i==="readwrite"){var o=new AbortController,s=o.signal,c=function(h){return function(){if(o.abort(),i==="readwrite"){for(var l=new Set,p=0,_=r;p<_.length;p++){var f=_[p],v=Se["idb://".concat(t,"/").concat(f)];if(v){var d=e.table(f),b=v.optimisticOps.filter(function(M){return M.trans===u});if(u._explicit&&h&&u.mutatedParts)for(var m=0,g=Object.values(v.queries.query);m<g.length;m++)for(var w=g[m],y=0,x=w.slice();y<x.length;y++){var A=x[y];pn(A.obsSet,u.mutatedParts)&&(ge(w,A),A.subscribers.forEach(function(M){return l.add(M)}))}else if(b.length>0){v.optimisticOps=v.optimisticOps.filter(function(M){return M.trans!==u});for(var E=0,T=Object.values(v.queries.query);E<T.length;E++)for(var w=T[E],R=0,S=w.slice();R<S.length;R++){var A=S[R];if(A.res!=null&&u.mutatedParts)if(h&&!A.dirty){var I=Object.isFrozen(A.res),D=vr(A.res,A.req,b,d,A,I);A.dirty?(ge(w,A),A.subscribers.forEach(function(L){return l.add(L)})):D!==A.res&&(A.res=D,A.promise=K.resolve({result:D}))}else A.dirty&&ge(w,A),A.subscribers.forEach(function(L){return l.add(L)})}}}}l.forEach(function(M){return M()})}}};u.addEventListener("abort",c(!1),{signal:s}),u.addEventListener("error",c(!1),{signal:s}),u.addEventListener("complete",c(!0),{signal:s})}return u},table:function(r){var i=e.table(r),a=i.schema.primaryKey,u=P(P({},i),{mutate:function(o){var s=k.trans;if(a.outbound||s.db._options.cache==="disabled"||s.explicit||s.idbtrans.mode!=="readwrite")return i.mutate(o);var c=Se["idb://".concat(t,"/").concat(r)];if(!c)return i.mutate(o);var h=i.mutate(o);return(o.type==="add"||o.type==="put")&&(o.values.length>=50||_n(a,o).some(function(l){return l==null}))?h.then(function(l){var p=P(P({},o),{values:o.values.map(function(f,v){var d;if(l.failures[v])return f;var b=!((d=a.keyPath)===null||d===void 0)&&d.includes(".")?me(f):P({},f);return G(b,a.keyPath,l.results[v]),b})}),_=hr(c,p,l);c.optimisticOps.push(_),queueMicrotask(function(){return o.mutatedParts&&kt(o.mutatedParts)})}):(c.optimisticOps.push(o),o.mutatedParts&&kt(o.mutatedParts),h.then(function(l){if(l.numFailures>0){ge(c.optimisticOps,o);var p=hr(c,o,l);p&&c.optimisticOps.push(p),o.mutatedParts&&kt(o.mutatedParts)}}),h.catch(function(){ge(c.optimisticOps,o),o.mutatedParts&&kt(o.mutatedParts)})),h},query:function(o){var s;if(!lr(k,i)||!fr("query",o))return i.query(o);var c=((s=k.trans)===null||s===void 0?void 0:s.db._options.cache)==="immutable",h=k,l=h.requery,p=h.signal,_=Ui(t,r,"query",o),f=_[0],v=_[1],d=_[2],b=_[3];if(f&&v)f.obsSet=o.obsSet;else{var m=i.query(o).then(function(g){var w=g.result;if(f&&(f.res=w),c){for(var y=0,x=w.length;y<x;++y)Object.freeze(w[y]);Object.freeze(w)}else g.result=me(w);return g}).catch(function(g){return b&&f&&ge(b,f),Promise.reject(g)});f={obsSet:o.obsSet,promise:m,subscribers:new Set,type:"query",req:o,dirty:!1},b?b.push(f):(b=[f],d||(d=Se["idb://".concat(t,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),d.queries.query[o.query.index.name||""]=b)}return $i(f,b,l,p),f.promise.then(function(g){return{result:vr(g.result,o,d==null?void 0:d.optimisticOps,i,f,c)}})}});return u}});return n}};function Ct(e,t){return new Proxy(e,{get:function(n,r,i){return r==="db"?t:Reflect.get(n,r,i)}})}var qe=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=P({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:F,dbReadyPromise:null,cancelOpen:F,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};u.dbReadyPromise=new K(function(s){u.dbReadyResolve=s}),u.openCanceller=new K(function(s,c){u.cancelOpen=c}),this._state=u,this.name=t,this.on=$e(this,"populate","blocked","versionchange","close",{ready:[Nt,F]}),this.on.ready.subscribe=kn(this.on.ready.subscribe,function(s){return function(c,h){e.vip(function(){var l=r._state;if(l.openComplete)l.dbOpenError||K.resolve().then(c),h&&s(c);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(c),h&&s(c);else{s(c);var p=r;h||s(function _(){p.on.ready.unsubscribe(c),p.on.ready.unsubscribe(_)})}})}}),this.Collection=ti(this),this.Table=Zr(this),this.Transaction=ci(this),this.Version=Ai(this),this.WhereClause=oi(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(s.oldVersion/10))}),this._maxKey=Ge(n.IDBKeyRange),this._createTransaction=function(s,c,h,l){return new r.Transaction(s,c,h,r._options.chromeTransactionDurability,l)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),Fe.filter(function(c){return c.name===r.name&&c!==r&&!c._state.vcFired}).map(function(c){return c.on("versionchange").fire(s)})},this.use(Fi),this.use(Qi),this.use(ji),this.use(Ri),this.use(Bi);var o=new Proxy(this,{get:function(s,c,h){if(c==="_vip")return!0;if(c==="table")return function(p){return Ct(r.table(p),o)};var l=Reflect.get(s,c,h);return l instanceof Gn?Ct(l,o):c==="tables"?l.map(function(p){return Ct(p,o)}):c==="_createTransaction"?function(){var p=l.apply(this,arguments);return Ct(p,o)}:l}});this.vip=o,a.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new C.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new C.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(yi),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||k.letThrough||this._vip)?t():new K(function(r,i){if(n._state.openComplete)return i(new C.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen){i(new C.DatabaseClosed);return}n.open().catch(F)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,a=t.name;a&&this.unuse({stack:n,name:a});var u=this._middlewares[n]||(this._middlewares[n]=[]);return u.push({stack:n,create:r,level:i==null?10:i,name:a}),u.sort(function(o,s){return o.level-s.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},e.prototype.open=function(){var t=this;return Ee(se,function(){return Di(t)})},e.prototype._close=function(){var t=this._state,n=Fe.indexOf(this);if(n>=0&&Fe.splice(n,1),this.idbdb){try{this.idbdb.close()}catch(r){}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new K(function(r){t.dbReadyResolve=r}),t.openCanceller=new K(function(r,i){t.cancelOpen=i}))},e.prototype.close=function(t){var n=t===void 0?{disableAutoOpen:!0}:t,r=n.disableAutoOpen,i=this._state;r?(i.isBeingOpened&&i.cancelOpen(new C.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new C.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},e.prototype.delete=function(t){var n=this;t===void 0&&(t={disableAutoOpen:!0});var r=arguments.length>0&&typeof arguments[0]!="object",i=this._state;return new K(function(a,u){var o=function(){n.close(t);var s=n._deps.indexedDB.deleteDatabase(n.name);s.onsuccess=j(function(){Oi(n._deps,n.name),a()}),s.onerror=te(u),s.onblocked=n._fireOnBlocked};if(r)throw new C.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return V(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Pi.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,a=k.trans;(!a||a.db!==this||t.indexOf("!")!==-1)&&(a=null);var u=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var o,s;try{if(s=n.map(function(h){var l=h instanceof i.Table?h.name:h;if(typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),t=="r"||t===Jt)o=Jt;else if(t=="rw"||t==Zt)o=Zt;else throw new C.InvalidArgument("Invalid transaction mode: "+t);if(a){if(a.mode===Jt&&o===Zt)if(u)a=null;else throw new C.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&s.forEach(function(h){if(a&&a.storeNames.indexOf(h)===-1)if(u)a=null;else throw new C.SubTransaction("Table "+h+" not included in parent transaction.")}),u&&a&&!a.active&&(a=null)}}catch(h){return a?a._promise(null,function(l,p){p(h)}):z(h)}var c=sr.bind(null,this,o,s,a,r);return a?a._promise(o,c,"lock"):k.trans?Ee(k.transless,function(){return i._whenReady(c)}):this._whenReady(c)},e.prototype.table=function(t){if(!H(this._allTables,t))throw new C.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e}(),Xi=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",Gi=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[Xi]=function(){return this},e}(),Tt;try{Tt={indexedDB:Y.indexedDB||Y.mozIndexedDB||Y.webkitIndexedDB||Y.msIndexedDB,IDBKeyRange:Y.IDBKeyRange||Y.webkitIDBKeyRange}}catch(e){Tt={indexedDB:null,IDBKeyRange:null}}function Ji(e){var t=!1,n,r=new Gi(function(i){var a=Mt(e);function u(b){var m=Re();try{a&&Me();var g=ce(e,b);return a&&(g=g.finally(le)),g}finally{m&&Be()}}var o=!1,s,c={},h={},l={get closed(){return o},unsubscribe:function(){o||(o=!0,s&&s.abort(),p&&ve.storagemutated.unsubscribe(v))}};i.start&&i.start(l);var p=!1,_=function(){return Qt(d)};function f(){return pn(h,c)}var v=function(b){St(c,b),f()&&_()},d=function(){if(!(o||!Tt.indexedDB)){c={};var b={};s&&s.abort(),s=new AbortController;var m={subscr:b,signal:s.signal,requery:_,querier:e,trans:null},g=u(m);Promise.resolve(g).then(function(w){t=!0,n=w,!(o||m.signal.aborted)&&(c={},h=b,!Ar(h)&&!p&&(ve(Xe,v),p=!0),Qt(function(){return!o&&i.next&&i.next(w)}))},function(w){t=!1,["DatabaseClosedError","AbortError"].includes(w==null?void 0:w.name)||o||Qt(function(){o||i.error&&i.error(w)})})}};return setTimeout(_,0),l});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var ke=qe;Ce(ke,P(P({},it),{delete:function(e){var t=new ke(e,{addons:[]});return t.delete()},exists:function(e){return new ke(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Si(ke.dependencies).then(e)}catch(t){return z(new C.MissingAPI)}},defineClass:function(){function e(t){X(this,t)}return e},ignoreTransaction:function(e){return k.trans?Ee(k.transless,e):e()},vip:hn,async:function(e){return function(){try{var t=bn(e.apply(this,arguments));return!t||typeof t.then!="function"?K.resolve(t):t}catch(n){return z(n)}}},spawn:function(e,t,n){try{var r=bn(e.apply(n,t||[]));return!r||typeof r.then!="function"?K.resolve(r):r}catch(i){return z(i)}},currentTransaction:{get:function(){return k.trans||null}},waitFor:function(e,t){var n=K.resolve(typeof e=="function"?ke.ignoreTransaction(e):e).timeout(t||6e4);return k.trans?k.trans.waitFor(n):n},Promise:K,debug:{get:function(){return ee},set:function(e){Mn(e)}},derive:Te,extend:X,props:Ce,override:kn,Events:$e,on:ve,liveQuery:Ji,extendObservabilitySet:St,getByKeyPath:ie,setByKeyPath:G,delByKeyPath:xr,shallowClone:Cn,deepClone:me,getObjectDiff:wn,cmp:B,asap:On,minKey:Gt,addons:[],connections:Fe,errnames:jt,dependencies:Tt,cache:Se,semVer:Un,version:Un.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})})),ke.maxKey=Ge(ke.dependencies.IDBKeyRange),typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(ve(Xe,function(e){if(!de){var t;t=new CustomEvent(nn,{detail:e}),de=!0,dispatchEvent(t),de=!1}}),addEventListener(nn,function(e){var t=e.detail;de||En(t)}));function En(e){var t=de;try{de=!0,ve.storagemutated.fire(e),gn(e,!0)}finally{de=t}}var de=!1,pe,Kn=function(){};typeof BroadcastChannel!="undefined"&&(Kn=function(){pe=new BroadcastChannel(nn),pe.onmessage=function(e){return e.data&&En(e.data)}},Kn(),typeof pe.unref=="function"&&pe.unref(),ve(Xe,function(e){de||pe.postMessage(e)})),typeof addEventListener!="undefined"&&(addEventListener("pagehide",function(e){if(!qe.disableBfCache&&e.persisted){ee&&console.debug("Dexie: handling persisted pagehide"),pe==null||pe.close();for(var t=0,n=Fe;t<n.length;t++){var r=n[t];r.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!qe.disableBfCache&&e.persisted&&(ee&&console.debug("Dexie: handling persisted pageshow"),Kn(),En({all:new $(-1/0,[[]])}))}));function ea(e){return new mt({add:e})}function ta(e){return new mt({remove:e})}function na(e,t){return new mt({replacePrefix:[e,t]})}K.rejectionMapper=Dr,Mn(ee)}}]);})();


//# debugId=71cd6e4c-cf9c-5af9-88a3-f01d84c53519

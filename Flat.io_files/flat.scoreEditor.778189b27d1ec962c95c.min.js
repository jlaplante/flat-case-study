
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4e7d2239-38ef-5c90-b572-a689dca1368e")}catch(e){}}();
(()=>{/*! Copyright (c) 2025 Tutteo Ltd. */(self.webpackChunk_flat_flat=self.webpackChunk_flat_flat||[]).push([[64693,99269],{3428:(c,m,o)=>{"use strict";o.d(m,{A:()=>Ie});var i=o(361744),p=o(538065);function v(D,z,ne,$e,pe,Ke){const et=(0,i.g2)("assignment-sidebar-instructions-attachment-item"),fe=(0,i.gN)("dompurify-html");return ne.assignment&&ne.contentAttachments?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,p.C4)({[D.$style.assignmentInstructionAndAttachments]:!0,[D.$style.dialogMode]:ne.mode==="dialog"})},[Ke.hasDescription||ne.contentAttachments.length>0?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,p.C4)({[D.$style.extraMarginBottomInSidebar]:$e.displayViewingAsStudent&&ne.mode!=="dialog",[D.$style.extraMarginBottomInDialog]:$e.displayViewingAsStudent&&ne.mode==="dialog"})},[Ke.hasDescription?(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,p.C4)(D.$style.adesc)},null,2)),[[fe,$e.htmlDescription]]):(0,i.Q3)("",!0),ne.contentAttachments.length>0?((0,i.uX)(),(0,i.CE)("div",{key:1,class:(0,p.C4)(D.$style.instructionAttachments)},[(0,i.Lk)("p",{class:(0,p.C4)(D.$style.pTitleAttachments)},(0,p.v_)(D.$t("edu:submission.attachments.title")),3),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(ne.contentAttachments,(tt,mt)=>((0,i.uX)(),(0,i.Wv)(et,{key:mt,"instruction-attachment":tt,mode:ne.mode},null,8,["instruction-attachment","mode"]))),128))],2)):(0,i.Q3)("",!0)],2)):((0,i.uX)(),(0,i.CE)("p",{key:1,class:(0,p.C4)(D.$style.noDescription)},(0,p.v_)(D.$t("edu:assignment.details.no-description")),3))],2)):(0,i.Q3)("",!0)}var y=o(55442);function _(D){const z=(0,i.EW)(()=>{var pe;return((pe=D.value)==null?void 0:pe.description)||""}),ne=(0,i.EW)(()=>{const pe=z.value;return/<(?:iframe|embed)[^>]*>/i.test(pe)}),$e=(0,i.EW)(()=>{const pe=z.value;return ne.value?(0,y.Kz)(pe):(0,y.aU)(pe)});return{assignmentDescription:z,hasHtmlContent:ne,htmlDescription:$e}}var E=o(57500),K=o(6645);const x=["href"],Q=["href"],ce=["href"],q=["href"];function A(D,z,ne,$e,pe,Ke){const et=(0,i.g2)("scoreIcon"),fe=(0,i.g2)("youtubeIcon"),tt=(0,i.g2)("linkIcon"),mt=(0,i.g2)("link-preview");return ne.instructionAttachment?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,p.C4)({[D.$style.instructionAttachmentItem]:!0,[D.$style.instructionDialogMode]:ne.mode==="dialog"})},[Ke.isFlatScore?((0,i.uX)(),(0,i.Wv)(et,{key:0})):Ke.isYT?((0,i.uX)(),(0,i.Wv)(fe,{key:1})):((0,i.uX)(),(0,i.Wv)(tt,{key:2})),(0,i.Lk)("div",{class:(0,p.C4)(D.$style.details)},[(0,i.Lk)("div",{class:(0,p.C4)(D.$style.aTitle)},[Ke.isFlatScore?((0,i.uX)(),(0,i.CE)("a",{key:0,class:(0,p.C4)(D.$style.pScore),href:Ke.url,target:"_blank",rel:"noopener"},(0,p.v_)(ne.instructionAttachment.title),11,x)):ne.instructionAttachment.title?((0,i.uX)(),(0,i.CE)("a",{key:1,class:(0,p.C4)(D.$style.pTitle),href:Ke.url,target:"_blank",rel:"noopener"},(0,p.v_)(ne.instructionAttachment.title),11,Q)):ne.instructionAttachment.html?((0,i.uX)(),(0,i.CE)("p",{key:2,class:(0,p.C4)(D.$style.pTitle)},(0,p.v_)(ne.instructionAttachment.html),3)):(0,i.Q3)("",!0)],2),Ke.isYT?((0,i.uX)(),(0,i.Wv)(mt,{key:1,attachment:ne.instructionAttachment,"is-in-assignment-panel":!0,"dialog-mode":ne.mode==="dialog"},null,8,["attachment","dialog-mode"])):((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,p.C4)(D.$style.extraInfo)},[Ke.isFlatScore&&ne.instructionAttachment.sharingMode&&ne.instructionAttachment.sharingMode==="read"?((0,i.uX)(),(0,i.CE)("a",{key:0,href:Ke.url,target:"_blank",rel:"noopener"},(0,p.v_)(D.$t("edu:assignment.sidebar.read-only-score")),9,ce)):ne.instructionAttachment.url?((0,i.uX)(),(0,i.CE)("a",{key:1,href:Ke.url,target:"_blank",rel:"noopener"},(0,p.v_)(ne.instructionAttachment.url),9,q)):(0,i.Q3)("",!0)],2))],2)],2)):(0,i.Q3)("",!0)}var O=o(122538),C=o(718625),j=o(197096),e=o(555381);const J={key:0,class:"a-embed"},w=["href"],W=["src","alt"],X={key:1,class:"tmb ph"},me=["src"],ge={key:1,inline:"",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},Le={key:2,class:"t"},Ae=["href"],Ee=["href"],re={key:1,class:"actions"};function G(D,z,ne,$e,pe,Ke){const et=(0,i.gN)("dompurify-html");return D.a.type!=="worksheet"?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,p.C4)(["attachment-link-prvw",{embed:!!D.a.html,ytInSidePanelMode:D.isYTInSidePanel,inDialogMode:D.dialogMode}]),"data-cy":"attachmentLinkPrvw"},[D.a.html?(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",J,null,512)),[[et,D.a.html,"iframe"]]):((0,i.uX)(),(0,i.CE)("a",{key:1,href:D.url,class:"a-tmb",target:"_blank",rel:"noopener"},[D.thumbnail?((0,i.uX)(),(0,i.CE)("img",{key:0,src:D.thumbnail,alt:D.a.title,class:"tmb",onError:z[0]||(z[0]=fe=>D.erroredThumbnail=!0)},null,40,W)):((0,i.uX)(),(0,i.CE)("div",X,[D.a.iconUrl&&!D.erroredThumbnail?((0,i.uX)(),(0,i.CE)("img",{key:0,src:D.a.iconUrl,onError:z[1]||(z[1]=fe=>D.erroredThumbnail=!0)},null,40,me)):((0,i.uX)(),(0,i.CE)("svg",ge,z[3]||(z[3]=[(0,i.Lk)("path",{d:"M17 7h-3c-.55 0-1 .45-1 1s.45 1 1 1h3c1.65 0 3 1.35 3 3s-1.35 3-3 3h-3c-.55 0-1 .45-1 1s.45 1 1 1h3c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-9 5c0 .55.45 1 1 1h6c.55 0 1-.45 1-1s-.45-1-1-1H9c-.55 0-1 .45-1 1zm2 3H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h3c.55 0 1-.45 1-1s-.45-1-1-1H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h3c.55 0 1-.45 1-1s-.45-1-1-1z",fill:"#646F8D","fill-rule":"evenodd"},null,-1)])))]))],8,w)),D.isYTInSidePanel?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Le,[(0,i.Lk)("a",{href:D.url,target:"_blank",rel:"noopener",class:"title"},[(0,i.Lk)("span",null,(0,p.v_)(D.title),1),z[4]||(z[4]=(0,i.Lk)("svg",{inline:"",width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg"},[(0,i.Lk)("path",{d:"M11.012 4h-4c-.55 0-1 .45-1 1s.45 1 1 1h1.59l-4.31 4.31a.996.996 0 101.41 1.41l4.31-4.31V9c0 .55.45 1 1 1s1-.45 1-1V5c0-.55-.45-1-1-1z",fill:"#363C50","fill-rule":"evenodd",class:"fill"})],-1))],8,Ae),D.a.description?((0,i.uX)(),(0,i.CE)("a",{key:0,href:D.url,target:"_blank",rel:"noopener",class:"desc"},(0,p.v_)(D.a.description),9,Ee)):(0,i.Q3)("",!0),D.displayActions?((0,i.uX)(),(0,i.CE)("div",re,[(0,i.Lk)("button",{class:"remove",onClick:z[2]||(z[2]=(0,e.D$)(fe=>D.$emit("remove",D.attachment),["prevent","stop"]))},(0,p.v_)(D.$t("flat:delete")),1)])):(0,i.Q3)("",!0)]))],2)):(0,i.Q3)("",!0)}var B=o(706305),ae=o(303953);const ue=(0,i.pM)({name:"AttachmentLinkPreview",props:{attachment:{type:Object,required:!0},displayActions:{type:Boolean,default:!1},isInAssignmentPanel:{type:Boolean,default:!1},dialogMode:{type:Boolean,default:!1}},emits:["remove"],data(){return{erroredThumbnail:!1}},setup(){const D=(0,B.j)();return{scores:(0,i.EW)(()=>D.scores),getScore:D.getAndCache}},computed:{score(){return this.scores[this.attachment.score]},a(){return this.attachment.preview||this.attachment},url(){return this.attachment.score?`/score/${this.attachment.score}/edit`:this.attachment.url},thumbnail(){var D;if(this.erroredThumbnail)return null;if(this.attachment.thumbnailUrl)return this.attachment.thumbnailUrl;if(this.attachment.score){let z=`${ae.A.apiv2baseurl}/scores/${this.attachment.score}/revisions/last/thumbnail.png`;return(D=this.score)!=null&&D.sharingKey&&(z+=`?sharingKey=${this.score.sharingKey}`),z}return null},title(){return this.score?this.score.title:this.a.title||this.a.url||"Untitled attachment"},isYTInSidePanel(){return this.isInAssignmentPanel&&this.attachment.url&&this.attachment.url.includes("www.youtube.com")}},created(){this.attachment.score&&!this.score&&this.getScore(this.attachment.score)}});var Re=o(216407),De=o(938793);const be={name:"AssignmentSidebarInstructionsAttachmentItem",components:{LinkPreview:(0,De.A)(ue,[["render",G],["__scopeId","data-v-6ed0e882"]]),scoreIcon:O.A,youtubeIcon:C.A,linkIcon:j.A},props:{instructionAttachment:{type:Object,required:!0},mode:{type:String,default:"normal"}},computed:{isFlatScore(){return this.instructionAttachment.type==="flat"&&this.instructionAttachment.score},isYT(){var D;return(D=this.instructionAttachment.url)==null?void 0:D.includes("www.youtube.com")},url(){return this.instructionAttachment.score?`/score/${this.instructionAttachment.score}/edit`:this.instructionAttachment.url}}};var We=o(951094),Ce=o.n(We);const we={};we.$style=Ce();const Se={name:"AssignmentInstructionAndAttachments",components:{AssignmentSidebarInstructionsAttachmentItem:(0,De.A)(be,[["render",A],["__cssModules",we]])},props:{assignment:{type:Object,required:!0},contentAttachments:{type:Array,required:!0},mode:{type:String,default:"normal"}},setup(D){const z=(0,E.l)(),{displayViewingAsStudent:ne}=(0,K.bP)(z),{htmlDescription:$e}=_(D.assignment);return{displayViewingAsStudent:ne,htmlDescription:$e}},computed:{hasDescription(){return this.assignment.description&&this.assignment.description.length>0}}};var Ze=o(659449),_e=o.n(Ze);const $={};$.$style=_e();const Ie=(0,De.A)(Se,[["render",v],["__cssModules",$]])},5791:(c,m,o)=>{var i=o(746370);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("47912711",i,!0,{})},16217:(c,m,o)=>{"use strict";o.d(m,{A:()=>G});var i=o(361744),p=o(555381);const v={class:"score-drawer score-preview"},y={ref:"scoreDrawerWrapper"};function _(B,ae,ue,Re,De,Te){const je=(0,i.g2)("ScorePreviewSkeleton");return(0,i.uX)(),(0,i.CE)("div",v,[(0,i.bo)((0,i.bF)(je,null,null,512),[[p.aG,De.loading]]),(0,i.Lk)("div",y,null,512)])}var E=o(645369),K=o.n(E),x=o(616877),Q=o.n(x),ce=o(744056),q=o(782027),A=o(269352),O=o(669834),C=o(475672),j=o(864409),e=o(16602),J=o(572520),w=o(190191),W=(B,ae,ue)=>new Promise((Re,De)=>{var Te=We=>{try{be(ue.next(We))}catch(Ce){De(Ce)}},je=We=>{try{be(ue.throw(We))}catch(Ce){De(Ce)}},be=We=>We.done?Re(We.value):Promise.resolve(We.value).then(Te,je);be((ue=ue.apply(B,ae)).next())});const X=K()("flat:preview"),me=120,ge=1,Le=Number.POSITIVE_INFINITY,Ae={name:"ScorePreview",emits:["fontsLoaded"],components:{ScorePreviewSkeleton:w.A},props:{scoreData:{type:Object,required:!0}},data(){return{svgs:[],isPrinted:!1,loading:!1}},methods:{displayScore(){return X("full redraw"),this.drawQueue.add(this.renderScore)},renderScore(){return W(this,null,function*(){this.isPrinted&&this.removeScore(),this.loading=!0,this.isPrinted=!0,this.scoreData.ensurePageSize();const B=this.scoreData.config.getCopy();B.usePedalLine=!0,B.noSystemVerticalSpaceDistribution=!0;const ae=new A.A;this.$refs.scoreDrawerWrapper.appendChild(ae.node()),this.textmetrics=new O.A(ae.node());let ue;this.scoreData.adagioData.getMusicFont()===C.A.PETALUMA?(ue=(yield o.e(60455).then(o.bind(o,7893))).default,Object.keys(B).forEach(Te=>{B[Te]&&typeof B[Te]=="object"&&B[Te]["font-family"]&&(B[Te]["font-family"]="Petaluma Script")})):ue=(yield Promise.resolve().then(o.bind(o,624740))).default,this.scoreData.fonts&&(yield this.scoreData.fonts.waitForFonts()),this.$emit("fontsLoaded");const Re=new e.A(this.scoreData.adagioData,me,this.textmetrics,ue,B),De=new J.A(this.scoreData.adagioData,Re);return this.pageLayout=(0,ce.IG)(Re),this.updater=(0,ce.IG)(De),this.pageLayout.setScaling(1),this.updateView({firstRender:!0,svg:ae})})},updateView(B){B=B||{};let ae=B.svg;return new Promise(ue=>{let Re=0;const De=()=>W(this,null,function*(){if(!this.scoreData.isReady)return this.removeScore(),ue();const Te=1;if(this.pageLayout.hasRemaining()&&Re<Te){(Re>0||!ae)&&(ae=new A.A,this.$refs.scoreDrawerWrapper.appendChild(ae.node())),yield this.pageLayout.fillNextPage(ae),this.svgs.push(ae);const je=ae.node();je.setAttribute("viewBox",["0 0",je.getAttribute("width"),je.getAttribute("height")].join(" ")),Re++}return this.pageLayout.hasRemaining()&&Re<Te?(window.requestAnimationFrame(De),null):ue()});De()}).then(()=>{this.loading=!1})},removeScore(){this.isPrinted=!1,this.svgs.forEach(B=>{this.$refs.scoreDrawerWrapper.removeChild(B.elem)}),this.svgs=[]}},created(){j.default.setDocument(window.document),this.drawQueue=new(Q())(ge,Le)},mounted(){this.displayScore(),this.scoreData.scoreActions&&(this.onRedraw=()=>{window.requestAnimationFrame(()=>{this.displayScore()})},this.scoreData.scoreActions.on("redraw",this.onRedraw),this.scoreData.scoreActions.on("draw",this.onRedraw))},beforeUnmount(){this.onRedraw&&(this.scoreData.scoreActions.off("redraw",this.onRedraw),this.scoreData.scoreActions.off("draw",this.onRedraw)),this.removeScore()}};var Ee=o(938793);const G=(0,Ee.A)(Ae,[["render",_]])},17802:(c,m,o)=>{"use strict";c.exports=o.p+"img/11a46dad7ab736e01844.svg"},18659:(c,m,o)=>{var i=o(115060);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("5214531d",i,!0,{})},29924:(c,m,o)=>{var i=o(938275);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("2e421897",i,!0,{})},38731:(c,m,o)=>{var i=o(651942);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("3f3109c0",i,!0,{})},43731:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.ds-pages-settings{display:flex;width:100%;margin-top:-15px}.ds-pages-settings .ds-pages-left{flex:0 1 300px;margin-right:30px}.ds-pages-settings .ds-pages-right{flex:0 1 200px}.ds-pages-settings .ds-margin{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}.ds-pages-settings .ds-margin input{width:80px}@media (max-width: 530px){.ds-pages-settings{flex-wrap:wrap}.ds-pages-settings .ds-pages-left,.ds-pages-settings .ds-pages-right{flex:1 1 100%;margin-right:0}}.ds-pages-numbers{color:var(--f-ink)}.ds-pages-numbers .wrap-switch-contain{display:flex;align-items:center}.ds-pages-numbers input{flex:0 0 80px;margin-left:8px}.ds-page-custom{display:flex;align-items:center}.ds-page-custom span{margin:0 15px}
`,""]);const E=_},55442:(c,m,o)=>{"use strict";o.d(m,{EH:()=>A,Kz:()=>O,ZH:()=>v,_N:()=>i,aU:()=>Q});function i(C){return C.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function p(C){return C.replace(/\r?\n/g," <br />")}const v=C=>C.length===0?C:C[0].toUpperCase()+C.slice(1),y=/(https?:\/\/[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gim,_=/[\w.]+@[a-zA-Z_-]+?(?:\.[a-zA-Z]{2,6})+/gim;function E(C){return C.replace(y,'<a href="$&" target="_blank" rel="nofollow noindex noopener">$&</a>').replace(_,'<a href="mailto:$&">$&</a>')}function K(C,j){if(!C)return[];const e=j?/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/gi:/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)\s/gi,J=C.match(e);if(!J)return[];if(!j)for(let w=0;w<J.length;w++)J[w]=J[w].slice(0,-1);return J}function x(C){if(!C)return[];const j=/((https?:\/\/)?([\w-]+)?flat\.io\/score\/[\w-]*)\s/gi,e=C.match(j);if(!e)return[];for(let J=0;J<e.length;J++)e[J]=e[J].slice(0,-1);return e}function Q(C){return C=i(C),C=p(C),C=E(C),C}const ce=/(^|[^/\w])(@([A-Za-z0-9\-_.]+[A-Za-z0-9\-_]))(\.?)/gi,q=/@\[([A-Za-z0-9]*):([A-Za-z0-9\-_.]*)\]/g;function A(C){return C=Q(C),C=C.replace(ce,'$1<a href="https://flat.io/@$3" class="link-mention" data-username="$3">$2</a>$4').replace(q,'<a href="https://flat.io/@$1" class="link-mention" data-username="$2">@$2</a>'),C}function O(C){return C=p(C),C=E(C),C}},61317:(c,m,o)=>{var i=o(110934);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("14cffa2c",i,!0,{})},61329:(c,m,o)=>{"use strict";c.exports=o.p+"img/6e8ef4ef69967d1b024b.svg"},68016:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.component_cwrxH{--RoundedAction-size: 32px;--RoundedAction-color: var(--f-primary);--RoundedAction-background: var(--f-white);display:flex;align-items:center;justify-content:center;width:var(--RoundedAction-size);height:var(--RoundedAction-size);border-radius:50%;background:var(--RoundedAction-background);color:var(--RoundedAction-color);box-shadow:0 2px 8px #0000000a,0 1px 3px #00000014;border:none;cursor:pointer}.component_cwrxH:active{transform:scale(1.03)}
`,""]),_.locals={component:"component_cwrxH"};const E=_},80412:(c,m,o)=>{var i=o(900925);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("45a00fa8",i,!0,{})},94661:(c,m,o)=>{var i=o(378934);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("761e9e74",i,!0,{})},94733:(c,m,o)=>{"use strict";c.exports=o.p+"img/beeb484e3f6a31667b79.svg"},94960:(c,m,o)=>{var i=o(843951);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("3e9d1d92",i,!0,{})},108102:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.ddnTrigger_XOtrj{border-radius:100px;display:flex;background-color:inherit;color:#fff;border:solid 1px #fff;align-items:center;height:32px;padding-left:8px;padding-right:8px}.ddnTrigger_XOtrj.triggerOpen_LmMWX{background-color:#fff;color:var(--f-primary);border-color:var(--f-ink-10)}.whiteBackground_R7dHu{border-color:var(--f-grey-3);color:var(--f-grey-3)}.ddnTitle_cReur{font-size:12px;font-weight:600;font-family:var(--f-font-common);margin-left:4px;margin-right:4px;white-space:nowrap}.ddnContent_vAMUM{margin-top:4px;background-color:#fff;border-radius:8px;border:1px solid var(--f-ink-10);padding:10px;width:fit-content}.item_tpZxv:not(:first-child){margin-top:8px}
`,""]),_.locals={ddnTrigger:"ddnTrigger_XOtrj",triggerOpen:"triggerOpen_LmMWX",whiteBackground:"whiteBackground_R7dHu",ddnTitle:"ddnTitle_cReur",ddnContent:"ddnContent_vAMUM",item:"item_tpZxv"};const E=_},110934:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.label-ext-small[data-v-451e502b]{font-size:14px;font-weight:var(--f-font-normal);margin-bottom:16px}
`,""]);const E=_},111531:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.measureControls_nBPaX{display:flex;flex-direction:column;position:absolute}.measureControls_nBPaX button{width:40px;height:40px;border:none;background:none;padding:0;margin:0}.measureControls_nBPaX img{width:40px;height:40px}
`,""]),_.locals={measureControls:"measureControls_nBPaX"};const E=_},115060:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.menuList_dSO69{display:flex;flex-direction:column}
`,""]),_.locals={menuList:"menuList_dSO69"};const E=_},118010:(c,m,o)=>{"use strict";o.d(m,{BK:()=>v,IQ:()=>p,_u:()=>E,jn:()=>_,rQ:()=>i,vS:()=>K});const i="guitar",p="bass",v="banjo",y="tres",_="mandolin",E="ukulele";function K(){return[i,p,v,y,_,E]}},119189:(c,m,o)=>{var i=o(819048);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("37ba6b1f",i,!0,{})},119491:(c,m,o)=>{var i=o(459406);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("4d3f47e0",i,!0,{})},121259:(c,m,o)=>{"use strict";var i=o(252922),p=o(736434),v=o(827676),y=o(525745),_=o(674548),E=o(883364);const K=()=>{const t=document.getElementById("flat-client-loading");t&&t.remove();const s=document.getElementById("flat-loading-style");s&&s.remove(),document.documentElement.classList.remove("loading")};function x(t){window.Cypress!==void 0&&(t.config.errorHandler=function(n){setTimeout(()=>{throw n})})}var Q=o(158588),ce=o(123277),q=o(303953),A=o(6645),O=o(110314),C=o(555381),j=o(475771),e=o(361744);const J={key:0,class:"se-app",ref:"lol"},w={key:0,class:"se-global",role:"main"},W={class:"se-main-content"},X={class:"se-content-container"},me=["aria-label"],ge={key:1,class:"se-global"},Le={key:0,class:"se-global"},Ae=["aria-label"],Ee={key:1,class:"app-error"},re={class:"logo-error"};function G(t,s,n,r,d,a){const f=(0,e.g2)("scoreSelectedTools2"),h=(0,e.g2)("ScoreSelectedTools"),u=(0,e.g2)("ImageExport"),g=(0,e.g2)("score-editor-top"),b=(0,e.g2)("score-editor-content"),P=(0,e.g2)("track-editor"),F=(0,e.g2)("touch-keyboard"),S=(0,e.g2)("assignment-info-sidebar"),H=(0,e.g2)("collapseIcon"),I=(0,e.g2)("viewing-as-student"),Y=(0,e.g2)("score-editor-mob-top"),Z=(0,e.g2)("score-editor-mob-sidebar"),Fe=(0,e.g2)("score-editor-mob-bottom"),dt=(0,e.g2)("AudioReload"),Ve=(0,e.g2)("portal-target"),oe=(0,e.g2)("EditorTourWrapper"),Ft=(0,e.g2)("tooltips-manager"),Jt=(0,e.g2)("help"),Wt=(0,e.g2)("score-editor-doc-settings"),Yt=(0,e.g2)("dialog-upgrade"),us=(0,e.g2)("mobile-playback-settings"),Ut=(0,e.g2)("dialog-embed"),_s=(0,e.g2)("dialog-alert"),Mt=(0,e.g2)("dialog-assignment-info"),Ns=(0,e.g2)("community-onboarding"),V=(0,e.g2)("exports-status"),U=(0,e.g2)("message-center"),Be=(0,e.g2)("flat-edu"),ot=(0,e.g2)("flat-name"),xe=(0,e.g2)("score-404"),Bt=(0,e.g2)("score-403"),Eo=(0,e.g2)("score-402"),Xs=(0,e.g2)("score-4090"),ps=(0,e.g2)("score-0"),Rn=(0,e.g2)("score-drive-import");return t.globalError?((0,e.uX)(),(0,e.CE)("div",Ee,[(0,e.Lk)("div",re,[t.isEdu?((0,e.uX)(),(0,e.Wv)(Be,{key:0})):((0,e.uX)(),(0,e.Wv)(ot,{key:1}))]),t.globalError===404?((0,e.uX)(),(0,e.Wv)(xe,{key:0})):t.globalError===403?((0,e.uX)(),(0,e.Wv)(Bt,{key:1})):t.globalError===402?((0,e.uX)(),(0,e.Wv)(Eo,{key:2})):t.globalError===4090?((0,e.uX)(),(0,e.Wv)(Xs,{key:3})):t.globalError===0?((0,e.uX)(),(0,e.Wv)(ps,{key:4})):t.globalError==="driveImport"?((0,e.uX)(),(0,e.Wv)(Rn,{key:5})):((0,e.uX)(),(0,e.Wv)(xe,{key:6}))])):((0,e.uX)(),(0,e.CE)("div",J,[t.displayMobileEditor?((0,e.uX)(),(0,e.CE)("div",ge,[!t.sidebarDisplayed||!t.canShowAssignmentSidebar?((0,e.uX)(),(0,e.CE)("div",Le,[t.isReady&&t.scoreData&&t.interaction?((0,e.uX)(),(0,e.Wv)(Y,{key:0,"show-upgrade-button":t.showUpgradeButton,interaction:t.interaction},null,8,["show-upgrade-button","interaction"])):(0,e.Q3)("",!0),t.interaction?((0,e.uX)(),(0,e.Wv)(Z,{key:1,interaction:t.interaction},null,8,["interaction"])):(0,e.Q3)("",!0),t.interaction?((0,e.uX)(),(0,e.Wv)(b,{key:2,ref:"scoreEditorContent","is-ready":t.isReady,interaction:t.interaction,collaborators:t.collaborators,"inline-comments":t.inlineComments,"adagio-queue":t.adagioQueue,"display-status":t.displayStatus},null,8,["is-ready","interaction","collaborators","inline-comments","adagio-queue","display-status"])):(0,e.Q3)("",!0),t.isReady&&t.isImageExportDisplayed?((0,e.uX)(),(0,e.Wv)(u,{key:3,"score-data":t.scoreData,"export-manager":t.exportManager},null,8,["score-data","export-manager"])):(0,e.Q3)("",!0),t.isReady?((0,e.uX)(),(0,e.Wv)(h,{key:4,interaction:t.interaction,"request-position":t.requestPosition},null,8,["interaction","request-position"])):(0,e.Q3)("",!0),t.isReady&&t.scoreData&&t.interaction&&t.canDisplayMobBottom?((0,e.uX)(),(0,e.Wv)(Fe,{key:5,"is-native":!1,"score-data":t.scoreData,"adagio-queue":t.adagioQueue},null,8,["score-data","adagio-queue"])):(0,e.Q3)("",!0),t.pendingRetry?((0,e.uX)(),(0,e.Wv)(dt,{key:6,audio:t.audio},null,8,["audio"])):(0,e.Q3)("",!0)])):t.canShowAssignmentSidebar&&t.sidebarDisplayed&&t.assignment?((0,e.uX)(),(0,e.Wv)(S,{key:1,assignment:t.assignment,audio:t.audio,onHideSidebar:s[3]||(s[3]=$s=>t.displaySidebar(!1)),onShowDialogAssignmentInfo:s[4]||(s[4]=$s=>t.showDialog("DialogAssignmentInfo"))},null,8,["assignment","audio"])):(0,e.Q3)("",!0),t.canShowAssignmentSidebar&&!t.sidebarDisplayed?((0,e.uX)(),(0,e.CE)("button",{key:2,onClick:s[5]||(s[5]=$s=>t.displaySidebar()),class:"sidebar-open","aria-label":t.$t("edu:assignment.sidebar.show")},[(0,e.bF)(H)],8,Ae)):(0,e.Q3)("",!0)])):((0,e.uX)(),(0,e.CE)("div",w,[t.isReady?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[t.useNewDisplay?((0,e.uX)(),(0,e.Wv)(f,{key:0,interaction:t.interaction,"request-position":t.requestPosition},null,8,["interaction","request-position"])):((0,e.uX)(),(0,e.Wv)(h,{key:1,interaction:t.interaction},null,8,["interaction"]))],64)):(0,e.Q3)("",!0),t.isReady&&t.isImageExportDisplayed?((0,e.uX)(),(0,e.Wv)(u,{key:1,"score-data":t.scoreData,"export-manager":t.exportManager},null,8,["score-data","export-manager"])):(0,e.Q3)("",!0),t.scoreData&&t.interaction?((0,e.uX)(),(0,e.Wv)(g,{key:2,"is-ready":t.isReady,"score-data":t.scoreData,interaction:t.interaction,"adagio-queue":t.adagioQueue,role:"navigation"},null,8,["is-ready","score-data","interaction","adagio-queue"])):(0,e.Q3)("",!0),(0,e.Lk)("div",W,[(0,e.Lk)("div",X,[t.interaction?((0,e.uX)(),(0,e.Wv)(b,{key:0,ref:"scoreEditorContent","is-ready":t.isReady,interaction:t.interaction,collaborators:t.collaborators,"inline-comments":t.inlineComments,"adagio-queue":t.adagioQueue,"display-status":t.displayStatus},null,8,["is-ready","interaction","collaborators","inline-comments","adagio-queue","display-status"])):(0,e.Q3)("",!0),t.isReady&&t.trackEditStep?((0,e.uX)(),(0,e.Wv)(P,{key:1,interaction:t.interaction},null,8,["interaction"])):t.isReady&&t.scoreWrite?((0,e.uX)(),(0,e.Wv)(F,{key:2,"score-data":t.interaction.scoreData},null,8,["score-data"])):(0,e.Q3)("",!0)]),t.canShowAssignmentSidebar&&t.sidebarDisplayed&&t.assignment?((0,e.uX)(),(0,e.Wv)(S,{key:0,assignment:t.assignment,audio:t.audio,onHideSidebar:s[0]||(s[0]=$s=>t.displaySidebar(!1)),onShowDialogAssignmentInfo:s[1]||(s[1]=$s=>t.showDialog("DialogAssignmentInfo"))},null,8,["assignment","audio"])):t.canShowAssignmentSidebar&&!t.sidebarDisplayed?((0,e.uX)(),(0,e.CE)("button",{key:1,onClick:s[2]||(s[2]=$s=>t.displaySidebar()),class:"sidebar-open","aria-label":t.$t("edu:assignment.sidebar.show")},[(0,e.bF)(H)],8,me)):(0,e.Q3)("",!0)]),t.displayViewingAsStudent?((0,e.uX)(),(0,e.Wv)(I,{key:3})):(0,e.Q3)("",!0)])),(0,e.bF)(Ve,{name:"app"}),t.startOnboardingTour||t.dialogKey==="EditorTour"?((0,e.uX)(),(0,e.Wv)(oe,{key:2,interaction:t.interaction,"request-position":t.requestPosition},null,8,["interaction","request-position"])):(0,e.Q3)("",!0),t.canDisplayOnboardingTooltips?((0,e.uX)(),(0,e.Wv)(Ft,{key:3,context:"editor"})):(0,e.Q3)("",!0),t.helpUi?((0,e.uX)(),(0,e.Wv)(Jt,{key:4,keyboard:t.keyboard},null,8,["keyboard"])):t.isReady&&t.documentSettingsUi&&t.scoreWrite?((0,e.uX)(),(0,e.Wv)(Wt,{key:5,"score-data":t.interaction.scoreData,audio:t.audio},null,8,["score-data","audio"])):(0,e.Q3)("",!0),t.dialogKey==="upgrade"?((0,e.uX)(),(0,e.Wv)(Yt,{key:6})):t.dialogKey==="mobilePlaybackSettings"?((0,e.uX)(),(0,e.Wv)(us,{key:7,audio:t.audio,"score-data":t.interaction.scoreData},null,8,["audio","score-data"])):t.dialogKey==="embed"?((0,e.uX)(),(0,e.Wv)(Ut,{key:8})):t.dialogKey==="alert"?((0,e.uX)(),(0,e.Wv)(_s,{key:9})):t.dialogKey==="DialogAssignmentInfo"?((0,e.uX)(),(0,e.Wv)(Mt,{key:10,assignment:t.assignment},null,8,["assignment"])):(0,e.Q3)("",!0),t.dialogKey==="communityOnboarding"?((0,e.uX)(),(0,e.Wv)(Ns,{key:11,"existing-username":t.account.username},null,8,["existing-username"])):(0,e.Q3)("",!0),((0,e.uX)(),(0,e.Wv)(e.Im,{to:"body"},[t.hasExportsToDisplay>0?((0,e.uX)(),(0,e.Wv)(V,{key:0,"display-scores-names":!1,"is-editor":!0})):(0,e.Q3)("",!0)])),(0,e.bF)(U)],512))}var B=o(697333),ae=o(339413),ue=o(261318),Re=o(954516),De=o(172318),Te=o(192427),je=o(537587),be=o(773067),We=o(58163),Ce=o(121648),we=o(591340),ee=o(990244),N=o(909696),Se=o(599284),Ze=o(417650),_e=o(518637),$=o(813897),le=o(777853),Ie=o(309189),D=o(466048),z=o(318866),ne=o(328010),$e=o(194751),pe=o(653154),Ke=o(254872),et=o(229384),fe=o(763939),tt=o(777549),mt=o(57500),jt=o(29220),Zt=o(346579),ms=o(973697),qe=o(544582),Ne=o(88247),ct=o(689850),nt=o(941271),Et=o(621297),ze=o(459356),yt=o(612732),gs=o(282363),kt=o(730263),st=o(276329),fs=o(396747),hs=o(75866),gt=o(497059),l=o(538065);const zs={class:"space-x-8px"};function Ct(t,s,n,r,d,a){const f=(0,e.g2)("f-button"),h=(0,e.g2)("content-dialog");return(0,e.uX)(),(0,e.Wv)(h,{"regular-width":350,"separate-header":!1,"separate-footer":!1,"show-close-button":!1},{footer:(0,e.k6)(()=>{var u,g;return[(0,e.Lk)("div",zs,[(0,e.bF)(f,{theme:"outline-subdue",size:"small",type:"button",onClick:s[0]||(s[0]=(0,C.D$)(b=>a.closeDialog(),["prevent","stop"])),"default-text":(u=a.dialogParams)==null?void 0:u.buttons.cancel},null,8,["default-text"]),(0,e.bF)(f,{onClick:s[1]||(s[1]=(0,C.D$)(b=>a.acceptDialog(),["prevent","stop"])),size:"small","default-text":(g=a.dialogParams)==null?void 0:g.buttons.ok},null,8,["default-text"])])]}),default:(0,e.k6)(()=>[a.title?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,l.C4)(t.$style.title)},(0,l.v_)(t.$t(a.title)),3)):(0,e.Q3)("",!0),a.description?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,l.C4)(t.$style.description)},(0,l.v_)(t.$t(a.description)),3)):(0,e.Q3)("",!0)]),_:1})}var ft=o(86624),Hs=Object.defineProperty,Vs=Object.defineProperties,Qs=Object.getOwnPropertyDescriptors,vs=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable,Dt=(t,s,n)=>s in t?Hs(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,ys=(t,s)=>{for(var n in s||(s={}))ke.call(s,n)&&Dt(t,n,s[n]);if(vs)for(var n of vs(s))St.call(s,n)&&Dt(t,n,s[n]);return t},Kt=(t,s)=>Vs(t,Qs(s));const Gs={name:"DialogAlert",components:{ContentDialog:ft.A},computed:Kt(ys({},(0,A.aH)(z.j,["currentDialogParams"])),{dialogParams(){return this.currentDialogParams},title(){var t;return(t=this.dialogParams)==null?void 0:t.titleKey},description(){var t;return(t=this.dialogParams)==null?void 0:t.messageKey}}),methods:Kt(ys({},(0,A.i0)(z.j,["hideDialog","saveDialogAnswer"])),{closeDialog(){this.saveDialogAnswer("cancel"),this.hideDialog()},acceptDialog(){var t;(t=this.$refs.dialog)!=null&&t.open&&this.$refs.dialog.close(),this.saveDialogAnswer("ok"),this.hideDialog()}})};var Js=o(599985),Nt=o.n(Js),k=o(938793);const bs={};bs.$style=Nt();const Es=(0,k.A)(Gs,[["render",Ct],["__cssModules",bs]]);var Xt=o(938486),Tt=o(138056),wt=o(916504),Ys=o(404421),Cs=o(39396),qt=o(992031);const Zs=o.p+"img/30abc373471a8c8d6bb0.svg";var qs=o(486822),eo=o(669753),to=o(657803);const Ss=o.p+"img/ae7a2a0ec0056b7abb80.svg",so={class:"title"},oo={class:"choose-source"},Ps={class:"source-url wrap-form"},L={class:"label-ext-small",for:"source-url"},T={class:"or"},R={class:"source-upload wrap-form"},de={class:"upload-area form-control medium"},se={class:"title"},ie={class:"sync-container"},he={class:"media-container loading"},He={key:0,class:"sync-editor"},Xe={class:"sync-actions"},It={class:"text"},ht={key:1,class:"sync-editor"};function Ls(t,s){const n=(0,e.g2)("power-badge-icon"),r=(0,e.g2)("f-button"),d=(0,e.g2)("track-anchors");return(0,e.uX)(),(0,e.CE)("div",{class:"se-tkedit no-select",onKeypress:s[7]||(s[7]=(0,C.D$)(()=>{},["stop"])),onKeydown:s[8]||(s[8]=(0,C.D$)(()=>{},["stop"])),onKeyup:s[9]||(s[9]=(0,C.D$)(()=>{},["stop"]))},[(0,e.Lk)("button",{type:"button",class:"recording-close",onClick:s[0]||(s[0]=(0,C.D$)(a=>t.close(),["stop"]))},s[10]||(s[10]=[(0,e.Lk)("img",{src:Zs},null,-1)])),t.trackEditStep==="create"?((0,e.uX)(),(0,e.CE)("form",{key:0,class:"recording-new",onSubmit:s[3]||(s[3]=(0,C.D$)(a=>t.create(),["prevent"]))},[(0,e.Lk)("div",so,[(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:recordings.sync-start-title")),1)]),(0,e.Lk)("div",oo,[(0,e.Lk)("div",Ps,[(0,e.Lk)("label",L,(0,l.v_)(t.$t("flat:recordings.add-url")),1),(0,e.bo)((0,e.Lk)("input",{class:"form-control medium",id:"source-url",type:"url",placeholder:"Paste the URL of your video or audio recording","onUpdate:modelValue":s[1]||(s[1]=a=>t.url=a),autofocus:""},null,512),[[C.Jo,t.url]]),s[11]||(s[11]=(0,e.Lk)("div",{class:"logos"},[(0,e.Lk)("img",{src:qs,alt:"YouTube"}),(0,e.Lk)("img",{src:eo,alt:"Vimeo"}),(0,e.Lk)("img",{src:to,alt:"SoundCloud"})],-1))]),(0,e.Lk)("div",T,(0,l.v_)(t.$t("flat:or")),1),(0,e.Lk)("div",R,[(0,e.Lk)("label",{class:(0,l.C4)(["label-ext-small",t.$style.label])},[(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:recordings.upload-mp3")),1),t.hasTrackUpload?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(n,{key:0,class:(0,l.C4)(t.$style["power-badge"])},null,8,["class"]))],2),(0,e.Lk)("div",de,[(0,e.Lk)("input",{type:"file",accept:".mp3",onChange:s[2]||(s[2]=a=>t.handleFile(a))},null,32)])])]),(0,e.bF)(r,{type:"submit",class:"recording-submit",disabled:!t.url&&!t.file,loading:t.loading,defaultText:"flat:next"},null,8,["disabled","loading"])],32)):(0,e.Q3)("",!0),(0,e.bo)((0,e.Lk)("div",{class:(0,l.C4)(t.track&&t.track.type)},[(0,e.Lk)("div",se,(0,l.v_)(t.$t("flat:recordings.sync-anchors-title")),1),(0,e.Lk)("div",ie,[(0,e.bo)((0,e.Lk)("div",{class:(0,l.C4)(["media-container",{audio:t.track&&t.track.type==="audio"}]),id:"media-container"},null,2),[[C.aG,!t.loading]]),(0,e.bo)((0,e.Lk)("div",he,null,512),[[C.aG,t.loading]]),!t.loading&&t.track?((0,e.uX)(),(0,e.CE)("div",He,[t.track.synchronizationPoints.length>=2?((0,e.uX)(),(0,e.Wv)(d,{key:0,interaction:t.interaction,player:t.audio.altPlayer,points:t.track.synchronizationPoints,"track-duration":t.trackDuration,"track-time":t.currentTime,onSave:s[4]||(s[4]=a=>t.save(!0)),ref:"trackAnchors"},null,8,["interaction","player","points","track-duration","track-time"])):(0,e.Q3)("",!0),(0,e.Lk)("div",Xe,[(0,e.Lk)("button",{class:"sync-add-point",onClick:s[5]||(s[5]=(0,C.D$)(a=>t.addPoint(),["stop"]))},[s[12]||(s[12]=(0,e.Lk)("img",{src:Ss,alt:"Add point"},null,-1)),(0,e.Lk)("span",It,(0,l.v_)(t.$t("flat:recordings.anchor-add")),1)]),(0,e.bF)(r,{class:"sync-cta",onClick:s[6]||(s[6]=a=>t.save()),loading:t.saving,defaultText:"flat:recordings.save"},null,8,["loading"])])])):((0,e.uX)(),(0,e.CE)("div",ht,s[13]||(s[13]=[(0,e.Lk)("div",{class:"recording-anchors loading"},null,-1)])))])],2),[[C.aG,t.trackEditStep!=="create"]])],32)}var Pt=o(797727),ut=o(931720),Co=o(472243),Ko=o(645369),$t=o.n(Ko),Pe=o(727825);const No={class:"tl-container"};function Xo(t,s){const n=(0,e.g2)("track-anchor");return(0,e.uX)(),(0,e.CE)("div",{class:"recording-anchors",onClick:s[1]||(s[1]=r=>t.seekTl(r))},[(0,e.Lk)("div",No,[(0,e.Lk)("div",{class:"tl-duration-current",style:(0,l.Tr)({width:t.trackTimePercent})},null,4)]),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(t.points,(r,d)=>((0,e.uX)(),(0,e.Wv)(n,{key:`${d}:${r.type}$:${r.measureUuid}`,index:d,point:r,points:t.points,trackTime:t.trackTime,interaction:t.interaction,onUpdate:s[0]||(s[0]=a=>t.updatePoint(a)),onRemove:a=>t.removePoint(d)},null,8,["index","point","points","trackTime","interaction","onRemove"]))),128))])}const $o=["aria-label"],zo={key:0,class:"anchor-label"},Ho={key:1,class:"anchor-label"},Vo={class:"anchor-time"},Qo={class:"anchor-inputs"},Go={key:0,class:"wrap-form"},Jo={class:"label-ext-small",for:"anchor-input-measure"},M={class:"wrap-form"},ve={class:"label-ext-small",for:"anchor-input-timing"},Me={class:"anchor-actions"};function at(t,s){const n=(0,e.g2)("f-button"),r=(0,e.gN)("dropdown");return(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(["anchor-item",t.cssClasses]),style:(0,l.Tr)({left:t.horizontalPos})},[(0,e.Lk)("button",{class:"ddn-trigger","aria-label":t.$t("flat:recordings.sync-point-label")},[t.point.type==="measure"?((0,e.uX)(),(0,e.CE)("span",zo,(0,l.v_)(t.originalMeasure),1)):t.point.type==="end"?((0,e.uX)(),(0,e.CE)("span",Ho,"End")):(0,e.Q3)("",!0),s[6]||(s[6]=(0,e.Lk)("img",{src:Ss,class:"ddn-align"},null,-1)),(0,e.Lk)("span",Vo,(0,l.v_)(t.formatTime),1)],8,$o),(0,e.Lk)("div",{class:"ddn-content",onClick:s[5]||(s[5]=(0,C.D$)(()=>{},["stop"]))},[s[7]||(s[7]=(0,e.Lk)("div",{"x-arrow":""},null,-1)),(0,e.Lk)("form",{onSubmit:s[4]||(s[4]=(0,C.D$)(d=>t.updateAnchor(),["stop","prevent"]))},[(0,e.Lk)("div",Qo,[!t.point.location.end&&t.point.location.measureIdx!==0?((0,e.uX)(),(0,e.CE)("div",Go,[(0,e.Lk)("label",Jo,(0,l.v_)(t.$t("flat:recordings.anchor-measure-nb")),1),(0,e.bo)((0,e.Lk)("input",{autocomplete:"false",type:"text",id:"anchor-input-measure",class:"form-control medium","onUpdate:modelValue":s[0]||(s[0]=d=>t.measure=d),autofocus:""},null,512),[[C.Jo,t.measure,void 0,{number:!0}]])])):(0,e.Q3)("",!0),(0,e.Lk)("div",M,[(0,e.Lk)("label",ve,(0,l.v_)(t.$t("flat:recordings.anchor-timing")),1),(0,e.bo)((0,e.Lk)("input",{autocomplete:"false",type:"text",id:"anchor-input-timing",class:"form-control medium","onUpdate:modelValue":s[1]||(s[1]=d=>t.timing=d)},null,512),[[C.Jo,t.timing]])])]),(0,e.Lk)("div",Me,[(0,e.bF)(n,{type:"submit",defaultText:"flat:save"}),!t.point.location.end&&t.point.location.measureIdx!==0?((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:s[2]||(s[2]=(0,C.D$)(d=>t.remove(),["stop","prevent"])),class:"remove"},(0,l.v_)(t.$t("flat:remove")),1)):(0,e.Q3)("",!0),t.editing?((0,e.uX)(),(0,e.CE)("button",{key:1,onClick:s[3]||(s[3]=(0,C.D$)(d=>t.close(),["stop","prevent"])),class:"cancel"},(0,l.v_)(t.$t("flat:cancel")),1)):(0,e.Q3)("",!0)])],32)])],6)),[[r,{placement:"top",onOpen:t.onOpen,onClose:t.onClose}]])}const rt={name:"trackAnchor",props:{interaction:{type:Object,required:!0},point:{type:Object,required:!0},points:{type:Array,required:!0},index:{type:Number,required:!0},trackTime:{type:Number,required:!0}},emits:["update","remove"],data(){return{timing:null,measure:null,originalMeasure:null,ddnOpen:!1,editing:!0}},setup(){const t=(0,qe.o)(),s=(0,ze.O)();return{pausing:(0,e.EW)(()=>t.pausing),playing:(0,e.EW)(()=>t.playing),displayError:s.displayError}},watch:{trackTime(){this.ddnOpen&&this.editing&&this.playing&&!this.pausing&&(this.timing=this.formatTimeWithMsHelper(this.trackTime))},point(){this.point._popover&&(this.$el.classList.add("open"),this.editing=!1)}},computed:{formatTimeWithMs(){return this.formatTimeWithMsHelper(this.point.time)},formatTime(){return this.formatTimeHelper(this.point.time)},horizontalPos(){const t=this.point;if(t.type==="end")return null;const s=this.points,n=s[s.length-1].time-s[0].time;return`${(t.time-s[0].time)*100/n}%`},cssClasses(){const t=[this.point.type];return this.point.location.measureIdx===0&&t.push("start"),t}},methods:{formatTimeWithMsHelper(t){let s=Math.floor(t/60),n=Math.round(t%60*1e3)/1e3;return n<10&&(n=`0${n}`),s=`0${s}`.slice(-2),`${s}:${n}`},formatTimeHelper(t){let s=Math.floor(t/60),n=Math.floor(t%60);return n=`0${n}`.slice(-2),s=`0${s}`.slice(-2),`${s}:${n}`},updateAnchor(){const t=this.timing.split(":");let s=0;if(t.length===1&&t.unshift(0),t.length!==2){this.displayError({error:new Error("Invalid timing format")});return}s+=Number.parseInt(t[0],10)*60,s+=Number.parseFloat(t[1]);let n;if(this.measure!==this.point.location.measureIdx+1){if(this.measure<2){this.displayError({error:new Error("The measure number for this point should be at least 2")});return}if(this.measure>this.interaction.data.getNbMeasures()){this.displayError({error:new Error("You need to set a measure number that exists")});return}n=this.measure-1}this.$emit("update",{time:s,measureIdx:n,index:this.index}),this.close()},resetModels(){this.timing=this.formatTimeWithMs,this.measure=this.originalMeasure=this.point.location.measureIdx+1},remove(){this.$emit("remove"),this.close()},close(){this.resetModels(),this.$el.classList.remove("open")},onOpen(){this.ddnOpen=!0,delete this.point._popover},onClose(){this.ddnOpen=!1}},created(){this.resetModels()},mounted(){this.point._popover&&this.$el.classList.add("open")}},Sl=(0,k.A)(rt,[["render",at]]);var Fn=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const Pl={name:"trackAnchors",components:{TrackAnchor:Sl},props:{interaction:{type:Object,required:!0},player:{type:Object,required:!0},points:{type:Array,required:!0},trackDuration:{type:Number,required:!0},trackTime:{type:Number,required:!0}},emits:["save"],computed:{trackTimePercent(){return this.points.length>=2?`${(this.trackTime-this.points[0].time)*100/this.points[this.points.length-1].time}%`:"0%"}},methods:{updatePoint(t){return Fn(this,null,function*(){const s=this.interaction.audio.altPlayer,n=this.points[t.index];n.time=t.time,typeof t.measureIdx=="number"&&(n.location.measureIdx=t.measureIdx),n.location.measureIdx!==0&&!n.location.end&&(yield this.removePoint(t.index,!1),s.addAnchor(n)),yield s.normalizeAnchorList(),this.save()})},removePoint(t,s=!0){return Fn(this,null,function*(){this.points.splice(t,1),s&&(yield this.interaction.audio.altPlayer.normalizeAnchorList(),this.save())})},save(){this.$emit("save")},seekTl(t){if(t.target!==t.currentTarget&&t.target.className!=="tl-container")return;const s=t.offsetX*this.points[this.points.length-1].time/t.target.getBoundingClientRect().width;this.interaction.audio.altPlayer&&this.interaction.audio.altPlayer.seekTo(s+this.points[0].time)}}},Ll=(0,k.A)(Pl,[["render",Xo]]);var Al=Object.defineProperty,Ml=Object.defineProperties,Dl=Object.getOwnPropertyDescriptors,Wn=Object.getOwnPropertySymbols,Tl=Object.prototype.hasOwnProperty,Ol=Object.prototype.propertyIsEnumerable,Un=(t,s,n)=>s in t?Al(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,kl=(t,s)=>{for(var n in s||(s={}))Tl.call(s,n)&&Un(t,n,s[n]);if(Wn)for(var n of Wn(s))Ol.call(s,n)&&Un(t,n,s[n]);return t},xl=(t,s)=>Ml(t,Dl(s)),Yo=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const So=$t()("flat:tracks");function wl(t){const s=new FileReader;return new Promise((n,r)=>{s.onerror=()=>{s.abort(),r(new DOMException("Issue while parsing input file."))},s.onload=()=>{n(s.result.split(";base64,")[1])},s.readAsDataURL(t)})}const Il={name:"trackEditor",components:{TrackAnchors:Ll,PowerBadgeIcon:Pt.default},props:{interaction:{type:Object,required:!0}},setup(){const t=(0,fe.F)(),s=(0,ct.w)(),n=(0,Pe.N)(),r=(0,qe.o)(),d=(0,Ce.W)(),a=(0,ze.O)(),f=(0,nt.B)();return{accountFeatures:(0,e.EW)(()=>t.accountFeatures),score:(0,e.EW)(()=>n.score),playbackMeasure:(0,e.EW)(()=>r.currentMeasure),tracks:(0,e.EW)(()=>s.tracks),trackEditStep:(0,e.EW)(()=>s.trackEditStep),trackEditId:(0,e.EW)(()=>s.trackEditId),setDefaultTrack:s.setDefaultTrack,setTrack:s.setTrack,closeEditor:s.closeEditor,cursorMeasureIdx:(0,e.EW)(()=>d.pos.measureIdx),displayError:a.displayError,addExperience:f.addExperience}},computed:{hasTrackUpload(){return!!this.accountFeatures.trackUpload}},data(){return{audio:null,url:null,file:null,track:null,trackDuration:0,currentTime:0,loading:!1,saving:!1}},methods:xl(kl({},(0,A.i0)(ut.B,["showUpgradeDialog"])),{handleFile(t){t.target.files.length>0&&(this.file=t.target.files[0])},create(){return Yo(this,null,function*(){try{this.loading=!0;const t={};if(this.file){if(!this.hasTrackUpload){this.showUpgradeDialog({feature:"trackUpload"}),this.loading=!1;return}t.title=this.file.name.replace(".mp3",""),t.dataEncoding="base64",t.data=yield wl(this.file),this.addExperience("score.track.upload")}else t.url=this.url;const s=yield Co.A.create(this.score.id,t);this.audio.setTrackObject(s),this.track=s,this.loading=!1,this.addExperience("score.track.add"),this.loadTrack()}catch(t){this.displayError({error:t}),this.loading=!1,(0,pe.vV)(t)}})},loadTrack(){this.loading=!0;const t=(0,ct.w)();if(t.trackEditStep="sync",t.trackEditId=this.track.id,this.audio.useTrack(),this.audio.useTrack(this.track.id,{element:"media-container",anchorList:this.track.synchronizationPoints}),!this.audio.altPlayer){So("no player loaded yet");return}this.audio.altPlayer.ready().then(()=>{So("track ready"),this.loading=!1,this.track.synchronizationPoints=this.audio.altPlayer.anchorList,this.audio.altPlayer.anchorList=this.track.synchronizationPoints,this.audio.altPlayer.originalAnchorList=this.audio.altPlayer.anchorList}),this.audio.altPlayer.getDuration().then(s=>{this.trackDuration=s,So("loaded track, %d secs",s)}),this.track.title||this.audio.altPlayer.getTitle().then(s=>{this.track.title=s})},closeDdns(){[...this.$el.querySelectorAll(".ddn.open")].forEach(t=>t.classList.remove("open"))},addPoint(){return Yo(this,null,function*(){this.closeDdns();let t;typeof this.playbackMeasure=="number"&&(t=this.playbackMeasure),t||(t=this.cursorMeasureIdx);const s=yield this.audio.altPlayer.addBestAnchor(t);s&&(s._popover=!0,yield this.save(!0),this.$refs.trackAnchors.$forceUpdate())})},save(t){return Yo(this,null,function*(){try{this.saving=!0,t||(this.track.state="completed",this.track.default=!0);const s=yield Co.A.update(this.score.id,this.track.id,this.track);this.saving=!1,t||(this.close(),this.audio.setTrackObject(s)),s.default&&this.setDefaultTrack(s.id),this.setTrack(JSON.parse(JSON.stringify(s)))}catch(s){this.saving=!1,this.displayError({error:s}),(0,pe.vV)(s)}})},close(){var t;this.closeEditor(),(t=this.track)!=null&&t.id&&this.audio.useTrack(this.track.id,{force:!0})}}),mounted(){if(this.audio=this.interaction.audio,this.trackEditId){const t=this.tracks.find(s=>s.id===this.trackEditId);if(!t){this.close(),So("track %s not found/loaded",this.trackEditId);return}this.track=JSON.parse(JSON.stringify(t)),this.loadTrack()}this.intervalUpdate=setInterval(()=>{this.audio.altPlayer&&this.audio.altPlayer.getCurrentTime().then(t=>{this.currentTime=t})},500)},beforeUnmount(){clearInterval(this.intervalUpdate)}};var Rl=o(514747),Fl=o.n(Rl);const Bn={};Bn.$style=Fl();const Wl=(0,k.A)(Il,[["render",Ls],["__cssModules",Bn]]);var Ul=Object.defineProperty,Bl=(t,s,n)=>s in t?Ul(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Zo=(t,s,n)=>Bl(t,typeof s!="symbol"?s+"":s,n);class jl{constructor(){Zo(this,"boundHandler"),Zo(this,"target"),Zo(this,"pendingUpdate"),this.target=null,this.pendingUpdate=!1,this.boundHandler=this.handler.bind(this)}handler(){this.pendingUpdate||(this.pendingUpdate=!0,requestAnimationFrame(()=>{this.pendingUpdate=!1,this.target&&this.updateTarget()}))}updateTarget(){if(window.visualViewport===null||this.target===null)return;const s=window.visualViewport;this.target.style.height=`${s.height}px`,this.target.style.transform=`translate(0px, ${s.offsetTop}px) scale(${1/s.scale})`}startWatching(s){this.target||window.visualViewport!==null&&(this.target=s,window.visualViewport.addEventListener("resize",this.boundHandler),window.visualViewport.addEventListener("scroll",this.boundHandler),this.updateTarget())}stopWatching(){this.target&&window.visualViewport!==null&&(window.visualViewport.removeEventListener("resize",this.boundHandler),window.visualViewport.removeEventListener("scroll",this.boundHandler),this.target.style.height="",this.target.style.transform="",this.target=null)}}var Kl=o(509238);function Nl(t,s,n,r,d,a){const f=(0,e.g2)("score-header-line"),h=(0,e.g2)("score-parts-line"),u=(0,e.g2)("toolbar-performance-recording"),g=(0,e.g2)("toolbar-performance-review");return(0,e.uX)(),(0,e.CE)("div",null,[(0,e.bF)(f,{"show-upgrade-button":n.showUpgradeButton},null,8,["show-upgrade-button"]),(0,e.bF)(h,{interaction:n.interaction},null,8,["interaction"]),a.displayRecordingToolbar?((0,e.uX)(),(0,e.Wv)(u,{key:0,audio:n.interaction.scoreData.scoreActions.dependencies.audio,class:"mob"},null,8,["audio"])):a.displayPerformanceReviewToolbar?((0,e.uX)(),(0,e.Wv)(g,{key:1,audio:n.interaction.scoreData.scoreActions.dependencies.audio,class:"mob"},null,8,["audio"])):(0,e.Q3)("",!0)])}var zt=o(314205);const Xl={key:0},$l={key:0,class:"audio-loader"},zl={key:1,class:"audio-record-stop-button"},Hl={key:1,class:"ddn-warn-container"},Vl={class:"icon-player warn ddn-trigger"},Ql={class:"ddn-content"},Gl={key:1,class:"performance-count-in"},Jl={class:"ready-title"},Yl={class:"count-in-counter"},Zl={class:"recording-sequences"},ql={key:2,class:"recording-view"},ed={key:0,class:"recording-retry"},td={key:0,class:"audio-loader"},sd={key:1,class:"ddn-warn-container"},od={class:"icon-player warn ddn-trigger"},nd={class:"ddn-content"},id={class:"recordings-stack"},ad={key:0,class:"recording-preview"},rd={class:"recording-controls"},ld={key:0,class:"audio-record-stop-button"},dd={key:1,class:"audio-loader"},cd={key:0,class:"audio-record-playback-play-button"},ud={key:1,class:"audio-record-playback-pause-button",inline:"",width:"10",height:"12",viewBox:"0 0 10 12",xmlns:"http://www.w3.org/2000/svg"},_d={key:0,class:"time-display current-time"},pd={class:"time-display audio-record-timer"},md={key:1,class:"saving-buttons"},gd={class:"text"},fd={key:2,class:"btn save-fixed-states loading"},hd={class:"text"},vd={class:"recording-controls"},yd={key:0,class:"audio-record-playback-play-button"},bd={key:1,class:"audio-record-playback-pause-button",inline:"",width:"10",height:"12",viewBox:"0 0 10 12",xmlns:"http://www.w3.org/2000/svg"},Ed={class:"time-display current-time"},Cd={class:"time-display audio-record-timer"},Sd={class:"saving-buttons"},Pd={class:"save-fixed-states btn"},Ld={class:"text"};function Ad(t,s,n,r,d,a){const f=(0,e.g2)("MicIcon"),h=(0,e.g2)("WarnIcon"),u=(0,e.g2)("soundwave-shape"),g=(0,e.g2)("CloseIcon"),b=(0,e.g2)("CheckIcon"),P=(0,e.gN)("dropdown");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(["performance-container",{"init-stage":!r.recorded&&!r.recording&&!r.recordCountingIn&&!d.trackAudioData,"count-in":r.recordCountingIn}])},[!d.trackAudioData&&!r.recorded&&!r.recording&&!r.recordCountingIn?((0,e.uX)(),(0,e.CE)("div",Xl,[!r.recorded&&!r.recording&&!r.recordCountingIn&&!d.trackAudioData&&!r.mediaAccessDenied?((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:s[0]||(s[0]=F=>a.toggleAudioRecording()),class:(0,l.C4)(["icon-player record-button",{active:r.recording}]),"aria-label":"Record audio"},[t.pendingRecordingStart?((0,e.uX)(),(0,e.CE)("span",$l)):r.recording?((0,e.uX)(),(0,e.CE)("span",zl)):((0,e.uX)(),(0,e.Wv)(f,{key:2}))],2)):r.mediaAccessDenied?(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",Hl,[(0,e.Lk)("button",Vl,[(0,e.bF)(h)]),(0,e.Lk)("div",Ql,(0,l.v_)(r.mediaAccessErrorMessage),1)])),[[P]]):(0,e.Q3)("",!0)])):(0,e.Q3)("",!0),r.recordCountingIn?((0,e.uX)(),(0,e.CE)("div",Gl,[(0,e.Lk)("span",Jl,(0,l.v_)(t.$t("flat:audio-recording.ready")),1),(0,e.Lk)("div",Yl,[(0,e.Lk)("span",null,(0,l.v_)(d.count.sequences*d.count.clicks-d.metronomeCount),1)]),(0,e.Lk)("div",Zl,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.rangeCountSequences,F=>((0,e.uX)(),(0,e.CE)("div",{class:"recording-sequence",key:F},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.rangeCountClicks,S=>((0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(["recording-click",{active:F*d.count.clicks+S===d.metronomeCount-1}]),key:S},null,2))),128))]))),128))])])):r.recording||r.recorded||d.trackAudioData?((0,e.uX)(),(0,e.CE)("div",ql,[r.recording?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",ed,[r.mediaAccessDenied?(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",sd,[(0,e.Lk)("button",od,[(0,e.bF)(h)]),(0,e.Lk)("div",nd,(0,l.v_)(r.mediaAccessErrorMessage),1)])),[[P]]):((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:s[1]||(s[1]=F=>a.retryAudioRecording()),class:"record-button icon-player"},[t.pendingRecordingStart?((0,e.uX)(),(0,e.CE)("span",td)):((0,e.uX)(),(0,e.Wv)(f,{key:1,class:"audio-record-retry-button"}))]))])),(0,e.Lk)("div",id,[r.recording||r.recorded?((0,e.uX)(),(0,e.CE)("div",ad,[(0,e.Lk)("div",rd,[r.recording?((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:s[2]||(s[2]=F=>a.toggleAudioRecording()),class:(0,l.C4)(["icon-player stop-button",{active:r.recording}]),"aria-label":"Record audio"},[t.pendingRecordingStart?((0,e.uX)(),(0,e.CE)("span",dd)):((0,e.uX)(),(0,e.CE)("span",ld))],2)):((0,e.uX)(),(0,e.CE)("button",{key:1,onClick:s[3]||(s[3]=F=>t.toggleRecordingPlayback()),class:"icon-player play-pause-button"},[t.isPlaying?((0,e.uX)(),(0,e.CE)("svg",ud,s[7]||(s[7]=[(0,e.Lk)("path",{d:"M0 1.002A1 1 0 0 1 1 0h1c.553 0 1 .456 1 1.002v9.996A1 1 0 0 1 2 12H1c-.553 0-1-.456-1-1.002V1.002zm7 0A1 1 0 0 1 8 0h1c.553 0 1 .456 1 1.002v9.996A1 1 0 0 1 9 12H8c-.553 0-1-.456-1-1.002V1.002z",fill:"#E7E8EC","fill-rule":"evenodd",class:"fill"},null,-1)]))):((0,e.uX)(),(0,e.CE)("span",cd))])),(0,e.Lk)("div",{class:(0,l.C4)(["recording-timing",{recording:r.recording}])},[r.recorded?((0,e.uX)(),(0,e.CE)("span",_d,(0,l.v_)(t.currentTime),1)):(0,e.Q3)("",!0),(0,e.Lk)("span",pd,(0,l.v_)(r.durationTime),1)],2)]),r.recording||r.recorded?((0,e.uX)(),(0,e.Wv)(u,{key:0,class:"soundshape-canvas",data:t.recordedData,mode:a.soundwaveMode},null,8,["data","mode"])):(0,e.Q3)("",!0),t.recordedData?((0,e.uX)(),(0,e.CE)("div",md,[t.recordedData&&!t.uploading&&d.trackAudioData?((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:s[4]||(s[4]=F=>a.discardRecording()),class:"btn discard-button"},[(0,e.bF)(g,{class:"icon"}),(0,e.Lk)("span",gd,(0,l.v_)(t.$t("flat:audio-recording.discard")),1)])):(0,e.Q3)("",!0),t.recordedData&&!t.uploading?((0,e.uX)(),(0,e.CE)("button",{key:1,onClick:s[5]||(s[5]=F=>a.saveRecording()),class:"btn save-button"},[(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:audio-recording.save")),1)])):((0,e.uX)(),(0,e.CE)("button",fd,[s[8]||(s[8]=(0,e.Lk)("span",{class:"audio-loader icon"},null,-1)),(0,e.Lk)("span",hd,(0,l.v_)(t.$t("flat:audio-recording.saving")),1)]))])):(0,e.Q3)("",!0)])):(0,e.Q3)("",!0),d.trackAudioData&&!r.recording?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,l.C4)(["recording-preview",{stacked:r.recorded}])},[(0,e.Lk)("div",vd,[(0,e.Lk)("button",{onClick:s[6]||(s[6]=F=>a.toggleSavedRecordingPlayback()),class:"icon-player play-pause-button"},[!r.playing||r.pausing?((0,e.uX)(),(0,e.CE)("span",yd)):((0,e.uX)(),(0,e.CE)("svg",bd,s[9]||(s[9]=[(0,e.Lk)("path",{d:"M0 1.002A1 1 0 0 1 1 0h1c.553 0 1 .456 1 1.002v9.996A1 1 0 0 1 2 12H1c-.553 0-1-.456-1-1.002V1.002zm7 0A1 1 0 0 1 8 0h1c.553 0 1 .456 1 1.002v9.996A1 1 0 0 1 9 12H8c-.553 0-1-.456-1-1.002V1.002z",fill:"#E7E8EC","fill-rule":"evenodd",class:"fill"},null,-1)])))]),(0,e.Lk)("div",{class:(0,l.C4)(["recording-timing",{recording:r.recording}])},[(0,e.Lk)("span",Ed,(0,l.v_)(r.trackCurrentTime),1),(0,e.Lk)("span",Cd,(0,l.v_)(r.trackDurationTime),1)],2)]),(0,e.bF)(u,{class:"soundshape-canvas",data:d.trackAudioData,mode:"playback"},null,8,["data"]),(0,e.Lk)("div",Sd,[(0,e.Lk)("button",Pd,[(0,e.bF)(b,{class:"icon"}),(0,e.Lk)("span",Ld,(0,l.v_)(t.$t("flat:audio-recording.saved")),1)])])],2)):(0,e.Q3)("",!0)])])):(0,e.Q3)("",!0)],2)}var Md=o(929658),jn=o(92665),Dd=o(487420),Td=o(971609),Od=o(410296);const kd={class:"soundwave-wrapper",ref:"wrapper"},xd={ref:"canvas"};function wd(t,s,n,r,d,a){return(0,e.uX)(),(0,e.CE)("div",kd,[(0,e.Lk)("canvas",xd,null,512)],512)}const Id={name:"SoundwaveShape",props:{data:{type:AudioBuffer,default:null},mode:{type:String,required:!0,validator(t){return["recording","playback"].includes(t)}}},data(){return{currentPos:0,lines:[],soundwaveData:null}},setup(){const t=(0,qe.o)();return{lastAverageAudioInputPower:(0,e.EW)(()=>t.lastAverageAudioInputPower)}},watch:{lastAverageAudioInputPower(){this.mode==="recording"&&this.updateLastAverageInputPower()},data(){this.drawSoundwave()},mode(t,s){t!==s&&t==="playback"&&(this.resizeCanvasToDisplaySize(),this.drawSoundwave())}},methods:{buildSoundwaveData(){const t=this.canvas.width/4,s=this.data.getChannelData(0),n=Math.floor(s.length/t);this.soundwaveData=[];let r=0,d=0;for(let a=0;a<s.length;a++,r++){if(r>=n){const h=d/n*2e3-90;this.soundwaveData.push(h),r=0,d=0}d+=Math.abs(s[a])}},drawSoundwave(){if(this.data){this.buildSoundwaveData(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentPos=0,this.lines=[];for(let t=0;t<this.soundwaveData.length;t++){const s=this.soundwaveData[t];this.lines.push(this.drawNextLine(s)),this.currentPos+=4}}},updateCurrentProgress(){if(typeof this.playbackProgress=="undefined")return;const t=Math.floor(this.playbackProgress/100*this.lines.length),n=this.lines[t-1].x,r=Math.abs(n-this.currentProgressX);this.context.clearRect(this.currentProgressX,0,r,this.canvas.height),this.currentProgressX=n},updateLastAverageInputPower(){this.currentPos>=this.canvas.width*2/3?this.offsetAndRedraw():this.currentPos+=4,this.lines.push(this.drawNextLine(this.lastAverageAudioInputPower))},offsetAndRedraw(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);for(let t=0;t<this.lines.length;){const s=this.lines[t];s.x-=4,this.context.fillRect(s.x,s.y,s.width,s.height),s.x<-2?this.lines.splice(t,1):t++}},scrollToRecenter(){const t=this.wrapper.scrollLeft,s=this.wrapper.clientWidth/2,n=this.wrapper.scrollWidth-this.wrapper.clientWidth;let r=this.currentPos-s;r=Math.max(0,Math.min(n,r)),r!==t&&(this.wrapper.scrollLeft=r)},drawNextLine(t){const s={},n=this.canvas.height/2,r=(90+t)/100;let d=n*r;return d<1&&(d=1),s.x=this.currentPos,s.y=n-d,s.width=2,s.height=d*2,this.context.fillRect(s.x,s.y,s.width,s.height),s},resizeCanvasToDisplaySize(){const t=this.context.canvas.clientWidth,s=this.context.canvas.clientHeight,n=this.context.canvas.width!==t||this.context.canvas.height!==s;return n&&(this.context.canvas.width=t,this.context.canvas.height=s),n}},mounted(){this.canvas=this.$refs.canvas,this.wrapper=this.$refs.wrapper,this.context=this.canvas.getContext("2d"),this.context.fillStyle="#363C50",this.currentProgressX=0,this.resizeCanvasToDisplaySize(),this.mode==="playback"&&this.data&&this.drawSoundwave()}},Kn=(0,k.A)(Id,[["render",wd]]);var Rd=Object.defineProperty,Fd=Object.defineProperties,Wd=Object.getOwnPropertyDescriptors,Nn=Object.getOwnPropertySymbols,Ud=Object.prototype.hasOwnProperty,Bd=Object.prototype.propertyIsEnumerable,Xn=(t,s,n)=>s in t?Rd(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,jd=(t,s)=>{for(var n in s||(s={}))Ud.call(s,n)&&Xn(t,n,s[n]);if(Nn)for(var n of Nn(s))Bd.call(s,n)&&Xn(t,n,s[n]);return t},Kd=(t,s)=>Fd(t,Wd(s)),As=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const Nd={name:"ToolbarPerformanceRecording",props:{audio:{type:Object,required:!0}},components:{SoundwaveShape:Kn,MicIcon:Md.A,WarnIcon:jn.A,CloseIcon:Dd.A,CheckIcon:Td.A},mixins:[Od.A],setup(){const t=(0,ct.w)(),s=(0,qe.o)(),n=(0,zt.X)(),r=(0,ze.O)();return{durationTime:(0,e.EW)(()=>s.recordTimeFormat),loading:(0,e.EW)(()=>s.loading),recording:(0,e.EW)(()=>s.recording),recorded:(0,e.EW)(()=>s.recorded),playing:(0,e.EW)(()=>s.playing),pausing:(0,e.EW)(()=>s.pausing),recordCountingIn:(0,e.EW)(()=>s.recordCountingIn),trackCurrentTime:(0,e.EW)(()=>s.trackCurrentTimeFormat),trackDurationTime:(0,e.EW)(()=>s.trackDurationFormat),mediaAccessDenied:(0,e.EW)(()=>s.mediaAccessDenied),mediaAccessErrorMessage:(0,e.EW)(()=>s.mediaAccessErrorMessage),setResetRecord:s.setResetRecord,tracks:(0,e.EW)(()=>t.tracks),lastTrackSet:(0,e.EW)(()=>t.lastTrackSet),lastTrack:(0,e.EW)(()=>t.lastTrack),saveTrack:t.saveTrack,submission:(0,e.EW)(()=>n.currentSubmission),assignment:(0,e.EW)(()=>n.currentSubmissionAssignment),displayError:r.displayError}},data(){return{trackAudioData:null,metronomeOn:!0,metronomeCount:0,count:{sequences:2,clicks:4}}},computed:{rangeCountSequences(){return this.getRange(this.count.sequences)},rangeCountClicks(){return this.getRange(this.count.clicks)},soundwaveMode(){return!this.recording&&this.recordedData?"playback":"recording"}},methods:Kd(jd({},(0,A.i0)(z.j,["showDialogAndWaitForAnswer"])),{getRange(t){const s=[];for(let n=0;n<t;n++)s.push(n);return s},getTrackObj(t){return this.tracks?this.tracks.find(s=>s.id===t):null},fetchLastRecording(){return As(this,null,function*(){this.pendingRecordingStart=!0;const t=this.lastTrack;yield this.useTrack(t),this.pendingRecordingStart=!1})},fetchCurrentSubmission(){return As(this,null,function*(){var t;if(this.pendingRecordingStart=!0,(t=this.submission)!=null&&t.attachments&&this.submission.attachments.length>0){const s=this.submission.attachments.find(n=>typeof n.track!="undefined");if(s){const n=this.getTrackObj(s.track);yield this.useTrack(n)}}this.pendingRecordingStart=!1})},useTrack(t){return As(this,null,function*(){if(t){this.audio.useTrack(t.id,{forceDefaultSync:!0});const s=(0,ct.w)();s.performanceTrackSaved=!0,t.type==="audio"&&(this.trackAudioData=yield this.audio.getTrackAudioBuffer(),this.trackAudioTag=this.audio.getTrackAudioTag(),this.trackAudioTag&&this.trackAudioTag.addEventListener("ended",()=>{this.percentProgress=100,this.stopSavedRecording()}))}})},toggleAudioRecording(){return As(this,null,function*(){this.recording?yield this.stopAudioRecording():yield this.startAudioRecording()})},discardRecording(){this.recordedData=null,this.setResetRecord(),this.mp3DataBlob=null,this.mp3Url=null,this.stopRecordingPlayback(),this.audio.resetAudioRecording()},retryAudioRecording(){this.discardRecording(),this.startAudioRecording()},startAudioRecording(){return As(this,null,function*(){this.init(),this.pendingRecordingStart=!0;const t={};if(this.metronomeOn){const s=this.audio.getMetronomeCountIn();this.count.sequences=s.sequences,this.count.clicks=s.clicks,this.metronomeCount=0,t.metronomeSequence=s,t.metronomeTickCb=this.metronomeTickHandle}t.sliderTracking=!0,yield this.audio.startAudioRecording(t),this.pendingRecordingStart=!1})},metronomeTickHandle(){this.metronomeCount++},saveRecording(){return As(this,null,function*(){if(this.stopRecordingPlayback(),!(this.trackAudioData&&(yield this.showDialogAndWaitForAnswer({key:"alert",params:{messageKey:"flat:audio-recording.warnings.override",buttons:{cancel:"flat:cancel",ok:"flat:audio-recording.warnings.ok-continue"}}}))==="cancel")){this.uploading=!0;try{this.mp3Data=this.audio.getRecordedArrayBuffer(),this.mp3DataStr=this.audio.convertArrayBufferToBase64(this.mp3Data),this.trackAudioData=yield this.audio.getTrackAudioBuffer();const t={data:this.mp3DataStr,purpose:"performanceSubmission",state:"draft",submission:this.submission.id,assignment:this.assignment.id};yield this.saveTrack({score:this.score,trackObj:t}),this.audio.setTrackObject(this.lastTrackSet),this.recordedData=null,this.addExperience("score.audio-recording.uploaded"),this.uploading=!1}catch(t){this.displayError({error:t}),this.loading=!1,(0,pe.vV)(t)}this.discardRecording(),this.lastTrackSet&&(yield this.useTrack(this.lastTrackSet))}})},toggleSavedRecordingPlayback(){!this.playing||this.pausing?this.playSavedRecording():this.pauseSavedRecording()},playSavedRecording(){(!this.playing||this.pausing)&&this.audio.play({forceClassicPlayback:!1})},pauseSavedRecording(){this.playing&&!this.pausing&&this.audio.pause()},stopSavedRecording(){this.playing&&this.audio.pause()},displayUnsavedDialog(t){return this.recordedData?(t.preventDefault(),t.returnValue=this.$t("flat:audio-recording.warnings.not-saved"),t.returnValue):null}}),created(){this.init(),this.fetchLastRecording(),window.addEventListener("beforeunload",this.displayUnsavedDialog)},beforeUnmount(){window.removeEventListener("beforeunload",this.displayUnsavedDialog)}},$n=(0,k.A)(Nd,[["render",Ad]]),Xd={class:"performance-container review-mode"},$d={class:"recording-view"},zd={key:0,class:"recording-error"},Hd={class:"error-description"},Vd={key:1,class:"recording-preview"},Qd={class:"review-timing"},Gd={class:"time-display current-time"},Jd={class:"time-display total-time"};function Yd(t,s,n,r,d,a){const f=(0,e.g2)("soundwave-shape");return(0,e.uX)(),(0,e.CE)("div",Xd,[(0,e.Lk)("div",$d,[d.error?((0,e.uX)(),(0,e.CE)("div",zd,[(0,e.Lk)("span",Hd,(0,l.v_)(d.error),1)])):((0,e.uX)(),(0,e.CE)("div",Vd,[(0,e.Lk)("div",Qd,[(0,e.Lk)("span",Gd,(0,l.v_)(r.trackCurrentTimeFormat),1),(0,e.Lk)("span",Jd,(0,l.v_)(r.trackDurationFormat),1)]),d.audioData?((0,e.uX)(),(0,e.Wv)(f,{key:0,class:"soundshape-canvas",mode:"playback",data:d.audioData},null,8,["data"])):(0,e.Q3)("",!0)]))])])}var Zd=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const qd={name:"ToolbarPerformanceReview",props:{audio:{type:Object,required:!0},currentSubmissionId:{type:Object,required:!0}},setup(){const t=(0,ct.w)(),s=(0,qe.o)(),n=(0,zt.X)(),r=(0,e.EW)(()=>n.currentSubmissionId);return{trackCurrentTimeFormat:(0,e.EW)(()=>s.trackCurrentTimeFormat),trackDurationFormat:(0,e.EW)(()=>s.trackDurationFormat),currentSubmissionTrack:t.getCurrentSubmissionTrack(r)}},data(){return{loading:!0,audioData:null,audioTag:null,error:null}},components:{SoundwaveShape:Kn},methods:{loadTrack(){return Zd(this,null,function*(){if(!this.currentSubmissionTrack){this.error=this.$t("edu:reviews.load-submission-error");return}const t=this.currentSubmissionTrack.id;this.audio.useTrack(t,{forceDefaultSync:!0}),this.currentSubmissionTrack.type==="audio"&&(this.audioData=yield this.audio.getTrackAudioBuffer(),this.audioTag=this.audio.getTrackAudioTag(),this.audioTag&&this.audioTag.addEventListener("ended",()=>{})),this.loaded=!0})}},created(){this.loadTrack()}},zn=(0,k.A)(qd,[["render",Yd]]);var te=o(744056),no=o(584527),ec=o(183766),io=o(227468);function tc(t,s){return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(t.$style.header)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.left)},[(0,e.RG)(t.$slots,"left")],2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.center)},[(0,e.RG)(t.$slots,"default")],2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.right)},[(0,e.RG)(t.$slots,"right")],2)],2)}var sc=o(426364),oc=o.n(sc);const nc={},Hn={};Hn.$style=oc();const Vn=(0,k.A)(nc,[["render",tc],["__cssModules",Hn]]),ic=["href","title"],ac=["title"],rc=["title"],lc=(0,e.pM)({__name:"ScoreHeaderLine",props:{showUpgradeButton:{type:Boolean,required:!0,default:!1}},setup(t){const s=(0,Pe.N)(),n=(0,e.EW)(()=>s.score),r=t,{isSmallScreen:d}=(0,A.bP)((0,yt.k)()),{mainLeaveButtonUrl:a}=(0,A.bP)((0,Pe.N)()),{showUpgradeDialog:f}=(0,ut.B)();function h(){s.setMobSidebarOpened(!0)}function u(){(0,N.q6)().loadDocumentSettings("credits")}return(g,b)=>((0,e.uX)(),(0,e.Wv)(Vn,null,{left:(0,e.k6)(()=>[(0,e.Lk)("a",{href:(0,te.R1)(a),class:(0,l.C4)(g.$style.goBack),title:g.$t("flat:back-to-library"),"data-cy":"leave-editor"},[(0,e.bF)((0,te.R1)(no.A))],10,ic)]),right:(0,e.k6)(()=>[r.showUpgradeButton&&(0,te.R1)(d)?((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:b[1]||(b[1]=P=>(0,te.R1)(f)({ref:"editorCTA"})),class:(0,l.C4)(g.$style.powerLink)},[(0,te.R1)(d)?((0,e.uX)(),(0,e.Wv)(Pt.default,{key:0})):(0,e.Q3)("",!0)],2)):r.showUpgradeButton?((0,e.uX)(),(0,e.Wv)((0,te.R1)(io.QY),{key:1,onClick:b[2]||(b[2]=P=>(0,te.R1)(f)({ref:"editorCTA"})),"default-text":"flat:freemium.upgrade",size:"small","show-icon":!0})):(0,e.Q3)("",!0),(0,e.Lk)("button",{class:(0,l.C4)(g.$style.sidebarTrigger),onClick:h,title:g.$t("editor:open-score-settings"),"data-cy":"open-sidebar-settings"},[(0,e.bF)((0,te.R1)(ec.A))],10,rc)]),default:(0,e.k6)(()=>[(0,e.Lk)("button",{class:(0,l.C4)(g.$style.scoreHeader),title:g.$t("flat:credits.text"),onClick:b[0]||(b[0]=P=>u())},(0,l.v_)(n.value?n.value.title:g.$t("flat:loading")),11,ac)]),_:1}))}});var dc=o(119189),cc=o.n(dc);const Qn={};Qn.$style=cc();const uc=(0,k.A)(lc,[["__cssModules",Qn]]),_c=["title"];function pc(t,s,n,r,d,a){const f=(0,e.g2)("mob-parts-list"),h=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(t.$style.sePartsLine)},[(0,e.Lk)("button",{title:t.$t("editor:switchScoreDisplayMode.title"),class:(0,l.C4)({[t.$style.layoutButton]:!0,[t.$style.page]:this.layout==="track"}),"data-cy":"tb-switchScoreDisplayMode",onClick:s[0]||(s[0]=u=>a.togglePage())},[(0,e.bo)((0,e.Lk)("span",null,null,512),[[h,d.icons.page,"svg"]])],10,_c),r.isPerformerMode?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(f,{key:0}))],2)}var _t=o(505522);const mc=["onClick"],gc=["title"];function fc(t,s,n,r,d,a){const f=(0,e.g2)("carat-down-icon"),h=(0,e.g2)("edit-icon"),u=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(t.$style.mobPartsList)},[d.partsListOpened?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:s[0]||(s[0]=g=>a.partsListOpen()),class:(0,l.C4)(t.$style.selectTrigger)},[a.triggerPartIcon?(0,e.bo)(((0,e.uX)(),(0,e.CE)("span",{key:0,class:(0,l.C4)(t.$style.icon)},null,2)),[[u,a.triggerPartIcon,"svg"]]):(0,e.Q3)("",!0),(0,e.Lk)("span",{class:(0,l.C4)(t.$style.title)},(0,l.v_)(a.triggerText),3),(0,e.Lk)("span",{class:(0,l.C4)(t.$style.triggerIcon)},[(0,e.bF)(f,{class:(0,l.C4)({[t.$style.arrowRotate]:d.partsListOpened})},null,8,["class"])],2)],2)),d.partsListOpened?((0,e.uX)(),(0,e.CE)("ul",{key:1,class:(0,l.C4)(t.$style.partsList)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(r.parts,(g,b)=>((0,e.uX)(),(0,e.CE)("li",{class:(0,l.C4)({[t.$style.active]:r.displayedParts[g.uuid],[t.$style.partsItem]:!0}),key:g.uuid,onClick:P=>a.togglePart(g)},[(0,e.bo)((0,e.Lk)("span",{class:(0,l.C4)(t.$style.icon)},null,2),[[u,a.partIcon(g),"svg"]]),(0,e.Lk)("span",{class:(0,l.C4)(t.$style.title)},(0,l.v_)(g.name),3),b===0?((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:s[1]||(s[1]=(0,C.D$)(P=>a.partsListClose(),["stop"])),title:t.$t("flat:close"),class:(0,l.C4)(t.$style.triggerIcon)},[(0,e.bF)(f,{class:(0,l.C4)({[t.$style.arrowRotate]:d.partsListOpened})},null,8,["class"])],10,gc)):(0,e.Q3)("",!0)],10,mc))),128)),(0,e.Lk)("li",{class:(0,l.C4)(t.$style.partsItem),onClick:s[2]||(s[2]=g=>a.manageInstruments())},[(0,e.Lk)("span",{class:(0,l.C4)(t.$style.icon)},[(0,e.bF)(h)],2),(0,e.Lk)("span",{class:(0,l.C4)(t.$style.title)},(0,l.v_)(t.$t("editor:toolbar.manage-instruments")),3)],2)],2)):(0,e.Q3)("",!0)],2)}var Gn=o(250242),Rt=o(507292),qo=o(432367);const hc={name:"MobPartsList",setup(){const t=(0,N.q6)();return{parts:(0,e.EW)(()=>t.parts),displayedParts:(0,e.EW)(()=>t.displayedParts),loadDocumentSettings:t.loadDocumentSettings}},computed:{displayedPartsKeys(){return Object.keys(this.displayedParts)},displayedPartsValues(){return Object.values(this.displayedParts)},displayedPartsLength(){return this.displayedPartsValues.filter(t=>!!t).length},oneDisplayedPart(){return this.displayedPartsLength===1?this.parts.find(t=>t.uuid===this.displayedPartsKeys[0]):null},triggerText(){if(this.oneDisplayedPart)return this.oneDisplayedPart.name;const t=this.displayedPartsLength;return this.$t("editor:mobile.xParts",{number:t})},triggerPartIcon(){return this.oneDisplayedPart?this.partIcon(this.oneDisplayedPart):null}},props:{},data(){return{partsListOpened:!1}},components:{caratDownIcon:Gn.A,editIcon:Rt.A},methods:{togglePart(t){this.oneDisplayedPart&&this.oneDisplayedPart.uuid===t||(0,N.q6)().switchPartDisplay(t.uuid)},soloPart(t){(0,N.q6)().displaySinglePart(t.uuid)},manageInstruments(){this.partsListClose(),this.loadDocumentSettings("instruments")},partsListOpen(){this.partsListOpened=!0},partsListClose(){this.partsListOpened=!1},partIcon(t){var s;return!t||!t.group?qo.A["group-keyboards"]:(s=t.metas)!=null&&s.iconGroupKey?qo.A[t.metas.iconGroupKey]:qo.A[`group-${t.group}`]}}};var vc=o(250662),yc=o.n(vc);const Jn={};Jn.$style=yc();const bc={name:"ScorePartsLine",setup(){const t=(0,N.q6)(),s=(0,Pe.N)(),n=(0,qe.o)();return{layout:(0,e.EW)(()=>t.layout),score:(0,e.EW)(()=>s.score),isPerformerMode:(0,e.EW)(()=>n.isPerformerMode)}},props:{interaction:{type:Object,required:!0}},data(){return{icons:_t.default}},components:{MobPartsList:(0,k.A)(hc,[["render",fc],["__cssModules",Jn]])},methods:{togglePage(){this.interaction.scoreData.scoreActions.executePublicAction("switchScoreDisplayMode")}}};var Ec=o(524572),Cc=o.n(Ec);const Yn={};Yn.$style=Cc();const Sc={name:"ScoreEditorMobTop",components:{ScoreHeaderLine:uc,ScorePartsLine:(0,k.A)(bc,[["render",pc],["__cssModules",Yn]]),ToolbarPerformanceRecording:$n,ToolbarPerformanceReview:zn},props:{showUpgradeButton:{type:Boolean,required:!0},interaction:{type:Object,required:!0}},setup(){const t=(0,zt.X)(),s=(0,qe.o)(),n=(0,Pe.N)();return{loaded:(0,e.EW)(()=>s.loaded),loadedTracks:(0,e.EW)(()=>s.loadedTracks),isPerformanceAssignment:(0,e.EW)(()=>t.isPerformanceAssignment),isAssignmentReview:(0,e.EW)(()=>n.isAssignmentReview)}},computed:{displayRecordingToolbar(){return!this.isAssignmentReview&&this.isPerformanceAssignment&&this.loadedTracks},displayPerformanceReviewToolbar(){return this.isAssignmentReview&&this.isPerformanceAssignment&&this.hasTracks&&this.loaded&&this.loadedTracks}}},Pc=(0,k.A)(Sc,[["render",Nl]]);var es=o(453312);const Lc=(0,e.pM)({__name:"AudioReload",props:{bridgeHandler:{},audio:{}},setup(t){const s=t,n=(0,qe.o)(),{humanizedMissingSoundfontsIds:r,soundfontStatus:d}=(0,A.bP)(n);function a(){s.bridgeHandler?(s.bridgeHandler.sendRetryLoad(),n.setSoundfontStatus("loading")):s.audio?s.audio.retrySoundfontsLoading():(0,pe.vV)(new Error("No audio or bridgeHandler provided"))}function f(){n.setHideRetry()}return(h,u)=>{const g=(0,e.g2)("FButton"),b=(0,e.g2)("FButtonGroup");return(0,e.uX)(),(0,e.Wv)((0,te.R1)(es.qz),{"show-footer":!0,onClose:f,title:h.$t("editor:soundfount:loading-issue-title")},{footer:(0,e.k6)(()=>[(0,e.bF)(b,null,{default:(0,e.k6)(()=>[(0,e.bF)(g,{onClick:f,"default-text":"editor:soundfount:dismiss",theme:"outline"}),(0,e.bF)(g,{onClick:u[0]||(u[0]=P=>a()),"default-text":"editor:soundfount:retry",loading:(0,te.R1)(d)==="loading"},null,8,["loading"])]),_:1})]),default:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,l.C4)(h.$style.loadingIssue)},[(0,e.Lk)("p",null,(0,l.v_)(h.$t("editor:soundfount:loading-issue")),1),(0,e.Lk)("ul",null,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)((0,te.R1)(r),(P,F)=>((0,e.uX)(),(0,e.CE)("li",{key:F},[(0,e.bF)((0,te.R1)(jn.A)),(0,e.Lk)("div",null,(0,l.v_)(P),1)]))),128))])],2)]),_:1},8,["title"])}}});var Ac=o(378126),Mc=o.n(Ac);const Zn={};Zn.$style=Mc();const Dc=(0,k.A)(Lc,[["__cssModules",Zn]]);var Tc=o(1807),Oc=o(427024),kc=o(302795),xc=o(59400),en=o.n(xc),wc=o(337951),Ic=o.n(wc);const Rc="rgba(255,219,98,0.40)",Fc="rgba(255,197,0,0.40)",qn=$t()("flat:comments");class tn{constructor({scoreData:s}){this.scoreData=s,this.comments=[],this.highlightedId=null,this.marker=new kc.A,this.rect={},this.emiter=new(en()),this.watchCursor(),this.scoreCursor=(0,Ce.W)()}watchCursor(){(0,Ce.W)().$onAction(({name:s,after:n})=>{s==="setPos"&&(0,e.dY)(()=>this.updateCommentHighlight())}),this.updateCommentHighlight()}resolveComment(){throw new Error("Method InlineComments.resolve() not implemented")}updateComment(){throw new Error("Method InlineComments.updateComment() not implemented")}highlightComment(){throw new Error("Method InlineComments.highlightComment() not implemented")}refresh(){this.marker.drawer&&(this.marker.clearMarkers(),this.comments.forEach(s=>{const n=Object.assign({},s.context),r=this.marker.addMarker(n);if(!r){qn("comment %s has a non existent context, resolving",s.id),this.resolveComment(s);return}(this.contextHasChanged(n,r,s)||typeof s.context.staffIdx!="undefined")&&(qn("comment %o context changed, updating",s),this.updateComment(s,this.buildOpt(r))),tn.colorElem(r,s.id,Rc),this.rect[s.id]=r.markerGroups}),this.emit("refreshed"))}updateCommentHighlight(){const{partUuid:s,staffUuid:n,measureUuid:r}=(0,Ce.W)().pos;for(let d=0;d<this.comments.length;d++){const a=this.comments[d];if(this.highlightedId!==a.id&&a.context.partUuid===s&&a.context.staffUuid===n&&a.context.measureUuids.includes(r)){this.highlightedId=a.id,this.highlightComment(a),this.darkenRange();return}}this.highlightedId=null,this.highlightComment(null)}darkenRange(){this.refresh();const s=this.highlightedId;s&&this.rect[s]&&this.rect[s].forEach(n=>{n.attr("fill",Fc)})}static colorElem(s,n,r){s.markerGroups.forEach(d=>{d.attr("data-inline-comment",n),d.attr("fill",r),d.style("mix-blend-mode","darken")})}contextHasChanged(s,n){return!Ic()(this.buildOpt(n),this.buildOpt(s))}buildOpt(s){let n=s.staffUuid;if(!n){const r=this.scoreData.adagioData,d=r.getPartIdxFromUuid(s.partUuid);n=r.getPartStaffUuid(d,s.staffIdx||0)}return{measureUuids:[...s.measureUuids],staffUuid:n,partUuid:s.partUuid,startDpq:s.startDpq,startTimePos:s.startTimePos,stopDpq:s.stopDpq,stopTimePos:s.stopTimePos}}getCurrentRangeContext(s){const n=this.scoreData.adagioData,r=s.getTimePosBounds();delete r.startMeasureUuid,delete r.stopMeasureUuid;const d=s.getLeftRightPositions();return r.partUuid=d.left.partUuid,r.staffUuid=d.left.staffUuid,r.measureUuids=n.getMeasureUuids(n.getMeasureIdxFromUuid(d.left.measureUuid),n.getMeasureIdxFromUuid(d.right.measureUuid)),r}on(...s){this.emiter.on(...s)}once(...s){this.emiter.once(...s)}off(...s){this.emiter.off(...s)}emit(...s){this.emiter.emit(...s)}}var Wc=Object.defineProperty,Uc=(t,s,n)=>s in t?Wc(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Bc=(t,s,n)=>Uc(t,typeof s!="symbol"?s+"":s,n);class jc extends tn{constructor({scoreData:s}){super({scoreData:s}),Bc(this,"scoreCommentsStoreActionSubscription"),this.watchUpdates(),this.scoreCommentsStoreActionSubscription=()=>null}watchUpdates(){const s=(0,Ne.O)();this.scoreCommentsStoreActionSubscription=s.$onAction(({name:n,after:r})=>{(n==="createOrEditComment"||n==="resolveComment"||n==="deleteComment"||n==="cache")&&r(()=>(0,e.dY)(()=>this.loadFromStore()))}),this.loadFromStore()}unsubscribeScoreCommentStore(){this.scoreCommentsStoreActionSubscription&&this.scoreCommentsStoreActionSubscription()}loadFromStore(){const s=(0,Ne.O)(),n=(0,e.EW)(()=>s.comments);this.comments=n.value.filter(r=>!r.replyTo&&r.context&&!r.resolved),this.refresh()}resolveComment(s){return new Promise((n,r)=>{(0,e.dY)(()=>{const d=(0,Pe.N)().score,{resolveComment:a}=(0,Ne.O)();a({scoreId:d.id,sharingKey:d.sharingKey,comment:s.id}).then(n).catch(r)})})}updateComment(s,n){return new Promise((r,d)=>{(0,e.dY)(()=>{const a=(0,Pe.N)().score,{editComment:f}=(0,Ne.O)();f({scoreId:a.id,sharingKey:a.sharingKey,comment:s.id,body:{context:n}}).then(r).catch(d)})})}highlightComment(s){const{setHighlightedComment:n}=(0,Ne.O)();n((s==null?void 0:s.id)||null)}}var Po=o(842746),Kc=o(832560),bt=o(701387),Lo=o(726042);function Nc(t,s){return t=t.filter(n=>Xc(n,s)),t}function Xc(t,s){if(!t.context||t.context.partUuid!==s.partUuid||t.context.staffUuid!==s.staffUuid||!t.context.measureUuids.includes(s.measureUuid))return!1;const n=t.context.measureUuids[0];if(s.measureUuid===n){const d=Lo.default.lcm(s.dpq,t.context.startDpq),a=s.timePos*(d/s.dpq),f=t.context.startTimePos*(d/t.context.startDpq);if(a<f)return!1}const r=t.context.measureUuids[t.context.measureUuids.length-1];if(s.measureUuid===r){const d=Lo.default.lcm(s.dpq,t.context.stopDpq),a=s.timePos*(d/s.dpq),f=t.context.stopTimePos*(d/t.context.stopDpq);if(a>=f)return!1}return!0}var ei=o(601770),$c=Object.defineProperty,zc=(t,s,n)=>s in t?$c(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,sn=(t,s,n)=>zc(t,typeof s!="symbol"?s+"":s,n);function Hc(t,s){return t.length===0?null:t.length===1?t[0]:new Vc(s).process(t)}class Vc{constructor(s){sn(this,"scoreData"),sn(this,"measureUuidsMap"),sn(this,"measuresQuarterDurationsMap",new Map),this.scoreData=s;const n=s.getMeasuresHeaders();this.measureUuidsMap=new Map(n.map((r,d)=>[ei.A.getUuid(r),d]))}process(s){const r=s.map(d=>{const a=this.getInlineCommentDuration(d);return{inlineComment:d,duration:a}}).reduce((d,a)=>d===null||a.duration<d.duration?a:d,null);return r?r.inlineComment:null}getInlineCommentDuration(s){if(!s.context)throw new Error("Inline comment context is required to calculate duration");let n=0;const r=s.context.measureUuids,d=r.length;for(let a=0;a<d;a++){if(a===d-1)n+=s.context.stopTimePos/s.context.stopDpq;else{const f=r[a],h=this.getMeasureDuration(f);n+=h}a===0&&(n-=s.context.startTimePos/s.context.startDpq)}return n}getMeasureDuration(s){let n=this.measuresQuarterDurationsMap.get(s);if(n===void 0){const r=this.measureUuidsMap.get(s);if(r===void 0)throw new Error(`Measure with UUID ${s} not found`);const a=this.scoreData.getMeasure(0,r);n=bt.default.getQuarterDuration(a),this.measuresQuarterDurationsMap.set(s,n)}return n}}var on=o(515819),nn=o(446921),Ao=o(383279),Qc=Object.defineProperty,Gc=Object.defineProperties,Jc=Object.getOwnPropertyDescriptors,ti=Object.getOwnPropertySymbols,Yc=Object.prototype.hasOwnProperty,Zc=Object.prototype.propertyIsEnumerable,an=(t,s,n)=>s in t?Qc(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,rn=(t,s)=>{for(var n in s||(s={}))Yc.call(s,n)&&an(t,n,s[n]);if(ti)for(var n of ti(s))Zc.call(s,n)&&an(t,n,s[n]);return t},qc=(t,s)=>Gc(t,Jc(s)),ts=(t,s,n)=>an(t,typeof s!="symbol"?s+"":s,n);function eu(t,s){return new tu(s).process(t)}class tu{constructor(s){ts(this,"updated",[]),ts(this,"removed",[]),ts(this,"unchanged",[]),ts(this,"measureUuids",null),ts(this,"partUuids",null),ts(this,"staffUuids",null),ts(this,"scoreData"),this.scoreData=s}process(s){return s.forEach(this.processInlineComment,this),{updated:this.updated,removed:this.removed,unchanged:this.unchanged}}processInlineComment(s){if(!s.context)return;const n=s.context,r=this.getPartStaffIdx(n);if(!r){this.removed.push(s);return}const d=this.extractLeftSide(n,r);if(!d){this.removed.push(s);return}const a=this.extractRightSide(n,r);if(!a){this.removed.push(s);return}const f=this.createUpdatedContext(n,d,a);if(this.isInlineCommentUpdated(n,f,d,a)){const u=su(s,f);this.updated.push(u)}else this.unchanged.push(s)}getPartStaffIdx(s){const r=this.getPartUuids().get(s.partUuid);if(r===void 0)return null;if(s.staffIdx!==void 0)return{partIdx:r,staffIdx:s.staffIdx};if(s.staffUuid!==void 0){const a=this.getStaffUuids(r).get(s.staffUuid);return a!==void 0?{partIdx:r,staffIdx:a}:null}throw new Error("Inline comment context must contain either staffIdx or staffUuid")}getPartUuids(){if(!this.partUuids){const s=this.scoreData.getPartsContents();this.partUuids=new Map(s.map((n,r)=>[nn.A.getUuid(n),r]))}return this.partUuids}getStaffUuids(s){if(!this.staffUuids){const n=this.scoreData.getPartsHeaders(s);this.staffUuids=new Map(n.flatMap(r=>Ao.default.getStaffMapping(r).map((a,f)=>[a.staffUuid,f])))}return this.staffUuids}getMeasureIdx(s){const r=this.getMeasureUuids().get(s);return r!==void 0?r:null}getMeasureUuids(){if(!this.measureUuids){const s=this.scoreData.getMeasuresHeaders();this.measureUuids=new Map(s.map((n,r)=>[ei.A.getUuid(n),r]))}return this.measureUuids}extractLeftSide(s,n){for(let r=0;r<s.measureUuids.length;r++){const d=s.measureUuids[r],a=this.getMeasureIdx(d);if(a!==null){if(r===0){const f=this.scoreData.getMeasure(n.partIdx,a),h=bt.default.getQuarterDuration(f),u=bt.default.getDpq(f),g=on.default.quarterToDivisions(h,u),b=Lo.default.lcm(u,s.startDpq),P=g*(b/u);if(s.startTimePos*(b/s.startDpq)>=P)continue}return r===0?{timePos:s.startTimePos,dpq:s.startDpq,measureIdx:a,measureUuid:d,isUpdated:!1}:{timePos:0,dpq:1,measureIdx:a,measureUuid:d,isUpdated:!0}}}return null}extractRightSide(s,n){for(let r=s.measureUuids.length-1;r>=0;r--){const d=s.measureUuids[r],a=this.getMeasureIdx(d);if(a===null)continue;if(r===s.measureUuids.length-1){const b=this.scoreData.getMeasure(n.partIdx,a),P=bt.default.getQuarterDuration(b),F=bt.default.getDpq(b),S=on.default.quarterToDivisions(P,F),H=Lo.default.lcm(F,s.stopDpq),I=S*(H/F);if(s.stopTimePos*(H/s.stopDpq)>I)return{timePos:I,dpq:H,measureIdx:a,measureUuid:d,isUpdated:!0}}if(r===s.measureUuids.length-1)return{timePos:s.stopTimePos,dpq:s.stopDpq,measureIdx:a,measureUuid:d,isUpdated:!1};const f=this.scoreData.getMeasure(n.partIdx,a),h=bt.default.getQuarterDuration(f),u=bt.default.getDpq(f);return{timePos:on.default.quarterToDivisions(h,u),dpq:u,measureIdx:a,measureUuid:d,isUpdated:!0}}return null}createUpdatedContext(s,n,r){return{measureUuids:this.extractMeasureUuids(n.measureIdx,r.measureIdx),partUuid:s.partUuid,staffUuid:s.staffUuid,startTimePos:n.timePos,startDpq:n.dpq,stopTimePos:r.timePos,stopDpq:r.dpq}}extractMeasureUuids(s,n){const r=[];for(let d=s;d<=n;d++){const a=this.scoreData.getMeasureUuid(d);r.push(a)}return r}isInlineCommentUpdated(s,n,r,d){return r.isUpdated||d.isUpdated||s.measureUuids.length!==n.measureUuids.length?!0:s.measureUuids.every((a,f)=>a===n.measureUuids[f])}}function su(t,s){return qc(rn({},t),{context:rn(rn({},t.context),s)})}var ou=Object.defineProperty,nu=(t,s,n)=>s in t?ou(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,ao=(t,s,n)=>nu(t,typeof s!="symbol"?s+"":s,n);const iu="rgba(255,219,98,0.40)",au="rgba(255,197,0,0.40)";class ru{constructor({scoreData:s}){ao(this,"scoreData"),ao(this,"comments",[]),ao(this,"scoreCommentsStoreActionSubscription",null),ao(this,"cursorSubscription",null),ao(this,"emiter",new(en())),this.scoreData=s,this.watchUpdates()}watchUpdates(){const s=(0,Ne.O)();this.scoreCommentsStoreActionSubscription=s.$onAction(({name:r,after:d})=>{(r==="createOrEditComment"||r==="resolveComment"||r==="deleteComment"||r==="cache")&&d(()=>(0,e.dY)(()=>this.loadFromStore()))});const n=(0,Ce.W)();this.cursorSubscription=(0,e.wB)(()=>n.posTs,()=>{this.updateSelectedInlineComment(),this.paintComments()}),this.loadFromStore()}unsubscribeScoreCommentStore(){this.scoreCommentsStoreActionSubscription&&(this.scoreCommentsStoreActionSubscription(),this.scoreCommentsStoreActionSubscription=()=>{}),this.cursorSubscription&&(this.cursorSubscription(),this.cursorSubscription=null)}loadFromStore(){const s=(0,Ne.O)(),n=(0,e.EW)(()=>s.comments);this.comments=n.value.filter(r=>!r.replyTo&&r.context&&!r.resolved),this.refresh()}refresh(){const s=this.scoreData.adagioData,n=eu(this.comments,s);n.removed.forEach(this.resolveComment,this),n.updated.forEach(this.updateComment,this),this.comments=[...n.unchanged,...n.updated],this.updateSelectedInlineComment(),this.paintComments(),this.emit("refreshed")}resolveComment(s){return new Promise((n,r)=>{(0,e.dY)(()=>{const d=(0,Pe.N)().score,{resolveComment:a}=(0,Ne.O)();a({scoreId:d.id,sharingKey:d.sharingKey,comment:s.id}).then(n).catch(r)})})}updateComment(s){const n=s.context;return new Promise((r,d)=>{(0,e.dY)(()=>{const a=(0,Pe.N)().score,{editComment:f}=(0,Ne.O)();f({scoreId:a.id,sharingKey:a.sharingKey,comment:s.id,body:{context:n}}).then(r).catch(d)})})}updateSelectedInlineComment(){var s,n;const r=(n=(s=this.scoreData)==null?void 0:s.scoreActions)==null?void 0:n.cursor;if(!r)return;const d=r.getSelectedEntity();if(d.entityType!==Po.A.NOTE)return;const a=this.scoreData.adagioData,f=a.getMeasureIdxFromUuid(d.measureUuid),h=a.getPartIdxFromUuid(d.partUuid),u=a.getPartVoiceIdxFromUuid(h,d.voiceUuid),g=a.getMeasure(h,f),b=bt.default.getDpq(g),S=new Kc.A(g).getVoice(u).getRangeSpace(0,d.noteIdx),H=Nc(this.comments,{partUuid:d.partUuid,staffUuid:d.staffUuid,measureUuid:d.measureUuid,timePos:S,dpq:b}),I=Hc(H,this.scoreData.adagioData),{setHighlightedComment:Y}=(0,Ne.O)();Y((I==null?void 0:I.id)||null)}paintComments(){var s,n;const r=(n=(s=this.scoreData)==null?void 0:s.scoreActions)==null?void 0:n.cursorManager;if(!r)return;const d=(0,Ne.O)().highlightedComment,a=this.comments.map(f=>{const h=f.context,g=f.id===d?au:iu,b=h.staffUuid,P=[{partUuid:h.partUuid,staffUuid:b}],F=h.measureUuids[0],S=h.measureUuids[h.measureUuids.length-1],H=h.startTimePos,I=h.stopTimePos,Y=h.startDpq,Z=h.stopDpq;return{partStaves:P,startMeasureUuid:F,stopMeasureUuid:S,startTimePos:H,stopTimePos:I,startDpq:Y,stopDpq:Z,type:Po.A.RANGE_SELECTION,color:g}});r.setInlineComments(a),r.sendCursorRequest(!0)}getCurrentRangeContext(s){const n=this.scoreData.adagioData,{startTimePos:r,startDpq:d,stopTimePos:a,stopDpq:f}=s.getTimePosBounds(),h=s.getLeftRightPositions(),{partUuid:u,staffUuid:g}=h.left,b=n.getMeasureUuids(n.getMeasureIdxFromUuid(h.left.measureUuid),n.getMeasureIdxFromUuid(h.right.measureUuid));return{partUuid:u,staffUuid:g,measureUuids:b,startTimePos:r,stopTimePos:a,startDpq:d,stopDpq:f}}on(s,n){this.emiter.on(s,n)}once(s,n){this.emiter.once(s,n)}off(s,n){n?this.emiter.off(s,n):this.emiter.off(s)}emit(s,...n){this.emiter.emit(s,...n)}}var ln=o(218014),lu=o(493369),du=o(124872),cu=o.n(du),uu=o(616877),si=o.n(uu),_u=o(968506),oi=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});class pu extends _u.A{addBreadcrumb({method:s,parameters:n}){const r={category:"embed.js",message:`method: ${s}`};n&&(r.data={params:JSON.stringify(n)}),pe.sQ.addBreadcrumb(r)}loadFlatScore(s){return oi(this,null,function*(){if(!s)throw new TypeError("Missing parameters");let n;if(typeof s=="string")n=s;else{if(typeof s.score!="string")throw new TypeError("Score identifier must be a string");n=s.score}throw new Error(`loadFlatScore(${n}) is not implemented`)})}loadJSON(s){return oi(this,null,function*(){if(typeof s=="string")try{s=JSON.parse(s)}catch(n){throw new TypeError("Invalid score JSON")}try{this.embed.loadScore({scoreJson:s})}catch(n){throw(0,Pe.N)().setGlobalError(400),(0,pe.vV)(n),new TypeError(`Error while loading the score. ${n.name}: ${n.message}`)}})}}const mu=pu,ni=[],gu=["export"],fu=["instruments"],hu={class:"main-errors"};function vu(t,s,n,r,d,a){const f=(0,e.g2)("loader-spinner");return(0,e.uX)(),(0,e.CE)("div",hu,[(0,e.bF)(f,{size:50,"line-size":3})])}var ss=o(743161);const yu={name:"ScoreDriveImport",components:{LoaderSpinner:ss.A}},bu=(0,k.A)(yu,[["render",vu]]),Eu={class:"se-score-scrollable",ref:"scrollable"},Cu={class:"se-score",id:"editor-content",role:"region","aria-label":"Sheet music"},Su={class:"se-fl-vertical-page"},Pu={class:"se-editor-video"};function Lu(t,s,n,r,d,a){const f=(0,e.g2)("ScoreTextTools2"),h=(0,e.g2)("ScoreTextTools"),u=(0,e.g2)("score-loading"),g=(0,e.g2)("ScoreDrawer2"),b=(0,e.g2)("ScoreDrawer"),P=(0,e.g2)("MeasureControls"),F=(0,e.g2)("panel-inline-comments"),S=(0,e.g2)("new-inline-comment"),H=(0,e.g2)("action-menu-range"),I=(0,e.g2)("action-menu-paste"),Y=(0,e.g2)("unpitched-tooltip"),Z=(0,e.g2)("drumset-cheat-sheet"),Fe=(0,e.g2)("FButton");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(["se-content",{track:r.layout==="track",page:r.layout==="page"}])},[(0,e.Lk)("div",Eu,[(0,e.Lk)("div",Cu,[(0,e.Lk)("div",Su,[n.isReady?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[a.useNewDisplay?((0,e.uX)(),(0,e.Wv)(f,{key:0,interaction:n.interaction,"request-position":a.requestPosition},null,8,["interaction","request-position"])):((0,e.uX)(),(0,e.Wv)(h,{key:1,interaction:n.interaction},null,8,["interaction"]))],64)):(0,e.Q3)("",!0),n.isReady?((0,e.uX)(),(0,e.CE)(e.FK,{key:2},[a.useNewDisplay?((0,e.uX)(),(0,e.Wv)(g,{key:0,ref:"drawer",onFontsLoaded:s[0]||(s[0]=dt=>d.fontsLoaded=!0),class:(0,l.C4)({rw:r.scoreWrite,mob:r.displayMobileEditor,[t.$style.scoreDrawer2]:!0}),interaction:n.interaction,collaborators:n.collaborators,"inline-comments":n.inlineComments,"draw-queue":n.adagioQueue,"provided-score-data":null,"clickable-part-name":!0,"has-bottom-margin":!1,"display-status":n.displayStatus,"scrollable-element":t.$refs.scrollable},null,8,["class","interaction","collaborators","inline-comments","draw-queue","display-status","scrollable-element"])):(0,e.bo)(((0,e.uX)(),(0,e.Wv)(b,{key:1,onFontsLoaded:s[1]||(s[1]=dt=>d.fontsLoaded=!0),class:(0,l.C4)({rw:r.scoreWrite,mob:r.displayMobileEditor}),"scrollable-element":t.$refs.scrollable,interaction:n.interaction,collaborators:n.collaborators,"inline-comments":n.inlineComments,"draw-queue":n.adagioQueue,"display-status":n.displayStatus},null,8,["class","scrollable-element","interaction","collaborators","inline-comments","draw-queue","display-status"])),[[C.aG,d.fontsLoaded]])],64)):((0,e.uX)(),(0,e.Wv)(u,{key:1})),a.canDisplayMeasureControls?((0,e.uX)(),(0,e.Wv)(P,{key:3,interaction:n.interaction,"draw-queue":n.adagioQueue},null,8,["interaction","draw-queue"])):(0,e.Q3)("",!0),a.displayInlineComments&&r.layout==="page"?(0,e.bo)(((0,e.uX)(),(0,e.Wv)(F,{key:4,"inline-comments":n.inlineComments,interaction:n.interaction,"request-range-positions":a.requestRangePositions,class:"page"},null,8,["inline-comments","interaction","request-range-positions"])),[[C.aG,d.fontsLoaded]]):(0,e.Q3)("",!0)]),r.inlineCommentPopoverDisplayed?((0,e.uX)(),(0,e.Wv)(S,{key:0,"inline-comments":n.inlineComments,interaction:n.interaction},null,8,["inline-comments","interaction"])):(0,e.Q3)("",!0),r.actionMenuRangeDisplayed?((0,e.uX)(),(0,e.Wv)(H,{key:1,interaction:n.interaction,"show-comment":!0},null,8,["interaction"])):(0,e.Q3)("",!0),r.actionMenuPasteDisplayed?((0,e.uX)(),(0,e.Wv)(I,{key:2,interaction:n.interaction,"request-position":a.requestPosition},null,8,["interaction","request-position"])):(0,e.Q3)("",!0),r.unpitchedTooltipDisplayed?((0,e.uX)(),(0,e.Wv)(Y,{key:3,options:r.unpitchedTooltipOptions},null,8,["options"])):(0,e.Q3)("",!0)])],512),(0,e.bo)((0,e.Lk)("div",Pu,s[2]||(s[2]=[(0,e.Lk)("div",{id:"editor-video"},null,-1)]),512),[[C.aG,a.displayTrackVideo]]),a.displayInlineComments&&r.layout==="track"?((0,e.uX)(),(0,e.Wv)(F,{key:0,"inline-comments":n.inlineComments,interaction:n.interaction,class:"track"},null,8,["inline-comments","interaction"])):(0,e.Q3)("",!0),r.staffStyle==="unpitched"?((0,e.uX)(),(0,e.Wv)(Z,{key:1})):(0,e.Q3)("",!0),!r.displayMobileEditor&&r.onboardingStep&&r.onboardingStep!==d.TourStep.SCORE_CLICKABLE?((0,e.uX)(),(0,e.Wv)(Fe,{key:2,class:(0,l.C4)(t.$style.skipOnboardingDesktop),type:"button",onClick:a.skipTour,theme:"outline",size:"small","default-text":"flat:tour.editor-tour.skip-guidance"},null,8,["class","onClick"])):(0,e.Q3)("",!0)],2)}var Au=o(558948),Mu=o(894715),Du=o(579808),Tu=o(322732);const Ou={class:"action-menu-ddn",id:"inline-comment-icon-container-touch"},ku={"x-arrow":""},xu=["id","textContent","data-action-menu","onPointerup"];function wu(t,s,n,r,d,a){return(0,e.uX)(),(0,e.CE)("div",Ou,[(0,e.bo)((0,e.Lk)("div",ku,null,512),[[C.aG,!r.inlineCommentPopoverDisplayed]]),(0,e.bo)((0,e.Lk)("ul",null,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.itemsToRender,f=>((0,e.uX)(),(0,e.CE)("li",{key:f.title,id:f.id,textContent:(0,l.v_)(f.title),"data-action-menu":f.title,onClick:s[0]||(s[0]=(0,C.D$)(()=>{},["prevent"])),onTouchstart:s[1]||(s[1]=(0,C.D$)(()=>{},["prevent"])),onPointerup:(0,C.D$)(h=>f.action(),["prevent"])},null,40,xu))),128))],512),[[C.aG,!r.inlineCommentPopoverDisplayed]])])}var dn=o(783810),Iu=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const Ru={name:"ActionMenu",props:{items:{type:Array,required:!0},close:{type:Function,required:!0},elem:{type:SVGElement,required:!1,default:null},position:{type:String,required:!1,default:null},offset:{type:Number,default:null}},setup(){const t=(0,N.q6)();return{inlineCommentPopoverDisplayed:(0,e.EW)(()=>t.inlineCommentPopoverDisplayed)}},computed:{itemsToRender(){return this.items.filter(t=>t.condition)}},methods:{createPopper(){if(!this.position||!this.elem||!this.elem.isConnected)return;this.$popper&&this.destroyPopper();let t=5;this.offset!==null&&(t=this.offset);const s={placement:this.position,strategy:"fixed",modifiers:{preventOverflow:{boundariesElement:"viewport"},arrow:{enabled:!0},offset:{enabled:!0,offset:`0, ${t}`}}};this.$popper=new dn.A(this.elem,this.$el,s)},destroyPopper(){this.$popper&&(this.$popper.destroy(),this.$popper=null)}},watch:{position(){this.createPopper()},elem(){this.createPopper()},inlineCommentPopoverDisplayed(){return Iu(this,null,function*(){yield this.$nextTick(),this.$popper&&this.$popper.update()})}},mounted(){this.createPopper()},beforeUnmount(){this.destroyPopper()}};var aL=o(972661);const ii=(0,k.A)(Ru,[["render",wu],["__scopeId","data-v-470b5640"]]);var Fu=Object.defineProperty,ai=Object.getOwnPropertySymbols,Wu=Object.prototype.hasOwnProperty,Uu=Object.prototype.propertyIsEnumerable,ri=(t,s,n)=>s in t?Fu(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Bu=(t,s)=>{for(var n in s||(s={}))Wu.call(s,n)&&ri(t,n,s[n]);if(ai)for(var n of ai(s))Uu.call(s,n)&&ri(t,n,s[n]);return t},ju=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const Ku={key:0},Nu={__name:"ActionMenuPaste",props:{interaction:{type:Object,required:!0},showComment:{type:Boolean,required:!1},requestPosition:{type:Function,required:!1}},setup(t){const s=t,n=(0,te.KR)("top-left"),r=(0,N.q6)(),d=(0,Ne.O)(),a=(0,we.U)(),f=(0,Ce.W)(),h=(0,Se.H)(),u=(0,e.EW)(()=>d.canCreateNewCommentsThread),g=(0,e.EW)(()=>a.env),b=(0,e.EW)(()=>s.showComment&&g.value==="editor"&&u.value),P=(0,e.EW)(()=>a.scoreWrite),F=(0,e.EW)(()=>f.isEditionBlocked),S=(0,e.EW)(()=>h.enabledActionsSet),H=(0,e.EW)(()=>({partUuid:f.partUuid,measureUuid:f.measureUuid,staffUuid:f.staffUuid})),I=(0,e.EW)(()=>S.value.has("paste")&&!F.value&&P.value),Y=(0,e.EW)(()=>S.value.has("cut")&&!F.value&&P.value),Z=(0,e.EW)(()=>S.value.has("copy")),Fe=(0,e.EW)(()=>S.value.has("remove")&&!F.value&&P.value),dt=(0,e.EW)(()=>b.value||Y.value||Z.value||Fe.value),Ve=(0,e.EW)(()=>I.value||dt.value),oe=(0,e.EW)(()=>s.interaction.cursor.cursorDrawer!==null),Ft=(0,e.EW)(()=>oe.value?s.interaction.cursor.cursorDrawer.polygone.elem:document.querySelector(".cursor-teardrop")),Jt=(0,e.EW)(()=>r.layout),Wt=(0,Tu.I8z)(()=>ju(null,null,function*(){if(!oe.value){if(!s.requestPosition)throw new Error("requestPosition should be present for new-display action-menu(with no cursor drawer)");const Eo=Ft.value.getBoundingClientRect().y,Xs=yield s.requestPosition(Bu({entityType:Po.A.STAFF_MEASURE},H.value)),ps=Xs.result.bbox.minY,Rn=Jt.value==="track"?3:Xs.result.pageIdx,X9=document.querySelectorAll('[class^="pagePlaceholder"]')[Rn].getBoundingClientRect().y;return Eo-X9-ps}const V=Ft.value.getBoundingClientRect().y,U=s.interaction.cursor,Be=U.getPositionUuid(),Bt=U.pageLayout.uuidGetMeasureEnclosingStaffElem(Be).elem.querySelector(".staffLines").getBoundingClientRect().y;return V-Bt}),null),Yt=(0,e.EW)(()=>Wt.value!==null),us=(0,e.EW)(()=>[{title:_.MR.t("editor:paste.title"),condition:I.value,action:_s},{title:_.MR.t("editor:selectAll.title"),condition:!0,action:Mt},{title:_.MR.t("editor:selectAllParts.title"),condition:!0,action:Ns}]),Ut=()=>{r.closeActionMenuPaste()};function _s(){s.interaction.scoreData.scoreActions.emitXp("editor.paste-ActionMenu"),s.interaction.scoreData.scoreActions.executePublicAction("paste"),Ut()}function Mt(){s.interaction.scoreData.scoreActions.emitXp("editor.paste-ActionMenu"),s.interaction.scoreData.scoreActions.executePublicAction("selectCompletePart"),Ut()}function Ns(){s.interaction.scoreData.scoreActions.emitXp("editor.paste-ActionMenu"),s.interaction.scoreData.scoreActions.executePublicAction("selectAllDisplayedParts"),Ut()}return(V,U)=>Ve.value&&Yt.value?((0,e.uX)(),(0,e.CE)("div",Ku,[(0,e.bF)(ii,{items:us.value,close:Ut,position:n.value,elem:Ft.value,offset:(0,te.R1)(Wt)},null,8,["items","position","elem","offset"])])):(0,e.Q3)("",!0)}};var li=o(818873),di=o(254007),Xu=Object.defineProperty,ci=Object.getOwnPropertySymbols,$u=Object.prototype.hasOwnProperty,zu=Object.prototype.propertyIsEnumerable,ui=(t,s,n)=>s in t?Xu(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,_i=(t,s)=>{for(var n in s||(s={}))$u.call(s,n)&&ui(t,n,s[n]);if(ci)for(var n of ci(s))zu.call(s,n)&&ui(t,n,s[n]);return t};function pi(t,s,n){if(!n||!(t!=null&&t.left)||!(s!=null&&s.left))return!1;const r=(0,li.A)(n,t.right,s.right)!==0,d=(0,li.A)(n,t.left,s.left)!==0,a=(0,di.A)(n,t.down,s.down)!==0,f=(0,di.A)(n,t.up,s.up)!==0;return r?"right":d?"left":a?"down":f?"up":!1}function mi(t,s,n,r=pi){const{upDownPositions:d,leftRightPositions:a,prevPosition:f}=t;let h=!1;s&&f&&(h=r(_i(_i({},a),d),f,s));const u=d.up.staffUuid===a.left.staffUuid,g=d.up.staffUuid!==d.down.staffUuid;let b;g?b=h==="down"||h==="right"&&u||h==="left"&&!u?"bottom":"top":b="top";const P=h==="right"||h==="bottom"&&u||h==="top"&&!u?"end":"start",F=b==="bottom"?n.length-1:0,S=`${b}-${P}`;return{rectIndex:F,position:S}}var Hu=Object.defineProperty,gi=Object.getOwnPropertySymbols,Vu=Object.prototype.hasOwnProperty,Qu=Object.prototype.propertyIsEnumerable,fi=(t,s,n)=>s in t?Hu(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,hi=(t,s)=>{for(var n in s||(s={}))Vu.call(s,n)&&fi(t,n,s[n]);if(gi)for(var n of gi(s))Qu.call(s,n)&&fi(t,n,s[n]);return t},vi=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const Gu={key:0},Ju={__name:"ActionMenuRange",props:{interaction:{type:Object,required:!0},showComment:{type:Boolean,required:!1}},setup(t){const s=t,n=(0,te.KR)(null),r=(0,te.KR)(null),d=(0,te.KR)(null),a=(0,Ne.O)(),f=(0,we.U)(),h=(0,Ce.W)(),u=(0,N.q6)(),g=(0,ze.O)(),b=(0,Se.H)(),P=(0,e.EW)(()=>a.canCreateNewCommentsThread),F=(0,e.EW)(()=>f.env),S=(0,e.EW)(()=>s.showComment&&F.value==="editor"&&P.value&&u.isCloudScore),H=(0,e.EW)(()=>f.scoreWrite),I=(0,e.EW)(()=>h.isEditionBlocked),Y=(0,e.EW)(()=>b.enabledActionsSet),Z=()=>{u.closeActionMenuRange()},Fe=()=>{s.interaction.scoreData.scoreActions.emitXp("editor.range-selection-ActionMenu"),s.interaction.scoreData.scoreActions.executePublicAction("cut"),Z()},dt=()=>vi(null,null,function*(){s.interaction.scoreData.scoreActions.emitXp("editor.range-selection-ActionMenu"),yield s.interaction.scoreData.scoreActions.executePublicAction("copy"),g.displayMessage({type:"default",text:_.MR.t("editor:copy.success")})}),Ve=()=>{s.interaction.scoreData.scoreActions.emitXp("editor.range-selection-ActionMenu"),s.interaction.scoreData.scoreActions.executePublicAction("remove"),Z()},oe=()=>{s.interaction.scoreData.scoreActions.emitXp("editor.range-selection-ActionMenu"),u.openInlineCommentPopover()},Ft=(0,e.EW)(()=>S.value||Jt.value||Wt.value||Yt.value),Jt=(0,e.EW)(()=>Y.value.has("cut")&&!I.value&&H.value),Wt=(0,e.EW)(()=>Y.value.has("copy")),Yt=(0,e.EW)(()=>Y.value.has("remove")&&!I.value&&H.value),us=(0,e.EW)(()=>hi(hi({},s.interaction.rangeSelect.leftRightPositions),s.interaction.rangeSelect.upDownPositions)),Ut=(0,e.EW)(()=>s.interaction.rangeSelect.drawer!==null),_s=()=>Ut.value?s.interaction.rangeSelect.drawer.rects:Array.from(document.querySelectorAll(".range-selection-rectangle")).map(V=>({elem:V})),Mt=(0,te.KR)(_s()),Ns=(0,e.EW)(()=>[{title:_.MR.t("editor:cut.title"),condition:Jt.value,action:Fe},{title:_.MR.t("editor:copy.title"),condition:Wt.value,action:dt},{title:_.MR.t("editor:plainRemove.title"),condition:Yt.value,action:Ve},{title:_.MR.t("editor:comment.title"),condition:S.value,action:oe}]);return(0,e.wB)(us,(V,U)=>vi(null,null,function*(){if(Object.keys(V).length===0){Z();return}yield(0,e.dY)(),Mt.value=_s(),pi(V,U,s.interaction.scoreData.adagioData)&&(n.value=mi(s.interaction.rangeSelect,s.interaction.scoreData.adagioData,Mt.value))})),(0,e.wB)(Mt,()=>{var V;d.value=(V=Mt.value[n.value.rectIndex])==null?void 0:V.elem}),(0,e.wB)(n,()=>{var V;r.value=n.value.position,d.value=(V=Mt.value[n.value.rectIndex])==null?void 0:V.elem}),(0,e.sV)(()=>{n.value=mi(s.interaction.rangeSelect,s.interaction.scoreData.adagioData,Mt.value)}),(V,U)=>Ft.value?((0,e.uX)(),(0,e.CE)("div",Gu,[(0,e.bF)(ii,{items:Ns.value,close:Z,position:r.value,elem:d.value},null,8,["items","position","elem"])])):(0,e.Q3)("",!0)}},Yu=["aria-label"],Zu=["onClick"],qu={class:"name"};function e_(t,s,n,r,d,a){const f=(0,e.g2)("NoteIcon"),h=(0,e.g2)("PlayerMinimal"),u=(0,e.g2)("f-button"),g=(0,e.g2)("ContentDialog"),b=(0,e.g2)("portal"),P=(0,e.gN)("tooltip"),F=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("div",null,[(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{"data-cy":"drumset-cheatsheet-trigger",class:(0,l.C4)(t.$style.cheatSheetOpener),"aria-label":t.$t("editor:drumsetCheatSheet.open"),onPointerup:s[0]||(s[0]=(...S)=>a.openCheatSheet&&a.openCheatSheet(...S))},[(0,e.bF)(f)],42,Yu)),[[P,{text:t.$t("editor:drumsetCheatSheet.title"),placement:"top"}]]),d.cheatSheetOpened?((0,e.uX)(),(0,e.Wv)(b,{key:0,to:"app"},{default:(0,e.k6)(()=>[(0,e.bF)(g,{"data-cy":"drumset-cheatsheet-content",class:(0,l.C4)(t.$style.cheatSheetModal),title:t.$t("editor:cheatSheet.title"),onClose:a.closeCheatSheet,"show-as-overlay":"","color-mode":"dark"},{default:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.cheatSheetBody)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(d.cheatSheetList,(S,H)=>((0,e.uX)(),(0,e.CE)("div",{key:H},[(0,e.Lk)("h5",{class:(0,l.C4)(t.$style.instrumentsCategory)},(0,l.v_)(t.$t(`editor:drumsetCategories.${S.category}`)),3),(0,e.Lk)("ul",{class:(0,l.C4)(t.$style.instrumentsList)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(S.instruments,(I,Y)=>((0,e.uX)(),(0,e.CE)("li",{key:Y,class:(0,l.C4)(t.$style.instrument)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.leftGroup)},[I.mp3Preview?((0,e.uX)(),(0,e.CE)("button",{key:0,class:(0,l.C4)(t.$style.audioPlayer),onClick:(0,C.D$)(Z=>a.playInstrumentPreview(I.name),["stop"])},[(0,e.bF)(h,{src:`${d.CDN_PREFIX}${I.mp3Preview}`,playing:d.playing===I.name,onEnd:s[1]||(s[1]=Z=>a.playInstrumentPreview(null)),"color-mode":"dark"},null,8,["src","playing"])],10,Zu)):(0,e.Q3)("",!0),I.shortname!==I.name?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,l.C4)(t.$style.shortname)},(0,l.v_)(I.shortname),3)):(0,e.Q3)("",!0),(0,e.Lk)("div",qu,(0,l.v_)(I.name),1)],2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.dottedLine)},null,2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.rightGroup)},[I.shortcuts?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,l.C4)(t.$style.shortcut)},(0,l.v_)(d.stringDisplayableKb(I.shortcuts)),3)):(0,e.Q3)("",!0),I.midiKey&&I.midiProgram&&I.notehead&&I.unpitched?(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,l.C4)(t.$style.icon)},null,2)),[[F,a.createDrumIcon(a.getDrumpadIconOptions(I,r.currentPart,15)).outerHTML,"svg"]]):(0,e.Q3)("",!0)],2)],2))),128))],2)]))),128))],2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.cheatSheetFooter)},[(0,e.bF)(u,{onClick:a.printCheatSheet,"default-text":"editor:exportPrintable.title"},null,8,["onClick"])],2)]),_:1},8,["class","title","onClose"])]),_:1})):(0,e.Q3)("",!0)])}var yi=o(971337),t_=o(119640),cn=o(26292),s_=o(827717);function o_(t){const s="misc",n=[];return t.standardizedMapping.forEach(r=>{var d;const a={name:r.longname,shortname:r.shortname,mp3Preview:r.mp3Preview,midiKey:r.midiKey,midiProgram:r.midiProgram,shortcut:r.shortcut,shortcuts:r.shortcuts,unpitched:r.unpitched,notehead:r.notehead},f=(d=r.category)!=null?d:s;n.find(h=>h.category===f)||n.push({category:f,instruments:[]}),n.find(h=>h.category===f).instruments.push(a)}),n}var n_=o(369900);const i_={name:"DrumsetCheatSheet",components:{PlayerMinimal:t_.A,ContentDialog:ft.A,NoteIcon:yi.A},props:{},setup(){const t=(0,Ce.W)(),s=(0,nt.B)();return{currentPart:(0,e.EW)(()=>t.currentPart),addExperience:s.addExperience}},data(){return{cheatSheetOpened:!1,cheatSheetList:[],playing:null,CDN_PREFIX:`${q.A.assetsurl}/sounds/instruments-previews/`,stringDisplayableKb:cn.lD}},methods:{openCheatSheet(){this.addExperience("editor.drums-cheat-sheet.open"),this.updateInstruments(),this.cheatSheetOpened=!0},closeCheatSheet(){this.cheatSheetOpened=!1},toggleCheatSheet(){this.cheatSheetOpened=!this.cheatSheetOpened},printCheatSheet(){this.addExperience("editor.drums-cheat-sheet.export"),window.print()},updateInstruments(){this.cheatSheetList=o_(this.currentPart)},playInstrumentPreview(t){this.addExperience("editor.drums-cheat-sheet.play"),this.playing=t},createDrumIcon:s_.A,getDrumpadIconOptions:n_.A}};var a_=o(197372),r_=o.n(a_);const bi={};bi.$style=r_();const l_=(0,k.A)(i_,[["render",e_],["__cssModules",bi]]),d_=o.p+"img/eeecbfd25edf1e90187b.svg",c_=o.p+"img/7015f41da89344487b38.svg",u_=["aria-label"],__=["aria-label"];function p_(t,s,n,r,d,a){return(0,e.uX)(),(0,e.CE)("div",null,[(0,e.bo)((0,e.Lk)("div",{class:(0,l.C4)(t.$style.measureControls),ref:"control",style:(0,l.Tr)(d.positionStyle)},[a.canAddMeasure?((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:s[0]||(s[0]=(...f)=>a.addMeasure&&a.addMeasure(...f)),onTouchstart:s[1]||(s[1]=(...f)=>a.addMeasure&&a.addMeasure(...f)),type:"button","aria-label":t.$t("editor:addMeasureToEnd.title")},s[4]||(s[4]=[(0,e.Lk)("img",{src:d_},null,-1)]),40,u_)):(0,e.Q3)("",!0),a.canRemoveMeasure?((0,e.uX)(),(0,e.CE)("button",{key:1,onClick:s[2]||(s[2]=(...f)=>a.removeMeasure&&a.removeMeasure(...f)),onTouchstart:s[3]||(s[3]=(...f)=>a.removeMeasure&&a.removeMeasure(...f)),"aria-label":t.$t("editor:removeLastMeasure.title"),type:"button"},s[5]||(s[5]=[(0,e.Lk)("img",{src:c_},null,-1)]),40,__)):(0,e.Q3)("",!0)],6),[[C.aG,a.canDisplay&&d.isTargetBigEnough]])])}var m_=o(472838),Ei=o(870760),un=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const g_=8,f_=20,h_={name:"MeasureControls",components:{},data(){return{currentLastDrawTs:null,currentZoom:0,positionStyle:{top:0,lef:0},isUpdateScheduled:!1,hasMultipleMeasures:!1,isTargetBigEnough:!1}},props:{interaction:{type:Object,required:!0},drawQueue:{type:Object,required:!0}},setup(){const t=(0,N.q6)(),s=(0,Se.H)();return{isLastMeasureDrawn:(0,e.EW)(()=>t.isLastMeasureDrawn),lastDrawTs:(0,e.EW)(()=>t.lastDrawTs),zoom:(0,e.EW)(()=>t.zoom),spaceSize:(0,e.EW)(()=>t.spaceSize),enabledActionsSet:(0,e.EW)(()=>s.enabledActionsSet)}},computed:{canScheduleUpdate(){return this.canDisplay&&!this.isUpdateScheduled&&(this.lastDrawTs!==this.currentLastDrawTs||this.currentZoom!==this.zoom)},canDisplay(){return this.isLastMeasureDrawn},canAddMeasure(){return!!this.enabledActionsSet.has("addMeasureToEnd")},canRemoveMeasure(){return this.hasMultipleMeasures&&!!this.enabledActionsSet.has("removeLastMeasure")}},watch:{canScheduleUpdate:{handler(t){t&&this.scheduleUpdate()},immediate:!0}},methods:{scheduleUpdate(){return un(this,null,function*(){this.isUpdateScheduled=!0,yield(0,m_.default)(),this.drawQueue.add(()=>un(this,null,function*(){if(!this.canDisplay){this.isUpdateScheduled=!1;return}yield this.updateDisplay(),this.isUpdateScheduled=!1}))})},forceUpdate(){this.currentLastDrawTs=null},updateDisplay(){return un(this,null,function*(){const t=this.interaction.scoreData.adagioData.getNbMeasures();this.hasMultipleMeasures=t>1;const s=this.interaction.cursor.verticalScrollableElement;s.appendChild(this.$refs.control);const r=this.getTarget(s).getBoundingClientRect();if(this.isTargetBigEnough=this.spaceSize*4>=f_,!this.isTargetBigEnough)return;yield(0,e.dY)();const d=s.getBoundingClientRect(),a=this.$refs.control.getBoundingClientRect(),f=r.x+r.width+s.scrollLeft-d.x+g_,h=r.y+r.height/2+s.scrollTop-d.y-a.height/2;this.positionStyle={top:`${h}px`,left:`${f}px`},this.currentLastDrawTs=this.lastDrawTs,this.currentZoom=this.zoom})},getTarget(t){const s=Array.from(t.querySelectorAll(".scoreShard-content"));return s[s.length-1].querySelector(".staffLines")},removeMeasure(t){t.preventDefault(),this.interaction.scoreData.scoreActions.executePublicAction("removeLastMeasure")},addMeasure(t){t.preventDefault(),this.interaction.scoreData.scoreActions.executePublicAction("addMeasureToEnd")}},mounted(){this.boundForceUpdate=this.forceUpdate.bind(this),window.addEventListener("resize",this.boundForceUpdate,Ei.A)},beforeUnmount(){window.removeEventListener("resize",this.boundForceUpdate,Ei.A);const t=this.$refs.control.parentElement;t&&t.removeChild(this.$refs.control)}};var v_=o(856714),y_=o.n(v_);const Ci={};Ci.$style=y_();const b_=(0,k.A)(h_,[["render",p_],["__cssModules",Ci]]),E_={key:0,class:"unpitched-tooltip-ddn"},C_={class:"notehead-icon"},S_={class:"label"},P_={key:0};function L_(t,s){const n=(0,e.gN)("dompurify-html");return t.lineNoteheads.length>0?((0,e.uX)(),(0,e.CE)("div",E_,[s[0]||(s[0]=(0,e.Lk)("div",{"x-arrow":""},null,-1)),(0,e.Lk)("ul",null,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(t.lineNoteheads,r=>((0,e.uX)(),(0,e.CE)("li",null,[(0,e.bo)((0,e.Lk)("div",C_,null,512),[[n,t.getHeadIcon(r.notehead),"svg"]]),(0,e.Lk)("span",S_,[(0,e.eW)((0,l.v_)(r.title)+" ",1),Array.isArray(r.shortcuts)&&r.shortcuts.length>0?((0,e.uX)(),(0,e.CE)("span",P_," ("+(0,l.v_)(t.stringDisplayableKb(r.shortcuts))+")",1)):(0,e.Q3)("",!0)])]))),256))])])):(0,e.Q3)("",!0)}var vt=o(353922);function A_(t,s){const n=[],r=t.standardizedMapping;return r==null||r.forEach(d=>{d.noteline===s&&n.push({notehead:d.notehead,shortcut:d.shortcut,shortcuts:d.shortcuts,title:d.longname})}),n}const M_=new Map([[vt.A.NORMAL,_t.default.headWoStem],[vt.A.CROSS,_t.default.headCrossWoStem],[vt.A.SQUARE,_t.default.headSquareWoStem],[vt.A.SLASHED,_t.default.headSlashedWoStem],[vt.A.BACK_SLASHED,_t.default.headBackSlashedWoStem],[vt.A.TRIANGLE,_t.default.headTriangleWoStem],[vt.A.INVERTED_TRIANGLE,_t.default.headInvertedTriangleWoStem],[vt.A.ARROW_DOWN,_t.default.headArrowDownWoStem],[vt.A.ARROW_UP,_t.default.headArrowUpWoStem],[vt.A.X,_t.default.headXWoStem],[vt.A.X_CIRCLE,_t.default.headCircleXWoStem],[vt.A.DIAMOND,_t.default.headDiamondWoStem],[vt.A.SLASH,_t.default.headSlashWoStem]]),D_={name:"UnpitchedTooltip",props:{options:{type:Object,required:!0}},data(){return{stringDisplayableKb:cn.lD}},setup(){const t=(0,Ce.W)();return{currentPart:(0,e.EW)(()=>t.currentPart)}},computed:{lineNoteheads(){return A_(this.currentPart,this.options.line)}},methods:{createPopper(){var t;if(!((t=this.options)!=null&&t.elem)||this.lineNoteheads.length===0)return;this.$popper&&this.destroyPopper();const s={placement:"bottom",strategy:"fixed",modifiers:{arrow:{enabled:!0},offset:{enabled:!0,offset:"0, 5"},flip:{enabled:!1},preventOverflow:{enabled:!1,boundariesElement:"viewport"}}};this.$popper=new dn.A(this.options.elem,this.$el,s)},destroyPopper(){this.$popper&&(this.$popper.destroy(),this.$popper=null)},getHeadIcon(t){return M_.get(t)}},mounted(){this.createPopper()},beforeUnmount(){this.destroyPopper()}};var mL=o(626208);const T_=(0,k.A)(D_,[["render",L_]]);var O_=o(417264);const k_={class:"se-selected-ddn"};function x_(t,s,n,r,d,a){const f=(0,e.g2)("score-comment-input"),h=(0,e.g2)("f-button");return(0,e.uX)(),(0,e.CE)("div",k_,[(0,e.Lk)("div",{class:"se-incomment-popnew",onTouchstart:s[2]||(s[2]=(0,C.D$)(()=>{},["stop"])),onTouchend:s[3]||(s[3]=(0,C.D$)(()=>{},["stop"]))},[(0,e.bF)(f,{score:r.score,id:"input-new-comment",context:d.context,ref:"inputNewComment",onCancel:s[0]||(s[0]=u=>a.close()),"avatar-width":32,autofocus:!1},null,8,["score","context"]),(0,e.bF)(h,{onClick:s[1]||(s[1]=u=>a.submitForm()),loading:a.submitting,size:"small","default-text":"flat:score.inline-comments.popover.send"},null,8,["loading"])],32)])}var _n=o(904973);const w_={name:"NewInlineComment",components:{ScoreCommentInput:_n.A},data(){return{context:null}},props:{inlineComments:{type:Object,required:!0},interaction:{type:Object,required:!0}},methods:{close(){(0,N.q6)().closeInlineCommentPopover(),this.interaction.rangeSelect.reset()},submitForm(){this.$refs.inputNewComment.submit()}},setup(){const t=(0,Pe.N)();return{score:(0,e.EW)(()=>t.score)}},computed:{submitting(){var t;return(t=this.$refs.inputNewComment)==null?void 0:t.submitting}},created(){this.context=this.inlineComments.getCurrentRangeContext(this.interaction.rangeSelect)},mounted(){let t=document.getElementById("inline-comment-icon-container");if(t=t||document.getElementById("inline-comment-icon-container-touch"),!t)this.close();else{const s={placement:"right",positionFixed:!0,modifiers:{preventOverflow:{boundariesElement:"viewport"}}};this.$popper=new dn.A(t,this.$el,s)}(0,e.dY)(()=>{this.$el.querySelector("textarea").focus()})},beforeUnmount(){this.$popper&&(this.$popper.destroy(),this.$popper=null)}};var fL=o(283429);const I_=(0,k.A)(w_,[["render",x_]]),R_={class:"panel-inline-comments"};function F_(t,s,n,r,d,a){const f=(0,e.g2)("panel-inline-comments-card");return(0,e.uX)(),(0,e.CE)("div",R_,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.firstLevelComments,h=>((0,e.uX)(),(0,e.Wv)(f,{style:(0,l.Tr)(d.cardsStyle[h.id]),interaction:n.interaction,key:h.id,comment:h,onCardHeight:u=>a.updateCardHeight(h.id,u)},null,8,["style","interaction","comment","onCardHeight"]))),128))])}const W_=["data-inline-comment"];function U_(t,s,n,r,d,a){const f=(0,e.g2)("panel-inline-comment"),h=(0,e.g2)("score-comment-input");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(["inline-comments-card",{highlighted:a.isHighlighted||d.replying||d.editing}]),"data-inline-comment":n.comment.id,onClick:s[2]||(s[2]=u=>a.goContext()),onTouchend:s[3]||(s[3]=(0,C.D$)(()=>{},["stop"]))},[(0,e.bF)(f,{comment:n.comment,onResolveComment:a.resolve,score:r.score,onIsEditing:a.isEditing,"is-highlighted":a.isHighlighted||d.replying||d.editing,"can-resolve-comment":a.canResolveComment},null,8,["comment","onResolveComment","score","onIsEditing","is-highlighted","can-resolve-comment"]),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.replies,u=>((0,e.uX)(),(0,e.Wv)(f,{key:u.id,comment:u,score:r.score,onDeleteComment:a.del,onIsEditing:a.isEditing,"is-highlighted":a.isHighlighted||d.replying||d.editing},null,8,["comment","score","onDeleteComment","onIsEditing","is-highlighted"]))),128)),r.canReplyToTeacherThread&&d.replying?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,l.C4)(t.$style["comment-reply-form"])},[(0,e.bF)(h,{score:r.score,reply:n.comment,onCancel:s[0]||(s[0]=u=>a.reply(!1)),onAutogrow:s[1]||(s[1]=u=>a.updateCardHeight()),autofocus:!1,"show-esc-text":!1,"show-user":!1},null,8,["score","reply"])],2)):(0,e.Q3)("",!0)],42,W_)}const B_={class:"comment-item"},j_={class:"t-details"},K_=["aria-label"],N_=["aria-label"],X_={key:0,class:"comment-text"},$_={key:1};function z_(t,s,n,r,d,a){const f=(0,e.g2)("CommentThreadAuthor"),h=(0,e.g2)("checkIcon"),u=(0,e.g2)("optionsVerticalIcon"),g=(0,e.g2)("popover-item"),b=(0,e.g2)("score-comment-input"),P=(0,e.g2)("f-button"),F=(0,e.gN)("tooltip"),S=(0,e.gN)("dropdown"),H=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("div",B_,[(0,e.Lk)("div",j_,[(0,e.bF)(f,{author:n.comment.user,"auth-user":r.author,date:n.comment.date,"display-date":a.displayDate},null,8,["author","auth-user","date","display-date"]),n.isHighlighted?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,l.C4)(t.$style["header-right"])},[n.canResolveComment&&!n.comment.replyTo?(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{key:0,class:(0,l.C4)(t.$style.resolve),onClick:s[0]||(s[0]=(...I)=>a.resolveComment&&a.resolveComment(...I)),"aria-label":t.$t("flat:score.inline-comments.resolve")},[(0,e.bF)(h)],10,K_)),[[F,{text:t.$t("flat:score.comments.resolveComment"),placement:"bottom",maxWidth:130}]]):(0,e.Q3)("",!0),r.isCommentAuthor?(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{key:1,class:(0,l.C4)(t.$style.more),"aria-label":t.$t("flat:score.inline-comments.more-options")},[(0,e.bF)(u,{class:"ddn-trigger"}),(0,e.Lk)("div",{class:(0,l.C4)(["ddn-content",t.$style["more-ddn"]])},[s[3]||(s[3]=(0,e.Lk)("div",{"x-arrow":""},null,-1)),(0,e.Lk)("ul",null,[(0,e.bF)(g,{as:"button",onClick:s[1]||(s[1]=I=>d.isEditing=!0)},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:score.comments.edit")),1)]),_:1})])],2)],10,N_)),[[S,{placement:"bottom"}]]):(0,e.Q3)("",!0)],2)):(0,e.Q3)("",!0)]),d.isEditing?((0,e.uX)(),(0,e.CE)("div",$_,[(0,e.bF)(b,{"show-user":!1,score:n.score,edit:n.comment,ref:"inputNewComment","show-esc-text":!1,onCancel:s[2]||(s[2]=I=>d.isEditing=!1)},null,8,["score","edit"]),(0,e.Lk)("div",{class:(0,l.C4)(["btn-group",t.$style["reply-btn-group"]])},[(0,e.bF)(P,{onClick:a.cancelUpdateComment,size:"small",theme:"ghost-subdue","default-text":"flat:cancel"},null,8,["onClick"]),(0,e.bF)(P,{onClick:a.updateComment,size:"small","default-text":"flat:send"},null,8,["onClick"])],2)])):(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",X_,null,512)),[[H,n.comment.safeHTML]])])}var H_=o(852181),Si=o(818606),Pi=o(823828);const V_=["datetime"];function Q_(t,s,n,r,d,a){const f=(0,e.g2)("UserPicture");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(t.$style["thread-creator-info"])},[(0,e.bF)(f,{uid:n.author,width:32,href:"profile"},null,8,["uid"]),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.info)},[n.authUser?((0,e.uX)(),(0,e.CE)("h6",{key:0,class:(0,l.C4)(t.$style.author)},(0,l.v_)(n.authUser.printableName),3)):(0,e.Q3)("",!0),n.date?((0,e.uX)(),(0,e.CE)("time",{key:1,class:(0,l.C4)(t.$style.time),datetime:n.date},(0,l.v_)(a.relativeDate),11,V_)):(0,e.Q3)("",!0)],2)],2)}var pn=o(540888);const G_={name:"CommentThreadAuthor",props:{author:{type:[String,Object],required:!0},authUser:{type:Object,default:null},date:{type:[String,Date],default:""},displayDate:{type:[String,Date],default:""}},computed:{relativeDate(){return(0,pn.PI)(this.displayDate)}}};var J_=o(223894),Y_=o.n(J_);const Li={};Li.$style=Y_();const Z_=(0,k.A)(G_,[["render",Q_],["__cssModules",Li]]);var Mo=o(281313);const q_={name:"PanelInlineComment",props:{score:{type:Object,required:!0},comment:{type:Object,required:!0},isHighlighted:{type:Boolean,default:!1},canResolveComment:{type:Boolean,default:!1}},emits:["is-editing","resolve-comment","delete-comment"],data(){return{isEditing:!1}},watch:{isEditing(t){this.$emit("is-editing",t)}},components:{PopoverItem:Mo.fv,ScoreCommentInput:_n.A,CommentThreadAuthor:Z_,checkIcon:H_.A,optionsVerticalIcon:Si.A},setup(t){const s=(0,Pi.k)(),n=(0,fe.F)();return{isCommentAuthor:(0,e.EW)(()=>{var r;return((r=n.account)==null?void 0:r.id)&&n.account.id===t.comment.user}),author:(0,e.EW)(()=>s.users[t.comment.user])}},computed:{displayDate(){return this.comment.modificationDate||this.comment.date},isInlineComment(){return this.comment.context&&!!this.comment.context.partUuid}},methods:{resolveComment(t){this.$emit("resolve-comment",t)},deleteComment(t){this.$emit("delete-comment",t)},updateComment(){this.$refs.inputNewComment.submit()},cancelUpdateComment(){this.$refs.inputNewComment.cancel()}}};var ep=o(864731),tp=o.n(ep);const Ai={};Ai.$style=tp();const sp=(0,k.A)(q_,[["render",z_],["__cssModules",Ai]]);var op=Object.defineProperty,np=Object.defineProperties,ip=Object.getOwnPropertyDescriptors,Mi=Object.getOwnPropertySymbols,ap=Object.prototype.hasOwnProperty,rp=Object.prototype.propertyIsEnumerable,Di=(t,s,n)=>s in t?op(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,lp=(t,s)=>{for(var n in s||(s={}))ap.call(s,n)&&Di(t,n,s[n]);if(Mi)for(var n of Mi(s))rp.call(s,n)&&Di(t,n,s[n]);return t},dp=(t,s)=>np(t,ip(s));const cp={name:"PanelInlineCommentsCard",components:{PanelInlineComment:sp,ScoreCommentInput:_n.A},props:{comment:{type:Object,required:!0},interaction:{type:Object,required:!0}},emits:["cardHeight"],data(){return{cardHeight:0,editing:!1,replying:!1}},setup(){const t=(0,Ne.O)(),s=(0,Pe.N)(),n=(0,fe.F)();return{canReplyToTeacherThread:(0,e.EW)(()=>t.canReplyToTeacherThread),highlightedComment:(0,e.EW)(()=>t.highlightedComment),repliesTree:(0,e.EW)(()=>t.repliesTree),resolveComment:t.resolveComment,deleteComment:t.deleteComment,score:(0,e.EW)(()=>s.score),account:(0,e.EW)(()=>n.account)}},computed:dp(lp({},(0,A.aH)(N.q6,["layout"])),{replies(){return this.repliesTree[this.comment.id]||[]},isInlineComment(){return this.comment.context&&!!this.comment.context.partUuid},isHighlighted(){return this.highlightedComment===this.comment.id},isOwnComment(){return this.account.id===this.comment.user},canResolveComment(){return this.isOwnComment||this.score.user.id===this.account.id},hasBeenEdited(){return this.comment.modificationDate&&this.comment.modificationDate!==this.comment.date}}),methods:{updateCardHeight(){this.$el.offsetHeight!==this.cardHeight&&(this.cardHeight=this.$el.offsetHeight,this.$emit("cardHeight",this.cardHeight))},goContext(){if(this.editing?this.reply(!1):this.reply(!0),this.layout==="track")return;const t=this.comment.context;!t||!t.partUuid||this.interaction.scoreData.scoreActions.executePublicAction("setCursorPositionTimePos",{partUuid:t.partUuid,staffUuid:t.staffUuid,measureUuid:t.measureUuids[0],dpq:t.startDpq,timePos:t.startTimePos})},del(){this.deleteComment({scoreId:this.score.id,sharingKey:this.score.sharingKey,comment:this.comment.id})},resolve(){this.resolveComment({scoreId:this.score.id,sharingKey:this.score.sharingKey,comment:this.comment.id})},isEditing(t){t?(this.editing=!0,this.replying=!1):(this.editing=!1,this.replying=!0)},reply(t){this.replying=!!t}},mounted(){this.updateCardHeight()},updated(){this.updateCardHeight()}};var up=o(603656),_p=o.n(up);const Ti={};Ti.$style=_p();const pp=(0,k.A)(cp,[["render",U_],["__cssModules",Ti]]);var mp=Object.defineProperty,gp=Object.defineProperties,fp=Object.getOwnPropertyDescriptors,Oi=Object.getOwnPropertySymbols,hp=Object.prototype.hasOwnProperty,vp=Object.prototype.propertyIsEnumerable,ki=(t,s,n)=>s in t?mp(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,yp=(t,s)=>{for(var n in s||(s={}))hp.call(s,n)&&ki(t,n,s[n]);if(Oi)for(var n of Oi(s))vp.call(s,n)&&ki(t,n,s[n]);return t},bp=(t,s)=>gp(t,fp(s)),Ep=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const xi=8,Cp={name:"PanelInlineComments",components:{PanelInlineCommentsCard:pp},props:{inlineComments:{type:Object,required:!0},interaction:{type:Object,required:!0},requestRangePositions:{type:Function,required:!1}},data(){return{cardsHeight:{},cardsPosition:{},cardsStyle:{}}},setup(){const t=(0,Ne.O)();return{highlightedComment:(0,e.EW)(()=>t.highlightedComment),firstLevelInlineComments:(0,e.EW)(()=>t.firstLevelInlineComments),firstLevelInlineCommentsById:(0,e.EW)(()=>t.firstLevelInlineCommentsById)}},computed:bp(yp({useNewDisplay(){return(0,B.A)()}},(0,A.aH)(N.q6,["layout"])),{cardsSorted(){if(this.layout==="track")return this.highlightedComment?[this.highlightedComment]:[];const t=this.interaction.scoreData.adagioData,s=a=>!a.context||!Array.isArray(a.context.measureUuids)||a.context.measureUuids<1?0:t.getMeasureIdxFromUuid(a.context.measureUuids[0]),n=a=>!a.context||!a.context.partUuid?0:t.getPartIdxFromUuid(a.context.partUuid),r=[].concat(this.firstLevelInlineComments).sort((a,f)=>{const h=s(a),u=s(f);if(h!==u)return h-u;const g=n(a),b=n(f);return g-b}),d={};return r.forEach(a=>{d[a.id]=a}),r.map(a=>a.id)},firstLevelComments(){return this.cardsSorted.map(t=>this.firstLevelInlineCommentsById[t])}}),watch:{cardsSorted(){this.updateCardsPosition()}},methods:{updateCardHeight(t,s){this.cardsHeight[t]=s,this.updateCardsPosition()},updateCardsPosition(){if(this.layout==="track"){this.cardsStyle={};return}if(this.useNewDisplay){this.updateCardsPositionNewDisplay();return}let t=null;const s=this.cardsPosition={},n=document.getElementById("svg-content").getBoundingClientRect().top;this.cardsSorted.forEach(r=>{let d=document.querySelector(`.page rect[data-inline-comment="${r}"]`);if(d||(d=document.querySelector(".pageIntraMargin")),!d)return;const a=d.getBoundingClientRect().top;s[r]={},s[r].height=this.cardsHeight[r]||100,s[r].top=a-40-n,t&&s[r].top<s[t].bottom&&(s[r].top=s[t].bottom+xi),s[r].bottom=s[r].top+s[r].height,this.cardsStyle[r]={top:`${Math.round(s[r].top)}px`},t=r})},updateCardsPositionNewDisplay(){return Ep(this,null,function*(){if(!this.requestRangePositions)throw new Error("requestRangePositions function is required for new display mode");const t=new Map;this.firstLevelComments.forEach(f=>{const{context:h}=f;if(!h)return;const u=h.measureUuids,g=f.id,b={entityType:Po.A.RANGE_SELECTION,partStaves:[{partUuid:h.partUuid,staffUuid:h.staffUuid}],startMeasureUuid:u[0],startTimePos:h.startTimePos,startDpq:h.startDpq,stopMeasureUuid:u[u.length-1],stopTimePos:h.stopTimePos,stopDpq:h.stopDpq};t.set(g,b)});const s=yield this.requestRangePositions(t);if(!s){this.cardsSorted.forEach(f=>{this.cardsStyle[f]={display:"none"}});return}this.cardsPosition={};const n=document.querySelector(".se-score-scrollable");if(!n)throw new Error("Scrollable container not found");const r=n.getBoundingClientRect().top,d=n.scrollTop,a=this.cardsSorted.map(f=>{const h=s.result.get(f);if(!h)return this.cardsStyle[f]={display:"none"},null;const u=this.cardsHeight[f]||100,g=Sp(h.slices);if(!g)throw new Error(`No slice found for comment ${f}`);const[b]=g.partStaves,P=s.elems.get(b.pageIdx);if(!P)throw new Error(`No element found for comment ${f}`);const F=P.getBoundingClientRect().top,S=b.bbox.minY+F-r,I=(b.bbox.maxY-b.bbox.minY)/2-u/2,Y=Math.max(0,b.bbox.minY+F+d-r+I);return{commentId:f,top:Y,height:u}}).filter(f=>f!==null);a.sort((f,h)=>f.top-h.top),a.forEach((f,h)=>{if(h>0){const P=a[h-1];f.top=Math.max(f.top,P.top+P.height+xi)}const{commentId:u,top:g,height:b}=f;this.cardsStyle[u]={top:`${Math.round(g)}px`},this.cardsPosition[u]={top:g,bottom:g+b,height:b}})})}},created(){this.inlineComments.on("refreshed",()=>{this.updateCardsPosition()})}};function Sp(t){if(t.length===0)return null;const s=Math.floor(t.length/2);return t[s]}const Pp=(0,k.A)(Cp,[["render",F_]]),Lp={name:"ScoreEditorContent",components:{ScoreDrawer:Au.A,ScoreDrawer2:(0,e.$V)(()=>Promise.all([o.e(48779),o.e(68744)]).then(o.bind(o,968744))),ScoreLoading:Du.A,PanelInlineComments:Pp,NewInlineComment:I_,ActionMenuRange:Ju,ActionMenuPaste:Nu,ScoreTextTools:Mu.A,ScoreTextTools2:(0,e.$V)(()=>o.e(53911).then(o.bind(o,453911))),UnpitchedTooltip:T_,DrumsetCheatSheet:l_,MeasureControls:b_},props:{interaction:{type:Object,required:!0},collaborators:{type:Object,required:!0},inlineComments:{type:Object,required:!0},isReady:{type:Boolean,required:!0},adagioQueue:{type:Object,default:null},displayStatus:{type:Object,required:!0}},data(){return{inlineCommentsMarkersReady:!1,fontsLoaded:!1,TourStep:O_}},setup(){const t=(0,ct.w)(),s=(0,Ne.O)(),n=(0,we.U)(),r=(0,Pe.N)(),d=(0,N.q6)(),a=(0,Ce.W)(),f=(0,nt.B)();return{trackEditStep:(0,e.EW)(()=>t.trackEditStep),currentTrack:(0,e.EW)(()=>t.currentTrack),hasInlineComments:(0,e.EW)(()=>s.hasInlineComments),scoreWrite:(0,e.EW)(()=>n.scoreWrite),onboardingStep:(0,e.EW)(()=>r.onboardingStep),setOnboardingStep:r.setOnboardingStep,displayMobileEditor:(0,e.EW)(()=>d.displayMobileEditor),inlineCommentPopoverDisplayed:(0,e.EW)(()=>d.inlineCommentPopoverDisplayed),actionMenuRangeDisplayed:(0,e.EW)(()=>d.actionMenuRangeDisplayed),actionMenuPasteDisplayed:(0,e.EW)(()=>d.actionMenuPasteDisplayed),unpitchedTooltipDisplayed:(0,e.EW)(()=>d.unpitchedTooltipDisplayed),unpitchedTooltipOptions:(0,e.EW)(()=>d.unpitchedTooltipOptions),layout:(0,e.EW)(()=>d.layout),staffStyle:(0,e.EW)(()=>a.staffStyle),isEditionBlocked:(0,e.EW)(()=>a.isEditionBlocked),addExperience:f.addExperience}},computed:{displayInlineComments(){return this.isReady&&this.hasInlineComments&&this.inlineCommentsMarkersReady},displayTrackVideo(){return this.currentTrack&&this.currentTrack.type!=="audio"&&!this.trackEditStep},isPrinted(){return this.isReady&&this.$refs.drawer&&this.$refs.drawer.isPrinted},canDisplayMeasureControls(){return this.scoreWrite&&!this.isEditionBlocked},useNewDisplay(){return(0,B.A)()}},methods:{skipTour(){this.addExperience("editor.onboarding.skipped"),this.setOnboardingStep(null)},requestPosition(t){return this.$refs.drawer?this.$refs.drawer.requestPosition(t):Promise.resolve(null)},requestRangePositions(t){return this.$refs.drawer?this.$refs.drawer.requestRangePositions(t):Promise.resolve(null)}},mounted(){this.inlineComments.once("refreshed",()=>{this.inlineCommentsMarkersReady=!0})}};var Ap=o(704494),Mp=o.n(Ap);const wi={};wi.$style=Mp();const Dp=(0,k.A)(Lp,[["render",Lu],["__cssModules",wi]]),Tp={class:"se-top"};function Op(t,s,n,r,d,a){const f=(0,e.g2)("score-editor-header"),h=(0,e.g2)("ScoreEditorToolbar"),u=(0,e.g2)("toolbar-performance-recording"),g=(0,e.g2)("toolbar-performance-review");return(0,e.uX)(),(0,e.CE)("div",Tp,[r.displayChromelessUi?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(f,{key:0,interaction:n.interaction},null,8,["interaction"])),n.isReady?((0,e.uX)(),(0,e.Wv)(h,{key:1,"score-data":n.scoreData,"adagio-queue":n.adagioQueue},null,8,["score-data","adagio-queue"])):(0,e.Q3)("",!0),a.displayRecordingToolbar?((0,e.uX)(),(0,e.Wv)(u,{key:2,audio:n.scoreData.scoreActions.dependencies.audio},null,8,["audio"])):a.displayPerformanceReviewToolbar?((0,e.uX)(),(0,e.Wv)(g,{key:3,audio:n.scoreData.scoreActions.dependencies.audio},null,8,["audio"])):(0,e.Q3)("",!0)])}var kp=o(849324);const xp=["href","aria-label"],wp=["aria-disabled","aria-label"],Ip={key:2,class:"title loading"};function Rp(t,s,n,r,d,a){var f;const h=(0,e.g2)("flat"),u=(0,e.g2)("ScoreAudioControls"),g=(0,e.g2)("ScoreMidiControls"),b=(0,e.g2)("BtnTsNewAssignment"),P=(0,e.g2)("EditionBlockedSelect"),F=(0,e.g2)("FPowerButton"),S=(0,e.g2)("ActionCopyShareableLink"),H=(0,e.g2)("ActionEmbed"),I=(0,e.g2)("ScoreEditorHistoryBtn"),Y=(0,e.g2)("ScoreEditorHeaderCollaborators"),Z=(0,e.g2)("ScoreEditorShareBtn"),Fe=(0,e.g2)("ScoreEditorAcc"),dt=(0,e.gN)("tooltip");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(["se-header no-select",{offline:!r.online}])},[!r.parentWindow&&!r.isLtiFocusMode&&!r.isMusicSnippetContext?((0,e.uX)(),(0,e.CE)("a",{key:0,href:r.mainLeaveButtonUrl,class:"logo","aria-label":t.$t("flat:back-to-library"),"data-cy":"tb-exit-editor"},[(0,e.bF)(h,{class:"f-2021"})],8,xp)):(0,e.Q3)("",!0),r.score?(0,e.bo)(((0,e.uX)(),(0,e.CE)("a",{key:1,class:(0,l.C4)(["title",{[t.$style.disabledEdition]:r.isEditionBlocked}]),"aria-disabled":r.isEditionBlocked,onClick:s[0]||(s[0]=Ve=>a.openCredits()),"aria-label":t.$t("editor:toolbar.document-settings.title")},[(0,e.eW)((0,l.v_)(r.score.title),1)],10,wp)),[[dt,{text:t.$t("editor:toolbar.document-settings.title")}]]):((0,e.uX)(),(0,e.CE)("span",Ip,"Loading...")),n.interaction.audio&&r.tbAudioEnabled&&!r.hasNoPlayback?((0,e.uX)(),(0,e.Wv)(u,{key:3,audio:n.interaction.audio,"score-data":n.interaction.scoreData,class:"sv-playback"},null,8,["audio","score-data"])):(0,e.Q3)("",!0),n.interaction.midi&&n.interaction.audio&&r.tbMidiEnabled?((0,e.uX)(),(0,e.Wv)(g,{key:4,midi:n.interaction.midi,audio:n.interaction.audio,class:"sv-midi"},null,8,["midi","audio"])):(0,e.Q3)("",!0),r.displayTsNewAssignmentBtn?((0,e.uX)(),(0,e.Wv)(b,{key:5,"score-data":n.interaction.scoreData},null,8,["score-data"])):(0,e.Q3)("",!0),r.blockedEditionAvailable?((0,e.uX)(),(0,e.Wv)(P,{key:6,"score-data":n.interaction.scoreData,class:(0,l.C4)(t.$style.editionBlockedSelect)},null,8,["score-data","class"])):(0,e.Q3)("",!0),s[4]||(s[4]=(0,e.Lk)("div",{class:"separator"},null,-1)),(0,e.Lk)("div",{class:(0,l.C4)(["space-x-16px",t.$style["right-side"]])},[a.displayUpgrade?((0,e.uX)(),(0,e.Wv)(F,{key:0,onClick:s[1]||(s[1]=Ve=>t.showUpgradeDialog({ref:"editorCTA"})),"default-text":"flat:freemium.upgrade",size:"small","show-icon":!r.isEmbedAccount},null,8,["show-icon"])):(0,e.Q3)("",!0),r.isEmbedAccount?((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.bF)(S,{score:r.score},null,8,["score"]),(0,e.bF)(H,{score:r.score},null,8,["score"])],64)):(0,e.Q3)("",!0),!r.hasAccessToken&&!r.isMusicSnippetContext&&r.isCloudScore?((0,e.uX)(),(0,e.Wv)(I,{key:2})):(0,e.Q3)("",!0),!r.isMusicSnippetContext&&r.isCloudScore?((0,e.uX)(),(0,e.Wv)(Y,{key:3})):(0,e.Q3)("",!0),!r.isMusicSnippetContext&&!r.isEmbedAccount&&r.isCloudScore?((0,e.uX)(),(0,e.Wv)(Z,{key:4,"score-data":n.interaction.scoreData},null,8,["score-data"])):(0,e.Q3)("",!0),r.tbHelpEnabled?(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{key:5,class:"se-header-btn se-help-btn","aria-label":"Help",onClick:s[2]||(s[2]=Ve=>a.openHelp()),"data-cy":"tb-showHelp"},s[3]||(s[3]=[(0,e.Lk)("svg",{inline:"",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[(0,e.Lk)("path",{fill:"#268FF4","fill-rule":"evenodd",d:"M9,0 C13.97025,0 18,3.52125 18,7.875 C18,12.22875 13.97025,15.75 9,15.75 C8.654625,15.75 8.317125,15.7275 7.981875,15.69375 L3.375,18 L3.375,14.0175 C1.319625,12.5775 0,10.36125 0,7.875 C0,3.52125 4.02975,0 9,0 Z M9.018,2.808 C7.996,2.808 7.184,3.102 6.596,3.704 C5.994,4.292 5.7,5.09 5.7,6.112 L7.184,6.112 C7.184,5.496 7.31,5.006 7.562,4.67 C7.842,4.278 8.304,4.082 8.934,4.082 C9.438,4.082 9.83,4.222 10.11,4.502 C10.376,4.782 10.516,5.16 10.516,5.65 C10.516,6.014 10.39,6.35 10.138,6.672 L9.9,6.938 C9.032,7.708 8.5,8.282 8.304,8.674 C8.122,9.038 8.038,9.486 8.038,10.004 L8.038,10.242 L9.536,10.242 L9.536,10.004 C9.536,9.654 9.606,9.346 9.76,9.066 C9.886,8.814 10.082,8.576 10.334,8.352 C11.006,7.778 11.398,7.414 11.524,7.26 C11.86,6.812 12.042,6.238 12.042,5.552 C12.042,4.712 11.762,4.04 11.216,3.55 C10.656,3.046 9.928,2.808 9.018,2.808 Z M8.78,10.998 C8.486,10.998 8.248,11.082 8.066,11.278 C7.856,11.46 7.758,11.698 7.758,11.992 C7.758,12.272 7.856,12.51 8.066,12.706 C8.248,12.902 8.486,13 8.78,13 C9.06,13 9.312,12.902 9.522,12.72 C9.718,12.524 9.816,12.286 9.816,11.992 C9.816,11.698 9.718,11.46 9.522,11.278 C9.326,11.082 9.074,10.998 8.78,10.998 Z"})],-1)]))),[[dt,{text:t.$t("editor:toolbar.help.title",{helpShortcut:a.helpShortcut})}]]):(0,e.Q3)("",!0),!r.parentWindow&&!r.isLtiFocusMode&&!r.isMusicSnippetContext&&((f=r.account)!=null&&f.id)?((0,e.uX)(),(0,e.Wv)(Fe,{key:6})):(0,e.Q3)("",!0)],2)],2)}var Fp=o(135519),Do=o(356792),Wp=o(849123),mn=o(329047);const Up={"data-cy":"tb-editionBlocked"};function Bp(t,s,n,r,d,a){const f=(0,e.g2)("FSelectIcon");return(0,e.uX)(),(0,e.CE)("div",Up,[(0,e.bF)(f,{items:a.items,active:a.active,"is-white-background":r.displayMobileEditor,onSelectItem:a.selectItem,"aria-label":t.$t("editor:toolbar.readonly.title"),"tooltip-text":t.$t("editor:toolbar.readonly.title")},null,8,["items","active","is-white-background","onSelectItem","aria-label","tooltip-text"])])}var jp=o(164527);function Kp(t,s,n,r,d,a){const f=(0,e.g2)("CaratDown"),h=(0,e.g2)("CaratUp"),u=(0,e.g2)("Item"),g=(0,e.gN)("tooltip"),b=(0,e.gN)("dropdown");return(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",null,[(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{class:(0,l.C4)(["ddn-trigger",{[t.$style.ddnTrigger]:!0,[t.$style.triggerOpen]:d.open,[t.$style.whiteBackground]:n.isWhiteBackground}])},[((0,e.uX)(),(0,e.Wv)((0,e.$y)(a.activeIcon))),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.ddnTitle)},(0,l.v_)(a.activeName),3),d.open?((0,e.uX)(),(0,e.Wv)(h,{key:1})):((0,e.uX)(),(0,e.Wv)(f,{key:0}))],2)),[[g,a.tooltipOpts]]),d.open?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,l.C4)(["ddn-content",t.$style.ddnContent]),onClick:s[0]||(s[0]=(0,C.D$)(()=>{},["stop"])),onTouchstart:s[1]||(s[1]=(0,C.D$)(()=>{},["stop"])),onTouchend:s[2]||(s[2]=(0,C.D$)(()=>{},["stop"])),onMousedown:s[3]||(s[3]=(0,C.D$)(()=>{},["stop"])),onMouseup:s[4]||(s[4]=(0,C.D$)(()=>{},["stop"]))},[(0,e.Lk)("ul",null,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(n.items,P=>((0,e.uX)(),(0,e.Wv)(u,{class:(0,l.C4)(t.$style.item),key:P.id,item:P,"is-active":P.id===n.active,onSelectItem:a.selectItem},null,8,["class","item","is-active","onSelectItem"]))),128))])],34)):(0,e.Q3)("",!0)])),[[b,{onOpen:a.onOpen,onClose:a.onClose,placement:"bottom"}]])}var Np=o(127831);function Xp(t,s,n,r,d,a){return(0,e.uX)(),(0,e.CE)("li",{class:(0,l.C4)({[t.$style.root]:!0,[t.$style.active]:n.isActive})},[(0,e.Lk)("button",{type:"button",onClick:s[0]||(s[0]=f=>a.selectItem(n.item.id))},[((0,e.uX)(),(0,e.Wv)((0,e.$y)(n.item.icon))),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.itemName)},(0,l.v_)(n.item.name),3)])],2)}const $p={name:"FSelectIconItem",props:{item:{type:Object,required:!0},isActive:Boolean},emits:["selectItem"],methods:{selectItem(){this.$emit("selectItem",this.item.id)}}};var zp=o(316716),Hp=o.n(zp);const Ii={};Ii.$style=Hp();const Vp=(0,k.A)($p,[["render",Xp],["__cssModules",Ii]]),Qp={name:"FSelectIcon",props:{items:{type:Array,required:!0},active:{type:String,required:!0},tooltipText:{type:String,default:null},isWhiteBackground:Boolean},emits:["selectItem"],data(){return{open:!1}},components:{CaratDown:Gn.A,CaratUp:Np.A,Item:Vp},computed:{activeItem(){return this.items.find(t=>t.id===this.active)},activeName(){return this.activeItem.name},activeIcon(){return this.activeItem.icon},tooltipOpts(){return this.tooltipText?{text:this.tooltipText}:null}},methods:{selectItem(t){this.open=!1,this.$el.classList.remove("open"),this.$emit("selectItem",t)},onOpen(){this.open=!0},onClose(){this.open=!1}}};var Gp=o(449563),Jp=o.n(Gp);const Ri={};Ri.$style=Jp();const Yp=(0,k.A)(Qp,[["render",Kp],["__cssModules",Ri]]),Zp=[{id:"false",icon:Rt.A,textKey:"compose"},{id:"true",icon:jp.A,textKey:"ro"}],qp={name:"BlockedEditionSelect",components:{FSelectIcon:Yp},props:{scoreData:{type:Object,required:!0}},setup(){const t=(0,yt.k)(),s=(0,Ce.W)(),n=(0,N.q6)();return{isSmallScreen:(0,e.EW)(()=>t.isSmallScreen),isEditionBlocked:(0,e.EW)(()=>s.isEditionBlocked),displayMobileEditor:(0,e.EW)(()=>n.displayMobileEditor)}},computed:{active(){return this.isEditionBlocked.toString()},items(){return Zp.map(t=>{const s=this.getText(t.textKey);return{id:t.id,name:s,icon:t.icon}})}},methods:{selectItem(t){t!==this.active&&this.scoreData.scoreActions.executePublicAction("toggleEditionBlocked")},getText(t){return this.displayMobileEditor||this.isSmallScreen?t+="-small":t+="-full",this.$t(`editor:editionBlocked.${t}`)}}},em=(0,k.A)(qp,[["render",Bp]]);var tm=o(830128),sm=o(340828);const Fi=o.p+"img/1a7aec0100410828f658.png",om=o.p+"img/5eae4b5cdf169a2ebf48.png",Wi=o.p+"img/3a0ce11f8d2ae2e485d7.png",nm=o.p+"img/77233c687552d71ed74c.png",Ui=o.p+"img/55f6b1d02a6f94b470b7.png",im=o.p+"img/1a3cb915baf02887543d.png",am=om+" 2x, "+Fi+" 1x",rm=nm+" 2x, "+Wi+" 1x",lm=im+" 2x, "+Ui+" 1x",dm={class:"se-ts-na"},cm={class:"ddn-trigger se-btn-edu-dark"},um={class:"ddn-content"},_m={key:0,class:"loading-classes"},pm={key:1,class:"no-classes"},mm={key:2,class:"create-assignment-option-wrapper"},gm={class:"select-title"},fm={class:"select-description new-assign-title"},hm={class:"select-cta"},vm={class:"select-title"},ym={class:"select-description new-assign-title"},bm={class:"select-cta"},Em={class:"select-title"},Cm={class:"select-description new-assign-title"},Sm={class:"select-cta"};function Pm(t,s,n,r,d,a){const f=(0,e.g2)("plus-icon"),h=(0,e.g2)("f-button"),u=(0,e.gN)("dropdown");return(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",dm,[(0,e.Lk)("button",cm,[(0,e.bF)(f),(0,e.Lk)("span",null,(0,l.v_)(t.$t("edu:assignment.create.trigger-text")),1)]),(0,e.Lk)("div",um,[s[6]||(s[6]=(0,e.Lk)("div",{"x-arrow":""},null,-1)),d.loadingClasses?((0,e.uX)(),(0,e.CE)("div",_m,[(0,e.Lk)("p",null,(0,l.v_)(t.$t("flat:player.loading")),1)])):!d.loadingClasses&&a.classes.length===0?((0,e.uX)(),(0,e.CE)("div",pm,[(0,e.Lk)("p",null,(0,l.v_)(t.$t("edu:assignment.create.no-classes")),1),(0,e.bF)(h,{theme:"fill",href:"/class?eduSetup=createClass"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("edu:classes.new-modal.title")),1)]),_:1})])):!d.loadingClasses&&a.classes.length>0?((0,e.uX)(),(0,e.CE)("div",mm,[(0,e.Lk)("button",{class:"option",onClick:s[0]||(s[0]=g=>a.goCreateAssignment("scoreTemplate"))},[s[3]||(s[3]=(0,e.Lk)("img",{src:Fi,srcset:am},null,-1)),(0,e.Lk)("div",gm,(0,l.v_)(t.$t("edu:assignment.create-score.title-composition")),1),(0,e.Lk)("div",fm,(0,l.v_)(t.$t("edu:assignment.create-score.description-copy-this-score")),1),(0,e.Lk)("div",hm,[(0,e.bF)(h,{"default-text":"edu:assignment.create-assignment"})])]),(0,e.Lk)("button",{class:"option",onClick:s[1]||(s[1]=g=>a.goCreateAssignment("sharedWriting"))},[s[4]||(s[4]=(0,e.Lk)("img",{src:Wi,srcset:rm},null,-1)),(0,e.Lk)("div",vm,(0,l.v_)(t.$t("edu:assignment.create-score.title-write")),1),(0,e.Lk)("div",ym,(0,l.v_)(t.$t("edu:assignment.create-score.description-write-this-score")),1),(0,e.Lk)("div",bm,[(0,e.bF)(h,{"default-text":"edu:assignment.create-assignment"})])]),(0,e.Lk)("button",{class:"option",onClick:s[2]||(s[2]=g=>a.goCreateAssignment("performance"))},[s[5]||(s[5]=(0,e.Lk)("img",{src:Ui,srcset:lm},null,-1)),(0,e.Lk)("div",Em,(0,l.v_)(t.$t("edu:assignment.create-score.title-performance")),1),(0,e.Lk)("div",Cm,(0,l.v_)(t.$t("edu:assignment.create-score.description-performance-this-score")),1),(0,e.Lk)("div",Sm,[(0,e.bF)(h,{"default-text":"edu:assignment.create-assignment"})])])])):(0,e.Q3)("",!0)])])),[[u,{onOpen:a.onOpen}]])}var Ms=o(585368),Qe=o(971570),Ge=o(724246),Lm=o(877394),Am=o(90781),Mm=Object.defineProperty,Dm=Object.defineProperties,Tm=Object.getOwnPropertyDescriptors,To=Object.getOwnPropertySymbols,Bi=Object.prototype.hasOwnProperty,ji=Object.prototype.propertyIsEnumerable,Ki=(t,s,n)=>s in t?Mm(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,ye=(t,s)=>{for(var n in s||(s={}))Bi.call(s,n)&&Ki(t,n,s[n]);if(To)for(var n of To(s))ji.call(s,n)&&Ki(t,n,s[n]);return t},Je=(t,s)=>Dm(t,Tm(s)),Ht=(t,s)=>{var n={};for(var r in t)Bi.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&To)for(var r of To(t))s.indexOf(r)<0&&ji.call(t,r)&&(n[r]=t[r]);return n};function Om(){const t=(0,Lm.lq)(),s=(0,fe.F)(),{bodyContent:n}=(0,Am.A)(),r=(0,e.EW)(()=>s.account.id),d=(0,e.EW)(()=>{var V;return((V=t==null?void 0:t.query)==null?void 0:V.mode)==="edit"}),a=(0,e.EW)(()=>ye({user_id:r.value},n)),f=V=>{const U={event:{type:"click",name:"acf_create_or_new_assignment_button_clicked",properties:Je(ye({},a.value),{classroom_id:V.classroomId,assignment_id:V.assignmentId,resource_id:V.resourceId,context:V.context})}};Qe.A.push(U),Ge.I.logEvent(U.event.name,U.event.properties)},h=V=>{var U=V,{isDetailsOpen:Be}=U,ot=Ht(U,["isDetailsOpen"]);const xe={event:{type:"click",name:Be?"acf_see_fewer_link_clicked":"acf_see_more_link_clicked",properties:ye(Je(ye({},a.value),{context:"assignment_kind_selection_dialog"}),ot)}};Qe.A.push(xe),Ge.I.logEvent(xe.event.name,xe.event.properties)},u={composition:"acf_create_composition_button_clicked",worksheet:"acf_create_worksheet_button_clicked",performance:"acf_create_performance_button_clicked"},g=V=>{const U={event:{type:"click",name:u[V.type],properties:Je(ye({},a.value),{classroom_id:V.classroomId,assignment_id:V.assignmentId,resource_id:V.resourceId,context:"assignment_kind_selection_dialog"})}};Qe.A.push(U),Ge.I.logEvent(U.event.name,U.event.properties)},b=V=>{var U=V,{name:Be}=U,ot=Ht(U,["name"]);if(d.value)return;const xe={event:{type:"click",name:Be,properties:ye(Je(ye({},a.value),{context:"assignment_settings"}),ot)}};Qe.A.push(xe),Ge.I.logEvent(xe.event.name,xe.event.properties)},P=V=>{if(d.value)return;const U={event:{type:"click",name:"acf_add_exercises_plus_button_clicked",properties:ye(Je(ye({},a.value),{context:"exercises_tab"}),V)}};Qe.A.push(U),Ge.I.logEvent(U.event.name,U.event.properties)},F=V=>{if(d.value)return;const U={event:{type:"click",name:"acf_add_exercises_tab_link_clicked",properties:ye(Je(ye({},a.value),{context:"exercises_tab"}),V)}};Qe.A.push(U),Ge.I.logEvent(U.event.name,U.event.properties)},S=V=>{var U=V,{topic:Be}=U,ot=Ht(U,["topic"]);if(d.value)return;const xe={event:{type:"click",name:"acf_subject_select_button_or_card_clicked",properties:ye(Je(ye({},a.value),{context:"choose_subject_dialog",subject_topic:Be}),ot)}};Qe.A.push(xe),Ge.I.logEvent(xe.event.name,xe.event.properties)},H=V=>{if(d.value)return;const U={event:{type:"click",name:"acf_right_column_bottom_add_exercises_button_clicked",properties:ye(Je(ye({},a.value),{context:"exercise_dialog"}),V)}};Qe.A.push(U),Ge.I.logEvent(U.event.name,U.event.properties)},I=V=>{if(d.value)return;const U={event:{type:"click",name:"acf_delete_exercise_trash_symbol_clicked",properties:ye(Je(ye({},a.value),{context:"exercises_item"}),V)}};Qe.A.push(U),Ge.I.logEvent(U.event.name,U.event.properties)},Y=V=>{if(d.value)return;const U={event:{type:"click",name:"acf_right_column_bottom_cancel_button_clicked",properties:ye(Je(ye({},a.value),{context:"exercise_dialog"}),V)}};Qe.A.push(U),Ge.I.logEvent(U.event.name,U.event.properties)},Z=V=>{if(d.value)return;const U={event:{type:"click",name:"acf_right_column_bottom_save_changes_button_clicked",properties:ye(Je(ye({},a.value),{context:"exercise_settings_dialog"}),V)}};Qe.A.push(U),Ge.I.logEvent(U.event.name,U.event.properties)},Fe=V=>{if(d.value)return;const U={event:{type:"click",name:"acf_right_column_bottom_cancel_button_clicked",properties:ye(Je(ye({},a.value),{context:"exercise_settings_dialog"}),V)}};Qe.A.push(U),Ge.I.logEvent(U.event.name,U.event.properties)},dt=V=>{const U={event:{type:"click",name:"acf_provide_feedback_button_clicked",properties:ye(Je(ye({},a.value),{context:"exercises_tab"}),V)}};Qe.A.push(U),Ge.I.logEvent(U.event.name,U.event.properties)},Ve={selectSubject:"acf_select_subject_dropdown_clicked",selectGrades:"acf_select_grades_dropdown_clicked",saveAssignmentTo:"acf_my_resources_options_clicked",changePhoto:"acf_change_photo_button_clicked",assignmentTypeNewScore:"acf_new_score_radio_clicked",assignmentTypeScoreTemplate:"acf_template_radio_clicked",assignmentTypeSharedWriting:"acf_shared_writing_radio_clicked",addWorkScores:"acf_add_work_scores_button_clicked",togglePublicationDate:"acf_publication_date_toggle_clicked",toggleDueDate:"acf_due_date_toggle_clicked"},oe=V=>{var U=V,{action:Be}=U,ot=Ht(U,["action"]);if(d.value)return;const xe={event:{type:"click",name:Ve[Be],properties:ye(Je(ye({},a.value),{context:"assignment_settings_general"}),ot)}};Qe.A.push(xe),Ge.I.logEvent(xe.event.name,xe.event.properties)},Ft={addLink:"acf_add_link_button_clicked",addScore:"acf_add_score_button_clicked",addFile:"acf_add_file_button_clicked"},Jt=V=>{var U=V,{action:Be,context:ot}=U,xe=Ht(U,["action","context"]);if(d.value)return;const Bt={event:{type:"click",name:Ft[Be],properties:ye(Je(ye({},a.value),{context:ot==="assignment"?"assignment_settings_instructions":void 0}),xe)}};Qe.A.push(Bt),Ge.I.logEvent(Bt.event.name,Bt.event.properties)},Wt={lockTemplate:"acf_lock_template_toggle_clicked",selectToolset:"acf_select_toolset_button_clicked"},Yt=V=>{var U=V,{action:Be}=U,ot=Ht(U,["action"]);if(d.value)return;const xe={event:{type:"click",name:Wt[Be],properties:ye(Je(ye({},a.value),{context:"assignment_settings_extra"}),ot)}};Qe.A.push(xe),Ge.I.logEvent(xe.event.name,xe.event.properties)},us={togglePlaybackLimit:"acf_playback_limit_toggle_clicked",toggleRestrictPlayMode:"acf_restrict_playnote_clicked",toggleRestrictEditorPlayback:"acf_restrict_editor_playback_toggle_clicked"};return{trackNewAssignment:f,trackFewerLinkClicked:h,trackCreateAssignment:g,trackChangeActiveTab:b,trackGeneralSettingsActions:oe,trackGeneralSettingsInstructions:Jt,trackGeneralSettingsExtra:Yt,trackGeneralSettingsAudio:V=>{var U=V,{action:Be}=U,ot=Ht(U,["action"]);if(d.value)return;const xe={event:{type:"click",name:us[Be],properties:ye(Je(ye({},a.value),{context:"assignment_settings_audio"}),ot)}};Qe.A.push(xe),Ge.I.logEvent(xe.event.name,xe.event.properties)},trackGiveFeedback:dt,trackAddExercisesPlusButton:P,trackAddExercisesTabLink:F,trackChooseSubjectForExercise:S,trackAddExercisesSubmit:H,trackExitExercisesConfig:Y,trackSaveChangesExerciseSetting:Z,trackCancelExerciseSetting:Fe,trackRemoveExercise:I,trackSaveOrPublishAssignment:V=>{var U=V,{name:Be,hasNonDefaultName:ot,hasNonDefaultDescription:xe,hasNonDefaultInstructionsText:Bt,hasNonDefaultPlaybackLimitTimes:Eo}=U,Xs=Ht(U,["name","hasNonDefaultName","hasNonDefaultDescription","hasNonDefaultInstructionsText","hasNonDefaultPlaybackLimitTimes"]);if(d.value)return;const ps={event:{type:"click",name:Be,properties:ye(Je(ye({},a.value),{context:"assignment_settings",assignment_has_non_default_name:ot,assignment_has_non_default_description:xe,assignment_has_non_default_instructions_text:Bt,assignment_has_non_default_playback_limit_times:Eo}),Xs)}};Qe.A.push(ps),Ge.I.logEvent(ps.event.name,ps.event.properties)},trackNewAssignmentDropdownInEditorHeader:V=>{const U={event:{type:"click",name:"acf_create_or_new_assignment_button_clicked",properties:Je(ye({},a.value),{context:"from_score_editor",score_id:V})}};Qe.A.push(U),Ge.I.logEvent(U.event.name,U.event.properties)},trackNewAssignmentClickInEditorHeader:({type:V,scoreId:U})=>{const Be={event:{type:"click",name:"acf_create_composition_button_clicked",properties:Je(ye({},a.value),{score_id:U,context:"from_score_editor",type:V==="scoreTemplate"?"template":"shared_writing"})}};Qe.A.push(Be),Ge.I.logEvent(Be.event.name,Be.event.properties)}}}var Oo=o(973876),km=Object.defineProperty,xm=Object.defineProperties,wm=Object.getOwnPropertyDescriptors,Ni=Object.getOwnPropertySymbols,Im=Object.prototype.hasOwnProperty,Rm=Object.prototype.propertyIsEnumerable,Xi=(t,s,n)=>s in t?km(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Ds=(t,s)=>{for(var n in s||(s={}))Im.call(s,n)&&Xi(t,n,s[n]);if(Ni)for(var n of Ni(s))Rm.call(s,n)&&Xi(t,n,s[n]);return t},$i=(t,s)=>xm(t,wm(s)),Fm=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const Wm={name:"BtnTsNewAssignment",components:{plusIcon:Ms.A},props:{scoreData:{type:Object,required:!0}},data(){return{assignmentChoice:null,loadingClasses:!0}},setup(){const{trackNewAssignmentDropdownInEditorHeader:t,trackNewAssignmentClickInEditorHeader:s}=Om();return{trackNewAssignmentDropdownInEditorHeader:t,trackNewAssignmentClickInEditorHeader:s}},computed:$i(Ds(Ds(Ds(Ds({},(0,A.aH)(Pe.N,["score"])),(0,A.aH)(Oo.V,["sortedClassesByName"])),(0,A.aH)(z.j,["currentDialogKey","currentDialogParams"])),(0,A.aH)(Pe.N,["scoreId"])),{dialogKey(){return this.currentDialogKey},dialogParams(){return this.currentDialogParams},classes(){return this.sortedClassesByName.filter(t=>t.state==="active")}}),methods:$i(Ds(Ds({},(0,A.i0)(z.j,["showDialog"])),(0,A.i0)(Oo.V,["loadClasses"])),{goCreateAssignment(t){this.onNewAssignmentClicked(t);const s=window.location.pathname.split("/")[2];window.location.href=`/resources/folder/root/resource/new?score=${s}&assignmentType=${t}`},onOpen(){this.onDropdownOpen(),this.scoreData.scoreActions.executePublicAction("save",{},{muteUnavailableAction:!0})},onDropdownOpen(){this.trackNewAssignmentDropdownInEditorHeader(this.scoreId)},onNewAssignmentClicked(t){this.trackNewAssignmentClickInEditorHeader({type:t,scoreId:this.scoreId})}}),created(){return Fm(this,null,function*(){try{yield this.loadClasses(),this.loadingClasses=!1}catch(t){t.response&&t.response.status!==402&&(0,pe.vV)(t),this.loadingClasses=!1}})}};var AL=o(301051);const Um=(0,k.A)(Wm,[["render",Pm],["__scopeId","data-v-6919d12c"]]),Bm=o.p+"img/23b8fb7eefe74448fc22.svg";function jm(t,s,n,r,d,a){const f=(0,e.g2)("user"),h=(0,e.g2)("dropdown-trigger"),u=(0,e.g2)("flat-logo"),g=(0,e.g2)("popover-item"),b=(0,e.g2)("settings-icon"),P=(0,e.g2)("logout-icon"),F=(0,e.g2)("popover"),S=(0,e.g2)("dropdown");return(0,e.uX)(),(0,e.Wv)(S,{direction:"bottom-end",distance:[8,12]},{trigger:(0,e.k6)(()=>[(0,e.bF)(h,{"aria-label":"Account navigation",class:(0,l.C4)(t.$style.trigger)},{default:(0,e.k6)(()=>[(0,e.bF)(f,{src:r.account.picture,alt:r.account.printableName,class:(0,l.C4)(t.$style.user)},null,8,["src","alt","class"])]),_:1},8,["class"])]),default:(0,e.k6)(()=>[(0,e.bF)(F,null,{default:(0,e.k6)(()=>[(0,e.bF)(g,{as:"li",href:"/my-library"},{icon:(0,e.k6)(()=>[(0,e.bF)(u)]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,l.v_)(t.$t("flat:nav.my-library")),1)]),_:1}),r.account.isDeveloper?((0,e.uX)(),(0,e.Wv)(g,{key:0,as:"li",href:"/developers/apps"},{icon:(0,e.k6)(()=>s[0]||(s[0]=[(0,e.Lk)("img",{src:Bm},null,-1)])),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,l.v_)(t.$t("flat:account.my-apps")),1)]),_:1})):(0,e.Q3)("",!0),(0,e.bF)(g,{as:"li",href:"/settings"},{icon:(0,e.k6)(()=>[(0,e.bF)(b)]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,l.v_)(t.$t("flat:account.my")),1)]),_:1}),(0,e.bF)(g,{as:"li",href:"/auth/logout"},{icon:(0,e.k6)(()=>[(0,e.bF)(P)]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,l.v_)(t.$t("flat:logout")),1)]),_:1})]),_:1})]),_:1})}var Km=o(687260),Nm=o(539310),Ts=o(733268),Xm=o(716743);const $m={name:"ScoreEditorAcc",setup(){const t=(0,fe.F)();return{account:(0,e.EW)(()=>t.account)}},components:{Dropdown:Ts.m,DropdownTrigger:Ts.u,User:Xm.eu,Popover:Mo.AM,PopoverItem:Mo.fv,flatLogo:Do.A,settingsIcon:Km.A,logoutIcon:Nm.A}};var zm=o(918115),Hm=o.n(zm);const zi={};zi.$style=Hm();const Vm=(0,k.A)($m,[["render",jm],["__cssModules",zi]]);var Qm=o(717045),Gm=o(212885);const Jm={key:0,class:"se-collaborators space-x-16px"},Ym=(0,e.pM)({__name:"ScoreEditorHeaderCollaborators",setup(t){const s=(0,Qm.n)(),n=(0,fe.F)(),r=(0,e.EW)(()=>n.account),d=(0,e.EW)(()=>s.onlineCollaborators),a=(0,e.EW)(()=>Object.keys(d.value).length),f=(0,e.EW)(()=>a.value>1),h=(0,e.EW)(()=>{const u=d.value;return Object.keys(u).forEach(g=>{var b;const P=u[g];P.session&&g!==((b=r.value)==null?void 0:b.id)&&(u[g]=P)}),u});return(u,g)=>f.value?((0,e.uX)(),(0,e.CE)("div",Jm,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(h.value,(b,P)=>((0,e.uX)(),(0,e.Wv)(Gm.A,{class:"se-collab-usr",key:P,uid:b.user,width:32,"user-color":b.session.color},null,8,["uid","user-color"]))),128))])):(0,e.Q3)("",!0)}}),Zm=["href","aria-label"],qm={key:0};function e0(t,s,n,r,d,a){const f=(0,e.g2)("timeIcon"),h=(0,e.gN)("tooltip");return(0,e.bo)(((0,e.uX)(),(0,e.CE)("a",{"data-cy":"btn-history",class:(0,l.C4)(["ddn-trigger",{[t.$style["btn-history"]]:!0,[t.$style["wht-text"]]:a.hideText,[t.$style["desktop-resp"]]:a.hideText&&!n.mob,"mob-top-btn":n.mob}]),href:a.historyLink,"aria-label":t.$t("editor:toolbar.history.title")},[(0,e.bF)(f),a.hideText?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("span",qm,(0,l.v_)(t.$t("flat:score.last-save"))+" "+(0,l.v_)(d.relativeDate),1))],10,Zm)),[[h,{text:t.$t("editor:toolbar.history.title")}]])}var t0=o(463321);const s0={name:"ScoreEditorHistoryBtn",components:{timeIcon:t0.A},data(){return{relativeDate:null}},props:{mob:{type:Boolean,default:!1}},setup(){const t=(0,yt.k)(),s=(0,Pe.N)();return{isMediumScreen:(0,e.EW)(()=>t.isMediumScreen),isSmallScreen:(0,e.EW)(()=>t.isSmallScreen),score:(0,e.EW)(()=>s.score),lastEditDate:(0,e.EW)(()=>s.lastEditDate)}},computed:{historyLink(){let t=`/score/${this.score.id}/history`;return this.score.sharingKey&&(t+=`?sharingKey=${this.score.sharingKey}`),t},hideText(){return!this.relativeDate||this.mob||this.isMediumScreen||this.isSmallScreen}},watch:{lastEditDate(){this.refreshRelativeDate()}},methods:{refreshRelativeDate(){this.lastEditDate&&(this.relativeDate=(0,pn.PI)(this.lastEditDate),this.scheduledTimeout&&(clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null),this.scheduledTimeout=setTimeout(this.refreshRelativeDate.bind(this),30*1e3))}},created(){this.refreshRelativeDate()}};var o0=o(668526),n0=o.n(o0);const Hi={};Hi.$style=n0();const i0=(0,k.A)(s0,[["render",e0],["__cssModules",Hi]]),a0=["aria-label"],r0={key:0,class:"text-icon"};function l0(t,s,n,r,d,a){const f=(0,e.g2)("addPeopleIcon"),h=(0,e.g2)("ddn-sharing"),u=(0,e.g2)("dropdown"),g=(0,e.gN)("tooltip");return(0,e.uX)(),(0,e.Wv)(u,{direction:"bottom-end",distance:[0,12],onOpenChange:a.toggleDdn,ref:"dropdown"},{trigger:(0,e.k6)(()=>[(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{"data-cy":"tb-showShare",class:(0,l.C4)(["se-shr-btn se-header-btn",{"mob-top-btn":n.mob}]),onClick:s[0]||(s[0]=(0,C.D$)(()=>{},["prevent"])),"aria-label":a.shareTitle},[(0,e.bF)(f),n.mob?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("span",r0,(0,l.v_)(t.$t("flat:sv.share")),1))],10,a0)),[[g,{text:a.shareTitle}]])]),default:(0,e.k6)(()=>[(0,e.bF)(h,{items:[r.score],"can-display-collaborators":!r.isEmbedAccount,"can-display-publish":!r.isEmbedAccount,onClose:a.closeDdn},null,8,["items","can-display-collaborators","can-display-publish","onClose"])]),_:1},8,["onOpenChange"])}var gn=o(640408),Vi=o(11285);const d0={name:"ScoreEditorShareBtn",components:{Dropdown:Ts.m,DdnSharing:Vi.A,addPeopleIcon:gn.A},props:{mob:{type:Boolean,default:!1},scoreData:{type:Object,required:!0}},setup(){const t=(0,Pe.N)(),s=(0,fe.F)(),n=(0,nt.B)();return{score:(0,e.EW)(()=>t.score),isEdu:(0,e.EW)(()=>s.isEdu),isEmbedAccount:(0,e.EW)(()=>s.isEmbedAccount),addExperience:n.addExperience}},computed:{shareTitle(){return this.isEdu?this.$t("editor:toolbar.share.title-edu"):this.$t("editor:toolbar.share.title")}},methods:{toggleDdn(t){t&&(this.addExperience("onboarding.share.open"),this.scoreData.scoreActions.executePublicAction("save",{context:"saveBeforeShare"},{muteUnavailableAction:!0}))},closeDdn(){this.$refs.dropdown.close()}}},c0=(0,k.A)(d0,[["render",l0]]);var u0=o(197096),_0=o(593195),Qi=o(775),ro=o(706305),p0=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});function Gi(t){return p0(this,null,function*(){const{updateScore:s}=(0,ro.j)(),n=Qi.Ay.generateSharingKey();return yield s({scoreId:t,payload:{privacy:"privateLink",sharingKey:n},displayMessage:!1}),n})}var Ji=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const m0={__name:"ActionCopyShareableLink",props:{score:{type:Object,required:!0}},setup(t){const{copy:s}=(0,_0.i)(),n=t,r=(0,te.KR)(!1),d=(0,e.EW)(()=>`<strong>${_.MR.t("flat:easy-share.privateLinkTitle")}</strong><br />${_.MR.t("flat:easy-share.privateLinkDesc")}`);function a(){return Ji(this,null,function*(){if(["public","privateLink","organizationPublic"].includes(n.score.privacy))return n.score.htmlUrl;if(n.score.privacy==="private"){const h=yield Gi(n.score.id);return`${n.score.htmlUrl}?sharingKey=${h}`}return null})}function f(){return Ji(this,null,function*(){try{const h=yield a();s(h),(0,ze.O)().displayMessage({type:"default",text:_.MR.t("flat:private-link.copied-success")}),(0,nt.B)().addExperience("score.share.copy-link")}catch(h){(0,pe.vV)(h)}})}return(h,u)=>{const g=(0,e.gN)("tooltip");return(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{class:(0,l.C4)(h.ActionRounded.component),onClick:f},[r.value?((0,e.uX)(),(0,e.Wv)((0,te.R1)(ss.A),{key:0,size:16})):((0,e.uX)(),(0,e.Wv)((0,te.R1)(u0.A),{key:1}))],2)),[[g,{text:d.value}]])}}};var g0=o(399116),f0=o.n(g0);const Yi={};Yi.ActionRounded=f0();const h0=(0,k.A)(m0,[["__cssModules",Yi]]),v0={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function y0(t,s){return(0,e.uX)(),(0,e.CE)("svg",v0,s[0]||(s[0]=[(0,e.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.46665 10.6001L1.86665 8.00006L4.46665 5.40006C4.72665 5.14006 4.72665 4.72673 4.46665 4.46673C4.20665 4.20673 3.79332 4.20673 3.53332 4.46673L0.47332 7.52673C0.21332 7.78673 0.21332 8.20673 0.47332 8.46673L3.53332 11.5334C3.79332 11.7934 4.20665 11.7934 4.46665 11.5334C4.72665 11.2734 4.72665 10.8601 4.46665 10.6001ZM8.86665 10.6001L11.4667 8.00006L8.86665 5.40006C8.60665 5.14006 8.60665 4.72673 8.86665 4.46673C9.12665 4.20673 9.53999 4.20673 9.79999 4.46673L12.86 7.52673C13.12 7.78673 13.12 8.20673 12.86 8.46673L9.79999 11.5334C9.53999 11.7934 9.12665 11.7934 8.86665 11.5334C8.60665 11.2734 8.60665 10.8601 8.86665 10.6001Z",fill:"currentColor"},null,-1),(0,e.Lk)("path",{d:"M4.53332 8.00006L7.13332 10.6001C7.39332 10.8601 7.39332 11.2734 7.13332 11.5334C6.87332 11.7934 6.45999 11.7934 6.19999 11.5334L3.13999 8.46673C2.87999 8.20673 2.87999 7.78673 3.13999 7.52673L6.19999 4.46673C6.45999 4.20673 6.87332 4.20673 7.13332 4.46673C7.39332 4.72673 7.39332 5.14006 7.13332 5.40006L4.53332 8.00006Z",fill:"currentColor"},null,-1),(0,e.Lk)("path",{d:"M14.1333 8.00006L11.5333 10.6001C11.2733 10.8601 11.2733 11.2734 11.5333 11.5334C11.7933 11.7934 12.2066 11.7934 12.4667 11.5334L15.5266 8.46673C15.7866 8.20673 15.7866 7.78673 15.5266 7.52673L12.4667 4.46673C12.2066 4.20673 11.7933 4.20673 11.5333 4.46673C11.2733 4.72673 11.2733 5.14006 11.5333 5.40006L14.1333 8.00006Z",fill:"currentColor"},null,-1)]))}const b0={},E0=(0,k.A)(b0,[["render",y0]]);var Zi=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const C0={__name:"ActionEmbed",props:{score:{type:Object,required:!0}},setup(t){const s=(0,te.KR)(!1),n=t,r=(0,e.EW)(()=>`<strong>${_.MR.t("flat:easy-share.embedTitle")}</strong><br />${_.MR.t("flat:easy-share.embedDesc")}`);function d(){return Zi(this,null,function*(){s.value=!0;try{const f=yield Gi(n.score.id);return s.value=!1,f}catch(f){throw s.value=!1,f}})}function a(){return Zi(this,null,function*(){let f=n.score.sharingKey;f||(f=yield d());const h=`/developers/embed/generator?score=${n.score.id}&sharingKey=${f}`;window.location.href=h})}return(f,h)=>{const u=(0,e.gN)("tooltip");return(0,e.bo)(((0,e.uX)(),(0,e.CE)("button",{class:(0,l.C4)(f.ActionRounded.component),onClick:a},[s.value?((0,e.uX)(),(0,e.Wv)((0,te.R1)(ss.A),{key:1,size:"16"})):((0,e.uX)(),(0,e.Wv)(E0,{key:0}))],2)),[[u,{text:r.value}]])}}};var S0=o(357773),P0=o.n(S0);const qi={};qi.ActionRounded=P0();const L0=(0,k.A)(C0,[["__cssModules",qi]]);var A0=Object.defineProperty,M0=Object.defineProperties,D0=Object.getOwnPropertyDescriptors,ea=Object.getOwnPropertySymbols,T0=Object.prototype.hasOwnProperty,O0=Object.prototype.propertyIsEnumerable,ta=(t,s,n)=>s in t?A0(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,k0=(t,s)=>{for(var n in s||(s={}))T0.call(s,n)&&ta(t,n,s[n]);if(ea)for(var n of ea(s))O0.call(s,n)&&ta(t,n,s[n]);return t},x0=(t,s)=>M0(t,D0(s));const w0={name:"ScoreEditorHeader",components:{ScoreAudioControls:tm.A,ScoreMidiControls:sm.A,ScoreEditorShareBtn:c0,ScoreEditorHistoryBtn:i0,ScoreEditorHeaderCollaborators:Ym,ScoreEditorAcc:Vm,BtnTsNewAssignment:Um,EditionBlockedSelect:em,FPowerButton:io.QY,ActionCopyShareableLink:h0,ActionEmbed:L0,flat:Do.A},setup(){const t=(0,fe.F)(),s=(0,mn.O)(),n=(0,ee.s)(),r=(0,Fp.d)(),d=(0,Wp.k)(),a=(0,qe.o)(),f=(0,Pe.N)(),h=(0,zt.X)(),u=(0,we.U)(),g=(0,N.q6)(),b=(0,Se.H)(),P=(0,Ce.W)();return{account:(0,e.EW)(()=>t.account),isEdu:(0,e.EW)(()=>t.isEdu),isEmbedAccount:(0,e.EW)(()=>t.isEmbedAccount),isMusicSnippetAccount:(0,e.EW)(()=>t.isMusicSnippet),isMusicSnippetContext:(0,e.EW)(()=>g.isMusicSnippet),hasAccessToken:(0,e.EW)(()=>t.hasAccessToken),isLtiFocusMode:(0,e.EW)(()=>s.isLtiFocusMode),blockedEditionAvailable:(0,e.EW)(()=>u.scoreWrite),online:(0,e.EW)(()=>n.online),mainShortcutByAction:(0,e.EW)(()=>r.mainShortcutByAction),hasUpgradedLicense:(0,e.EW)(()=>d.hasUpgradedLicense),hasNoPlayback:(0,e.EW)(()=>a.hasNoPlayback),mainLeaveButtonUrl:(0,e.EW)(()=>f.mainLeaveButtonUrl),parentWindow:(0,e.EW)(()=>f.parentWindow),score:(0,e.EW)(()=>f.score),displayTsNewAssignmentBtn:(0,e.EW)(()=>h.displayTsNewAssignmentBtn),isCloudScore:(0,e.EW)(()=>g.isCloudScore),loadDocumentSettings:g.loadDocumentSettings,tbMetaEnabled:(0,e.EW)(()=>b.tbMetaEnabled),tbHelpEnabled:(0,e.EW)(()=>b.tbHelpEnabled),tbAudioEnabled:(0,e.EW)(()=>b.tbAudioEnabled),tbMidiEnabled:(0,e.EW)(()=>b.tbMidiEnabled),isEditionBlocked:(0,e.EW)(()=>P.isEditionBlocked)}},computed:{helpShortcut(){const t=this.mainShortcutByAction.showHelp;return t?(0,cn.lD)(t.shortcuts):""},displayUpgrade(){var t;return((t=this.account)==null?void 0:t.id)&&!this.hasUpgradedLicense&&!this.isEdu&&!this.isMusicSnippetAccount}},props:{interaction:{type:Object,required:!0}},methods:x0(k0({},(0,A.i0)(ut.B,["showUpgradeDialog"])),{openCredits(){!this.isEditionBlocked&&this.tbMetaEnabled&&this.loadDocumentSettings("credits")},openHelp(){this.interaction.scoreData.scoreActions.executePublicAction("showHelp")}})};var I0=o(769307),R0=o.n(I0);const sa={};sa.$style=R0();const F0={name:"ScoreEditorTop",components:{ScoreEditorHeader:(0,k.A)(w0,[["render",Rp],["__cssModules",sa]]),ScoreEditorToolbar:kp.A,ToolbarPerformanceRecording:$n,ToolbarPerformanceReview:zn},props:{scoreData:{type:Object,required:!0},interaction:{type:Object,required:!0},adagioQueue:{type:Object,default:null},isReady:{type:Boolean,required:!0}},setup(){const t=(0,ct.w)(),s=(0,qe.o)(),n=(0,zt.X)(),r=(0,Pe.N)(),d=(0,N.q6)();return{hasTracks:(0,e.EW)(()=>t.hasTracks),loaded:(0,e.EW)(()=>s.loaded),loadedTracks:(0,e.EW)(()=>s.loadedTracks),isPerformanceAssignment:(0,e.EW)(()=>n.isPerformanceAssignment),isAssignmentReview:(0,e.EW)(()=>r.isAssignmentReview),displayChromelessUi:(0,e.EW)(()=>d.displayChromelessUi)}},computed:{displayRecordingToolbar(){return!this.isAssignmentReview&&this.isPerformanceAssignment&&this.loadedTracks},displayPerformanceReviewToolbar(){return this.isAssignmentReview&&this.isPerformanceAssignment&&this.hasTracks&&this.loaded&&this.loadedTracks}}},W0=(0,k.A)(F0,[["render",Op]]),oa=o.p+"img/8173206c605f23f079cf.png",U0=o.p+"img/3d1ae89189fd9025a1e9.png"+" 2x, "+oa+" 1x",B0=["aria-label"];function j0(t,s,n,r,d,a){const f=(0,e.g2)("collapseIcon"),h=(0,e.g2)("plusIcon"),u=(0,e.g2)("loader-spinner"),g=(0,e.g2)("assignment-sidebar-attachment-item"),b=(0,e.g2)("btn-ss-turn-in"),P=(0,e.g2)("notesIcon"),F=(0,e.g2)("commentIcon"),S=(0,e.g2)("sidebar-tabs"),H=(0,e.g2)("fullPageIcon"),I=(0,e.g2)("assignment-instruction-and-attachments"),Y=(0,e.g2)("submission-comments"),Z=(0,e.g2)("dialog-library-picker"),Fe=(0,e.g2)("FButton"),dt=(0,e.g2)("SuccessDialog");return n.assignment&&!d.loading?((0,e.uX)(),(0,e.CE)("div",{key:0,onKeydown:s[4]||(s[4]=(0,C.D$)(()=>{},["stop"])),class:(0,l.C4)({[t.$style.assignmentInfoPanel]:!0,[t.$style.mobileView]:r.displayMobileEditor})},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.topPart)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.topbar)},[(0,e.Lk)("button",{onClick:s[0]||(s[0]=Ve=>t.$emit("hideSidebar")),class:(0,l.C4)(t.$style.HidePanel),"aria-label":t.$t("edu:assignment.sidebar.hide"),type:"button"},[(0,e.bF)(f)],10,B0)],2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.aMainDetails)},[(0,e.Lk)("p",null,(0,l.v_)(n.assignment.title),1),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.DPost)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.l)},[(0,e.Lk)("span",null,(0,l.v_)(t.$t("edu:assignment.published-on")),1),s[5]||(s[5]=(0,e.eW)("\xA0 ",-1))],2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.d)},(0,l.v_)(t.postDateFormatted)+"\xA0",3)],2),t.dueDateFormatted?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,l.C4)(t.$style.DDue)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.l)},[(0,e.Lk)("span",null,(0,l.v_)(t.$t("edu:assignment.due-date")),1),s[6]||(s[6]=(0,e.eW)("\xA0 ",-1))],2),(0,e.Lk)("div",{class:(0,l.C4)({[t.$style.d]:!0,[t.$style.overdue]:t.isOverdue})},(0,l.v_)(t.dueDateFormatted)+"\xA0 ",3)],2)):(0,e.Q3)("",!0)],2)],2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.scrollableContent)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.YourWork)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.YourWorkWrap)},[(0,e.Lk)("span",{class:(0,l.C4)(t.$style.TitleYourWork)},(0,l.v_)(t.$t("edu:submission.your-work")),3),a.canAddScore?((0,e.uX)(),(0,e.CE)("button",{key:0,class:(0,l.C4)(t.$style.BtnNewScore),onClick:s[1]||(s[1]=(0,C.D$)(Ve=>t.showDialog("DialogScorePicker"),["prevent"]))},[d.processingPickup?((0,e.uX)(),(0,e.Wv)(u,{key:1,size:16,"line-size":1})):((0,e.uX)(),(0,e.Wv)(h,{key:0})),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.TitleNewScore)},(0,l.v_)(t.$t("flat:share.add-score")),3)],2)):(0,e.Q3)("",!0)],2),a.submissionsToDisplay.length>0&&r.scoreId?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,l.C4)(t.$style.attachments)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.submissionsToDisplay,Ve=>((0,e.uX)(),(0,e.CE)("div",{key:Ve.score,class:(0,l.C4)(t.$style.attachmentListItem)},[(0,e.bF)(g,{attachment:Ve,"currently-editing-score-id":r.scoreId,onOpenAttachment:oe=>a.openAttachment(Ve)},null,8,["attachment","currently-editing-score-id","onOpenAttachment"])],2))),128))],2)):(0,e.Q3)("",!0),(0,e.bF)(b,{audio:n.audio,class:(0,l.C4)(t.$style.BtnTurnIn),location:"assignmentInfoSidebar"},null,8,["audio","class"])],2),(0,e.bF)(S,{"currently-viewing-tab":d.currentlyViewingTab,tabs:d.tabs,onSwitchView:a.switchView},{instructions:(0,e.k6)(()=>[(0,e.bF)(P),(0,e.eW)(" "+(0,l.v_)(t.$t("edu:assignment.sidebar.instructions")),1)]),comments:(0,e.k6)(()=>[(0,e.bF)(F),(0,e.eW)(" "+(0,l.v_)(t.$t("edu:assignment.student-work.comments"))+" ",1),r.commentsBySubmission&&a.submission&&a.commentQuantity>0?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,l.C4)(t.$style.commentCountWrap)},[(0,e.Lk)("span",{class:(0,l.C4)(t.$style.quantity)},(0,l.v_)(a.commentQuantity),3)],2)):(0,e.Q3)("",!0)]),_:1},8,["currently-viewing-tab","tabs","onSwitchView"]),d.currentlyViewingTab==="instructions"?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,l.C4)(t.$style.instructionsView)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.titleAndExpandBtn)},[(0,e.Lk)("p",{class:(0,l.C4)(t.$style.pTitle)},(0,l.v_)(t.$t("edu:assignment.sidebar.instructions")),3),a.showFullPageBtn?((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:s[2]||(s[2]=(0,C.D$)(Ve=>t.$emit("showDialogAssignmentInfo"),["prevent"]))},[(0,e.bF)(H)])):(0,e.Q3)("",!0)],2),(0,e.bF)(I,{assignment:n.assignment,"content-attachments":t.contentAttachments},null,8,["assignment","content-attachments"])],2)):d.currentlyViewingTab==="comments"?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,l.C4)(t.$style.commentsView)},[(0,e.bF)(Y,{"submission-displayed":a.submission,classroom:a.classroom,assignment:n.assignment,onHasUnsentComment:a.checkUnsentComment,ref:"comments"},null,8,["submission-displayed","classroom","assignment","onHasUnsentComment"])],2)):(0,e.Q3)("",!0)],2),((0,e.uX)(),(0,e.Wv)(e.Im,{to:"body"},[a.dialogKey==="DialogScorePicker"?((0,e.uX)(),(0,e.Wv)(Z,{key:0,actions:["select"],title:t.$t("edu:submission.pickup-score-title"),onChooseScore:s[3]||(s[3]=Ve=>a.pickupScore(Ve)),isInEditorAsStudent:!0},null,8,["title"])):a.dialogKey==="SuccessDialog"?((0,e.uX)(),(0,e.Wv)(dt,{key:1,title:"edu:submission.congrats-title",content:"edu:submission.congrats-text",onClose:a.doneDialog},{illu:(0,e.k6)(()=>s[7]||(s[7]=[(0,e.Lk)("img",{alt:"Congrats",src:oa,srcset:U0},null,-1)])),button:(0,e.k6)(()=>[a.submission&&a.submission.googleClassroom?((0,e.uX)(),(0,e.Wv)(Fe,{key:0,href:a.submission.googleClassroom.alternateLink,"default-text":"edu:gclassroom.view-on"},null,8,["href"])):((0,e.uX)(),(0,e.Wv)(Fe,{key:1,onClick:(0,C.D$)(a.doneDialog,["stop","prevent"]),theme:"outline","default-text":"flat:close"},null,8,["onClick"]))]),_:1},8,["onClose"])):(0,e.Q3)("",!0)]))],34)):(0,e.Q3)("",!0)}var K0=o(906731),N0=o(205749),X0=o(493549),$0=o(654818),z0=o(334980),na=o(633356);const H0={class:"d-libpicker"},V0=["src"];function Q0(t,s,n,r,d,a){const f=(0,e.g2)("new-score-v2"),h=(0,e.g2)("Close"),u=(0,e.g2)("ContentDialog");return d.showNewScoreDialog?((0,e.uX)(),(0,e.Wv)(f,{key:0,onNewScoreDialogClosed:s[0]||(s[0]=g=>t.$emit("newScoreDialogClosed"))})):((0,e.uX)(),(0,e.Wv)(u,{key:1,onKeydown:s[2]||(s[2]=(0,C.D$)(()=>{},["stop"])),"show-close-button":!1,"content-scroll":!1},{default:(0,e.k6)(()=>[(0,e.Lk)("div",H0,[(0,e.Lk)("button",{class:"d-close",onClick:s[1]||(s[1]=g=>a.closeDialog())},[(0,e.bF)(h)]),(0,e.Lk)("iframe",{src:a.iframeSrc,ref:"iframe",id:"dialog-library-picker"},null,8,V0)])]),_:1}))}var ia=o(572625),G0=o(989641),J0=Object.defineProperty,Y0=Object.defineProperties,Z0=Object.getOwnPropertyDescriptors,aa=Object.getOwnPropertySymbols,q0=Object.prototype.hasOwnProperty,eg=Object.prototype.propertyIsEnumerable,ra=(t,s,n)=>s in t?J0(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,tg=(t,s)=>{for(var n in s||(s={}))q0.call(s,n)&&ra(t,n,s[n]);if(aa)for(var n of aa(s))eg.call(s,n)&&ra(t,n,s[n]);return t},sg=(t,s)=>Y0(t,Z0(s)),og=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const fn=$t()("flat:picker"),ng={name:"DialogLibraryPicker",emits:["newScoreDialogClosed","close","chooseScore"],components:{ContentDialog:es.qz,NewScoreV2:(0,Xt.h)(()=>Promise.all([o.e(48707),o.e(22337),o.e(87869),o.e(55021),o.e(20881),o.e(51277),o.e(79244),o.e(95365),o.e(15525),o.e(65980),o.e(6391),o.e(64161),o.e(76400),o.e(56290),o.e(37798),o.e(31324),o.e(53060),o.e(72486),o.e(78877),o.e(74180),o.e(87895),o.e(14617),o.e(38167),o.e(39921),o.e(47404),o.e(57952),o.e(43139),o.e(59371),o.e(94808),o.e(24290),o.e(88273),o.e(85719),o.e(27012),o.e(82794),o.e(80449),o.e(36494),o.e(26569),o.e(26797),o.e(34926),o.e(78703),o.e(43955),o.e(34361),o.e(45321),o.e(3831),o.e(16327),o.e(42010),o.e(31330),o.e(67751),o.e(55071),o.e(59791)]).then(o.bind(o,672523))),Close:ia.A},data(){return{showNewScoreDialog:!1}},setup(){const{trackScoreCreation:t,trackImportScore:s}=(0,G0.A)();return{trackScoreCreation:t,trackImportScore:s}},props:{title:{type:String,required:!0},actions:{type:Array,default(){return["select"]}},multiSelection:{type:Boolean,default:!0},hasNewScore:{type:Boolean,default:!0},newScoreInNewWindow:{type:Boolean,default:!0},isInAssignmentCreator:{type:Boolean,default:!1},isInAssignmentDetailsAsStudent:{type:Boolean,default:!1},isInEditorAsStudent:{type:Boolean,default:!1}},computed:{iframeSrc(){const t=new URLSearchParams({mode:"iframe"});return t.set("actions",this.actions.join(",")),this.title&&t.set("title",this.title),this.multiSelection&&t.set("multiSelection","true"),this.hasNewScore&&t.set("hasNewScore","true"),this.newScoreInNewWindow&&t.set("newScoreInNewWindow","true"),`${window.location.protocol}//${window.location.host}/pickers/flat/library?${t.toString()}`}},methods:sg(tg({},(0,A.i0)(z.j,["showDialog","showDialogAndWaitForAnswer","hideDialog"])),{closeDialog(){this.hideDialog(),this.$emit("close")},handleMessages(){this.messagesHandler=this.handleMessageCallback.bind(this),window.addEventListener("message",this.messagesHandler)},handleMessageCallback(t){var s;if(t.source!==((s=this.$refs.iframe)==null?void 0:s.contentWindow))return;let n;try{n=JSON.parse(t.data),fn("msg: %o",n)}catch(r){fn("err: %o",r);return}this.emitMessage(n)},emitMessage(t){fn("msg: %o",t),this.$emit(t.event,t.parameters),this.closeDialog()},dispayNewScoreDialog(){return og(this,null,function*(){try{this.showNewScoreDialog=!0;const s={event:"chooseScore",parameters:{scores:[(yield this.showDialogAndWaitForAnswer()).id],isNewScore:!0}};this.emitMessage(s),this.closeDialog()}catch(t){(0,ze.O)().displayError({error:t}),(0,pe.vV)(t),this.closeDialog()}})},trackScoreImportEvent(){this.isInEditorAsStudent?this.trackImportScore({context:"student_from_assignment_editor",content_visible_to_user:this.$t("flat:score.import")}):this.isInAssignmentCreator?this.trackImportScore({context:"teacher_assignment_creation",content_visible_to_user:this.$t("flat:score.import")}):this.isInAssignmentDetailsAsStudent&&this.trackImportScore({context:"student_assignment_details_add_an_existing_score",content_visible_to_user:this.$t("flat:score.import")})},trackScoreCreationEvent(){this.isInEditorAsStudent?this.trackScoreCreation({context:"student_from_assignment_editor"}):this.isInAssignmentCreator?this.trackScoreCreation({context:"teacher_assignment_creation"}):this.isInAssignmentDetailsAsStudent&&this.trackScoreCreation({context:"student_assignment_details_add_an_existing_score"})}}),created(){this.handleMessages(),et.t0&&(window.flatLibraryPickerCallback=this.emitMessage.bind(this)),window.addEventListener("message",t=>{t.data.action==="closeDialog"?this.closeDialog():t.data==="dispayNewScoreDialog"?this.dispayNewScoreDialog():t.data==="trackScoreCreationEvent"?this.trackScoreCreationEvent():t.data==="trackScoreImportEvent"&&this.trackScoreImportEvent()})},unmounted(){window.removeEventListener("message",this.messagesHandler)}},ig=(0,k.A)(ng,[["render",Q0]]),ag={key:0,class:"submission-comments"},rg={class:"title-feedback"},lg={key:0},dg={key:1,class:"spinner"},cg=["placeholder"];function ug(t,s,n,r,d,a){const f=(0,e.g2)("submission-comment"),h=(0,e.g2)("loader-spinner"),u=(0,e.g2)("f-button"),g=(0,e.g2)("FButtonGroup");return a.comments.length>0||a.displayCommentForm?((0,e.uX)(),(0,e.CE)("div",ag,[(0,e.Lk)("div",rg,(0,l.v_)(t.$t("edu:assignment.student-work.comments")),1),d.showLoader?((0,e.uX)(),(0,e.CE)("div",dg,[(0,e.bF)(h,{size:40,"line-size":3})])):((0,e.uX)(),(0,e.CE)("div",lg,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.comments,b=>((0,e.uX)(),(0,e.Wv)(f,{key:b.id,comment:b,processing:d.processingComment,"is-unread":a.unreadComments.includes(b.id),onEditComment:a.editComment,onDeleteComment:a.deleteComment},null,8,["comment","processing","is-unread","onEditComment","onDeleteComment"]))),128))])),a.displayCommentForm?((0,e.uX)(),(0,e.CE)("form",{key:2,class:"review-form",onSubmit:s[3]||(s[3]=(0,C.D$)(b=>a.sendComment(),["prevent"]))},[(0,e.bo)((0,e.Lk)("textarea",{class:"form-control",id:"new-comment-textarea","onUpdate:modelValue":s[0]||(s[0]=b=>d.newComment=b),placeholder:t.$t("edu:reviews.return.form-text"),onKeyup:s[1]||(s[1]=(...b)=>a.autoGrow&&a.autoGrow(...b))},null,40,cg),[[C.Jo,d.newComment]]),(0,e.bF)(g,{class:"btn-group"},{default:(0,e.k6)(()=>[d.newComment?((0,e.uX)(),(0,e.Wv)(u,{key:0,class:"btn-cancel",theme:"ghost-subdue",disabled:d.processingComment,type:"button","default-text":"flat:cancel",onClick:s[2]||(s[2]=b=>d.newComment=null)},null,8,["disabled"])):(0,e.Q3)("",!0),(0,e.bF)(u,{class:"btn-post",disabled:!d.newComment,loading:d.processingComment,type:"submit","default-text":"edu:assignments-creation.post"},null,8,["disabled","loading"])]),_:1})],32)):(0,e.Q3)("",!0)])):(0,e.Q3)("",!0)}const _g={class:"row-1"},pg={class:"left-section"},mg=["src"],gg={class:"details"},fg={key:0,class:"name"},hg={class:"time"},vg={key:0,class:"comment"},yg={class:"button-groups"};function bg(t,s,n,r,d,a){const f=(0,e.g2)("popover-item"),h=(0,e.g2)("more-options"),u=(0,e.g2)("f-button"),g=(0,e.gN)("dompurify-html"),b=(0,e.gN)("focus");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(["sub-comment-container",{"c-highlight":n.isUnread}])},[(0,e.Lk)("div",_g,[(0,e.Lk)("div",pg,[r.user?((0,e.uX)(),(0,e.CE)("img",{key:0,class:"avatar",src:r.user.picture,loading:"lazy",width:"32",height:"32"},null,8,mg)):(0,e.Q3)("",!0),(0,e.Lk)("div",gg,[r.user?((0,e.uX)(),(0,e.CE)("p",fg,(0,l.v_)(r.user.printableName),1)):(0,e.Q3)("",!0),(0,e.Lk)("p",hg,(0,l.v_)(a.commentPostTime),1)])]),n.comment.user===r.account.id?((0,e.uX)(),(0,e.Wv)(h,{key:0},{options:(0,e.k6)(()=>[(0,e.bF)(f,{as:"button",class:"popoverItem",onClick:s[0]||(s[0]=P=>d.editing=!0)},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:edit")),1)]),_:1}),(0,e.bF)(f,{as:"button",class:"popoverItem",onClick:s[1]||(s[1]=P=>t.$emit("deleteComment",n.comment))},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:delete")),1)]),_:1})]),_:1})):(0,e.Q3)("",!0)]),d.editing?((0,e.uX)(),(0,e.CE)("form",{key:1,class:"review-form",onSubmit:s[5]||(s[5]=(0,C.D$)((...P)=>a.editComment&&a.editComment(...P),["prevent"]))},[(0,e.bo)((0,e.Lk)("textarea",{class:"form-control","onUpdate:modelValue":s[2]||(s[2]=P=>r.newComment=P),onKeyup:s[3]||(s[3]=(...P)=>a.autoGrow&&a.autoGrow(...P))},null,544),[[C.Jo,r.newComment],[b]]),(0,e.Lk)("div",yg,[(0,e.Lk)("button",{class:"btn-cancel",type:"button",onClick:s[4]||(s[4]=P=>{r.newComment=n.comment.comment,d.editing=!1})},(0,l.v_)(t.$t("flat:cancel")),1),(0,e.bF)(u,{class:"btn-post",disabled:!r.newComment,loading:n.processing,type:"submit","default-text":"edu:assignments-creation.post"},null,8,["disabled","loading"])])],32)):(0,e.bo)(((0,e.uX)(),(0,e.CE)("p",vg,null,512)),[[g,a.prepareComment]])],2)}var Eg=o(55442),Cg=o(502223);const Sg={class:"more-opt-container"},Pg=["aria-label"],Lg={class:"ddn-content"},Ag={class:"option-container"};function Mg(t,s,n,r,d,a){const f=(0,e.g2)("more-icon"),h=(0,e.gN)("dropdown");return(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",Sg,[(0,e.Lk)("button",{class:"ddn-trigger button-more","aria-label":t.$t("flat:more-options"),"data-test-id":"btnMore"},[(0,e.bF)(f,{class:(0,l.C4)({verticalIcon:n.verticalIcon})},null,8,["class"])],8,Pg),(0,e.Lk)("div",Lg,[s[0]||(s[0]=(0,e.Lk)("div",{"x-arrow":""},null,-1)),(0,e.Lk)("div",Ag,[(0,e.RG)(t.$slots,"options",{},void 0,!0)])])])),[[h,{placement:"bottom",positionFixed:!0}]])}var Dg=o(663124);const Tg={name:"MoreOptions",props:{verticalIcon:{type:Boolean,default:!1}},components:{MoreIcon:Dg.A}};var KL=o(238490);const Og={name:"SubmissionComment",components:{MoreOptions:(0,k.A)(Tg,[["render",Mg],["__scopeId","data-v-6345e19f"]]),PopoverItem:Cg.A},props:{comment:{type:Object,required:!0},processing:{type:Boolean,required:!0},isUnread:{type:Boolean,required:!0}},emits:["editComment","deleteComment"],data(){return{editing:!1,commentUnRead:!1}},setup(t){const s=(0,Pi.k)(),n=(0,fe.F)(),r=(0,te.KR)(null);return(0,e.sV)(()=>{r.value=t.comment.comment,s.get(t.comment.user)}),{newComment:r,user:(0,e.EW)(()=>s.users[t.comment.user]),account:(0,e.EW)(()=>n.account)}},computed:{commentPostTime(){return this.comment.creationDate?(0,pn.Nf)(this.comment.creationDate):null},prepareComment(){return(0,Eg.aU)(this.comment.comment)}},methods:{autoGrow(t){const s=t.target;s.scrollHeight>s.clientHeight&&(s.style.height=`${s.scrollHeight}px`)},editComment(){this.$emit("editComment",{commentId:this.comment.id,newComment:this.newComment}),this.editing=!1}}};var $L=o(881331);const kg=(0,k.A)(Og,[["render",bg]]);var la=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const xg={name:"SubmissionComments",components:{SubmissionComment:kg,LoaderSpinner:ss.A},props:{submissionDisplayed:{type:Object,required:!0},classroom:{type:Object,required:!0},assignment:{type:Object,required:!0}},emits:["hasUnsentComment"],data(){return{newComment:null,showLoader:!1,processingComment:!1}},setup(){const t=(0,na.i)(),s=(0,fe.F)(),n=(0,ze.O)();return{commentsBySubmission:(0,e.EW)(()=>t.commentsBySubmission),postSubmissionComment:t.postSubmissionComment,loadSubmissionComments:t.loadSubmissionComments,deleteSubmissionComment:t.deleteSubmissionComment,editSubmissionComment:t.editSubmissionComment,markCommentsAsRead:t.markCommentsAsRead,account:(0,e.EW)(()=>s.account),displayError:n.displayError}},watch:{"submissionDisplayed.id":function(){this.loadComments().then(()=>{this.markAsRead()})},hasUnsentComment(){this.$emit("hasUnsentComment",this.hasUnsentComment)}},computed:{comments(){return this.commentsBySubmission[this.submissionDisplayed.id]||[]},unreadComments(){return this.comments.filter(t=>t.unread).map(t=>t.id&&t.user!==this.account.id)},displayCommentForm(){return this.assignment.state!=="archived"&&this.classroom.state!=="archived"},hasUnsentComment(){return this.newComment&&this.newComment.length>0}},methods:{autoGrow(t){const s=t.target;s.scrollHeight>s.clientHeight&&(s.style.height=`${s.scrollHeight}px`)},loadComments(){const t=this.submissionDisplayed,s={id:t.id,classroom:t.classroom,assignment:t.assignment};return this.loadSubmissionComments(s)},sendComment(){return la(this,null,function*(){this.processingComment=!0;const t=this.submissionDisplayed,s={id:t.id,classroom:t.classroom,assignment:t.assignment,comment:this.newComment};try{yield this.postSubmissionComment(s),this.newComment=null,this.processingComment=!1}catch(n){this.processingComment=!1}})},editComment({commentId:t,newComment:s}){this.processingComment=!0;const n=this.submissionDisplayed,r={id:n.id,classroom:n.classroom,assignment:n.assignment,commentId:t,comment:s};this.editSubmissionComment(r).then(()=>{this.processingComment=!1}).catch(()=>{this.processingComment=!1})},deleteComment(t){const s=this.submissionDisplayed,n={id:s.id,classroom:s.classroom,assignment:s.assignment,comment:t};this.deleteSubmissionComment(n)},markAsRead(){const t=this.submissionDisplayed,s={id:t.id,classroom:t.classroom,assignment:t.assignment};this.markCommentsAsRead(s)}},created(){return la(this,null,function*(){this.showLoader=!0,this.loadComments().then(()=>{this.markAsRead()}),this.showLoader=!1})}};var HL=o(697523);const wg=(0,k.A)(xg,[["render",ug]]),Ig=o.p+"img/308ebe466e5dcd6dcb1d.svg",Rg={id:"btn-turnin-container",ref:"root"},Fg={key:0,class:"l"},Wg={key:1,src:Ig};function Ug(t,s,n,r,d,a){const f=(0,e.g2)("f-button"),h=(0,e.g2)("loader-spinner"),u=(0,e.g2)("sidebar-menu-item");return(0,e.uX)(),(0,e.CE)("div",Rg,[n.location==="assignmentInfoSidebar"?((0,e.uX)(),(0,e.Wv)(f,{key:0,size:"small",onClick:s[0]||(s[0]=(0,C.D$)(g=>a.turnIn(),["stop","prevent"])),disabled:d.loading||a.disableButton,"full-width":"",loading:d.loading,"default-text":"edu:submission.cta-submit"},null,8,["disabled","loading"])):n.location==="mobileSidebar"?((0,e.uX)(),(0,e.Wv)(u,{key:1,title:t.$t("edu:submission.cta-submit"),onClick:s[1]||(s[1]=(0,C.D$)(g=>a.turnIn(),["stop","prevent"])),disabled:d.loading||a.disableButton},{icon:(0,e.k6)(()=>[d.loading?((0,e.uX)(),(0,e.CE)("div",Fg,[(0,e.bF)(h,{size:16,"line-size":2})])):((0,e.uX)(),(0,e.CE)("img",Wg))]),_:1},8,["title","disabled"])):(0,e.Q3)("",!0)],512)}var da=o(243935);function Bg(t,s,n,r,d,a){const f=(0,e.g2)("arrow-forward");return(0,e.uX)(),(0,e.CE)("button",{class:(0,l.C4)(t.$style.menuItem)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.itemIcon)},[(0,e.RG)(t.$slots,"icon")],2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.itemText)},(0,l.v_)(n.title),3),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.forwardIcon)},[(0,e.bF)(f)],2)],2)}var ca=o(901825);const jg={name:"SidebarMenuItem",components:{arrowForward:ca.A},props:{title:{type:String,default:null}}};var Kg=o(454114),Ng=o.n(Kg);const ua={};ua.$style=Ng();const hn=(0,k.A)(jg,[["render",Bg],["__cssModules",ua]]);var Xg=Object.defineProperty,$g=Object.defineProperties,zg=Object.getOwnPropertyDescriptors,_a=Object.getOwnPropertySymbols,Hg=Object.prototype.hasOwnProperty,Vg=Object.prototype.propertyIsEnumerable,pa=(t,s,n)=>s in t?Xg(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Os=(t,s)=>{for(var n in s||(s={}))Hg.call(s,n)&&pa(t,n,s[n]);if(_a)for(var n of _a(s))Vg.call(s,n)&&pa(t,n,s[n]);return t},ma=(t,s)=>$g(t,zg(s)),ga=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const Qg={name:"BtnSsTurnIn",components:{LoaderSpinner:ss.A,SidebarMenuItem:hn},data(){return{loading:!1}},props:{location:{type:String,default:"header"},audio:{type:Object,required:!0}},setup(){const t=(0,ct.w)(),s=(0,zt.X)(),n=(0,Pe.N)(),r=(0,ze.O)();return{performanceTrackSaved:(0,e.EW)(()=>t.performanceTrackSaved),currentTrack:(0,e.EW)(()=>t.currentTrack),submitPerformanceTrack:t.submitPerformanceTrack,score:(0,e.EW)(()=>n.score),submission:(0,e.EW)(()=>s.currentSubmission),assignment:(0,e.EW)(()=>s.currentSubmissionAssignment),setCurrentSubmission:s.setCurrentSubmission,displayError:r.displayError}},emits:["turnInDialog"],computed:ma(Os(Os({},(0,A.aH)(tt.Z,["assignments"])),(0,A.aH)(Et.m,["studentSubmissionsByAssignment"])),{isGoogleAssignment(){var t;return((t=this.assignment)==null?void 0:t.googleClassroom)&&!!this.assignment.googleClassroom.id},isMicrosoftTeams(){var t;return((t=this.assignment)==null?void 0:t.microsoftGraph)&&!!this.assignment.microsoftGraph.id},isPerformanceAssignment(){return this.assignment&&this.assignment.type==="performance"},noTurnablePerformanceAssignment(){var t;return this.loading?!1:!!(this.isPerformanceAssignment&&!this.performanceTrackSaved||((t=this.assignment)==null?void 0:t.state)!=="active")},noTurnableAssignments(){return this.assignsCanTurnin.length===0},assignsCanTurnin(){return Object.values(this.assignments).filter(s=>s.state==="active"&&s.type!=="worksheet")},disableButton(){return this.loading?!0:this.isPerformanceAssignment?!!this.noTurnablePerformanceAssignment:!!this.noTurnableAssignments},messageToShow(){return!this.disableButton||this.loading?null:this.noTurnablePerformanceAssignment?this.$t("edu:submission.no-recorded-track"):this.noTurnableAssignments?this.$t("edu:submission.no-active-assignment"):null}}),methods:ma(Os(Os(Os(Os({},(0,A.i0)(Oo.V,["loadClasses"])),(0,A.i0)(tt.Z,["loadAllClassesAssignments"])),(0,A.i0)(Et.m,["upsertSubmission"])),(0,A.i0)(z.j,["showDialog"])),{turnIn(){return ga(this,null,function*(){this.$emit("turnInDialog"),this.loading=!0,yield this.submitPerformance(),this.showDialog({key:"SuccessDialog"}),this.loading=!1})},submitPerformance(){return ga(this,null,function*(){let t=this.submission;t=yield this.upsertSubmission({submission:{id:t.id,classroom:t.classroom,assignment:t.assignment,attachments:t.attachments,submit:!0},isGoogleClassroom:this.isGoogleAssignment,isMicrosoftTeams:this.isMicrosoftTeams}),this.isPerformanceAssignment&&this.submitPerformanceTrack({score:this.score,track:this.currentTrack}),this.setCurrentSubmission(t.id)})}}),watch:{messageToShow(t){t!==null?this.$tooltip?this.$tooltip.setContent(this.messageToShow):this.$tooltip=new da.vF(this.$refs.root,{placement:"bottom",touch:!1,content:this.messageToShow,arrow:da.qO}):this.$tooltip&&this.$tooltip.destroy()}},mounted(){this.loading=!0,this.loadClasses().then(()=>this.loadAllClassesAssignments().then(()=>{this.loading=!1})).catch(t=>{this.loading=!1,this.displayError({error:t})})}},fa=(0,k.A)(Qg,[["render",Ug]]);var Gg=o(3428);function Jg(t,s,n,r,d,a){const f=(0,e.g2)("MusicScoreIcon");return n.attachment&&n.currentlyEditingScoreId?((0,e.uX)(),(0,e.CE)("div",{key:0,onClick:s[0]||(s[0]=h=>t.$emit("openAttachment")),class:(0,l.C4)({[t.$style.attachmentItem]:!0,[t.$style.currentlyEditing]:a.isCurrentlyEditing})},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.iconWrap)},[(0,e.bF)(f)],2),(0,e.Lk)("span",{class:(0,l.C4)(t.$style.sTitle)},(0,l.v_)(n.attachment.title),3),a.isCurrentlyEditing?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,l.C4)(t.$style.editingWrap)},[(0,e.Lk)("span",null,(0,l.v_)(t.$t("edu:assignment.sidebar.editing")),1)],2)):(0,e.Q3)("",!0)],2)):(0,e.Q3)("",!0)}var Yg=o(257325);const Zg={name:"AssignmentSidebarAttachmentItem",emits:["openAttachment"],components:{MusicScoreIcon:Yg.A},props:{attachment:{type:Object,required:!0},currentlyEditingScoreId:{type:String,required:!0}},computed:{isCurrentlyEditing(){return this.currentlyEditingScoreId===this.attachment.score}},methods:{}};var qg=o(444852),ef=o.n(qg);const ha={};ha.$style=ef();const tf=(0,k.A)(Zg,[["render",Jg],["__cssModules",ha]]),sf=["onClick"];function of(t,s,n,r,d,a){return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(t.$style.sidebarTabs)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(n.tabs,(f,h)=>((0,e.uX)(),(0,e.CE)("button",{key:h,type:"button",class:(0,l.C4)({[t.$style.tabItem]:!0,[t.$style.currentlyViewing]:n.currentlyViewingTab===f}),style:(0,l.Tr)(a.tabWidth),onClick:u=>a.switchView(f)},[(0,e.RG)(t.$slots,f)],14,sf))),128))],2)}const nf={name:"SidebarTabs",emits:["switchView"],components:{},props:{currentlyViewingTab:{type:String,required:!0},tabs:{type:Array,required:!0}},computed:{tabWidth(){let t=Math.floor(100/this.tabs.length);return t+="%",{width:t}}},methods:{switchView(t){this.$emit("switchView",t)}}};var af=o(310422),rf=o.n(af);const va={};va.$style=rf();const lf=(0,k.A)(nf,[["render",of],["__cssModules",va]]);var df=Object.defineProperty,cf=Object.defineProperties,uf=Object.getOwnPropertyDescriptors,ya=Object.getOwnPropertySymbols,_f=Object.prototype.hasOwnProperty,pf=Object.prototype.propertyIsEnumerable,ba=(t,s,n)=>s in t?df(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,os=(t,s)=>{for(var n in s||(s={}))_f.call(s,n)&&ba(t,n,s[n]);if(ya)for(var n of ya(s))pf.call(s,n)&&ba(t,n,s[n]);return t},Ea=(t,s)=>cf(t,uf(s)),lo=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const mf=$t()("flat:assignment-sidebar"),gf=t=>JSON.parse(JSON.stringify(t)),ff={name:"AssignmentInfoSidebar",emits:["hideSidebar","showDialogAssignmentInfo"],components:{SuccessDialog:es.C_,LoaderSpinner:ss.A,AssignmentSidebarAttachmentItem:tf,SidebarTabs:lf,SubmissionComments:wg,DialogLibraryPicker:ig,AssignmentInstructionAndAttachments:Gg.A,BtnSsTurnIn:fa,commentIcon:N0.A,collapseIcon:$.A,plusIcon:Ms.A,notesIcon:X0.A,fullPageIcon:$0.A},mixins:[K0.A],data(){return{loading:!0,currentlyViewingTab:"instructions",tabs:["instructions","comments"],submissionId:null,hasUnsentComment:!1,processingPickup:!1,localSubmission:null}},setup(){const t=(0,ro.j)(),s=(0,na.i)(),n=(0,Pe.N)(),r=(0,N.q6)(),d=(0,fe.F)();return{scores:(0,e.EW)(()=>t.scores),getScore:t.getAndCache,commentsBySubmission:(0,e.EW)(()=>s.commentsBySubmission),loadSubmissionComments:s.loadSubmissionComments,scoreId:(0,e.EW)(()=>n.scoreId),displayMobileEditor:(0,e.EW)(()=>n.displayMobileEditor),setZoomAutoWidthSubtract:r.setZoomAutoWidthSubtract,applyZoomAuto:r.applyZoomAuto,account:(0,e.EW)(()=>d.account)}},props:{assignment:{type:Object,required:!0},audio:{type:Object,required:!0}},watch:{submissionAttachments(t){t.forEach(s=>{s.score&&this.getScore(s.score)})}},computed:Ea(os(os(os(os({},(0,A.aH)(mn.O,["isLtiFocusMode"])),(0,A.aH)(Et.m,["submissionsByAssignmentWithAlStudents","submissionsByAssignment"])),(0,A.aH)(Oo.V,["classesById"])),(0,A.aH)(z.j,["currentDialogKey"])),{dialogKey(){return this.currentDialogKey},submissions(){return this.submissionsByAssignment[this.assignment.id]||[]},submission(){return this.localSubmission?this.localSubmission:this.dbSubmission},submissionAttachments(){var t;return((t=this.submission)==null?void 0:t.attachments)||[]},submissionAttachmentsWithResolvedScores(){return this.submissionAttachments.map(t=>Object.assign({},t,{_score:this.scores[t.score]})).filter(t=>!!t._score)},mainAttachmentsMatched(){return this.mainAttachments.map(t=>{const s=this.submissionAttachmentsWithResolvedScores.find(n=>n._score.parentScore===t.score);return Object.assign({},t,{submissionAttachment:s})})},otherSubmissionAttachments(){return this.submissionAttachments.filter(t=>t.score?!this.mainAttachmentsMatched.find(s=>s.submissionAttachment&&s.submissionAttachment.score===t.score):!1)},classroom(){return this.classesById[this.assignment.classroom]||{}},commentQuantity(){let t=this.commentsBySubmission[this.submission.id];return t=t||[],t.length},canAddScore(){return this.assignment.state!=="archived"&&this.assignment.type!=="worksheet"&&this.assignment.type!=="performance"&&(this.assignment.type!=="scoreTemplate"||this.assignment.type==="scoreTemplate"&&this.submission.id)},hasStagingStep(){return this.submission.state==="turnedIn"||this.submission.state==="returned"},dbSubmission(){return this.submissions&&this.submissions.length>0?this.submissions[0]:{attachments:[],assignment:this.assignment.id,classroom:this.assignment.classroom}},submissionsToDisplay(){const t={};let s=[...this.mainAttachmentsMatched];return s=s.concat(this.otherSubmissionAttachments),s.forEach(n=>{n.submissionAttachment&&!t[n.submissionAttachment.score]?t[n.submissionAttachment.score]=n.submissionAttachment:t[n.score]||(t[n.score]=n)}),Object.values(t)},showFullPageBtn(){return this.assignment.description&&this.assignment.description.length>0||this.contentAttachments.length>0}}),methods:Ea(os(os(os({},(0,A.i0)(z.j,["showDialog","hideDialog"])),(0,A.i0)(Et.m,["upsertSubmission","addScoreToSubmission","pullSubmissionLtiGrade","loadSubmissions"])),(0,A.i0)(mn.O,["goBackLti"])),{setupLocalSubmission(){this.localSubmission=gf(this.dbSubmission)},checkUnsentComment(t){this.hasUnsentComment=t},switchView(t){this.currentlyViewingTab!==t&&(this.currentlyViewingTab=t)},openAttachment(t){return lo(this,null,function*(){this.processingRedirect=!0;let s=`/score/${t.score}`;if(t.sharingMode==="copy")s+=`/fork?assignment=${this.assignment.id}&classroom=${this.assignment.classroom}`,this.isLtiFocusMode&&(s+="&ltiFocusMode=true");else try{(t.sharingMode==="write"||t.sharingMode==="performance")&&(yield this.addScoreToSubmission({score:t.score,classroom:this.assignment.classroom,assignment:this.assignment.id,isGoogleClassroom:this.isGoogleClassroomAssignment,isMicrosoftTeams:this.isMicrosoftTeamsAssignment})),s+=`/edit?assignment=${this.assignment.id}&classroom=${this.assignment.classroom}`,this.isLtiFocusMode&&(s+="&ltiFocusMode=true")}catch(n){(0,pe.vV)(n)}window.location=s})},pickupScore(t){return lo(this,arguments,function*({scores:s}){mf("picked up scores %s",s);try{this.processingPickup=!0,yield Promise.all(s.map(n=>lo(this,null,function*(){z0.A.helpers.addScoreToSubmission(this.localSubmission,n)}))),this.hasStagingStep||(yield this.upsertSubmission({submission:this.localSubmission,isGoogleClassroom:this.isGoogleClassroomAssignment,isMicrosoftTeams:this.isMicrosoftTeamsAssignment}),this.setupLocalSubmission()),this.processingPickup=!1}catch(n){(0,pe.vV)(n)}this.processingPickup=!1})},doneDialog(){return lo(this,null,function*(){(yield this.goBackLti())||this.hideDialog()})}}),created(){return lo(this,null,function*(){var t;this.loading=!0;try{if(yield this.loadSubmissions({classroom:this.assignment.classroom,assignment:this.assignment.id}),yield this.setupLocalSubmission(),(t=this.submission)!=null&&t.id){const s={id:this.submission.id,classroom:this.submission.classroom,assignment:this.submission.assignment};this.loadSubmissionComments(s)}}catch(s){(0,pe.vV)(s)}this.loading=!1})},mounted(){this.displayMobileEditor||(this.setZoomAutoWidthSubtract(400),this.applyZoomAuto())},beforeUnmount(){this.displayMobileEditor||(this.setZoomAutoWidthSubtract(),this.applyZoomAuto())}};var hf=o(362691),vf=o.n(hf);const Ca={};Ca.$style=vf();const yf=(0,k.A)(ff,[["render",j0],["__cssModules",Ca]]);var bf=o(58538),Ef=o(279209);const Cf=(0,e.pM)({__name:"DialogBackButton",emits:["back"],setup(t){return(s,n)=>((0,e.uX)(),(0,e.Wv)(Ef.A,{onClose:n[0]||(n[0]=r=>s.$emit("back",r))},{icon:(0,e.k6)(()=>[(0,e.bF)((0,te.R1)(bf.A))]),_:1}))}});var Sf=o(131003),Pf=o(565443),Lf=o(820067),Af=o(258230);const Mf=(0,e.pM)({__name:"PlaybackOptionsListItem",setup(t){return(s,n)=>s.$slots.action?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,l.C4)(s.$style.PlaybackOptionsListItem)},[s.$slots.icon?(0,e.RG)(s.$slots,"icon",{key:0,class:(0,l.C4)(s.$style.icon)}):(0,e.Q3)("",!0),(0,e.Lk)("div",{class:(0,l.C4)(s.$style.text)},[(0,e.RG)(s.$slots,"default")],2),(0,e.RG)(s.$slots,"action")],2)):((0,e.uX)(),(0,e.CE)("button",{key:0,class:(0,l.C4)(s.$style.PlaybackOptionsListItem)},[s.$slots.icon?(0,e.RG)(s.$slots,"icon",{key:0,class:(0,l.C4)(s.$style.icon)}):(0,e.Q3)("",!0),(0,e.Lk)("div",{class:(0,l.C4)(s.$style.text)},[(0,e.RG)(s.$slots,"default")],2),(0,e.bF)((0,te.R1)(ca.A))],2))}});var Df=o(505013),Tf=o.n(Df);const Sa={};Sa.$style=Tf();const ko=(0,k.A)(Mf,[["__cssModules",Sa]]);var Of=o(560976);const kf=(0,e.pM)({__name:"PlaybackOptionsList",props:{audio:{},displayMobileEditor:{type:Boolean},isPerformerMode:{type:Boolean}},emits:["go"],setup(t){return(s,n)=>((0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(s.$style.PlaybackOptionsList)},[(0,e.bF)(ko,{onClick:n[0]||(n[0]=(0,C.D$)(r=>s.$emit("go","playback"),["prevent"]))},{icon:(0,e.k6)(()=>[(0,e.bF)(Af.A)]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,l.v_)(s.$t("flat:score.playback.title")),1)]),_:1}),(0,e.bF)(ko,{onClick:n[1]||(n[1]=(0,C.D$)(r=>s.$emit("go","metronome"),["prevent"]))},{icon:(0,e.k6)(()=>[(0,e.bF)(Sf.A)]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,l.v_)(s.$t("flat:editor.metronome.title")),1)]),_:1}),s.isPerformerMode?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(ko,{key:0},{icon:(0,e.k6)(()=>[(0,e.bF)(Pf.A)]),action:(0,e.k6)(()=>[(0,e.bF)(Of.A,{audio:s.audio},null,8,["audio"])]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,l.v_)(s.$t("flat:play-speed.title"))+" ",1)]),_:1})),!s.displayMobileEditor&&!s.isPerformerMode?((0,e.uX)(),(0,e.Wv)(ko,{key:1,onClick:n[2]||(n[2]=(0,C.D$)(r=>s.$emit("go","recordings"),["prevent"]))},{icon:(0,e.k6)(()=>[(0,e.bF)(Lf.A)]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,l.v_)(s.$t("flat:recordings.manage-title")),1)]),_:1})):(0,e.Q3)("",!0)],2))}});var xf=o(94960),wf=o.n(xf);const Pa={};Pa.$style=wf();const If=(0,k.A)(kf,[["__cssModules",Pa]]);var Rf=o(154982),Ff=o(935902),La=o(649331);const Wf={key:1},Uf=(0,e.pM)({__name:"MobilePlaybackSettings",props:{scoreData:{},audio:{}},setup(t){const s=["landing","playback","metronome","playbackSpeed","recordings"],n=(0,te.KR)("landing"),r={landing:"flat:volume.play-opts",playback:"flat:score.playback.title",metronome:"flat:editor.metronome.title",playbackSpeed:"",recordings:""},d=(0,La.Bd)(),a=(0,e.EW)(()=>d.t(r[n.value])),{hideDialog:f}=(0,z.j)(),h=(0,qe.o)(),u=(0,e.EW)(()=>h.isPerformerMode);function g(b){if(s.includes(b))n.value=b;else throw new Error(`Unknown view: ${b}`)}return(b,P)=>((0,e.uX)(),(0,e.Wv)(ft.A,{"regular-width":500,title:a.value,"separate-header":!1,onClose:(0,te.R1)(f)},{leftIcon:(0,e.k6)(()=>[n.value!=="landing"?((0,e.uX)(),(0,e.Wv)(Cf,{key:0,onBack:P[0]||(P[0]=F=>g("landing"))})):((0,e.uX)(),(0,e.CE)("div",Wf))]),default:(0,e.k6)(()=>[n.value==="landing"?((0,e.uX)(),(0,e.Wv)(If,{key:0,displayMobileEditor:!0,isPerformerMode:u.value,audio:b.audio,class:(0,l.C4)(b.$style.content),onGo:P[1]||(P[1]=F=>g(F))},null,8,["isPerformerMode","audio","class"])):n.value==="playback"?((0,e.uX)(),(0,e.Wv)(Rf.A,{key:1,class:(0,l.C4)(b.$style.content),audio:b.audio,"score-data":b.scoreData},null,8,["class","audio","score-data"])):n.value==="metronome"?((0,e.uX)(),(0,e.Wv)(Ff.A,{key:2,class:(0,l.C4)(b.$style.content),audio:b.audio},null,8,["class","audio"])):(0,e.Q3)("",!0)]),_:1},8,["title","onClose"]))}});var Bf=o(126176),jf=o.n(Bf);const Aa={};Aa.$style=jf();const Kf=(0,k.A)(Uf,[["__cssModules",Aa]]),Nf={key:0},Xf=["title"];function $f(t,s,n,r,d,a){const f=(0,e.g2)("close-icon"),h=(0,e.g2)("mobile-sidebar-menu"),u=(0,e.g2)("download-app");return r.mobSidebarOpened?((0,e.uX)(),(0,e.CE)("div",Nf,[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.backdrop),onClick:s[0]||(s[0]=g=>a.closeSidebar())},null,2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.sidebar)},[(0,e.Lk)("button",{title:t.$t("flat:close"),class:(0,l.C4)(t.$style.close),onClick:s[1]||(s[1]=g=>a.closeSidebar()),"data-cy":"close-sidebar"},[(0,e.bF)(f)],10,Xf),(0,e.bF)(h,{interaction:n.interaction,class:(0,l.C4)(t.$style.sidebarMenu)},null,8,["interaction","class"]),r.isEdu?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(u,{key:0,campaign:"flat-editor-sidebar"}))],2)])):(0,e.Q3)("",!0)}const zf=["href"],Hf=["src"],Vf=["href"],Qf=["src"],Gf=(0,e.pM)({__name:"DownloadApp",props:{platform:{default:"auto"},campaign:{default:"flat-webapp"},language:{},width:{default:140}},setup(t){const s=t,n=(0,e.EW)(()=>s.language||q.A.language||"en"),r=(0,e.EW)(()=>({width:`${s.width}px`})),d=(0,e.EW)(()=>`https://apps.apple.com/app/apple-store/id1177592149?pt=118478650&ct=${encodeURIComponent(s.campaign)}&mt=8`),a=(0,e.EW)(()=>{try{return o(301626)(`./${n.value}/app-store.svg`)}catch(g){return o(420275)}}),f=(0,e.EW)(()=>{try{return o(858453)(`./${n.value}/google-play.svg`)}catch(g){return o(645462)}}),h=(0,e.EW)(()=>{const g=new URLSearchParams({utm_source:"flat",utm_medium:"flat-website",utm_campaign:s.campaign});return`https://play.google.com/store/apps/details?id=com.tutteo.flat&referrer=${encodeURIComponent(g.toString())}`}),u=(0,e.EW)(()=>{var g,b;if(s.platform==="ios"||s.platform==="android")return s.platform;if(s.platform==="auto"){const P=(b=(g=q.A.ua)==null?void 0:g.osName)==null?void 0:b.toLowerCase();if(P==="ios"||P==="android")return P}return null});return(g,b)=>u.value==="ios"?((0,e.uX)(),(0,e.CE)("a",{key:0,href:d.value,target:"_blank",rel:"noopener"},[(0,e.Lk)("img",{src:a.value,alt:"App Store",style:(0,l.Tr)(r.value)},null,12,Hf)],8,zf)):u.value==="android"?((0,e.uX)(),(0,e.CE)("a",{key:1,href:h.value,target:"_blank",rel:"noopener"},[(0,e.Lk)("img",{src:f.value,alt:"Google Play",style:(0,l.Tr)(r.value)},null,12,Qf)],8,Vf)):(0,e.Q3)("",!0)}});var n5=o(558135);const Jf=(0,k.A)(Gf,[["__scopeId","data-v-732e6278"]]);function Yf(t,s,n,r,d,a){const f=(0,e.g2)("btn-ss-turn-in"),h=(0,e.g2)("sidebar-menu-share"),u=(0,e.g2)("credits-icon"),g=(0,e.g2)("sidebar-menu-item"),b=(0,e.g2)("note-icon"),P=(0,e.g2)("edit-icon"),F=(0,e.g2)("export-icon"),S=(0,e.g2)("history-icon"),H=(0,e.g2)("help-icon");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(t.$style.menuList)},[r.dislaySsTurnin?((0,e.uX)(),(0,e.Wv)(f,{key:0,audio:n.interaction.audio,location:"mobileSidebar",onTurnInDialog:s[0]||(s[0]=I=>a.hide())},null,8,["audio"])):(0,e.Q3)("",!0),(0,e.bF)(h,{scoreData:n.interaction.scoreData},null,8,["scoreData"]),(0,e.bF)(g,{title:t.$t("flat:credits.text"),onClick:s[1]||(s[1]=I=>a.goCredits())},{icon:(0,e.k6)(()=>[(0,e.bF)(u)]),_:1},8,["title"]),(0,e.bF)(g,{title:t.$t("flat:score.instruments-change.manage-instruments"),onClick:s[2]||(s[2]=I=>a.goInstruments())},{icon:(0,e.k6)(()=>[(0,e.bF)(b)]),_:1},8,["title"]),(0,e.bF)(g,{title:t.$t("flat:score.layout.title-short"),onClick:s[3]||(s[3]=I=>a.goLayout())},{icon:(0,e.k6)(()=>[(0,e.bF)(P)]),_:1},8,["title"]),(0,e.bF)(g,{title:t.$t("flat:score.export.sidebar-title"),onClick:s[4]||(s[4]=I=>a.goExport())},{icon:(0,e.k6)(()=>[(0,e.bF)(F)]),_:1},8,["title"]),(0,e.bF)(g,{title:t.$t("editor:toolbar.history.title"),onClick:s[5]||(s[5]=I=>a.goHistory())},{icon:(0,e.k6)(()=>[(0,e.bF)(S)]),_:1},8,["title"]),(0,e.bF)(g,{title:t.$t("editor:toolbar.help.sidebar-title"),onClick:s[6]||(s[6]=I=>a.openHelp())},{icon:(0,e.k6)(()=>[(0,e.bF)(H)]),_:1},8,["title"])],2)}var Zf=o(214399),qf=o(87975),eh=o(676487),th=o(183445),sh=o(918194);function oh(t,s,n,r,d,a){const f=(0,e.g2)("add-people-icon"),h=(0,e.g2)("sidebar-menu-item"),u=(0,e.g2)("ddn-sharing"),g=(0,e.g2)("dropdown");return(0,e.uX)(),(0,e.Wv)(g,{direction:"bottom-end",distance:[0,12],onOpenChange:a.toggleDdn,ref:"dropdown"},{trigger:(0,e.k6)(()=>[(0,e.bF)(h,{title:t.$t("flat:sv.share")},{icon:(0,e.k6)(()=>[(0,e.bF)(f)]),_:1},8,["title"])]),default:(0,e.k6)(()=>[(0,e.bF)(u,{items:[r.score],"can-display-collaborators":!r.isEmbedAccount,"can-display-publish":!r.isEmbedAccount,onClose:a.closeDdn},null,8,["items","can-display-collaborators","can-display-publish","onClose"])]),_:1},8,["onOpenChange"])}const nh={name:"SidebarMenuShare",components:{SidebarMenuItem:hn,Dropdown:Ts.m,DdnSharing:Vi.A,addPeopleIcon:gn.A},props:{scoreData:{type:Object,required:!0}},setup(){const t=(0,Pe.N)(),s=(0,fe.F)(),n=(0,nt.B)();return{score:(0,e.EW)(()=>t.score),isEdu:(0,e.EW)(()=>s.isEdu),isEmbedAccount:(0,e.EW)(()=>s.isEmbedAccount),addExperience:n.addExperience}},methods:{toggleDdn(t){t&&(this.addExperience("onboarding.share.open"),this.scoreData.scoreActions.executePublicAction("save",{context:"saveBeforeShare"},{muteUnavailableAction:!0}))},closeDdn(){this.$refs.dropdown.close()}}},ih=(0,k.A)(nh,[["render",oh]]);var ah=Object.defineProperty,rh=Object.defineProperties,lh=Object.getOwnPropertyDescriptors,Ma=Object.getOwnPropertySymbols,dh=Object.prototype.hasOwnProperty,ch=Object.prototype.propertyIsEnumerable,Da=(t,s,n)=>s in t?ah(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,uh=(t,s)=>{for(var n in s||(s={}))dh.call(s,n)&&Da(t,n,s[n]);if(Ma)for(var n of Ma(s))ch.call(s,n)&&Da(t,n,s[n]);return t},_h=(t,s)=>rh(t,lh(s));const ph={name:"MobileSidebarMenu",components:{SidebarMenuItem:hn,SidebarMenuShare:ih,BtnSsTurnIn:fa,addPeopleIcon:gn.A,creditsIcon:Zf.A,noteIcon:yi.A,editIcon:qf.A,exportIcon:eh.A,historyIcon:th.A,helpIcon:sh.A},props:{interaction:{type:Object,required:!0}},setup(){const t=(0,Pe.N)(),s=(0,zt.X)(),n=(0,N.q6)();return{score:(0,e.EW)(()=>t.score),setMobSidebarOpened:t.setMobSidebarOpened,dislaySsTurnin:(0,e.EW)(()=>s.dislaySsTurnin),loadDocumentSettings:n.loadDocumentSettings}},methods:_h(uh({},(0,A.i0)(z.j,["showDialog"])),{goCredits(){this.hide(),this.loadDocumentSettings("credits")},goInstruments(){this.hide(),this.loadDocumentSettings("instruments")},goLayout(){this.hide(),this.loadDocumentSettings("layout")},goExport(){this.hide(),this.loadDocumentSettings("export")},goHistory(){let t=`/score/${this.score.id}/history`;this.score.sharingKey&&(t+=`?sharingKey=${this.score.sharingKey}`),window.location.href=t},openHelp(){this.hide(),this.interaction.scoreData.scoreActions.executePublicAction("showHelp")},hide(){this.setMobSidebarOpened(!1)}})};var mh=o(18659),gh=o.n(mh);const Ta={};Ta.$style=gh();const fh={name:"ScoreEditorSidebar",components:{MobileSidebarMenu:(0,k.A)(ph,[["render",Yf],["__cssModules",Ta]]),DownloadApp:Jf,closeIcon:ia.A},props:{interaction:{type:Object,required:!0}},setup(){const t=(0,fe.F)(),s=(0,Pe.N)();return{isEdu:(0,e.EW)(()=>t.isEdu),mobSidebarOpened:(0,e.EW)(()=>s.mobSidebarOpened),setMobSidebarOpened:s.setMobSidebarOpened}},methods:{closeSidebar(){this.setMobSidebarOpened(!1)}}};var hh=o(902413),vh=o.n(hh);const Oa={};Oa.$style=vh();const yh=(0,k.A)(fh,[["render",$f],["__cssModules",Oa]]),bh=o.p+"img/3785edcbb030083fa1a3.svg",Eh={key:0,class:"se-top no-select"},Ch={class:"se-header keeptitle"},Sh={class:"title"},Ph={class:"se-tb reg"},Lh={class:"se-tb-inner"},Ah={class:"se-tb-main"},Mh={class:"se-tb-main-edition"},Dh={class:"se-tb-main-doc"},Th={key:1,class:"se-content ds-content"},Oh={key:4,class:"ds-preview"},kh={class:"ds-preview-inner"},xh={class:"ds-preview-label"};function wh(t,s,n,r,d,a){const f=(0,e.g2)("flat"),h=(0,e.g2)("ToolbarSimpleIcon"),u=(0,e.g2)("ScoreEditorCredits"),g=(0,e.g2)("ScoreEditorInstruments"),b=(0,e.g2)("ScoreEditorLayout"),P=(0,e.g2)("ScoreEditorTracks"),F=(0,e.g2)("ScorePreview2"),S=(0,e.g2)("ScorePreview"),H=(0,e.g2)("score-editor-mob-credits"),I=(0,e.g2)("score-editor-instruments"),Y=(0,e.g2)("score-editor-layout"),Z=(0,e.g2)("score-editor-mob-export");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(["se-docsettings se-global",{mob:r.displayMobileEditor}]),onKeydown:s[6]||(s[6]=(0,C.D$)(()=>{},["stop"])),onKeyup:s[7]||(s[7]=(0,C.D$)(()=>{},["stop"])),onKeypress:s[8]||(s[8]=(0,C.D$)(()=>{},["stop"]))},[r.displayMobileEditor?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",Eh,[(0,e.Lk)("div",Ch,[(0,e.Lk)("button",{onClick:s[0]||(s[0]=Fe=>a.toggleSettings()),class:"logo","aria-label":"Go back to the score"},[(0,e.bF)(f,{class:"f-2021"})]),(0,e.Lk)("div",Sh,(0,l.v_)(t.$t("flat:docsettings.title"))+": "+(0,l.v_)(r.score.title),1),(0,e.Lk)("button",{class:"ds-close","aria-label":"Close",onClick:s[1]||(s[1]=Fe=>a.toggleSettings())},s[9]||(s[9]=[(0,e.Lk)("img",{src:bh},null,-1)]))]),(0,e.Lk)("div",Ph,[(0,e.Lk)("div",Lh,[(0,e.Lk)("div",Ah,[(0,e.Lk)("div",Mh,[r.tbMetaEnabled?((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:s[2]||(s[2]=Fe=>a.toggleSettings("credits")),class:(0,l.C4)({active:a.isUiCredits})},(0,l.v_)(t.$t("flat:credits.text")),3)):(0,e.Q3)("",!0),r.tbInstrumentsEnabled?((0,e.uX)(),(0,e.CE)("button",{key:1,onClick:s[3]||(s[3]=Fe=>a.toggleSettings("instruments")),class:(0,l.C4)({active:a.isUiInstruments})},(0,l.v_)(t.$t("flat:score.instruments")),3)):(0,e.Q3)("",!0),r.tbLayoutEnabled?((0,e.uX)(),(0,e.CE)("button",{key:2,onClick:s[4]||(s[4]=Fe=>a.toggleSettings("layout")),class:(0,l.C4)({active:a.isUiLayout})},(0,l.v_)(t.$t("flat:score.layout.title")),3)):(0,e.Q3)("",!0),r.tbAudioEnabled&&!r.isMusicSnippet&&r.isCloudScore&&!r.restrictToAudioTracks?((0,e.uX)(),(0,e.CE)("button",{key:3,onClick:s[5]||(s[5]=Fe=>a.toggleSettings("tracks")),class:(0,l.C4)({active:a.isUiTracks})},(0,l.v_)(t.$t("flat:recordings.title")),3)):(0,e.Q3)("",!0)]),(0,e.Lk)("div",Dh,[r.enabledActionsSet.has("undo")?((0,e.uX)(),(0,e.Wv)(h,{key:0,action:"undo","score-data":n.scoreData},null,8,["score-data"])):(0,e.Q3)("",!0),r.enabledActionsSet.has("redo")?((0,e.uX)(),(0,e.Wv)(h,{key:1,action:"redo","score-data":n.scoreData},null,8,["score-data"])):(0,e.Q3)("",!0)])])])])])),r.displayMobileEditor?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",Th,[a.isUiCredits?((0,e.uX)(),(0,e.Wv)(u,{key:`${d.settingsKey}-credits`,"score-data":n.scoreData,onHidePreview:a.hidePreview},null,8,["score-data","onHidePreview"])):a.isUiInstruments?((0,e.uX)(),(0,e.Wv)(g,{key:`${d.settingsKey}-instruments`,"score-data":n.scoreData},null,8,["score-data"])):a.isUiLayout?((0,e.uX)(),(0,e.Wv)(b,{key:`${d.settingsKey}-layout`,"score-data":n.scoreData,"display-preview":a.displayPreview,onPreviewScore:a.updatePreviewScore},null,8,["score-data","display-preview","onPreviewScore"])):a.isUiTracks?((0,e.uX)(),(0,e.Wv)(P,{key:`${d.settingsKey}-tracks`,"score-data":n.scoreData,audio:n.audio},null,8,["score-data","audio"])):(0,e.Q3)("",!0),a.displayPreview?((0,e.uX)(),(0,e.CE)("div",Oh,[(0,e.Lk)("div",kh,[(0,e.Lk)("div",xh,(0,l.v_)(t.$t("flat:docsettings.preview-score"))+":",1),a.useNewDisplay?((0,e.uX)(),(0,e.Wv)(F,{"score-data":a.previewScoreData,key:`preview2-${d.previewKey}`},null,8,["score-data"])):((0,e.uX)(),(0,e.Wv)(S,{"score-data":a.previewScoreData,key:`preview-${d.previewKey}`},null,8,["score-data"]))])])):(0,e.Q3)("",!0)])),r.displayMobileEditor?((0,e.uX)(),(0,e.CE)("div",{key:2,class:(0,l.C4)(t.$style.mobileDoc)},[a.isUiCredits?((0,e.uX)(),(0,e.Wv)(H,{key:`credits-${d.settingsKey}`,scoreData:n.scoreData,onHidePreview:a.hidePreview},null,8,["scoreData","onHidePreview"])):a.isUiInstruments?((0,e.uX)(),(0,e.Wv)(I,{key:`instruments-${d.settingsKey}`,scoreData:n.scoreData},null,8,["scoreData"])):a.isUiLayout?((0,e.uX)(),(0,e.Wv)(Y,{key:`layout-${d.settingsKey}`,scoreData:n.scoreData,onPreviewScore:a.updatePreviewScore},null,8,["scoreData","onPreviewScore"])):a.isUiExport?((0,e.uX)(),(0,e.Wv)(Z,{key:`export-${d.settingsKey}`,scoreData:n.scoreData},null,8,["scoreData"])):(0,e.Q3)("",!0)],2)):(0,e.Q3)("",!0)],34)}var Ih=o(16217),Rh=o(200486),Fh=o(458786),Wh=o(736175),Uh=o(580109),Bh=o(777432),jh=o(137532),Kh=o(168380),Nh=o(249149),Xh=o(190191),$h=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const zh={class:"score-drawer score-preview2"},Hh=(0,e.pM)({__name:"ScorePreview2",props:{scoreData:{},renderTech:{},resourcesProvider:{}},setup(t){const s=$t()("flat:scorePreview2"),n=q.A.fontsApiBaseUrl||"/api/v2/fonts",r=t,d=(0,te.KR)(null),a=(0,te.KR)(!0),f=new(si())(1,Number.POSITIVE_INFINITY);(0,te.IG)(f);const h=(0,e.EW)(()=>({showSystemBreakSymbols:!1,displayOutOfPitch:!0,displayFirstKey:!0})),u=function(){const H=r.scoreData.adagioData,I=(0,Rh.z)();return new Fh.A(H,h.value,I)}();(0,te.IG)(u);const g=Kh.A.SVG_DOM,b=(0,te.KR)(null);(0,Nh.A)({dataProvider:u,renderTech:g,fontApiBaseURL:n,resourcesProvider:r.resourcesProvider}).then(S=>{const{abstractRenderer:H,displayRenderer:I,cursorDisplayRenderer:Y}=S;(0,te.IG)(H),(0,te.IG)(I);const Z=[I];Y!==I&&((0,te.IG)(Y),Z.push(Y));const Fe=new Uh.A({queue:f,dataProvider:u,abstractRenderer:H,renderers:Z});(0,te.IG)(Fe),b.value={abstractRenderer:H,displayRenderer:I,cursorDisplayRenderer:Y,wrappedScoreStructure:Fe},f.add(P)});function P(){return $h(this,null,function*(){if(!b.value)return;a.value=!0,b.value.displayRenderer.setLayout({type:Wh.A.PAGE}),r.scoreData.ensurePageSize(),u.replaceScoreData(r.scoreData.adagioData);const S=(0,jh.A)({requestedPageIdx:0,lastRenderedMeasureUuid:null,structure:b.value.wrappedScoreStructure}),H=yield b.value.displayRenderer.renderPages({pagesIndexes:[0],requestMeasuresDataUntil:S+1});if(H===null||H.length===0||H[0].content===null){a.value=!1,s("Preview render failed");return}const I=H[0].content;if(I.type!==Bh.A.SVG_NODE)throw a.value=!1,new Error("Preview render failed: expected SVG_NODE type");if(!d.value)throw a.value=!1,new Error("Preview content element not found");const Y=I.payload;F(Y),d.value.appendChild(Y),a.value=!1})}function F(S){const H=S,I=H.getAttribute("width"),Y=H.getAttribute("height");H.setAttribute("viewBox",`0 0 ${I} ${Y}`)}return(S,H)=>((0,e.uX)(),(0,e.CE)("div",zh,[(0,e.bo)((0,e.bF)(Xh.A,null,null,512),[[C.aG,a.value]]),(0,e.Lk)("div",{class:"preview-content",ref_key:"content",ref:d},null,512)]))}});var c5=o(29924);const Vh=Hh;var Qh=o(721687),Gh=o(299035);const Jh={class:"ds-settings-wrap"},Yh={class:"ds-settings-title"},Zh={class:"wrap-form"},qh={for:"creditsTitle",class:"label-ext-small"},ev=["placeholder"],tv={class:"wrap-form"},sv={for:"creditsSubtitle",class:"label-ext-small"},ov=["placeholder"],nv={class:"grid-lyricist"},iv={class:"wrap-form"},av={for:"creditsLyricist",class:"label-ext-small"},rv=["placeholder"],lv={class:"wrap-form"},dv={for:"creditsComposer",class:"label-ext-small"},cv=["placeholder"],uv={class:"wrap-form"},_v={for:"creditsArranger",class:"label-ext-small"},pv=["placeholder"],mv={class:"wrap-form"},gv={for:"creditsRights",class:"label-ext-small"},fv=["placeholder"],hv={class:"cta"},vv=["href"];function yv(t,s,n,r,d,a){const f=(0,e.g2)("f-button"),h=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("div",Jh,[(0,e.Lk)("div",Yh,(0,l.v_)(t.$t("flat:credits.text")),1),(0,e.Lk)("form",{class:"ds-settings-card ds-credits",onSubmit:s[6]||(s[6]=(0,C.D$)(u=>a.save(),["prevent"]))},[(0,e.Lk)("div",Zh,[(0,e.Lk)("label",qh,(0,l.v_)(t.$t("flat:credits.title")),1),(0,e.bo)((0,e.Lk)("input",{type:"text",id:"creditsTitle",class:"form-control medium","onUpdate:modelValue":s[0]||(s[0]=u=>d.title=u),placeholder:d.placeholders.title,autofocus:""},null,8,ev),[[C.Jo,d.title]])]),(0,e.Lk)("div",tv,[(0,e.Lk)("label",sv,(0,l.v_)(t.$t("flat:credits.subtitle")),1),(0,e.bo)((0,e.Lk)("input",{type:"text",id:"creditsSubtitle",class:"form-control medium","onUpdate:modelValue":s[1]||(s[1]=u=>d.subtitle=u),placeholder:d.placeholders.subtitle},null,8,ov),[[C.Jo,d.subtitle]])]),(0,e.Lk)("div",nv,[(0,e.Lk)("div",iv,[(0,e.Lk)("label",av,(0,l.v_)(t.$t("flat:credits.lyricist")),1),(0,e.bo)((0,e.Lk)("input",{type:"text",id:"creditsLyricist",class:"form-control medium","onUpdate:modelValue":s[2]||(s[2]=u=>d.lyricist=u),placeholder:d.placeholders.lyricist},null,8,rv),[[C.Jo,d.lyricist]])]),(0,e.Lk)("div",lv,[(0,e.Lk)("label",dv,(0,l.v_)(t.$t("flat:credits.composer")),1),(0,e.bo)((0,e.Lk)("input",{type:"text",id:"creditsComposer",class:"form-control medium","onUpdate:modelValue":s[3]||(s[3]=u=>d.composer=u),placeholder:d.placeholders.composer},null,8,cv),[[C.Jo,d.composer]])])]),(0,e.Lk)("div",uv,[(0,e.Lk)("label",_v,(0,l.v_)(t.$t("flat:credits.arranger")),1),(0,e.bo)((0,e.Lk)("input",{type:"text",id:"creditsArranger",class:"form-control medium","onUpdate:modelValue":s[4]||(s[4]=u=>d.arranger=u),placeholder:d.placeholders.arranger},null,8,pv),[[C.Jo,d.arranger]])]),(0,e.Lk)("div",mv,[(0,e.Lk)("label",gv,(0,l.v_)(t.$t("flat:credits.rights")),1),(0,e.bo)((0,e.Lk)("textarea",{id:"creditsRights",class:"form-control medium","onUpdate:modelValue":s[5]||(s[5]=u=>d.rights=u),placeholder:d.placeholders.rights,rows:"2"},null,8,fv),[[C.Jo,d.rights]])]),(0,e.Lk)("div",hv,[(0,e.bF)(f,{type:"submit",disabled:d.processing,"default-text":"flat:save"},null,8,["disabled"])])],32),r.score.privacy==="public"?(0,e.bo)(((0,e.uX)(),(0,e.CE)("a",{key:0,class:"ds-pubinfo",href:a.linkEditPubInfo},null,8,vv)),[[h,t.$t("flat:credits.public-text")]]):(0,e.Q3)("",!0)])}const bv={name:"ScoreEditorCredits",props:{scoreData:{type:Object,required:!0}},emits:["hidePreview"],data(){return{title:null,subtitle:null,composer:null,arranger:null,lyricist:null,rights:null,orig:{},processing:null,placeholders:{}}},setup(){const t=(0,Pe.N)(),s=(0,N.q6)();return{score:(0,e.EW)(()=>t.score),loadDocumentSettings:s.loadDocumentSettings}},computed:{adagioData(){return this.scoreData.adagioData},linkEditPubInfo(){return`/my-library?m=publish&score=${this.score.id}`}},methods:{loadCredits(){const t=this.adagioData;this.title=t.hasTitle()&&t.getTitle()||"",this.subtitle=t.hasSubtitle()&&t.getSubtitle()||"",this.composer=t.hasComposer()&&t.getComposerStr()||"",this.arranger=t.hasArranger()&&t.getArrangerStr()||"",this.lyricist=t.hasLyricist()&&t.getLyricistStr()||"",this.rights=t.hasRights()&&t.getRightsEntries().join(`
`)||"",this.orig={title:this.title,subtitle:this.subtitle,composer:this.composer,arranger:this.arranger,lyricist:this.lyricist,rights:this.rights}},save(){this.processing=!0,this.$emit("hidePreview",!0),this.scoreData.scoreActions.executePublicAction("setAllCredits",{title:this.title,subtitle:this.subtitle,composer:this.composer,arranger:this.arranger,lyricist:this.lyricist,rights:this.rights}).then(()=>{if(this.processing=!1,this.title!==this.orig.title){const t=JSON.parse(JSON.stringify(this.score));t.title=this.title;const{cache:s}=(0,ro.j)();s(t)}this.loadCredits(),this.close()}).catch(()=>{this.processing=!1,this.$emit("hidePreview",!1)})},close(){this.loadDocumentSettings(null)}},created(){this.loadCredits(),this.placeholders={title:_.MR.t("flat:credits.title"),subtitle:_.MR.t("flat:credits.subtitle"),lyricist:_.MR.t("flat:credits.lyricist"),composer:_.MR.t("flat:credits.composer"),arranger:_.MR.t("flat:credits.arranger"),rights:_.MR.t("flat:credits.rights")}}},Ev=(0,k.A)(bv,[["render",yv]]),Cv=["href"];function Sv(t,s,n,r,d,a){const f=(0,e.g2)("score-editor-doc-mob-header"),h=(0,e.g2)("score-editor-credits-form");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(t.$style.dsCredits)},[(0,e.bF)(f,{headerText:t.$t("flat:credits.text"),onClose:s[0]||(s[0]=u=>a.close())},null,8,["headerText"]),(0,e.Lk)("div",{class:(0,l.C4)(["se-content ds-content",t.$style.creditsContent])},[(0,e.bF)(h,{onClose:a.close,"score-data":n.scoreData},null,8,["onClose","score-data"])],2),r.score.privacy==="public"?((0,e.uX)(),(0,e.CE)("a",{key:0,class:"ds-pubinfo",href:a.linkEditPubInfo},s[1]||(s[1]=[(0,e.eW)(" The publication information (description, tags, etc.) can be directly updated in ",-1),(0,e.Lk)("em",null,"My Library",-1),(0,e.eW)(". Click here to edit them. ",-1)]),8,Cv)):(0,e.Q3)("",!0)],2)}function Pv(t,s,n,r,d,a){const f=(0,e.g2)("f-input-label"),h=(0,e.g2)("f-input"),u=(0,e.g2)("input-wrapper"),g=(0,e.g2)("f-textarea"),b=(0,e.g2)("f-button");return(0,e.uX)(),(0,e.CE)("form",{class:"ds-settings-wrap",onSubmit:s[6]||(s[6]=(0,C.D$)(P=>a.save(),["prevent"]))},[(0,e.bF)(u,{class:(0,l.C4)(t.$style.wrapForm)},{default:(0,e.k6)(()=>[(0,e.bF)(f,{"html-for":"creditsTitle"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:credits.title")),1)]),_:1}),(0,e.bF)(h,{id:"creditsTitle",placeholder:d.placeholders.title,modelValue:d.title,"onUpdate:modelValue":s[0]||(s[0]=P=>d.title=P),size:"medium",autofocus:""},null,8,["placeholder","modelValue"])]),_:1},8,["class"]),(0,e.bF)(u,{class:(0,l.C4)(t.$style.wrapForm)},{default:(0,e.k6)(()=>[(0,e.bF)(f,{"html-for":"creditsSubtitle"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:credits.subtitle")),1)]),_:1}),(0,e.bF)(h,{id:"creditsSubtitle",placeholder:d.placeholders.subtitle,modelValue:d.subtitle,"onUpdate:modelValue":s[1]||(s[1]=P=>d.subtitle=P),size:"medium",autofocus:""},null,8,["placeholder","modelValue"])]),_:1},8,["class"]),(0,e.Lk)("div",{class:(0,l.C4)([t.$style.gridLyricist,t.$style.wrapForm])},[(0,e.bF)(u,null,{default:(0,e.k6)(()=>[(0,e.bF)(f,{"html-for":"creditsLyricist"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:credits.lyricist")),1)]),_:1}),(0,e.bF)(h,{id:"creditsLyricist",placeholder:d.placeholders.lyricist,modelValue:d.lyricist,"onUpdate:modelValue":s[2]||(s[2]=P=>d.lyricist=P),size:"medium",autofocus:""},null,8,["placeholder","modelValue"])]),_:1}),(0,e.bF)(u,null,{default:(0,e.k6)(()=>[(0,e.bF)(f,{"html-for":"creditsComposer"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:credits.composer")),1)]),_:1}),(0,e.bF)(h,{id:"creditsComposer",placeholder:d.placeholders.composer,modelValue:d.composer,"onUpdate:modelValue":s[3]||(s[3]=P=>d.composer=P),size:"medium",autofocus:""},null,8,["placeholder","modelValue"])]),_:1})],2),(0,e.bF)(u,{class:(0,l.C4)(t.$style.wrapForm)},{default:(0,e.k6)(()=>[(0,e.bF)(f,{"html-for":"creditsArranger"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:credits.arranger")),1)]),_:1}),(0,e.bF)(h,{id:"creditsArranger",placeholder:d.placeholders.arranger,modelValue:d.arranger,"onUpdate:modelValue":s[4]||(s[4]=P=>d.arranger=P),size:"medium",autofocus:""},null,8,["placeholder","modelValue"])]),_:1},8,["class"]),(0,e.bF)(u,{class:(0,l.C4)(t.$style.wrapForm)},{default:(0,e.k6)(()=>[(0,e.bF)(f,{"html-for":"creditsRights"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:credits.rights")),1)]),_:1}),(0,e.bF)(g,{id:"creditsRights",placeholder:d.placeholders.rights,modelValue:d.rights,"onUpdate:modelValue":s[5]||(s[5]=P=>d.rights=P),size:"medium",autofocus:""},null,8,["placeholder","modelValue"])]),_:1},8,["class"]),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.buttonWrapper)},[(0,e.bF)(b,{type:"submit",disabled:d.processing,defaultText:"flat:save"},null,8,["disabled"])],2)],32)}var Lv=o(316353),vn=o(279596),Av=o(483363);const p5=null,Mv={name:"scoreEditorCreditsForm",components:{FInputLabel:Lv.A,InputWrapper:vn.oi,FInput:vn.Le,FTextarea:Av.A},props:{scoreData:{type:Object,required:!0}},data(){return{title:null,subtitle:null,composer:null,arranger:null,lyricist:null,rights:null,orig:{},processing:null,placeholders:{}}},setup(){const t=(0,Pe.N)();return{score:(0,e.EW)(()=>t.score),displayMobileEditor:(0,e.EW)(()=>t.displayMobileEditor)}},computed:{adagioData(){return this.scoreData.adagioData}},methods:{loadCredits(){const t=this.adagioData;this.title=t.hasTitle()&&t.getTitle()||"",this.subtitle=t.hasSubtitle()&&t.getSubtitle()||"",this.composer=t.hasComposer()&&t.getComposerStr()||"",this.arranger=t.hasArranger()&&t.getArrangerStr()||"",this.lyricist=t.hasLyricist()&&t.getLyricistStr()||"",this.rights=t.hasRights()&&t.getRightsEntries().join(`
`)||"",this.orig={title:this.title,subtitle:this.subtitle,composer:this.composer,arranger:this.arranger,lyricist:this.lyricist,rights:this.rights}},save(){this.processing=!0,this.$emit("hidePreview",!0),this.scoreData.scoreActions.executePublicAction("setAllCredits",{title:this.title,subtitle:this.subtitle,composer:this.composer,arranger:this.arranger,lyricist:this.lyricist,rights:this.rights}).then(()=>{if(this.processing=!1,this.title!==this.orig.title){const t=JSON.parse(JSON.stringify(this.score));t.title=this.title,(0,ro.j)().cache(t)}this.loadCredits(),this.$emit("close")}).catch(()=>{this.processing=!1,this.$emit("hidePreview",!1)})}},created(){this.loadCredits(),this.placeholders={title:_.MR.t("flat:credits.title"),subtitle:_.MR.t("flat:credits.subtitle"),lyricist:_.MR.t("flat:credits.lyricist"),composer:_.MR.t("flat:credits.composer"),arranger:_.MR.t("flat:credits.arranger"),rights:_.MR.t("flat:credits.rights")}}};var Dv=o(991713),Tv=o.n(Dv);const ka={};ka.$style=Tv();const Ov=(0,k.A)(Mv,[["render",Pv],["__cssModules",ka]]),kv=["title"];function xv(t,s,n,r,d,a){const f=(0,e.g2)("arrow-backwards-icon"),h=(0,e.g2)("ScoreHeaderContainer");return(0,e.uX)(),(0,e.Wv)(h,null,{left:(0,e.k6)(()=>[(0,e.Lk)("button",{onClick:s[0]||(s[0]=u=>a.close()),title:t.$t("flat:close"),class:(0,l.C4)(t.$style.goBack)},[(0,e.bF)(f)],10,kv)]),default:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.scoreHeader)},(0,l.v_)(n.headerText),3)]),_:1})}const wv={name:"scoreEditorDocMobHeader",components:{ScoreHeaderContainer:Vn,arrowBackwardsIcon:no.A},props:{headerText:{type:String,required:!0}},methods:{close(){this.$emit("close")}}};var Iv=o(38731),Rv=o.n(Iv);const xa={};xa.$style=Rv();const yn=(0,k.A)(wv,[["render",xv],["__cssModules",xa]]),Fv={name:"scoreEditorMobCredits",components:{ScoreEditorCreditsForm:Ov,ScoreEditorDocMobHeader:yn},props:{scoreData:{type:Object,required:!0}},setup(){const t=(0,N.q6)(),s=(0,Pe.N)();return{score:(0,e.EW)(()=>s.score),displayMobileEditor:(0,e.EW)(()=>s.displayMobileEditor),loadDocumentSettings:t.loadDocumentSettings}},computed:{linkEditPubInfo(){return`/my-library?m=publish&score=${this.score.id}`}},methods:{close(){this.loadDocumentSettings(null)}}};var Wv=o(279815),Uv=o.n(Wv);const wa={};wa.$style=Uv();const Bv=(0,k.A)(Fv,[["render",Sv],["__cssModules",wa]]);function jv(t,s,n,r,d,a){const f=(0,e.g2)("export-widget"),h=(0,e.g2)("content-dialog");return(0,e.uX)(),(0,e.CE)("div",null,[(0,e.bF)(h,{"regular-width":350,title:t.$t("flat:score.export.title"),"separate-header":!1,onClose:s[1]||(s[1]=u=>a.closeExport())},{default:(0,e.k6)(()=>[d.exportMainOpen?((0,e.uX)(),(0,e.Wv)(f,{key:0,mode:n.mode,"display-print-in-export":!1,"option-concert-pitch":t.isConcertPitch,"score-data":n.scoreData,"export-manager":a.exportManager,onClose:s[0]||(s[0]=u=>a.closeExport())},null,8,["mode","option-concert-pitch","score-data","export-manager"])):(0,e.Q3)("",!0)]),_:1},8,["title"])])}var Kv=o(860031),Nv=Object.defineProperty,Xv=Object.defineProperties,$v=Object.getOwnPropertyDescriptors,Ia=Object.getOwnPropertySymbols,zv=Object.prototype.hasOwnProperty,Hv=Object.prototype.propertyIsEnumerable,Ra=(t,s,n)=>s in t?Nv(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Vv=(t,s)=>{for(var n in s||(s={}))zv.call(s,n)&&Ra(t,n,s[n]);if(Ia)for(var n of Ia(s))Hv.call(s,n)&&Ra(t,n,s[n]);return t},Qv=(t,s)=>Xv(t,$v(s));const Gv={name:"ScoreEditorMobExport",components:{ContentDialog:ft.A,ExportWidget:Kv.A},props:{scoreData:{type:Object,required:!0},mode:{type:String,default:"export"}},data(){return{exportMainOpen:!0}},setup(){return{loadDocumentSettings:(0,N.q6)().loadDocumentSettings}},computed:Qv(Vv({},(0,A.aH)(Ce.W,["isConcertPitch"])),{exportManager(){return this.scoreData.scoreActions.dependencies.exportManager}}),methods:{closeExport(){this.loadDocumentSettings(null)},closeWidget(){this.exportMainOpen=!1}}},Jv=(0,k.A)(Gv,[["render",jv]]),Fa=o.p+"img/e0e69ea27bd207982e8b.svg",Wa=o.p+"img/68ffea003cc26d79c656.svg",Ua=o.p+"img/a76f5c2c4d67056e104d.svg",Yv=o.p+"img/ddbd129b4af4c11ca2a6.svg",Zv={class:"ds-settings-wrap"},qv={class:"ds-settings-title"},ey={key:0,class:"ds-settings-card ds-tracks-placeholder"},ty={class:"pl-title"},sy={class:"pl-ctas"},oy={key:1,class:"ds-settings-card ds-tracks"},ny={class:"ds-list-tracks"},iy=["href"],ay={key:0,src:Ua,alt:"SoundCloud"},ry={key:1,src:Fa,alt:"YouTube"},ly={key:2,src:Wa,alt:"Vimeo"},dy={key:3,src:Yv,alt:"MP3"},cy={class:"name"},uy={key:0,class:"pull-right ds-instrument-main-actions"},_y=["onClick"],py={key:1,class:"ds-action no-margin success"},my=["onClick"],gy=["onClick"],fy={key:1,class:"pull-right ds-instrument-main-actions deleting"},hy=["onClick"],vy={class:"icon"},yy={class:"pull-right ds-instrument-main-actions"},by={key:1,class:"ds-action no-margin success"},Ey={class:"ctas"};function Cy(t,s,n,r,d,a){const f=(0,e.g2)("f-button"),h=(0,e.g2)("edit-icon"),u=(0,e.g2)("trash-icon"),g=(0,e.g2)("flat-icon");return(0,e.uX)(),(0,e.CE)("div",Zv,[(0,e.Lk)("div",qv,(0,l.v_)(t.$t("flat:recordings.title")),1),r.hasTracks?((0,e.uX)(),(0,e.CE)("div",oy,[(0,e.Lk)("ul",ny,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(r.tracks,b=>((0,e.uX)(),(0,e.CE)("li",{key:b.id},[(0,e.Lk)("a",{class:"icon",href:b.url,target:"_blank",rel:"noopener noreferrer"},[b.type==="soundcloud"?((0,e.uX)(),(0,e.CE)("img",ay)):b.type==="youtube"?((0,e.uX)(),(0,e.CE)("img",ry)):b.type==="vimeo"?((0,e.uX)(),(0,e.CE)("img",ly)):b.type==="audio"?((0,e.uX)(),(0,e.CE)("img",dy)):(0,e.Q3)("",!0)],8,iy),(0,e.Lk)("div",cy,(0,l.v_)(b.title||"Untitled recording"),1),!d.deleting||d.deleting!==b.id?((0,e.uX)(),(0,e.CE)("div",uy,[b.default?((0,e.uX)(),(0,e.CE)("div",py,[s[8]||(s[8]=(0,e.Lk)("svg",{inline:"",xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 34 34"},[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h34v34H0z"}),(0,e.Lk)("path",{class:"fill",fill:"#268FF4","fill-rule":"nonzero",d:"M17 9c-4.416 0-8 3.584-8 8s3.584 8 8 8 8-3.584 8-8-3.584-8-8-8zm-1.6 12l-4-4 1.128-1.128 2.872 2.864 6.072-6.072L22.6 13.8 15.4 21z"})])],-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:recordings.is-default")),1)])):((0,e.uX)(),(0,e.CE)("button",{key:0,class:"ds-action no-margin",onClick:P=>r.markDefaultTrack({score:r.score,track:b})},[s[7]||(s[7]=(0,e.Lk)("svg",{inline:"",xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 34 34"},[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h34v34H0V0zm0 0h34v34H0V0z"}),(0,e.Lk)("path",{class:"fill",fill:"#268FF4","fill-rule":"nonzero",d:"M20.672 13.464L15.4 18.736l-2.872-2.864L11.4 17l4 4 6.4-6.4-1.128-1.136zM17 9c-4.416 0-8 3.584-8 8s3.584 8 8 8 8-3.584 8-8-3.584-8-8-8zm0 14.4a6.398 6.398 0 0 1-6.4-6.4c0-3.536 2.864-6.4 6.4-6.4 3.536 0 6.4 2.864 6.4 6.4 0 3.536-2.864 6.4-6.4 6.4z"})])],-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:recordings.mark-default")),1)],8,_y)),(0,e.Lk)("button",{class:"ds-action",onClick:P=>a.startEditing(b)},[(0,e.bF)(h),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:recordings.edit-sync")),1)],8,my),(0,e.Lk)("button",{class:"ds-action",onClick:P=>d.deleting=b.id},[(0,e.bF)(u),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.instruments-change.remove")),1)],8,gy)])):((0,e.uX)(),(0,e.CE)("div",fy,[(0,e.bF)(u),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:are-you-sure")),1),(0,e.Lk)("button",{class:"ds-action yes",onClick:P=>r.deleteTrack({score:r.score,track:b})},(0,l.v_)(t.$t("flat:yes")),9,hy),s[9]||(s[9]=(0,e.eW)(" | ",-1)),(0,e.Lk)("button",{class:"ds-action",onClick:s[2]||(s[2]=P=>d.deleting=null)},(0,l.v_)(t.$t("flat:no")),1)]))]))),128)),(0,e.Lk)("li",null,[(0,e.Lk)("div",vy,[(0,e.bF)(g)]),s[12]||(s[12]=(0,e.Lk)("div",{class:"name"},"Playback",-1)),(0,e.Lk)("div",yy,[r.defaultTrack?((0,e.uX)(),(0,e.CE)("button",{key:0,class:"ds-action no-margin",onClick:s[3]||(s[3]=b=>r.markPlaybackDefault({score:r.score}))},[s[10]||(s[10]=(0,e.Lk)("svg",{inline:"",xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 34 34"},[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h34v34H0V0zm0 0h34v34H0V0z"}),(0,e.Lk)("path",{class:"fill",fill:"#268FF4","fill-rule":"nonzero",d:"M20.672 13.464L15.4 18.736l-2.872-2.864L11.4 17l4 4 6.4-6.4-1.128-1.136zM17 9c-4.416 0-8 3.584-8 8s3.584 8 8 8 8-3.584 8-8-3.584-8-8-8zm0 14.4a6.398 6.398 0 0 1-6.4-6.4c0-3.536 2.864-6.4 6.4-6.4 3.536 0 6.4 2.864 6.4 6.4 0 3.536-2.864 6.4-6.4 6.4z"})])],-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:recordings.mark-default")),1)])):((0,e.uX)(),(0,e.CE)("div",by,[s[11]||(s[11]=(0,e.Lk)("svg",{inline:"",xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 34 34"},[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h34v34H0z"}),(0,e.Lk)("path",{class:"fill",fill:"#268FF4","fill-rule":"nonzero",d:"M17 9c-4.416 0-8 3.584-8 8s3.584 8 8 8 8-3.584 8-8-3.584-8-8-8zm-1.6 12l-4-4 1.128-1.128 2.872 2.864 6.072-6.072L22.6 13.8 15.4 21z"})])],-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:recordings.is-default")),1)]))])])]),(0,e.Lk)("div",Ey,[(0,e.bF)(f,{onClick:s[4]||(s[4]=b=>a.createTrack()),theme:"outline","default-text":"flat:recordings.add",icon:a.plusIcon},null,8,["icon"]),(0,e.bF)(f,{onClick:s[5]||(s[5]=b=>a.close()),"default-text":"flat:done"})])])):((0,e.uX)(),(0,e.CE)("div",ey,[(0,e.Lk)("div",ty,(0,l.v_)(t.$t("flat:recordings.title-link")),1),(0,e.Lk)("div",{class:"pl-icons",onClick:s[0]||(s[0]=b=>a.createTrack())},s[6]||(s[6]=[(0,e.Lk)("img",{src:Fa,alt:"YouTube"},null,-1),(0,e.Lk)("img",{src:Wa,alt:"Vimeo"},null,-1),(0,e.Lk)("img",{src:Ua,alt:"SoundCloud"},null,-1)])),(0,e.Lk)("div",sy,[(0,e.bF)(f,{onClick:s[1]||(s[1]=b=>a.createTrack()),"default-text":"flat:recordings.add"}),(0,e.bF)(f,{href:"https://help.flat.io/en/music-notation-software/synchronize-external-recording",target:"_blank",theme:"outline","default-text":"flat:learn-more"})])]))])}var co=o(853602);const Sy={name:"ScoreEditorTracks",components:{editIcon:Rt.A,trashIcon:co.A,flatIcon:Do.A},props:{scoreData:{type:Object,required:!0},audio:{type:Object,required:!0}},data(){return{deleting:null}},setup(){const t=(0,ct.w)(),s=(0,Pe.N)(),n=(0,N.q6)();return{tracks:(0,e.EW)(()=>t.tracks),hasTracks:(0,e.EW)(()=>t.hasTracks),defaultTrack:(0,e.EW)(()=>t.defaultTrack),markDefaultTrack:t.markDefaultTrack,markPlaybackDefault:t.markPlaybackDefault,deleteTrack:t.deleteTrack,createNewTrack:t.createNewTrack,startEdit:t.startEdit,score:(0,e.EW)(()=>s.score),loadDocumentSettings:n.loadDocumentSettings}},computed:{plusIcon:()=>Ms.A},methods:{createTrack(){this.close(),this.createNewTrack()},startEditing(t){this.close(),this.startEdit(t.id)},close(){this.loadDocumentSettings(null)}}},Py=(0,k.A)(Sy,[["render",Cy]]),Ly={key:1,class:"ds-settings-title"};function Ay(t,s,n,r,d,a){const f=(0,e.g2)("score-editor-doc-mob-header"),h=(0,e.g2)("tab-item"),u=(0,e.g2)("tab"),g=(0,e.g2)("score-editor-instruments-tab"),b=(0,e.g2)("score-editor-custom-tab");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(["ds-settings-wrap",{[t.$style.mobileWrap]:r.displayMobileEditor}])},[r.displayMobileEditor?((0,e.uX)(),(0,e.Wv)(f,{key:0,headerText:t.$t("flat:score.instruments-change.description"),onClose:s[0]||(s[0]=P=>a.close())},null,8,["headerText"])):((0,e.uX)(),(0,e.CE)("div",Ly,(0,l.v_)(t.$t("flat:score.instruments-change.description")),1)),(0,e.bF)(u,{class:"nav-tabs"},{default:(0,e.k6)(()=>[(0,e.bF)(h,{active:d.activeTab===d.InstrumentsPage.SCORE_INSTRUMENTS,onClick:s[1]||(s[1]=P=>a.changeTab(d.InstrumentsPage.SCORE_INSTRUMENTS))},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:score.instruments-change.description")),1)]),_:1},8,["active"]),(0,e.bF)(h,{active:d.activeTab===d.InstrumentsPage.CUSTOM_INSTRUMENTS,onClick:s[2]||(s[2]=P=>a.changeTab(d.InstrumentsPage.CUSTOM_INSTRUMENTS))},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:score.custom-instruments.tab-title")),1)]),_:1},8,["active"])]),_:1}),d.activeTab===d.InstrumentsPage.SCORE_INSTRUMENTS?((0,e.uX)(),(0,e.Wv)(g,{key:2,class:(0,l.C4)({[t.$style.mobContent]:r.displayMobileEditor}),"score-data":n.scoreData},null,8,["class","score-data"])):(0,e.Q3)("",!0),d.activeTab===d.InstrumentsPage.CUSTOM_INSTRUMENTS?((0,e.uX)(),(0,e.Wv)(b,{key:3})):(0,e.Q3)("",!0)],2)}var xo=o(599325);const Ba="scoreInstruments",My="customInstruments";function Dy(){return{SCORE_INSTRUMENTS:Ba,CUSTOM_INSTRUMENTS:My}}const ja=o.p+"img/efee9b006563e5c6b61f.svg",Ka=o.p+"img/d981087df5b83998c835.png",Ty={class:"ds-settings-card ds-instruments no-select"},Oy=["data-part-uuid"],ky=["onClick","src"],xy=["onClick"],wy=["onClick"],Iy=["onClick"],Ry={key:2,class:"pull-right ds-instrument-main-actions"},Fy=["onClick"],Wy=["onClick"],Uy=["onClick"],By={key:1};function jy(t,s,n,r,d,a){const f=(0,e.g2)("edit-icon"),h=(0,e.g2)("trash-icon"),u=(0,e.g2)("loading-rectangle"),g=(0,e.g2)("f-button"),b=(0,e.g2)("f-power-button"),P=(0,e.g2)("f-button-group"),F=(0,e.g2)("settings-instruments-edit");return(0,e.uX)(),(0,e.CE)("div",Ty,[d.mode===d.CUSTOM_TAB_MODES.LIST?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.title)},(0,l.v_)(t.$t("flat:score.custom-instruments.sub-title")),3),r.hasCustomInstruments?((0,e.uX)(),(0,e.CE)("ul",{key:0,class:(0,l.C4)(t.$style.listInstrus)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(r.listCustomInstruments,(S,H)=>((0,e.uX)(),(0,e.CE)("li",{key:S.id,"data-part-uuid":S.id},[S.iconGroupUrl?((0,e.uX)(),(0,e.CE)("img",{key:0,onClick:I=>a.startEditing(S),src:S.iconGroupUrl},null,8,ky)):((0,e.uX)(),(0,e.CE)("img",{key:1,onClick:I=>a.startEditing(S),src:ja},null,8,xy)),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.pname)},[S.longname&&S.longname.length>0?((0,e.uX)(),(0,e.CE)("span",{key:0,onClick:I=>a.startEditing(S),class:"partName"},(0,l.v_)(S.longname),9,wy)):((0,e.uX)(),(0,e.CE)("span",{key:1,onClick:I=>a.startEditing(S),class:"partName"},(0,l.v_)(t.$t("flat:score.parts.unknown-name"))+" "+(0,l.v_)(H+1),9,Iy))],2),!d.confirmDeleting||d.confirmDeleting!==S.id?((0,e.uX)(),(0,e.CE)("div",Ry,[(0,e.Lk)("button",{class:"ds-action",onClick:I=>a.startEditing(S)},[(0,e.bF)(f),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.instruments-change.edit")),1)],8,Fy),(0,e.Lk)("button",{class:"ds-action",onClick:I=>d.confirmDeleting=S.id},[(0,e.bF)(h),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.instruments-change.remove")),1)],8,Wy)])):((0,e.uX)(),(0,e.CE)("div",{key:3,class:(0,l.C4)(["pull-right ds-instrument-main-actions deleting",{loading:d.deleting===S.id}])},[(0,e.bF)(h),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:are-you-sure")),1),(0,e.Lk)("button",{class:"ds-action yes",onClick:I=>a.prepareRemoveInstrument(S)},(0,l.v_)(t.$t("flat:yes")),9,Uy),s[6]||(s[6]=(0,e.Lk)("span",{class:"separator"},"|",-1)),(0,e.Lk)("button",{class:"ds-action",onClick:s[0]||(s[0]=I=>d.confirmDeleting=null)},(0,l.v_)(t.$t("flat:no")),1)],2))],8,Oy))),128))],2)):r.customInstrumentsLoading?((0,e.uX)(),(0,e.CE)(e.FK,{key:1},(0,e.pI)(8,(S,H)=>(0,e.Lk)("ul",{class:(0,l.C4)(t.$style.listInstrus),key:H},[(0,e.Lk)("li",null,[(0,e.bF)(u,{class:(0,l.C4)(t.$style.icon)},null,8,["class"]),(0,e.bF)(u,{class:(0,l.C4)(t.$style.title)},null,8,["class"])])],2)),64)):((0,e.uX)(),(0,e.CE)("div",{key:2,class:(0,l.C4)(t.$style.emtpyState)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.image)},s[7]||(s[7]=[(0,e.Lk)("img",{src:Ka},null,-1)]),2),(0,e.Lk)("h4",null,(0,l.v_)(t.$t("flat:score.custom-instruments.empty-state.title"))+" \u{1F614}",1),r.customInstrumentsAvailable?((0,e.uX)(),(0,e.CE)("a",{key:0,onClick:s[1]||(s[1]=S=>a.startEditing())},(0,l.v_)(t.$t("flat:score.custom-instruments.empty-state.desc")),1)):((0,e.uX)(),(0,e.CE)("p",By,(0,l.v_)(t.$t("flat:score.custom-instruments.empty-state.upgrade")),1))],2)),(0,e.bF)(P,{class:(0,l.C4)(t.$style.buttonGroup)},{default:(0,e.k6)(()=>[r.customInstrumentsAvailable?((0,e.uX)(),(0,e.Wv)(g,{key:0,class:(0,l.C4)(t.$style.createButton),onClick:s[2]||(s[2]=S=>a.startEditing()),theme:"outline","default-text":"flat:score.custom-instruments.add",icon:a.plusIcon},null,8,["class","icon"])):((0,e.uX)(),(0,e.Wv)(b,{key:1,class:(0,l.C4)(t.$style.createButton),onClick:s[3]||(s[3]=S=>r.goUpgrade({ref:"custom-instruments"})),"default-text":"flat:score.custom-instruments.add-upgrade"},null,8,["class"])),(0,e.bF)(g,{onClick:s[4]||(s[4]=S=>a.close()),"default-text":"flat:done"})]),_:1},8,["class"])],64)):(0,e.Q3)("",!0),d.mode===d.CUSTOM_TAB_MODES.EDIT?((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.bF)(F,{"edit-context":d.EditContext.SCORE,id:d.editingId,"go-back":a.loadList},null,8,["edit-context","id","go-back"]),(0,e.bF)(P,{class:(0,l.C4)(t.$style.buttonGroup)},{default:(0,e.k6)(()=>[(0,e.bF)(g,{theme:"outline",onClick:s[5]||(s[5]=S=>a.loadList()),"default-text":"flat:cancel"})]),_:1},8,["class"])],64)):(0,e.Q3)("",!0)])}var Ky=o(764444),Na=o(955091),Ny=o(549937),y5=o(514676);const Xa={};Xa.$style=Ny.default;const Xy=(0,k.A)(Na.A,[["render",Ky.X],["__cssModules",Xa]]);var $y=o(283494),zy=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const bn={EDIT:"edit",LIST:"list"},Hy={name:"ScoreEditorCustomTab",components:{SettingsInstrumentsEdit:Xy,LoadingRectangle:$y.M,editIcon:Rt.A,trashIcon:co.A,FPowerButton:io.n$},props:{},data(){return{CUSTOM_TAB_MODES:bn,EditContext:Na.i,confirmDeleting:null,deleting:null,mode:null,editingId:null}},setup(){const t=(0,ln.F)(),s=(0,N.q6)(),n=(0,mt.l)(),{goUpgrade:r}=n;return{listCustomInstruments:(0,e.EW)(()=>t.listCustomInstruments),hasCustomInstruments:(0,e.EW)(()=>t.hasCustomInstruments),customInstrumentsLoading:(0,e.EW)(()=>t.customInstrumentsLoading),customInstrumentsAvailable:(0,e.EW)(()=>t.customInstrumentsAvailable),fetchInstruments:t.fetchInstruments,removeCustomInstrument:t.removeCustomInstrument,goUpgrade:r,loadDocumentSettings:s.loadDocumentSettings}},computed:{plusIcon:()=>Ms.A},methods:{loadList(){this.editingId=null,this.mode=bn.LIST,this.fetchInstruments()},startEditing(t){this.mode=bn.EDIT,t&&(this.editingId=t.id)},prepareRemoveInstrument(t){return zy(this,null,function*(){this.deleting=t.id,yield this.removeCustomInstrument(t.id),this.deleting=null,this.fetchInstruments()})},close(){this.loadDocumentSettings(null)}},created(){this.loadList()}};var Vy=o(559384),Qy=o.n(Vy);const $a={};$a.$style=Qy();const Gy=(0,k.A)(Hy,[["render",jy],["__cssModules",$a]]),Jy={key:0},Yy={class:"ds-settings-card ds-instruments no-select"},Zy={key:1},qy={class:"ds-settings-card ds-instruments no-select"},e1={class:"ctas-container"},t1={class:"ctas-left"},s1={key:2},o1={class:"ds-settings-card ds-instruments-add no-select"},n1={class:"ctas"},i1={key:3},a1={class:"ds-settings-card ds-instruments-replace no-select"},r1={class:"main-description"},l1={class:"ctas"},d1={key:4},c1={class:"ds-settings-card ds-instruments-edit no-select"},u1={class:"ds-settings-title-wrapper"},_1={class:"edit-part-name"},p1={key:0,class:"ds-instrument-main-actions"},m1={key:1,class:"pull-right ds-instrument-main-actions deleting"};function g1(t,s,n,r,d,a){const f=(0,e.g2)("arrowBackIcon"),h=(0,e.g2)("ScoreEditorInstrumentsBrackets"),u=(0,e.g2)("ScoreEditorInstrumentsList"),g=(0,e.g2)("power-badge-icon"),b=(0,e.g2)("FButton"),P=(0,e.g2)("FButtonGroup"),F=(0,e.g2)("InstrumentsListSearch"),S=(0,e.g2)("InstrumentsList"),H=(0,e.g2)("replace-icon"),I=(0,e.g2)("trash-icon"),Y=(0,e.g2)("ScoreEditorInstrumentsEdit");return!d.mode&&d.editingBrackets?((0,e.uX)(),(0,e.CE)("div",Jy,[(0,e.Lk)("div",Yy,[(0,e.Lk)("div",{class:(0,l.C4)(["ds-settings-title",t.$style["ds-settings-title"]])},[(0,e.Lk)("button",{class:(0,l.C4)(["go-back",t.$style["go-back"]]),onClick:s[0]||(s[0]=(...Z)=>a.toggleEditBrackets&&a.toggleEditBrackets(...Z))},[(0,e.bF)(f)],2),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.instruments-change.description"))+": "+(0,l.v_)(t.$t("editor:brackets.title")),1)],2),r.parts?((0,e.uX)(),(0,e.Wv)(h,{key:0,parts:r.parts,"score-data":n.scoreData,onClose:a.toggleEditBrackets},null,8,["parts","score-data","onClose"])):(0,e.Q3)("",!0)])])):d.mode?d.mode==="add"?((0,e.uX)(),(0,e.CE)("div",s1,[(0,e.Lk)("div",o1,[(0,e.Lk)("div",{class:(0,l.C4)(["ds-settings-title",t.$style["ds-settings-title"]])},[(0,e.Lk)("button",{class:(0,l.C4)(["go-back",t.$style["go-back"]]),onClick:s[4]||(s[4]=Z=>a.setMode())},[(0,e.bF)(f)],2),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.instrument-add")),1)],2),(0,e.bF)(F,{ref:"instrumentsSearch",onSearch:s[5]||(s[5]=Z=>t.$refs.instrumentsList.onSearchKeyboard(Z))},null,512),(0,e.bF)(S,{ref:"instrumentsList","selection-mode":"single","selected-instruments":[],"display-custom":!0,"show-edit-custom-instruments":!1,onResetsearch:s[6]||(s[6]=Z=>t.$refs.instrumentsSearch.clear()),onAddinstrument:s[7]||(s[7]=Z=>a.addInstrument(Z))},null,512),(0,e.Lk)("div",n1,[(0,e.bF)(b,{onClick:s[8]||(s[8]=Z=>a.setMode()),theme:"outline-ink","default-text":"flat:cancel"})])])])):d.mode==="replace"&&d.replacing?((0,e.uX)(),(0,e.CE)("div",i1,[(0,e.Lk)("div",a1,[(0,e.Lk)("div",{class:(0,l.C4)(["ds-settings-title",t.$style["ds-settings-title"]])},[(0,e.Lk)("button",{class:(0,l.C4)(["go-back",t.$style["go-back"]]),onClick:s[9]||(s[9]=Z=>a.setMode())},[(0,e.bF)(f)],2),(0,e.Lk)("span",{class:(0,l.C4)(t.$style["title-instrument"])},(0,l.v_)(t.$t("flat:score.instrument-replace-short"))+": "+(0,l.v_)(a.replacingPart.name),3)],2),(0,e.Lk)("p",r1,(0,l.v_)(t.$t("flat:score.instrument-replace-desc")),1),(0,e.bF)(F,{ref:"instrumentsSearch",onSearch:s[10]||(s[10]=Z=>t.$refs.instrumentsList.onSearchKeyboard(Z))},null,512),(0,e.bF)(S,{ref:"instrumentsList","selection-mode":"single","selected-instruments":[],"display-unpitched":!1,"show-edit-custom-instruments":!1,onResetsearch:s[11]||(s[11]=Z=>t.$refs.instrumentsSearch.clear()),onAddinstrument:s[12]||(s[12]=Z=>a.replaceInstrument(Z))},null,512),(0,e.Lk)("div",l1,[(0,e.bF)(b,{onClick:s[13]||(s[13]=Z=>a.setMode()),theme:"outline-ink","default-text":"flat:cancel"})])])])):d.mode==="edit"&&d.editing&&a.editingPart?((0,e.uX)(),(0,e.CE)("div",d1,[(0,e.Lk)("div",c1,[(0,e.Lk)("div",u1,[(0,e.Lk)("div",{class:(0,l.C4)(["ds-settings-title",t.$style["ds-settings-title"]])},[(0,e.Lk)("button",{class:(0,l.C4)(["go-back",t.$style["go-back"]]),onClick:s[14]||(s[14]=Z=>a.setMode())},[(0,e.bF)(f)],2),(0,e.Lk)("span",{class:(0,l.C4)(t.$style["title-instrument"])},[(0,e.eW)((0,l.v_)(t.$t("flat:score.instrument-update")),1),(0,e.Lk)("span",_1,": "+(0,l.v_)(a.editingPartName),1)],2)],2),a.editingPart.isTemplateLocked?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[!d.deleting||d.deleting!==d.editing?((0,e.uX)(),(0,e.CE)("div",p1,[a.editingPart.group!=="unpitched-percussion"?((0,e.uX)(),(0,e.CE)("button",{key:0,class:"ds-action",onClick:s[15]||(s[15]=Z=>a.startReplacing(a.editingPart))},[(0,e.bF)(H),s[20]||(s[20]=(0,e.eW)()),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.instrument-replace-short")),1)])):(0,e.Q3)("",!0),a.canRemoveParts?((0,e.uX)(),(0,e.CE)("button",{key:1,class:"ds-action",onClick:s[16]||(s[16]=Z=>d.deleting=a.editingPart.uuid)},[(0,e.bF)(I),s[21]||(s[21]=(0,e.eW)()),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.instruments-change.remove")),1)])):(0,e.Q3)("",!0)])):((0,e.uX)(),(0,e.CE)("div",m1,[(0,e.bF)(I),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:are-you-sure")),1),(0,e.Lk)("button",{class:"ds-action yes",onClick:s[17]||(s[17]=Z=>a.removeInstrument(a.editingPart))},(0,l.v_)(t.$t("flat:yes")),1),s[22]||(s[22]=(0,e.eW)(" | ",-1)),(0,e.Lk)("button",{class:"ds-action",onClick:s[18]||(s[18]=Z=>d.deleting=null)},(0,l.v_)(t.$t("flat:no")),1)]))],64))]),(0,e.bF)(Y,{"editing-part-uuid":d.editing,"editing-part":a.editingPart,"score-data":n.scoreData,"set-mode":a.setMode},null,8,["editing-part-uuid","editing-part","score-data","set-mode"])])])):(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",Zy,[(0,e.Lk)("div",qy,[r.parts?((0,e.uX)(),(0,e.Wv)(u,{key:0,parts:r.parts,"score-data":n.scoreData,"start-editing":a.startEditing,"start-replacing":a.startReplacing,"remove-instrument":a.removeInstrument,"adding-instrument":d.adding},null,8,["parts","score-data","start-editing","start-replacing","remove-instrument","adding-instrument"])):(0,e.Q3)("",!0),(0,e.Lk)("div",e1,[(0,e.Lk)("div",t1,[r.parts.length>1?((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:s[1]||(s[1]=(...Z)=>a.toggleEditBrackets&&a.toggleEditBrackets(...Z)),class:"ds-action brackets"},[s[19]||(s[19]=(0,e.Lk)("svg",{inline:"",width:"34",height:"34",viewBox:"0 0 34 34",xmlns:"http://www.w3.org/2000/svg",fill:"currentcolor"},[(0,e.Lk)("path",{d:"M13 11.379c0-.114.034-.133.136-.133h1.723c3.258-.266 5.408-2.771 5.578-2.98.085-.133.273-.266.427-.266.085.038.136.114.136.266 0 .057 0 .114-.017.19-.682 3.17-3.122 4.575-5.85 5.144L15 13.599V20h.132c2.73.57 5.169 1.974 5.85 5.144a.79.79 0 0 1 .018.19c0 .152-.051.228-.136.266-.154 0-.342-.133-.427-.266l-.055-.065c-.388-.448-2.468-2.666-5.523-2.915h-1.723c-.102 0-.136-.02-.136-.133V11.379z","fill-rule":"nonzero"})],-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("editor:brackets.add-edit")),1),a.enabledFeatureCustomLayout?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(g,{key:0,class:(0,l.C4)(t.$style["power-badge"])},null,8,["class"]))])):(0,e.Q3)("",!0)]),(0,e.bF)(P,null,{default:(0,e.k6)(()=>[(0,e.bF)(b,{class:(0,l.C4)({[t.$style.disabled]:d.adding}),onClick:s[2]||(s[2]=Z=>a.setMode("add")),theme:"outline","default-text":"flat:score.instrument-add",icon:a.plusIcon},null,8,["class","icon"]),(0,e.bF)(b,{onClick:s[3]||(s[3]=Z=>a.close()),"default-text":"flat:done"})]),_:1})])])]))}var za=o(878803),f1=o(939712),h1=o(891099),ks=o(766311);const v1={class:"ds-brackets"},y1=["data-part-uuid"],b1=["src"],E1={key:1,src:ja},C1={key:2,class:"pname"},S1={key:3,class:"pname"},P1={class:"ctas"};function L1(t,s,n,r,d,a){const f=(0,e.g2)("toggle"),h=(0,e.g2)("f-button");return(0,e.uX)(),(0,e.CE)("div",v1,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(n.parts,(u,g)=>((0,e.uX)(),(0,e.CE)("div",{class:"ds-brackets-part",key:u.uuid,"data-part-uuid":u.uuid},[g!==0?((0,e.uX)(),(0,e.Wv)(f,{key:0,class:(0,l.C4)(["ds-brackets-switch",{bracketLeft:a.isGroupedWithPrevious[u.uuid]}]),id:`bracket-${u.uuid}`,modelValue:a.isGroupedWithPrevious[u.uuid],"onUpdate:modelValue":b=>a.isGroupedWithPrevious[u.uuid]=b,onChange:b=>a.updateBracket(u.uuid)},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("editor:brackets.between",{p1:n.parts[g-1].name,p2:u.name})),1)]),_:2},1032,["id","modelValue","onUpdate:modelValue","onChange","class"])):(0,e.Q3)("",!0),(0,e.Lk)("div",{class:(0,l.C4)(["part",a.classesForParts[u.uuid]])},[u.metas&&u.metas.iconGroupUrl?((0,e.uX)(),(0,e.CE)("img",{key:0,src:u.metas.iconGroupUrl},null,8,b1)):((0,e.uX)(),(0,e.CE)("img",E1)),u.name&&u.name.length>0?((0,e.uX)(),(0,e.CE)("span",C1,(0,l.v_)(u.name),1)):((0,e.uX)(),(0,e.CE)("span",S1,(0,l.v_)(t.$t("flat:score.parts.unknown-name"))+" "+(0,l.v_)(g+1),1))],2)],8,y1))),128)),(0,e.Lk)("div",P1,[(0,e.bF)(h,{onClick:s[0]||(s[0]=u=>t.$emit("close")),"default-text":"flat:done"})])])}const A1={name:"ScoreEditorInstrumentBrackets",emits:["close"],props:{scoreData:{type:Object,required:!0},parts:{type:Array,required:!0}},data(){return{}},computed:{isGroupedWithPrevious(){const t={};return this.parts.forEach(s=>{t[s.uuid]=s.isGroupedWithPrevious}),t},classesForParts(){const t={},s=this.parts;for(let r=0;r<s.length;r++){const d=s[r];if(t[d.uuid]=t[d.uuid]||{},t[d.uuid].bracketLeft=t[d.uuid].bracketLeft||d.isGroupedWithPrevious||!1,r>0){const a=s[r-1];t[a.uuid]=t[a.uuid]||{},t[a.uuid].bracketLeft=t[a.uuid].bracketLeft||d.isGroupedWithPrevious||!1}}let n=!1;for(let r=0;r<s.length;r++){const d=s[r],a=s[r+1];t[d.uuid].bracketLeft&&!n&&(t[d.uuid].bracketTop=!0,n=!0),n&&a&&!a.isGroupedWithPrevious&&(t[d.uuid].bracketBottom=!0,n=!1)}return n&&(t[s[s.length-1].uuid].bracketBottom=!0),t}},methods:{updateBracket(t){this.scoreData.scoreActions.executePublicAction("toggleGroupPartWithPrevious",{partUuid:t})}}},M1=(0,k.A)(A1,[["render",L1]]),D1=o.p+"img/bccda8b2f17071a3ee6c.svg",T1=o.p+"img/1d66571a6c0cad96a3fb.svg",O1=o.p+"img/95e131d4079d6c587323.svg",k1=o.p+"img/7abeb7cc641a8acea9e7.svg",x1=o.p+"img/f29283ffd51e28eba7d2.svg",w1=o.p+"img/33a5be3f93b24c2e9f95.svg",I1=o.p+"img/5665a6612e94e8db8d80.svg",R1={class:"name"},F1={class:"description"},W1={class:"edit-icon"},U1={class:"ins-name"},B1={class:"wrap-form instrument-longname"},j1={class:"label-ext-small"},K1={class:"wrap-form instrument-shortname"},N1={class:"label-ext-small"},X1={class:"cta"},$1={class:"name"},z1={class:"description"},H1={class:"edit-icon"},V1={key:0,class:"staves"},Q1={class:"stave-info"},G1={class:"stave-text"},J1=["onClick"],Y1={class:"stave-info"},Z1={class:"stave-text ddn-align new"},q1={key:0,class:"name"},eb={key:1,class:"name"},tb={key:2,class:"description"},sb={key:3,class:"description"},ob={class:"edit-icon"},nb={key:4,class:"tab"},ib={key:1,class:"tab-strings"},ab={class:"nb-strings"},rb=["disabled"],lb={class:"cta"},db={class:"name"},cb={class:"power-upgrade-content"},ub={class:"power-desc"},_b={class:"name"},pb={key:0,class:"description"},mb={key:1,class:"description"},gb={class:"edit-icon"},fb={key:2,class:"tab"},hb={key:0},vb={key:0,class:"tab-strings"},yb={class:"cta"},bb={class:"power-upgrade-content"},Eb={class:"power-desc"},Cb={class:"name"},Sb={key:0,class:"description"},Pb={key:1,class:"description"},Lb={class:"edit-icon"},Ab={key:2,class:"tab"},Mb={key:0},Db={class:"cta"},Tb={class:"power-upgrade-content"},Ob={class:"power-desc"},kb={class:"name"},xb={key:0,class:"description"},wb={key:1,class:"description"},Ib={class:"edit-icon"},Rb={key:2,class:"tab"},Fb={key:0},Wb={key:0,class:"tab-strings"},Ub={class:"cta"},Bb={class:"power-upgrade-content"},jb={class:"power-desc"},Kb={class:"name"},Nb={key:0,class:"description"},Xb={key:1,class:"description"},$b={class:"edit-icon"},zb={key:2,class:"tab"},Hb={key:0},Vb={class:"cta"},Qb={class:"power-upgrade-content"},Gb={class:"power-desc"},Jb={key:7,class:"ctas"};function Yb(t,s,n,r,d,a){const f=(0,e.g2)("editIcon"),h=(0,e.g2)("FButton"),u=(0,e.g2)("toggle"),g=(0,e.g2)("TuningEditor"),b=(0,e.g2)("f-power-button"),P=(0,e.g2)("RecorderTabsEditor"),F=(0,e.g2)("KodalyEditor");return(0,e.uX)(),(0,e.CE)("div",null,[(0,e.Lk)("div",{class:(0,l.C4)(["choice-method",{closed:t.editingMode!=="name",extended:t.editingMode==="name"}]),onClick:s[3]||(s[3]=S=>a.clickModeCard("name",S))},[(0,e.Lk)("div",R1,(0,l.v_)(t.$t("flat:score.part-name-abv")),1),(0,e.Lk)("div",F1,(0,l.v_)(t.$t("flat:custom-instru.name.longname.label"))+": "+(0,l.v_)(n.editingPart.header["part-name"])+", "+(0,l.v_)(t.$t("flat:custom-instru.name.shortname.label"))+": "+(0,l.v_)(n.editingPart.header["part-abbreviation"]),1),(0,e.Lk)("div",W1,[(0,e.bF)(f)]),t.editingMode==="name"?((0,e.uX)(),(0,e.CE)("form",{key:0,class:"step-content",onSubmit:s[2]||(s[2]=(0,C.D$)(S=>a.renamePart(t.editedObject),["prevent"]))},[(0,e.Lk)("div",U1,[(0,e.Lk)("div",B1,[(0,e.Lk)("label",j1,(0,l.v_)(t.$t("flat:custom-instru.name.longname.label")),1),(0,e.bo)((0,e.Lk)("input",{type:"text",class:"form-control medium","onUpdate:modelValue":s[0]||(s[0]=S=>t.editedObject.header["part-name"]=S),autofocus:""},null,512),[[C.Jo,t.editedObject.header["part-name"]]])]),(0,e.Lk)("div",K1,[(0,e.Lk)("label",N1,(0,l.v_)(t.$t("flat:custom-instru.name.shortname.label")),1),(0,e.bo)((0,e.Lk)("input",{type:"text",class:"form-control medium","onUpdate:modelValue":s[1]||(s[1]=S=>t.editedObject.header["part-abbreviation"]=S)},null,512),[[C.Jo,t.editedObject.header["part-abbreviation"]]])])]),(0,e.Lk)("div",X1,[(0,e.bF)(h,{type:"submit",disabled:t.processing,"default-text":"flat:save"},null,8,["disabled"])])],32)):(0,e.Q3)("",!0)],2),a.canEditStaves?((0,e.uX)(),(0,e.CE)("div",{key:0,onClick:s[5]||(s[5]=S=>a.clickModeCard("staves",S)),class:(0,l.C4)(["choice-method",{closed:t.editingMode!=="staves",extended:t.editingMode==="staves"}])},[(0,e.Lk)("div",$1,(0,l.v_)(t.$t("flat:score.layout.staves.title")),1),(0,e.Lk)("div",z1,(0,l.v_)(t.$t("flat:score.n-staves",{count:t.staves.length})),1),(0,e.Lk)("div",H1,[(0,e.bF)(f)]),t.editingMode==="staves"?((0,e.uX)(),(0,e.CE)("div",V1,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(t.staves,(S,H)=>((0,e.uX)(),(0,e.CE)("div",{class:"stave",key:H},[(0,e.Lk)("div",Q1,[s[38]||(s[38]=(0,e.Lk)("img",{class:"stave-icon",src:D1},null,-1)),(0,e.Lk)("span",G1,(0,l.v_)(t.$t("flat:score.stave-info",{clef:S.clef.sign})),1)]),t.staves.length>1?((0,e.uX)(),(0,e.CE)("a",{key:0,onClick:(0,C.D$)(I=>a.removeStaff(t.editedObject,S),["stop"]),class:"stave-rm"},s[39]||(s[39]=[(0,e.Lk)("img",{class:"icon",src:T1},null,-1)]),8,J1)):(0,e.Q3)("",!0)]))),128)),a.canAddStaves?((0,e.uX)(),(0,e.CE)("a",{key:0,class:"stave new ddn-trigger",onClick:s[4]||(s[4]=(0,C.D$)(S=>a.addStaff(t.editedObject),["stop"]))},[(0,e.Lk)("div",Y1,[s[40]||(s[40]=(0,e.Lk)("svg",{class:"stave-icon stave-add",inline:"",width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{d:"M6.5 12a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11zm0-12A6.5 6.5 0 0 0 0 6.5 6.5 6.5 0 0 0 6.5 13 6.5 6.5 0 0 0 13 6.5 6.5 6.5 0 0 0 6.5 0zm2.977 6.01h-2.49V3.52c0-.29-.217-.52-.487-.52s-.488.23-.488.52v2.49h-2.49c-.287 0-.52.22-.52.49s.233.49.52.49h2.49v2.49c0 .28.218.52.488.52s.488-.24.488-.52V6.99h2.49c.287 0 .52-.22.52-.49s-.233-.49-.52-.49z",fill:"#4DA3F8","fill-rule":"evenodd",class:"fill"})],-1)),(0,e.Lk)("span",Z1,(0,l.v_)(t.$t("flat:score.stave-add")),1)])])):(0,e.Q3)("",!0)])):(0,e.Q3)("",!0)],2)):(0,e.Q3)("",!0),t.staves.length===1&&n.editingPart.group!=="unpitched-percussion"&&!n.editingPart.isTemplateLocked?((0,e.uX)(),(0,e.CE)("div",{key:1,onClick:s[12]||(s[12]=S=>a.clickModeCard("tab",S)),class:(0,l.C4)(["choice-method",{closed:t.editingMode!=="tab",extended:t.editingMode==="tab"}])},[a.enabledFeatureTuning?((0,e.uX)(),(0,e.CE)("div",q1,(0,l.v_)(t.$t("flat:score.instrument-tab-tuning")),1)):((0,e.uX)(),(0,e.CE)("div",eb,(0,l.v_)(t.$t("flat:score.instrument-tab")),1)),a.hasTuning?((0,e.uX)(),(0,e.CE)("div",tb,(0,l.v_)(t.$t("flat:score.tuning-enabled-strings",{count:t.tabLines})),1)):((0,e.uX)(),(0,e.CE)("div",sb,(0,l.v_)(t.$t("flat:score.tuning-disabled")),1)),(0,e.Lk)("div",ob,[(0,e.bF)(f)]),t.editingMode==="tab"?((0,e.uX)(),(0,e.CE)("div",nb,[(0,e.bF)(u,{id:"tabEnabled",modelValue:t.tabEnabled,"onUpdate:modelValue":s[6]||(s[6]=S=>t.tabEnabled=S)},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:custom-instru.tab.use")),1)]),_:1},8,["modelValue"]),(0,e.bF)(u,{id:"tabFrameEnabled",modelValue:t.tabFrameEnabled,"onUpdate:modelValue":s[7]||(s[7]=S=>t.tabFrameEnabled=S)},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:custom-instru.grid.use")),1)]),_:1},8,["modelValue"]),a.canPreserveFrets?((0,e.uX)(),(0,e.Wv)(u,{key:0,id:"preserveFrets",modelValue:t.preserveFrets,"onUpdate:modelValue":s[8]||(s[8]=S=>t.preserveFrets=S)},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:custom-instru.tab.preserveFrets")),1)]),_:1},8,["modelValue"])):(0,e.Q3)("",!0),a.enabledFeatureTuning&&a.hasTuning?((0,e.uX)(),(0,e.CE)("div",ib,[(0,e.Lk)("div",ab,[(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:custom-instru.tab.with-n-strings-with")),1),(0,e.bo)((0,e.Lk)("input",{class:"form-control",type:"number",min:"3",max:"14","onUpdate:modelValue":s[9]||(s[9]=S=>t.tabLines=S),disabled:!a.enabledFeatureTuning},null,8,rb),[[C.Jo,t.tabLines,void 0,{number:!0}]]),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:custom-instru.tab.n-strings"))+".",1)]),(0,e.bF)(g,{lines:t.tabLines,tuning:t.tabTuning,capo:t.tabCapo,"tab-instrument-type":a.tabInstrumentType,onUpdateCapo:s[10]||(s[10]=S=>t.tabCapo=S),onSetTuningPresetId:a.setTuningPresetId},null,8,["lines","tuning","capo","tab-instrument-type","onSetTuningPresetId"])])):(0,e.Q3)("",!0),(0,e.Lk)("div",lb,[(0,e.bF)(h,{onClick:s[11]||(s[11]=(0,C.D$)(S=>a.saveTab(t.editedObject),["stop"])),disabled:t.processing,"default-text":"flat:save"},null,8,["disabled"])])])):(0,e.Q3)("",!0)],2)):(0,e.Q3)("",!0),!a.enabledFeatureTuning&&(a.editingPartOrigalHasTab||t.tabEnabled||t.tabFrameEnabled)?((0,e.uX)(),(0,e.CE)("div",{key:2,onClick:s[13]||(s[13]=S=>t.showUpgradeDialog({feature:"tuning"})),class:"choice-method power-upgrade"},[(0,e.Lk)("div",db,(0,l.v_)(t.$t("flat:upgrade.power.tabs-tuning")),1),(0,e.Lk)("div",cb,[s[41]||(s[41]=(0,e.Lk)("img",{src:O1},null,-1)),(0,e.Lk)("span",ub,(0,l.v_)(t.$t("flat:upgrade.power.tabs-tuning-description")),1),(0,e.bF)(b,{"default-text":"flat:upgrade.upgrade-cta",as:"span",class:(0,l.C4)(t.$style.upgradeBtn)},null,8,["class"])])])):(0,e.Q3)("",!0),t.staves.length===1&&a.hasRecorderSound?((0,e.uX)(),(0,e.CE)("div",{key:3,onClick:s[20]||(s[20]=S=>a.clickModeCard("recorderTabs",S)),class:(0,l.C4)(["choice-method",{closed:t.editingMode!=="recorderTabs",extended:t.editingMode==="recorderTabs","power-upgrade":!a.enabledFeatureRecorderTabs&&t.editingMode==="recorderTabs"}])},[(0,e.Lk)("div",_b,(0,l.v_)(t.$t("flat:score.instrument-recorder-tabs-settings")),1),t.recorderTabsEnabled?((0,e.uX)(),(0,e.CE)("div",pb,(0,l.v_)(t.$t("flat:score.recorder-tabs-enabled")),1)):((0,e.uX)(),(0,e.CE)("div",mb,(0,l.v_)(t.$t("flat:score.recorder-tabs-disabled")),1)),(0,e.Lk)("div",gb,[(0,e.bF)(f)]),t.editingMode==="recorderTabs"?((0,e.uX)(),(0,e.CE)("div",fb,[a.enabledFeatureRecorderTabs?((0,e.uX)(),(0,e.CE)("div",hb,[(0,e.bF)(u,{id:"recorderTabsEnabled",modelValue:t.recorderTabsEnabled,"onUpdate:modelValue":s[14]||(s[14]=S=>t.recorderTabsEnabled=S),class:"p tab-enabled"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:custom-instru.recorder-tabs.use")),1)]),_:1},8,["modelValue"]),a.enabledFeatureRecorderTabs&&t.recorderTabsEnabled?((0,e.uX)(),(0,e.CE)("div",vb,[(0,e.bF)(P,{"initial-instrument":t.recorderTabsInstrument,onUpdateInstrument:s[15]||(s[15]=S=>t.recorderTabsInstrument=S),"initial-layout":t.recorderTabsLayout,onUpdateLayout:s[16]||(s[16]=S=>t.recorderTabsLayout=S),"initial-japanese":t.recorderTabsJapanese,onUpdateJapanese:s[17]||(s[17]=S=>t.recorderTabsJapanese=S)},null,8,["initial-instrument","initial-layout","initial-japanese"])])):(0,e.Q3)("",!0),(0,e.Lk)("div",yb,[(0,e.bF)(h,{onClick:s[18]||(s[18]=(0,C.D$)(S=>a.saveRecorderTabs(t.editedObject),["stop"])),disabled:t.processing,"default-text":"flat:save"},null,8,["disabled"])])])):((0,e.uX)(),(0,e.CE)("div",{key:1,onClick:s[19]||(s[19]=S=>t.showUpgradeDialog({feature:"recorderTabs"}))},[(0,e.Lk)("div",bb,[s[42]||(s[42]=(0,e.Lk)("img",{width:"30",height:"30",src:k1},null,-1)),(0,e.Lk)("span",Eb,(0,l.v_)(t.$t("flat:upgrade.power.recorder-tabs-description")),1),(0,e.bF)(b,{"default-text":"flat:upgrade.upgrade-cta",as:"span",class:(0,l.C4)(t.$style.upgradeBtn)},null,8,["class"])])]))])):(0,e.Q3)("",!0)],2)):(0,e.Q3)("",!0),t.staves.length===1&&a.hasBrassSound?((0,e.uX)(),(0,e.CE)("div",{key:4,onClick:s[24]||(s[24]=S=>a.clickModeCard("brassFingering",S)),class:(0,l.C4)(["choice-method",{closed:t.editingMode!=="brassFingering",extended:t.editingMode==="brassFingering","power-upgrade":!a.enabledFeatureBrassFingering&&t.editingMode==="brassFingering"}])},[(0,e.Lk)("div",Cb,(0,l.v_)(t.$t("flat:score.instrument-brass-fingerings-settings")),1),t.brassFingeringEnabled?((0,e.uX)(),(0,e.CE)("div",Sb,(0,l.v_)(t.$t("flat:score.brass-fingering-enabled")),1)):((0,e.uX)(),(0,e.CE)("div",Pb,(0,l.v_)(t.$t("flat:score.brass-fingering-disabled")),1)),(0,e.Lk)("div",Lb,[(0,e.bF)(f)]),t.editingMode==="brassFingering"?((0,e.uX)(),(0,e.CE)("div",Ab,[a.enabledFeatureBrassFingering?((0,e.uX)(),(0,e.CE)("div",Mb,[(0,e.bF)(u,{id:"brassFingeringEnabled",modelValue:t.brassFingeringEnabled,"onUpdate:modelValue":s[21]||(s[21]=S=>t.brassFingeringEnabled=S),class:"p tab-enabled"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:custom-instru.brass-fingerings.use")),1)]),_:1},8,["modelValue"]),(0,e.Lk)("div",Db,[(0,e.bF)(h,{onClick:s[22]||(s[22]=(0,C.D$)(S=>a.saveBrassFingering(t.editedObject),["stop"])),disabled:t.processing,"default-text":"flat:save"},null,8,["disabled"])])])):((0,e.uX)(),(0,e.CE)("div",{key:1,onClick:s[23]||(s[23]=S=>t.showUpgradeDialog({feature:"brassFingering"}))},[(0,e.Lk)("div",Tb,[(0,e.Lk)("img",{class:(0,l.C4)(t.$style.img24),src:x1},null,2),(0,e.Lk)("span",Ob,(0,l.v_)(t.$t("flat:upgrade.power.brass-fingering-description")),1),(0,e.bF)(b,{"default-text":"flat:upgrade.upgrade-cta",as:"span",class:(0,l.C4)(t.$style.upgradeBtn)},null,8,["class"])])]))])):(0,e.Q3)("",!0)],2)):(0,e.Q3)("",!0),t.staves.length===1&&n.editingPart.group!=="unpitched-percussion"&&!n.editingPart.isTemplateLocked?((0,e.uX)(),(0,e.CE)("div",{key:5,onClick:s[32]||(s[32]=S=>a.clickModeCard("kodaly",S)),class:(0,l.C4)(["choice-method",{closed:t.editingMode!=="kodaly",extended:t.editingMode==="kodaly","power-upgrade":!a.enabledFeatureKodaly&&t.editingMode==="kodaly"}])},[(0,e.Lk)("div",kb,(0,l.v_)(t.$t("flat:score.instrument-kodaly-settings")),1),t.kodalyEnabled?((0,e.uX)(),(0,e.CE)("div",xb,(0,l.v_)(t.$t("flat:score.kodaly-enabled")),1)):((0,e.uX)(),(0,e.CE)("div",wb,(0,l.v_)(t.$t("flat:score.kodaly-disabled")),1)),(0,e.Lk)("div",Ib,[(0,e.bF)(f)]),t.editingMode==="kodaly"?((0,e.uX)(),(0,e.CE)("div",Rb,[a.enabledFeatureKodaly?((0,e.uX)(),(0,e.CE)("div",Fb,[(0,e.bF)(u,{id:"kodalyEnabled",modelValue:t.kodalyEnabled,"onUpdate:modelValue":s[25]||(s[25]=S=>t.kodalyEnabled=S),class:"p tab-enabled"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:custom-instru.kodaly.use")),1)]),_:1},8,["modelValue"]),a.enabledFeatureKodaly&&t.kodalyEnabled?((0,e.uX)(),(0,e.CE)("div",Wb,[(0,e.bF)(F,{onUpdateSourcePitch:s[26]||(s[26]=S=>t.sourcePitch=S),"source-pitch":t.sourcePitch,"recommended-pitch":t.recommendedPitch,onUpdateRecommendedPitch:s[27]||(s[27]=S=>t.recommendedPitch=S),"kodaly-type":t.kodalyType,onUpdateKodalyType:s[28]||(s[28]=S=>t.kodalyType=S),"kodaly-do-type":t.kodalyDoType,onUpdateKodalyDoType:s[29]||(s[29]=S=>t.kodalyDoType=S)},null,8,["source-pitch","recommended-pitch","kodaly-type","kodaly-do-type"])])):(0,e.Q3)("",!0),(0,e.Lk)("div",Ub,[(0,e.bF)(h,{onClick:s[30]||(s[30]=(0,C.D$)(S=>a.saveKodaly(t.editedObject),["stop"])),disabled:t.processing,"default-text":"flat:save"},null,8,["disabled"])])])):((0,e.uX)(),(0,e.CE)("div",{key:1,onClick:s[31]||(s[31]=S=>t.showUpgradeDialog({feature:"kodaly"}))},[(0,e.Lk)("div",Bb,[s[43]||(s[43]=(0,e.Lk)("img",{src:w1},null,-1)),(0,e.Lk)("span",jb,(0,l.v_)(t.$t("flat:upgrade.power.kodaly-description")),1),(0,e.bF)(b,{"default-text":"flat:upgrade.upgrade-cta",as:"span",class:(0,l.C4)(t.$style.upgradeBtn)},null,8,["class"])])]))])):(0,e.Q3)("",!0)],2)):(0,e.Q3)("",!0),n.editingPart.group!=="unpitched-percussion"&&!n.editingPart.isTemplateLocked?((0,e.uX)(),(0,e.CE)("div",{key:6,onClick:s[36]||(s[36]=S=>a.clickModeCard("quarterTone",S)),class:(0,l.C4)(["choice-method",{closed:t.editingMode!=="quarterTone",extended:t.editingMode==="quarterTone","power-upgrade":!a.enabledFeatureQuarterTone&&t.editingMode==="quarterTone"}])},[(0,e.Lk)("div",Kb,(0,l.v_)(t.$t("flat:score.instrument-quarterTone-settings")),1),t.quarterToneEnabled?((0,e.uX)(),(0,e.CE)("div",Nb,(0,l.v_)(t.$t("flat:score.quarterTone-enabled")),1)):((0,e.uX)(),(0,e.CE)("div",Xb,(0,l.v_)(t.$t("flat:score.quarterTone-disabled")),1)),(0,e.Lk)("div",$b,[(0,e.bF)(f)]),t.editingMode==="quarterTone"?((0,e.uX)(),(0,e.CE)("div",zb,[a.enabledFeatureQuarterTone?((0,e.uX)(),(0,e.CE)("div",Hb,[(0,e.bF)(u,{id:"quarterToneEnabled",modelValue:t.quarterToneEnabled,"onUpdate:modelValue":s[33]||(s[33]=S=>t.quarterToneEnabled=S),class:"p tab-enabled"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:custom-instru.quarterTone.use")),1)]),_:1},8,["modelValue"]),(0,e.Lk)("div",Vb,[(0,e.bF)(h,{onClick:s[34]||(s[34]=(0,C.D$)(S=>a.saveQuarterTone(t.editedObject),["stop"])),disabled:t.processing,"default-text":"flat:save"},null,8,["disabled"])])])):((0,e.uX)(),(0,e.CE)("div",{key:1,onClick:s[35]||(s[35]=S=>t.showUpgradeDialog({feature:"quarterTone"}))},[(0,e.Lk)("div",Qb,[s[44]||(s[44]=(0,e.Lk)("img",{src:I1},null,-1)),(0,e.Lk)("span",Gb,(0,l.v_)(t.$t("flat:upgrade.power.quarterTone-description")),1),(0,e.bF)(b,{"default-text":"flat:upgrade.upgrade-cta",as:"span",class:(0,l.C4)(t.$style.upgradeBtn)},null,8,["class"])])]))])):(0,e.Q3)("",!0)],2)):(0,e.Q3)("",!0),t.editingMode?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",Jb,[(0,e.bF)(h,{onClick:s[37]||(s[37]=S=>n.setMode()),"default-text":"flat:done"})]))])}var En=o(856219),Zb=o(35802),qb=o(575502),uo=o(128001),Ha=o(123491),Lt=o(351277),Va=o(794741),pt=o(104907),ns=o(377180),Cn=o(971064),Sn=o(460204),Qa=o(966727),eE=o(733767);const tE={class:"kodaly-editor no-select"},sE={class:"t-row-mode"},oE={for:"kodalyType",class:"label-ext-small"},nE={class:"options space-x-32px"},iE={class:"t-row-mode"},aE={for:"kodalyDoType",class:"label-ext-small"},rE={class:"options space-x-32px"},lE={class:"t-row-mode"},dE={class:"label-ext-small"},cE={class:"t-mode-octave"},uE={for:"t-from-octave",class:"label-ext-small"},_E={class:"t-row-mode"},pE={class:"label-ext-small"},mE={class:"t-mode-octave"},gE={for:"t-to-octave",class:"label-ext-small"};function fE(t,s,n,r,d,a){const f=(0,e.g2)("FRadio"),h=(0,e.g2)("FSelectInput"),u=(0,e.g2)("FNumberInput");return(0,e.uX)(),(0,e.CE)("div",tE,[(0,e.Lk)("div",sE,[(0,e.Lk)("label",oE,(0,l.v_)(t.$t("flat:custom-instru.kodaly.type.title"))+":",1),(0,e.Lk)("div",nE,[(0,e.bF)(f,{value:a.kodalyTypeLetter,name:"kodalyType",modelValue:a.localKodalyType,"onUpdate:modelValue":s[0]||(s[0]=g=>a.localKodalyType=g),"aria-label":t.$t("flat:custom-instru.kodaly.type.letter")},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:custom-instru.kodaly.type.letter")),1)]),_:1},8,["value","modelValue","aria-label"]),(0,e.bF)(f,{value:a.kodalyTypeHandSign,name:"kodalyType",modelValue:a.localKodalyType,"onUpdate:modelValue":s[1]||(s[1]=g=>a.localKodalyType=g),"aria-label":t.$t("flat:custom-instru.kodaly.type.hand-sign")},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:custom-instru.kodaly.type.hand-sign")),1)]),_:1},8,["value","modelValue","aria-label"])])]),(0,e.Lk)("div",iE,[(0,e.Lk)("label",aE,(0,l.v_)(t.$t("flat:custom-instru.kodaly.doType.title"))+": ",1),(0,e.Lk)("div",rE,[(0,e.bF)(f,{value:a.kodalyDoTypeMovable,name:"kodalyDoType",modelValue:a.localKodalyDoType,"onUpdate:modelValue":s[2]||(s[2]=g=>a.localKodalyDoType=g),"aria-label":t.$t("flat:custom-instru.kodaly.doType.movable")},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:custom-instru.kodaly.doType.movable")),1)]),_:1},8,["value","modelValue","aria-label"]),(0,e.bF)(f,{value:a.kodalyDoTypeFixed,name:"kodalyDoType",modelValue:a.localKodalyDoType,"onUpdate:modelValue":s[3]||(s[3]=g=>a.localKodalyDoType=g),"aria-label":t.$t("flat:custom-instru.kodaly.doType.fixed")},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:custom-instru.kodaly.doType.fixed")),1)]),_:1},8,["value","modelValue","aria-label"])])]),(0,e.Lk)("div",lE,[(0,e.Lk)("span",dE,(0,l.v_)(t.$t("flat:custom-instru.kodaly.source-pitch"))+":",1),(0,e.bF)(h,{modelValue:d.localSourcePitch.step,"onUpdate:modelValue":s[4]||(s[4]=g=>d.localSourcePitch.step=g),values:a.stepsOptions,class:(0,l.C4)(t.$style.StepInput)},null,8,["modelValue","values","class"]),(0,e.bF)(h,{modelValue:d.localSourcePitch.alter,"onUpdate:modelValue":s[5]||(s[5]=g=>d.localSourcePitch.alter=g),modelModifiers:{number:!0},values:a.accidentalsOptions,class:(0,l.C4)(t.$style.AlterInput)},null,8,["modelValue","values","class"]),(0,e.Lk)("div",cE,[(0,e.Lk)("label",uE,(0,l.v_)(t.$t("flat:transpose.atOctave"))+":",1),(0,e.bF)(u,{id:"t-from-octave",modelValue:d.localSourcePitch.octave,"onUpdate:modelValue":s[6]||(s[6]=g=>d.localSourcePitch.octave=g),modelModifiers:{number:!0},min:0,max:8,step:1,onKeypress:s[7]||(s[7]=(0,C.D$)(()=>{},["stop"])),onKeydown:s[8]||(s[8]=(0,C.D$)(()=>{},["stop"])),onKeyup:s[9]||(s[9]=(0,C.D$)(()=>{},["stop"]))},null,8,["modelValue"])])]),(0,e.Lk)("div",_E,[(0,e.Lk)("span",pE,(0,l.v_)(t.$t("flat:custom-instru.kodaly.recommended-pitch"))+":",1),(0,e.bF)(h,{modelValue:d.localRecommendedPitch.step,"onUpdate:modelValue":s[10]||(s[10]=g=>d.localRecommendedPitch.step=g),values:a.stepsOptions,class:(0,l.C4)(t.$style.StepInput)},null,8,["modelValue","values","class"]),(0,e.bF)(h,{modelValue:d.localRecommendedPitch.alter,"onUpdate:modelValue":s[11]||(s[11]=g=>d.localRecommendedPitch.alter=g),modelModifiers:{number:!0},values:a.accidentalsOptions,class:(0,l.C4)(t.$style.AlterInput)},null,8,["modelValue","values","class"]),(0,e.Lk)("div",mE,[(0,e.Lk)("label",gE,(0,l.v_)(t.$t("flat:transpose.atOctave"))+":",1),(0,e.bF)(u,{id:"t-to-octave",modelValue:d.localRecommendedPitch.octave,"onUpdate:modelValue":s[12]||(s[12]=g=>d.localRecommendedPitch.octave=g),modelModifiers:{number:!0},min:0,max:8,step:1,onKeypress:s[13]||(s[13]=(0,C.D$)(()=>{},["stop"])),onKeydown:s[14]||(s[14]=(0,C.D$)(()=>{},["stop"])),onKeyup:s[15]||(s[15]=(0,C.D$)(()=>{},["stop"]))},null,8,["modelValue"])])])])}var _o=o(597626),po=o(997092),wo=o(531070),hE=Object.defineProperty,Ga=Object.getOwnPropertySymbols,vE=Object.prototype.hasOwnProperty,yE=Object.prototype.propertyIsEnumerable,Ja=(t,s,n)=>s in t?hE(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Io=(t,s)=>{for(var n in s||(s={}))vE.call(s,n)&&Ja(t,n,s[n]);if(Ga)for(var n of Ga(s))yE.call(s,n)&&Ja(t,n,s[n]);return t};const bE=["C","D","E","F","G","A","B"],EE=[{value:"editor:doubleFlat.title",alter:-2},{value:"editor:flat.title",alter:-1},{value:"editor:natural.title",alter:0},{value:"editor:sharp.title",alter:1},{value:"editor:doubleSharp.title",alter:2}],CE={name:"KodalyEditor",components:{FNumberInput:_o.A,FSelectInput:po.A,FRadio:wo.h},props:{kodalyType:{type:String,required:!0},kodalyDoType:{type:String,required:!0},sourcePitch:{type:Object,required:!0},recommendedPitch:{type:Object,required:!0}},emits:["updateKodalyType","updateKodalyDoType","updateSourcePitch","updateRecommendedPitch"],data(){return{steps:bE,accidentals:EE,localSourcePitch:null,localRecommendedPitch:null}},watch:{localSourcePitch:{deep:!0,handler(){this.$emit("updateSourcePitch",Io({},this.localSourcePitch))}},localRecommendedPitch:{deep:!0,handler(){this.$emit("updateRecommendedPitch",Io({},this.localRecommendedPitch))}}},computed:{localKodalyType:{get(){return this.kodalyType},set(t){this.$emit("updateKodalyType",t)}},localKodalyDoType:{get(){return this.kodalyDoType},set(t){this.$emit("updateKodalyDoType",t)}},kodalyDoTypeFixed(){return Sn.A.FIXED},kodalyDoTypeMovable(){return Sn.A.MOVABLE},kodalyTypeLetter(){return Cn.A.LETTERS},kodalyTypeHandSign(){return Cn.A.HAND_SIGN},stepsOptions(){return this.steps.map(t=>({value:t,name:t}))},accidentalsOptions(){return this.accidentals.map(t=>({value:t.alter,name:this.$t(t.value)}))}},methods:{},created(){this.localSourcePitch=Io({},this.sourcePitch),this.localRecommendedPitch=Io({},this.recommendedPitch)}};var SE=o(620715),PE=o.n(SE);const Ya={};Ya.$style=PE();const LE=(0,k.A)(CE,[["render",fE],["__cssModules",Ya]]),AE={key:0,inline:"",viewBox:"315.779 79.353 32.073 95.222",xmlns:"http://www.w3.org/2000/svg"},ME={key:1,inline:"",viewBox:"315.779 79.353 32.073 95.222",xmlns:"http://www.w3.org/2000/svg"};function DE(t,s,n,r,d,a){const f=(0,e.g2)("FRadio"),h=(0,e.g2)("Checkbox");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(t.$style.wrapper)},[(0,e.Lk)("div",{class:(0,l.C4)([t.$style.col,t.$style.recorderRadio])},[(0,e.Lk)("label",{class:(0,l.C4)(t.$style.radioGroupLabel)},(0,l.v_)(t.$t("flat:custom-instru.recorder-tabs.instrument.label")),3),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(d.instrumentsList,u=>((0,e.uX)(),(0,e.Wv)(f,{id:u,key:u,modelValue:d.instrumentModel,"onUpdate:modelValue":s[0]||(s[0]=g=>d.instrumentModel=g),value:u},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t(`flat:custom-instru.recorder-tabs.instrument.${u}`)),1)]),_:2},1032,["id","modelValue","value"]))),128))],2),(0,e.Lk)("div",{class:(0,l.C4)([t.$style.col,t.$style.recorderRadio])},[(0,e.Lk)("label",{class:(0,l.C4)(t.$style.radioGroupLabel)},(0,l.v_)(t.$t("flat:custom-instru.recorder-tabs.layout.label")),3),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(d.layoutsList,u=>((0,e.uX)(),(0,e.Wv)(f,{id:u,key:u,modelValue:d.layoutModel,"onUpdate:modelValue":s[1]||(s[1]=g=>d.layoutModel=g),value:u},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t(`flat:custom-instru.recorder-tabs.layout.${u}`)),1)]),_:2},1032,["id","modelValue","value"]))),128))],2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.japaneseCheckboxWrapper)},[(0,e.bF)(h,{modelValue:d.useJapaneseModel,"onUpdate:modelValue":s[2]||(s[2]=u=>d.useJapaneseModel=u),id:"useJapaneseCheck"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:custom-instru.recorder-tabs.japanese")),1)]),_:1},8,["modelValue"])],2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.preview)},[(0,e.eW)((0,l.v_)(t.$t("flat:custom-instru.recorder-tabs.preview"))+" ",1),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.previewImgWrap)},[d.useJapaneseModel?((0,e.uX)(),(0,e.CE)("svg",AE,s[3]||(s[3]=[(0,e.Fv)('<path d="M 323.883 161.379 C 326.661 161.379 328.909 163.628 328.909 166.406 C 328.909 169.184 326.661 171.433 323.883 171.433 C 321.138 171.433 318.856 169.184 318.856 166.406 C 318.856 163.628 321.138 161.379 323.883 161.379 Z M 323.883 162.438 C 321.7 162.438 319.914 164.223 319.914 166.406 L 327.851 166.406 C 327.851 164.223 326.065 162.438 323.883 162.438 Z" class="half-closed-hole" style="transform-origin:323.882px 166.406px;" transform="matrix(-1, 0, 0, -1, 0, 0)"></path><path d="M 335.424 171.433 C 332.646 171.433 330.397 169.184 330.397 166.407 C 330.397 163.629 332.646 161.38 335.424 161.38 C 338.202 161.38 340.451 163.629 340.451 166.407 C 340.451 169.184 338.202 171.433 335.424 171.433 Z" class="closed-hole" style="transform-origin:330.397px 161.38px;"></path><path d="M 335.424 158.204 C 332.646 158.204 330.397 155.955 330.397 153.178 C 330.397 150.4 332.646 148.151 335.424 148.151 C 338.202 148.151 340.451 150.4 340.451 153.178 C 340.451 155.955 338.202 158.204 335.424 158.204 Z" class="closed-hole" style="transform-origin:330.397px 148.151px;"></path><path d="M 335.424 144.976 C 332.646 144.976 330.397 142.727 330.397 139.95 C 330.397 137.172 332.646 134.923 335.424 134.923 C 338.202 134.923 340.451 137.172 340.451 139.95 C 340.451 142.727 338.202 144.976 335.424 144.976 Z" class="closed-hole" style="transform-origin:330.397px 134.923px;"></path><path d="M 335.424 127.614 C 332.646 127.614 330.397 125.365 330.397 122.588 C 330.397 119.81 332.646 117.561 335.424 117.561 C 338.202 117.561 340.451 119.81 340.451 122.588 C 340.451 125.365 338.202 127.614 335.424 127.614 Z M 335.424 118.619 C 333.241 118.619 331.456 120.405 331.456 122.588 C 331.456 124.77 333.241 126.556 335.424 126.556 C 337.607 126.556 339.393 124.77 339.393 122.588 C 339.393 120.405 337.607 118.619 335.424 118.619 Z" class="open-hole" style="transform-origin:330.397px 117.561px;"></path><path d="M 335.424 114.385 C 332.646 114.385 330.397 112.136 330.397 109.359 C 330.397 106.581 332.646 104.332 335.424 104.332 C 338.202 104.332 340.451 106.581 340.451 109.359 C 340.451 112.136 338.202 114.385 335.424 114.385 Z" class="closed-hole" style="transform-origin:330.397px 104.332px;"></path><path d="M 335.424 101.157 C 332.646 101.157 330.397 98.908 330.397 96.131 C 330.397 93.353 332.646 91.104 335.424 91.104 C 338.202 91.104 340.451 93.353 340.451 96.131 C 340.451 98.908 338.202 101.157 335.424 101.157 Z M 335.424 92.162 C 333.241 92.162 331.456 93.948 331.456 96.131 C 331.456 98.313 333.241 100.099 335.424 100.099 C 337.607 100.099 339.393 98.313 339.393 96.131 C 339.393 93.948 337.607 92.162 335.424 92.162 Z" class="open-hole" style="transform-origin:330.397px 91.104px;"></path><path d="M 341.212 90.409 C 338.434 90.409 336.185 88.16 336.185 85.383 C 336.185 82.605 338.434 80.356 341.212 80.356 C 343.99 80.356 346.239 82.605 346.239 85.383 C 346.239 88.16 343.99 90.409 341.212 90.409 Z M 341.212 81.414 C 339.029 81.414 337.244 83.2 337.244 85.383 C 337.244 87.565 339.029 89.351 341.212 89.351 C 343.395 89.351 345.181 87.565 345.181 85.383 C 345.181 83.2 343.395 81.414 341.212 81.414 Z" class="open-hole" style="transform-origin:336.185px 80.356px;"></path><line x1="328.744" y1="131.748" x2="342.799" y2="131.748" stroke-width="0.9921259842519686" stroke-dasharray="" style=""></line>',9)]))):((0,e.uX)(),(0,e.CE)("svg",ME,s[4]||(s[4]=[(0,e.Fv)('<path d="M 325.241 83.156 C 327.986 83.156 330.268 85.405 330.268 88.183 C 330.268 90.961 327.986 93.21 325.241 93.21 C 322.463 93.21 320.215 90.961 320.215 88.183 C 320.215 85.405 322.463 83.156 325.241 83.156 Z M 321.273 88.183 C 321.273 90.366 323.026 92.152 325.241 92.152 L 325.241 84.215 C 323.026 84.215 321.273 86 321.273 88.183 Z" class="half-closed-hole" style="transform-origin:320.215px 83.156px;"></path><path d="M 336.815 93.21 C 334.037 93.21 331.789 90.961 331.789 88.183 C 331.789 85.405 334.037 83.156 336.815 83.156 C 339.593 83.156 341.842 85.405 341.842 88.183 C 341.842 90.961 339.593 93.21 336.815 93.21 Z" class="closed-hole" style="transform-origin:331.789px 83.156px;"></path><path d="M 336.815 106.438 C 334.037 106.438 331.789 104.189 331.789 101.411 C 331.789 98.633 334.037 96.384 336.815 96.384 C 339.593 96.384 341.842 98.633 341.842 101.411 C 341.842 104.189 339.593 106.438 336.815 106.438 Z" class="closed-hole" style="transform-origin:331.789px 96.384px;"></path><path d="M 336.815 118.84 C 334.037 118.84 331.789 116.591 331.789 113.813 C 331.789 111.035 334.037 108.786 336.815 108.786 C 339.593 108.786 341.842 111.035 341.842 113.813 C 341.842 116.591 339.593 118.84 336.815 118.84 Z" class="closed-hole" style="transform-origin:331.789px 108.786px;"></path><path d="M 336.815 136.202 C 334.037 136.202 331.789 133.953 331.789 131.175 C 331.789 128.397 334.037 126.148 336.815 126.148 C 339.593 126.148 341.842 128.397 341.842 131.175 C 341.842 133.953 339.593 136.202 336.815 136.202 Z M 336.815 127.207 C 334.633 127.207 332.847 128.992 332.847 131.175 C 332.847 133.358 334.633 135.144 336.815 135.144 C 338.998 135.144 340.784 133.358 340.784 131.175 C 340.784 128.992 338.998 127.207 336.815 127.207 Z" class="open-hole" style="transform-origin:331.789px 126.148px;"></path><path d="M 336.815 149.431 C 334.037 149.431 331.789 147.182 331.789 144.404 C 331.789 141.626 334.037 139.377 336.815 139.377 C 339.593 139.377 341.842 141.626 341.842 144.404 C 341.842 147.182 339.593 149.431 336.815 149.431 Z" class="closed-hole" style="transform-origin:331.789px 139.377px;"></path><path d="M 336.815 162.659 C 334.037 162.659 331.789 160.41 331.789 157.632 C 331.789 154.854 334.037 152.605 336.815 152.605 C 339.593 152.605 341.842 154.854 341.842 157.632 C 341.842 160.41 339.593 162.659 336.815 162.659 Z M 336.815 153.664 C 334.633 153.664 332.847 155.449 332.847 157.632 C 332.847 159.815 334.633 161.601 336.815 161.601 C 338.998 161.601 340.784 159.815 340.784 157.632 C 340.784 155.449 338.998 153.664 336.815 153.664 Z" class="open-hole" style="transform-origin:331.789px 152.605px;"></path><path d="M 331.028 173.407 C 328.25 173.407 326.002 171.158 326.002 168.38 C 326.002 165.602 328.25 163.353 331.028 163.353 C 333.806 163.353 336.055 165.602 336.055 168.38 C 336.055 171.158 333.806 173.407 331.028 173.407 Z M 331.028 164.412 C 328.846 164.412 327.06 166.197 327.06 168.38 C 327.06 170.563 328.846 172.349 331.028 172.349 C 333.211 172.349 334.997 170.563 334.997 168.38 C 334.997 166.197 333.211 164.412 331.028 164.412 Z" class="open-hole" style="transform-origin:326.002px 163.353px;"></path><line x1="327.986" y1="123.222" x2="346.009" y2="123.222" stroke-width="0.9921259842519686" stroke-dasharray="" style=""></line>',9)])))],2)],2)],2)}var TE=o(36514);const Ro=["soprano","alto"],Pn=["baroque","german"],OE={name:"RecorderTabsEditor",components:{FRadio:wo.h,Checkbox:TE.A},props:{initialInstrument:{type:String,default:Ro[0]},initialLayout:{type:String,default:Pn[0]},initialJapanese:{type:Boolean,default:!1}},emits:["updateInstrument","updateLayout","updateJapanese"],data(){return{instrumentsList:Ro,layoutsList:Pn,instrumentModel:this.initialInstrument,layoutModel:this.initialLayout,useJapaneseModel:this.initialJapanese}},watch:{instrumentModel(){this.$emit("updateInstrument",this.instrumentModel)},layoutModel(){this.$emit("updateLayout",this.layoutModel)},useJapaneseModel(){this.$emit("updateJapanese",this.useJapaneseModel)}}};var kE=o(496048),xE=o.n(kE);const Za={};Za.$style=xE();const wE=(0,k.A)(OE,[["render",DE],["__cssModules",Za]]);var IE=o(471407),Ye=o(118010);const qa=new Map([[325,Ye.rQ],[25,Ye.rQ],[26,Ye.rQ],[328,Ye.rQ],[28,Ye.rQ],[27,Ye.rQ],[29,Ye.rQ],[131,Ye.rQ],[231,Ye.rQ],[331,Ye.rQ],[31,Ye.rQ],[334,Ye.IQ],[335,Ye.IQ],[34,Ye.IQ],[35,Ye.IQ],[37,Ye.IQ],[324,Ye._u],[224,Ye._u],[106,Ye.BK],[225,Ye.jn]]);function RE(t){const[s]=Ao.default.getMIDIInstruments(t),n=Number.parseInt(En.default.getMIDIProgram(s),10);return qa.has(n)?qa.get(n):null}var FE=o(800914),xs=o(140887);const WE=[{midiProgram:257},{midiProgram:57}],UE=[{midiProgram:61},{midiProgram:161}],BE=[{midiProgram:258},{midiProgram:58}],jE=[{midiProgram:270}],KE=ns.default.createComplete(0,0,-1),NE=ns.default.createComplete(-10,-6,0),XE=ns.default.createComplete(-7,-4,0);function $E(t,s){let n=null;return WE.some(r=>r.midiProgram===t)?xs.A.TRUMPET:(UE.some(r=>t===r.midiProgram)&&(ns.default.isSame(s,XE)?n=xs.A.HORN_F:ns.default.isSame(s,NE)?n=xs.A.HORN_D:ns.default.isSame(s,KE)&&(n=xs.A.HORN_C)),BE.some(r=>t===r.midiProgram)?xs.A.TROMBONE:jE.some(r=>t===r.midiProgram)?xs.A.EUPHONIUM:n)}const er=[{midiProgram:75}],L5=[...er];var zE=Object.defineProperty,HE=Object.defineProperties,VE=Object.getOwnPropertyDescriptors,tr=Object.getOwnPropertySymbols,QE=Object.prototype.hasOwnProperty,GE=Object.prototype.propertyIsEnumerable,sr=(t,s,n)=>s in t?zE(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,JE=(t,s)=>{for(var n in s||(s={}))QE.call(s,n)&&sr(t,n,s[n]);if(tr)for(var n of tr(s))GE.call(s,n)&&sr(t,n,s[n]);return t},YE=(t,s)=>HE(t,VE(s)),it=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const or={tabEnabled:!1,tabFrameEnabled:!1,tabLines:null,tabTuning:[],tabCapo:0,preserveFrets:!0},nr={kodalyEnabled:!1,sourcePitch:null,recommendedPitch:null,kodalyType:null,kodalyDoType:null},ir={recorderTabsEnabled:!1,recorderTabsInstrument:null,recorderTabsLayout:null,recorderTabsJapanese:!1},ar={brassFingeringEnabled:!1,brassFingeringInstrument:null},ZE={name:"ScoreEditorInstrumentsEdit",components:{TuningEditor:IE.A,KodalyEditor:LE,RecorderTabsEditor:wE,FPowerButton:eE.QY,editIcon:Rt.A},props:{editingPartUuid:{type:String,required:!0},editingPart:{type:Object,required:!0},scoreData:{type:Object,required:!0},setMode:{type:Function,required:!0}},setup(){const t=(0,fe.F)(),s=(0,N.q6)(),n=(0,nt.B)(),r=(0,ze.O)();return{accountFeatures:(0,e.EW)(()=>t.accountFeatures),documentSettingsParams:(0,e.EW)(()=>s.documentSettingsParams),addExperience:n.addExperience,displayError:r.displayError}},computed:{editingPartOrigalHasTab(){return this.editingPart.staffDetails&&!this.editingPart.staffDetails["staff-tuning"]},editingPartOrigalHasKodaly(){return this.editingPart.staffDetails&&!pt.default.hasKodaly(this.editingPart.staffDetails)},enabledFeatureTuning(){return this.accountFeatures.tabsTuning},enabledFeatureRecorderTabs(){return this.accountFeatures.recorderTabs},enabledFeatureBrassFingering(){return this.accountFeatures.brassFingering},enabledFeatureKodaly(){return this.accountFeatures.kodaly},enabledFeatureQuarterTone(){return this.accountFeatures.quarterTone},canPreserveFrets(){if(!this.hasTuning||this.initialTab===null||this.initialTab.tabCapo===this.tabCapo)return!1;const t={"staff-tuning":this.tabTuning},s={"staff-tuning":this.initialTab.tabTuning};return!!pt.default.hasSameStaffTuning(t,s)},partTranspose(){const t=this.scoreData.adagioData,s=t.getPartIdxFromUuid(this.editingPartUuid),n=t.getMeasure(s,0),d=bt.default.getWrappedTranspose(n).getEntry(0);return ns.default.copy(d)},canAddStaves(){return this.editingPart.group!=="unpitched-percussion"&&!this.kodalyEnabled&&!this.tabEnabled&&!this.tabFrameEnabled&&!this.recorderTabsEnabled&&!this.editingPart.isTemplateLocked&&!this.brassFingeringEnabled},canEditStaves(){return this.editingPart.group!=="unpitched-percussion"&&!this.editingPartOrigalHasTab&&!this.editingPart.isTemplateLocked},tabInstrumentType(){return RE(this.editingPart.header)},hasRecorderSound(){const[t]=Ao.default.getMIDIInstruments(this.editingPart.header),s=Number.parseInt(En.default.getMIDIProgram(t),10);return er.some(n=>n.midiProgram===s)},hasBrassSound(){return this.candidateBrassInstrument!==null},candidateBrassInstrument(){const[t]=Ao.default.getMIDIInstruments(this.editingPart.header),s=Number.parseInt(En.default.getMIDIProgram(t),10);return $E(s,this.partTranspose)},hasTuning(){return this.tabEnabled||this.tabFrameEnabled}},watch:{hasTuning(t){if(t&&this.editedObject&&this.editedObject.metas&&this.editedObject.metas&&this.editedObject.metas.details){const s=this.editedObject.metas.details;this.tabLines=Number.parseInt(s["staff-lines"],10),this.tabTuning=s["staff-tuning"]}if(!Number.isInteger(this.tabLines)){this.tabLines=6;const s=FE.$2.guitar.standard;for(let n=0;n<s.length;n++)this.tabTuning[n]={"tuning-step":s[n].s,"tuning-octave":s[n].o,"tuning-alter":s[n].a}}this.initialTabLines=this.tabLines,this.tuningPresetId=null},tabLines(t){Number.isInteger(t)&&(this.tabLines<3?this.tabLines=3:this.tabLines>14&&(this.tabLines=14))},recorderTabsEnabled(){var t;this.recorderTabsEnabled&&((t=this.editedObject)!=null&&t.isTransposing?this.recorderTabsInstrument=Ro[1]:this.recorderTabsInstrument=Ro[0],this.recorderTabsLayout=Pn[0],this.language==="ja"||this.language==="ja-HIRA"?this.recorderTabsJapanese=!0:this.recorderTabsJapanese=!1)},brassFingeringEnabled(){this.brassFingeringEnabled&&(this.brassFingeringInstrument=this.candidateBrassInstrument)},kodalyEnabled(){if(!this.kodalyEnabled)return;this.kodalyType=Cn.A.LETTERS,this.kodalyDoType=Sn.A.MOVABLE;const t=this.editingPart.idx,n=this.scoreData.adagioData.getPartContent(t),r=nn.A.getMeasure(n,0),a=bt.default.getNotes(r)[0];let f;Ha.default.hasPitch(a)?(f=Ha.default.getPitch(a),f=Lt.default.copy(f)):f=Lt.default.create(4,"C"),this.sourcePitch=f,this.recommendedPitch=Lt.default.copy(this.sourcePitch),this.sourcePitch.alter=Lt.default.getAlter(this.sourcePitch),this.recommendedPitch.alter=Lt.default.getAlter(this.recommendedPitch)}},data(){return Object.assign({processing:!1,editingMode:null,editedObject:null,staves:[],initialTab:null,initialTabLines:null,tuningPresetId:null,quarterToneEnabled:null,language:flatSettings.language||"en"},or,nr,ir,ar)},methods:YE(JE({},(0,A.i0)(ut.B,["showUpgradeDialog"])),{startEditing(t){this.editing=t.uuid||t,this.editedObject=null,this.addExperience("editor.part.trigger-edit"),this.getEditedPartStaves(),this.getEditedPartTab(),this.getEditedPartKodaly(),this.getEditedPartRecorderTabs(),this.getEditedPartQuarterTone(),this.getEditedPartBrassFingering()},clickModeCard(t){if(t!==this.editingMode){this.editingMode=t;const s=JSON.parse(JSON.stringify(this.editingPart));typeof s.header["part-name"]!="string"&&(s.header["part-name"]=""),typeof s.header["part-abbreviation"]!="string"&&(s.header["part-abbreviation"]=""),this.editedObject=s,this.getEditedPartStaves(),this.getEditedPartTab(),this.getEditedPartKodaly(),this.getEditedPartRecorderTabs(),this.getEditedPartQuarterTone(),this.getEditedPartBrassFingering()}},getEditedPartStaves(t){typeof t=="undefined"&&(t=this.editingPart.idx);const n=this.scoreData.adagioData.getMeasure(this.editingPart.idx,0),r=bt.default.getWrappedClef(n),d=r.getNbStaves(),a=[];for(let f=0;f<d;f++)a.push({staffIdx:f,clef:r.getEntry(f),uuid:this.editingPart.header.staffMapping[f].staffUuid});this.staves=a},getEditedPartTab(t){const s=this.getStaffDetails(t);s["staff-tuning"]?(this.tabLines=Number.parseInt(s["staff-lines"],10),this.initialTabLines=this.tabLines,this.tuningPresetId=null,this.tabTuning=JSON.parse(JSON.stringify(pt.default.getStaffTunings(s))),this.tabCapo=pt.default.getCapo(s)||0,this.initialTab={tabCapo:this.tabCapo,tabTuning:JSON.parse(JSON.stringify(this.tabTuning))}):(this.initialTab=null,Object.assign(this,or)),this.tabEnabled=pt.default.hasTab(s),this.tabFrameEnabled=pt.default.hasTabFrameEnabled(s)},getEditedPartKodaly(t){const s=this.getStaffDetails(t);if(pt.default.hasKodaly(s)){this.kodalyEnabled=!0;const n=pt.default.getKodaly(s),r=uo.A.getSourcePitch(n);this.sourcePitch=Lt.default.copy(r);const d=uo.A.getRecommendedPitch(n);this.recommendedPitch=Lt.default.copy(d),this.sourcePitch.alter=Lt.default.getAlter(this.sourcePitch),this.recommendedPitch.alter=Lt.default.getAlter(this.recommendedPitch),this.kodalyType=uo.A.getDisplayType(n),this.kodalyDoType=uo.A.getDoType(n)}else Object.assign(this,nr)},getEditedPartRecorderTabs(t){const s=this.getStaffDetails(t);if(pt.default.hasRecorderTabs(s)){this.recorderTabsEnabled=!0;const n=pt.default.getRecorderTabs(s),r=Va.A.getType(n),d=Va.A.getDisplayType(n);if(r){const{instrument:a,layout:f}=(0,Qa.zU)(r);this.recorderTabsInstrument=a,this.recorderTabsLayout=f}d&&(this.recorderTabsJapanese=(0,Qa.BD)(d))}else Object.assign(this,ir),(this.language==="ja"||this.language==="ja-HIRA")&&(this.recorderTabsJapanese=!0)},getEditedPartBrassFingering(t){const s=this.getStaffDetails(t);if(pt.default.hasBrassFingering(s)){this.brassFingeringEnabled=!0;const n=pt.default.getBrassFingering(s),r=qb.A.getInstrument(n);this.brassFingeringInstrument=r}else Object.assign(this,ar)},getEditedPartQuarterTone(t){typeof t=="undefined"&&(t=this.editingPart.idx);const s=this.scoreData.adagioData;this.quarterToneEnabled=s.hasPartQuarterTone(t)},getStaffDetails(t){typeof t=="undefined"&&(t=this.editingPart.idx);const n=this.scoreData.adagioData.getPartContent(t),r=nn.A.getMeasure(n,0),d=bt.default.getAttributes(r);return Zb.default.getStaffDetails(d)[0]},setTuningPresetId(t){this.tuningPresetId=t},logError(t){this.scoreData.logError(t)},doAction(t){return it(this,null,function*(){if(!this.processing){this.processing=!0;try{yield t()}catch(s){throw this.processing=!1,this.logError(s),this.displayError({error:s}),s}this.processing=!1}})},renamePart(t){return it(this,null,function*(){yield this.doAction(()=>it(this,null,function*(){yield this.scoreData.scoreActions.executePublicAction("renamePart",{partUuid:t.uuid,partName:t.header["part-name"]||"",partAbbreviation:t.header["part-abbreviation"]||""}),this.editingMode=null}))})},saveQuarterTone(t){return it(this,null,function*(){yield this.doAction(()=>it(this,null,function*(){const s={partUuid:t.uuid,isEnabled:this.quarterToneEnabled};yield this.scoreData.scoreActions.executePublicAction("changeQuarterTone",s),this.resetStaffDetailsSettings("quarterToneEnabled"),this.editingMode=null}))})},addStaff(t){return it(this,null,function*(){yield this.doAction(()=>it(this,null,function*(){yield this.scoreData.scoreActions.executePublicAction("addStaffAndGuessClef",{partUuid:t.uuid}),this.getEditedPartStaves()}))})},removeStaff(t,s){return it(this,null,function*(){yield this.doAction(()=>it(this,null,function*(){yield this.scoreData.scoreActions.executePublicAction("removeStaff",{partUuid:t.uuid,staffUuid:s.uuid}),this.getEditedPartStaves()}))})},saveTab(t){return it(this,null,function*(){yield this.doAction(()=>it(this,null,function*(){const s={partUuid:t.uuid};this.hasTuning&&(this.updateTabTuningXps(),s.staffDetails={"staff-lines":this.tabLines,"staff-tuning":this.tabTuning,capo:this.tabCapo},this.tabEnabled||(s.staffDetails["$adagio-noTab"]=!0),this.tabFrameEnabled&&(s.staffDetails["$adagio-tabFrameEnabled"]=!0)),this.canPreserveFrets&&this.preserveFrets&&(s.preserveFrets=!0),yield this.scoreData.scoreActions.executePublicAction("changeTuning",s),this.resetStaffDetailsSettings("tabEnabled"),this.editingMode=null}))})},saveRecorderTabs(t){return it(this,null,function*(){yield this.doAction(()=>it(this,null,function*(){const s={partUuid:t.uuid,enabled:this.recorderTabsEnabled};this.recorderTabsEnabled&&(s.instrument=this.recorderTabsInstrument,s.layout=this.recorderTabsLayout,s.useJapanese=this.recorderTabsJapanese),yield this.scoreData.scoreActions.executePublicAction("changeRecorderTab",s),this.resetStaffDetailsSettings("recorderTabsEnabled"),this.editingMode=null}))})},saveBrassFingering(t){return it(this,null,function*(){yield this.doAction(()=>it(this,null,function*(){const s={partUuid:t.uuid,enabled:this.brassFingeringEnabled};s.instrument=this.brassFingeringInstrument,yield this.scoreData.scoreActions.executePublicAction("changeBrassFingering",s),this.resetStaffDetailsSettings("brassFingeringEnabled"),this.editingMode=null}))})},updateTabTuningXps(){this.tabLines!==this.initialTabLines&&this.addExperience("editor.tuning.nb-strings"),this.tabCapo>0&&this.addExperience("editor.tuning.capo"),this.tuningPresetId&&(this.tuningPresetId==="custom"?this.addExperience("editor.tuning.custom"):this.tuningPresetId.includes(":")&&this.tuningPresetId.split(":")[1]!=="standard"&&this.addExperience("editor.tuning.preset"))},saveKodaly(t){return it(this,null,function*(){yield this.doAction(()=>it(this,null,function*(){const s={partUuid:t.uuid};if(this.kodalyEnabled){const n=Lt.default.copy(this.sourcePitch),r=Lt.default.copy(this.recommendedPitch),d=uo.A.create(this.kodalyType,n,r,this.kodalyDoType),a={};pt.default.setNbStaffLines(a,5),pt.default.setKodaly(a,d),s.staffDetails=a}yield this.scoreData.scoreActions.executePublicAction("changeKodaly",s),this.resetStaffDetailsSettings("kodalyEnabled"),this.editingMode=null}))})},resetStaffDetailsSettings(t){["tabEnabled","kodalyEnabled","quarterToneEnabled","recorderTabsEnabled","brassFingeringEnabled"].filter(n=>t!==n).forEach(n=>{this[n]=!1})}}),mounted(){this.startEditing(this.editingPartUuid)}};var qE=o(706615),e2=o.n(qE);const rr={};rr.$style=e2();const t2=(0,k.A)(ZE,[["render",Yb],["__cssModules",rr]]),s2=["data-part-uuid"],o2=["onClick"],n2=["onClick"],i2=["onClick"],a2=["onClick"],r2={key:"placeholderPart"};function l2(t,s,n,r,d,a){const f=(0,e.g2)("reorder-icon"),h=(0,e.g2)("PartName"),u=(0,e.g2)("LoaderSpinner"),g=(0,e.g2)("edit-icon"),b=(0,e.g2)("replace-icon"),P=(0,e.g2)("trash-icon"),F=(0,e.g2)("InstrumentRowSkeleton");return(0,e.uX)(),(0,e.Wv)(C.F,{class:(0,l.C4)(t.$style.listInstrus),name:"list",tag:"ul"},{default:(0,e.k6)(()=>[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(d.localParts,(S,H)=>((0,e.uX)(),(0,e.CE)("li",{key:S.uuid,"data-part-uuid":S.uuid},[(0,e.Lk)("div",{class:(0,l.C4)({[t.$style.partWrapper]:!0,[t.$style.deleting]:d.deleting===S.uuid})},[a.canMoveParts?((0,e.uX)(),(0,e.CE)("span",{key:0,class:(0,l.C4)([t.$style["ds-action"],t.$style.move]),"aria-label":"Re-order instruments"},[(0,e.bF)(f)],2)):(0,e.Q3)("",!0),(0,e.bF)(h,{part:S,displayOriginalName:!0,class:(0,l.C4)(t.$style.partName),onClick:I=>n.startEditing(S)},null,8,["part","class","onClick"]),d.deleting===S.uuid?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,l.C4)([t.$style["pull-right"],t.$style["ds-instrument-main-actions"],t.$style.deleting])},[(0,e.eW)((0,l.v_)(t.$t("flat:deleting"))+" ",1),(0,e.bF)(u,{class:(0,l.C4)(t.$style.deleteSpinner),size:15,"line-size":2,delay:0,"line-fg-color":"var(--f-safe-red)"},null,8,["class"])],2)):!d.confirmDeleting||d.confirmDeleting!==S.uuid?((0,e.uX)(),(0,e.CE)("div",{key:2,class:(0,l.C4)([t.$style["pull-right"],t.$style["ds-instrument-main-actions"]])},[(0,e.Lk)("button",{class:(0,l.C4)(t.$style["ds-action"]),onClick:I=>n.startEditing(S)},[(0,e.bF)(g),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.instruments-change.edit")),1)],10,o2),S.isTemplateLocked?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[S.group!=="unpitched-percussion"?((0,e.uX)(),(0,e.CE)("button",{key:0,class:(0,l.C4)(t.$style["ds-action"]),onClick:I=>n.startReplacing(S)},[(0,e.bF)(b),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.instrument-replace-short")),1)],10,n2)):(0,e.Q3)("",!0),a.canRemoveParts?((0,e.uX)(),(0,e.CE)("button",{key:1,class:(0,l.C4)({[t.$style["ds-action"]]:!0,[t.$style.disabled]:d.deleting&&d.deleting!==S.uuid}),onClick:I=>d.confirmDeleting=S.uuid},[(0,e.bF)(P),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.instruments-change.remove")),1)],10,i2)):(0,e.Q3)("",!0)],64))],2)):((0,e.uX)(),(0,e.CE)("div",{key:3,class:(0,l.C4)([t.$style["pull-right"],t.$style["ds-instrument-main-actions"],t.$style.deleting])},[(0,e.bF)(P),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:are-you-sure")),1),(0,e.Lk)("button",{class:(0,l.C4)([t.$style["ds-action"],t.$style.yes]),onClick:I=>a.prepareRemoveInstrument(S)},(0,l.v_)(t.$t("flat:yes")),11,a2),(0,e.Lk)("span",{class:(0,l.C4)(t.$style.separator)},"|",2),(0,e.Lk)("button",{class:(0,l.C4)(t.$style["ds-action"]),onClick:s[0]||(s[0]=I=>d.confirmDeleting=null)},(0,l.v_)(t.$t("flat:no")),3)],2))],2)],8,s2))),128)),n.addingInstrument&&!d.received?((0,e.uX)(),(0,e.CE)("li",r2,[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.partWrapper)},[(0,e.bF)(F,{class:(0,l.C4)(t.$style.preloader)},null,8,["class"])],2)])):(0,e.Q3)("",!0)]),_:1},8,["class"])}var d2=o(967401),c2=o(12741);const u2=c2.A;var _2=o(155011);function p2(t,s,n,r,d,a){return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(t.$style.instrumentRow)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.partIcon)},null,2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.partName)},null,2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.spacer)},null,2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.partActions)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.partIcon)},null,2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.partAction)},null,2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.partIcon)},null,2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.partAction)},null,2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.partIcon)},null,2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.partAction)},null,2)],2)],2)}const m2={name:"InstrumentRowSkeleton"};var g2=o(394835),f2=o.n(g2);const lr={};lr.$style=f2();const h2=(0,k.A)(m2,[["render",p2],["__cssModules",lr]]);var v2=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const y2={name:"ScoreEditorInstrumentsList",components:{editIcon:Rt.A,replaceIcon:za.A,trashIcon:co.A,reorderIcon:d2.A,PartName:u2,InstrumentRowSkeleton:h2,LoaderSpinner:ss.A},props:{scoreData:{type:Object,required:!0},parts:{type:Array,required:!0},removeInstrument:{type:Function,required:!0},startEditing:{type:Function,required:!0},startReplacing:{type:Function,required:!0},addingInstrument:{type:Boolean,default:!1}},setup(){const t=(0,N.q6)();return{displayMobileEditor:(0,e.EW)(()=>t.displayMobileEditor)}},data(){return{confirmDeleting:null,deleting:null,received:!1,localParts:[],stackedOperations:0}},computed:{canRemoveParts(){return this.parts.length>1},canMoveParts(){return this.parts.length>1}},created(){this.updateLocalParts()},watch:{stackedOperations(t){t===0&&(this.localParts=this.parts.slice())},parts(){this.received=!0,this.updateLocalParts()}},mounted(){_2.Ay.create(this.$el,{draggable:"li",handle:`.${this.$style.move}`,dragClass:this.$style.sortablePlaceholder,ghostClass:this.$style.sortableGhost,removeCloneOnHide:!1,animation:0,onStart:t=>{const s=t.clone;s.style.removeProperty("display"),s.classList.add(this.$style.sortableOldElem)},onEnd:t=>{const s=t.item.getAttribute("data-part-uuid");let n=t.newDraggableIndex;const r=t.oldDraggableIndex;n>r&&(n+=1),this.stackedOperations++,this.scoreData.scoreActions.executePublicAction("movePart",{fromPartUuid:s,toPartIdx:n}).then(()=>{this.stackedOperations--}),this.$forceUpdate()}})},methods:{canDisplayOriginalName(t){return t.metas.title&&t.metas.title!==t.name||t.metas.longname&&t.metas.longname!==t.name},updateLocalParts(){this.localParts=this.parts.slice(),this.stackedOperations=0},prepareRemoveInstrument(t){return v2(this,null,function*(){this.deleting=t.uuid,yield this.removeInstrument(t),this.deleting=null,this.updateLocalParts()})},startReplacingIfPossible(t){t.group!=="unpitched-percussion"&&this.startReplacing(t)}}};var b2=o(80412),E2=o.n(b2);const dr={};dr.$style=E2();const C2=(0,k.A)(y2,[["render",l2],["__cssModules",dr]]);function S2(t){t.clefs=t.staves.map(r=>r.clef);const s=t.staves[0].transpose;s&&(t.transpose=s);const n=t.staves[0].staffDetails;n&&(t.staffDetails=n),delete t.staves}function P2(t){const s=t.staves[0].transpose;s&&(t.transpose=s);const n=t.staves[0].staffDetails;n&&(t.staffDetails=n),delete t.staves}var L2=Object.defineProperty,A2=Object.defineProperties,M2=Object.getOwnPropertyDescriptors,cr=Object.getOwnPropertySymbols,D2=Object.prototype.hasOwnProperty,T2=Object.prototype.propertyIsEnumerable,ur=(t,s,n)=>s in t?L2(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,O2=(t,s)=>{for(var n in s||(s={}))D2.call(s,n)&&ur(t,n,s[n]);if(cr)for(var n of cr(s))T2.call(s,n)&&ur(t,n,s[n]);return t},k2=(t,s)=>A2(t,M2(s)),Vt=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const x2={name:"ScoreEditorInstrumentsTab",components:{InstrumentsList:f1.A,InstrumentsListSearch:h1.A,ScoreEditorInstrumentsList:C2,ScoreEditorInstrumentsBrackets:M1,ScoreEditorInstrumentsEdit:t2,replaceIcon:za.A,trashIcon:co.A,arrowBackIcon:no.A,PowerBadgeIcon:Pt.default},props:{scoreData:{type:Object,required:!0}},setup(){const t=(0,fe.F)(),s=(0,ln.F)(),n=(0,N.q6)(),r=(0,nt.B)(),d=(0,ze.O)();return{account:(0,e.EW)(()=>t.account),accountFeatures:(0,e.EW)(()=>t.accountFeatures),customInstruments:(0,e.EW)(()=>s.customInstruments),customInstrumentsListFormat:(0,e.EW)(()=>s.customInstrumentsListFormat),fetchInstruments:s.fetchInstruments,documentSettingsParams:(0,e.EW)(()=>n.documentSettingsParams),parts:(0,e.EW)(()=>n.parts),loadDocumentSettings:n.loadDocumentSettings,addExperience:r.addExperience,displayError:d.displayError}},computed:{plusIcon:()=>Ms.A,instrumentsLocale(){const t=ks.A.getInstrumentsLocales(),s=this.account.locale;return t.includes(s)?s:"en"},editingPart(){return this.editing?this.parts.find(t=>t.uuid===this.editing):null},replacingPart(){return this.replacing?this.parts.find(t=>t.uuid===this.replacing):null},editingPartName(){var t;return this.editingPart?(t=this.editingPart)!=null&&t.name&&this.editingPart.name.length>0?this.editingPart.name:"Part":null},enabledFeatureCustomLayout(){return this.accountFeatures.customLayout},canRemoveParts(){return this.parts.length>1}},watch:{},data(){return{mode:null,processing:!1,editingBrackets:!1,adding:!1,editing:null,replacing:null,deleting:null}},methods:k2(O2({},(0,A.i0)(ut.B,["showUpgradeDialog"])),{setMode(t){this.mode=t,this.editing=null,this.replacing=null},startEditing(t){this.setMode("edit"),this.editing=t.uuid||t,this.addExperience("editor.part.trigger-edit")},startReplacing(t){this.setMode("replace"),this.replacing=t.uuid},toggleEditBrackets(){if(!this.enabledFeatureCustomLayout){this.showUpgradeDialog({feature:"customLayout"});return}this.editingBrackets=!this.editingBrackets},close(){this.loadDocumentSettings(null)},logError(t){this.scoreData.logError(t)},doAction(t){return Vt(this,null,function*(){if(!this.processing){this.processing=!0;try{yield t()}catch(s){throw this.processing=!1,this.logError(s),this.displayError({error:s}),s}this.processing=!1}})},addInstrument(t){return Vt(this,arguments,function*({group:s,instrument:n}){this.addingInstrument(),yield this.doAction(()=>Vt(this,null,function*(){if(s==="custom"){let r=this.customInstrumentsListFormat.custom[n];if(!r)throw this.addedInstrument(),new Error(`Config for instrument ${n} not found`);r.mapping?(r=ks.A.buildUnpitchedPart({instrument:r}),r.partIdx=this.scoreData.adagioData.getNbParts(),yield this.scoreData.scoreActions.executePublicAction("addCustomUnpitchedPart",r)):(r=ks.A.buildPitchedPart({instrument:r,layout:"tabs"}),S2(r),r.partIdx=this.scoreData.adagioData.getNbParts(),yield this.scoreData.scoreActions.executePublicAction("addCustomPitchedPart",r))}else yield this.scoreData.scoreActions.executePublicAction("addPartFromTemplate",{groupName:s,instrumentName:n,locale:this.instrumentsLocale});this.addedInstrument()}))})},addingInstrument(){this.adding=!0,this.setMode(null)},addedInstrument(){this.adding=!1},replaceInstrument(t){return Vt(this,arguments,function*({group:s,instrument:n}){yield this.doAction(()=>Vt(this,null,function*(){if(s==="custom"){let r=this.customInstrumentsListFormat.custom[n];r=ks.A.buildPitchedPart({instrument:r,layout:"tabs"}),P2(r),r.partUuid=this.replacing,yield this.scoreData.scoreActions.executePublicAction("changeInstrumentCustom",r)}else yield this.scoreData.scoreActions.executePublicAction("changeInstrumentFromTemplate",{partUuid:this.replacing,groupName:s,instrumentName:n,locale:this.instrumentsLocale});this.setMode(null)}))})},removeInstrument(t){return Vt(this,null,function*(){return this.doAction(()=>Vt(this,null,function*(){yield this.scoreData.scoreActions.executePublicAction("removePart",{partUuid:t.uuid}),this.setMode(),this.deleting=null}))})}}),created(){return Vt(this,null,function*(){var t,s;(t=this.account.experience)!=null&&t.includes("instruments.beta")&&ks.A.showBetaInstruments(!0),this.instrumentsData=ks.A.get({locale:this.instrumentsLocale}),(s=this.documentSettingsParams)!=null&&s.partUuid&&this.startEditing(this.documentSettingsParams.partUuid),yield this.fetchInstruments()})}};var w2=o(925840),I2=o.n(w2);const _r={};_r.$style=I2();const R2={name:"ScoreEditorInstruments",components:{ScoreEditorDocMobHeader:yn,ScoreEditorInstrumentsTab:(0,k.A)(x2,[["render",g1],["__cssModules",_r]]),ScoreEditorCustomTab:Gy,Tab:xo.o,TabItem:xo.V},props:{scoreData:{type:Object,required:!0}},setup(){const t=(0,Pe.N)(),s=(0,N.q6)();return{displayMobileEditor:(0,e.EW)(()=>t.displayMobileEditor),loadDocumentSettings:s.loadDocumentSettings}},data(){return{InstrumentsPage:Dy(),activeTab:Ba}},methods:{changeTab(t){t!==this.activeTab&&(this.activeTab=t)},close(){this.loadDocumentSettings(null)}}};var F2=o(822589),W2=o.n(F2);const pr={};pr.$style=W2();const U2=(0,k.A)(R2,[["render",Ay],["__cssModules",pr]]),B2={key:1,class:"ds-settings-title"};function j2(t,s,n,r,d,a){const f=(0,e.g2)("score-editor-doc-mob-header"),h=(0,e.g2)("tab-item"),u=(0,e.g2)("tab"),g=(0,e.g2)("layout-settings"),b=(0,e.g2)("layout-templates"),P=(0,e.g2)("noteheads-layout"),F=(0,e.g2)("jazz-chord-layout");return a.displayMainUi?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,l.C4)(["ds-settings-wrap",{[t.$style.root]:!0,[t.$style.mobileWrap]:r.displayMobileEditor}])},[r.displayMobileEditor?((0,e.uX)(),(0,e.Wv)(f,{key:0,headerText:t.$t("flat:score.layout.title"),onClose:s[0]||(s[0]=S=>a.close())},null,8,["headerText"])):((0,e.uX)(),(0,e.CE)("div",B2,(0,l.v_)(t.$t("flat:score.layout.title")),1)),(0,e.bF)(u,{class:"nav-tabs"},{default:(0,e.k6)(()=>[(0,e.bF)(h,{active:t.page===t.LayoutPage.SETTINGS,onClick:s[1]||(s[1]=S=>a.openPage(t.LayoutPage.SETTINGS))},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:score.layout.top-nav.settings")),1)]),_:1},8,["active"]),(0,e.bF)(h,{active:t.page===t.LayoutPage.TEMPLATES,onClick:s[2]||(s[2]=S=>a.openPage(t.LayoutPage.TEMPLATES))},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:score.layout.top-nav.templates")),1)]),_:1},8,["active"])]),_:1}),t.page===t.LayoutPage.SETTINGS?((0,e.uX)(),(0,e.Wv)(g,{key:2,class:(0,l.C4)({[t.$style.layoutSettings]:!0}),"score-data":n.scoreData,processing:t.processing,configs:t.configs,"can-save":a.areFeaturesAvailable,onOpenPage:s[3]||(s[3]=S=>a.openPage(S)),onPreviewScore:s[4]||(s[4]=S=>a.previewScore(S)),onSetProcessing:s[5]||(s[5]=S=>a.setProcessing(S)),onSetInitialConfig:s[6]||(s[6]=S=>a.setInitialConfig(S)),onNotifyChange:s[7]||(s[7]=S=>a.notifyChange(S)),onSaveLayoutItems:s[8]||(s[8]=S=>a.saveLayoutItems(S)),onCancelEditedLayout:a.cancelEditedLayout},null,8,["class","score-data","processing","configs","can-save","onCancelEditedLayout"])):(0,e.Q3)("",!0),t.page===t.LayoutPage.TEMPLATES?((0,e.uX)(),(0,e.Wv)(b,{key:3,"score-data":n.scoreData,processing:t.processing,onPreviewScore:s[9]||(s[9]=S=>a.previewScore(S)),onSetProcessing:s[10]||(s[10]=S=>a.setProcessing(S)),onCancelEditedLayout:a.cancelEditedLayout},null,8,["score-data","processing","onCancelEditedLayout"])):(0,e.Q3)("",!0)],2)):t.page===t.LayoutPage.NOTE_HEADS?((0,e.uX)(),(0,e.Wv)(P,{key:1,"score-data":n.scoreData,"provided-config":t.configs[t.LayoutPage.NOTE_HEADS],"display-preview":n.displayPreview,onSetInitialConfig:s[11]||(s[11]=S=>a.setInitialConfig(S)),onNotifyChange:s[12]||(s[12]=S=>a.notifyChange(S)),onBackToAllLayouts:a.backToSettings},null,8,["score-data","provided-config","display-preview","onBackToAllLayouts"])):t.page===t.LayoutPage.JAZZ_CHORDS?((0,e.uX)(),(0,e.Wv)(F,{key:2,"score-data":n.scoreData,"provided-config":t.configs[t.LayoutPage.JAZZ_CHORDS],onSetInitialConfig:s[13]||(s[13]=S=>a.setInitialConfig(S)),onNotifyChange:s[14]||(s[14]=S=>a.notifyChange(S)),onBackToAllLayouts:a.backToSettings},null,8,["score-data","provided-config","onBackToAllLayouts"])):(0,e.Q3)("",!0)}var Ue=o(911066),Oe=o(567653);const is="pages",ws="staves",Is="hide-parts",Rs="measures",Fs="measure-numbers",Ws="music-font",Us="text-styles";function x5(){return{PAGES:is,STAVES:ws,HIDE_PARTS:Is,MEASURES:Rs,MEASURE_NUMBERS:Fs,MUSIC_FONT:Ws,TEXT_STYLES:Us}}const K2=o.p+"img/1dd032fcd00242ae6b2a.svg",N2=o.p+"img/1fe315252343f0fd856b.svg",X2=o.p+"img/a195cdae13350dd495bc.svg",$2=o.p+"img/f94cec47fe6ec17b5988.svg",z2=o.p+"img/6bb77da68e742d52b58c.svg",H2=o.p+"img/21652256145d9c3397ca.svg",V2=o.p+"img/593af8faf4b2dbcffb2f.svg",Q2={class:"main-description"},G2={class:"cardsChoices"},J2={class:"cardsChoices"},Y2={class:"cardsChoices"};function Z2(t,s,n,r,d,a){const f=(0,e.g2)("arrowBackIcon"),h=(0,e.g2)("power-badge-icon"),u=(0,e.g2)("f-button");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(["ds-settings-wrap",t.localStyle.root])},[(0,e.Lk)("header",{class:(0,l.C4)(t.$style["settings-header"])},[(0,e.Lk)("button",{class:(0,l.C4)(t.$style["go-back"]),onClick:s[0]||(s[0]=(...g)=>a.back&&a.back(...g))},[(0,e.bF)(f)],2),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.jazzChord.title")),1),a.enabledFeatureCustomLayout?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(h,{key:0,class:(0,l.C4)(t.$style["power-badge"])},null,8,["class"]))],2),(0,e.Lk)("div",{class:(0,l.C4)(["ds-settings-card ds-layout no-select",t.localStyle.card])},[(0,e.Lk)("div",{class:(0,l.C4)(t.localStyle.scrollable)},[(0,e.Lk)("p",Q2,(0,l.v_)(t.$t("flat:score.layout.jazzChord.description-long")),1),(0,e.Lk)("h3",null,(0,l.v_)(t.$t("flat:score.layout.jazzChord.minor.title")),1),(0,e.Lk)("div",G2,[(0,e.Lk)("div",{onClick:s[1]||(s[1]=g=>a.setChordPartDisplay(t.ChordPartType.MINOR,t.ChordPartValue.LOWER_CASE)),class:(0,l.C4)(["cardChoice",{active:a.isActive(t.ChordPartType.MINOR,t.ChordPartValue.LOWER_CASE)}])},[s[8]||(s[8]=(0,e.Lk)("img",{src:K2},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.jazzChord.minor.text")),1)],2),(0,e.Lk)("div",{onClick:s[2]||(s[2]=g=>a.setChordPartDisplay(t.ChordPartType.MINOR,t.ChordPartValue.SYMBOL)),class:(0,l.C4)(["cardChoice",{active:a.isActive(t.ChordPartType.MINOR,t.ChordPartValue.SYMBOL)}])},[s[9]||(s[9]=(0,e.Lk)("img",{src:N2},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.jazzChord.minor.symbol")),1)],2)]),(0,e.Lk)("h3",null,(0,l.v_)(t.$t("flat:score.layout.jazzChord.major.title")),1),(0,e.Lk)("div",J2,[(0,e.Lk)("div",{onClick:s[3]||(s[3]=g=>a.setChordPartDisplay(t.ChordPartType.MAJOR,t.ChordPartValue.LOWER_CASE_LONG)),class:(0,l.C4)(["cardChoice",{active:a.isActive(t.ChordPartType.MAJOR,t.ChordPartValue.LOWER_CASE_LONG)}])},[s[10]||(s[10]=(0,e.Lk)("img",{src:X2},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.jazzChord.major.text-lower-case")),1)],2),(0,e.Lk)("div",{onClick:s[4]||(s[4]=g=>a.setChordPartDisplay(t.ChordPartType.MAJOR,t.ChordPartValue.UPPER_CASE)),class:(0,l.C4)(["cardChoice",{active:a.isActive(t.ChordPartType.MAJOR,t.ChordPartValue.UPPER_CASE)}])},[s[11]||(s[11]=(0,e.Lk)("img",{src:$2},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.jazzChord.major.text-upper-case")),1)],2),(0,e.Lk)("div",{onClick:s[5]||(s[5]=g=>a.setChordPartDisplay(t.ChordPartType.MAJOR,t.ChordPartValue.SYMBOL)),class:(0,l.C4)(["cardChoice",{active:a.isActive(t.ChordPartType.MAJOR,t.ChordPartValue.SYMBOL)}])},[s[12]||(s[12]=(0,e.Lk)("img",{src:z2},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.jazzChord.major.symbol")),1)],2)]),(0,e.Lk)("h3",null,(0,l.v_)(t.$t("flat:score.layout.jazzChord.diminished.title")),1),(0,e.Lk)("div",Y2,[(0,e.Lk)("div",{onClick:s[6]||(s[6]=g=>a.setChordPartDisplay(t.ChordPartType.DIMINISHED,t.ChordPartValue.SYMBOL)),class:(0,l.C4)(["cardChoice",{active:a.isActive(t.ChordPartType.DIMINISHED,t.ChordPartValue.SYMBOL)}])},[s[13]||(s[13]=(0,e.Lk)("img",{src:H2},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.jazzChord.diminished.symbol")),1)],2),(0,e.Lk)("div",{onClick:s[7]||(s[7]=g=>a.setChordPartDisplay(t.ChordPartType.DIMINISHED,t.ChordPartValue.LOWER_CASE_LONG)),class:(0,l.C4)(["cardChoice",{active:a.isActive(t.ChordPartType.DIMINISHED,t.ChordPartValue.LOWER_CASE_LONG)}])},[s[14]||(s[14]=(0,e.Lk)("img",{src:V2},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.jazzChord.diminished.text")),1)],2)])],2),(0,e.Lk)("div",{class:(0,l.C4)(["ctas",t.localStyle.ctas])},[(0,e.bF)(u,{onClick:a.back,size:"large","default-text":"flat:back"},null,8,["onClick"])],2)],2)],2)}var q2=o(659140),eC=o(996636);const Ln="settings",Qt="jazz-chords",Gt="note-heads",An="templates";function mr(){return{SETTINGS:Ln,JAZZ_CHORDS:Qt,NOTE_HEADS:Gt,TEMPLATES:An}}var tC=Object.defineProperty,sC=Object.defineProperties,oC=Object.getOwnPropertyDescriptors,gr=Object.getOwnPropertySymbols,nC=Object.prototype.hasOwnProperty,iC=Object.prototype.propertyIsEnumerable,fr=(t,s,n)=>s in t?tC(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Mn=(t,s)=>{for(var n in s||(s={}))nC.call(s,n)&&fr(t,n,s[n]);if(gr)for(var n of gr(s))iC.call(s,n)&&fr(t,n,s[n]);return t},aC=(t,s)=>sC(t,oC(s));const rC={name:"JazzChordLayout",emits:["notifyChange","backToAllLayouts","setInitialConfig"],props:{scoreData:{type:Object,required:!0},providedConfig:{type:Object,default:null}},setup(){const t=(0,fe.F)();return{account:(0,e.EW)(()=>t.account),accountFeatures:(0,e.EW)(()=>t.accountFeatures)}},data(){return{ChordPartType:q2.A.getObject(),ChordPartValue:eC.A.getObject(),jazzChordDisplay:{}}},components:{arrowBackIcon:no.A,PowerBadgeIcon:Pt.default},computed:{adagioData(){return this.scoreData.adagioData},enabledFeatureCustomLayout(){return this.accountFeatures.customLayout}},methods:aC(Mn({},(0,A.i0)(ut.B,["showUpgradeDialog"])),{isActive(t,s){return this.jazzChordDisplay[t]===s},setChordPartDisplay(t,s){this.jazzChordDisplay[t]=s,this.scheduleUpdatePreview()},scheduleUpdatePreview(){(0,e.dY)(()=>this.updatePreview())},updatePreview(){const t=Mn({},this.jazzChordDisplay);this.$emit("notifyChange",{key:Qt,config:t})},back(){this.$emit("backToAllLayouts")},getConfigFromScore(){return this.adagioData.getJazzChordPartConfigOrDefault()},applyConfigLocally(t){this.jazzChordDisplay=Mn({},t)}}),created(){const t=this.getConfigFromScore();this.providedConfig?this.applyConfigLocally(this.providedConfig):this.applyConfigLocally(t),this.$emit("setInitialConfig",{key:Qt,initialConfig:t})}};var lC=o(400485),hr=o.n(lC),dC=o(815442),cC=o.n(dC);const Dn={};Dn.$style=hr(),Dn.localStyle=cC();const uC=(0,k.A)(rC,[["render",Z2],["__cssModules",Dn]]),_C=o.p+"img/d4dd81ab5b3e84ac8112.svg",pC={class:"ds-settings-card ds-layout no-select layout-settings"},mC={key:0,class:"choice-method power-upgrade"},gC={class:"name"},fC={class:"power-upgrade-content"},hC={class:"power-desc"},vC={class:"power-desc"};function yC(t,s,n,r,d,a){const f=(0,e.g2)("spacing"),h=(0,e.g2)("f-power-button"),u=(0,e.g2)("pages-layout"),g=(0,e.g2)("ChoiceMethodAccordion"),b=(0,e.g2)("staves-layout"),P=(0,e.g2)("hide-empty-parts-layout"),F=(0,e.g2)("measures-layout"),S=(0,e.g2)("measures-numbers-layout"),H=(0,e.g2)("music-font-layout"),I=(0,e.g2)("text-font-layout"),Y=(0,e.g2)("f-button"),Z=(0,e.g2)("f-button-group"),Fe=(0,e.g2)("plus"),dt=(0,e.g2)("create-layout"),Ve=(0,e.g2)("layout-created");return(0,e.uX)(),(0,e.CE)("div",pC,[(0,e.Lk)("div",{class:(0,l.C4)({[t.$style.layoutItems]:!0,[t.$style.musicSnippetOrder]:t.isMusicSnippet})},[t.enabledFeatureCustomLayout?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",mC,[(0,e.Lk)("div",gC,(0,l.v_)(t.$t("flat:freemium.custom-layout-title")),1),(0,e.Lk)("div",fC,[s[29]||(s[29]=(0,e.Lk)("img",{src:_C},null,-1)),(0,e.Lk)("div",null,[(0,e.Lk)("p",hC,(0,l.v_)(t.$t("flat:freemium.upgrade-custom-layout-feature")),1),(0,e.Lk)("p",vC,(0,l.v_)(t.$t("flat:freemium.upgrade-today-more")),1)]),(0,e.bF)(f,{spacing:16,direction:"horizontal"}),(0,e.bF)(h,{onClick:s[0]||(s[0]=oe=>t.showUpgradeDialog({feature:"customLayout"})),"show-icon":!1,"default-text":"flat:upgrade.upgrade-cta"})])])),(0,e.bF)(g,{"is-open":t.selectedLayout===t.EditedLayout.PAGES,onOnOpen:s[3]||(s[3]=oe=>t.toggleEditedLayoutItem(t.EditedLayout.PAGES,!0)),"data-cy":"layout-pages-open"},{header:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,l.C4)(t.$style["choice-method-header"])},[((0,e.uX)(),(0,e.CE)("svg",{inline:"",class:(0,l.C4)(t.$style["edit-icon"]),xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},s[30]||(s[30]=[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h48v48H0z"}),(0,e.Lk)("g",{stroke:"#268FF4",class:"stroke",transform:"translate(15 13)"},[(0,e.Lk)("rect",{width:"17",height:"21",x:".5",y:".5",rx:"2"}),(0,e.Lk)("path",{"stroke-linecap":"square",d:"M.692 3.462h16.616M3.462.692v20.77M14.538.692v20.77M.692 18.5h16.616"})])],-1)]),2)),(0,e.Lk)("div",null,[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.name)},(0,l.v_)(t.$t("flat:score.layout.pages.title")),3),(0,e.Lk)("div",{class:(0,l.C4)([t.$style.description,"description"])},(0,l.v_)(t.$t("flat:score.layout.pages.description")),3)])],2)]),default:(0,e.k6)(()=>[((0,e.uX)(),(0,e.Wv)(u,{key:t.updateKey,"score-data":t.scoreData,"provided-config":t.configs[t.EditedLayout.PAGES],onSetInitialConfig:s[1]||(s[1]=oe=>t.setInitialConfig(oe)),onNotifyChange:s[2]||(s[2]=oe=>t.notifyChange(oe))},null,8,["score-data","provided-config"]))]),_:1},8,["is-open"]),(0,e.bF)(g,{"is-open":t.selectedLayout===t.EditedLayout.STAVES,onOnOpen:s[6]||(s[6]=oe=>t.toggleEditedLayoutItem(t.EditedLayout.STAVES,!0)),"data-cy":"layout-staves-open"},{header:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,l.C4)(t.$style["choice-method-header"])},[((0,e.uX)(),(0,e.CE)("svg",{inline:"",class:(0,l.C4)(t.$style["edit-icon"]),xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},s[31]||(s[31]=[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h48v48H0z"}),(0,e.Lk)("g",{stroke:"#3B99FC",class:"stroke"},[(0,e.Lk)("path",{"stroke-linecap":"square",d:"M15.5 19.5h17m-17 4h17m-17 4h17"}),(0,e.Lk)("path",{d:"M15.5 15.5h17v16h-17z"}),(0,e.Lk)("path",{"stroke-linecap":"square",d:"M28.5 15.5v16m3-16v16"})])],-1)]),2)),(0,e.Lk)("div",null,[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.name)},(0,l.v_)(t.$t("flat:score.layout.staves.title")),3),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.description)},(0,l.v_)(t.$t("flat:score.layout.staves.description")),3)])],2)]),default:(0,e.k6)(()=>[((0,e.uX)(),(0,e.Wv)(b,{key:t.updateKey,"score-data":t.scoreData,"provided-config":t.configs[t.EditedLayout.STAVES],onSetInitialConfig:s[4]||(s[4]=oe=>t.setInitialConfig(oe)),onNotifyChange:s[5]||(s[5]=oe=>t.notifyChange(oe))},null,8,["score-data","provided-config"]))]),_:1},8,["is-open"]),(0,e.bF)(g,{"is-open":t.selectedLayout===t.EditedLayout.HIDE_PARTS,onOnOpen:s[9]||(s[9]=oe=>t.toggleEditedLayoutItem(t.EditedLayout.HIDE_PARTS,!0)),"data-cy":"layout-hideInstruments-open"},{header:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,l.C4)(t.$style["choice-method-header"])},[((0,e.uX)(),(0,e.CE)("svg",{inline:"",class:(0,l.C4)(t.$style["edit-icon"]),xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},s[32]||(s[32]=[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h48v48H0z"}),(0,e.Lk)("g",{stroke:"#3B99FC",class:"stroke"},[(0,e.Lk)("path",{"stroke-linecap":"square",d:"M15.5 19.5h17m-17 4h17m-17 4h17"}),(0,e.Lk)("path",{d:"M15.5 15.5h17v16h-17z"}),(0,e.Lk)("path",{"stroke-linecap":"square",d:"M28.5 15.5v16m3-16v16"})])],-1)]),2)),(0,e.Lk)("div",null,[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.name)},(0,l.v_)(t.$t("flat:score.layout.hide-empty-parts.title")),3),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.description)},(0,l.v_)(t.$t("flat:score.layout.hide-empty-parts.short-description")),3)])],2)]),default:(0,e.k6)(()=>[((0,e.uX)(),(0,e.Wv)(P,{key:t.updateKey,"score-data":t.scoreData,"provided-config":t.configs[t.EditedLayout.HIDE_PARTS],onSetInitialConfig:s[7]||(s[7]=oe=>t.setInitialConfig(oe)),onNotifyChange:s[8]||(s[8]=oe=>t.notifyChange(oe))},null,8,["score-data","provided-config"]))]),_:1},8,["is-open"]),(0,e.bF)(g,{"is-open":t.selectedLayout===t.EditedLayout.MEASURES,onOnOpen:s[12]||(s[12]=oe=>t.toggleEditedLayoutItem(t.EditedLayout.MEASURES,!0)),"data-cy":"layout-measures-open"},{header:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,l.C4)(t.$style["choice-method-header"])},[((0,e.uX)(),(0,e.CE)("svg",{inline:"",class:(0,l.C4)(t.$style["edit-icon"]),xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},s[33]||(s[33]=[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h48v48H0z"}),(0,e.Lk)("g",{stroke:"#3B99FC",class:"stroke"},[(0,e.Lk)("path",{"stroke-linecap":"square",d:"M15.5 19.5h17m-17 4h17m-17 4h17"}),(0,e.Lk)("path",{d:"M15.5 15.5h17v16h-17z"}),(0,e.Lk)("path",{"stroke-linecap":"square",d:"M22.5 20.5h3"})])],-1)]),2)),(0,e.Lk)("div",null,[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.name)},(0,l.v_)(t.$t("flat:score.layout.measures.title")),3),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.description)},(0,l.v_)(t.$t("flat:score.layout.measures.description")),3)])],2)]),default:(0,e.k6)(()=>[((0,e.uX)(),(0,e.Wv)(F,{key:t.updateKey,"score-data":t.scoreData,"provided-config":t.configs[t.EditedLayout.MEASURES],onSetInitialConfig:s[10]||(s[10]=oe=>t.setInitialConfig(oe)),onNotifyChange:s[11]||(s[11]=oe=>t.notifyChange(oe))},null,8,["score-data","provided-config"]))]),_:1},8,["is-open"]),(0,e.bF)(g,{"is-open":t.selectedLayout===t.EditedLayout.MEASURE_NUMBERS,onOnOpen:s[15]||(s[15]=oe=>t.toggleEditedLayoutItem(t.EditedLayout.MEASURE_NUMBERS,!0)),"data-cy":"layout-measureNumbers-open"},{header:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,l.C4)(t.$style["choice-method-header"])},[((0,e.uX)(),(0,e.CE)("svg",{inline:"",class:(0,l.C4)(t.$style["edit-icon"]),xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},s[34]||(s[34]=[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h48v48H0z"}),(0,e.Lk)("path",{stroke:"#3B99FC",class:"stroke","stroke-linecap":"square",d:"M15.5 27.5h17m0-2v4m-1-4v4m-2-4v4m-14-4v4"}),(0,e.Lk)("path",{class:"fill",fill:"#3B99FC",d:"M19.997 23.668h-.774V25h-1.327v-1.332h-2.742v-.944l2.817-4.149h1.252v4.039h.774v1.054zm-2.101-1.054v-1.09c0-.182.007-.445.022-.791a9.54 9.54 0 0 1 .035-.602h-.035a4.9 4.9 0 0 1-.391.703l-1.178 1.78h1.547zM25.439 25h-4.491v-.945l1.612-1.63c.478-.49.79-.829.936-1.018.147-.188.252-.364.317-.525.064-.16.096-.328.096-.5 0-.258-.07-.45-.213-.576-.142-.126-.331-.19-.569-.19-.249 0-.49.058-.725.172a3.742 3.742 0 0 0-.734.488l-.738-.875c.316-.27.579-.46.787-.57.208-.112.435-.198.68-.258.247-.06.522-.09.827-.09.401 0 .756.073 1.063.22.308.146.547.351.717.615.17.264.255.565.255.905 0 .296-.052.574-.156.833-.104.26-.266.525-.484.798-.218.272-.603.66-1.153 1.164l-.827.778v.061h2.8V25z"})],-1)]),2)),(0,e.Lk)("div",null,[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.name)},(0,l.v_)(t.$t("flat:score.layout.measuresNumbers.title")),3),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.description)},(0,l.v_)(t.$t("flat:score.layout.measuresNumbers.description")),3)])],2)]),default:(0,e.k6)(()=>[((0,e.uX)(),(0,e.Wv)(S,{key:t.updateKey,"score-data":t.scoreData,"provided-config":t.configs[t.EditedLayout.MEASURE_NUMBERS],onSetInitialConfig:s[13]||(s[13]=oe=>t.setInitialConfig(oe)),onNotifyChange:s[14]||(s[14]=oe=>t.notifyChange(oe))},null,8,["score-data","provided-config"]))]),_:1},8,["is-open"]),(0,e.bF)(g,{onOnOpen:s[16]||(s[16]=oe=>t.openPage(t.LayoutPage.NOTE_HEADS)),"data-cy":"layout-noteheads-open"},{header:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,l.C4)(t.$style["choice-method-header"])},[((0,e.uX)(),(0,e.CE)("svg",{inline:"",class:(0,l.C4)(t.$style["edit-icon"]),xmlns:"http://www.w3.org/2000/svg",width:"48",height:"42",viewBox:"0 0 48 42"},s[35]||(s[35]=[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h48v42H0z"}),(0,e.Lk)("path",{fill:"#FFEB3B",d:"M15 24h6v6h-6z"}),(0,e.Lk)("path",{fill:"#FF9800",d:"M21 24h6v6h-6z"}),(0,e.Lk)("path",{fill:"#FF5722",d:"M27 24h6v6h-6z"}),(0,e.Lk)("path",{fill:"#00BCD4",d:"M27 18h6v6h-6z"}),(0,e.Lk)("path",{fill:"#03A9F4",d:"M21 18h6v6h-6z"}),(0,e.Lk)("path",{fill:"#2196F3",d:"M15 18h6v6h-6z"}),(0,e.Lk)("path",{fill:"#E91E63",d:"M15 12h6v6h-6z"}),(0,e.Lk)("path",{fill:"#9C27B0",d:"M21 12h6v6h-6z"}),(0,e.Lk)("path",{fill:"#673AB7",d:"M27 12h6v6h-6z"})],-1)]),2)),(0,e.Lk)("div",null,[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.name)},(0,l.v_)(t.$t("flat:score.layout.notesHeads.title")),3),(0,e.Lk)("div",{class:(0,l.C4)([t.$style.description,"description"])},(0,l.v_)(t.$t("flat:score.layout.notesHeads.description")),3)])],2)]),_:1}),(0,e.bF)(g,{"is-open":t.selectedLayout===t.EditedLayout.MUSIC_FONT,onOnOpen:s[19]||(s[19]=oe=>t.toggleEditedLayoutItem(t.EditedLayout.MUSIC_FONT,!0)),"data-cy":"layout-musicFonts-open"},{header:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,l.C4)(t.$style["choice-method-header"])},[((0,e.uX)(),(0,e.CE)("svg",{inline:"",class:(0,l.C4)(t.$style["edit-icon"]),xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},s[36]||(s[36]=[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h48v48H0z"}),(0,e.Lk)("path",{fill:"#3B99FC",class:"fill","fill-rule":"nonzero",d:"M22.584 35.615a1.056 1.056 0 0 0 .693-.331 6.083 6.083 0 0 0 1.356-2.154 7.87 7.87 0 0 0 .451-2.5c0-.07.005-.146.015-.226v-.136c.01 0 .05-.02.121-.06.07-.04.13-.07.18-.09.252-.12.498-.251.739-.392.23-.14.457-.296.677-.467a5.582 5.582 0 0 0 1.37-1.596c.342-.613.591-1.272.739-1.958.03-.11.05-.221.06-.331.01-.11.015-.221.015-.332 0-.482-.135-.883-.407-1.204-.28-.322-.722-.543-1.325-.663-.297-.06-.6-.09-.903-.09-.753 0-1.471.2-2.154.602a.354.354 0 0 0-.12.075l-.06.03-.392-1.46a.56.56 0 0 1-.015-.136v-.075c.06-.08.326-.593.798-1.537.472-.943.788-1.807.948-2.59.07-.412.106-.818.106-1.22 0-.311-.02-.617-.06-.918-.08-.54-.201-1.075-.362-1.597-.169-.518-.325-1.04-.466-1.566a1.436 1.436 0 0 0-.166-.467c-.07-.14-.196-.216-.377-.226a.64.64 0 0 0-.361.15c-.1.1-.191.211-.271.332a6.36 6.36 0 0 0-.874 1.702 8.012 8.012 0 0 0-.346 1.897c-.038.82-.003 1.641.106 2.455.07.613.15 1.22.24 1.823 0 .05.005.095.015.135l.03.12c-.34.48-.691.953-1.054 1.416-.352.474-.694.956-1.024 1.446-.23.352-.457.708-.677 1.07a6.838 6.838 0 0 0-.588 1.144A3.343 3.343 0 0 0 19 26.985c0 .472.075.924.226 1.355.15.433.361.784.633 1.055.16.15.356.3.587.452.226.148.469.27.723.361.341.13.687.231 1.039.301a4.854 4.854 0 0 0 1.747.076l.18-.03v.075c.01.044.01.09 0 .135-.079.45-.19.892-.33 1.326a4.761 4.761 0 0 1-.603 1.22c-.14.2-.291.391-.452.572a1.09 1.09 0 0 1-.677.301.3.3 0 0 0-.181.076.28.28 0 0 0-.06.18c0 .03.004.055.014.075 0 .03.006.06.015.09.05.111.101.227.151.347.05.12.1.236.15.347.101.21.242.316.423.316zm.708-6.747a4.854 4.854 0 0 1-.723-.075c-.2-.03-.306-.05-.316-.06l-.015-.151a1.732 1.732 0 0 1-.03-.362c0-.1.005-.206.015-.316.01-.12.03-.241.06-.361.074-.348.229-.673.452-.95.228-.277.48-.534.753-.768.05-.05.09-.075.12-.075s.05.015.06.045c.01.03.02.07.03.12.071.443.151.885.242 1.326.08.442.14.884.18 1.326.01.05.01.1 0 .15v.076c-.01 0-.095.014-.255.045-.161.03-.352.04-.573.03zm-1.656-.256a1.6 1.6 0 0 1-.302-.06 9.923 9.923 0 0 0-.286-.09 3.774 3.774 0 0 1-.527-.227.702.702 0 0 1-.301-.316 1.231 1.231 0 0 1-.06-.392c.001-.177.022-.354.06-.527a1.873 1.873 0 0 1 .135-.391c.29-.521.613-1.024.964-1.506.345-.486.701-.963 1.07-1.431l.632-.829.106.332c.06.2.115.412.165.633.04.21.06.326.06.346-.01.02-.09.12-.24.301-.151.19-.302.361-.452.512a3.861 3.861 0 0 0-.844 1.235 3.817 3.817 0 0 0-.27 1.43c0 .252.024.513.075.784.01.03.014.06.014.09v.106zm3.313-.045l-.06-.422a13.38 13.38 0 0 0-.241-1.37c-.104-.448-.21-.895-.316-1.341a.308.308 0 0 1 0-.135c0-.04.01-.076.03-.106.193-.04.39-.066.587-.075a5.395 5.395 0 0 1 1.13 0c.18.01.366.035.557.075.23.04.451.096.662.166.221.07.417.19.588.361.03.03.06.055.09.075a6.03 6.03 0 0 1-1.13 1.582 5.486 5.486 0 0 1-1.626 1.084l-.271.106zm-1.762-8.871c-.06-.355-.105-.711-.136-1.07a9.678 9.678 0 0 1-.06-1.069c0-.652.075-1.3.226-1.943.16-.632.432-1.255.813-1.867a5.39 5.39 0 0 1 .196 2.575c-.09.593-.216 1.17-.377 1.732a8.516 8.516 0 0 1-.662 1.642z"})],-1)]),2)),(0,e.Lk)("div",null,[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.name)},(0,l.v_)(t.$t("flat:score.layout.musicFont.title")),3),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.description)},(0,l.v_)(t.$t("flat:score.layout.musicFont.description")),3)])],2)]),default:(0,e.k6)(()=>[((0,e.uX)(),(0,e.Wv)(H,{key:t.updateKey,"score-data":t.scoreData,"provided-config":t.configs[t.EditedLayout.MUSIC_FONT],onSetInitialConfig:s[17]||(s[17]=oe=>t.setInitialConfig(oe)),onNotifyChange:s[18]||(s[18]=oe=>t.notifyChange(oe))},null,8,["score-data","provided-config"]))]),_:1},8,["is-open"]),(0,e.bF)(g,{onOnOpen:s[20]||(s[20]=oe=>t.openPage(t.LayoutPage.JAZZ_CHORDS)),"data-cy":"layout-jazzChords-open"},{header:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,l.C4)(t.$style["choice-method-header"])},[((0,e.uX)(),(0,e.CE)("svg",{inline:"",class:(0,l.C4)(t.$style["edit-icon"]),width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg"},s[37]||(s[37]=[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h48v48H0z"}),(0,e.Lk)("g",{fill:"#3B99FC",class:"fill","font-family":"Helvetica"},[(0,e.Lk)("text",{"font-size":"23.15",transform:"translate(10 10)"},[(0,e.Lk)("tspan",{x:".532",y:"23.425"},"C")]),(0,e.Lk)("text",{"font-size":"16.205",transform:"translate(10 10)"},[(0,e.Lk)("tspan",{x:"17.232",y:"15.323"},"7")])])],-1)]),2)),(0,e.Lk)("div",null,[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.name)},(0,l.v_)(t.$t("flat:score.layout.chords.title")),3),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.description)},(0,l.v_)(t.$t("flat:score.layout.chords.description")),3)])],2)]),_:1}),(0,e.bF)(g,{"is-open":t.selectedLayout===t.EditedLayout.TEXT_STYLES,onOnOpen:s[23]||(s[23]=oe=>t.toggleEditedLayoutItem(t.EditedLayout.TEXT_STYLES,!0)),"data-cy":"layout-textFonts-open",ref:"text-styles"},{header:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,l.C4)(t.$style["choice-method-header"])},[((0,e.uX)(),(0,e.CE)("svg",{inline:"",class:(0,l.C4)(t.$style["edit-icon"]),xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48"},s[38]||(s[38]=[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h48v48H0z"}),(0,e.Lk)("g",{class:"fill",fill:"#3B99FC","fill-rule":"nonzero"},[(0,e.Lk)("path",{d:"M18.28 19.64H14V17h11.7v2.64h-4.28V30.5h-3.14z"}),(0,e.Lk)("path",{d:"M34.4 23.775h-.527a5.956 5.956 0 0 0-.68-1.333c-.312-.474-.6-.729-.865-.765a9.187 9.187 0 0 0-.54-.048 8.866 8.866 0 0 0-.554-.02h-.32v7.608c0 .164.029.309.088.434.06.125.175.224.349.297.104.041.267.083.488.127.221.043.41.074.564.092v.533h-5.407v-.533l.557-.058c.24-.025.402-.056.489-.092.178-.073.296-.171.355-.294a1 1 0 0 0 .09-.438v-7.677h-.322c-.155 0-.34.007-.554.02-.214.015-.394.03-.54.049-.264.036-.552.291-.864.765a5.956 5.956 0 0 0-.68 1.333H25V21h9.4v2.775z"})])],-1)]),2)),(0,e.Lk)("div",null,[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.name)},(0,l.v_)(t.$t("flat:score.layout.textFont.title")),3),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.description)},(0,l.v_)(t.$t("flat:score.layout.textFont.description")),3)])],2)]),default:(0,e.k6)(()=>[((0,e.uX)(),(0,e.Wv)(I,{key:t.updateKey,"score-data":t.scoreData,"provided-config":t.configs[t.EditedLayout.TEXT_STYLES],onSetInitialConfig:s[21]||(s[21]=oe=>t.setInitialConfig(oe)),onNotifyChange:s[22]||(s[22]=oe=>t.notifyChange(oe))},null,8,["score-data","provided-config"]))]),_:1},8,["is-open"])],2),(0,e.bo)((0,e.Lk)("div",{class:(0,l.C4)(["ctas global-layout-actions",t.$style.stickyButtons]),ref:"stickyButtons"},[t.hasEditedContent?((0,e.uX)(),(0,e.Wv)(Z,{key:0},{default:(0,e.k6)(()=>[(0,e.bF)(Y,{theme:"outline",onClick:s[24]||(s[24]=oe=>t.cancelEditedLayout()),"default-text":"flat:score.layout.reset"}),t.canSave?((0,e.uX)(),(0,e.Wv)(Y,{key:0,loading:t.processing,"default-text":t.saveTextKey,theme:"fill",onClick:t.save},null,8,["loading","default-text","onClick"])):((0,e.uX)(),(0,e.Wv)(h,{key:1,onClick:t.save,"default-text":t.saveTextKey},null,8,["onClick","default-text"]))]),_:1})):t.selectedLayout===null?((0,e.uX)(),(0,e.Wv)(Z,{key:1},{default:(0,e.k6)(()=>[t.showLegacySaveAsDefault?((0,e.uX)(),(0,e.Wv)(Y,{key:0,theme:"outline",onClick:s[25]||(s[25]=oe=>t.saveLayoutAsDefault()),disabled:t.scoreLayoutLoading,loading:t.processing,"default-text":"flat:account.layout.save-default"},null,8,["disabled","loading"])):(0,e.Q3)("",!0),t.scoreLayoutsAvailableWithPlan?((0,e.uX)(),(0,e.Wv)(Y,{key:1,onClick:t.openCreateLayout,"default-text":"flat:score.layout.templates.save",theme:"outline"},{icon:(0,e.k6)(()=>[(0,e.bF)(Fe)]),_:1},8,["onClick"])):((0,e.uX)(),(0,e.Wv)(h,{key:2,onClick:t.openCreateLayout,"default-text":"flat:score.layout.templates.save"},null,8,["onClick"])),(0,e.bF)(Y,{onClick:s[26]||(s[26]=oe=>t.close()),"default-text":"flat:done"})]),_:1})):(0,e.Q3)("",!0)],2),[[C.aG,t.hasEditedContent||t.selectedLayout===null]]),t.dialogKey==="createLayout"?((0,e.uX)(),(0,e.Wv)(dt,{key:0,processing:t.processing,onCreateLayout:s[27]||(s[27]=oe=>t.createLayout(oe))},null,8,["processing"])):(0,e.Q3)("",!0),t.dialogKey==="layoutCreated"?((0,e.uX)(),(0,e.Wv)(Ve,{key:1,"created-layout-name":t.createdLayoutName,onClose:s[28]||(s[28]=oe=>t.closeLayoutCreated())},null,8,["created-layout-name"])):(0,e.Q3)("",!0)])}var bC=o(890439),mo=o(575258),as=o(914390),Bs=o(399564),go=o(756710),lt=o(398738);const EC=40,vr=1e3,CC=["pageHeight","pageWidth","pageMarginTop","pageMarginBottom","pageMarginLeft","pageMarginRight","staffSize","minimalDistanceBetweenSystems","minimalDistanceBetweenStaves"],SC=new Map([[Ue.A.NOTE_SHAPES,"note-shapes"],[Ue.A.PITCHES_NAMES,"pitches-names"],[Ue.A.SOLFEGE_TI,"solfege-ti"],[Ue.A.SOLFEGE_SI,"solfege-si"],[Ue.A.SOLFEGE_JAPANESE,"solfege-japanese"]]),PC="Century Schoolbook L";function LC(t,s){s.pageHeight=t.getPageHeightAsMillimeters()/10,s.pageWidth=t.getPageWidthAsMillimeters()/10,s.pageMarginLeft=t.getEvenPageLeftMarginAsMillimeters()/10,s.pageMarginRight=t.getEvenPageRightMarginAsMillimeters()/10,s.pageMarginTop=t.getEvenPageTopMarginAsMillimeters()/10,s.pageMarginBottom=t.getEvenPageBottomMarginAsMillimeters()/10,s.pageNumberingStart=null,t.hasPageNumberingStart()&&(s.pageNumberingStart=t.getPageNumberingStart())}function AC(t,s){s.staffSize=t.getMillimetersScaling()*EC/t.getTenthsScaling()/10,s.minimalDistanceBetweenStaves=t.scaleToMillimeters(t.getDistanceBetweenStaves()/10),s.minimalDistanceBetweenSystems=t.scaleToMillimeters(t.getDistanceBetweenSystems()/10),s.hideEmptyPartsPolicy=t.getHideEmptyParts()}function MC(t,s){s.notesSpacingCoeff=t.getNotesSpacingCoeff();const n=t.getSystemBreakPolicy();s.maxNbMeasuresPerSystem=n.maxNbMeasuresPerLine,s.measureNumberingPolicy=t.getMeasureNumberingPolicy(),s.measureNumberingStart=1,t.hasMeasureNumberingStart()&&(s.measureNumberingStart=t.getMeasureNumberingStart()),s.hasPickupShift=t.hasPickupShift()}function DC(t,s){const n=Array.from(s.keys()).find(r=>t.isDisplayModeEnabled(r));return n?s.get(n):"normal"}function TC(t,s){s.noteHeadColorSystem=Bs.A.getMode(t.getNotesColorMode()),s.noteHeadColorSystem===go.A.CUSTOM?s.noteHeadColorOptions=Bs.A.getColorOptions(t.getNotesColorMode()):s.noteHeadColorOptions=null,s.noteHeadGlyphSystem=DC(t,SC),s.generalChordStyle="text",t.isDisplayModeEnabled(Ue.A.JAZZ_CHORD_SYMBOLS)&&(s.generalChordStyle="symbols"),s.noteHeadDoType="fixed-do",t.isDisplayModeEnabled(Ue.A.MOVABLE_DO)&&(s.noteHeadDoType="movable-do")}function OC(t,s){const n=[];let r=null;lt.default.values.forEach(d=>{if(t.hasFontEntry(d)){const a=t.getFontEntry(d);if(!as.default.hasFontFamily(a))return;const f=as.default.getFontFamily(a);d===lt.default.GLOBAL&&(r=f),d===lt.default.TITLE&&!f&&(r=f);const h=as.default.getFontSize(a),u=as.default.getFontStyle(a),g=as.default.getFontWeight(a);d!==lt.default.GLOBAL&&n.push({textType:d,fontSize:h,fontWeight:g,fontStyle:u,fontFamily:f})}}),r||(r=PC),s.globalTextFontFamily=r,s.textFonts=n}function Tn(t){CC.forEach(s=>{t[s]=Math.round(t[s]*vr)/vr})}function kC(t,s){s.jazzChordDisplay=t.getJazzChordPartConfig()}function On(t){const s={};return LC(t,s),AC(t,s),MC(t,s),TC(t,s),s.musicFont=t.getMusicFont(),OC(t,s),kC(t,s),Tn(s),s}var xC=o(762617),rs=o(855239);const wC=["aria-expanded"];function IC(t,s,n,r,d,a){const f=(0,e.g2)("caratDownIcon");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(t.$style.wrapper)},[(0,e.Lk)("button",{class:(0,l.C4)(t.$style["accordion-toggle"]),onClick:s[0]||(s[0]=(...h)=>r.toggleAccordion&&r.toggleAccordion(...h)),"aria-expanded":n.isOpen},[(0,e.RG)(t.$slots,"header"),(0,e.Lk)("div",{class:(0,l.C4)({[t.$style["toggle-icon"]]:!0,[t.$style["toggle-icon-open"]]:n.isOpen})},[(0,e.bF)(f)],2)],10,wC),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.content),role:"region",ref:"content",style:(0,l.Tr)({"max-height":n.isOpen?`${r.contentMaxHeight}px`:0,"padding-bottom":n.isOpen?"20px":0})},[(0,e.RG)(t.$slots,"default")],6)],2)}var RC=o(625639);const FC={name:"ChoiceMethodAccordion",props:{isOpen:{type:Boolean,default:!1}},components:{caratDownIcon:RC.A},emits:["on-open"],setup(t,{emit:s}){const n=(0,te.KR)(null),r=(0,te.KR)(0);function d(){n.value&&(r.value=n.value.scrollHeight+20)}function a(f){s("on-open",f),d()}return window.addEventListener("resize",d),(0,e.sV)(()=>{d()}),(0,e.hi)(()=>{window.removeEventListener("resize",d)}),{content:n,contentMaxHeight:r,calcContentMaxHeight:d,toggleAccordion:a}}};var WC=o(448669),UC=o.n(WC);const yr={};yr.$style=UC();const BC=(0,k.A)(FC,[["render",IC],["__cssModules",yr]]);var jC=o(444104),KC=o.n(jC);const NC={class:"wrap-form"},XC={for:"layoutName",class:"label-ext-small"},$C=["placeholder"];function zC(t,s,n,r,d,a){const f=(0,e.g2)("f-button"),h=(0,e.g2)("FButtonGroup"),u=(0,e.g2)("ContentDialog");return(0,e.uX)(),(0,e.Wv)(u,{regularWidth:350,contentPadding:!0,"data-cy":"layout-template-creation",title:"flat:score.layout.templates.create-layout.title"},{footer:(0,e.k6)(()=>[(0,e.bF)(h,null,{default:(0,e.k6)(()=>[(0,e.bF)(f,{"data-cy":"cancel",theme:"ghost-subdue",size:"small",type:"button",onClick:s[2]||(s[2]=g=>t.hideDialog()),"default-text":"flat:cancel"}),(0,e.bF)(f,{"data-cy":"cta",type:"submit",size:"small","default-text":"flat:create",disabled:!a.canCreate,loading:n.processing,onClick:s[3]||(s[3]=g=>a.createLayout())},null,8,["disabled","loading"])]),_:1})]),default:(0,e.k6)(()=>[(0,e.Lk)("form",{onSubmit:s[1]||(s[1]=(0,C.D$)(g=>a.createLayout(),["prevent"]))},[(0,e.Lk)("div",NC,[(0,e.Lk)("label",XC,(0,l.v_)(t.$t("flat:score.layout.templates.create-layout.name-label")),1),(0,e.bo)((0,e.Lk)("input",{type:"text",id:"layoutName",class:"form-control medium","onUpdate:modelValue":s[0]||(s[0]=g=>d.layoutName=g),placeholder:t.$t("flat:score.layout.templates.create-layout.name-placeholder")},null,8,$C),[[C.Jo,d.layoutName]])])],32)]),_:1})}var HC=Object.defineProperty,VC=Object.defineProperties,QC=Object.getOwnPropertyDescriptors,br=Object.getOwnPropertySymbols,GC=Object.prototype.hasOwnProperty,JC=Object.prototype.propertyIsEnumerable,Er=(t,s,n)=>s in t?HC(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,YC=(t,s)=>{for(var n in s||(s={}))GC.call(s,n)&&Er(t,n,s[n]);if(br)for(var n of br(s))JC.call(s,n)&&Er(t,n,s[n]);return t},ZC=(t,s)=>VC(t,QC(s));const qC={name:"CreateLayout",emits:["createLayout"],components:{DialogHeader:es.c7,DialogFooter:es.Es,ContentDialog:ft.A},props:{processing:{type:Boolean,required:!0}},data(){return{layoutName:""}},computed:{canCreate(){return this.layoutName.trim()!==""}},methods:ZC(YC({},(0,A.i0)(z.j,["hideDialog"])),{createLayout(){this.$emit("createLayout",this.layoutName.trim())}})};var R5=o(61317);const e3=(0,k.A)(qC,[["render",zC],["__scopeId","data-v-451e502b"]]),t3={class:"ds-card-settings"},s3={class:"description"},o3={class:"cardsChoices bigCardsChoices"},n3=["value"],i3={class:"description"},a3=["src"];function r3(t,s,n,r,d,a){return(0,e.uX)(),(0,e.CE)("div",t3,[(0,e.Lk)("div",s3,(0,l.v_)(t.$t("flat:score.layout.hide-empty-parts.warning")),1),(0,e.Lk)("div",o3,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(t.hideEmptyPartsList,f=>((0,e.uX)(),(0,e.CE)("label",{key:f,class:(0,l.C4)(["cardChoice bigCardChoice",{active:t.config.hideEmptyPartsPolicy===f}])},[(0,e.bo)((0,e.Lk)("input",{type:"radio",value:f,"onUpdate:modelValue":s[0]||(s[0]=h=>t.config.hideEmptyPartsPolicy=h),onChange:s[1]||(s[1]=h=>a.scheduleUpdatePreview())},null,40,n3),[[C.XL,t.config.hideEmptyPartsPolicy]]),(0,e.Lk)("h3",null,(0,l.v_)(t.$t(`flat:score.layout.hide-empty-parts.${f}.title`)),1),(0,e.Lk)("div",i3,(0,l.v_)(t.$t(`flat:score.layout.hide-empty-parts.${f}.description`)),1),(0,e.Lk)("img",{src:o(944917)(`./hideEmptyParts-${f}.svg`),width:"830"},null,8,a3)],2))),128))])])}var l3=o(15049);const d3={name:"HideEmptyPartsLayout",emits:["notifyChange","setInitialConfig"],props:{scoreData:{type:Object,required:!0},providedConfig:{type:Object,default:null}},data(){return{hideEmptyPartsList:l3.A.values,config:{hideEmptyPartsPolicy:null}}},computed:{adagioData(){return this.scoreData.adagioData}},methods:{scheduleUpdatePreview(){(0,e.dY)(()=>this.updatePreview())},updatePreview(){const t={};t.hideEmptyPartsPolicy=this.config.hideEmptyPartsPolicy,this.$emit("notifyChange",{key:Is,config:t})},getConfigFromScore(){const t={};return t.hideEmptyPartsPolicy=this.adagioData.getHideEmptyParts(),t},applyConfigLocally(t){(0,Oe.set)(this.config,"hideEmptyPartsPolicy",t.hideEmptyPartsPolicy)}},created(){const t=this.getConfigFromScore();this.providedConfig?this.applyConfigLocally(this.providedConfig):this.applyConfigLocally(t),this.$emit("setInitialConfig",{key:Is,initialConfig:t})}},c3=(0,k.A)(d3,[["render",r3]]);function u3(t,s,n,r,d,a){const f=(0,e.g2)("f-button"),h=(0,e.g2)("SimpleDialog");return(0,e.uX)(),(0,e.Wv)(h,{"data-cy":"layout-template-created",title:"flat:score.layout.templates.layout-created.title",description:t.$t("flat:score.layout.templates.layout-created.desc",{layoutName:n.createdLayoutName})},{footer:(0,e.k6)(()=>[(0,e.bF)(f,{type:"button",onClick:t.hideDialog,"default-text":"flat:close"},null,8,["onClick"])]),_:1},8,["description"])}var _3=Object.defineProperty,Cr=Object.getOwnPropertySymbols,p3=Object.prototype.hasOwnProperty,m3=Object.prototype.propertyIsEnumerable,Sr=(t,s,n)=>s in t?_3(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,g3=(t,s)=>{for(var n in s||(s={}))p3.call(s,n)&&Sr(t,n,s[n]);if(Cr)for(var n of Cr(s))m3.call(s,n)&&Sr(t,n,s[n]);return t};const f3={name:"LayoutCreated",emits:["close"],components:{SimpleDialog:es.pR},props:{createdLayoutName:{type:String,required:!0}},methods:g3({},(0,A.i0)(z.j,["hideDialog"]))},h3=(0,k.A)(f3,[["render",u3]]),v3={class:"ds-card-settings"},y3={class:"measuresOptions"},b3={class:"form-content"},E3={class:"preference-elem"},C3={class:"form-content"},S3={class:"preference-elem"};function P3(t,s,n,r,d,a){const f=(0,e.g2)("FSelectInput"),h=(0,e.g2)("f-number-input");return(0,e.uX)(),(0,e.CE)("div",v3,[(0,e.Lk)("div",y3,[(0,e.Lk)("div",b3,[(0,e.Lk)("div",E3,[(0,e.Lk)("h4",null,(0,l.v_)(t.$t("flat:account.editor-preferences.notes-spacing")),1),(0,e.bF)(f,{modelValue:t.config.notesSpacingCoeff,"onUpdate:modelValue":s[0]||(s[0]=u=>t.config.notesSpacingCoeff=u),modelModifiers:{number:!0},onChange:s[1]||(s[1]=u=>a.scheduleUpdatePreview()),values:t.configNotesOptions},null,8,["modelValue","values"])])]),(0,e.Lk)("div",C3,[(0,e.Lk)("div",S3,[(0,e.Lk)("h4",null,(0,l.v_)(t.$t("flat:account.editor-preferences.measures-line")),1),(0,e.bF)(h,{modelValue:t.config.maxNbMeasuresPerLine,"onUpdate:modelValue":s[2]||(s[2]=u=>t.config.maxNbMeasuresPerLine=u),modelModifiers:{number:!0},step:1,min:1,max:50,onChange:s[3]||(s[3]=u=>a.scheduleUpdatePreview())},null,8,["modelValue"])])])])])}const L3={name:"MeasuresLayout",emits:["notifyChange","setInitialConfig"],components:{FNumberInput:_o.A,FSelectInput:po.A},props:{scoreData:{type:Object,required:!0},providedConfig:{type:Object,default:null}},data(){return{config:{},configNotesOptions:[{value:1,name:this.$t("flat:compact")},{value:1.25,name:this.$t("flat:cosy")},{value:1.5,name:this.$t("flat:comfortable")}]}},computed:{adagioData(){return this.scoreData.adagioData}},methods:{scheduleUpdatePreview(){(0,e.dY)(()=>this.updatePreview())},updatePreview(){const t={};t.notesSpacingCoeff=this.config.notesSpacingCoeff,t.maxNbMeasuresPerLine=this.config.maxNbMeasuresPerLine,this.$emit("notifyChange",{key:Rs,config:t})},getConfigFromScore(){const t={};return t.notesSpacingCoeff=this.adagioData.getNotesSpacingCoeff(),t.maxNbMeasuresPerLine=this.adagioData.getSystemBreakPolicy().maxNbMeasuresPerLine,t},applyConfigLocally(t){(0,Oe.set)(this.config,"notesSpacingCoeff",t.notesSpacingCoeff),(0,Oe.set)(this.config,"maxNbMeasuresPerLine",t.maxNbMeasuresPerLine)}},created(){const t=this.getConfigFromScore();this.providedConfig?this.applyConfigLocally(this.providedConfig):this.applyConfigLocally(t),this.$emit("setInitialConfig",{key:Rs,initialConfig:t})}};var B5=o(938260);const A3=(0,k.A)(L3,[["render",P3]]),M3={class:"ds-card-settings"},D3={class:"wrap-switch-contain anacrusis"},T3={class:"wrap-switch-contain anacrusis nonFirst"};function O3(t,s,n,r,d,a){const f=(0,e.g2)("FRadio"),h=(0,e.g2)("toggle"),u=(0,e.g2)("f-number-input");return(0,e.uX)(),(0,e.CE)("div",M3,[(0,e.Lk)("h4",null,(0,l.v_)(t.$t("flat:account.editor-preferences.measure-number.title")),1),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.measuresNumbersPolicy)},[(0,e.bF)(f,{id:"MeasureNumberingPolicy-EVERY",value:t.MeasureNumberingPolicy.EVERY,modelValue:t.config.measureNumberPolicy,"onUpdate:modelValue":s[0]||(s[0]=g=>t.config.measureNumberPolicy=g),onChange:a.scheduleUpdatePreview,class:(0,l.C4)(t.$style["measuresNumbersPolicy-radio"])},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:account.editor-preferences.measure-number.every")),1)]),_:1},8,["value","modelValue","onChange","class"]),(0,e.bF)(f,{id:"MeasureNumberingPolicy-FIRST_OF_SYSTEM",value:t.MeasureNumberingPolicy.FIRST_OF_SYSTEM,modelValue:t.config.measureNumberPolicy,"onUpdate:modelValue":s[1]||(s[1]=g=>t.config.measureNumberPolicy=g),onChange:a.scheduleUpdatePreview,class:(0,l.C4)(t.$style["measuresNumbersPolicy-radio"])},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:account.editor-preferences.measure-number.first-system")),1)]),_:1},8,["value","modelValue","onChange","class"]),(0,e.bF)(f,{id:"MeasureNumberingPolicy-NONE",value:t.MeasureNumberingPolicy.NONE,modelValue:t.config.measureNumberPolicy,"onUpdate:modelValue":s[2]||(s[2]=g=>t.config.measureNumberPolicy=g),onChange:a.scheduleUpdatePreview,class:(0,l.C4)(t.$style["measuresNumbersPolicy-radio"])},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:account.editor-preferences.measure-number.none")),1)]),_:1},8,["value","modelValue","onChange","class"])],2),(0,e.Lk)("h4",null,(0,l.v_)(t.$t("flat:score.layout.measuresNumbers.numbering")),1),(0,e.Lk)("div",D3,[(0,e.bF)(h,{id:"tabsSwitch",modelValue:t.config.hasPickup,"onUpdate:modelValue":s[3]||(s[3]=g=>t.config.hasPickup=g),onChange:a.scheduleUpdatePreview},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:account.editor-preferences.anacrusis.numeration-after")),1)]),_:1},8,["modelValue","onChange"])]),(0,e.Lk)("div",T3,[(0,e.bF)(h,{id:"measuresNumbersSwitch",modelValue:t.config.measureCustomNumbers,"onUpdate:modelValue":s[4]||(s[4]=g=>t.config.measureCustomNumbers=g),onChange:a.scheduleUpdatePreview},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:score.layout.measuresNumbers.numbers-label-starts-at")),1)]),_:1},8,["modelValue","onChange"]),(0,e.bF)(u,{modelValue:t.config.measureNumberingStart,"onUpdate:modelValue":s[5]||(s[5]=g=>t.config.measureNumberingStart=g),modelModifiers:{number:!0},min:1,step:1,onChange:s[6]||(s[6]=g=>{t.config.measureCustomNumbers=!0,a.scheduleUpdatePreview()})},null,8,["modelValue"])])])}var k3=o(891959),x3=Object.defineProperty,Pr=Object.getOwnPropertySymbols,w3=Object.prototype.hasOwnProperty,I3=Object.prototype.propertyIsEnumerable,Lr=(t,s,n)=>s in t?x3(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Ar=(t,s)=>{for(var n in s||(s={}))w3.call(s,n)&&Lr(t,n,s[n]);if(Pr)for(var n of Pr(s))I3.call(s,n)&&Lr(t,n,s[n]);return t};const R3={name:"MeasuresNumbersLayout",emits:["notifyChange","setInitialConfig"],components:{FNumberInput:_o.A,FRadio:wo.h},props:{scoreData:{type:Object,required:!0},providedConfig:{type:Object,default:null}},data(){return{MeasureNumberingPolicy:k3.A.getObject(),initialConfig:{},config:{}}},computed:{adagioData(){return this.scoreData.adagioData}},methods:{scheduleUpdatePreview(){(0,e.dY)(()=>this.updatePreview())},updatePreview(){const t=Ar({},this.config);this.$emit("notifyChange",{key:Fs,config:t})},getConfigFromScore(){const t={};return t.measureNumberPolicy=this.adagioData.getMeasureNumberingPolicy(),t.hasPickup=this.adagioData.hasPickupShift(),this.adagioData.hasMeasureNumberingStart()?(t.measureCustomNumbers=!0,t.measureNumberingStart=this.adagioData.getMeasureNumberingStart()):(t.measureCustomNumbers=!1,t.measureNumberingStart=1),t},applyConfigLocally(t){this.config=Ar({},t)}},created(){const t=this.getConfigFromScore();this.providedConfig?this.applyConfigLocally(this.providedConfig):this.applyConfigLocally(t),this.$emit("setInitialConfig",{key:Fs,initialConfig:t})}};var K5=o(571110),F3=o(5791),W3=o.n(F3);const Mr={};Mr.$style=W3();const U3=(0,k.A)(R3,[["render",O3],["__cssModules",Mr]]);function B3(t,s,n,r,d,a){const f=(0,e.g2)("MusicFontCard"),h=(0,e.g2)("f-input"),u=(0,e.g2)("edit-icon"),g=(0,e.g2)("MusicFontPickerDialog");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(t.$style.musicFontLayout)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.activeCardCol)},[(0,e.bF)(f,{"music-font-name":t.config.musicFont,active:!0},null,8,["music-font-name"])],2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.fontChoiceCol)},[(0,e.Lk)("h4",null,(0,l.v_)(t.$t("flat:score.layout.musicFont.font")),1),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.fontChoiceInput)},[(0,e.bF)(h,{size:"small",modelValue:a.musicFontString,"onUpdate:modelValue":s[0]||(s[0]=b=>a.musicFontString=b),onFocus:(0,C.D$)(a.openFontPicker,["prevent"])},null,8,["modelValue","onFocus"]),(0,e.bF)(u,{class:(0,l.C4)(t.$style.editIcon),onClick:a.openFontPicker},null,8,["class","onClick"])],2)],2),t.fontPickerOpened?((0,e.uX)(),(0,e.Wv)(g,{key:0,"active-music-font":t.config.musicFont,onCloseFontPicker:a.closeFontPicker,onSetMusicFont:a.setMusicFont},null,8,["active-music-font","onCloseFontPicker","onSetMusicFont"])):(0,e.Q3)("",!0)],2)}var kn=o(475672);const j3=["src","alt"];function K3(t,s,n,r,d,a){return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(t.$style.cardMusicFont)},[(0,e.Lk)("img",{src:a.previewSvg,loading:"eager",alt:t.$t(`flat:score.layout.musicFont.${n.musicFontName}.title`),height:"86"},null,8,j3),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.fontTitle)},(0,l.v_)(t.$t(`flat:score.layout.musicFont.${n.musicFontName}.title`)),3),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.fontInfo)},(0,l.v_)(t.$t(`flat:score.layout.musicFont.${n.musicFontName}.descr`)),3)],2)}const N3={name:"MusicFontCard",props:{musicFontName:{type:String,required:!0}},computed:{previewSvg(){return o(607504)(`./${this.musicFontName}.svg`)}}};var X3=o(307511),$3=o.n(X3);const Dr={};Dr.$style=$3();const z3=(0,k.A)(N3,[["render",K3],["__cssModules",Dr]]);function H3(t,s,n,r,d,a){const f=(0,e.g2)("f-search-input"),h=(0,e.g2)("MusicFontCardSelect"),u=(0,e.g2)("ContentDialog");return(0,e.uX)(),(0,e.Wv)(u,{class:(0,l.C4)(t.$style.musicFontDialog),"regular-width":584,"show-header":!0,"separate-header":!1,onClose:a.closeFontPicker},{headerTitle:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:score.layout.musicFont.dialogHeader")),1)]),default:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.content)},[(0,e.bF)(f,{size:"small",placeholder:"Search for a font",modelValue:d.searchQuery,"onUpdate:modelValue":s[0]||(s[0]=g=>d.searchQuery=g),class:(0,l.C4)(t.$style.searchInput)},null,8,["modelValue","class"]),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.fontsList)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.filteredMusicFontList,g=>((0,e.uX)(),(0,e.Wv)(h,{key:g,onClick:b=>a.setMusicFont(g),"music-font-name":g,active:g===n.activeMusicFont},null,8,["onClick","music-font-name","active"]))),128))],2)],2)]),_:1},8,["class","onClose"])}var V3=o(318566),Q3=o(507596);const G3=["placeholder","autofocus","aria-label","aria-disabled","disabled"],J3=(0,e.pM)({__name:"FSearchInput",props:{delay:{type:Boolean,default:!0},autofocus:{type:Boolean,default:!1},placeholder:{},modelValue:{default:""},showDelete:{type:Boolean,default:!1},size:{default:"medium"},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","deleteInput"],setup(t,{emit:s}){const n=t,r=s,d=(0,te.KR)(""),a=(0,te.KR)();(0,e.wB)(()=>n.modelValue,u=>{d.value=u||""});function f(u){const g=u.target;n.delay?(a.value&&clearTimeout(a.value),a.value=window.setTimeout(()=>{g&&r("update:modelValue",g.value)},150)):r("update:modelValue",g.value)}function h(){d.value="",r("deleteInput")}return(0,e.sV)(()=>{d.value=n.modelValue||""}),(u,g)=>((0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)({[u.$style.container]:!0,[u.$style.showDeleteButton]:u.showDelete&&d.value&&d.value.length>0})},[(0,e.bo)((0,e.Lk)("input",{"onUpdate:modelValue":g[0]||(g[0]=b=>d.value=b),type:"text",class:(0,l.C4)({[u.$style.input]:!0,[u.$style[`input-${u.size}`]]:u.size}),placeholder:u.$t(u.placeholder),autofocus:u.autofocus,onInput:f,"aria-label":u.$t(u.placeholder),"aria-disabled":u.disabled,disabled:u.disabled},null,42,G3),[[C.Jo,d.value]]),(0,e.Lk)("div",{class:(0,l.C4)(u.$style.search)},[(0,e.bF)((0,te.R1)(V3.default),{"aria-hidden":"true"})],2),(0,e.Lk)("div",{onClick:h,class:(0,l.C4)(u.$style.delete)},[(0,e.bF)((0,te.R1)(Q3.default))],2)],2))}});var Y3=o(157557),Z3=o.n(Y3);const Tr={};Tr.$style=Z3();const Or=(0,k.A)(J3,[["__cssModules",Tr]]),q3=["src","alt"];function eS(t,s,n,r,d,a){return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)({[t.$style.cardMusicFont]:!0,[t.$style.active]:this.active,[t.$style.disabled]:this.disabled})},[(0,e.Lk)("div",null,[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.fontTitle)},(0,l.v_)(t.$t(`flat:score.layout.musicFont.${n.musicFontName}.title`)),3),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.fontInfo)},(0,l.v_)(t.$t(`flat:score.layout.musicFont.${n.musicFontName}.descr`)),3)]),(0,e.Lk)("img",{src:a.previewSvg,loading:"eager",alt:t.$t(`flat:score.layout.musicFont.${n.musicFontName}.title`)},null,8,q3)],2)}const tS={name:"MusicFontCardSelect",props:{musicFontName:{type:String,required:!0},active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{previewSvg(){return o(607504)(`./${this.musicFontName}.svg`)}}};var sS=o(686048),oS=o.n(sS);const kr={};kr.$style=oS();const nS=(0,k.A)(tS,[["render",eS],["__cssModules",kr]]),iS={name:"MusicFontLayout",emits:["closeFontPicker","setMusicFont"],components:{ContentDialog:ft.A,FSearchInput:Or,MusicFontCardSelect:nS},data(){return{searchQuery:null,musicFontsList:kn.A.values}},props:{activeMusicFont:{type:String,required:!0}},computed:{filteredMusicFontList(){return this.searchQuery?this.musicFontsList.filter(t=>t.toLowerCase().includes(this.searchQuery.toLowerCase())):this.musicFontsList}},methods:{closeFontPicker(){this.$emit("closeFontPicker")},setMusicFont(t){this.$emit("setMusicFont",t),this.closeFontPicker()}},created(){}};var aS=o(727335),rS=o.n(aS);const xr={};xr.$style=rS();const lS=(0,k.A)(iS,[["render",H3],["__cssModules",xr]]);var dS=Object.defineProperty,wr=Object.getOwnPropertySymbols,cS=Object.prototype.hasOwnProperty,uS=Object.prototype.propertyIsEnumerable,Ir=(t,s,n)=>s in t?dS(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Rr=(t,s)=>{for(var n in s||(s={}))cS.call(s,n)&&Ir(t,n,s[n]);if(wr)for(var n of wr(s))uS.call(s,n)&&Ir(t,n,s[n]);return t};const _S={name:"MusicFontLayout",emits:["notifyChange","setInitialConfig"],components:{MusicFontCard:z3,FInput:vn.Le,MusicFontPickerDialog:lS,editIcon:Rt.A},props:{scoreData:{type:Object,required:!0},providedConfig:{type:Object,default:null}},data(){return{MusicFont:kn.A.getObject(),fontPickerOpened:!1,config:{}}},computed:{adagioData(){return this.scoreData.adagioData},musicFontString(){return this.$t(`flat:score.layout.musicFont.${this.config.musicFont}.title`)}},methods:{setMusicFont(t){this.config.musicFont=t,this.scheduleUpdatePreview()},isActive(t){return this.config.musicFont===t},scheduleUpdatePreview(){(0,e.dY)(()=>this.updatePreview())},updatePreview(){const t=Rr({},this.config);this.$emit("notifyChange",{key:Ws,config:t})},getConfigFromScore(){const t={};return t.musicFont=this.adagioData.getMusicFont(),t},applyConfigLocally(t){this.config=Rr({},t)},openFontPicker(){this.fontPickerOpened=!0},closeFontPicker(){this.fontPickerOpened=!1}},created(){const t=this.getConfigFromScore();this.providedConfig?this.applyConfigLocally(this.providedConfig):this.applyConfigLocally(t),this.$emit("setInitialConfig",{key:Ws,initialConfig:t})}};var pS=o(691657),mS=o.n(pS);const Fr={};Fr.$style=mS();const gS=(0,k.A)(_S,[["render",B3],["__cssModules",Fr]]),fS={class:"ds-card-settings"},hS={class:"ds-pages-settings"},vS={class:"ds-pages-left"},yS={key:0},bS={class:"text-muted"},ES={class:"ds-page-custom"},CS={class:"ds-pages-right"},SS={class:"text-muted"},PS={class:"ds-margin"},LS={class:"control-label",for:"pageMarginTop"},AS={class:"ds-margin"},MS={class:"control-label",for:"pageMarginBottom"},DS={class:"ds-margin"},TS={class:"control-label",for:"pageMarginLeft"},OS={class:"ds-margin"},kS={class:"control-label",for:"pageMarginRight"},xS={class:"ds-pages-numbers"},wS={class:"wrap-switch-contain"};function IS(t,s,n,r,d,a){const f=(0,e.g2)("FRadio"),h=(0,e.g2)("FSelectInput"),u=(0,e.g2)("f-number-input"),g=(0,e.g2)("toggle");return(0,e.uX)(),(0,e.CE)("div",fS,[(0,e.Lk)("div",hS,[(0,e.Lk)("div",vS,[(0,e.Lk)("h4",null,(0,l.v_)(t.$t("flat:account.editor-preferences.page-orientation.title")),1),(0,e.Lk)("div",{class:(0,l.C4)(t.$style["pages-orient"])},[(0,e.bF)(f,{id:"pageOrientation-portrait",modelValue:t.pageOrientation,"onUpdate:modelValue":s[0]||(s[0]=b=>t.pageOrientation=b),value:"portrait",onChange:a.scheduleUpdatePreview,class:(0,l.C4)(t.$style["pages-orient-portrait"])},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:account.editor-preferences.page-size.portrait")),1)]),_:1},8,["modelValue","onChange","class"]),(0,e.bF)(f,{id:"pageOrientation-landscape",modelValue:t.pageOrientation,"onUpdate:modelValue":s[1]||(s[1]=b=>t.pageOrientation=b),value:"landscape",onChange:a.scheduleUpdatePreview},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:account.editor-preferences.page-size.landscape")),1)]),_:1},8,["modelValue","onChange"])],2),(0,e.Lk)("h4",null,(0,l.v_)(t.$t("flat:account.editor-preferences.page-size.title")),1),(0,e.bF)(h,{modelValue:t.pageSize,"onUpdate:modelValue":s[2]||(s[2]=b=>t.pageSize=b),onChange:s[3]||(s[3]=b=>a.scheduleUpdatePreview()),values:a.pageLayoutPresetsOptions},null,8,["modelValue","values"]),t.pageSize==="custom"?((0,e.uX)(),(0,e.CE)("div",yS,[(0,e.Lk)("h4",null,[(0,e.eW)((0,l.v_)(t.$t("flat:account.editor-preferences.page-size.title-custom"))+" ",1),(0,e.Lk)("span",bS,(0,l.v_)(t.$t("flat:account.editor-preferences.page-size.width-height",{userUnit:t.userUnit})),1)]),(0,e.Lk)("div",ES,[(0,e.bF)(u,{step:.01,modelValue:t.config.pageHeight,"onUpdate:modelValue":s[4]||(s[4]=b=>t.config.pageHeight=b),modelModifiers:{number:!0},onChange:s[5]||(s[5]=b=>a.scheduleUpdatePreview())},null,8,["modelValue"]),s[20]||(s[20]=(0,e.Lk)("span",null,"x",-1)),(0,e.bF)(u,{step:.01,modelValue:t.config.pageWidth,"onUpdate:modelValue":s[6]||(s[6]=b=>t.config.pageWidth=b),modelModifiers:{number:!0},onChange:s[7]||(s[7]=b=>a.scheduleUpdatePreview())},null,8,["modelValue"])])])):(0,e.Q3)("",!0)]),(0,e.Lk)("div",CS,[(0,e.Lk)("h4",null,[(0,e.eW)((0,l.v_)(t.$t("flat:account.editor-preferences.page-margins.title"))+" ",1),(0,e.Lk)("span",SS,"("+(0,l.v_)(t.userUnit)+")",1)]),(0,e.Lk)("div",PS,[(0,e.Lk)("label",LS,(0,l.v_)(t.$t("flat:top")),1),(0,e.bF)(u,{step:.01,modelValue:t.config.pageMarginTop,"onUpdate:modelValue":s[8]||(s[8]=b=>t.config.pageMarginTop=b),modelModifiers:{number:!0},onChange:s[9]||(s[9]=b=>a.scheduleUpdatePreview())},null,8,["modelValue"])]),(0,e.Lk)("div",AS,[(0,e.Lk)("label",MS,(0,l.v_)(t.$t("flat:bottom")),1),(0,e.bF)(u,{step:.01,modelValue:t.config.pageMarginBottom,"onUpdate:modelValue":s[10]||(s[10]=b=>t.config.pageMarginBottom=b),modelModifiers:{number:!0},onChange:s[11]||(s[11]=b=>a.scheduleUpdatePreview())},null,8,["modelValue"])]),(0,e.Lk)("div",DS,[(0,e.Lk)("label",TS,(0,l.v_)(t.$t("flat:left")),1),(0,e.bF)(u,{step:.01,modelValue:t.config.pageMarginLeft,"onUpdate:modelValue":s[12]||(s[12]=b=>t.config.pageMarginLeft=b),modelModifiers:{number:!0},onChange:s[13]||(s[13]=b=>a.scheduleUpdatePreview())},null,8,["modelValue"])]),(0,e.Lk)("div",OS,[(0,e.Lk)("label",kS,(0,l.v_)(t.$t("flat:right")),1),(0,e.bF)(u,{step:.01,modelValue:t.config.pageMarginRight,"onUpdate:modelValue":s[14]||(s[14]=b=>t.config.pageMarginRight=b),modelModifiers:{number:!0},onChange:s[15]||(s[15]=b=>a.scheduleUpdatePreview())},null,8,["modelValue"])])])]),(0,e.Lk)("div",xS,[(0,e.Lk)("h4",null,(0,l.v_)(t.$t("flat:score.layout.pages.numbers")),1),(0,e.Lk)("div",wS,[(0,e.bF)(g,{id:"pagesNumbersSwitch",modelValue:t.config.pageCustomNumbers,"onUpdate:modelValue":s[16]||(s[16]=b=>t.config.pageCustomNumbers=b),onChange:s[17]||(s[17]=b=>a.scheduleUpdatePreview())},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:score.layout.pages.numbers-label-starts-at")),1)]),_:1},8,["modelValue"]),(0,e.bF)(u,{min:1,step:1,modelValue:t.config.pageNumberingStart,"onUpdate:modelValue":s[18]||(s[18]=b=>t.config.pageNumberingStart=b),modelModifiers:{number:!0},onChange:s[19]||(s[19]=b=>{t.config.pageCustomNumbers=!0,a.scheduleUpdatePreview()})},null,8,["modelValue"])])])])}function Ot(t){return Math.round(t*100)/100}const RS=.01,FS={name:"PagesLayout",emits:["notifyChange","setInitialConfig"],components:{FNumberInput:_o.A,FSelectInput:po.A,FRadio:wo.h},props:{scoreData:{type:Object,required:!0},providedConfig:{type:Object,default:null}},data(){return{userUnit:null,pagePreset:null,pageLayoutPresets:[],pageSize:null,pageOrientation:null,config:{}}},setup(){const t=(0,fe.F)();return{account:(0,e.EW)(()=>t.account),accountFeatures:(0,e.EW)(()=>t.accountFeatures)}},computed:{adagioData(){return this.scoreData.adagioData},enabledFeatureCustomLayout(){return this.accountFeatures.customLayout},pageLayoutPresetsOptions(){return[...this.pageLayoutPresets.map(s=>({value:s.id,name:s.label})),{value:"custom",name:this.$t("flat:custom")}]}},methods:{scheduleUpdatePreview(){(0,e.dY)(()=>this.updatePreview())},updatePreview(){const t={};let s,n;if(this.pageSize==="custom")s=Math.max(this.pageLayout.userToMm(this.config.pageWidth),50),n=Math.max(this.pageLayout.userToMm(this.config.pageHeight),50);else{const a=this.pageLayout.userToPreferences(this.pageSize,this.pageOrientation);a&&a.height!==void 0&&a.width!==void 0&&({width:s,height:n}=a,this.config.pageWidth=this.pageLayout.mmToUser(a.width),this.config.pageHeight=this.pageLayout.mmToUser(a.height))}s&&n&&(t.pageWidth=s,t.pageHeight=n);const r=this.config.pageHeight/2;t.pageMarginTop=this.processMargin(this.config.pageMarginTop,r),t.pageMarginBottom=this.processMargin(this.config.pageMarginBottom,r);const d=this.config.pageWidth/2;t.pageMarginLeft=this.processMargin(this.config.pageMarginLeft,d),t.pageMarginRight=this.processMargin(this.config.pageMarginRight,d),t.pageCustomNumbers=this.config.pageCustomNumbers,t.pageNumberingStart=this.config.pageNumberingStart,this.$emit("notifyChange",{key:is,config:t})},processMargin(t,s){return this.pageLayout.userToMm(Math.max(Math.min(s,t),RS))},getConfigFromScore(){const t={};return t.pageWidth=Math.round(this.adagioData.getPageWidthAsMillimeters()),t.pageHeight=Math.round(this.adagioData.getPageHeightAsMillimeters()),t.pageMarginTop=this.adagioData.getOddPageTopMarginAsMillimeters(),t.pageMarginBottom=this.adagioData.getOddPageBottomMarginAsMillimeters(),t.pageMarginRight=this.adagioData.getOddPageRightMarginAsMillimeters(),t.pageMarginLeft=this.adagioData.getOddPageLeftMarginAsMillimeters(),this.adagioData.hasPageNumberingStart()?(t.pageCustomNumbers=!0,t.pageNumberingStart=this.adagioData.getPageNumberingStart()):(t.pageCustomNumbers=!1,t.pageNumberingStart=1),t},applyConfigLocally(t){t.pageHeight&&t.pageWidth&&(this.config.pageHeight=t.pageHeight,this.config.pageWidth=t.pageWidth,this.pagePreset=mo.A.sizeToPreset(this.config.pageHeight,this.config.pageWidth)),this.pagePreset||(this.pagePreset=this.pageLayout.userPreset(),this.config.pageHeight=this.pageLayout.preset[this.pagePreset[0]].height,this.config.pageWidth=this.pageLayout.preset[this.pagePreset[0]].width,this.enabledFeatureCustomLayout&&(this.pagePreset=["custom","portrait"])),this.config.pageHeight=this.pageLayout.mmToUser(this.config.pageHeight),this.config.pageWidth=this.pageLayout.mmToUser(this.config.pageWidth),this.pageSize=this.pagePreset[0],this.pageOrientation=this.pagePreset[1];try{this.config.pageMarginTop=Ot(this.pageLayout.mmToUser(t.pageMarginTop)),this.config.pageMarginBottom=Ot(this.pageLayout.mmToUser(t.pageMarginBottom)),this.config.pageMarginRight=Ot(this.pageLayout.mmToUser(t.pageMarginRight)),this.config.pageMarginLeft=Ot(this.pageLayout.mmToUser(t.pageMarginLeft))}catch(s){this.config.pageMarginTop=this.pageLayout.userMargin("Top"),this.config.pageMarginBottom=this.pageLayout.userMargin("Bottom"),this.config.pageMarginLeft=this.pageLayout.userMargin("Left"),this.config.pageMarginRight=this.pageLayout.userMargin("Right")}this.config.pageCustomNumbers=t.pageCustomNumbers,this.config.pageNumberingStart=t.pageNumberingStart}},created(){this.pageLayout=new mo.A(this.account),this.userUnit=this.pageLayout.userUnit(),this.pageLayoutPresets=this.pageLayout.presetsToUser();const t=this.getConfigFromScore();this.providedConfig?this.applyConfigLocally(this.providedConfig):this.applyConfigLocally(t),this.$emit("setInitialConfig",{key:is,initialConfig:t})}};var Q5=o(905742),WS=o(119491),US=o.n(WS);const Wr={};Wr.$style=US();const BS=(0,k.A)(FS,[["render",IS],["__cssModules",Wr]]),jS={class:"ds-card-settings"},KS={class:"staffSize"},NS={key:0,class:"staffSizeCustom"},XS={class:"staffSpacings"},$S={class:"range-wlabel"},zS={class:"spaceBetweenStavesValue"},HS={class:"staffSpacings"},VS={class:"range-wlabel"},QS={class:"spaceBetweenSystemsValue"};function GS(t,s,n,r,d,a){const f=(0,e.g2)("FSelectInput"),h=(0,e.g2)("f-number-input");return(0,e.uX)(),(0,e.CE)("div",jS,[(0,e.Lk)("h4",null,(0,l.v_)(t.$t("flat:account.editor-preferences.score-scaling")),1),(0,e.Lk)("div",KS,[(0,e.bF)(f,{modelValue:t.staffSizeRastral,"onUpdate:modelValue":s[0]||(s[0]=u=>t.staffSizeRastral=u),modelModifiers:{number:!0},onChange:s[1]||(s[1]=u=>a.scheduleUpdatePreview()),values:a.rastralSizesOptions},null,8,["modelValue","values"]),t.staffSizeRastral==="custom"?((0,e.uX)(),(0,e.CE)("label",NS,[(0,e.bF)(h,{min:0,max:30,step:.01,modelValue:a.staffSizeUser,"onUpdate:modelValue":s[2]||(s[2]=u=>a.staffSizeUser=u),modelModifiers:{number:!0},onChange:s[3]||(s[3]=u=>a.scheduleUpdatePreview())},null,8,["modelValue"]),(0,e.eW)(" "+(0,l.v_)(a.userMmUnit),1)])):(0,e.Q3)("",!0)]),(0,e.Lk)("div",XS,[(0,e.Lk)("div",null,[(0,e.Lk)("h4",null,(0,l.v_)(t.$t("flat:account.editor-preferences.space-between-staves")),1),(0,e.Lk)("div",$S,[(0,e.Lk)("label",null,(0,l.v_)(t.$t("flat:smaller")),1),(0,e.bo)((0,e.Lk)("input",{type:"range",min:"30",max:"150",step:"1","onUpdate:modelValue":s[4]||(s[4]=u=>a.spaceBetweenStaves=u),onChange:s[5]||(s[5]=u=>a.scheduleUpdatePreview())},null,544),[[C.Jo,a.spaceBetweenStaves,void 0,{number:!0}]]),(0,e.Lk)("label",null,(0,l.v_)(t.$t("flat:larger")),1),(0,e.Lk)("label",zS,[(0,e.bF)(h,{modelValue:a.spaceBetweenStavesUser,"onUpdate:modelValue":s[6]||(s[6]=u=>a.spaceBetweenStavesUser=u),modelModifiers:{number:!0},min:0,step:.01,onChange:s[7]||(s[7]=u=>a.scheduleUpdatePreview())},null,8,["modelValue"]),(0,e.eW)(" "+(0,l.v_)(a.userMmUnit),1)])])])]),(0,e.Lk)("div",HS,[(0,e.Lk)("div",null,[(0,e.Lk)("h4",null,(0,l.v_)(t.$t("flat:account.editor-preferences.space-between-systems")),1),(0,e.Lk)("div",VS,[(0,e.Lk)("label",null,(0,l.v_)(t.$t("flat:smaller")),1),(0,e.bo)((0,e.Lk)("input",{type:"range",min:"30",max:"150",step:"1","onUpdate:modelValue":s[8]||(s[8]=u=>a.spaceBetweenSystems=u),onChange:s[9]||(s[9]=u=>a.scheduleUpdatePreview())},null,544),[[C.Jo,a.spaceBetweenSystems,void 0,{number:!0}]]),(0,e.Lk)("label",null,(0,l.v_)(t.$t("flat:larger")),1),(0,e.Lk)("label",QS,[(0,e.bF)(h,{modelValue:a.spaceBetweenSystemsUser,"onUpdate:modelValue":s[10]||(s[10]=u=>a.spaceBetweenSystemsUser=u),modelModifiers:{number:!0},min:0,step:.01,onChange:s[11]||(s[11]=u=>a.scheduleUpdatePreview())},null,8,["modelValue"]),(0,e.eW)(" "+(0,l.v_)(a.userMmUnit),1)])])])])])}const JS=1/25.4,Fo=[{number:0,mm:9.2},{number:1,mm:7.9},{number:2,mm:7.4},{number:3,mm:7},{number:4,mm:6.5},{number:5,mm:6},{number:6,mm:5.5},{number:7,mm:4.8},{number:8,mm:3.7}],YS={name:"StavesLayout",emits:["notifyChange","setInitialConfig"],components:{FSelectInput:po.A,FNumberInput:_o.A},props:{scoreData:{type:Object,required:!0},providedConfig:{type:Object,default:null}},data(){return{rastralSizes:Fo,userUnit:null,config:{},staffSizeRastral:null}},setup(){const t=(0,fe.F)();return{account:(0,e.EW)(()=>t.account)}},computed:{adagioData(){return this.scoreData.adagioData},staffSizeUser:{get(){return this.userUnit==="cm"?this.config.staffSizeMm:this.pageLayout.mmToUser(this.config.staffSizeMm)},set(t){this.userUnit==="cm"?(0,Oe.set)(this.config,"staffSizeMm",t):(0,Oe.set)(this.config,"staffSizeMm",this.pageLayout.userToMm(t))}},spaceBetweenStaves:{get(){return this.spaceBetweenStavesMm*40/this.config.staffSizeMm},set(t){this.spaceBetweenStavesMm=t*this.config.staffSizeMm/40}},spaceBetweenStavesMm:{get(){return this.config.spaceBetweenStavesMm},set(t){(0,Oe.set)(this.config,"spaceBetweenStavesMm",t)}},spaceBetweenStavesUser:{get(){return this.userUnit==="cm"?Ot(this.spaceBetweenStavesMm):Ot(this.pageLayout.mmToUser(this.spaceBetweenStavesMm))},set(t){this.userUnit==="cm"?this.spaceBetweenStavesMm=t:this.spaceBetweenStavesMm=this.pageLayout.userToMm(t)}},spaceBetweenSystemsMm:{get(){return this.config.spaceBetweenSystemsMm},set(t){(0,Oe.set)(this.config,"spaceBetweenSystemsMm",t)}},spaceBetweenSystems:{get(){return this.spaceBetweenSystemsMm*40/this.config.staffSizeMm},set(t){this.spaceBetweenSystemsMm=t*this.config.staffSizeMm/40}},spaceBetweenSystemsUser:{get(){return this.userUnit==="cm"?Ot(this.spaceBetweenSystemsMm):Ot(this.pageLayout.mmToUser(this.spaceBetweenSystemsMm))},set(t){this.userUnit==="cm"?this.spaceBetweenSystemsMm=t:this.spaceBetweenSystemsMm=this.pageLayout.userToMm(t)}},userMmUnit(){return this.userUnit==="cm"?"mm":this.userUnit},rastralSizesOptions(){return[...this.rastralSizes.map(s=>({value:s.number,name:s.label})),{value:"custom",name:this.$t("flat:custom")}]}},watch:{staffSizeRastral(t){const s=Fo.find(n=>n.number===t);s&&(0,Oe.set)(this.config,"staffSizeMm",s.mm)}},methods:{scheduleUpdatePreview(){(0,e.dY)(()=>this.updatePreview())},updatePreview(){const t={};t.staffSizeMm=this.config.staffSizeMm,t.spaceBetweenStavesMm=this.spaceBetweenStavesMm,t.spaceBetweenSystemsMm=this.spaceBetweenSystemsMm,t.spaceBetweenStaves=this.spaceBetweenStaves,t.spaceBetweenSystems=this.spaceBetweenSystems,this.$emit("notifyChange",{key:ws,config:t})},initRastalSizes(){Fo.forEach(t=>{t.inch=Ot(t.mm*JS),t.label=_.MR.t("flat:score.layout.staves.rastralNb",{number:t.number}),this.userUnit==="inch"?t.label+=` (${t.inch}inch)`:t.label+=` (${t.mm}mm)`})},getConfigFromScore(){const t={};return t.staffSizeMm=this.adagioData.getMillimetersScaling(),t.spaceBetweenStaves=this.adagioData.getDistanceBetweenStaves(),t.spaceBetweenSystems=this.adagioData.getDistanceBetweenSystems(),t.spaceBetweenStavesMm=this.adagioData.scaleToMillimeters(t.spaceBetweenStaves),t.spaceBetweenSystemsMm=this.adagioData.scaleToMillimeters(t.spaceBetweenSystems),t},applyConfigLocally(t){(0,Oe.set)(this.config,"staffSizeMm",t.staffSizeMm),this.spaceBetweenStavesMm=t.spaceBetweenStavesMm,this.spaceBetweenSystemsMm=t.spaceBetweenSystemsMm;const s=Fo.find(n=>n.mm===this.config.staffSizeMm);s?this.staffSizeRastral=s.number:this.staffSizeRastral="custom"}},created(){this.pageLayout=new mo.A(this.account),this.userUnit=this.pageLayout.userUnit(),this.initRastalSizes();const t=this.getConfigFromScore();this.providedConfig?this.applyConfigLocally(this.providedConfig):this.applyConfigLocally(t),this.$emit("setInitialConfig",{key:ws,initialConfig:t})}};var J5=o(201832);const ZS=(0,k.A)(YS,[["render",GS]]),qS={class:"ds-card-settings ds-fonts"},eP={colspan:"4"},tP={class:"main-description"},sP={class:"flabel"},oP={class:"ffamily"},nP={key:0},iP={colspan:"4"},aP={class:"main-description"},rP={class:"flabel"},lP={class:"ffamily"},dP={class:"fprops"},cP={class:"fdecl"},uP=["onClick","disabled"],_P=["onClick","disabled"],pP={class:"fsize-wrap form-control"},mP=["step","onUpdate:modelValue","onChange"],gP=["onUpdate:modelValue","onChange"],fP=["value"],hP=["value"],vP={class:"fdel-wrap"},yP=["onClick"],bP={key:1},EP={colspan:"4"},CP={class:"ddn-content ddn-add-fcustom"},SP=["onClick"];function PP(t,s,n,r,d,a){const f=(0,e.g2)("font-family-input"),h=(0,e.g2)("dialog-font-picker"),u=(0,e.gN)("dropdown");return(0,e.uX)(),(0,e.CE)("div",qS,[(0,e.Lk)("table",null,[(0,e.Lk)("tr",null,[(0,e.Lk)("td",eP,[(0,e.Lk)("p",tP,(0,l.v_)(t.$t("flat:score.layout.textFont.global-description"))+":",1)])]),(0,e.Lk)("tr",null,[(0,e.Lk)("td",sP,(0,l.v_)(t.$t("flat:score.layout.textFont.t.global")),1),(0,e.Lk)("td",oP,[(0,e.bF)(f,{family:a.globalFontFamily,onClick:s[0]||(s[0]=(0,C.D$)(g=>a.openFontPicker("global"),["stop","prevent"]))},null,8,["family"])])]),a.customizedTextTypes.length>0?((0,e.uX)(),(0,e.CE)("tr",nP,[(0,e.Lk)("td",iP,[(0,e.Lk)("p",aP,(0,l.v_)(t.$t("flat:score.layout.textFont.specific-description"))+": ",1)])])):(0,e.Q3)("",!0),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.customizedTextTypes,g=>((0,e.uX)(),(0,e.CE)("tr",{key:g},[(0,e.Lk)("td",rP,(0,l.v_)(t.$t(`flat:score.layout.textFont.t.${g}`)),1),(0,e.Lk)("td",lP,[(0,e.bF)(f,{family:t.fonts[g]["$font-family"],onClick:(0,C.D$)(b=>a.openFontPicker(g),["stop","prevent"])},null,8,["family","onClick"])]),(0,e.Lk)("td",null,[(0,e.Lk)("div",dP,[(0,e.Lk)("div",cP,[(0,e.Lk)("button",{onClick:(0,C.D$)(b=>a.toggleFontBold(g),["prevent","stop"]),class:(0,l.C4)(["fstyle",{active:t.fonts[g]["$font-weight"]==="bold"}]),"arial-label":"Bold",disabled:!a.currentFontsVariants[g].includes("bold")},s[4]||(s[4]=[(0,e.Lk)("svg",{inline:"",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{class:"fill",fill:"#000","fill-rule":"nonzero",d:"M15.6 11.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 7.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}),(0,e.Lk)("path",{d:"M0 0h24v24H0z"})])],-1)]),10,uP),(0,e.Lk)("button",{onClick:(0,C.D$)(b=>a.toggleFontItalic(g),["prevent","stop"]),class:(0,l.C4)(["fstyle",{active:t.fonts[g]["$font-style"]==="italic"}]),"arial-label":"Italic",disabled:!a.currentFontsVariants[g].includes("italic")},s[5]||(s[5]=[(0,e.Lk)("svg",{inline:"",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,e.Lk)("g",{fill:"none","fill-rule":"evenodd"},[(0,e.Lk)("path",{d:"M0 0h24v24H0z"}),(0,e.Lk)("path",{class:"fill",fill:"#000","fill-rule":"nonzero",d:"M10 5v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V5z"})])],-1)]),10,_P)]),(0,e.Lk)("div",pP,[(0,e.bo)((0,e.Lk)("input",{type:"number",min:"1",max:"60",step:a.fontSizeInputStep[g],class:"fsize form-control","onUpdate:modelValue":b=>t.fontSizeValue[g]=b,onChange:b=>a.updateFontSize(g)},null,40,mP),[[C.Jo,t.fontSizeValue[g],void 0,{number:!0}]]),(0,e.bo)((0,e.Lk)("select",{class:"fsize form-control","onUpdate:modelValue":b=>t.fontSizeUnit[g]=b,onChange:b=>a.updateFontSizeUnit(g)},[(0,e.Lk)("option",{value:t.FONT_SIZE_SPACE},(0,l.v_)(t.$t("flat:score.layout.textFont.size.unitSpace")),9,fP),(0,e.Lk)("option",{value:t.FONT_SIZE_POINT},(0,l.v_)(t.$t("flat:score.layout.textFont.size.unitPoint")),9,hP)],40,gP),[[C.u1,t.fontSizeUnit[g]]])])])]),(0,e.Lk)("td",vP,[(0,e.Lk)("button",{onClick:(0,C.D$)(b=>a.removeTextTypeCustomization(g),["prevent","stop"]),class:"fdel","aria-label":"Delete customization"},s[6]||(s[6]=[(0,e.Lk)("svg",{inline:"",xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15"},[(0,e.Lk)("path",{class:"fill",d:"M9.885 5.11c-.184-.18-.492-.17-.688.03L7.5 6.82 5.806 5.14c-.197-.2-.504-.21-.688-.03-.184.19-.174.49.022.69l1.695 1.68L5.14 9.17c-.197.2-.207.5-.023.68.183.19.49.18.688-.02L7.5 8.15l1.697 1.68c.196.2.504.21.688.02.183-.18.174-.48-.023-.68L8.166 7.48 9.862 5.8c.197-.2.206-.5.023-.69zM7.5 14a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13zm0-14a7.5 7.5 0 1 0 0 15 7.5 7.5 0 0 0 0-15z"})],-1)]),8,yP)])]))),128)),a.availableNewTextTypes.length>0?((0,e.uX)(),(0,e.CE)("tr",bP,[(0,e.bo)(((0,e.uX)(),(0,e.CE)("td",EP,[(0,e.Lk)("button",{class:"fadd ddn-trigger",onClick:s[1]||(s[1]=(0,C.D$)(()=>{},["prevent"]))},[s[7]||(s[7]=(0,e.Lk)("svg",{inline:"",alt:"Add",class:"ddn-align",width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg"},[(0,e.Lk)("path",{d:"M6.5 12a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11zm0-12A6.5 6.5 0 0 0 0 6.5 6.5 6.5 0 0 0 6.5 13 6.5 6.5 0 0 0 13 6.5 6.5 6.5 0 0 0 6.5 0zm2.977 6.01h-2.49V3.52c0-.29-.217-.52-.487-.52s-.488.23-.488.52v2.49h-2.49c-.287 0-.52.22-.52.49s.233.49.52.49h2.49v2.49c0 .28.218.52.488.52s.488-.24.488-.52V6.99h2.49c.287 0 .52-.22.52-.49s-.233-.49-.52-.49z",fill:"#4DA3F8","fill-rule":"evenodd",class:"fill"})],-1)),(0,e.eW)(" "+(0,l.v_)(t.$t("flat:score.layout.textFont.specific-add")),1)]),(0,e.Lk)("div",CP,[s[8]||(s[8]=(0,e.Lk)("div",{"x-arrow":""},null,-1)),(0,e.Lk)("div",null,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.availableNewTextTypes,g=>((0,e.uX)(),(0,e.CE)("button",{key:g,onClick:(0,C.D$)(b=>a.addTextTypeCustomization(g),["prevent"])},(0,l.v_)(t.$t(`flat:score.layout.textFont.t.${g}`)),9,SP))),128))])])])),[[u,{positionFixed:!0}]])])):(0,e.Q3)("",!0)]),t.fontSelectingType?((0,e.uX)(),(0,e.Wv)(h,{key:0,onClose:s[2]||(s[2]=g=>t.fontSelectingType=null),onChooseFont:s[3]||(s[3]=g=>a.setTextFontFamily(g))})):(0,e.Q3)("",!0)])}var LP=o(890720),AP=o(840884),js=o(737903),Ur=o(273885),fo=o(210943),Br=o(69587),jr=o(550594);const MP={list(){return jr.A.get(`${jr.A.apiv2baseurl}/fonts`)}};var DP=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const ho=(0,A.nY)("fonts",()=>{const t=(0,te.KR)([]),s=(0,te.KR)(!1),n=(0,te.KR)(null),r=(0,te.KR)("all"),d=(0,te.KR)("popular"),a=(0,e.EW)(()=>{let b=t.value.filter(P=>r.value==="all"||r.value===P.category).filter(P=>!n.value||P.family.toLowerCase().includes(n.value.toLowerCase()));return d.value==="alphabetical"&&(b=b.sort((P,F)=>P.family<F.family?-1:P.family>F.family?1:0)),b}),f=(0,e.EW)(()=>{const b={};return t.value.forEach(P=>{b[P.family]=P}),b});function h(b){b.forEach(P=>{P.previewCss.regularFamily=`FlatPreview ${P.family}`}),t.value=b}function u(){return DP(this,null,function*(){if(t.value.length>0)return t.value;try{s.value=!0;const b=yield MP.list();return h(b),s.value=!1,b}catch(b){throw s.value=!1,(0,ze.O)().displayError({error:b}),(0,pe.vV)(b),b}})}function g(){if(document.getElementById("flat-fonts-previews"))return;let b="";t.value.forEach(F=>{b+=F.previewCss.regular});const P=document.createElement("style");P.innerHTML=b,P.setAttribute("id","flat-fonts-previews"),document.getElementsByTagName("head")[0].appendChild(P)}return{fonts:t,fontsByFamily:f,filterSearch:n,filterCategory:r,displayedFonts:a,sort:d,loadFonts:u,injectFontsPreviews:g}});var TP=o(338770);const OP={class:"d-fonts"},kP={class:"fontsfilter"},xP={class:"label-ext-small",for:"fonts-filter-cat"},wP={class:"label-ext-small",for:"fonts-filter-sort"},IP={key:0,class:"fontslist"},RP=["onClick"],FP={key:1,class:"fontsnotfound"},WP={class:"description"};function UP(t,s,n,r,d,a){const f=(0,e.g2)("FSearchInput"),h=(0,e.g2)("FSelectInput"),u=(0,e.g2)("ContentDialog");return(0,e.uX)(),(0,e.Wv)(u,{regularWidth:800,ref:"dialogFontPicker",contentPadding:!0},{default:(0,e.k6)(()=>[(0,e.Lk)("div",OP,[(0,e.Lk)("button",{class:"d-close",onClick:s[0]||(s[0]=g=>a.closeDialog())},s[4]||(s[4]=[(0,e.Lk)("img",{src:TP},null,-1)])),(0,e.Lk)("h3",null,(0,l.v_)(t.$t("flat:fontpicker.title")),1),(0,e.Lk)("div",kP,[(0,e.bF)(f,{modelValue:a.filterSearch,"onUpdate:modelValue":s[1]||(s[1]=g=>a.filterSearch=g),placeholder:t.$t("flat:fontpicker.search-placeholder"),autofocus:"",name:"fontsSerchInput"},null,8,["modelValue","placeholder"]),r.isSmallScreen?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,l.C4)(t.$style.filters)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style["row-container"])},[(0,e.Lk)("label",xP,(0,l.v_)(t.$t("flat:show"))+":",1),(0,e.bF)(h,{id:"fonts-filter-cat",modelValue:a.filterCategory,"onUpdate:modelValue":s[2]||(s[2]=g=>a.filterCategory=g),values:r.filterOptions},null,8,["modelValue","values"])],2),(0,e.Lk)("div",{class:(0,l.C4)(t.$style["row-container"])},[(0,e.Lk)("label",wP,(0,l.v_)(t.$t("flat:sort.title"))+":",1),(0,e.bF)(h,{id:"fonts-filter-sort",modelValue:a.sort,"onUpdate:modelValue":s[3]||(s[3]=g=>a.sort=g),values:r.sortOptions},null,8,["modelValue","values"])],2)],2))]),r.displayedFonts.length>0?((0,e.uX)(),(0,e.CE)("div",IP,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(r.displayedFonts,g=>((0,e.uX)(),(0,e.CE)("button",{key:g.family,style:(0,l.Tr)({"font-family":g.previewCss.regularFamily}),onClick:(0,C.D$)(b=>a.chooseFont(g.family),["prevent","stop"])},(0,l.v_)(g.family),13,RP))),128))])):((0,e.uX)(),(0,e.CE)("div",FP,[s[5]||(s[5]=(0,e.Lk)("div",{class:"emoji"},"(\u0387.\u0387)",-1)),(0,e.Lk)("div",WP,(0,l.v_)(t.$t("flat:fontpicker.not-found")),1)]))])]),_:1},512)}var BP=Object.defineProperty,jP=Object.defineProperties,KP=Object.getOwnPropertyDescriptors,Kr=Object.getOwnPropertySymbols,NP=Object.prototype.hasOwnProperty,XP=Object.prototype.propertyIsEnumerable,Nr=(t,s,n)=>s in t?BP(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,$P=(t,s)=>{for(var n in s||(s={}))NP.call(s,n)&&Nr(t,n,s[n]);if(Kr)for(var n of Kr(s))XP.call(s,n)&&Nr(t,n,s[n]);return t},zP=(t,s)=>jP(t,KP(s));const HP={name:"DialogFontPicker",components:{FSelectInput:po.A,FSearchInput:Or,ContentDialog:ft.A},setup(){const t=ho(),{t:s}=(0,La.Bd)(),n=(0,yt.k)(),{isSmallScreen:r}=(0,A.bP)(n),d=(0,te.KR)([{value:"all",name:s("flat:fontpicker.all")},{value:"display",name:"Display"},{value:"handwriting",name:"Handwriting"},{value:"monospace",name:"Monospace"},{value:"serif",name:"Serif"},{value:"sans-serif",name:"Sans Serif"}]),a=(0,te.KR)([{value:"popular",name:s("flat:sort.popular")},{value:"alphabetical",name:s("flat:sort.alphabetic")}]);return{filterOptions:d,sortOptions:a,displayedFonts:(0,e.EW)(()=>t.displayedFonts),storeFilterCategory:(0,e.EW)(()=>t.filterCategory),storeFilterSearch:(0,e.EW)(()=>t.filterSearch),storeSort:(0,e.EW)(()=>t.sort),loadFonts:t.loadFonts,injectFontsPreviews:t.injectFontsPreviews,isSmallScreen:r}},emits:["chooseFont","close"],computed:{filterCategory:{get(){return this.storeFilterCategory},set(t){const s=ho();s.filterCategory=t}},filterSearch:{get(){return this.storeFilterSearch},set(t){const s=ho();s.filterSearch=t}},sort:{get(){return this.storeSort},set(t){const s=ho();s.sort=t}}},methods:zP($P({},(0,A.i0)(z.j,["showDialog","hideDialog"])),{chooseFont(t){this.$emit("chooseFont",t)},closeDialog(){var t;(t=this.$refs.dialogUpgrade)!=null&&t.open&&this.$refs.dialogUpgrade.close(),this.$emit("close")}}),created(){this.loadFonts().then(()=>{this.injectFontsPreviews()})}};var VP=o(174700),QP=o.n(VP);const Xr={};Xr.$style=QP();const GP=(0,k.A)(HP,[["render",UP],["__cssModules",Xr]]),JP={class:"font-family-input"};function YP(t,s,n,r,d,a){const f=(0,e.g2)("edit-icon");return(0,e.uX)(),(0,e.CE)("button",JP,[(0,e.Lk)("span",{style:(0,l.Tr)({"font-family":a.fontFamilyPreview})},(0,l.v_)(n.family),5),(0,e.bF)(f)])}const ZP={name:"FontFamilyInput",components:{editIcon:Rt.A},props:{family:{type:String,required:!0}},computed:{fontFamilyPreview(){return`FlatPreview ${this.family}`}}},qP=(0,k.A)(ZP,[["render",YP]]),vo="fontSizeSpace",Wo="fontSizePoint",e6=.01,t6=1,s6=[lt.default.FRET_NUMBER],o6={name:"TextFontLayout",emits:["notifyChange","setInitialConfig"],props:{scoreData:{type:Object,required:!0},providedConfig:{type:Object,default:null}},components:{DialogFontPicker:GP,FontFamilyInput:qP},data(){const t={TEXT_TYPE:lt.default.values,FONT_SIZE_SPACE:vo,FONT_SIZE_POINT:Wo,NO_PROPS_LIST:s6,fonts:{},fontsDefaults:{},fontSelectingType:null,fontSizeValue:{},fontSizeUnit:{}};return lt.default.values.forEach(s=>{t.fonts[s]={},t.fontsDefaults[s]={}}),t},setup(){const t=ho();return{fontsByFamily:(0,e.EW)(()=>t.fontsByFamily),loadFonts:t.loadFonts,injectFontsPreviews:t.injectFontsPreviews}},computed:{adagioData(){return this.scoreData.adagioData},globalFontFamily(){return this.fonts.global["$font-family"]||this.fontsDefaults.global["$font-family"]},availableNewTextTypes(){return lt.default.values.filter(t=>t!=="global"&&!this.fonts[t]["$font-family"])},customizedTextTypes(){return lt.default.values.filter(t=>t!==lt.default.GLOBAL&&this.fonts[t]["$font-family"])},currentFontsVariants(){const t={};return lt.default.values.forEach(s=>{var n;t[s]=((n=this.fontsByFamily[this.fonts[s]["$font-family"]])==null?void 0:n.variants)||[]}),t},fontSizeInputStep(){const t={};return lt.default.values.forEach(s=>{t[s]=this.fontSizeUnit[s]===vo?e6:t6}),t}},methods:{openFontPicker(t){this.fontSelectingType=t},setTextFontFamily(t){const s=this.fontSelectingType;this.fontSelectingType=null,(0,Oe.set)(this.fonts[s],"$font-family",t),(0,Oe.set)(this.fonts[s],"$font-weight","normal"),(0,Oe.set)(this.fonts[s],"$font-style","normal"),this.scheduleUpdatePreview()},toggleFontBold(t){const s=this.fonts[t];s["$font-weight"]==="bold"?(0,Oe.set)(s,"$font-weight","normal"):(0,Oe.set)(s,"$font-weight","bold"),this.scheduleUpdatePreview()},toggleFontItalic(t){const s=this.fonts[t];s["$font-style"]==="italic"?(0,Oe.set)(s,"$font-style","normal"):(0,Oe.set)(s,"$font-style","italic"),this.scheduleUpdatePreview()},updateFontSize(t){const s=this.fonts[t];let n=this.fontSizeValue[t].toString();this.fontSizeUnit[t]===vo&&(n+=fo.A.SP_SUFFIX),(0,Oe.set)(s,"$font-size",n),this.scheduleUpdatePreview()},updateFontSizeUnit(t){const s=this.adagioData,n=this.fontSizeUnit[t],r=this.fontSizeValue[t],d=(0,LP.A)(Br.S),a=(0,AP.A)({dpi:Br.S,milimeters:s.getMillimetersScaling(),tenths:s.getTenthsScaling()});n===Wo?(0,Oe.set)(this.fontSizeValue,t,Math.round(r*a/d)):(0,Oe.set)(this.fontSizeValue,t,Ot(r*d/a)),this.updateFontSize(t)},addTextTypeCustomization(t){(0,Oe.set)(this.fonts[t],"$font-family",this.globalFontFamily),(0,Oe.set)(this.fonts[t],"$font-weight","normal"),(0,Oe.set)(this.fonts[t],"$font-style","normal");const s={},n=Ur.A.getTextTypeFontSize(s,t);(0,Oe.set)(this.fonts[t],"$font-size",n);const r=fo.A.getFloat(n);(0,Oe.set)(this.fontSizeValue,t,r),fo.A.isUnitSpace(n)?(0,Oe.set)(this.fontSizeUnit,t,vo):(0,Oe.set)(this.fontSizeUnit,t,Wo),this.scheduleUpdatePreview()},removeTextTypeCustomization(t){(0,Oe.set)(this.fonts,t,{}),this.scheduleUpdatePreview()},scheduleUpdatePreview(){(0,e.dY)(()=>this.updatePreview())},updatePreview(){const t=(0,js.default)(this.fonts);this.$emit("notifyChange",{key:Us,config:t})},getConfigFromScore(){const t={};return lt.default.values.forEach(s=>{t[s]=(0,js.default)(this.adagioData.getFontEntry(s))}),t},applyConfigLocally(t){this.fonts=(0,js.default)(t),Object.entries(this.fonts).forEach(([s,n])=>{if(as.default.hasFontSize(n)){const d=as.default.getFontSize(n),a=fo.A.getFloat(d);(0,Oe.set)(this.fontSizeValue,s,a),fo.A.isUnitSpace(d)?(0,Oe.set)(this.fontSizeUnit,s,vo):(0,Oe.set)(this.fontSizeUnit,s,Wo)}const r=s!==lt.default.GLOBAL?s:lt.default.TITLE;(0,Oe.set)(this.fontsDefaults,s,(0,js.default)(Ur.A.getDefaultFontEntry(r)))})}},created(){const t=this.getConfigFromScore();this.providedConfig?this.applyConfigLocally(this.providedConfig):this.applyConfigLocally(t),this.$emit("setInitialConfig",{key:Us,initialConfig:t}),this.loadFonts().then(()=>{this.injectFontsPreviews()})}};var tA=o(691045);const n6=(0,k.A)(o6,[["render",PP]]);var i6=Object.defineProperty,a6=Object.defineProperties,r6=Object.getOwnPropertyDescriptors,$r=Object.getOwnPropertySymbols,l6=Object.prototype.hasOwnProperty,d6=Object.prototype.propertyIsEnumerable,zr=(t,s,n)=>s in t?i6(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,yo=(t,s)=>{for(var n in s||(s={}))l6.call(s,n)&&zr(t,n,s[n]);if($r)for(var n of $r(s))d6.call(s,n)&&zr(t,n,s[n]);return t},Hr=(t,s)=>a6(t,r6(s)),Vr=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const c6={PAGES:"pages",STAVES:"staves",HIDE_PARTS:"hide-parts",MEASURES:"measures",MEASURE_NUMBERS:"measure-numbers",MUSIC_FONT:"music-font",TEXT_STYLES:"text-styles"},u6=(0,e.pM)({name:"LayoutSettings",emits:["setProcessing","openPage","setInitialConfig","notifyChange","cancelEditedLayout","saveLayoutItems","previewScore"],components:{MusicFontLayout:gS,MeasuresNumbersLayout:U3,MeasuresLayout:A3,HideEmptyPartsLayout:c3,TextFontLayout:n6,StavesLayout:ZS,PagesLayout:BS,CreateLayout:e3,LayoutCreated:h3,ChoiceMethodAccordion:BC,FPowerButton:io.n$,Spacing:xC.K,plus:Ms.A},props:{scoreData:{type:Object,required:!0},processing:{type:Boolean,required:!0},configs:{type:Object,required:!0},canSave:{type:Boolean,required:!0}},setup(){const t=(0,fe.F)(),s=(0,N.q6)(),n=(0,ze.O)(),r=(0,nt.B)();return{account:(0,e.EW)(()=>t.account),accountFeatures:(0,e.EW)(()=>t.accountFeatures),isMusicSnippet:(0,e.EW)(()=>s.isMusicSnippet),displayMessage:n.displayMessage,addExperience:r.addExperience,loadDocumentSettings:s.loadDocumentSettings}},data(){return{EditedLayout:c6,LayoutPage:mr(),selectedLayout:null,stickyObserver:null,showLegacySaveAsDefault:!1,displayCreateLayout:!1,displayLayoutCreated:!1,createdLayoutName:"",updateKey:1}},computed:Hr(yo(yo({},(0,A.aH)(rs.K3,["scoreLayoutLoading","hasLegacyDefaultScoreLayout","legacyDefaultScoreLayout","scoreLayoutsAvailableWithPlan"])),(0,A.aH)(z.j,["currentDialogKey"])),{dialogKey(){return this.currentDialogKey},enabledFeatureCustomLayout(){return this.accountFeatures.customLayout},displayMainUi(){return![Gt,Qt].includes(this.page)},adagioData(){return this.scoreData.adagioData},hasEditedContent(){return!bC.Ay.isEmpty(this.configs)},saveTextKey(){return this.canSave?"flat:save":"flat:upgrade-to-save"}}),methods:Hr(yo(yo(yo({},(0,A.i0)(ut.B,["showUpgradeDialog"])),(0,A.i0)(rs.K3,["fetchScoreLayouts","updateScoreLayout"])),(0,A.i0)(z.j,["hideDialog","showDialog"])),{close(){this.loadDocumentSettings(null)},setProcessing(t){this.$emit("setProcessing",t)},toggleEditedLayoutItem(t,s){t===this.selectedLayout&&(t=null),this.editLayoutItem(t,s)},editLayoutItem(t,s){t!==this.selectedLayout&&(this.selectedLayout=t,s||this.resetPreview(),this.addExperience("onboarding.layout.openItem"))},exitLayoutItem(){this.selectedLayout=null,this.resetPreview()},openPage(t){this.addExperience("onboarding.layout.openItem"),this.$emit("openPage",t)},resetPreview(){this.previewScore(null)},setInitialConfig(t){this.$emit("setInitialConfig",t)},notifyChange(t){this.$emit("notifyChange",t),t.key==="text-styles"&&this.updateChoiceMethodAccordionContentHeight(t.key)},cancelEditedLayout(){this.selectedLayout=null,this.updateKey+=1,this.$emit("cancelEditedLayout")},save(){this.selectedLayout=null,this.$emit("saveLayoutItems")},openCreateLayout(){if(!this.scoreLayoutsAvailableWithPlan){this.showUpgradeDialog({feature:"customLayout"});return}this.showDialog({key:"createLayout"})},createLayout(t){return Vr(this,null,function*(){this.setProcessing(!0);const s=this.extractScoreLayoutFromScore();s.name=t,s.key=KC()(t+Math.random().toString());try{yield this.updateScoreLayout(s),this.setProcessing(!1),this.showDialog({key:"layoutCreated"}),this.createdLayoutName=t,this.addExperience("editor.create-score-layout")}catch(n){throw this.setProcessing(!1),this.hideDialog(),n}})},closeLayoutCreated(){this.displayLayoutCreated=!1},extractScoreLayoutFromScore(){return On(this.adagioData)},saveLayoutAsDefault(){return Vr(this,null,function*(){if(!this.scoreLayoutsAvailableWithPlan){this.showUpgradeDialog({feature:"customLayout"});return}const t=this.extractScoreLayoutFromScore();this.hasLegacyDefaultScoreLayout?t.id=this.legacyDefaultScoreLayout.id:t.key=rs.uh,t.name=rs.Ib,this.setProcessing(!0);try{yield this.updateScoreLayout(t),this.setProcessing(!1),this.displayMessage({type:"default",text:_.MR.t("flat:account.layout.saved")})}catch(s){throw this.setProcessing(!1),s}})},previewScore(t){this.$emit("previewScore",t)},updateChoiceMethodAccordionContentHeight(t){this.$refs[t].calcContentMaxHeight()},setUpStickyInterceptor(){this.stickyObserver=new IntersectionObserver(([t])=>t.target.toggleAttribute("stuck",t.intersectionRatio<1),{threshold:[1]}),this.stickyObserver.observe(this.$refs.stickyButtons)}}),created(){this.pageLayout=new mo.A(this.account),this.fetchScoreLayouts()},mounted(){this.setUpStickyInterceptor()},beforeUnmount(){this.stickyObserver.unobserve(this.$refs.stickyButtons)}});var oA=o(133667),_6=o(916880),p6=o.n(_6);const Qr={};Qr.$style=p6();const m6=(0,k.A)(u6,[["render",yC],["__cssModules",Qr]]),g6={class:"layout-templates"},f6={class:"temlates-group"},h6={key:0,class:"empty-state"},v6={key:1,class:"template"},y6={class:"temlates-group"},b6={class:"template"},E6={class:"actions-container"};function C6(t,s,n,r,d,a){const f=(0,e.g2)("layout-template"),h=(0,e.g2)("f-button"),u=(0,e.g2)("f-power-button"),g=(0,e.g2)("remove-layout");return(0,e.uX)(),(0,e.CE)("div",g6,[(0,e.Lk)("div",f6,[(0,e.Lk)("h3",null,(0,l.v_)(t.$t("flat:score.layout.templates.my-layouts")),1),a.hasOwnTemplates?((0,e.uX)(),(0,e.CE)("ul",v6,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.myTemplates,b=>((0,e.uX)(),(0,e.CE)("li",{key:b.id},[(0,e.bF)(f,{template:b,"is-active":a.isActive(b.hash),"is-selected":a.isSelected(b.id),onSetDefaultTemplate:s[0]||(s[0]=P=>a.setDefaultTemplate(P)),onRemoveLayout:s[1]||(s[1]=P=>a.openRemoveDialog(P)),onSelect:s[2]||(s[2]=P=>a.useTemplateForPreview(P))},null,8,["template","is-active","is-selected"])]))),128))])):((0,e.uX)(),(0,e.CE)("div",h6,[s[8]||(s[8]=(0,e.Lk)("div",{class:"image"},[(0,e.Lk)("img",{src:Ka})],-1)),(0,e.Lk)("h4",null,(0,l.v_)(t.$t("flat:score.layout.templates.empty-state.title")),1),(0,e.Lk)("p",null,(0,l.v_)(t.$t("flat:score.layout.templates.empty-state.desc")),1)]))]),(0,e.Lk)("div",y6,[(0,e.Lk)("h3",null,(0,l.v_)(t.$t("flat:score.layout.templates.flat-layouts")),1),(0,e.Lk)("ul",b6,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.flatTemplates,b=>((0,e.uX)(),(0,e.CE)("li",{key:b.id},[(0,e.bF)(f,{template:b,"is-active":a.isActive(b.hash),"is-selected":a.isSelected(b.id),onSetDefaultTemplate:s[3]||(s[3]=P=>a.setDefaultTemplate(P)),onRemoveLayout:s[4]||(s[4]=P=>a.openRemoveDialog(P)),onSelect:s[5]||(s[5]=P=>a.useTemplateForPreview(P))},null,8,["template","is-active","is-selected"])]))),128))])]),(0,e.Lk)("div",E6,[a.canUseSelectedLayout?((0,e.uX)(),(0,e.Wv)(h,{key:0,onClick:a.apply,loading:n.processing,disabled:t.selectedLayoutId===null,theme:"fill","default-text":"flat:score.layout.templates.apply"},null,8,["onClick","loading","disabled"])):((0,e.uX)(),(0,e.Wv)(u,{key:1,"show-icon":!1,onClick:a.apply,"default-text":"flat:score.layout.templates.apply"},null,8,["onClick"]))]),t.displayRemove?((0,e.uX)(),(0,e.Wv)(g,{key:0,processing:n.processing,"layout-name":t.removedLayout.name,onRemoveLayout:s[6]||(s[6]=b=>a.removeLayout()),onClose:s[7]||(s[7]=b=>a.closeRemoveLayout())},null,8,["processing","layout-name"])):(0,e.Q3)("",!0)])}var S6=o(277937),P6=o(309927),Gr=o.n(P6),L6=o(523698);const A6={key:2,class:"td"},M6={class:"ddn-trigger"},D6={class:"ddn-content item-actions"},T6={class:"layout-actions"};function O6(t,s,n,r,d,a){const f=(0,e.g2)("chip"),h=(0,e.g2)("optionsVertical24"),u=(0,e.g2)("edit"),g=(0,e.g2)("popover-item"),b=(0,e.g2)("trash"),P=(0,e.gN)("dropdown");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(["layout-template",{"is-selected":n.isSelected}])},[(0,e.Lk)("h4",{onClick:s[0]||(s[0]=F=>a.useTemplateForPreview())},(0,l.v_)(n.template.name),1),n.isActive?((0,e.uX)(),(0,e.Wv)(f,{key:0,class:"is-active"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:score.layout.templates.template.is-active")),1)]),_:1})):(0,e.Q3)("",!0),n.template.isDefault?((0,e.uX)(),(0,e.Wv)(f,{key:1,class:"is-default"},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(t.$t("flat:score.layout.templates.template.is-default")),1)]),_:1})):(0,e.Q3)("",!0),a.hasActions?(0,e.bo)(((0,e.uX)(),(0,e.CE)("div",A6,[(0,e.Lk)("a",M6,[(0,e.bF)(h)]),(0,e.Lk)("div",D6,[s[3]||(s[3]=(0,e.Lk)("div",{"x-arrow":""},null,-1)),(0,e.Lk)("div",T6,[a.canMakeDefault?((0,e.uX)(),(0,e.Wv)(g,{key:0,as:"button",onClick:s[1]||(s[1]=F=>a.makeDefault())},{icon:(0,e.k6)(()=>[(0,e.bF)(u)]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,l.v_)(t.$t("flat:score.layout.templates.template.make-default")),1)]),_:1})):(0,e.Q3)("",!0),a.canRemove?((0,e.uX)(),(0,e.Wv)(g,{key:1,as:"button",onClick:s[2]||(s[2]=F=>a.remove())},{icon:(0,e.k6)(()=>[(0,e.bF)(b)]),default:(0,e.k6)(()=>[(0,e.eW)(" "+(0,l.v_)(t.$t("flat:score.layout.templates.template.delete")),1)]),_:1})):(0,e.Q3)("",!0)])])])),[[P,{boundariesElement:"scrollParent"}]]):(0,e.Q3)("",!0)],2)}const k6={class:"chip"},x6={key:0,class:"icon left"},w6={key:1,class:"icon right"};function I6(t,s,n,r,d,a){return(0,e.uX)(),(0,e.CE)("div",k6,[a.leftIcon?((0,e.uX)(),(0,e.CE)("div",x6,[(0,e.RG)(t.$slots,"leftIcon")])):(0,e.Q3)("",!0),(0,e.RG)(t.$slots,"default"),a.rightIcon?((0,e.uX)(),(0,e.CE)("div",w6,[(0,e.RG)(t.$slots,"rightIcon")])):(0,e.Q3)("",!0)])}const R6={name:"FChip",computed:{leftIcon(){return this.$slots.leftIcon},rightIcon(){return this.$slots.rightIcon}}};var iA=o(982286);const F6=(0,k.A)(R6,[["render",I6]]);var W6=Object.defineProperty,U6=Object.defineProperties,B6=Object.getOwnPropertyDescriptors,Jr=Object.getOwnPropertySymbols,j6=Object.prototype.hasOwnProperty,K6=Object.prototype.propertyIsEnumerable,Yr=(t,s,n)=>s in t?W6(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,N6=(t,s)=>{for(var n in s||(s={}))j6.call(s,n)&&Yr(t,n,s[n]);if(Jr)for(var n of Jr(s))K6.call(s,n)&&Yr(t,n,s[n]);return t},X6=(t,s)=>U6(t,B6(s));const $6={name:"LayoutTemplate",emits:["select","setDefaultTemplate","removeLayout"],components:{Chip:F6,PopoverItem:Mo.fv,optionsVertical24:Si.A,edit:Rt.A,trash:co.A},props:{template:{type:Object,required:!0},isActive:{type:Boolean,required:!0},isSelected:{type:Boolean,required:!0}},computed:X6(N6({},(0,A.aH)(rs.K3,["scoreLayoutsAvailableWithPlan"])),{hasActions(){return this.canRemove||this.canMakeDefault},canRemove(){return this.template.isRemovable},canMakeDefault(){return this.scoreLayoutsAvailableWithPlan&&!this.template.isDefault}}),methods:{useTemplateForPreview(){this.$emit("select",this.template)},makeDefault(){this.$emit("setDefaultTemplate",this.template.id)},remove(){this.$emit("removeLayout",this.template)}}};var lA=o(131660);const z6=(0,k.A)($6,[["render",O6],["__scopeId","data-v-fdf778c8"]]);function H6(t,s,n,r,d,a){const f=(0,e.g2)("f-button"),h=(0,e.g2)("FButtonGroup"),u=(0,e.g2)("ContentDialog");return(0,e.uX)(),(0,e.Wv)(u,{"data-cy":"confirm-remove-layout-template",class:"remove-layout",separateFooter:!1,separateHeader:!1,regularWidth:350,contentPadding:!0,title:a.dialogTitle,onClose:s[2]||(s[2]=g=>a.closeDialog())},{footer:(0,e.k6)(()=>[(0,e.bF)(h,null,{default:(0,e.k6)(()=>[(0,e.bF)(f,{"data-cy":"cancel",theme:"ghost-subdue",size:"small",type:"button",onClick:s[0]||(s[0]=g=>a.closeDialog()),"default-text":"flat:cancel"}),(0,e.bF)(f,{"data-cy":"cta",type:"button",size:"small",onClick:s[1]||(s[1]=g=>a.removeLayout()),"default-text":"flat:confirm",loading:n.processing},null,8,["loading"])]),_:1})]),_:1},8,["title"])}var V6=Object.defineProperty,Q6=Object.defineProperties,G6=Object.getOwnPropertyDescriptors,Zr=Object.getOwnPropertySymbols,J6=Object.prototype.hasOwnProperty,Y6=Object.prototype.propertyIsEnumerable,qr=(t,s,n)=>s in t?V6(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,Z6=(t,s)=>{for(var n in s||(s={}))J6.call(s,n)&&qr(t,n,s[n]);if(Zr)for(var n of Zr(s))Y6.call(s,n)&&qr(t,n,s[n]);return t},q6=(t,s)=>Q6(t,G6(s));const e4={name:"CreateLayout",emits:["close","removeLayout"],components:{DialogFooter:es.Es,ContentDialog:ft.A},props:{layoutName:{type:String,required:!0},processing:{type:Boolean,required:!0}},computed:{dialogTitle(){return this.$t("flat:score.layout.templates.remove-layout.title",{layoutName:this.layoutName})}},methods:q6(Z6({},(0,A.i0)(z.j,["hideDialog"])),{removeLayout(){this.$emit("removeLayout")},closeDialog(){this.$emit("close")}})};var cA=o(287405);const t4=(0,k.A)(e4,[["render",H6]]);var s4=o(341715);const o4=new Set(["pageWidth","pageHeight","pageMarginTop","pageMarginBottom","pageMarginLeft","pageMarginRight","pageNumberingStart","staffSize","minimalDistanceBetweenSystems","minimalDistanceBetweenStaves","hideEmptyPartsPolicy","notesSpacingCoeff","maxNbMeasuresPerSystem","measureNumberingPolicy","measureNumberingStart","hasPickupShift","noteHeadColorSystem","noteHeadColorOptions","noteHeadGlyphSystem","noteHeadDoType","musicFont","generalChordStyle","globalTextFontFamily","textFonts","jazzChordDisplay"]);function n4(t,s){return t.textType<s.textType?-1:t.textType>s.textType?1:0}function Uo(t){const s={};return Object.entries(t).forEach(([n,r])=>{o4.has(n)&&(s[n]=r)}),s.textFonts=s.textFonts.slice(),s.textFonts.sort(n4),s4.digest(s)}var i4=Object.defineProperty,a4=Object.defineProperties,r4=Object.getOwnPropertyDescriptors,el=Object.getOwnPropertySymbols,l4=Object.prototype.hasOwnProperty,d4=Object.prototype.propertyIsEnumerable,tl=(t,s,n)=>s in t?i4(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,ls=(t,s)=>{for(var n in s||(s={}))l4.call(s,n)&&tl(t,n,s[n]);if(el)for(var n of el(s))d4.call(s,n)&&tl(t,n,s[n]);return t},sl=(t,s)=>a4(t,r4(s)),xn=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});function c4(t){return!!t.flatLayoutName}function u4(t){return!t.flatLayoutName}const _4={name:"LayoutTemplates",emits:["cancelEditedLayout","setProcessing","previewScore","previewScore"],components:{LayoutTemplate:z6,RemoveLayout:t4,FPowerButton:io.n$},props:{scoreData:{type:Object,required:!0},processing:{type:Boolean,required:!0}},setup(){const t=(0,fe.F)(),s=(0,nt.B)(),n=(0,ze.O)();return{account:(0,e.EW)(()=>t.account),addExperience:s.addExperience,displayMessage:n.displayMessage}},data(){return{currentLayout:null,currentHash:null,selectedLayoutId:null,removedLayout:null,displayRemove:!1}},computed:sl(ls({},(0,A.aH)(rs.K3,["scoreLayoutLoading","scoreLayoutsAvailableWithPlan","scoreLayouts","scoreLayoutsList"])),{emptyStateTitle(){return this.$t("flat:score.layout.templates.empty-state.title")},emptyStateDesc(){return this.$t("flat:score.layout.templates.empty-state.desc")},adagioData(){return this.scoreData.adagioData},hasOwnTemplates(){return this.myTemplates.length>0},canUseSelectedLayout(){return this.scoreLayoutsAvailableWithPlan?!0:this.selectedLayoutId==="normal"},selectedLayout(){const t=this.flatTemplates.concat(this.myTemplates).find(s=>s.id===this.selectedLayoutId);return t||null},flatTemplates(){const t=(0,L6.A)(this.account);let s;return this.scoreLayoutsAvailableWithPlan?s=this.scoreLayoutsList.filter(c4):s=[{id:"normal",flatLayoutName:"normal",isDefault:!0},{id:"jazz",flatLayoutName:"jazz",isDefault:!1}],s.map(r=>{const d=S6.E(r.flatLayoutName),a=ls(ls({},t),d);Tn(a);const f=Uo(a);return{id:r.flatLayoutName,data:a,name:this.$t(`flat:score.layout.templates.flat-provided.${r.flatLayoutName}`),isDefault:r.isDefault,hash:f,isRemovable:!1}})},myTemplates(){return this.scoreLayoutsList.filter(u4).map(s=>{let n=s.name;s.key==="default"&&s.name==="Default"&&(n=this.$t("flat:score.layout.templates.old-default")),s=ls({},s),Tn(s);const r=Uo(s);return{id:s.id,data:s,name:n,hash:r,isDefault:s.isDefault,isRemovable:!0}})}}),methods:sl(ls(ls({},(0,A.i0)(ut.B,["showUpgradeDialog"])),(0,A.i0)(rs.K3,["fetchScoreLayouts","updateScoreLayout","removeScoreLayout"])),{isActive(t){return this.currentHash===t},isSelected(t){return this.selectedLayoutId===t},useTemplateForPreview(t){this.selectedLayoutId=t.id;const s=Gr()(t.data);this.previewScore(s)},setDefaultTemplate(t){return xn(this,null,function*(){const s=ls({},this.scoreLayouts[t]);s.isDefault=!0,this.setProcessing(!0),yield this.updateScoreLayout(s),this.addExperience("editor.change-default-score-layout"),this.setProcessing(!1)})},apply(){return xn(this,null,function*(){var t;if(!this.canUseSelectedLayout){this.showUpgradeDialog({feature:"customLayout"});return}if(this.selectedLayout!==null){this.setProcessing(!0);try{this.addExperience("editor.use-default-score-layout");const s=Gr()(this.selectedLayout.data);this.scoreData.scoreActions.queueAdagioActions(s),yield this.scoreData.scoreActions.executeAdagioTransaction(),(t=this.scoreData.rt)!=null&&t.hasOngoingTransaction()&&(yield this.scoreData.rt.commitTransaction()),this.displayMessage({type:"default",text:_.MR.t("flat:account.layout.applied",{layoutName:this.selectedLayout.name})}),this.setProcessing(!1)}catch(s){throw this.setProcessing(!1),s}this.currentLayout=On(this.adagioData),this.currentHash=Uo(this.currentLayout),this.$emit("cancelEditedLayout"),this.selectedLayoutId=null}})},openRemoveDialog(t){this.removedLayout=t,this.displayRemove=!0},closeRemoveLayout(){this.displayRemove=!1,this.removedLayout=null},removeLayout(){return xn(this,null,function*(){const t=this.removedLayout.name;this.setProcessing(!0);try{yield this.removeScoreLayout(this.removedLayout),this.setProcessing(!1),this.removedLayout=null,this.displayRemove=!1,this.displayMessage({type:"default",text:_.MR.t("flat:score.layout.templates.remove-layout.success",{layoutName:t})})}catch(s){throw this.setProcessing(!1),this.removedLayout=null,this.displayRemove=!1,s}})},setProcessing(t){this.$emit("setProcessing",t)},resetPreview(){this.$emit("previewScore",null)},previewScore(t){this.$emit("previewScore",t)}}),created(){this.pageLayout=new mo.A(this.account),this.fetchScoreLayouts(),this.currentLayout=On(this.adagioData),this.currentHash=Uo(this.currentLayout)}};var _A=o(741871);const p4=(0,k.A)(_4,[["render",C6],["__scopeId","data-v-422acefb"]]),ol=o.p+"img/81d921bbc434bc5d856a.svg",nl=o.p+"img/e161da3d11fb6112a2a5.svg",m4=o.p+"img/da751c45c2cef12ee0bc.svg",g4=o.p+"img/18745b73eb71b8d1b160.svg",f4=o.p+"img/2ca4852f1a20677a6142.svg",h4=o.p+"img/67d71b4d7cb2103fb382.svg",v4=o.p+"img/551a1ef3600ca82ea19b.svg",y4=o.p+"img/9089e67811e86d7bd427.svg",b4=o.p+"img/b5c97f316c2c0f3669b1.svg",E4={class:"main-description"},C4={class:"cardsChoices"},S4={class:"cardsChoices"},P4={class:"cardsChoices"};function L4(t,s,n,r,d,a){const f=(0,e.g2)("arrowBackIcon"),h=(0,e.g2)("power-badge-icon"),u=(0,e.g2)("NoteheadsColorEditor"),g=(0,e.g2)("f-button");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(["ds-settings-wrap",t.localStyle.root])},[(0,e.Lk)("header",{class:(0,l.C4)(t.$style["settings-header"])},[(0,e.Lk)("button",{class:(0,l.C4)(t.$style["go-back"]),onClick:s[0]||(s[0]=(...b)=>a.back&&a.back(...b))},[(0,e.bF)(f)],2),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.title")),1),a.enabledFeatureDisplayMode?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(h,{key:0,class:(0,l.C4)(t.$style["power-badge"])},null,8,["class"]))],2),(0,e.Lk)("div",{class:(0,l.C4)(["ds-settings-card ds-layout no-select",t.localStyle.card])},[(0,e.Lk)("div",{class:(0,l.C4)(t.localStyle.scrollable)},[(0,e.Lk)("p",E4,(0,l.v_)(t.$t("flat:score.layout.notesHeads.description-long")),1),(0,e.Lk)("h3",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.color")),1),(0,e.Lk)("div",C4,[(0,e.Lk)("div",{onClick:s[1]||(s[1]=b=>a.setNotesColorMode(t.ColorDisplayMode.NORMAL)),class:(0,l.C4)(["cardChoice",{active:a.isActiveColorDisplay(t.ColorDisplayMode.NORMAL)}])},[s[12]||(s[12]=(0,e.Lk)("img",{src:ol},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.default")),1)],2),(0,e.Lk)("div",{onClick:s[2]||(s[2]=b=>a.setNotesColorMode(t.ColorDisplayMode.BOOMWHACKER)),class:(0,l.C4)(["cardChoice",{active:a.isActiveColorDisplay(t.ColorDisplayMode.BOOMWHACKER)}])},[s[13]||(s[13]=(0,e.Lk)("img",{src:nl},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.boomwhackers")),1)],2),(0,e.Lk)("div",{onClick:s[3]||(s[3]=b=>a.setEditingCustomColor(!0)),class:(0,l.C4)(["cardChoice",{active:a.isActiveColorDisplay(t.ColorDisplayMode.CUSTOM),[t.localStyle.customChoice]:!0,[t.localStyle.displayPreview]:n.displayPreview}])},[a.isActiveColorDisplay(t.ColorDisplayMode.CUSTOM)?((0,e.uX)(),(0,e.Wv)(u,{key:0,"colors-list":a.getColorsList(),onSetColorsList:a.setColorsList},null,8,["colors-list","onSetColorsList"])):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[s[14]||(s[14]=(0,e.Lk)("img",{src:nl},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.custom")),1)],64))],2)]),(0,e.Lk)("h3",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.shape")),1),(0,e.Lk)("div",S4,[(0,e.Lk)("div",{onClick:s[4]||(s[4]=b=>a.resetShape()),class:(0,l.C4)(["cardChoice",{active:a.isNoShape()}])},[s[15]||(s[15]=(0,e.Lk)("img",{src:ol},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.default")),1)],2),(0,e.Lk)("div",{onClick:s[5]||(s[5]=b=>a.setShape(t.DisplayModeType.PITCHES_NAMES)),class:(0,l.C4)(["cardChoice",{active:a.isEnabled(t.DisplayModeType.PITCHES_NAMES,!0)}])},[s[16]||(s[16]=(0,e.Lk)("img",{src:m4},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.notes-names")),1)],2),(0,e.Lk)("div",{onClick:s[6]||(s[6]=b=>a.setShape(t.DisplayModeType.SOLFEGE_TI)),class:(0,l.C4)(["cardChoice",{active:a.isEnabled(t.DisplayModeType.SOLFEGE_TI,!0)}])},[s[17]||(s[17]=(0,e.Lk)("img",{src:g4},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.solfege-ti")),1)],2),(0,e.Lk)("div",{onClick:s[7]||(s[7]=b=>a.setShape(t.DisplayModeType.SOLFEGE_SI)),class:(0,l.C4)(["cardChoice",{active:a.isEnabled(t.DisplayModeType.SOLFEGE_SI,!0)}])},[s[18]||(s[18]=(0,e.Lk)("img",{src:f4},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.solfege-si")),1)],2),a.isJapanese?((0,e.uX)(),(0,e.CE)("div",{key:0,onClick:s[8]||(s[8]=b=>a.setShape(t.DisplayModeType.SOLFEGE_JAPANESE)),class:(0,l.C4)(["cardChoice",{active:a.isEnabled(t.DisplayModeType.SOLFEGE_JAPANESE,!0)}])},[s[19]||(s[19]=(0,e.Lk)("img",{src:h4},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.solfege-japanese")),1)],2)):(0,e.Q3)("",!0),(0,e.Lk)("div",{onClick:s[9]||(s[9]=b=>a.setShape(t.DisplayModeType.NOTE_SHAPES)),class:(0,l.C4)(["cardChoice",{active:a.isEnabled(t.DisplayModeType.NOTE_SHAPES,!0)}])},[s[20]||(s[20]=(0,e.Lk)("img",{src:v4},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.shape-note")),1)],2)]),(0,e.Lk)("h3",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.doType")),1),(0,e.Lk)("div",P4,[(0,e.Lk)("div",{onClick:s[10]||(s[10]=b=>a.setDisplayMode(t.DisplayModeType.MOVABLE_DO,!0)),class:(0,l.C4)(["cardChoice",{active:a.isEnabled(t.DisplayModeType.MOVABLE_DO,!0)}])},[s[21]||(s[21]=(0,e.Lk)("img",{src:y4},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.movableDo")),1)],2),(0,e.Lk)("div",{onClick:s[11]||(s[11]=b=>a.setDisplayMode(t.DisplayModeType.MOVABLE_DO,!1)),class:(0,l.C4)(["cardChoice",{active:a.isEnabled(t.DisplayModeType.MOVABLE_DO,!1)}])},[s[22]||(s[22]=(0,e.Lk)("img",{src:b4},null,-1)),(0,e.Lk)("span",null,(0,l.v_)(t.$t("flat:score.layout.notesHeads.fixedDo")),1)],2)])],2),(0,e.Lk)("div",{class:(0,l.C4)(["ctas",t.localStyle.ctas])},[(0,e.bF)(g,{onClick:a.back,size:"large","default-text":"flat:back"},null,8,["onClick"])],2)],2)],2)}const A4=["onClick","data-cy"],M4=["onClick","data-cy"];function D4(t,s,n,r,d,a){const f=(0,e.g2)("DropdownTrigger"),h=(0,e.g2)("NoteColorPicker"),u=(0,e.g2)("Dropdown");return(0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(t.$style.wrapper)},[(0,e.Lk)("div",{class:(0,l.C4)(t.$style.title)},(0,l.v_)(t.$t("flat:score.layout.notesHeads.custom")),3),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.description)},(0,l.v_)(t.$t("flat:score.layout.notesHeads.custom-desc")),3),(0,e.Lk)("div",{class:(0,l.C4)(t.$style.keyboard)},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(d.pitches.black,g=>((0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(a.getKeyClasses(g)),key:g,onClick:(0,C.D$)(()=>a.updateOpenStatus(!0,g),["stop"]),"data-cy":`color-editor-key-${g}`},[(0,e.bF)(u,{class:(0,l.C4)(t.$style.label),ref_for:!0,ref:"ddn",open:a.isOpen(g),onOpenChange:b=>a.updateOpenStatus(b,g),"overflow-root-viewport":!0,distance:[0,10]},{trigger:(0,e.k6)(()=>[(0,e.bF)(f,{class:(0,l.C4)(t.$style.labelInner),style:(0,l.Tr)(a.getStyleForLabel(g))},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(g),1)]),_:2},1032,["class","style"])]),default:(0,e.k6)(()=>[(0,e.bF)(h,{onSetColor:a.setColor,onCloseDropdown:a.closeDropdown},null,8,["onSetColor","onCloseDropdown"])]),_:2},1032,["class","open","onOpenChange"])],10,A4))),128)),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(d.pitches.white,g=>((0,e.uX)(),(0,e.CE)("div",{class:(0,l.C4)(a.getKeyClasses(g)),key:g,onClick:(0,C.D$)(()=>a.updateOpenStatus(!0,g),["stop"]),"data-cy":`color-editor-key-${g}`},[(0,e.bF)(u,{class:(0,l.C4)(t.$style.label),ref_for:!0,ref:"ddn",open:a.isOpen(g),onOpenChange:b=>a.updateOpenStatus(b,g),"overflow-root-viewport":!0,distance:[0,10]},{trigger:(0,e.k6)(()=>[(0,e.bF)(f,{class:(0,l.C4)(t.$style.labelInner),style:(0,l.Tr)(a.getStyleForLabel(g))},{default:(0,e.k6)(()=>[(0,e.eW)((0,l.v_)(g),1)]),_:2},1032,["class","style"])]),default:(0,e.k6)(()=>[(0,e.bF)(h,{"data-cy":"note-color-picker",onSetColor:a.setColor,onCloseDropdown:a.closeDropdown},null,8,["onSetColor","onCloseDropdown"])]),_:2},1032,["class","open","onOpenChange"])],10,M4))),128))],2)],2)}var T4=o(868104),O4=Object.defineProperty,k4=Object.defineProperties,x4=Object.getOwnPropertyDescriptors,il=Object.getOwnPropertySymbols,w4=Object.prototype.hasOwnProperty,I4=Object.prototype.propertyIsEnumerable,al=(t,s,n)=>s in t?O4(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,R4=(t,s)=>{for(var n in s||(s={}))w4.call(s,n)&&al(t,n,s[n]);if(il)for(var n of il(s))I4.call(s,n)&&al(t,n,s[n]);return t},F4=(t,s)=>k4(t,x4(s));const W4={white:["C","D","E","F","G","A","B"],black:["C#","D#","F#","G#","A#"]},U4="#FFFFFF00",rl="cachedCustomColorsList";function B4(t){return t?Number.parseInt(t.replace("#",""),16)<16777215/2:!1}const j4={name:"NoteheadsColorEditor",emits:["setColorsList"],props:{colorsList:{type:Array,default:()=>[]}},data(){return{pitches:W4,activePitch:null}},components:{NoteColorPicker:T4.A,Dropdown:Ts.m,DropdownTrigger:Ts.u},methods:{pitchStringToStepAlter(t){return{step:t[0],alter:t.length===2?1:0}},getConfigForKey(t){const{step:s,alter:n}=this.pitchStringToStepAlter(t);return this.colorsList.find(r=>r.pitch&&r.pitch.step===s&&r.pitch.alter===n)},getConfigIndexForKey(t){const{step:s,alter:n}=this.pitchStringToStepAlter(t);return this.colorsList.findIndex(r=>r.pitch&&r.pitch.step===s&&r.pitch.alter===n)},getStyleForLabel(t){const s=this.getConfigForKey(t);let n=s?s.color:"#fff";n===U4&&(n="repeating-conic-gradient(#808080 0% 25%, #fff 0% 50%) 50% / 20px 20px");const r={background:n};return s&&B4(s.color)&&(r.color="#fff"),(0,te.Kh)(r)},getKeyClasses(t){const s=t.length>1?this.$style.blackKey:this.$style.whiteKey,n=[this.$style.key,s];return this.isOpen(t)&&n.push(this.$style.active),n},isOpen(t){return t===this.activePitch},addConfigForKey(t,s){const n=[...this.colorsList],r=this.getConfigIndexForKey(t);r>-1?n[r]=F4(R4({},n[r]),{color:s}):n.push({pitch:this.pitchStringToStepAlter(t),color:s}),this.saveColorsList(n,!0)},removeConfigForKey(t){const s=this.getConfigIndexForKey(t);if(s===-1)return;const n=[...this.colorsList];n.splice(s,1),this.saveColorsList(n,!0)},setColor(t){if(this.activePitch){if(typeof t=="undefined"){this.removeConfigForKey(this.activePitch);return}this.addConfigForKey(this.activePitch,t)}},saveColorsList(t,s){this.$emit("setColorsList",t),s&&Tt.A.set(rl,t)},closeDropdown(){this.activePitch=null},updateOpenStatus(t,s){this.activePitch=t?s:null}},created(){const t=Tt.A.get(rl);!this.colorsList.length&&t&&t.length&&this.saveColorsList(t,!1)}};var K4=o(763754),N4=o.n(K4);const ll={};ll.$style=N4();const X4=(0,k.A)(j4,[["render",D4],["__cssModules",ll]]);var $4=o(183820),z4=Object.defineProperty,H4=Object.defineProperties,V4=Object.getOwnPropertyDescriptors,dl=Object.getOwnPropertySymbols,Q4=Object.prototype.hasOwnProperty,G4=Object.prototype.propertyIsEnumerable,cl=(t,s,n)=>s in t?z4(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,ul=(t,s)=>{for(var n in s||(s={}))Q4.call(s,n)&&cl(t,n,s[n]);if(dl)for(var n of dl(s))G4.call(s,n)&&cl(t,n,s[n]);return t},J4=(t,s)=>H4(t,V4(s));const ds="notesColorMode",Y4=new Map([[ds,"setColorDisplayMode"],[Ue.A.NOTE_SHAPES,"setShapeDisplayMode"],[Ue.A.PITCHES_NAMES,"setPitchesNamesMode"],[Ue.A.SOLFEGE_TI,"setSolfegeTiDisplayMode"],[Ue.A.SOLFEGE_SI,"setSolfegeSiDisplayMode"],[Ue.A.MOVABLE_DO,"setMovableDoDisplayMode"],[Ue.A.SOLFEGE_JAPANESE,"setSolfegeJapaneseDisplayMode"]]),Z4={[`save_${is}`](t,s){if(!this.enabledFeatureCustomLayout)return[];const n=[];t.pageWidth!==void 0&&t.pageHeight!==void 0&&n.push(this.scoreData.scoreActions.executePublicAction("setPageSize",{width:t.pageWidth,height:t.pageHeight,unit:"milimeters"}));const r={};return t.pageMarginTop!==s.pageMarginTop&&(r.top=t.pageMarginTop),t.pageMarginBottom!==s.pageMarginBottom&&(r.bottom=t.pageMarginBottom),t.pageMarginLeft!==s.pageMarginLeft&&(r.left=t.pageMarginLeft),t.pageMarginRight!==s.pageMarginRight&&(r.right=t.pageMarginRight),Object.keys(r).length>0&&n.push(this.scoreData.scoreActions.executePublicAction("setMargins",J4(ul({},r),{unit:"milimeters"}))),t.pageCustomNumbers?n.push(this.scoreData.scoreActions.executePublicAction("setPageNumberingStart",{pageNumberingStart:t.pageNumberingStart})):n.push(this.scoreData.scoreActions.executePublicAction("removePageNumberingStart")),n},[`save_${ws}`](t,s){if(!this.enabledFeatureCustomLayout)return[];const n=[];return t.staffSizeMm!==s.staffSizeMm&&n.push(this.scoreData.scoreActions.executePublicAction("setStaffSize",{value:t.staffSizeMm,unit:"milimeters"})),(t.spaceBetweenStavesMm!==s.spaceBetweenStavesMm||t.staffSizeMm!==s.staffSizeMm)&&n.push(this.scoreData.scoreActions.executePublicAction("setDistanceBetweenStaves",{value:t.spaceBetweenStavesMm,unit:"milimeters"})),(t.spaceBetweenSystemsMm!==s.spaceBetweenSystemsMm||t.staffSizeMm!==s.staffSizeMm)&&n.push(this.scoreData.scoreActions.executePublicAction("setDistanceBetweenSystems",{value:t.spaceBetweenSystemsMm,unit:"milimeters"})),n},[`save_${Is}`](t,s){if(!this.enabledFeatureCustomLayout)return[];const n=[];return t.hideEmptyPartsPolicy!==s.hideEmptyPartsPolicy&&n.push(this.scoreData.scoreActions.executePublicAction("setHideEmptyPartsPolicy",{policy:t.hideEmptyPartsPolicy})),n},[`save_${Rs}`](t,s){if(!this.enabledFeatureCustomLayout)return[];const n=[];return t.notesSpacingCoeff!==s.notesSpacingCoeff&&n.push(this.scoreData.scoreActions.executePublicAction("setNotesSpacingCoeff",{coeff:t.notesSpacingCoeff})),t.maxNbMeasuresPerLine!==s.maxNbMeasuresPerLine&&n.push(this.scoreData.scoreActions.executePublicAction("setSystemBreakPolicy",{maxNbMeasuresPerLine:t.maxNbMeasuresPerLine,forbiddenCounts:{}})),n},[`save_${Fs}`](t,s){if(!this.enabledFeatureCustomLayout)return[];const n=[];return t.measureNumberPolicy!==s.measureNumberPolicy&&n.push(this.scoreData.scoreActions.executePublicAction("setMeasureNumberingPolicy",{policy:t.measureNumberPolicy})),t.hasPickup!==s.hasPickup&&n.push(this.scoreData.scoreActions.executePublicAction("setHasPickupShift",{value:t.hasPickup})),t.measureCustomNumbers?n.push(this.scoreData.scoreActions.executePublicAction("setMeasureNumberingStart",{measureNumberingStart:t.measureNumberingStart})):n.push(this.scoreData.scoreActions.executePublicAction("removeMeasureNumberingStart")),n},[`save_${Ws}`](t){if(!this.enabledFeatureCustomLayout)return[];const s=[];return s.push(this.scoreData.scoreActions.executePublicAction("setMusicFont",{musicFont:t.musicFont})),s},[`save_${Us}`](t){if(!this.enabledFeatureCustomLayout)return[];const s=[],n={};return Object.entries(t).forEach(([r,d])=>{n[r]={fontFamily:d["$font-family"],fontWeight:d["$font-weight"],fontStyle:d["$font-style"],fontSize:d["$font-size"]}}),s.push(this.scoreData.scoreActions.executePublicAction("setAllTextFonts",n)),s},[`save_${Gt}`](t,s){if(!this.enabledFeatureDisplayMode)return[];const n=[];return Object.entries(t).forEach(([r,d])=>{const a=s[r];if(typeof d=="boolean"){if(d===a)return;d={enabled:d}}const f=JSON.stringify(d);if(typeof d=="object"&&JSON.stringify(d)===JSON.stringify(a))return;d=JSON.parse(f);const h=Y4.get(r);n.push(this.scoreData.scoreActions.executePublicAction(h,d))}),n},[`save_${Qt}`](t,s){if(!this.enabledFeatureCustomLayout)return[];const n=[];return $4.A.isSameConfig(t,s)||n.push(this.scoreData.scoreActions.executePublicAction("setJazzChordDisplay",{jazzChordDisplay:ul({},t)})),n}};var q4=Object.defineProperty,_l=Object.getOwnPropertySymbols,e9=Object.prototype.hasOwnProperty,t9=Object.prototype.propertyIsEnumerable,pl=(t,s,n)=>s in t?q4(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,ml=(t,s)=>{for(var n in s||(s={}))e9.call(s,n)&&pl(t,n,s[n]);if(_l)for(var n of _l(s))t9.call(s,n)&&pl(t,n,s[n]);return t};const s9=[Ue.A.NOTE_SHAPES,Ue.A.PITCHES_NAMES,Ue.A.SOLFEGE_TI,Ue.A.SOLFEGE_SI,Ue.A.MOVABLE_DO,Ue.A.SOLFEGE_JAPANESE],o9={name:"NoteheadsLayout",emits:["notifyChange","setInitialConfig","backToAllLayouts"],props:{scoreData:{type:Object,required:!0},providedConfig:{type:Object,default:null},displayPreview:{type:Boolean,default:!1}},data(){return{DisplayModeType:Ue.A.getObject(),ColorDisplayMode:go.A.getObject(),noteheadsConfig:{},editingCustomColor:!1}},setup(){const t=(0,fe.F)();return{account:(0,e.EW)(()=>t.account),accountFeatures:(0,e.EW)(()=>t.accountFeatures)}},components:{NoteheadsColorEditor:X4,arrowBackIcon:no.A,PowerBadgeIcon:Pt.default},computed:{isJapanese(){return(this.account.country||"US").toUpperCase()==="JP"||this.account.locale.startsWith("ja")},adagioData(){return this.scoreData.adagioData},enabledFeatureDisplayMode(){return this.accountFeatures.notesHeads}},methods:{setEditingCustomColor(t){this.editingCustomColor=t},setNotesColorMode(t,s){const n={mode:t};s&&(n.colorOptions=s),t!==go.A.CUSTOM&&this.setEditingCustomColor(!1),this.noteheadsConfig[ds]=n,this.scheduleUpdatePreview()},setColorsList(t){this.setNotesColorMode(go.A.CUSTOM,{colorsList:t})},getColorDisplayMode(){const t=this.noteheadsConfig[ds];return t?Bs.A.getMode(t):null},getColorOptions(){const t=this.noteheadsConfig[ds];return t?Bs.A.getColorOptions(t):null},getColorsList(){const t=this.noteheadsConfig[ds];if(t){const s=Bs.A.getColorsList(t);if(s!==null)return s}return[]},isActiveColorDisplay(t){return(this.editingCustomColor?go.A.CUSTOM:this.getColorDisplayMode())===t},setDisplayMode(t,s){this.noteheadsConfig[t]=s,this.scheduleUpdatePreview()},isEnabled(t,s){return this.noteheadsConfig[t]===s},isNoShape(){return Ue.A.noteheadValues.every(t=>this.noteheadsConfig[t]===!1)},resetShape(){Ue.A.noteheadValues.forEach(t=>{this.noteheadsConfig[t]=!1}),this.scheduleUpdatePreview()},setShape(t){Ue.A.noteheadValues.forEach(s=>{this.noteheadsConfig[s]=s===t}),this.scheduleUpdatePreview()},scheduleUpdatePreview(){(0,e.dY)(()=>this.updatePreview())},updatePreview(){const t=ml({},this.noteheadsConfig);this.$emit("notifyChange",{key:Gt,config:t})},getConfigFromScore(){const t={};s9.forEach(n=>{t[n]=this.adagioData.isDisplayModeEnabled(n)});const s=Bs.A.sanitize(this.adagioData.getNotesColorMode());return t[ds]=s,t},applyConfigLocally(t){this.noteheadsConfig=ml({},t)},back(){this.$emit("backToAllLayouts")}},created(){const t=this.getConfigFromScore();this.providedConfig?this.applyConfigLocally(this.providedConfig):this.applyConfigLocally(t),this.$emit("setInitialConfig",{key:Gt,initialConfig:t})}};var n9=o(777326),i9=o.n(n9);const wn={};wn.$style=hr(),wn.localStyle=i9();const a9=(0,k.A)(o9,[["render",L4],["__cssModules",wn]]);var r9=o(615898),gl=o(872615);const Bo=r9.A.TYPE_BOTH,l9=40,d9={[`preview_${is}`](t){const s=[];return t.pageWidth&&t.pageHeight&&s.push({name:"action.SetPageSize",opts:{width:t.pageWidth,height:t.pageHeight}}),s.push({name:"action.SetTopMargin",opts:{millimeters:t.pageMarginTop,type:Bo}}),s.push({name:"action.SetBottomMargin",opts:{millimeters:t.pageMarginBottom,type:Bo}}),s.push({name:"action.SetLeftMargin",opts:{millimeters:t.pageMarginLeft,type:Bo}}),s.push({name:"action.SetRightMargin",opts:{millimeters:t.pageMarginRight,type:Bo}}),t.pageCustomNumbers?s.push({name:"action.SetPageNumberingStart",opts:{pageNumberingStart:t.pageNumberingStart}}):s.push({name:"action.SetPageNumberingStart",opts:{pageNumberingStart:null}}),s},[`preview_${ws}`](t,s){const n=[];if(!s[is]){const r=(0,gl.BD)(this.adagioData,t.staffSizeMm);n.push(...(0,gl.gI)(this.adagioData,r))}return n.push({name:"action.SetScaling",opts:{millimeters:t.staffSizeMm,tenths:l9}}),n.push({name:"action.SetDistanceBetweenStaves",opts:{value:t.spaceBetweenStaves}}),n.push({name:"action.SetDistanceBetweenSystems",opts:{value:t.spaceBetweenSystems}}),n},[`preview_${Is}`](t){return[{name:"action.SetHideEmptyParts",opts:{policy:t.hideEmptyPartsPolicy}}]},[`preview_${Rs}`](t){return[{name:"action.SetNotesSpacingCoeff",opts:{coeff:t.notesSpacingCoeff}},{name:"action.SetSystemBreakPolicy",opts:{config:{maxNbMeasuresPerLine:t.maxNbMeasuresPerLine,forbiddenCounts:{}}}}]},[`preview_${Fs}`](t){let s=null;return t.measureCustomNumbers&&(s=t.measureNumberingStart),[{name:"action.SetMeasureNumberingPolicy",opts:{policy:t.measureNumberPolicy}},{name:"action.SetHasPickupShift",opts:{value:t.hasPickup}},{name:"action.SetMeasureNumberingStart",opts:{measureNumberingStart:s}}]},[`preview_${Ws}`](t){let s={};return t.musicFont===kn.A.PETALUMA&&(s={"$font-family":"Petaluma Script"}),[{name:"action.SetMusicFont",opts:{musicFont:t.musicFont}},{name:"action.SetFontEntry",opts:{textType:lt.default.GLOBAL,fontEntry:(0,js.default)(s)}}]},[`preview_${Us}`](t){return Object.entries(t).map(([n,r])=>{let d={};return r["$font-family"]&&(d=(0,js.default)(r)),{name:"action.SetFontEntry",opts:{textType:n,fontEntry:d}}})},[`preview_${Gt}`](t){return Object.entries(t).map(([n,r])=>{if(n===ds)return r=JSON.parse(JSON.stringify(r)),{name:"action.SetNotesColorMode",opts:r};const[d,a]=[n,r];return{name:"action.SetDisplayMode",opts:{displayModeType:d,enabled:a}}})},[`preview_${Qt}`](t){return Object.entries(t).map(([n,r])=>({name:"action.SetJazzChordPartDisplay",opts:{chordPartType:n,chordPartValue:r}}))}};var c9=Object.defineProperty,u9=Object.defineProperties,_9=Object.getOwnPropertyDescriptors,fl=Object.getOwnPropertySymbols,p9=Object.prototype.hasOwnProperty,m9=Object.prototype.propertyIsEnumerable,hl=(t,s,n)=>s in t?c9(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,In=(t,s)=>{for(var n in s||(s={}))p9.call(s,n)&&hl(t,n,s[n]);if(fl)for(var n of fl(s))m9.call(s,n)&&hl(t,n,s[n]);return t},g9=(t,s)=>u9(t,_9(s)),f9=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const jo=[{layoutItem:ws,featureField:"enabledFeatureCustomLayout",upgradeKey:"customLayout"},{layoutItem:is,featureField:"enabledFeatureCustomLayout",upgradeKey:"customLayout"},{layoutItem:Is,featureField:"enabledFeatureCustomLayout",upgradeKey:"customLayout"},{layoutItem:Rs,featureField:"enabledFeatureCustomLayout",upgradeKey:"customLayout"},{layoutItem:Fs,featureField:"enabledFeatureCustomLayout",upgradeKey:"customLayout"},{layoutItem:Ws,featureField:"enabledFeatureCustomLayout",upgradeKey:"customLayout"},{layoutItem:Us,featureField:"enabledFeatureCustomLayout",upgradeKey:"customLayout"},{layoutItem:Gt,featureField:"enabledFeatureDisplayMode",upgradeKey(t){return t[Ue.A.SOLFEGE_JAPANESE]?{feature:"instruments",ref:"japaneseNoteheads"}:{feature:"notesHeads"}}},{layoutItem:Qt,featureField:"enabledFeatureCustomLayout",upgradeKey:"chordsStyle"}],h9={name:"ScoreEditorLayout",emits:["previewScore"],components:{ScoreEditorDocMobHeader:yn,JazzChordLayout:uC,NoteheadsLayout:a9,LayoutSettings:m6,LayoutTemplates:p4,Tab:xo.o,TabItem:xo.V},props:{scoreData:{type:Object,required:!0},displayPreview:{type:Boolean,default:!1}},setup(){const t=(0,fe.F)(),s=(0,N.q6)(),n=(0,ze.O)(),r=(0,nt.B)();return{account:(0,e.EW)(()=>t.account),accountFeatures:(0,e.EW)(()=>t.accountFeatures),displayMobileEditor:(0,e.EW)(()=>s.displayMobileEditor),loadDocumentSettings:s.loadDocumentSettings,displayMessage:n.displayMessage,addExperience:r.addExperience}},data(){return{LayoutPage:mr(),page:Ln,configs:{},initialConfigs:{},processing:!1}},computed:{displayMainUi(){return![Gt,Qt].includes(this.page)},adagioData(){return this.scoreData.adagioData},enabledFeatureCustomLayout(){return this.accountFeatures.customLayout},areFeaturesAvailable(){return jo.every(({layoutItem:t,featureField:s})=>this.configs[t]?!!this[s]:!0)},enabledFeatureDisplayMode(){return this.accountFeatures.notesHeads}},methods:g9(In(In(In({},(0,A.i0)(ut.B,["showUpgradeDialog"])),d9),Z4),{setProcessing(t){this.processing=t},backToSettings(){this.openPage(Ln)},openPage(t){t!==this.page&&(this.page===An?this.restoreEditedLayout():t===An&&this.resetPreview(),this.page=t)},resetPreview(){this.$emit("previewScore",null)},previewScore(t){this.$emit("previewScore",t)},setInitialConfig({key:t,initialConfig:s}){this.initialConfigs[t]=s},notifyChange({key:t,config:s}){(0,Oe.set)(this.configs,t,s),this.restoreEditedLayout()},cancelEditedLayout(){this.configs={},this.resetPreview()},restoreEditedLayout(){const t=[];jo.forEach(({layoutItem:s})=>{const n=this.configs[s];if(!n)return;const r=this[`preview_${s}`](n,this.configs);t.push(...r)}),t.length>0?this.previewScore(t):this.resetPreview()},saveLayoutItems(){return f9(this,null,function*(){if(this.checkAvailableFeatures()||this.processing)return;this.setProcessing(!0);const t=[];jo.forEach(({layoutItem:s})=>{const n=this.configs[s];if(!n)return;const r=this.initialConfigs[s],d=this[`save_${s}`](n,r);t.push(...d)}),yield Promise.all(t),this.displayMessage({type:"default",text:this.$t("flat:score.layout.success")}),this.setProcessing(!1),this.configs={}})},checkAvailableFeatures(){return jo.some(({layoutItem:t,featureField:s,upgradeKey:n})=>{if(!this.configs[t])return!1;if(!this[s]){if(typeof n=="function"){const r=this.configs[t],d=n(r);this.showUpgradeDialog(d)}else this.showUpgradeDialog({feature:n});return!0}return!1})},close(){this.loadDocumentSettings(null)}})};var fA=o(391877),v9=o(736184),y9=o.n(v9);const vl={};vl.$style=y9();const b9=(0,k.A)(h9,[["render",j2],["__cssModules",vl]]),E9=1070,C9={name:"ScoreEditorDocSettings",components:{ScoreEditorCredits:Ev,ScoreEditorInstruments:U2,ScoreEditorLayout:b9,ScoreEditorTracks:Py,ToolbarSimpleIcon:Gh.default,ScorePreview:Ih.A,ScorePreview2:Vh,ScoreEditorMobCredits:Bv,ScoreEditorMobExport:Jv,flat:Do.A},props:{scoreData:{type:Object,required:!0},audio:{type:Object,required:!0}},data(){return{settingsKey:+new Date,temporaryScoreData:null,previewKey:+new Date,forceHidePreview:!1}},setup(){const t=(0,yt.k)(),s=(0,qe.o)(),n=(0,N.q6)(),r=(0,Pe.N)(),d=(0,Se.H)();return{isMusicSnippet:(0,e.EW)(()=>n.isMusicSnippet),viewportWidth:(0,e.EW)(()=>t.width),restrictToAudioTracks:(0,e.EW)(()=>s.restrictToAudioTracks),isCloudScore:(0,e.EW)(()=>n.isCloudScore),displayMobileEditor:(0,e.EW)(()=>n.displayMobileEditor),documentSettingsUi:(0,e.EW)(()=>n.documentSettingsUi),loadDocumentSettings:n.loadDocumentSettings,score:(0,e.EW)(()=>r.score),tbLayoutEnabled:(0,e.EW)(()=>d.tbLayoutEnabled),tbInstrumentsEnabled:(0,e.EW)(()=>d.tbInstrumentsEnabled),tbMetaEnabled:(0,e.EW)(()=>d.tbMetaEnabled),tbAudioEnabled:(0,e.EW)(()=>d.tbAudioEnabled),enabledActionsSet:(0,e.EW)(()=>d.enabledActionsSet)}},computed:{displayPreview(){return!this.forceHidePreview&&this.viewportWidth>=E9},isUiCredits(){return this.documentSettingsUi==="credits"},isUiInstruments(){return this.documentSettingsUi==="instruments"},isUiLayout(){return this.documentSettingsUi==="layout"},isUiTracks(){return this.documentSettingsUi==="tracks"},isUiExport(){return this.documentSettingsUi==="export"},previewScoreData(){return this.temporaryScoreData||this.scoreData},useNewDisplay(){return(0,B.A)()}},methods:{toggleSettings(t){this.updatePreviewScore(),this.loadDocumentSettings(t),this.settingsKey=Date.now()},close(){this.loadDocumentSettings(null)},hidePreview(t=!0){this.forceHidePreview=t},updatePreviewScore(t){if(this.displayPreview){if(!t){this.temporaryScoreData&&(this.temporaryScoreData=null,this.previewKey=+new Date);return}window.requestAnimationFrame(()=>{const s=new Qh.A({account:this.account,scoreId:"DS_PREVIEW",canPreloadDrawerFont:!0}),n=this.scoreData.adagioData.exportData();s.setData(n),t.forEach(r=>{s.adagioData[r.name](r.opts)}),s.onStructuralChange(),s.isReady=!0,this.temporaryScoreData=s,this.previewKey=+new Date})}}},created(){this.scoreData.scoreActions.executePublicAction("unselect"),this.closeBound=t=>{t.code==="Escape"&&this.close()},document.addEventListener("keydown",this.closeBound)},beforeUnmount(){document.removeEventListener("keydown",this.closeBound)}};var S9=o(94661),P9=o.n(S9);const yl={};yl.$style=P9();const L9=(0,k.A)(C9,[["render",wh],["__cssModules",yl]]);var A9=o(104210),M9=o(324074),D9=o.n(M9),T9=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});function O9(){return T9(this,null,function*(){var t;const s=(0,Pe.N)();if(s.scoreId)return s.scoreId;const n=window.location.pathname.split("/");n.pop();const r=n.pop(),d=typeof URLSearchParams!="undefined"?new URLSearchParams(window.location.search).get("sharingKey"):null;try{let a;return r==="blank"||!r?a={id:"blank",title:"Score",privacy:"private",creationDate:new Date().toISOString(),modificationDate:new Date().toISOString(),htmlUrl:"https://flat.io/score/blank/edit",editHtmlUrl:"https://flat.io/score/blank/edit",instruments:[],instrumentsNames:[],samples:[],rights:{aclRead:!0,aclWrite:!0,aclAdmin:!0},user:{type:"user",product:"flat",id:"flat",username:"flat",name:"Flat",picture:"https://prod.flat-cdn.com/img/avatars/default.png"},collaborators:[]}:a=yield(0,Qi.pB)(r,{sharingKey:d||void 0}),(0,ro.j)().cache(a),(0,A9.e)().pushSetScore(a.id),s.setScoreId(a.id),s.setSharingKey(a.sharingKey||null),a.id}catch(a){throw D9().isAxiosError(a)&&s.setGlobalError(((t=a.response)==null?void 0:t.status)||0),a}})}var k9=Object.defineProperty,x9=Object.defineProperties,w9=Object.getOwnPropertyDescriptors,bl=Object.getOwnPropertySymbols,I9=Object.prototype.hasOwnProperty,R9=Object.prototype.propertyIsEnumerable,El=(t,s,n)=>s in t?k9(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,cs=(t,s)=>{for(var n in s||(s={}))I9.call(s,n)&&El(t,n,s[n]);if(bl)for(var n of bl(s))R9.call(s,n)&&El(t,n,s[n]);return t},Cl=(t,s)=>x9(t,w9(s)),bo=(t,s,n)=>new Promise((r,d)=>{var a=u=>{try{h(n.next(u))}catch(g){d(g)}},f=u=>{try{h(n.throw(u))}catch(g){d(g)}},h=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,f);h((n=n.apply(t,s)).next())});const Ks=$t()("flat:editor"),F9=1,W9=Number.POSITIVE_INFINITY;function U9(){let t=Tt.A.get("deviceId");return t||(t=(0,Ie.A)(),Tt.A.set("deviceId",t)),t}const B9=(0,e.pM)({components:{flatName:Ze.A,flatEdu:_e.A,DialogAlert:Es,Score0:gs.A,Score404:fs.A,Score403:st.A,Score402:kt.A,Score4090:hs.A,ScoreDriveImport:bu,ScoreEditorTop:W0,ScoreEditorContent:Dp,ScoreEditorMobTop:Pc,ScoreEditorMobSidebar:yh,ScoreEditorMobBottom:Kl.A,ScoreEditorDocSettings:L9,MobilePlaybackSettings:Kf,AudioReload:Dc,ScoreSelectedTools:Cs.A,ScoreSelectedTools2:(0,e.$V)(()=>o.e(68034).then(o.bind(o,68034))),TouchKeyboard:qt.A,MessageCenter:D.A,DialogUpgrade:gt.default,Teleport:e.Im,ExportsStatus:(0,e.$V)(()=>o.e(37156).then(o.bind(o,537156))),TrackEditor:Wl,AssignmentInfoSidebar:yf,DialogEmbed:(0,Xt.h)(()=>Promise.all([o.e(12503),o.e(56945),o.e(4017),o.e(99269),o.e(3782)]).then(o.bind(o,265092))),Help:(0,Xt.h)(()=>o.e(85988).then(o.bind(o,994265))),EditorTourWrapper:(0,e.$V)(()=>o.e(27367).then(o.bind(o,266775))),TooltipsManager:(0,e.$V)(()=>Promise.all([o.e(21081),o.e(87869),o.e(51277),o.e(65980),o.e(51815),o.e(56712),o.e(13489),o.e(15882),o.e(4017),o.e(31899),o.e(93993)]).then(o.bind(o,245965))),DialogAssignmentInfo:(0,Xt.h)(()=>o.e(73944).then(o.bind(o,773944))),ViewingAsStudent:(0,e.$V)(()=>o.e(9588).then(o.bind(o,84225))),CommunityOnboarding:(0,e.$V)(()=>Promise.all([o.e(78682),o.e(68370),o.e(85397)]).then(o.bind(o,585397)).then(t=>t.CommunityOnboarding)),ImageExport:Ys.A,collapseIcon:$.A},data(){return{interaction:null,inlineComments:null,scoreData:null,collaborators:null,localReady:!1,adagioQueue:null,audio:null,assignment:null,sidebarDisplayed:!0,hasAssignmentParams:!1,hasClassroomParams:!1,displayStatus:new(en())}},setup(){const t=(0,fe.F)(),s=(0,yt.k)(),n=(0,ms.B)(),r=(0,ct.w)(),d=(0,ln.F)(),a=(0,ee.s)(),{loadScoreComments:f}=(0,Ne.O)(),h=(0,qe.o)(),u=(0,zt.X)(),g=(0,we.U)(),b=(0,be.V)(),P=(0,mt.l)(),{displayViewingAsStudent:F}=(0,A.bP)(P),S=(0,N.q6)(),H=(0,Ce.W)(),I=(0,Se.H)(),Y=(0,Pe.N)(),Z=(0,nt.B)(),Fe=(0,ze.O)();return{account:(0,e.EW)(()=>t.account),accountFeatures:(0,e.EW)(()=>t.accountFeatures),experience:(0,e.EW)(()=>t.experience),isEdu:(0,e.EW)(()=>t.isEdu),isTeacher:(0,e.EW)(()=>t.isTeacher),isStudent:(0,e.EW)(()=>t.isStudent),isMusicSnippet:(0,e.EW)(()=>S.isMusicSnippet),isPowerUser:(0,e.EW)(()=>t.isPowerUser),isSmallScreen:(0,e.EW)(()=>s.isSmallScreen),fetchUnpitched:d.fetchUnpitched,customUnpitched:(0,e.EW)(()=>d.customUnpitched),loadScoreComments:f,organization:(0,e.EW)(()=>n.organization),fetchEditorShortcutsById:(0,lu.W)().fetchEditorShortcutsById,setDisplayOfflineMessage:(0,Zt.n)().setDisplayOfflineMessage,trackEditStep:(0,e.EW)(()=>r.trackEditStep),loadScoreTracks:r.loadScoreTracks,loadUserAssignmentTracks:r.loadUserAssignmentTracks,rtOnline:(0,e.EW)(()=>a.online),rtInMemoryOnlyDate:(0,e.EW)(()=>a.inMemoryOnlyDate),displayViewingAsStudent:F,setNbPlaybackAuthorized:h.setNbPlaybackAuthorized,initNbPlayAttempt:h.initNbPlayAttempt,setRestrictPlayNote:h.setRestrictPlayNote,setRestrictToAudioTracks:h.setRestrictToAudioTracks,pendingRetry:(0,e.EW)(()=>h.pendingRetry),loadScoreSubmissions:u.loadScoreSubmissions,addPlayAttempt:u.addPlayAttempt,setCurrentSubmission:u.setCurrentSubmission,currentSubmission:(0,e.EW)(()=>u.currentSubmission),currentSubmissionAssignment:(0,e.EW)(()=>u.currentSubmissionAssignment),hasExportsToDisplay:(0,e.EW)(()=>b.hasExportsToDisplay),scoreWrite:(0,e.EW)(()=>g.scoreWrite),setState:g.setState,setEnv:g.setEnv,displayChromelessUi:(0,e.EW)(()=>S.displayChromelessUi),displayMobileEditor:(0,e.EW)(()=>S.displayMobileEditor),isCloudScore:(0,e.EW)(()=>S.isCloudScore),displayedTouchUi:(0,e.EW)(()=>H.displayedTouchUi),lastDrawTs:(0,e.EW)(()=>S.lastDrawTs),documentSettingsUi:(0,e.EW)(()=>S.documentSettingsUi),helpUi:(0,e.EW)(()=>S.helpUi),setZoomAutoWidthSubtract:S.setZoomAutoWidthSubtract,initLayout:S.initLayout,setChromelessUi:S.setChromelessUi,loadDocumentSettings:S.loadDocumentSettings,setHelpUi:S.setHelpUi,setIsCloudScoreFromEditor:S.setIsCloudScoreFromEditor,selectedType:(0,e.EW)(()=>H.selectedType),isEditionBlocked:(0,e.EW)(()=>H.isEditionBlocked),textMode:(0,e.EW)(()=>H.textMode),toggleEditionBlocked:H.toggleEditionBlocked,toolset:(0,e.EW)(()=>I.toolset),isToolsetReady:(0,e.EW)(()=>I.ready),scoreId:(0,e.EW)(()=>Y.scoreId),sharingKey:(0,e.EW)(()=>Y.sharingKey),score:(0,e.EW)(()=>Y.score),globalError:(0,e.EW)(()=>Y.globalError),parentWindow:(0,e.EW)(()=>Y.parentWindow),viewportWatchersCount:(0,e.EW)(()=>Y.viewportWatchersCount),startOnboardingTour:(0,e.EW)(()=>Y.startOnboardingTour),setStartOnboardingTour:Y.setStartOnboardingTour,setParentWindow:Y.setParentWindow,setGlobalError:Y.setGlobalError,addExperience:Z.addExperience,displayMessage:Fe.displayMessage}},computed:Cl(cs(cs(cs({},(0,A.aH)(We.V,{isImageExportDisplayed:"isDialogDisplayed"})),(0,A.aH)(jt.e,["forcedTooltips"])),(0,A.aH)(z.j,["currentDialogKey"])),{dialogKey(){return this.currentDialogKey},isReady(){var t,s;return this.localReady&&((s=(t=this.interaction)==null?void 0:t.scoreData)==null?void 0:s.isReady)},canShowAssignmentSidebar(){return this.isEdu&&!this.isTeacher&&this.hasAssignmentParams&&this.hasClassroomParams},canDisplayOnboardingTooltips(){return!(this.displayChromelessUi||et.t0&&!this.forcedTooltips||!this.isToolsetReady||this.toolset!==null||!this.scoreWrite||this.hasAssignmentParams||this.lastDrawTs===null||this.isEdu&&this.displayViewingAsStudent)},showUpgradeButton(){return!this.isEdu&&!this.isPowerUser},showOnboarding(){return this.account.type!=="user"||!this.scoreWrite||this.displayChromelessUi||this.hasAssignmentParams||et.t0||this.isEditionBlocked||this.experience.includes("editor.onboarding.done")||this.experience.includes("editor.onboarding.skipped")||this.experience.includes("editor.addnote")||this.experience.includes("editor.duration")||!this.isToolsetReady||this.toolset!==null?!1:this.isEdu?this.displayViewingAsStudent?!1:!!(this.isTeacher||this.isStudent):!0},canDisplayMobBottom(){return this.textMode!=="classicChord"&&this.textMode!=="chord"||!this.isSmallScreen},exportManager(){return this.scoreData.scoreActions.dependencies.exportManager},useNewDisplay(){return(0,B.A)()}}),watch:{displayMobileEditor(t){t?document.body.classList.add("touch"):"ontouchstart"in document||document.body.classList.remove("touch")},selectedType(t){if(t==="part-name"){this.addExperience("editor.scoreItem.openInstruments");const s=this.interaction.cursor.selectedElem.partUuid;this.loadDocumentSettings("instruments",{partUuid:s}),this.interaction.cursor.clearSelected()}else t==="credits"&&(this.addExperience("editor.scoreItem.openCredits"),this.loadDocumentSettings("credits"),this.interaction.cursor.clearSelected())},documentSettingsUi(t){this.keyboard&&this.keyboard.setEnabled(!t)},helpUi(t){this.keyboard&&this.keyboard.setEnabled(!t)},rtOnline(t){if(!t){let s="flat:editor.notification.offline.power.text";this.score.rights.aclWrite||(s+="-ro"),this.displayMessage({type:"default",text:_.MR.t(s)})}},rtInMemoryOnlyDate(t){t&&this.displayMessage({type:"default",text:_.MR.t("flat:editor.notification.offline.inMemory.text")})},globalError(){this.globalError&&this.removeEventKb()},score(t){this.setState({key:"scoreWrite",value:t.rights.aclWrite})},showOnboarding(t){t&&this.setStartOnboardingTour(!0)},viewportWatchersCount(t){t>0?this.viewportWatcher.startWatching(window.document.body):this.viewportWatcher.stopWatching()}},methods:Cl(cs(cs(cs(cs({},(0,A.i0)(Et.m,{getSubmission:"get"})),(0,A.i0)(tt.Z,["loadAssignment"])),(0,A.i0)(jt.e,["toggleForcedTooltips"])),(0,A.i0)(z.j,["showDialog"])),{removeEventKb(){this.keyboard&&document.removeEventListener("keydown",this.keyboard.keyDown.bind(this.keyboard))},fetchAssignment(t){return bo(this,null,function*(){const s=t.get("assignment"),n=t.get("classroom");this.assignment=yield this.loadAssignment({classroom:n,assignment:s})})},fetchSubmission(t){return bo(this,null,function*(){this.loadingSubmission=!0;const s=t.get("submission"),n=t.get("assignment"),r=t.get("classroom");yield this.getSubmission({classroom:r,assignment:n,submission:s}),yield this.loadAssignment({classroom:r,assignment:n}),this.setCurrentSubmission(s),this.loadingSubmission=!1})},setAccessToken(t){ne.A.setAccessToken(t),ne.A.useAbsoluteApiURL()},displaySidebar(t=!0){this.sidebarDisplayed=t,wt.A.set("edu.assignment.sidebar",t)},loadScore({scoreJson:t}){this.scoreData.setData(t),this.markScoreJsonInjected()},requestPosition(t){return this.$refs.scoreEditorContent.requestPosition(t)}}),created(){const t=(0,Se.H)();t.initCounter(2),this.viewportWatcher=new jl,this.scoreJsonInjectedPromise=new Promise(d=>{this.markScoreJsonInjected=d});let s,n;{this.setIsCloudScoreFromEditor(),this.initLayout({allowedModes:["track","page"]}),s=window.location.search,n=new URLSearchParams(s),n.has("accessToken")&&this.setAccessToken(n.get("accessToken")),n.get("chromeless")==="true"&&this.setChromelessUi(!0);const d=n.get("parentWindow");if(typeof d=="string"&&Pe.o.includes(d)&&this.setParentWindow(d),n.has("jsapi")){this.jsAPI=new mu({embed:this}),et.t0&&(window.flatJSAPI=this.jsAPI),this.isCloudScore||this.jsAPI.ready();const a=this.$watch("isReady",f=>{f&&(this.isCloudScore&&this.jsAPI.ready(),this.jsAPI.event("scoreLoaded"),a())})}}(0,Ke.Sz)().then(()=>{if(Ks("user logged in"),n!=null&&n.get("onboarding")&&this.setStartOnboardingTour(!0),n!=null&&n.get("tooltips")&&this.toggleForcedTooltips(!0),this.experience.includes("editor.canary")||(t.setDisabledGroupsDefault(ni),Ks("disabled canary: %o",ni)),this.isMusicSnippet){const d=[...gu];this.accountFeatures.premiumInstruments||d.push(...fu),t.setDisabledGroupsExtra(d),Ks("disabled music snippet: %o",d)}n!=null&&n.has("assignment")&&(this.hasAssignmentParams=!0,this.fetchAssignment(n)),n!=null&&n.has("classroom")&&(this.hasClassroomParams=!0),n!=null&&n.has("submission")&&this.fetchSubmission(n),t.decrementCount()}).catch(()=>{Ks("guest"),t.decrementCount()}),this.isCloudScore&&this.fetchUnpitched(),this.setState({key:"stOnline",value:!0}),this.setState({key:"stCurrentRevision",value:!0}),this.setDisplayOfflineMessage(!1),this.adagioQueue=new(si())(F9,W9),O9().then(()=>bo(this,null,function*(){window.flatFullscreenEl=this.$el,this.displayMobileEditor&&document.body.classList.add("touch"),this.collaborators=new ue.A(this.score,this.account),this.setState({key:"scoreWrite",value:this.score.rights.aclWrite}),n!=null&&n.get("editionBlocked")&&this.toggleEditionBlocked();const d=()=>this.customUnpitched;if(this.scoreData=new Tc.A({account:this.account,scoreId:this.scoreId,sharingKey:this.sharingKey,canPreloadDrawerFont:!0,getCustomUnpitched:d}),this.isCloudScore&&(this.score.privacy!=="public"&&this.score.privacy!=="privateLink"?this.loadScoreComments({score:this.score}):this.loadScoreComments({score:this.score,params:{type:"inline"}})),this.useNewDisplay){const g=(0,te.IG)(new ru({scoreData:this.scoreData}));this.inlineComments=g}else{const g=(0,te.IG)(new jc({scoreData:this.scoreData}));this.inlineComments=g}this.interaction=new Re.A({account:this.account,score:this.score,scoreData:this.scoreData,logError:pe.vV,checkPremiumFeatures:!0,promiseQueue:this.adagioQueue,i18next:_.MR}),this.audio=(0,te.IG)(new ae.A(this.interaction,null,{addPlayAttempt:this.addPlayAttempt})),this.audio.setI18next(_.MR),this.midi=new Te.A(this.interaction,this.audio),this.interaction.setAudio(this.audio),this.interaction.setMIDI(this.midi),this.midi.init().catch(g=>{Ks("midi: %o",g)});const a=new Oc.A({$t:this.$t});this.scoreData.scoreActions.setDependencies({exportManager:a}),this.isCloudScore?yield this.scoreData.fetchRevisionData():yield this.scoreJsonInjectedPromise,this.scoreData.setAudio(this.audio,{audioAutoload:!0}),this.scoreData.setMIDI(this.midi);let f=cu().get("flat.sid");ne.A.hasAccessToken()&&(f=ne.A.getAccessToken());const h=U9(),u=new je.A({fake:!this.isCloudScore,endpoint:window.flatSettings.rtapibaseurl,accessToken:f,accountId:this.account.id||"guest",reqAs:wt.A.get("reqas"),interaction:this.interaction,storageProvider:le.A,queue:this.adagioQueue,multiTabs:!0,deviceType:"editorWeb",deviceId:h});if(yield this.scoreData.getAdagioReadyPromise(),this.rt=yield u.setup(),this.localReady=!0,this.keyboard=new De.A({scoreActions:this.scoreData.scoreActions,cursor:this.interaction.cursor}),this.scoreData.setKeyboard(this.keyboard),this.helpUi&&this.keyboard.setEnabled(!1),document.addEventListener("keydown",this.keyboard.keyDown.bind(this.keyboard)),this.isCloudScore&&this.fetchEditorShortcutsById("default").then(g=>{g&&this.keyboard.setCustomShortcuts(g.configuration)}),this.scoreData.scoreActions.on("xp",({xp:g})=>this.addExperience(g)),this.account.organization&&this.isStudent?(t.incrementCount(),this.loadScoreSubmissions().then(()=>bo(this,null,function*(){const g=this.currentSubmission;if(g){const b=this.currentSubmissionAssignment;this.setNbPlaybackAuthorized(b.nbPlaybackAuthorized),typeof b.restrictPlayNote=="boolean"&&this.setRestrictPlayNote(b.restrictPlayNote),typeof b.restrictToAudioTracks=="boolean"&&this.setRestrictToAudioTracks(b.restrictToAudioTracks);const P=g.playback.find(({score:F})=>F===this.scoreId);if(P&&this.initNbPlayAttempt(P.nbPlayAttempt),b.toolset&&!this.isTeacher){const F=yield $e.A.get(b.toolset);t.setToolset(F)}}t.decrementCount()})).catch(g=>{throw t.decrementCount(),g}).then(()=>bo(this,null,function*(){const g=this.currentSubmissionAssignment;let b;g&&g.type==="performance"&&this.isStudent?(this.setEnv("performance"),b=yield this.loadUserAssignmentTracks({score:this.score,assignment:g})):b=yield this.loadScoreTracks({score:this.score}),this.audio.setTracksObjects(JSON.parse(JSON.stringify(b)))}))):this.isCloudScore&&this.loadScoreTracks({score:this.score}).then(g=>{this.audio.setTracksObjects(JSON.parse(JSON.stringify(g)))}),typeof URLSearchParams!="undefined"&&window!=="undefined"){const g=new URLSearchParams(window.location.search).get("m");g&&N.bM.includes(g)&&this.loadDocumentSettings(g);const b=new URLSearchParams(window.location.search).get("help");b&&N.FG.includes(b)&&this.setHelpUi(b);const P=new URLSearchParams(window.location.search).get("t");if(P){const F=yield $e.A.get(P);t.setToolset(F)}}t.decrementCount(),et.t0&&(window.flatEditorStore=(0,A.og)(),window.flatEditorInteraction=this.interaction,window.flatEditorAdagioQueue=this.adagioQueue,window.flatEditorInteraction.scoreAudio=(0,qe.o)(),window.flatEditorDisplayStatus=this.displayStatus),this.inlineComments.loadFromStore()})).catch(d=>{typeof d!="number"&&(0,pe.vV)(d);const a=window.location.pathname;if(this.globalError===404&&a.startsWith("/score/drive-")){this.setGlobalError("driveImport");const f=a.split("/")[2];window.location=`/score/import-drive/${f}`}else Ks("global error: %o",this.globalError)}),wt.A.get("edu.assignment.sidebar")===void 0&&wt.A.set("edu.assignment.sidebar",this.sidebarDisplayed),this.displayMobileEditor&&(this.sidebarDisplayed=!1)},unmounted(){this.removeEventKb(),this.inlineComments.unsubscribeScoreCommentStore()}});var yA=o(532029);const j9=(0,k.A)(B9,[["render",G]]);"ontouchstart"in document&&document.body.classList.add("touch");const At=(0,C.Ef)(j9),K9=(0,A.Ey)();x(At);let N9;q.A.sentryDSN.scoreEditor&&(N9=new Q.Ay(q.A.sentryDSN.scoreEditor,At)),q.A.isEditor=!0,(0,E.v)(At),(0,y.m)(At),At.use(j.A),At.use(O.Ay),At.use(K9),At.use(_.aK,{i18next:_.MR}),At.use(ce.A),At.component("RouterLink",{template:"<span></span>"}),_.E9.then(()=>{K(),At.mount("#app")})},126176:(c,m,o)=>{var i=o(926451);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("c3058ffe",i,!0,{})},131660:(c,m,o)=>{var i=o(883935);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("6fcb86fe",i,!0,{})},131758:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.ytInSidePanelMode[data-v-6ed0e882]{width:100%;margin-top:8px;border-radius:8px;overflow:hidden;position:relative}.ytInSidePanelMode .a-embed[data-v-6ed0e882]{max-width:100%;max-height:300px;min-height:150px}@media screen and (max-width: 437px){.ytInSidePanelMode[data-v-6ed0e882]{width:94%}}.inDialogMode[data-v-6ed0e882]{width:80%}
`,""]);const E=_},133667:(c,m,o)=>{var i=o(171012);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("af208ada",i,!0,{})},135279:(c,m,o)=>{"use strict";c.exports=o.p+"img/67d6e1a3f7f54a93c163.svg"},147797:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.root_wI7B9{max-height:100%;display:flex;flex-direction:column}.mobileWrap_WUCvB{max-width:100%!important;width:100vw!important;height:100%;display:flex;flex-direction:column}.mobileWrap_WUCvB .layoutSettings_bdFhB{overflow-y:auto}
`,""]),_.locals={root:"root_wI7B9",mobileWrap:"mobileWrap_WUCvB",layoutSettings:"layoutSettings_bdFhB"};const E=_},147921:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.more-opt-container[data-v-6345e19f]{margin-left:8px}.ddn-content[data-v-6345e19f]{padding:10px 0}.button-more[data-v-6345e19f]{display:flex;border:none;background-color:unset;padding:unset}.button-more svg[data-v-6345e19f]{flex-shrink:0}.button-more[data-v-6345e19f]:hover{cursor:pointer}.button-more:hover svg[data-v-6345e19f]{fill:var(--f-ink)}.option-container[data-v-6345e19f]{display:flex;flex-direction:column;justify-content:flex-start}.option-container button[data-v-6345e19f]{display:flex;align-items:center;background-color:inherit;padding:0;font-weight:400}.option-container .sort-name-op-highlight[data-v-6345e19f]{color:var(--f-primary)}svg[data-v-6345e19f]{flex-shrink:0;fill:var(--f-subdue)}.verticalIcon[data-v-6345e19f]{transform:rotate(90deg)}
`,""]);const E=_},155926:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.remove-layout h3{margin-bottom:0;font-size:16px;color:var(--f-ink);font-weight:var(--f-font-semibold)}
`,""]);const E=_},157557:(c,m,o)=>{var i=o(828346);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("2b9ef94e",i,!0,{})},158831:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.thread-creator-info_Gf2aI{display:grid;grid-template-columns:32px 1fr;grid-column-gap:8px;align-items:center}.info_pZTjc{overflow:hidden}.author_mEVQ6{font-size:14px;color:var(--f-ink);line-height:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.time_OAXPd{color:var(--f-subdue);font-size:12px;line-height:16px}
`,""]),_.locals={"thread-creator-info":"thread-creator-info_Gf2aI",info:"info_pZTjc",author:"author_mEVQ6",time:"time_OAXPd"};const E=_},171012:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.layout-settings{position:relative;display:flex;flex-direction:column;flex:0 1 auto;border-radius:0 0 4px 4px}.layout-settings .ctas.global-layout-actions{flex:0 0 auto;display:flex;justify-content:end}.layout-settings .open-create-template{margin-right:16px}
`,""]);const E=_},174700:(c,m,o)=>{var i=o(999849);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("3bee1358",i,!0,{})},176568:(c,m,o)=>{"use strict";c.exports=o.p+"img/5ddc51d21d5f71a2cd50.svg"},190191:(c,m,o)=>{"use strict";o.d(m,{A:()=>ce});var i=o(361744),p=o(538065);function v(q,A,O,C,j,e){return(0,i.uX)(),(0,i.CE)("div",{class:(0,p.C4)(q.$style.scorePlaceholder)},[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(6,J=>(0,i.Lk)("div",{class:(0,p.C4)(q.$style.s),key:J},[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(5,w=>(0,i.Lk)("div",{key:w})),64))],2)),64))],2)}const y={name:"ScorePreviewSkeleton"};var _=o(393967),E=o.n(_),K=o(938793);const x={};x.$style=E();const ce=(0,K.A)(y,[["render",v],["__cssModules",x]])},197372:(c,m,o)=>{var i=o(294653);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("a75443fe",i,!0,{})},199486:(c,m,o)=>{"use strict";c.exports=o.p+"img/fbf7540e6964c813cbf2.svg"},201832:(c,m,o)=>{var i=o(442151);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("f8321ade",i,!0,{})},203605:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.attachmentItem_NQA1a{display:flex;align-items:center;justify-content:flex-start;cursor:pointer}.attachmentItem_NQA1a{width:fit-content;max-width:352px;margin-bottom:8px}.iconWrap_SjU2W{display:flex;align-items:center;justify-content:center;background-color:var(--f-ink-5);width:40px;height:40px;min-width:40px;min-height:40px;margin-right:12px;border-radius:8px}.iconWrap_SjU2W svg path{fill:var(--f-subdue)}.sTitle_mvlel{font-weight:400;font-size:14px;line-height:20px;color:var(--f-subdue);margin-right:8px;max-width:82%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.editingWrap_Np2A_{border-radius:24px;height:20px;width:fit-content;display:flex;justify-content:flex-start;align-items:center;background-color:var(--f-edu-green-10);padding:2px 8px;white-space:nowrap}.editingWrap_Np2A_ span{font-weight:400;font-size:12px;line-height:16px;color:var(--f-edu-green)}.currentlyEditing_ua1gh .sTitle_mvlel{max-width:64%}.currentlyEditing_ua1gh .iconWrap_SjU2W{background-color:var(--f-edu-green-10)}.currentlyEditing_ua1gh svg path{fill:var(--f-edu-green)}.currentlyEditing_ua1gh .sTitle_mvlel{color:var(--f-ink)}
`,""]),_.locals={attachmentItem:"attachmentItem_NQA1a",iconWrap:"iconWrap_SjU2W",sTitle:"sTitle_mvlel",editingWrap:"editingWrap_Np2A_",currentlyEditing:"currentlyEditing_ua1gh"};const E=_},208307:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.go-back_YKc0h{cursor:pointer}.ds-settings-title_JlqOM{font-size:16px;overflow:visible}.title-instrument_BmK5K{overflow:hidden;text-overflow:ellipsis}.disabled_PKTYg{pointer-events:none;opacity:.6}
`,""]),_.locals={"go-back":"go-back_YKc0h","ds-settings-title":"ds-settings-title_JlqOM","title-instrument":"title-instrument_BmK5K",disabled:"disabled_PKTYg"};const E=_},208318:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.label_JHcDR{display:flex;align-items:center}.power-badge_MwlG8{height:16px;width:16px;margin-left:8px}
`,""]),_.locals={label:"label_JHcDR","power-badge":"power-badge_MwlG8"};const E=_},211189:(c,m,o)=>{"use strict";c.exports=o.p+"img/920646f09bba46ed30a3.svg"},216407:(c,m,o)=>{var i=o(131758);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("7d7c5dd4",i,!0,{})},223894:(c,m,o)=>{var i=o(158831);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("eba61856",i,!0,{})},227468:(c,m,o)=>{"use strict";o.d(m,{Iy:()=>i.RQ,QY:()=>i.QY,RQ:()=>i.RQ,eC:()=>p.A,n$:()=>i.QY});var i=o(733767),p=o(377952)},238490:(c,m,o)=>{var i=o(147921);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("6a41cb9e",i,!0,{})},248307:(c,m,o)=>{"use strict";c.exports=o.p+"img/1c7ecd89a03503fae4e7.svg"},250662:(c,m,o)=>{var i=o(953997);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("bc1268e2",i,!0,{})},270651:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.btn-history_u6avO{height:32px;flex:0 0 auto;display:flex;align-items:center;justify-content:center;white-space:nowrap;border:0;border-radius:40px;padding:0 9px;background:var(--f-primary-dark);color:#fff;font-size:14px;line-height:16px}.btn-history_u6avO svg{margin-right:8px;height:16px;width:16px}.btn-history_u6avO.wht-text_yGnba svg{margin-right:0}.btn-history_u6avO.desktop-resp_zM1Hf{padding:0;width:32px}
`,""]),_.locals={"btn-history":"btn-history_u6avO","wht-text":"wht-text_yGnba","desktop-resp":"desktop-resp_zM1Hf"};const E=_},274567:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.wrapper_LfVp0{display:flex;flex-direction:row;flex-wrap:wrap}.col_Jm5_j{width:50%;flex:50%}.recorderRadio_ML7T8{color:var(--f-ink)}.recorderRadio_ML7T8 .radioGroupLabel_p_Xc9{font-size:14px;font-weight:600}.recorderRadio_ML7T8 label{font-size:12px;margin:5px 0}.japaneseCheckboxWrapper_nzuqD{margin-top:20px;flex:100%}.preview_wQG6m{margin-top:20px;font-size:14px;font-weight:600}.previewImgWrap_oRS66{display:block;margin:5px 0;width:40px;padding:5px;border:1px solid var(--f-ink)}
`,""]),_.locals={wrapper:"wrapper_LfVp0",col:"col_Jm5_j",recorderRadio:"recorderRadio_ML7T8",radioGroupLabel:"radioGroupLabel_p_Xc9",japaneseCheckboxWrapper:"japaneseCheckboxWrapper_nzuqD",preview:"preview_wQG6m",previewImgWrap:"previewImgWrap_oRS66"};const E=_},279815:(c,m,o)=>{var i=o(912466);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("9ef869c6",i,!0,{})},280661:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.comment-reply-form_RtIFA{padding:12px;border-top:1px solid var(--f-ink-10)}
`,""]),_.locals={"comment-reply-form":"comment-reply-form_RtIFA"};const E=_},283429:(c,m,o)=>{var i=o(372586);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("392e484c",i,!0,{})},286648:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.no-classes[data-v-6919d12c],.loading-classes[data-v-6919d12c]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.no-classes p[data-v-6919d12c],.loading-classes p[data-v-6919d12c]{font-weight:400;font-size:14px;line-height:20px;color:var(--f-ink);margin-bottom:12px}
`,""]);const E=_},287405:(c,m,o)=>{var i=o(155926);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("0b0fb88c",i,!0,{})},290075:(c,m,o)=>{"use strict";c.exports=o.p+"img/7f2b845be701d93324b2.svg"},294653:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.audioPlayer_m_KBK{margin-right:8px;display:inline-flex;padding:0;background-color:transparent;border:none;cursor:pointer}.cheatSheetOpener_cM67B{position:absolute;bottom:30px;right:16px;z-index:5;display:flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;background:var(--f-ink);box-shadow:0 0 0 1px #363c500a,0 1px 4px #363c5024;cursor:pointer;border:none}.cheatSheetOpener_cM67B svg{fill:#fff}@media (max-width: 770px){.cheatSheetOpener_cM67B{right:8px}}@media print{.pointer-container{display:none}.se-app{transform:translateY(20px);height:calc(100% - 40px)!important}}@media print{.cheatSheetModal_fBEUy .dialog-header,.cheatSheetModal_fBEUy .BottomSheets-header,.cheatSheetModal_fBEUy .audioPlayer_m_KBK{display:none}.cheatSheetModal_fBEUy .BottomSheets,.cheatSheetModal_fBEUy .BottomSheets-bg{top:0;bottom:none;background:#fff}.cheatSheetModal_fBEUy>div{left:0;top:0;width:100%!important;transform:none;background:#fff}.cheatSheetModal_fBEUy .dialog-content-wrapper{overflow-y:visible!important}}.cheatSheetModal_fBEUy [role=dialog],.cheatSheetModal_fBEUy .BottomSheets{max-height:calc(80vh - 70px)}@media (max-width: 770px){.cheatSheetModal_fBEUy .BottomSheets{max-height:calc(100vh - 70px)}}.cheatSheetBody_xPTmV{min-height:100px;padding:20px;overflow:auto;color:#fff}@media print{.cheatSheetBody_xPTmV{max-height:max-content;color:#000!important;background:#fff}}.cheatSheetBody_xPTmV .instrumentsCategory_OZo5S{font-size:12px;font-weight:700;margin-bottom:8px;text-transform:capitalize}.cheatSheetBody_xPTmV .instrumentsList_XxtoQ{display:flex;flex-direction:column;list-style-type:none;font-size:12px;font-weight:700;margin-bottom:15px}.cheatSheetBody_xPTmV .instrument_Sz28t{display:flex;align-items:center;justify-content:space-between}@media print{.cheatSheetBody_xPTmV .instrument_Sz28t{gap:10px}}.cheatSheetBody_xPTmV .instrument_Sz28t .leftGroup_zUVcL,.cheatSheetBody_xPTmV .instrument_Sz28t .rightGroup_yCye_{display:flex;align-items:center}.cheatSheetBody_xPTmV .instrument_Sz28t .dottedLine_L8ccE{display:none;align-items:center;flex:1;border-bottom:1px dashed black}@media print{.cheatSheetBody_xPTmV .instrument_Sz28t .dottedLine_L8ccE{display:flex}}.cheatSheetBody_xPTmV .instrument_Sz28t .shortname_QsEif{margin-right:10px;padding:0 8px;line-height:24px;color:var(--f-ink-20);border:1px solid var(--f-subdue);box-sizing:border-box;border-radius:4px}@media print{.cheatSheetBody_xPTmV .instrument_Sz28t .shortname_QsEif{color:#000}}.cheatSheetBody_xPTmV .instrument_Sz28t .shortcut_fyZRz{color:#fff;line-height:24px;min-width:24px;padding:0 4px;text-align:center;background:var(--f-subdue);border-radius:4px}@media print{.cheatSheetBody_xPTmV .instrument_Sz28t .shortcut_fyZRz{color:#000;background:#fff;border:1px solid black}}.cheatSheetBody_xPTmV .instrument_Sz28t .icon_o5Qru{margin-left:12px;fill:#fff;stroke:#fff}@media print{.cheatSheetBody_xPTmV .instrument_Sz28t .icon_o5Qru{fill:#000;stroke:#000}}.cheatSheetFooter_fhzim{height:var(--footer-height);padding:17px;border-top:1px solid var(--f-subdue)}.cheatSheetFooter_fhzim .btn{width:100%}@media print{.cheatSheetFooter_fhzim{display:none}}
`,""]),_.locals={audioPlayer:"audioPlayer_m_KBK",cheatSheetOpener:"cheatSheetOpener_cM67B",cheatSheetModal:"cheatSheetModal_fBEUy",cheatSheetBody:"cheatSheetBody_xPTmV",instrumentsCategory:"instrumentsCategory_OZo5S",instrumentsList:"instrumentsList_XxtoQ",instrument:"instrument_Sz28t",leftGroup:"leftGroup_zUVcL",rightGroup:"rightGroup_yCye_",dottedLine:"dottedLine_L8ccE",shortname:"shortname_QsEif",shortcut:"shortcut_fyZRz",icon:"icon_o5Qru",cheatSheetFooter:"cheatSheetFooter_fhzim"};const E=_},300387:(c,m,o)=>{"use strict";c.exports=o.p+"img/e929067c2977a322c4fd.svg"},301051:(c,m,o)=>{var i=o(286648);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("9422909c",i,!0,{})},301626:(c,m,o)=>{var i={"./de/app-store.svg":135279,"./en-GB/app-store.svg":290075,"./en/app-store.svg":420275,"./es/app-store.svg":823862,"./fr/app-store.svg":951966,"./it/app-store.svg":773029,"./ja/app-store.svg":367073,"./ko/app-store.svg":499084};function p(y){var _=v(y);return o(_)}function v(y){if(!o.o(i,y)){var _=new Error("Cannot find module '"+y+"'");throw _.code="MODULE_NOT_FOUND",_}return i[y]}p.keys=function(){return Object.keys(i)},p.resolve=v,c.exports=p,p.id=301626},303701:(c,m,o)=>{"use strict";o.d(m,{A:()=>K});var i=o(179240),p=o(478435),v=o(650403),y=o(938793);const _={};_.$style=v.default;const K=(0,y.A)(p.A,[["render",i.X],["__cssModules",_]])},307511:(c,m,o)=>{var i=o(320906);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("18688c72",i,!0,{})},310422:(c,m,o)=>{var i=o(622383);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("3daa4d42",i,!0,{})},316353:(c,m,o)=>{"use strict";o.d(m,{A:()=>A});var i=o(361744),p=o(538065);const v=["for"],y={key:1},_={key:0,tabindex:"-1"},E=(0,i.pM)({__name:"FInputLabel",props:{htmlFor:{type:String,required:!0},required:{type:Boolean,default:!1},optional:{type:Boolean,default:!1}},setup(O){return(C,j)=>((0,i.uX)(),(0,i.CE)("label",{"data-cy":"input-label",for:O.htmlFor,class:(0,p.C4)(C.$style["input-label"])},[(0,i.Lk)("div",null,[(0,i.RG)(C.$slots,"default"),O.required?((0,i.uX)(),(0,i.CE)("span",{key:0,class:(0,p.C4)(C.$style.required)}," \xA0- "+(0,p.v_)(C.$t("flat:required")),3)):(0,i.Q3)("",!0),O.optional?((0,i.uX)(),(0,i.CE)("span",y," \xA0 ("+(0,p.v_)(C.$t("flat:placeholder.optional"))+") ",1)):(0,i.Q3)("",!0)]),C.$slots.right?((0,i.uX)(),(0,i.CE)("div",_,[(0,i.RG)(C.$slots,"right")])):(0,i.Q3)("",!0)],10,v))}});var K=o(803457),x=o.n(K),Q=o(938793);const ce={};ce.$style=x();const A=(0,Q.A)(E,[["__cssModules",ce]])},316716:(c,m,o)=>{var i=o(919793);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("46047b8b",i,!0,{})},317644:(c,m,o)=>{"use strict";c.exports=o.p+"img/8d56afc612df93031fda.svg"},319554:c=>{"use strict";c.exports="data:image/svg+xml;utf8,%3Csvg%20width%3D%228%22%20height%3D%226%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M0%203.379c0-.114.034-.133.136-.133H1.86C5.117%202.98%207.267.475%207.437.266%207.522.133%207.71%200%207.864%200%207.949.038%208%20.114%208%20.266c0%20.057%200%20.114-.017.19C7.3%203.626%204.86%205.03%202.133%205.6H0V3.379z%22%20fill%3D%22%23363C50%22%20fill-rule%3D%22nonzero%22%2F%3E%3C%2Fsvg%3E"},320906:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.cardMusicFont_l4Xzy{flex:0 1 auto;display:flex;flex-direction:column;align-items:center;padding:20px;border-radius:8px;border:1px solid var(--f-primary)}.cardMusicFont_l4Xzy img{width:100%}.fontTitle_uPuVg{font-size:16px;font-weight:500;color:var(--f-ink);margin-top:8px}.fontInfo_xB2pa{font-style:italic;font-size:14px;font-weight:400;color:var(--f-subdue);margin-top:8px}
`,""]),_.locals={cardMusicFont:"cardMusicFont_l4Xzy",fontTitle:"fontTitle_uPuVg",fontInfo:"fontInfo_xB2pa"};const E=_},333060:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.musicFontLayout_B_cOv{display:grid;grid-template-columns:50% 50%;grid-template-areas:"activeCard fontChoice";grid-gap:25px;max-width:675px}.fontChoiceCol_p2w0Q{grid-area:fontChoice;max-width:350px}.fontChoiceCol_p2w0Q h4{margin:0 0 8px;font-size:14px;font-style:normal;font-weight:600}.activeCardCol_n5k4P{grid-area:activeCard;max-width:350px}.fontChoiceInput_phX_c{position:relative}.fontChoiceInput_phX_c .editIcon_QAeMU{fill:var(--f-primary);position:absolute;right:9px;top:9px}.fontChoiceInput_phX_c,.fontChoiceInput_phX_c *{cursor:pointer}@media (max-width: 1260px){.musicFontLayout_B_cOv{grid-template-columns:100%;grid-template-areas:"fontChoice" "activeCard"}}
`,""]),_.locals={musicFontLayout:"musicFontLayout_B_cOv",fontChoiceCol:"fontChoiceCol_p2w0Q",activeCardCol:"activeCardCol_n5k4P",fontChoiceInput:"fontChoiceInput_phX_c",editIcon:"editIcon_QAeMU"};const E=_},357427:(c,m,o)=>{"use strict";c.exports=o.p+"img/64d479f99449e1391c60.svg"},357773:(c,m,o)=>{var i=o(68016);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("d97f35e6",i,!0,{})},362691:(c,m,o)=>{var i=o(428254);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("687f7365",i,!0,{})},367073:(c,m,o)=>{"use strict";c.exports=o.p+"img/6862d4fd2ee86815670b.svg"},372586:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.se-selected-ddn[x-placement^=right]{margin-left:10px;z-index:10}.se-incomment-popnew{background:var(--f-white);box-shadow:0 0 0 1px #363c5014,0 1px 8px #363c5024;padding:8px;border-radius:4px;display:flex;align-items:flex-start}.se-incomment-popnew .comment-form-v2{align-items:flex-start}.se-incomment-popnew .comment-form-v2 .input-mention{min-height:32px}.se-incomment-popnew .comment-form-v2 textarea{border:0;padding:6px 8px 0;font-size:14px;line-height:20px;margin-right:0;background-color:var(--f-white);border:none}.se-incomment-popnew .comment-form-v2 textarea:hover{border:0}.se-incomment-popnew .comment-form-v2 .avatar-container{display:flex;justify-content:center;align-items:center;width:32px;height:32px}.se-incomment-popnew .comment-form-v2 img{border:0}
`,""]);const E=_},372859:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.sePartsLine_vqmvT{display:flex;justify-content:space-between;padding:8px;gap:8px}.layoutButton_naOzQ{appearance:none;border:none;padding:0;cursor:pointer;display:flex;align-items:center;width:36px;height:36px;border-radius:50%;background:var(--f-ink-10)}.layoutButton_naOzQ.page_KjuEm{transform:rotate(90deg)}.layoutButton_naOzQ span{height:42px;margin-left:1px}
`,""]),_.locals={sePartsLine:"sePartsLine_vqmvT",layoutButton:"layoutButton_naOzQ",page:"page_KjuEm"};const E=_},373335:(c,m,o)=>{"use strict";c.exports=o.p+"img/b3bf0654337e0845403a.svg"},378126:(c,m,o)=>{var i=o(806577);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("8595e354",i,!0,{})},378934:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.mobileDoc_ERpNC{height:100%}
`,""]),_.locals={mobileDoc:"mobileDoc_ERpNC"};const E=_},382577:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.skipOnboardingDesktop_ZsKTD{z-index:1;position:absolute;bottom:14px;left:50%;transform:translate(-50%)}.scoreDrawer2_ID9ko{margin-left:auto;margin-right:auto}
`,""]),_.locals={skipOnboardingDesktop:"skipOnboardingDesktop_ZsKTD",scoreDrawer2:"scoreDrawer2_ID9ko"};const E=_},391877:(c,m,o)=>{var i=o(613712);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("b994d26a",i,!0,{})},393967:(c,m,o)=>{var i=o(998780);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("2e2d9bfb",i,!0,{})},394835:(c,m,o)=>{var i=o(534960);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("fa1a5514",i,!0,{})},399116:(c,m,o)=>{var i=o(567037);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("5919ea8a",i,!0,{})},400485:(c,m,o)=>{var i=o(436192);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("5b5793fc",i,!0,{})},401582:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.wrapForm_WpPx_{margin-top:15px}.gridLyricist_SL7ig{display:grid;grid-template-columns:1fr;grid-column-gap:16px}.gridLyricist_SL7ig>div:last-child{margin-top:15px}@media screen and (min-width: 518px){.gridLyricist_SL7ig{grid-template-columns:1fr 1fr}.gridLyricist_SL7ig>div:last-child{margin-top:0}}.buttonWrapper_hSE0m{width:100%;margin-top:15px;display:flex;justify-content:center}@media screen and (min-width: 518px){.buttonWrapper_hSE0m{justify-content:flex-end}}
`,""]),_.locals={wrapForm:"wrapForm_WpPx_",gridLyricist:"gridLyricist_SL7ig",buttonWrapper:"buttonWrapper_hSE0m"};const E=_},409678:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.backdrop_FdEED{position:fixed;inset:0;background-color:#0b233edb;z-index:699}.sidebar_yRPy6{position:fixed;top:0;bottom:0;right:0;width:80%;min-width:300px;max-width:500px;padding:10px;z-index:1000;background:#fff;display:flex;flex-direction:column}.sidebarMenu_CcV2z{flex:1 1 auto}.close_BCQmL{appearance:none;background:none;border:none;padding:0;width:100%;display:flex;justify-content:flex-end}
`,""]),_.locals={backdrop:"backdrop_FdEED",sidebar:"sidebar_yRPy6",sidebarMenu:"sidebarMenu_CcV2z",close:"close_BCQmL"};const E=_},417264:(c,m,o)=>{"use strict";o.r(m),o.d(m,{LAYOUT_CONTENT:()=>W,LAYOUT_DOCUMENT_MOBILE:()=>me,LAYOUT_END:()=>ge,LAYOUT_TOOLBAR_MOBILE:()=>X,SCORE_CHANGE_PITCH:()=>E,SCORE_CLICKABLE:()=>i,SCORE_CLICKABLE_END:()=>p,SCORE_MOVE:()=>_,SCORE_STACK_NOTES:()=>y,SCORE_TEAR_DROP:()=>v,SCORE_TEAR_DROP_DURATIONS:()=>K,TOOLBAR_DURATIONS:()=>Q,TOOLBAR_DURATIONS_TB_CHANGE:()=>x,TOOLBAR_EDITION_MODE:()=>q,TOOLBAR_EDITION_MODE_END:()=>A,TOOLBAR_EDITION_MODE_TB_CHANGE:()=>ce,TOOLBAR_HELP:()=>Le,TOOLBAR_HELP_END:()=>Ae,TOOLBAR_KEYBOARD_UX:()=>re,TOOLBAR_KEYBOARD_UX_TB_CHANGE:()=>G,TOOLBAR_LAYOUT:()=>w,TOOLBAR_LAYOUT_TB_CHANGE:()=>J,TOOLBAR_LIBRARY:()=>B,TOOLBAR_SHARE:()=>Ee,TOOLBAR_SHORTCUTS:()=>C,TOOLBAR_SHORTCUTS_CUSTOM:()=>j,TOOLBAR_SHORTCUTS_END:()=>e,TOOLBAR_SHORTCUTS_TB_CHANGE:()=>O,getObject:()=>ae});const i="score-clickable",p="score-clickable-end",v="score-tear-drop",y="score-stack-notes",_="score-move",E="score-change-pitch",K="score-tear-drop-durations",x="toolbar-durations-tb-change",Q="toolbar-durations",ce="toolbar-edition-mode-tb-change",q="toolbar-edition-mode",A="toolbar-edition-mode-end",O="toolbar-shortcuts-tb-change",C="toolbar-shortcuts",j="toolbar-shortcuts-custom",e="toolbar-shortcuts-end",J="toolbar-layout-tb-change",w="toolbar-layout",W="layout-content",X="layout-toolbar-mobile",me="layout-document-mobile",ge="layout-end",Le="toolbar-help",Ae="toolbar-help-end",Ee="toolbar-share",re="toolbar-keyboard-ux",G="toolbar-keyboard-ux-tb-change",B="toolbar-library";function ae(){return{SCORE_CLICKABLE:i,SCORE_CLICKABLE_END:p,SCORE_TEAR_DROP:v,SCORE_STACK_NOTES:y,SCORE_MOVE:_,SCORE_CHANGE_PITCH:E,SCORE_TEAR_DROP_DURATIONS:K,TOOLBAR_DURATIONS_TB_CHANGE:x,TOOLBAR_DURATIONS:Q,TOOLBAR_LAYOUT_TB_CHANGE:J,TOOLBAR_LAYOUT:w,LAYOUT_TOOLBAR_MOBILE:X,LAYOUT_DOCUMENT_MOBILE:me,LAYOUT_CONTENT:W,LAYOUT_END:ge,TOOLBAR_EDITION_MODE_TB_CHANGE:ce,TOOLBAR_EDITION_MODE:q,TOOLBAR_EDITION_MODE_END:A,TOOLBAR_SHORTCUTS_TB_CHANGE:O,TOOLBAR_SHORTCUTS:C,TOOLBAR_SHORTCUTS_CUSTOM:j,TOOLBAR_SHORTCUTS_END:e,TOOLBAR_HELP:Le,TOOLBAR_HELP_END:Ae,TOOLBAR_SHARE:Ee,TOOLBAR_KEYBOARD_UX:re,TOOLBAR_KEYBOARD_UX_TB_CHANGE:G,TOOLBAR_LIBRARY:B}}},420275:(c,m,o)=>{"use strict";c.exports=o.p+"img/7f2b845be701d93324b2.svg"},426364:(c,m,o)=>{var i=o(818583);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("4ab704b5",i,!0,{})},427458:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.content_lu2rA{padding:24px}.searchInput_gpG_f{max-width:220px}.fontsList_VWOFG{margin-top:24px}.fontsList_VWOFG>*{margin-bottom:8px}.musicFontDialog_M_cAy{z-index:1001}
`,""]),_.locals={content:"content_lu2rA",searchInput:"searchInput_gpG_f",fontsList:"fontsList_VWOFG",musicFontDialog:"musicFontDialog_M_cAy"};const E=_},428254:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.assignmentInfoPanel_rTpI3{height:100%;max-width:400px;flex:0 0 400px;display:flex;flex-direction:column;position:relative;background:var(--f-bg-0);border-left:1px solid #e7e8ec;max-height:calc(100vh - 152px)}.assignmentInfoPanel_rTpI3 .topPart_UcfD9{flex:0 0 auto;width:100%}.assignmentInfoPanel_rTpI3 .topbar_cjNFA{display:flex;justify-content:space-between;align-items:center;height:52px}.assignmentInfoPanel_rTpI3 .HidePanel_U11p1{background-color:unset;border:unset;display:flex;align-items:center;justify-content:center}.assignmentInfoPanel_rTpI3 .HidePanel_U11p1 svg path{fill:var(--f-subdue)}.assignmentInfoPanel_rTpI3 .aMainDetails_Qp6qL{display:flex;flex-direction:column;padding:0 24px 16px;border-bottom:solid 1px var(--f-ink-10)}.assignmentInfoPanel_rTpI3 .aMainDetails_Qp6qL p{font-weight:600;font-size:22px;line-height:27px;color:var(--f-ink);margin-bottom:12px;max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.assignmentInfoPanel_rTpI3 .aMainDetails_Qp6qL .DPost_MeJq0,.assignmentInfoPanel_rTpI3 .aMainDetails_Qp6qL .DDue_dDW4e{display:flex}.assignmentInfoPanel_rTpI3 .aMainDetails_Qp6qL .l_xdTQH{font-weight:400;font-size:12px;line-height:16px;color:var(--f-subdue);width:88px}.assignmentInfoPanel_rTpI3 .aMainDetails_Qp6qL .d_nkKbk{font-weight:400;font-size:12px;line-height:16px;color:var(--f-ink)}.assignmentInfoPanel_rTpI3 .aMainDetails_Qp6qL .overdue_SI0xr{color:var(--f-safe-red)}.assignmentInfoPanel_rTpI3 .YourWork_tQPgH{width:100%;display:flex;flex-direction:column;padding:0 24px 24px;border-bottom:solid 1px var(--f-ink-10)}.assignmentInfoPanel_rTpI3 .YourWorkWrap_gMuwV{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.assignmentInfoPanel_rTpI3 .TitleYourWork_m7HFk{font-weight:600;font-size:14px;line-height:20px;color:var(--f-ink)}.assignmentInfoPanel_rTpI3 .BtnNewScore_zdH0G{display:flex;justify-content:center;align-items:center;background-color:unset;border:unset}.assignmentInfoPanel_rTpI3 .BtnNewScore_zdH0G svg path{fill:var(--f-subdue)}.assignmentInfoPanel_rTpI3 .BtnNewScore_zdH0G .TitleNewScore_BTiYI{color:var(--f-subdue);font-weight:400;font-size:12px;line-height:16px;margin-left:6px}.assignmentInfoPanel_rTpI3 .BtnTurnIn__lwP3{margin-top:16px}.assignmentInfoPanel_rTpI3 .attachments_F0yKg,.assignmentInfoPanel_rTpI3 .attachmentListItem_O6Q57{width:100%}.assignmentInfoPanel_rTpI3 .pTitle_F3JpG,.assignmentInfoPanel_rTpI3 .pTitleAttachments_vJIZ7{font-weight:600;font-size:14px;line-height:20px;color:var(--f-ink)}.assignmentInfoPanel_rTpI3 .commentCountWrap_ZY_iu{display:flex;justify-content:center;align-items:center;background-color:var(--f-ink-10);border-radius:4px;padding:0 4px;margin-left:8px}.assignmentInfoPanel_rTpI3 .commentCountWrap_ZY_iu span{font-weight:600;font-size:10px;line-height:16px;color:var(--f-subdue)}.assignmentInfoPanel_rTpI3 .scrollableContent_Z3Zc_{overflow:auto;flex:1 1 auto;padding:24px 0}.assignmentInfoPanel_rTpI3 .instructionsView_NPvQH{padding:24px 24px 0}.assignmentInfoPanel_rTpI3 .commentsView_Ese7T{padding-top:24px}.assignmentInfoPanel_rTpI3 .titleAndExpandBtn_KyW4a{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.assignmentInfoPanel_rTpI3 .titleAndExpandBtn_KyW4a button{background-color:unset;border:unset;display:flex;justify-content:center;align-items:center}.assignmentInfoPanel_rTpI3 .titleAndExpandBtn_KyW4a svg path{fill:var(--f-subdue)}.mobileView_OwzBv{max-width:unset;flex:unset;max-height:unset}
`,""]),_.locals={assignmentInfoPanel:"assignmentInfoPanel_rTpI3",topPart:"topPart_UcfD9",topbar:"topbar_cjNFA",HidePanel:"HidePanel_U11p1",aMainDetails:"aMainDetails_Qp6qL",DPost:"DPost_MeJq0",DDue:"DDue_dDW4e",l:"l_xdTQH",d:"d_nkKbk",overdue:"overdue_SI0xr",YourWork:"YourWork_tQPgH",YourWorkWrap:"YourWorkWrap_gMuwV",TitleYourWork:"TitleYourWork_m7HFk",BtnNewScore:"BtnNewScore_zdH0G",TitleNewScore:"TitleNewScore_BTiYI",BtnTurnIn:"BtnTurnIn__lwP3",attachments:"attachments_F0yKg",attachmentListItem:"attachmentListItem_O6Q57",pTitle:"pTitle_F3JpG",pTitleAttachments:"pTitleAttachments_vJIZ7",commentCountWrap:"commentCountWrap_ZY_iu",scrollableContent:"scrollableContent_Z3Zc_",instructionsView:"instructionsView_NPvQH",commentsView:"commentsView_Ese7T",titleAndExpandBtn:"titleAndExpandBtn_KyW4a",mobileView:"mobileView_OwzBv"};const E=_},436192:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.settings-header_ADMFF{flex:0 0 auto;color:var(--f-ink);display:inline-flex;align-items:center;margin-bottom:16px;font-weight:700;font-size:24px;letter-spacing:.3px;line-height:30px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.settings-header_ADMFF .go-back_mZZ0f{display:flex;margin-right:12px;background:transparent;border:0;padding:0;cursor:pointer}.settings-header_ADMFF .power-badge_e6A67{width:16px;height:16px;margin-left:8px}
`,""]),_.locals={"settings-header":"settings-header_ADMFF","go-back":"go-back_mZZ0f","power-badge":"power-badge_e6A67"};const E=_},442151:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.staffSize{display:flex;align-items:center}.staffSizeCustom{flex:1 1 auto}.staffSizeCustom,.spaceBetweenStavesValue,.spaceBetweenSystemsValue{display:flex;align-items:center;margin-left:30px}.staffSizeCustom input,.spaceBetweenStavesValue input,.spaceBetweenSystemsValue input{width:75px;margin-right:5px}
`,""]);const E=_},444852:(c,m,o)=>{var i=o(203605);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("5175bc34",i,!0,{})},448669:(c,m,o)=>{var i=o(817926);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("6d1e17a0",i,!0,{})},449563:(c,m,o)=>{var i=o(108102);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("2c6f109e",i,!0,{})},453312:(c,m,o)=>{"use strict";o.d(m,{C_:()=>E.A,Es:()=>p.A,KI:()=>y.A,c7:()=>v.A,pR:()=>_.A,qz:()=>i.A});var i=o(86624),p=o(741092),v=o(485294),y=o(602026),_=o(995874),E=o(303701)},454114:(c,m,o)=>{var i=o(571773);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("69c16ad7",i,!0,{})},459406:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.pages-orient_i_FST{display:flex;align-items:center}.pages-orient_i_FST .pages-orient-portrait_sDCmF{margin-right:30px}
`,""]),_.locals={"pages-orient":"pages-orient_i_FST","pages-orient-portrait":"pages-orient-portrait_sDCmF"};const E=_},468750:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.editionBlockedSelect_O5Q3w{margin-left:8px;margin-right:16px}.right-side_SwfVe{display:flex;align-items:center}.disabledEdition_lKtxw{cursor:not-allowed}
`,""]),_.locals={editionBlockedSelect:"editionBlockedSelect_O5Q3w","right-side":"right-side_SwfVe",disabledEdition:"disabledEdition_lKtxw"};const E=_},483363:(c,m,o)=>{"use strict";o.d(m,{A:()=>K});var i=o(924231),p=o(647539),v=o(884496),y=o(938793);const _={};_.$style=v.default;const K=(0,y.A)(p.A,[["render",i.X],["__cssModules",_]])},490905:(c,m,o)=>{"use strict";c.exports=o.p+"img/7a65f346d5d848c877af.svg"},493369:(c,m,o)=>{"use strict";o.d(m,{W:()=>C});var i=o(550594);const v={fetchEditorShortcuts(){return i.A.get(`${i.A.apiv2baseurl}/me/editor/shortcuts`)},updateEditorShortcuts(j,e){return i.A.put(`${i.A.apiv2baseurl}/me/editor/shortcuts/${j}`,e)},removeEditorShortcuts(j){return i.A.delete(`${i.A.apiv2baseurl}/me/editor/shortcuts/${j}`)}};var y=o(653154),_=o(941271),E=o(459356),K=o(645369),x=o.n(K),Q=o(6645),ce=o(744056),q=o(361744),A=(j,e,J)=>new Promise((w,W)=>{var X=Le=>{try{ge(J.next(Le))}catch(Ae){W(Ae)}},me=Le=>{try{ge(J.throw(Le))}catch(Ae){W(Ae)}},ge=Le=>Le.done?w(Le.value):Promise.resolve(Le.value).then(X,me);ge((J=J.apply(j,e)).next())});const O=x()("flat:kbcustom"),C=(0,Q.nY)("editorShortcuts",()=>{const j=(0,ce.Kh)({}),e=(0,ce.KR)(!1),J=(0,ce.KR)(!1),w=(0,q.EW)(()=>Object.values(j)),W=(0,q.EW)(()=>w.value.length>0);function X(re){Object.assign(j,{[re.key]:re})}function me(re){delete j[re]}function ge(){return A(this,null,function*(){try{J.value=!0;const re=yield v.fetchEditorShortcuts();e.value=!0,re.forEach(G=>{X(G)}),J.value=!1}catch(re){const G=re.response;J.value=!1,G?G.status===402?(O("not available in this plan"),e.value=!1):G.status!==401&&(0,y.vV)(re):(0,y.vV)(re)}})}function Le(re){return A(this,null,function*(){return j[re]?j[re]:(yield ge(),j[re]||void 0)})}function Ae(re,G){return A(this,null,function*(){try{const B=yield v.updateEditorShortcuts(re,G);X(B),(0,_.B)().addExperience("editor.custom-shortcuts")}catch(B){throw(0,y.vV)(B),(0,E.O)().displayError({error:B}),B}})}function Ee(re){return A(this,null,function*(){try{yield v.removeEditorShortcuts(re),me(re),(0,_.B)().addExperience("editor.custom-shortcuts")}catch(G){const B=G.response;if(B&&B.status===404){me(re);return}throw(0,y.vV)(G),(0,E.O)().displayError({error:G}),G}})}return{editorShortcutsAvailable:e,hasEditorShortcutsConfig:W,fetchEditorShortcutsById:Le,removeEditorShortcuts:Ee,updateEditorShortcuts:Ae}})},496048:(c,m,o)=>{var i=o(274567);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("5d8435f2",i,!0,{})},499084:(c,m,o)=>{"use strict";c.exports=o.p+"img/a97d5c33a3e1a763d7d3.svg"},505013:(c,m,o)=>{var i=o(784986);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("32eb7098",i,!0,{})},514747:(c,m,o)=>{var i=o(208318);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("247a5c04",i,!0,{})},515571:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.choice-method-header_pKNgn{display:grid;grid-template-columns:48px 1fr;grid-column-gap:12px;text-align:left}.choice-method-header_pKNgn .edit-icon_jInwX .fill{fill:var(--f-primary)}.choice-method-header_pKNgn .edit-icon_jInwX .stroke{stroke:var(--f-primary)}.choice-method-header_pKNgn .name_NImsU{font-weight:700;font-size:20px;line-height:27px;color:var(--f-ink);margin-bottom:4px;display:flex;align-items:baseline}.choice-method-header_pKNgn .description_jaCNQ{font-size:14px;line-height:18px;letter-spacing:.3px;color:var(--f-subdue)}.stickyButtons_btVAr{position:sticky;padding:20px 30px;margin:0 -30px;bottom:-31px;background:#fff}@media (max-width: 700px){.stickyButtons_btVAr{bottom:-16px;margin:0 -16px -16px;padding:16px;box-shadow:0 -10px 5px -5px #00000017}}.stickyButtons_btVAr[stuck]{box-shadow:0 -10px 5px -5px #00000017}.layoutItems_VFNrG{overflow-y:auto;flex:0 1 auto;display:flex;flex-direction:column}.musicSnippetOrder_II1NP [data-cy=layout-noteheads-open]{order:-6}.musicSnippetOrder_II1NP [data-cy=layout-jazzChords-open]{order:-5}.musicSnippetOrder_II1NP [data-cy=layout-musicFonts-open]{order:-4}.musicSnippetOrder_II1NP [data-cy=layout-textFonts-open]{order:-3}.musicSnippetOrder_II1NP [data-cy=layout-measureNumbers-open]{order:-2}.musicSnippetOrder_II1NP [data-cy=layout-measures-open]{order:-1}
`,""]),_.locals={"choice-method-header":"choice-method-header_pKNgn","edit-icon":"edit-icon_jInwX",name:"name_NImsU",description:"description_jaCNQ",stickyButtons:"stickyButtons_btVAr",layoutItems:"layoutItems_VFNrG",musicSnippetOrder:"musicSnippetOrder_II1NP"};const E=_},516132:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`*{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}input,textarea{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}#app,.se-app{height:100%}.se-global,.se-content-container{height:100%;display:flex;flex-direction:column;overflow:hidden;position:relative}.logo-error{display:block;margin:60px auto;width:200px;text-align:center}.logo-error img{width:100%}.se-main-content{display:flex;flex:1 1 auto;z-index:1;min-height:0;height:100%;max-width:100%}.se-content-container{width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden;position:relative}.sidebar-open{position:absolute;width:40px;height:40px;right:0;padding:0;transition:all .2s ease-in-out;background:var(--f-bg-0);top:162px;border-radius:4px 0 0 4px;border:solid 1px var(--f-grey-2);border-right:unset}.sidebar-open svg{height:24px;width:24px;margin:8px;transform:rotate(180deg)}.sidebar-open svg path{fill:var(--f-subdue)}
`,""]);const E=_},516501:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.cardMusicFont_NINuj{display:flex;padding:4px 8px;align-items:center;gap:8px;justify-content:space-between;border-radius:4px;border:1px solid var(--f-ink-10, #eaeaec);transition:.2s background-color;cursor:pointer}.cardMusicFont_NINuj img{width:225px}.cardMusicFont_NINuj.active_pTMuk{pointer-events:none;cursor:default;border-color:var(--f-primary);background:var(--f-flat-blue-10)}.cardMusicFont_NINuj:hover{background-color:var(--f-ink-5)}.fontTitle_e_rpY{font-size:14px;font-weight:600;color:var(--f-ink)}.fontInfo_Nbpou{font-style:italic;font-size:12px;font-weight:400;color:var(--f-ink);margin-top:4px}
`,""]),_.locals={cardMusicFont:"cardMusicFont_NINuj",active:"active_pTMuk",fontTitle:"fontTitle_e_rpY",fontInfo:"fontInfo_Nbpou"};const E=_},523698:(c,m,o)=>{"use strict";o.d(m,{A:()=>p});var i=o(575258);function p(v){const y=new i.A(v),_=y.userPreset(),E=y.userToPreferences(_[0],_[1]);return{pageMarginTop:y.userMargin("Top"),pageMarginBottom:y.userMargin("Bottom"),pageMarginLeft:y.userMargin("Left"),pageMarginRight:y.userMargin("Right"),pageHeight:E.height/10,pageWidth:E.width/10}}},524572:(c,m,o)=>{var i=o(372859);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("e3cae5ae",i,!0,{})},525672:(c,m,o)=>{"use strict";c.exports=o.p+"img/de767620067e76639695.svg"},532029:(c,m,o)=>{var i=o(516132);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("c0bb0fd6",i,!0,{})},534558:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.layout-templates[data-v-422acefb]{border-bottom-left-radius:4px;border-bottom-right-radius:4px;background-color:var(--f-bg-0);padding:24px}.layout-templates .temlates-group[data-v-422acefb]{margin-bottom:24px}.layout-templates h3[data-v-422acefb]{font-weight:var(--f-font-semibold);font-family:var(--f-font-common);font-size:12px;color:var(--f-grey-4)}.layout-templates .empty-state[data-v-422acefb]{display:flex;flex-direction:column;align-items:center}.layout-templates .empty-state .image[data-v-422acefb]{width:120px;height:120px}.layout-templates .empty-state h4[data-v-422acefb]{margin-top:24px;font-weight:var(--f-font-semibold);font-family:var(--f-font-common);font-size:18px;color:var(--f-ink)}.layout-templates .empty-state p[data-v-422acefb]{margin-top:8px;font-weight:var(--f-font-normal);font-family:var(--f-font-common);font-size:16px;color:var(--f-subdue)}.layout-templates ul.template[data-v-422acefb]{margin-top:8px}.layout-templates li[data-v-422acefb]:not(:first-child){margin-top:16px}.layout-templates .actions-container[data-v-422acefb]{display:flex;flex-direction:row-reverse}
`,""]);const E=_},534960:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.instrumentRow_C42Vl{display:flex;align-items:center;justify-content:flex-start;flex:1;height:50px;line-height:16px;padding-left:50px}.partIcon_BKUyw{height:16px;width:16px;border-radius:50%;background:var(--f-primary-10);margin-right:12px}.partName_z56Dz{height:16px;width:100px;background:var(--f-primary-10)}.spacer_xku7M{flex:1 1 auto}.partActions_vcq1Z{white-space:nowrap}.partActions_vcq1Z>div{display:inline-block}.partAction_i95j5{height:16px;width:32px;background:var(--f-primary-10);margin-right:18px}
`,""]),_.locals={instrumentRow:"instrumentRow_C42Vl",partIcon:"partIcon_BKUyw",partName:"partName_z56Dz",spacer:"spacer_xku7M",partActions:"partActions_vcq1Z",partAction:"partAction_i95j5"};const E=_},540136:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.assignmentInstructionAndAttachments_qjqUY{width:100%}.assignmentInstructionAndAttachments_qjqUY .adesc_Bl6j2{font-weight:400;font-size:12px;line-height:16px;margin-bottom:24px}.assignmentInstructionAndAttachments_qjqUY .instructionAttachments_uL_2j{display:flex;flex-direction:column}.assignmentInstructionAndAttachments_qjqUY .pTitleAttachments_we7kU{font-weight:600;font-size:14px;line-height:20px;color:var(--f-ink);margin-bottom:16px}.assignmentInstructionAndAttachments_qjqUY .noDescription_wr7fo{color:var(--f-grey-3)}.assignmentInstructionAndAttachments_qjqUY svg{min-height:16px;min-width:16px}.assignmentInstructionAndAttachments_qjqUY a{max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.extraMarginBottomInSidebar_g0E7F{padding-bottom:110px}.dialogMode_dU1zW .adesc_Bl6j2{font-size:14px;line-height:20px}@media screen and (max-width: 768px){.extraMarginBottomInDialog_k6ueH{padding-bottom:80px}}
`,""]),_.locals={assignmentInstructionAndAttachments:"assignmentInstructionAndAttachments_qjqUY",adesc:"adesc_Bl6j2",instructionAttachments:"instructionAttachments_uL_2j",pTitleAttachments:"pTitleAttachments_we7kU",noDescription:"noDescription_wr7fo",extraMarginBottomInSidebar:"extraMarginBottomInSidebar_g0E7F",dialogMode:"dialogMode_dU1zW",extraMarginBottomInDialog:"extraMarginBottomInDialog_k6ueH"};const E=_},540888:(c,m,o)=>{"use strict";o.d(m,{KS:()=>Re,Nf:()=>Te,PI:()=>G,eB:()=>B,r6:()=>De});var i=o(303953),p=o(186236),v=o(61959),y=o(886847),_=o(234242),E=o(767650),K=o(61313),x=o(615887),Q=o(157003),ce=o(770736),q=o(715800),A=o(239227),O=o(542105),C=o(961029),j=o(673987),e=o(273067),J=o(842540),w=o(676230),W=o(409548),X=o(466204),me=o(636585),ge=o(554965);const Le={en:K.A,"en-GB":E.A,es:x.A,de:_.A,fr:Q.A,it:ce.A,ja:q.A,"ja-HIRA":A.A,ko:O.A,nl:C.A,pl:j.A,pt:e.A,"pt-BR":J.A,ro:w.A,ru:W.A,sv:X.A,tr:me.A,"zh-Hans":ge.A};function Ae(){return i.A.language}function Ee(){const ee=Ae();return Le[ee]||Le.en}function re(){return Ee()}function G(ee){return(0,v.A)(new Date(ee),{addSuffix:!0,locale:Ee()})}function B(ee){return(0,y.A)(new Date(ee),{addSuffix:!0,locale:Ee()})}function ae(ee,N){return format(new Date(ee),N,{locale:Ee()})}function ue(ee){return format(new Date(ee),"P",{locale:Ee()})}function Re(ee){return(0,p.A)(new Date(ee),"PPP",{locale:Ee()})}function De(ee){return(0,p.A)(new Date(ee),"PPPp",{locale:Ee()})}function Te(ee){return(0,p.A)(new Date(ee),["en","en-GB"].includes(Ae())?"MMM do, p":"Pp",{locale:Ee()})}const je={ja:"MMM do",en:"MMM do","en-GB":"MMM do",fr:"d MMM"},be="MMM d";function We(ee,N){return format(new Date(ee),N||je[Ae()]||be,{locale:Ee()})}function Ce(ee){return format(new Date(ee),"p",{locale:Ee()})}function we(ee){return format(new Date(ee),"HH:mm a",{locale:Ee()})}},550594:(c,m,o)=>{"use strict";o.d(m,{A:()=>q});var i=o(303953),p=o(324074),v=o.n(p),y=o(484035),_=(A,O,C)=>new Promise((j,e)=>{var J=X=>{try{W(C.next(X))}catch(me){e(me)}},w=X=>{try{W(C.throw(X))}catch(me){e(me)}},W=X=>X.done?j(X.value):Promise.resolve(X.value).then(J,w);W((C=C.apply(A,O)).next())});function E(A){if(!A||A.length===0)return{};const O={};return A.split(",").forEach(C=>{const j=C.split(";");if(j.length===2){const e=j[0].replace(/<(.*)>/,"$1").trim(),J=j[1].replace(/rel="(.*)"/,"$1").trim();O[J]=e}}),O}v().defaults.xsrfCookieName=void 0,v().defaults.xsrfHeaderName=void 0,(0,y.Ay)(v(),{retries:1,retryDelay:y.Ay.exponentialDelay});function K(A={}){return A.params||(A.params={}),A.params._r=+new Date,A}function x(A,{nullableProps:O=[]}={}){if(!A||typeof A!="object")return A;const C=A;return Object.keys(C).forEach(j=>{C[j]===null&&!O.includes(j)?delete C[j]:C[j]&&typeof C[j]=="object"&&(C[j]=x(C[j],{nullableProps:O}))}),A}function Q(A,O){return _(this,null,function*(){K(O);const C=yield v().get(A,O),j={header:E(C.headers.link)};if(j.header.next){const J=new URL(j.header.next);j.next={url:J,qs:{},pathname:J.pathname},Array.from(J.searchParams).forEach(([w,W])=>{j.next.qs[w]=W})}const e={};return Object.keys(C.headers).forEach(J=>{const w=J.match(/x-total-(\w+)-count/);w!=null&&w[1]&&(e[w[1]]=Number.parseInt(C.headers[J],10))}),{links:j,data:C.data,counts:e}})}function ce(A,O){return _(this,null,function*(){let C=!0,j;const e=[];let J={};for(;C;){O.params=O.params||{},O.params.next=j,j=void 0;const{links:w,data:W,counts:X}=yield Q(A,O);w!=null&&w.next&&(j=w.next.qs.next),X&&(J=X),e.push(...W),C=!!j}return{data:e,links:{header:{}},counts:J}})}const q={apiv2baseurl:i.A.apiv2baseurl,apibaseurl:i.A.apibaseurl,clearNullProperties:x,getWithPagination:Q,getAllWithPagination:ce,getResponse(A,O={}){return K(O),v().get(A,O)},get(A){return _(this,arguments,function*(O,C={}){return K(C),(yield v().get(O,C)).data})},post(A,O,C){return _(this,null,function*(){return(yield v().post(A,O,C)).data})},postResponse(A,O,C){return v().post(A,O,C)},put(A,O,C){return _(this,null,function*(){return(yield v().put(A,O,C)).data})},putResponse(A,O,C){return v().put(A,O,C)},delete(A,O){return _(this,null,function*(){return(yield v().delete(A,O)).data})}}},558135:(c,m,o)=>{var i=o(928210);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("61f41026",i,!0,{})},559384:(c,m,o)=>{var i=o(931537);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("5ee326c8",i,!0,{})},561484:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.header-right_uWbIr{display:flex;align-items:center;margin-left:8px}.header-right_uWbIr button{display:flex;background-color:transparent;padding:0;border:none;cursor:pointer}.header-right_uWbIr button svg{width:24px;height:24px}.header-right_uWbIr .resolve_ckAds svg{fill:var(--f-edu-green)}.header-right_uWbIr .more_pYtpH svg{fill:var(--f-grey-4)}.more-ddn_rPM42{padding:8px 0}.reply-btn-group_DwU_f{justify-content:flex-end;margin-top:12px}
`,""]),_.locals={"header-right":"header-right_uWbIr",resolve:"resolve_ckAds",more:"more_pYtpH","more-ddn":"more-ddn_rPM42","reply-btn-group":"reply-btn-group_DwU_f"};const E=_},562153:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>C});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=o(793727),E=o.n(_),K=new URL(o(373335),o.b),x=new URL(o(319554),o.b),Q=new URL(o(965138),o.b),ce=y()(p()),q=E()(K),A=E()(x),O=E()(Q);ce.push([c.id,`/*! 
 * Copyright 2024 - Tutteo Ltd
 */.input-mention .inpos{height:0;width:0;position:absolute;top:0;left:0}.ddn-input-mention{padding:8px 0;position:relative;z-index:10}.ddn-input-mention li{display:flex}.ddn-input-mention li.highlighted{background-color:#4da3f81a}.ddn-input-mention>ul>li>a{display:flex;align-items:center;width:100%;padding:5px 15px}.ddn-input-mention .user-avatar{flex:0 0 22px!important}.ddn-input-mention .username{display:inline-block;max-width:150px;flex:0 1 150px;overflow:hidden;text-overflow:ellipsis;color:var(--f-primary-dark);line-height:22px}.kodaly-editor{max-width:530px}.kodaly-editor .t-row-mode{display:flex;align-items:center;margin-bottom:15px}.kodaly-editor .t-row-mode .label-ext-small{flex:0 1 230px}.kodaly-editor .step-input{width:50px;margin-right:10px;padding:6px 4px}.kodaly-editor .alter-input{width:100px;margin-right:10px}.kodaly-editor .t-mode-octave{display:flex;align-items:center}.kodaly-editor .t-mode-octave input{width:75px;margin-left:5px}.kodaly-editor .t-mode-octave .label-ext-small{padding-bottom:0;white-space:nowrap}.kodaly-editor .options{display:flex;align-items:center}.font-family-input{height:36px;background:transparent;border:1px solid var(--f-grey-2);border-radius:3px;display:flex;align-items:center;padding:0 0 0 12px}.font-family-input:hover{border-color:var(--f-primary-10)}.font-family-input:focus{border-color:var(--f-primary)}.font-family-input span{flex:1 1 auto;text-align:left}.font-family-input svg{fill:var(--f-primary);margin:0 8px}.choice-method{display:block;margin:0 0 16px;background:var(--f-bg-0);border:1px solid #e7e8ec;padding:20px;border-radius:8px}.choice-method .name{font-weight:700;font-size:20px;line-height:27px;color:var(--f-ink);margin-bottom:4px;display:flex;align-items:baseline}.choice-method .name img{margin-left:8px}.choice-method .description{font-size:14px;line-height:18px;color:var(--f-subdue)}.choice-method.active{border:1px solid var(--f-happy-green);position:relative;background:var(--f-bg-0) url(${q});background-repeat:no-repeat;background-position:right 12px center}.choice-method.disabled{opacity:.6;cursor:not-allowed}@media (max-width: 700px){.choice-method{padding:12px}.choice-method .description{font-size:13px}}.d-fonts{height:600px;display:flex;flex-direction:column}.d-fonts h3{text-align:left}.d-fonts .fontsfilter{flex:0 0 34px;margin:0 -16px 16px 0;display:flex;align-items:center;gap:var(--spacing-2)}.d-fonts .fontsfilter .label-ext-small{padding-bottom:0;padding-right:10px;margin-bottom:0}.d-fonts .fontsfilter select,.d-fonts .fontsfilter .fontssearch{margin-right:16px}.d-fonts .fontssearch{min-width:250px;position:relative}.d-fonts .fontssearch .fsearch{pointer-events:none;position:absolute;top:50%;transform:translateY(-50%);left:10px}.d-fonts .fontssearch path{transition:all .2s ease-in-out;fill:var(--f-grey-4)}.d-fonts .fontssearch input{padding-left:35px}.d-fonts .fontssearch input:focus+.fsearch path{fill:var(--f-ink)}.d-fonts .fontslist{overflow:auto;width:100%;border:1px solid #e7e8ec;border-radius:4px}.d-fonts .fontslist button{transition:all ease-in-out .2s;background:transparent;border:0;margin:0;padding:0 16px;display:block;width:100%;height:54px;border-bottom:1px solid #e7e8ec;overflow:hidden;font-size:16pt;font-weight:400;text-align:left}.d-fonts .fontslist button:hover{background:#e7e8ec}.d-fonts .fontslist button:last-child{border-bottom:0}.d-fonts .fontsnotfound{flex:1 1 auto;display:flex;flex-direction:column;align-items:center;justify-content:center}.d-fonts .fontsnotfound .emoji{font-family:monospace;font-size:100px;color:var(--f-grey-2);margin-bottom:30px}.d-fonts .fontsnotfound .description{font-size:17px;color:var(--f-subdue);line-height:30px;margin-bottom:30px}@media (max-width: 765px){.d-fonts,.d-fonts .fontssearch{width:100%}}.se-tkedit{position:relative;background:var(--f-bg-0);box-shadow:0 -3px 8px #0000001a;height:230px;flex:0 0 230px;width:100vw;padding:30px;z-index:1}.se-tkedit .title{font-size:20px;color:var(--f-ink);margin-bottom:30px}.se-tkedit .recording-submit{margin:0;position:absolute;bottom:30px;right:30px}.se-tkedit .recording-close{position:absolute;border:none;background:transparent;padding:0;margin:0;top:30px;right:30px}.se-tkedit .recording-close svg path{stroke:var(--f-grey-2)}.se-tkedit .or{color:var(--f-ink);font-weight:700;font-size:14px;position:relative;top:12px}.se-tkedit .choose-source{display:flex;align-items:center}.se-tkedit .choose-source>div:not(:last-child){margin-right:30px}.se-tkedit .choose-source .label-ext-small{white-space:nowrap}.se-tkedit .source-url{position:relative;flex:0 1 470px}.se-tkedit .source-url .logos{position:absolute;pointer-events:none;top:33px;right:13px}.se-tkedit .source-url .logos img{height:16px;margin-left:12px}.se-tkedit .source-upload{flex:0 1 350px}.se-tkedit .source-upload .upload-area{height:42px;display:flex;align-items:center;padding:0 13px}.se-tkedit .source-upload .upload-area input{width:100%}@keyframes mediaContainerLoading{0%{background-position:-120px 0}to{background-position:120px 0}}@keyframes recordingAnchorsLoading{0%{background-position:-500px 0}to{background-position:500px 0}}.se-tkedit .sync-container{display:flex}.se-tkedit .media-container{flex:0 0 auto;margin-right:30px;height:120px;width:250px}.se-tkedit .media-container.audio{width:0;margin-right:0}.se-tkedit .media-container.loading{background:#f6f7f8;background:linear-gradient(to right,#eee 8%,#e2e2e2 18%,#eee 33%);animation-duration:1.5s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:mediaContainerLoading;animation-timing-function:linear}.se-tkedit .sync-editor{position:relative;flex:1 1 auto;flex-direction:column;display:flex;align-items:center}.se-tkedit .sync-actions{width:100%;display:flex;justify-content:space-between;align-items:center;position:absolute;bottom:0}.se-tkedit .sync-cta{display:flex;margin:0}.se-tkedit .sync-add-point{background:transparent;border:0;padding:0;display:flex;align-items:center;color:var(--f-primary);letter-spacing:.86px;text-shadow:0 1px 1px rgba(0,0,0,.04);font-weight:500}.se-tkedit .sync-add-point img{margin-right:12px}.se-tkedit .recording-anchors{position:relative;width:100%;height:58px}.se-tkedit .recording-anchors.loading{background:#f6f7f8;background:linear-gradient(to right,#eee 8%,#e2e2e2 18%,#eee 33%);animation-duration:1.5s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:recordingAnchorsLoading;animation-timing-function:linear}.se-tkedit .tl-container{position:relative;height:3px;top:25.5px;width:100%;background:var(--f-grey-2)}.se-tkedit .tl-duration-current{position:absolute;left:0;height:3px;width:0;background:var(--f-primary)}.se-tkedit .youtube .tl-duration-current{background:#de2c28}.se-tkedit .soundcloud .tl-duration-current{background:#ff7600}.se-tkedit .vimeo .tl-duration-current{background:#32b8e8}.se-tkedit .anchor-item{position:absolute;top:0;margin-left:-8px}.se-tkedit .anchor-item>button{border:0;background:transparent;padding:0;display:flex;flex-direction:column;justify-content:center;align-items:center;width:15px;pointer-events:none}.se-tkedit .anchor-item>button>*{pointer-events:auto}.se-tkedit .anchor-item.start{margin-left:0}.se-tkedit .anchor-item.start button{align-items:flex-start}.se-tkedit .anchor-item.start svg{position:relative;left:-1px}.se-tkedit .anchor-item.start .ddn-content{margin-left:-18px}.se-tkedit .anchor-item.end{margin-left:0;right:0}.se-tkedit .anchor-item.end button{align-items:flex-end}.se-tkedit .anchor-item.end svg{position:relative;right:-1px}.se-tkedit .anchor-item.end .ddn-content{margin-left:8px}.se-tkedit .anchor-item .ddn-content{max-width:none;padding:15px;margin-top:7px;margin-left:-4px;z-index:100}.se-tkedit .anchor-item form{padding:0}.se-tkedit .anchor-label{font-size:12px;letter-spacing:0;color:var(--f-primary);text-transform:uppercase;margin-bottom:4px;min-width:15px;text-align:center;background:var(--f-bg-0)}.se-tkedit .anchor-time{font-size:12px;color:var(--f-ink);letter-spacing:0;margin-top:8px;background:var(--f-bg-0)}.se-tkedit .anchor-inputs{display:flex}.se-tkedit .anchor-inputs .wrap-form:first-child{margin-right:20px}.se-tkedit .anchor-inputs input{width:120px}.se-tkedit .anchor-actions{display:flex;align-items:center;margin-top:15px}.se-tkedit .anchor-actions .btn{margin:0}.se-tkedit .anchor-actions a{margin-left:30px}.se-tkedit .anchor-actions .remove,.se-tkedit .anchor-actions .cancel{background:transparent;border:0;padding:13px 15px;font-weight:500;font-size:12px;color:var(--f-subdue);letter-spacing:.86px;text-decoration:underline}.se-tkedit .anchor-actions .remove{margin-left:15px;color:var(--f-safe-red)}@media (max-width: 1024px){.se-tkedit{padding:30px 16px}.se-tkedit .recording-close{top:30px;right:16px}.se-tkedit .recording-submit{bottom:30px;right:16px}}.tag-beta{display:inline-flex;background:var(--f-ink);border-radius:4px;padding:4px;font-weight:600;font-size:11px;line-height:11px;text-transform:uppercase;color:#fff}.sc-mid-ctrls{display:flex;align-items:center;position:relative;flex:0 0 auto;height:36px;z-index:5}.sc-mid-ctrls .icon-recording{position:relative;width:26px;height:26px;margin-left:15px;display:flex;align-items:center;justify-content:center;cursor:pointer;border-radius:13px;background:#fff;box-shadow:0 2px 8px #0000000a,0 1px 3px #00000014;transition:all ease-in .2s;transform-origin:center}.sc-mid-ctrls .icon-recording:after{width:8px;height:8px;transform:scale(1);content:" ";background-color:red;border-radius:50%;transition:all ease-in .2s;transform-origin:center}.sc-mid-ctrls .icon-recording.active>div{width:14px;height:14px;border-radius:3px}.sc-mid-ctrls .icon-recording.active>div:after{transform:scale(0)}@keyframes wave{5%{opacity:1;transform:scale(.2)}80%{opacity:.2;transform:scale(1)}to{opacity:0}}.sc-mid-ctrls .sc-mid-dropdown{display:flex;position:relative;border-radius:50%;margin-left:14px;width:26px;height:26px;transition-duration:.5s}.sc-mid-ctrls .sc-mid-dropdown button{border:0;background:transparent;padding:0}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-trigger{display:flex;align-items:center;justify-content:center;width:26px;height:26px}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-trigger .midi-icon{height:13px}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-trigger.active{background:linear-gradient(180deg,#33425f,#212b3e);box-shadow:0 1px 3px #1116204d;border-radius:100px;transition:opacity .2s}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-trigger.active .midi-icon .midi_cable_connection{fill:#f5a623}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content{font-size:14px;padding:20px 0 15px;min-width:230px;z-index:5;overflow:auto;max-height:80vh}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul{list-style:none;padding:0 0 12.5px}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul.midi-devices-tabs{display:flex;justify-content:space-evenly}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul.midi-devices-tabs li{display:flex;flex:0 0 auto;align-items:center;position:relative;line-height:20px}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul.midi-devices-tabs li a{position:relative;padding:0;font-size:11px;font-weight:500;text-transform:uppercase;color:var(--f-subdue)}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul.midi-devices-tabs li a:hover,.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul.midi-devices-tabs li a:focus{color:#262626}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul.midi-devices-tabs li a:after{position:absolute;bottom:-1px;margin:auto;content:"";display:block;height:0;border-radius:2px;background-color:var(--f-primary-10);font-weight:700;left:49%;right:49%;min-width:3px;transition:right .2s ease-in-out,left .2s ease-in-out}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul.midi-devices-tabs li.active a{color:var(--f-primary)}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul.midi-devices-tabs li.active a:after{height:3px;right:0;left:0}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul.midi-devices-list{margin-top:0;padding-bottom:10px}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul.midi-devices-list li>a{display:block;border-left:2px solid transparent;padding:7.5px 28px;color:var(--f-subdue)}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul.midi-devices-list li>a:hover,.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul.midi-devices-list li>a:focus{color:var(--f-ink)}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content ul.midi-devices-list li.active>a{color:var(--f-ink);text-decoration:none;outline:0;border-left:2px solid var(--f-primary);background:none;white-space:nowrap;max-width:400px;text-overflow:ellipsis;overflow:hidden}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content .midi-switcher{padding:15px 10px 0 25px;border-top:solid 1px #e7e8ec;display:flex;align-items:center}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content .midi-switcher .wrap-switch{margin-right:8px}.sc-mid-ctrls .sc-mid-dropdown .midi-dropdown-content .midi-switcher label{color:var(--f-subdue)}.sc-mid-ctrls .sc-mid-dropdown.connected{transition-duration:1s}.sc-mid-ctrls .sc-mid-dropdown.connected div.unactive{transition:opacity .2s;opacity:0}.sc-mid-ctrls .sc-mid-dropdown.connected div.active{transition:opacity .2s;opacity:1}.sc-mid-ctrls .midi-calib-main.dropdown-menu{display:block;position:absolute;top:40px;left:-38px;width:400px;z-index:1000;border:1px solid #dfe5ea;box-shadow:0 2px 12px 1px #00000008,0 10px 30px 5px #12142424;border-radius:6px;padding:0}.sc-mid-ctrls .midi-calib-main.dropdown-menu:before{left:56px;position:absolute;top:-6px;display:inline-block;border-right:6px solid transparent;border-bottom:6px solid #fff;border-left:6px solid transparent;content:""}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-header{padding:15px 15px 10px;color:var(--f-subdue);background:var(--f-bg-0);border-radius:inherit}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-header .midi-calib-title{color:var(--f-ink);font-size:17px;font-weight:500}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-header .midi-calib-title .tag-beta{display:inline-block;background:var(--f-ink);padding:3px 6px;margin-left:8px;border-radius:3px;font-weight:700;font-style:italic;font-size:12px;color:#fff;text-transform:uppercase;position:relative;top:-2px}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-header .midi-calib-description{line-height:22px;margin-top:.45em}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-content{color:#000;background-color:#fbfbfb;border-top:#dfe5ea 1px solid;border-bottom:#dfe5ea 1px solid;padding-left:40px}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-content svg{height:140px;background:transparent}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-content svg line:not([stroke]){stroke:#000}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-content svg .scoreShard{transform:translateY(20.875px)}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer{display:flex;flex-wrap:nowrap;border-radius:inherit;background:var(--f-bg-0);padding:8px 10px}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col{display:flex;flex-wrap:nowrap;align-items:center}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col.midi-calib-left-footer{flex:1 1 auto}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col.midi-calib-right-footer{flex-shrink:0}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col span{display:none}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col span.midi-calib-error{color:var(--f-safe-red)}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col span.active{display:flex}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button{background:transparent;border:none;line-height:26px;display:none;font-weight:500}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button:hover{text-decoration:underline}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.active{display:flex}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-calib-cancel{color:var(--f-subdue)}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-calib-start span{display:inline-block;margin-right:5px;color:var(--f-primary-dark)}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-calib-start div{float:right;border:#e0e0e0 1px solid;border-radius:13px;background:#fff;box-shadow:inset 0 0 1px #fff0;width:28px;height:28px;transition:all ease-in .2s;transform-origin:center;display:flex;align-items:center;justify-content:center}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-calib-start div:after{width:8px;height:8px;transform:scale(1);content:" ";background-color:var(--f-primary-dark);border-radius:50%;transition:all ease-in .2s;transform-origin:center}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-calib-finish{color:#60a101}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-calib-finish:hover{text-decoration:none}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-calib-finish span{display:inline-block;margin-right:5px}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-calib-finish div{display:inline-block;width:26px;height:26px;border-radius:50%;background:var(--f-happy-green);position:relative;top:-2px;margin-left:6px;font-weight:700}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-calib-finish div:after{content:"";display:block;position:relative;top:6px;left:10px;width:5px;height:10px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-calib-recording{color:#60a101}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-calib-recording span{display:inline-block;margin-right:5px}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-calib-recording div{float:right;position:relative;background:var(--f-bg-0);width:26px;height:26px}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-calib-recording div svg circle{stroke:var(--f-happy-green)}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button.midi-upgrade-power{color:#ea8807}.sc-mid-ctrls .midi-calib-main.dropdown-menu .midi-calib-footer .midi-calib-footer-col button img{margin-left:10px}.sc-mid-ctrls .recording-midi{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0b233edb;z-index:1000;display:flex;flex-direction:column;justify-content:center}.sc-mid-ctrls .recording-midi h2{color:#fff;text-align:center;font-weight:200;font-size:42px;line-height:57px}.sc-mid-ctrls .recording-midi h2 span{padding:4px}.sc-mid-ctrls .recording-midi .recording-button{vertical-align:top;position:relative;cursor:pointer;display:inline-block;border:2px solid white;border-radius:50%;width:80px;height:80px;margin:0 20px;background:transparent}.sc-mid-ctrls .recording-midi .recording-button svg{display:block;width:50px;height:auto;position:absolute;inset:0;margin:auto}.sc-mid-ctrls .recording-midi .recording-button svg path{fill:#fff}.sc-mid-ctrls .recording-midi .recording-button.active{background:#fff}.sc-mid-ctrls .recording-midi .recording-button.active svg path{fill:#49a5f8}.sc-mid-ctrls .recording-midi .recording-button.active.recording-stop .icon{border-color:#49a5f8}.sc-mid-ctrls .recording-midi .recording-button:hover{background:#ffffff1a}.sc-mid-ctrls .recording-midi .recording-button.recording-stop .icon{display:inline-block;position:absolute;inset:0;margin:auto;border-width:10px;border-color:#e7e8ec;width:0;height:0;border-style:solid;border-radius:2px}.sc-mid-ctrls .recording-midi .recording-tools{text-align:center;vertical-align:top;margin-top:30px}.sc-mid-ctrls .recording-midi .recording-sequences{display:flex;flex-direction:row;align-items:center;justify-content:center}.sc-mid-ctrls .recording-midi .recording-sequences .recording-sequence{padding:16px;height:120px;border-left:1px solid white;display:flex;flex-direction:row;align-items:center;justify-content:center}.sc-mid-ctrls .recording-midi .recording-sequences .recording-sequence:first-child{border-left:none}.sc-mid-ctrls .recording-midi .recording-sequences .recording-sequence .recording-click{height:40px;width:40px;border-radius:50%;background-color:#05172b52;margin:0 8px;position:relative}.sc-mid-ctrls .recording-midi .recording-sequences .recording-sequence .recording-click .recording-number{position:absolute;inset:0;margin:auto;width:50%;height:50%;text-align:center;color:#fff;font-weight:600;font-size:17px}.sc-mid-ctrls .recording-midi .recording-sequences .recording-sequence .recording-click .recording-fill{background-color:#fff;height:100%;width:100%;transform:scale(0);transition:all ease-in-out .5s;transform-origin:center;border-radius:50%}.sc-mid-ctrls .recording-midi .recording-sequences .recording-sequence .recording-click.active .recording-number{color:#05172b}.sc-mid-ctrls .recording-midi .recording-sequences .recording-sequence .recording-click.active .recording-fill{transform:scale(1)}.dta-picker{background:var(--f-bg-1);border-radius:3px;border:1px solid #e7e8ec;display:flex;overflow:hidden}.dta-action,.dta-group{display:block;border:0;background:transparent;width:100%;display:flex;align-items:center;text-align:left}.dta-action .i,.dta-group .i{display:flex;justify-content:center;align-items:center;margin:-5px;min-width:70px;min-height:42px}.dta-action .t,.dta-group .t{color:var(--f-ink);flex:1 1 auto}.dta-action .fill,.dta-group .fill{fill:var(--f-ink)}.dta-action .stroke,.dta-group .stroke{stroke:var(--f-ink)}.dta-action.active .t,.dta-group.active .t{color:var(--f-primary)}.dta-action.active .fill,.dta-group.active .fill{fill:var(--f-primary)}.dta-action.active .stroke,.dta-group.active .stroke{stroke:var(--f-primary)}.dta-groups{flex:0 0 auto;border-right:1px solid #e7e8ec;overflow:auto;padding:7px 0}.dta-group{padding:0 15px 0 0}.dta-group .t{width:150px;margin-right:30px;line-height:18px}.dta-group .a{display:flex}.dta-group .a path{fill:var(--f-primary)}.dta-actions{flex:1 1 auto;overflow:auto;padding:7px 0}.dta-action{padding:0}.dta-suggest-link{color:var(--f-primary);display:flex;align-content:center;padding:10px 22px}.dta-suggest-link:hover{color:var(--f-primary)}.dta-suggest-link img{height:16px;width:16px;margin-right:22px}.class-bullet{display:block;height:8px;width:8px;border-radius:50%}.dialogBackdrop-enter-active,.dialogBackdrop-leave-active{transition:opacity 1s ease}.dialogBackdrop-enter-from,.dialogBackdrop-leave-to{opacity:0}dialog{max-width:100vw;max-height:100vh;color:var(--f-ink)}dialog.bd::backdrop{position:fixed;inset:0;background-color:#0b233edb}dialog.bd+.backdrop,.d-backdrop{position:fixed;inset:0;background-color:#0b233edb;z-index:699}:root{--f-dialog-padding: 32px}.d-regular{background-color:var(--surface-general-neutral-primary, #fff);background-clip:padding-box;outline:none;border:none;border-radius:8px;box-shadow:0 0 0 1px #363c500a,0 1px 4px #363c5024;padding:var(--f-dialog-padding);position:fixed}.d-regular.d-center{top:50%;left:50%;transform:translate(-50%,-50%)}.d-regular h3,.d-regular .title{color:var(--f-ink);font-size:18px;line-height:22px;font-weight:600;text-align:left;margin-bottom:16px;word-break:break-word}.d-regular h3.lmb,.d-regular .title.lmb{margin-bottom:40px}.d-regular .button-groups{margin-top:16px;display:flex;justify-content:flex-end}.d-regular .button-groups .btn:last-child{margin-left:8px}@media screen and (min-width: 1024px){.d-regular .button-groups{margin-top:24px}}.d-wseparators{padding:0}.d-wseparators h3{border-bottom:1px solid var(--f-ink-10);padding:var(--f-dialog-padding) var(--f-dialog-padding) 24px;margin-bottom:0}.d-wseparators .content-inner{padding:24px var(--f-dialog-padding);border-bottom:1px solid var(--f-ink-10)}.d-wseparators .button-groups{margin:24px var(--f-dialog-padding) var(--f-dialog-padding)}@media (max-width: 650px){:root{--f-dialog-padding: 16px}.d-resp>.d-center{top:0;left:0;transform:none;border-radius:0;height:100vh;width:100vw;max-height:none;max-width:none;overflow:auto}.d-resp h3{padding-right:30px}.d-resp>.d-w-illu .d-content{padding:0}.d-resp>.d-close{top:16px;right:16px}.d-resp>.d-close .stroke{stroke:var(--f-ink)}}.d-none{background:transparent;border:0;position:fixed;width:100vw;height:100%;top:0;left:0;padding:0}.d-none.loading{cursor:wait}.d-close{position:absolute;top:16px;right:16px;cursor:pointer;border:none;background:transparent;padding:0;margin:0;z-index:10}.d-close .fill{fill:#fff}.d-w-illu{padding:0;display:flex}.d-w-illu .d-illu{display:flex;align-items:center;justify-content:center;flex:0 0 250px;background:#f6f6f6;border-bottom-left-radius:8px;border-top-left-radius:8px}.d-w-illu .d-close{top:32px;right:32px}.d-w-illu .d-content{padding:30px}.d-w-illu h3{text-align:left}@media (max-width: 730px){.d-w-illu{width:75vw}.d-w-illu .d-illu{display:none}}.dialog-no-padding{padding:0}.dialog-width-sm{width:350px}.dialog-width-md{width:400px}.dialog-width-lg{width:500px}.d-libpicker{padding:0;height:min(100vh - 48px,550px)}.d-libpicker iframe{width:100%;height:100%;border:0;border-radius:8px}.d-libpicker .d-close svg path{fill:var(--f-subdue)}@media (max-width: 767px){.d-libpicker{height:calc(100vh - 150px);width:100%}}@media (max-width: 650px){.d-resp>.d-libpicker.d-center{padding:0}}.choice-method.power-upgrade{border:1px solid var(--f-power-border)}.choice-method.power-upgrade .name{margin-bottom:16px}.choice-method.power-upgrade .power-upgrade-content{display:flex;align-items:center;justify-content:flex-start}.choice-method.power-upgrade .power-desc{font-size:14px;line-height:20px;letter-spacing:.3px;line-height:19px;color:var(--f-subdue)}.choice-method.power-upgrade img{flex:0 0 48px;width:48px;margin-right:16px}@media (max-width: 650px){.choice-method.power-upgrade .power-upgrade-content{flex-direction:column;align-items:flex-start}.choice-method.power-upgrade img{display:none}}.se-top{background:var(--f-bg-0);flex:0 0 auto;width:100%;z-index:6}.se-content{position:relative;min-height:0;height:100%;max-width:100%;margin:0;flex:1 1 auto;display:flex;flex-wrap:nowrap;flex-direction:row}.se-content.page .se-score-scrollable{background:var(--f-bg-1);display:flex;flex:1 1 auto;overflow-y:auto;position:relative}.se-content.track .se-score{height:100%}.se-score{position:relative;max-width:100%;margin:0;display:flex;flex:1 1 auto}.se-score-scrollable{width:100%;margin:0}.se-fl-vertical-page{width:100%;flex:1 0 100%;display:flex;flex-wrap:nowrap;flex-direction:row;position:relative}.se-fl-vertical-page .score-drawer{flex:0 1 auto}.se-fl-vertical-page .score-placeholder{width:100vw}.se-editor-video{position:absolute;width:260px;height:150px;left:30px;bottom:30px;box-shadow:0 15px 20px #0000004d;background:var(--f-bg-0)}@media (max-width: 800px),(max-height: 600px){.se-editor-video{display:none}}.se-header{background:var(--f-primary);color:#fff;height:64px;padding:0 24px;display:flex;flex-wrap:nowrap;align-items:center;z-index:13}.se-header.offline{background:linear-gradient(45deg,#1b2b43 0,#27364d)}.se-header .logo{background:transparent;border:0;padding:0;flex:0 0 36px;display:flex;margin-right:24px}.se-header .logo svg{width:36px;height:36px}.se-header>.title{flex:0 1 auto;white-space:nowrap;margin:0 24px 0 0;font-size:18px;font-weight:500;line-height:32px;overflow:hidden;text-overflow:ellipsis}.se-header>.title.loading{font-style:italic}@media (max-width: 1000px){.se-header:not(.keeptitle)>.left>.title{display:none}}.se-header .sc-aud-ctrls,.se-header .sc-mid-ctrls{z-index:13}.se-header .btn-fill.yellow{margin-right:16px}.se-header .se-header-btn{height:32px;display:flex;align-items:center;justify-content:center;border:0;border-radius:40px;box-shadow:0 2px 8px #0000000a,0 1px 3px #00000014;font-size:14px;line-height:16px;padding:0 12px;white-space:nowrap;transform:translateZ(0);transition:transform ease-out .2s;transition-timing-function:cubic-bezier(.165,.84,.44,1)}.se-header .se-header-btn .text-icon{margin-left:6px}.se-header .se-shr-btn{background-color:var(--f-bg-0);color:var(--f-primary)}.se-header .se-shr-btn .fill{fill:var(--f-primary)}.se-header .se-help-btn{background-color:var(--f-bg-0);padding:0 8px}.se-header .se-help-btn svg{width:16px;height:16px}.se-header .se-help-btn path{fill:var(--f-primary)}.se-header .separator{flex:1 1 auto}.se-header .se-collaborators{display:flex}.se-header .se-collab-usr{flex:0 0 32px}.se-btn-edu-dark{flex:0 0 auto;margin-left:14px;background-color:var(--f-ink);height:32px;border:0;border-radius:40px;transition:all .2s ease-in-out;display:flex;align-items:center;justify-content:center;white-space:nowrap;font-weight:500;font-size:12px;color:#fff;letter-spacing:1px;margin-right:15px;padding:8px 16px}.se-btn-edu-dark:hover{background:#131626d9}.se-btn-edu-dark img,.se-btn-edu-dark svg,.se-btn-edu-dark .l{margin-right:8px}.se-btn-edu-dark:disabled{opacity:.5}.se-btn-edu-dark:disabled span,.se-btn-edu-dark:disabled svg{opacity:.4}.se-ts-na{position:relative}.se-ts-na>.ddn-content{z-index:1000}.se-ts-na table{width:530px;margin:32px 0}.se-ts-na td{vertical-align:middle;text-align:center;border:none;width:33%}.se-ts-na td:first-child{border-right:1px solid var(--f-ink-10)}.se-ts-na img{max-width:100px}.se-ts-na .select-title{width:200px;height:24px;font-size:16px;line-height:1.5;text-align:center;color:var(--f-ink);padding-top:16px}.se-ts-na .select-title:hover{font-weight:700;color:var(--f-ink)}.se-ts-na .select-description{width:200px;font-size:14px;line-height:1.43;text-align:center;color:var(--f-subdue)}.se-score .score-drawer.rw .part-name:hover,.se-score .score-drawer.rw .title:hover,.se-score .score-drawer.rw .subtitle:hover,.se-score .score-drawer.rw .composer:hover,.se-score .score-drawer.rw .lyricist:hover,.se-score .score-drawer.rw .arranger:hover,.se-score .score-drawer.rw .rights:hover{fill:var(--f-score-voice-0)}.se-global.se-docsettings{position:fixed;top:0;left:0;width:100vw;z-index:25;background:var(--f-bg-1)}.se-global.se-docsettings .se-header .title{flex:1 1 auto}.se-global.se-docsettings .se-tb-main .t{display:none}.ds-close{background:transparent;border:0;padding:0;margin:0;display:flex;align-items:center;justify-content:center;flex-shrink:0}.ds-content{display:flex;align-items:flex-start;padding:30px 40px;overflow:auto}@media (max-width: 1070px){.ds-content{padding:16px}}.ds-settings-title{flex:0 0 auto;color:var(--f-ink);display:inline-flex;margin-bottom:15px;font-weight:700;font-size:24px;letter-spacing:.3px;line-height:30px;max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width: 700px){.ds-settings-title .edit-part-name{display:none}}.ds-settings-title-wrapper{display:flex;align-items:center;width:100%;height:30px;margin-bottom:15px}.ds-settings-title-wrapper .ds-settings-title{margin-bottom:0;flex:1 1 auto;overflow:hidden}.ds-settings-card{padding:30px;background:var(--f-bg-0);border-radius:4px}@media (max-width: 700px){.ds-settings-card{padding:16px}}.ds-settings-card h3{color:var(--f-ink);display:inline-flex;margin-bottom:15px;font-weight:700;font-size:20px;line-height:20px;letter-spacing:.3px;margin-top:30px}.ds-settings-card h4{color:var(--f-ink);display:block;letter-spacing:.3px;margin:15px 0;font-size:16px;font-weight:500}.ds-settings-card .main-description{color:var(--f-subdue);font-weight:500;font-size:14px;letter-spacing:.3px;line-height:20px}.ds-settings-card>.ctas{display:flex;justify-content:flex-end}.ds-settings-card .cta{width:100%;margin-top:15px;display:flex;justify-content:flex-end}.ds-settings-card .choice-method{position:relative}.ds-settings-card .choice-method.closed{cursor:pointer;padding-right:70px}.ds-settings-card .choice-method.extended>.description,.ds-settings-card .choice-method.extended>.edit-icon{display:none}.ds-settings-card .choice-method:last-child{margin-bottom:0}.ds-settings-card .choice-method .edit-icon{position:absolute;right:20px;top:50%;transform:translateY(-50%)}.ds-settings-card .choice-method .edit-icon img{height:48px;width:48px}.ds-settings-card .choice-method .edit-icon svg{fill:var(--f-primary)}.ds-settings-card .choice-method .edit-icon .stroke{stroke:var(--f-primary)}.ds-settings-card .choice-method .edit-icon .fill{fill:var(--f-primary)}.ds-settings-card .choice-method .ds-card-settings{margin-top:15px}@media (max-width: 700px){.ds-settings-card .choice-method .edit-icon{right:4px}.ds-settings-card .choice-method.closed{padding-right:50px}}.ds-settings-card .range-wlabel{display:flex;flex-wrap:wrap;align-items:center}.ds-settings-card .range-wlabel>input{flex:1 1 115px;margin:0 10px}.ds-settings-wrap{flex:1 1 auto;max-width:calc(70vw - 120px)}@media (max-width: 1069px){.ds-settings-wrap{max-width:100%;width:100vw}}.ds-settings-wrap button.go-back{flex:0 0 24px;background:transparent;border:0;padding:0;margin:0 12px 0 0;display:flex;align-items:center;justify-content:center}.ds-preview{flex:0 0 30vw;max-width:30vw;margin-left:40px}.ds-preview .ds-preview-label{font-weight:700;font-size:14px;line-height:30px;color:var(--f-ink)}.ds-preview .ds-preview-inner{position:fixed;z-index:1;width:30vw}.ds-preview .score-drawer{max-width:100%;margin-top:15px}.ds-preview svg.page{width:100%;height:auto;background:var(--f-bg-0);box-shadow:0 0 12px #0000000f,0 0 38px #00000017}.ds-mob-tb{flex:0 0 calc(48px + var(--sab));background:var(--f-bg-0);box-shadow:0 -3px 4px #0000000a;z-index:1000;padding-bottom:var(--sab);display:flex;align-items:center}.ds-mob-tb>button{background:transparent;border:0;flex:0 0 25%;height:100%;padding:0;display:flex;flex-direction:column;justify-content:center;align-items:center;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.ds-mob-tb>button .t{font-size:12px;line-height:13px;letter-spacing:.5px;font-weight:500;color:var(--f-subdue);margin:5px 0 0}.ds-mob-tb>button .i{display:flex}.ds-mob-tb>button .fill{fill:var(--f-subdue)}.ds-mob-tb>button .stroke{stroke:var(--f-subdue)}.ds-mob-tb>button.active .t{color:var(--f-primary)}.ds-mob-tb>button.active .fill{fill:var(--f-primary)}.ds-mob-tb>button.active .stroke{stroke:var(--f-primary)}.ds-mob-close{position:fixed;right:16px;top:20px;background:transparent;border:0;padding:0}.ds-mob-close .stroke{stroke:var(--f-ink)}.se-docsettings.mob .ds-settings-title-wrapper{margin-right:30px}.ds-instruments .ctas-container{display:flex;align-items:center;width:100%;justify-content:space-between;margin-top:16px}.ds-instruments .btn-fill{margin-left:8px}.ds-instruments .ctas-left{display:flex;margin-left:-5px}.ds-instruments .ctas-left .ds-action{display:flex;margin-left:0;color:var(--f-primary)}.ds-instruments .ctas-left .ds-action svg{margin-right:0;width:24px;height:24px;transform:translateY(1px)}.ds-instruments .ctas-left .ds-action span{display:block!important}.ds-instruments .ctas{display:flex;align-items:center;justify-content:flex-end;width:100%;margin:16px 0 0}.ds-instruments .ctas button:last-child{margin-left:16px}@media (max-width: 600px){.ds-instruments .ctas-container{flex-wrap:wrap;margin-top:0}.ds-instruments .ctas-left{margin-bottom:10px}}.ds-action{background:transparent;white-space:nowrap;border:0;padding:0;display:flex;align-items:center;color:var(--f-black);margin:0 0 0 16px;cursor:pointer}.ds-action.move{margin-left:0;margin-right:16px;cursor:move}.ds-action:not(.no-margin) svg{margin-right:8px}.ds-action .fill{fill:var(--f-primary)}.ds-action.success{color:var(--f-happy-green)}.ds-action.success .fill{fill:var(--f-happy-green)}@media (max-width: 600px){.ds-action{margin-left:0;flex:0 0 34px}.ds-action span{display:none}.ds-action.move{margin-right:0}}.ds-instrument-main-actions{display:flex;align-items:center;flex:0 0 auto}.ds-instrument-main-actions.deleting{color:var(--f-safe-red)}.ds-instrument-main-actions.deleting svg{margin-right:8px}.ds-instrument-main-actions.deleting .fill{fill:var(--f-safe-red)}.ds-instrument-main-actions.deleting .ds-action{color:var(--f-safe-red)}.ds-instrument-main-actions.deleting .ds-action.yes{margin-right:16px}.ds-instrument-main-actions.loading{pointer-events:none}.ds-instrument-main-actions.loading .ds-action,.ds-instrument-main-actions.loading .separator{display:none}.ds-instrument-main-actions.loading:after{content:"...";padding:0 35px}.ds-instruments-add .instrument-group-list,.ds-instruments-replace .instrument-group-list{margin:-16px 0 16px}.ds-instruments-add .instrument-group-list .instrument-group .group-details .icon,.ds-instruments-replace .instrument-group-list .instrument-group .group-details .icon{margin-left:0}.ds-instruments-replace .instruments-search-box{margin-top:16px}.ds-instruments-edit>.ctas{display:flex;justify-content:flex-end}.ds-instruments-edit .ins-name .wrap-form,.ds-instruments-edit .staves{margin-top:16px}.ds-instruments-edit .stave{display:flex;align-items:center;margin-bottom:16px}.ds-instruments-edit .stave:last-child{margin-bottom:0}.ds-instruments-edit .stave-info{flex:0 1 280px;display:flex;align-items:center}.ds-instruments-edit .stave-icon{margin-right:10px}.ds-instruments-edit .stave-add .fill{fill:var(--f-primary)}.ds-instruments-edit .stave-add .stroke{stroke:var(--f-primary)}.ds-instruments-edit .stave-rm{margin-left:10px;flex:0 0 16px}.ds-instruments-edit .stave-text.new{color:var(--f-primary)}.ds-instruments-edit .tab,.ds-instruments-edit .tab-strings{margin-top:16px}.ds-instruments-edit .tab .toggle-wrap,.ds-instruments-edit .tab-strings .toggle-wrap{margin-bottom:8px}.ds-instruments-edit .tab-strings .nb-strings{display:flex;white-space:nowrap;align-items:center;color:var(--f-ink);font-weight:500;height:34px;line-height:34px;margin:16px 0}.ds-instruments-edit .tab-strings .nb-strings span{white-space:nowrap}.ds-instruments-edit .tab-strings .nb-strings input{margin:0 5px;padding:5px;width:auto}.ds-instruments-edit .tab-strings .nb-strings input[disabled]{border-color:#c0ccd1;background:#eee}.ds-instruments-edit .tab-enabled{display:flex;align-items:center;color:var(--f-ink);font-weight:500;height:31px;line-height:32px}.ds-instruments-edit .tab-enabled .wrap-switch{margin-right:12px}.ds-brackets .part{position:relative;height:32px;display:flex;align-items:center;border-left:2px solid transparent;padding-left:10px}.ds-brackets img{margin-right:12px}.ds-brackets .bracketLeft{border-left:2px solid var(--f-ink)}.ds-brackets .bracketTop:before{content:" ";position:absolute;top:-5px;left:-2px;width:8px;height:6px;background:url(${A}) no-repeat center center}.ds-brackets .bracketBottom:before{content:" ";position:absolute;bottom:-5px;left:-2px;width:8px;height:6px;background:url(${O})}.ds-brackets-switch{display:flex;align-items:center;height:32px;padding-left:36px;line-height:16px;border-left:2px solid transparent}.ds-brackets-switch .wrap-switch{margin-right:10px}.ds-brackets-switch button{height:100%;border:0;padding:0;background:transparent;text-align:left}.ds-credits .grid-lyricist{display:flex;justify-items:center;flex-wrap:wrap;margin-right:-30px;width:auto}.ds-credits .grid-lyricist>div{flex:1 1 auto;min-width:200px;padding-right:30px}.ds-credits .wrap-form{margin-top:15px}.ds-credits>.wrap-form:first-child{margin-top:0}.ds-pubinfo{display:block;margin:15px 0;color:var(--f-subdue);font-weight:500;font-size:14px;line-height:18px;border-left:3px solid var(--f-primary);padding:5px 0 5px 10px}.ds-tracks .ctas{display:flex;align-items:center;justify-content:flex-end;width:100%;margin:16px 0 0}.ds-tracks .ctas button:last-child{margin-left:16px}.ds-list-tracks{list-style:none;padding:0;margin-top:-16px!important}.ds-list-tracks>li{color:var(--f-ink);box-shadow:0 -1px #e7e8ec;height:50px;line-height:16px;display:flex;align-items:center}.ds-list-tracks>li .icon{flex:0 0 16px;width:16px;margin-right:12px;display:flex}.ds-list-tracks>li .name{flex:1 1 auto;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.ds-list-tracks>li:first-child{box-shadow:none}.ds-tracks-placeholder .pl-title{text-align:center;color:var(--f-ink);font-size:22px;letter-spacing:.3px;line-height:30px;font-weight:500}.ds-tracks-placeholder .pl-icons{display:flex;width:100%;justify-content:center;padding:40px 0}.ds-tracks-placeholder .pl-icons img{height:34px;margin-right:30px}.ds-tracks-placeholder .pl-icons img:last-child{margin-right:0}.ds-tracks-placeholder .pl-ctas{display:flex;justify-content:center}.ds-tracks-placeholder .pl-ctas>button{margin-right:16px}.se-tb.reg{width:100%;z-index:11;display:flex;align-items:center;padding:0 20px 0 24px;background:var(--f-bg-0);box-shadow:0 3px 4px #0000000a}.se-tb.reg .tooltip[x-placement^=bottom]{margin-top:0}.se-tb.reg .se-tb-inner{flex:1 1 auto}.se-tb.reg .se-tb-main,.se-tb.reg .se-tb-sub,.se-tb.reg .se-tb-main-doc{display:flex;flex-wrap:nowrap;white-space:nowrap;position:relative}.se-tb.reg .se-tb-main{height:42px;justify-content:space-between}.se-tb.reg .se-tb-main-doc{align-items:center}.se-tb.reg .se-tb-main-edition button{background:transparent;border:0;height:42px;padding:0;overflow:hidden;position:relative;margin:0 15px;font-size:14px;color:var(--f-subdue);transition:all .5s ease-in-out}.se-tb.reg .se-tb-main-edition button:first-child{margin:0 15px 0 0}.se-tb.reg .se-tb-main-edition button:after{position:absolute;bottom:-1px;margin:auto;content:"";display:block;height:0px;border-radius:2px;background-color:#e7e8ec;font-weight:700;left:49%;right:49%;min-width:3px;transition:all .2s ease-in-out}.se-tb.reg .se-tb-main-edition button.active{color:var(--f-primary)}.se-tb.reg .se-tb-main-edition button.active:after{height:3px;right:0;left:0}.se-tb.reg .se-tb-divider{height:1px;width:100vw;background:#f2f4f5;position:absolute;left:0}.se-tb.reg .se-tb-sub{opacity:0;height:0;visibility:hidden;align-items:center;margin-left:-15px}.se-tb.reg .se-tb-sub.active{opacity:1;visibility:visible;height:42px}.se-tb.reg .se-tb-sub.more{flex-wrap:wrap;position:absolute;right:0;height:auto;margin-left:0;background:var(--f-bg-0);border-radius:2px;box-shadow:0 3px 4px #00000026;border-top:1px solid #f2f4f5}.se-tb.mob .se-tb-inner{padding:0 max(calc(var(--sar) - 8px),0px) 0 max(calc(var(--sal) - 8px),0px)}.se-tb.mob .se-tb-sub{display:flex;align-items:center;overflow-x:scroll;padding:10px 0}.se-tb.mob .se-tb-sub::-webkit-scrollbar{display:none}.se-tb.mob .piano-close,.se-tb.mob .unpitched-close{display:none}.se-tb.mob .se-tb-main-edition{display:flex;align-items:center;flex-wrap:nowrap}@media (max-width: 300px){.se-tb.mob .se-tb-main-edition{overflow-x:auto}.se-tb.mob .se-tb-main-edition::-webkit-scrollbar{display:none}}.se-tb.mob .se-tb-main-edition button{border:0;background:transparent;padding:0;margin:0}.se-tb.mob .se-tb-main-edition button .fill{fill:var(--f-subdue)}.se-tb.mob .se-tb-main-edition button .stroke{stroke:var(--f-subdue)}.se-tb.mob .se-tb-main-edition button.active .fill{fill:var(--f-primary)}.se-tb.mob .se-tb-main-edition button.active .stroke{stroke:var(--f-primary)}.se-tb.mob .se-tb-mid{display:flex;align-items:center;justify-content:space-between}.se-tb.mob .se-tb-mid-r{display:flex;align-items:center;height:22px}.tb-keysig{display:flex}.tb-keysig .ddn-content{padding:0}.tb-clef{display:flex}.tb-clef .ddn-content{padding:0}.timesig-draw{display:flex;flex-direction:column;align-items:center;justify-content:center;width:36px}.timesig-draw .ts-digit,.timesig-draw .ts-symbol,.timesig-draw span{display:flex}.timesig-draw .ts-symbol.common,.timesig-draw .ts-symbol.common svg{height:22px;width:20px}.timesig-draw .ts-symbol.cut,.timesig-draw .ts-symbol.cut svg{height:32px;width:20px}.tb-timesig{display:flex;align-items:center}.tb-timesig .ddn-content{padding:0}.tb-ending .ddn-content{margin:-9px -5px!important}.tb-jump-call .ddn-content{margin:-9px -7px!important}.tb-rehearsal .ddn-content{margin-top:20px;padding:0}.se-tb.mob .tb-mmr .tb-simple-icon .i svg{margin-left:-8px}.tb-mordents .ddn-content{margin:-9px!important}.tb-turn .ddn-content{margin:-9px -12px!important}.tb-tempo .ddn-content,.ddn-transpose,.tb-export .ddn-content,.ddn-beaming{padding:0}.b-beaming-display{overflow:auto;background:linear-gradient(to right,#fff,#fff,#fff0 1.5em),radial-gradient(farthest-side at 0 50%,#22222280,#fff0),linear-gradient(to left,#fff,#fff,#fff0 1.5em),radial-gradient(farthest-side at 100% 50%,#22222280,#fff0) 100%;background-color:#fff;background-repeat:no-repeat;background-attachment:local,scroll,local,scroll;background-size:100% 100%,.75em 100%,100% 100%,.75em 100%;height:100%}.b-beaming-display.active{background:linear-gradient(to right,#d7e9fd,#d7e9fd,#fff0 1.5em),radial-gradient(farthest-side at 0 50%,#22222280,#fff0),linear-gradient(to left,#d7e9fd,#d7e9fd,#fff0 1.5em),radial-gradient(farthest-side at 100% 50%,#22222280,#fff0) 100%;background-color:#d7e9fd;background-repeat:no-repeat;background-attachment:local,scroll,local,scroll;background-size:100% 100%,.75em 100%,100% 100%,.75em 100%;height:100%;border-radius:6px}.b-beaming-display .b-beats{display:flex}.b-beaming-display .b-beats>span{display:flex}.b-beaming-display .b-beats>span:first-child{margin-left:auto}.b-beaming-display .b-beats>span:last-child{margin-right:auto}.b-beaming-display .b-beat-beam-wrap{position:relative;z-index:100;width:20px}.b-beaming-display .b-beat-beam{display:block;position:relative;height:3px;width:20px;top:21px}.b-beaming-display .b-beat-beam.active{background:var(--f-primary)}.b-beaming-display.edit{margin:20px 0}.b-beaming-display.edit .b-beat-beam-wrap{cursor:pointer}.b-beaming-display.edit .b-beat-beam{background:var(--f-grey-2)}.b-beaming-display.edit .b-beat-beam.active{background:var(--f-primary)}.b-beaming-display .b-beat-icon{display:flex}.b-beaming-display .b-beat-icon svg{margin:0 -5px}.b-beaming-display .b-beat-icon .fill{fill:var(--f-ink)}.b-beaming-display .b-legend{text-align:center;color:var(--f-ink);letter-spacing:2px;line-height:20px;font-size:14px;padding-bottom:5px}.tb-bend .ddn-content:not(.bottom){margin:-9px -4px!important}.tb-pre-bend .ddn-content:not(.bottom){margin:-9px -5px!important}.tb-bend-release .ddn-content:not(.bottom){margin:-9px -4px!important}.se-tb.reg .tb-harmonic .ddn-content{margin:-9px -13px!important}.se-tb.reg .tb-8va .ddn-content{margin:-9px -12px 0!important;padding:8px 0}.sv-tb-instruments>button{width:36px;height:36px;background-color:#fff;border:0;border-radius:50%;box-shadow:0 1px 3px #28304f33,0 1px 8px #28304f1a;transition:all .3s ease-in-out;padding:0}.sv-tb-instruments>button:hover{box-shadow:0 3px 10px 1px #28304f2e,0 1px 3px #28304f33}.sv-tb-instruments>button .fill{fill:var(--f-primary)}.sv-tb-instruments.mobile>button{width:32px;height:32px}.sv-tb-instruments>.ddn-content{padding:0}.sv-tb-instruments>.ddn-content>ul{padding:12px 0;max-height:75vh;overflow:auto}ul.sv-tb-instruments-list{--solo-size: 20px}ul.sv-tb-instruments-list>li>*{padding-right:16px;padding-left:16px;color:var(--f-subdue);width:100%;text-align:left;border:0;background:transparent}ul.sv-tb-instruments-list li.divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e7e8ec}ul.sv-tb-instruments-list li.manage button{display:flex;justify-content:center;padding:8px 16px}ul.sv-tb-instruments-list li span{flex:1 0 auto;max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}ul.sv-tb-instruments-list li .fill{fill:var(--f-subdue)}ul.sv-tb-instruments-list .instrument-item{display:flex;justify-content:space-between;align-items:center}ul.sv-tb-instruments-list .instrument-item label{width:calc(100% - var(--solo-size));margin-right:10px}ul.sv-tb-instruments-list .solo{cursor:pointer;font-size:0;padding:0;background:transparent;line-height:var(--solo-size);height:var(--solo-size);width:var(--solo-size);color:var(--f-subdue-40);border:1px solid var(--f-subdue-40);border-radius:50%;transition:color .2s,border-color .2s;text-align:center}ul.sv-tb-instruments-list .solo:after{content:"S";font-size:12px}ul.sv-tb-instruments-list .solo:hover{border-color:var(--f-subdue);color:var(--f-subdue)}ul.sv-tb-instruments-list .solo.active{border-color:var(--f-primary);color:var(--f-primary)}.se-tb-instruments{margin-right:24px;z-index:12}.se-tb-instruments.open{z-index:13}.sv-tb-playstop{z-index:12;margin-right:24px}.sv-tb-playstop>button{width:36px;height:36px;background-color:#fff;border:0;border-radius:50%;box-shadow:0 1px 3px #28304f33,0 1px 8px #28304f1a;transition:all .3s ease-in-out;padding:0}.sv-tb-playstop .icon-play-morph{display:inline-block;position:relative;left:1px;width:0;height:0;border-style:solid;border-width:6px 0 6px 10.4px;border-color:transparent transparent transparent var(--f-primary);border-radius:2px;transition:all .2s ease-in-out}.sv-tb-playstop .icon-play-morph.stop{left:0;border-width:6px;border-color:var(--f-subdue)}.se-selected-ddn{display:block;padding:0;z-index:100}.d-tempo{padding:40px}.d-tempo .d-tempo-inner{width:fit-content;position:relative}.d-tempo .cta{display:flex;justify-content:center;margin-top:15px}.d-tempo .tempo-selector{width:360px;margin:30px auto;position:relative}.d-tempo .tempo-input{position:absolute;top:140px;left:112px;width:143px;height:82px;padding:0;font-size:60px;color:var(--f-primary);text-align:center;-moz-appearance:textfield;background:var(--f-bg-0);border:1px solid transparent;border-radius:4px;transition:all .2s ease-in-out}.d-tempo .tempo-input::-webkit-inner-spin-button,.d-tempo .tempo-input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.d-tempo .tempo-input:hover{background:var(--f-bg-1);border:1px solid var(--f-primary-10)}.d-tempo .tempo-input:active,.d-tempo .tempo-input:focus{border:1px solid var(--f-primary)}.d-tempo .tempo-type-selector{position:absolute;top:104px;left:154px}.d-tempo .tempo-type-selector>a{display:flex;align-items:center;width:55px;margin:auto}.d-tempo .tempo-type-selector>a .fill{fill:var(--f-primary)}.d-tempo .tempo-type-selector .icon-caret{margin-right:10px;width:0;height:0;border-left:3px solid transparent;border-right:3px solid transparent;border-top:3px solid var(--f-primary-dark)}.d-tempo .tempo-type-selector .note{margin-right:-5px}.d-tempo .tempo-type-selector .ddn-content{z-index:1000}.d-tempo .tempo-type-selector .ddn-inner{display:flex}.d-tempo .tempo-type-selector .new-duration{background:transparent;border:0;padding:0;margin:0}.d-tempo .tempo-type-selector .new-duration .fill{fill:var(--f-subdue)}.d-tempo .tempo-type-selector .new-duration.active .fill{fill:var(--f-primary-dark)}.d-tempo .text-bpm{position:absolute;top:222px;left:170px;font-size:13px;line-height:18px;letter-spacing:.81px;color:var(--f-subdue)}.d-tempo .tempo-inhibitor{position:absolute;top:82px;left:82px;pointer-events:none}.d-tempo .tempo-inhibitor circle{pointer-events:all}@keyframes tempo-bounce{0%{transform:scale(1)}50%{transform:scale(1.2) translate(-1.6px,-1.6px)}200%{transform:scale(1)}}.d-tempo .tempoToogleInside{transition:all .2s ease-in-out;fill:var(--f-primary)}.d-tempo .tempoToogleInside.focus{transform:scale(1.2) translate(-1.6px,-1.6px);animation:none!important}.d-tempo svg [class^=tempo-line-].active{stroke:var(--f-primary)}.d-tempo svg [class^=tempo-label-].active{fill:var(--f-primary)}@media (max-width: 420px){.d-tempo .tempo-selector{text-align:center}.d-tempo .tempo-selector>svg{display:none}.d-tempo .tempo-selector>*{position:relative;top:initial;left:initial}}.se-mob-btm{position:relative;flex:0 0 calc(249px + var(--sab));background:var(--f-bg-0);box-shadow:0 -1px 2px #28304f14;background:#000}.se-mob-btm.reduced{flex:0 0 44px}.se-mob-btm .se-tb.mob{background:var(--f-bg-0);min-height:249px}.se-mob-btm-abv{pointer-events:none;position:absolute;z-index:1;top:-40px;padding:0 max(var(--sar),8px) 0 max(var(--sal),8px);display:flex;width:100vw}.se-mob-btm-abv .se-tb-instruments>button{height:32px;width:32px}.se-txt-input{position:absolute;top:0;left:0;z-index:10}.se-txt-input input{text-align:center}.se-txt-input .suggest{border:1px solid #e7e8ec;border-radius:6px;background:#fafafa;margin-top:15px;padding:20px;white-space:nowrap;left:50%;position:absolute;transform:translate(-50%);display:flex;align-items:center}.se-txt-input .suggest .idea{color:var(--f-ink);font-family:"Noto Serif";font-size:15px;font-weight:700;line-height:18px;padding:2px 8px;background:#fff;border-radius:2px;border:1px solid #e7e8ec}.se-txt-input .suggest .idea.chord-focus{color:#fff;border-color:var(--f-primary-dark);background:var(--f-primary)}.se-txt-input .suggest .idea:not(:first-child){margin-left:5px}.se-txt-input .suggest:after{bottom:100%;left:50%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none;border-bottom-color:#fafafa;border-width:8px;margin-left:-8px}.comment-form-v2{display:flex;margin-top:0}.comment-form-v2 textarea{box-sizing:content-box;border:1px solid #e7e8ec;height:auto;min-height:22px;width:calc(100% - 20px);margin:0;resize:none;padding:7px 10px;line-height:20px}.comment-form-v2 textarea:disabled{background:#e7e8ec}.comment-form-v2 textarea:disabled:hover{border:1px solid transparent}.comment-form-v2 .t{width:100%;position:relative}.panel-inline-comments{flex:0 0 260px}.panel-inline-comments.page{margin:0 30px 0 16px}.panel-inline-comments.page .inline-comments-card{position:absolute}.panel-inline-comments.track{pointer-events:none;position:absolute;bottom:0;right:0;padding:30px;margin-right:0}.panel-inline-comments.track .inline-comments-card{max-height:50vh;overflow:auto}.panel-inline-comments:before{content:"";width:260px;height:0;display:block}.inline-comments-card{pointer-events:all;width:260px;border-radius:6px;transition:all .3s ease-in-out;cursor:pointer}.inline-comments-card.highlighted{background:#fff;box-shadow:0 0 0 1px #363c5014,0 1px 8px #363c5024}.inline-comments-card:not(.highlighted):hover{box-shadow:0 0 0 1px #363c500a,0 1px 4px #363c5024}.inline-comments-card .comment-item{padding:8px}.inline-comments-card .t-details{display:flex;align-items:center;justify-content:space-between;overflow:hidden;text-overflow:ellipsis;margin-bottom:12px}.inline-comments-card .comment-text{font-size:14px;line-height:20px;color:var(--f-ink);word-break:break-word;hyphens:auto}.inline-comments-card .comment-text a{color:var(--f-primary)}.inline-comments-card .t-metas{margin-top:-10px;font-size:13px;letter-spacing:0;line-height:20px;color:var(--f-grey-2);text-align:right}.inline-comments-card .t-metas button{background:transparent;padding:0;border:0}.inline-comments-card .t-metas .reply,.inline-comments-card .t-metas .resolve{transition:all .2s ease-in-out}.inline-comments-card .t-metas .reply{color:var(--f-primary)}.inline-comments-card .t-metas .resolve{color:var(--f-ink)}.inline-comments-card .t-metas .delete{color:var(--f-safe-red)}.inline-comments-card .comment-form-v2 .user-avatar{flex:0 0 36px;margin-right:10px}.inline-comments-card .comment-form-v2 .user-avatar img{border:0}.kb-container{display:flex;align-items:center}.kb-container .kb{text-align:center;margin:4px;padding:5px 10px;background:#fff;border-radius:5px;border:1px solid #e7e8ec;box-shadow:0 1px 2px #0000001a;white-space:nowrap;page-break-inside:avoid}.kb-container .kb-plus{font-size:14px;text-align:center;line-height:17px}.kbs{display:flex;align-items:center;color:var(--f-subdue);font-size:14px;line-height:17px;flex-wrap:wrap}.kbs-list{display:flex;align-items:flex-start;flex-wrap:wrap;margin-bottom:15px}.kbs-list:last-child{margin-bottom:0}.kb-item{display:flex;align-items:center;line-height:37px;margin-bottom:5px;width:100%}.kb-shortcuts{display:flex;align-items:center}.kb-name{display:flex;align-items:center;min-width:300px;white-space:nowrap;margin-right:30px;color:var(--f-ink)}.kb-name .icon{display:flex;flex:0 0 32px;margin:-5px 0 -5px -5px}.kb-name .fill{fill:var(--f-ink)}.kb-info-avail{display:flex;align-items:center;margin-left:8px}.kb-info-avail .fill{fill:var(--f-subdue)}.kb-actions{flex:1 0 auto;justify-content:flex-end;display:flex}.kb-actions button{border:0;background:transparent;padding:0}.kb-actions button.save{padding:0 8px 0 12px}.create-assignment-option-wrapper{display:flex}.create-assignment-option-wrapper h3{text-transform:none}.create-assignment-option-wrapper .btn{display:inline-block}.create-assignment-option-wrapper button.option{width:262px;display:flex;flex-direction:column;align-items:center;background-color:inherit;vertical-align:middle;text-align:center;border:none;padding:16px 16px 24px}.create-assignment-option-wrapper button.option:nth-child(2){border-right:1px solid var(--f-ink-10);border-left:1px solid var(--f-ink-10)}.create-assignment-option-wrapper img{margin-bottom:16px;width:80px}.create-assignment-option-wrapper .select-title{color:var(--f-ink);letter-spacing:1px;line-height:14px;margin-bottom:8px;padding-top:0;height:24px;font-size:16px;line-height:1.5;letter-spacing:normal}.create-assignment-option-wrapper .select-description{margin-bottom:16px}.create-assignment-option-wrapper .select-cta{padding:0}button.option:hover .select-title{font-weight:700}@media (max-width: 768px){.create-assignment-option-wrapper{width:100%;display:flex;flex-direction:column;max-height:620px;overflow:auto}.create-assignment-option-wrapper button.option:nth-child(2){border-top:1px solid var(--f-ink-10);border-bottom:1px solid var(--f-ink-10);border-right:none;border-left:none}}
`,""]);const C=ce},562606:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.ds-fonts table{width:auto;border-spacing:0 15px;border-collapse:unset;margin:-15px 0}.ds-fonts .ftype{display:flex;align-items:center;width:100%;margin-bottom:15px}.ds-fonts .flabel{color:var(--f-ink);padding:0 20px 0 0;font-weight:600;min-width:100px}.ds-fonts .font-family-input{width:100%}.ds-fonts .fstyle{background:transparent;border:1px solid var(--f-grey-2);border-radius:3px;display:inline-flex;align-items:center;justify-content:center;padding:0;height:36px;width:36px;flex:0 0 36px}.ds-fonts .fstyle[disabled]{cursor:not-allowed}.ds-fonts .fstyle[disabled] .fill{fill:var(--f-grey-2)}.ds-fonts .fstyle[disabled]:hover{border-color:var(--f-grey-2)}.ds-fonts .fstyle:hover{border-color:var(--f-primary-10)}.ds-fonts .fstyle .fill{fill:var(--f-ink)}.ds-fonts .fstyle.active{background:var(--f-primary);border:0 solid var(--f-primary)}.ds-fonts .fstyle.active .fill{fill:#fff}.ds-fonts .fadd{border:0;background:transparent;display:flex;align-items:center;padding:0;min-height:30px;line-height:16px;font-size:14px;color:var(--f-primary);font-weight:500;text-align:left}.ds-fonts .fadd svg{margin-right:8px;flex:0 0 13px}.ds-fonts .fadd .fill{fill:var(--f-primary)}.ds-fonts .fdel{border:0;padding:0;height:36px;width:36px;background:transparent}.ds-fonts .fdel .fill{fill:var(--f-ink)}.ds-fonts .fprops{display:flex;align-items:center;margin-top:0;min-width:281px}.ds-fonts .fdecl{display:flex;align-items:center;margin:0 0 0 15px}.ds-fonts .fdecl>button:first-child{border-top-right-radius:0;border-bottom-right-radius:0;margin-right:-1px}.ds-fonts .fdecl>button:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.ds-fonts .fsize-wrap{display:flex;flex:1 0 180px;height:36px;margin:0 0 0 15px;padding:0}.ds-fonts .fsize-wrap .form-control{height:34px}.ds-fonts .fsize-wrap input{flex:0 0 70px;border-top:0;border-bottom:0;border-left:0;border-radius:0}.ds-fonts .fsize-wrap select{flex:1 0 95px;border:0}.ds-fonts .ddn-add-fcustom{padding:5px 0}.ds-fonts .ddn-add-fcustom button{display:block;background:transparent;border:0;margin:0;padding:7.5px 15px;font-size:14px;color:var(--f-primary);font-weight:500;width:100%;text-align:left}@media (max-width: 650px){.ds-fonts table{display:block;margin-bottom:15px}.ds-fonts tr{display:flex;flex-wrap:wrap}.ds-fonts td{display:flex;align-items:center}.ds-fonts td.fdel-wrap{flex:1 1 auto;justify-content:flex-end}.ds-fonts .flabel,.ds-fonts .ffamily{flex:1 1 100%}.ds-fonts .fstyle:first-child,.ds-fonts .fdecl{margin:0}}
`,""]);const E=_},567037:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.component_lgXEP{--RoundedAction-size: 32px;--RoundedAction-color: var(--f-primary);--RoundedAction-background: var(--f-white);display:flex;align-items:center;justify-content:center;width:var(--RoundedAction-size);height:var(--RoundedAction-size);border-radius:50%;background:var(--RoundedAction-background);color:var(--RoundedAction-color);box-shadow:0 2px 8px #0000000a,0 1px 3px #00000014;border:none;cursor:pointer}.component_lgXEP:active{transform:scale(1.03)}
`,""]),_.locals={component:"component_lgXEP"};const E=_},567653:(c,m,o)=>{const i=o(338338);Object.keys(i).forEach(p=>{m[p]=i[p]}),m.set||(m.set=function(v,y,_){return Array.isArray(v)?(v.length=Math.max(v.length,y),v.splice(y,1,_),_):(v[y]=_,_)}),m.del||(m.del=function(v,y){if(Array.isArray(v)){v.splice(y,1);return}delete v[y]})},571110:(c,m,o)=>{var i=o(741291);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("7cfa2e96",i,!0,{})},571773:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.menuItem_ZDuSL{display:flex;align-items:center;min-height:48px;width:100%;padding:12px 8px;font-size:16px;line-height:24px;font-weight:400;color:var(--f-ink);appearance:none;background:none;border:0;cursor:pointer}.itemText_gfFTW{display:flex;flex:1}.itemIcon_TVqIb{display:flex;justify-content:center;width:24px;margin-right:8px}.itemIcon_TVqIb .midi_cable_connection,.itemIcon_TVqIb .midi_cable_core,.itemIcon_TVqIb .fill{fill:var(--f-ink)}.forwardIcon_SIksS{display:flex}
`,""]),_.locals={menuItem:"menuItem_ZDuSL",itemText:"itemText_gfFTW",itemIcon:"itemIcon_TVqIb",forwardIcon:"forwardIcon_SIksS"};const E=_},573636:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.trigger_abiN0{width:32px;height:32px}.user_gBAtb{border:2px solid var(--f-white)}
`,""]),_.locals={trigger:"trigger_abiN0",user:"user_gBAtb"};const E=_},582657:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.chip{display:flex;align-items:center;padding:8px;border-radius:4px;color:var(--f-ink);background-color:var(--f-primary-10);font-size:12px;line-height:16px}.chip strong{margin-left:4px}.chip .icon{display:flex;align-items:center;width:16px;height:16px}.chip .left{margin-right:8px}.chip .right{margin-left:8px}.chip .icon button{display:flex;background-color:transparent;padding:0;border:none;cursor:pointer}
`,""]);const E=_},587804:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.sub-comment-container{padding:10px 24px 12px;min-height:88px}.sub-comment-container .row-1{display:flex;justify-content:space-between}.sub-comment-container .left-section{display:flex}.sub-comment-container .details{margin-bottom:8px}.sub-comment-container img{border-radius:50%;width:32px;height:32px;border:solid 2px var(--f-ink-10);margin-right:8px}.sub-comment-container .name{height:fit-content;font-size:14px;color:var(--f-ink);line-height:normal}.sub-comment-container .time{height:17px;font-size:12px;color:var(--f-subdue);margin-top:unset;line-height:normal}.sub-comment-container .comment{font-size:14px;line-height:1.43;color:var(--f-ink);margin-top:unset}.sub-comment-container .comment a{word-wrap:break-word;white-space:pre-wrap;text-decoration:underline}.sub-comment-container textarea{overflow:hidden}.sub-comment-container .btn-cancel{width:fit-content;height:40px;margin-right:8px;border:unset;background-color:unset;text-shadow:0 1px 1px rgba(0,0,0,.04);font-size:14px;font-weight:600;line-height:1.14;text-align:center;color:#6f7a98}.sub-comment-container .more-opt-wrap button{background-color:inherit;border:unset;padding:unset}.sub-comment-container .more-opt-wrap svg{margin-left:8px}.sub-comment-container .more-opt-wrap .button-more:hover,.sub-comment-container .more-opt-wrap .c-opt:hover{background-color:var(--f-ink-10)}.sub-comment-container .more-opt-wrap .ddn-content{z-index:100}.sub-comment-container .more-opt-wrap .more-container{display:flex;flex-direction:column}.sub-comment-container .more-opt-wrap .more-opt-points{height:40px;font-size:14px;color:var(--f-subdue);text-align:left}.sub-comment-container .more-opt-wrap .button-more{height:40px;width:40px;border-radius:50%;display:flex;align-items:center;justify-content:center}.sub-comment-container .more-opt-wrap svg{margin-left:unset!important}.sub-comment-container .more-opt-wrap .comment-opt{min-width:80px;width:fit-content;padding:8px 0}.sub-comment-container .more-opt-wrap .c-opt{padding-left:16px;height:24px!important}.c-highlight{background-color:#dbedfc}.comment-container:last-child{margin-bottom:12px}
`,""]);const E=_},599375:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.unpitched-tooltip-ddn{font-size:16px}.unpitched-tooltip-ddn [x-arrow]{content:"";display:block;width:0;height:0;border-style:solid;position:absolute;margin:0 5px;border-width:5px 5px 0 5px;border-top-color:#2e2e2ee0;border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent;bottom:0;left:calc(50% - 5px);top:-5px!important}.unpitched-tooltip-ddn[x-placement=bottom] [x-arrow],.unpitched-tooltip-ddn[x-placement=bottom-end] [x-arrow],.unpitched-tooltip-ddn[x-placement=bottom-start] [x-arrow]{top:0;border-width:0 5px 5px 5px;border-top-color:transparent;border-bottom-color:#2e2e2ee0}.unpitched-tooltip-ddn ul{text-align:left;list-style-type:none;padding:5px 8px 8px;background:#2e2e2ee0;color:#fff;border-radius:8px}.unpitched-tooltip-ddn ul li{padding:0;white-space:nowrap}.unpitched-tooltip-ddn .label{display:inline-block;vertical-align:middle;font-size:12px;line-height:16px}.unpitched-tooltip-ddn .notehead-icon{display:inline-block;fill:#fff}.unpitched-tooltip-ddn .notehead-icon svg{width:10px;height:auto}
`,""]);const E=_},599985:(c,m,o)=>{var i=o(890600);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("f020d5c8",i,!0,{})},603656:(c,m,o)=>{var i=o(280661);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("9ac33ab8",i,!0,{})},606723:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.instructionAttachmentItem_Mr0uQ{display:flex;align-items:flex-start;justify-content:flex-start;min-height:36px;height:fit-content;margin-bottom:12px}.instructionAttachmentItem_Mr0uQ .attachmentItem_sj44f{max-width:352px;margin-bottom:8px;font-weight:400;font-size:12px;line-height:16px}.instructionAttachmentItem_Mr0uQ .details_h_Tpr{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;width:100%}.instructionAttachmentItem_Mr0uQ .details_h_Tpr a,.instructionAttachmentItem_Mr0uQ .details_h_Tpr p,.instructionAttachmentItem_Mr0uQ .details_h_Tpr span{max-width:322px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.instructionAttachmentItem_Mr0uQ .aTitle_a4QRk,.instructionAttachmentItem_Mr0uQ .extraInfo_kNQy7{width:100%;display:flex}.instructionAttachmentItem_Mr0uQ svg{margin-right:12px}.instructionAttachmentItem_Mr0uQ svg path{fill:var(--f-subdue)}.instructionAttachmentItem_Mr0uQ .extraInfo_kNQy7{color:var(--f-subdue)}.instructionAttachmentItem_Mr0uQ .aTitle_a4QRk,.instructionAttachmentItem_Mr0uQ .pTitle_pkbU2{color:var(--f-ink);font-weight:600}.instructionDialogMode_OxBqC .attachmentItem_sj44f{max-width:100%}.instructionDialogMode_OxBqC .details_h_Tpr a,.instructionDialogMode_OxBqC .details_h_Tpr p,.instructionDialogMode_OxBqC .details_h_Tpr span{max-width:96%}
`,""]),_.locals={instructionAttachmentItem:"instructionAttachmentItem_Mr0uQ",attachmentItem:"attachmentItem_sj44f",details:"details_h_Tpr",aTitle:"aTitle_a4QRk",extraInfo:"extraInfo_kNQy7",pTitle:"pTitle_pkbU2",instructionDialogMode:"instructionDialogMode_OxBqC"};const E=_},607504:(c,m,o)=>{var i={"./Bravura.svg":490905,"./FinaleAsh.svg":633155,"./FinaleBroadway.svg":824900,"./FinaleEngraver.svg":248307,"./FinaleJazz.svg":17802,"./FinaleLegacy.svg":525672,"./FinaleMaestro.svg":745728,"./Gootville.svg":94733,"./Leipzig.svg":672124,"./Leland.svg":718658,"./Petaluma.svg":357427,"./Sebastian.svg":780794};function p(y){var _=v(y);return o(_)}function v(y){if(!o.o(i,y)){var _=new Error("Cannot find module '"+y+"'");throw _.code="MODULE_NOT_FOUND",_}return i[y]}p.keys=function(){return Object.keys(i)},p.resolve=v,c.exports=p,p.id=607504},613712:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.ds-layout .cardsChoices{display:flex;flex-wrap:wrap}.ds-layout .cardChoice{flex:0 1 auto;display:flex;flex-direction:column;align-items:center;cursor:pointer;padding:20px;margin-bottom:15px;border:1px solid #e7e8ec;border-radius:8px}.ds-layout .cardChoice.active{border:1px solid var(--f-primary)}.ds-layout .cardChoice svg{width:100%}.ds-layout .cardChoice span{font-size:16px;font-weight:500;color:var(--f-ink);margin-top:8px}.ds-layout .bigCardsChoices{margin-top:15px;width:100%}.ds-layout .bigCardChoice h3{margin-top:0}.ds-layout .bigCardChoice input{display:none}.ds-layout .bigCardChoice img{margin-top:16px}.ds-layout .bigCardChoice .description{text-align:center}@media (min-width: 755px){.ds-layout .cardsChoices{margin-right:-15px}.ds-layout .cardsChoices .cta{margin-right:30px}.ds-layout .cardChoice{max-width:350px;margin-right:15px}.ds-layout .bigCardChoice{max-width:370px;min-height:262px}}.ds-layout .wrap-switch-contain input[type=number]{margin-left:8px}.ds-settings-wrap .nav-tabs{flex:0 0 auto;border-top-left-radius:4px;border-top-right-radius:4px;padding-left:30px;padding-top:24px;background-color:var(--f-bg-0);border-bottom:1px solid var(--f-ink-10);--f-tab-active-color: var(--f-primary)}
`,""]);const E=_},619600:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.submission-comments .title-feedback{padding:0 24px;margin-bottom:10px;font-size:14px;font-weight:700;color:var(--f-ink)}.submission-comments .review-form{color:var(--f-ink);width:100%;padding:0 24px}.submission-comments .review-form>span{font-size:13px;font-weight:600;line-height:24px}.submission-comments .review-form textarea{width:100%;height:90px}.submission-comments .review-form .button-groups{margin-top:8px;display:flex;justify-content:flex-end;align-items:baseline}.submission-comments .review-form .button-groups .btn-post{width:fit-content}.submission-comments .btn-group{display:flex;justify-content:flex-end;margin-top:8px}
`,""]);const E=_},620715:(c,m,o)=>{var i=o(891700);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("a7f341e6",i,!0,{})},622383:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.sidebarTabs_e_o7Y,.tabItem_bDsLF{display:flex;justify-content:center;align-items:center}.sidebarTabs_e_o7Y{height:46px;border-bottom:solid 1px var(--f-ink-10)}.sidebarTabs_e_o7Y button:last-of-type{border-right:unset}.tabItem_bDsLF{background-color:unset;border:unset;padding:12px 24px;font-weight:400;font-size:14px;line-height:20px;color:var(--f-subdue);cursor:pointer;border-bottom:solid 1px transparent}.tabItem_bDsLF svg{margin-right:8px}.tabItem_bDsLF svg path{fill:var(--f-subdue)}.currentlyViewing_g5P69{border-bottom:solid 1px var(--f-ink);color:var(--f-ink)}.currentlyViewing_g5P69 svg path{fill:var(--f-ink)}
`,""]),_.locals={sidebarTabs:"sidebarTabs_e_o7Y",tabItem:"tabItem_bDsLF",currentlyViewing:"currentlyViewing_g5P69"};const E=_},626208:(c,m,o)=>{var i=o(599375);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("0b012411",i,!0,{})},633155:(c,m,o)=>{"use strict";c.exports=o.p+"img/791213da59ad7bb279e6.svg"},645462:(c,m,o)=>{"use strict";c.exports=o.p+"img/fbf7540e6964c813cbf2.svg"},651942:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.goBack_wWEIS{display:flex;padding:0;background:none;border:0}.scoreHeader_lJG9D{font-size:16px;line-height:24px;font-weight:600;color:var(--f-ink)}@media (min-width: 768px){.scoreHeader_lJG9D{font-size:17px}}
`,""]),_.locals={goBack:"goBack_wWEIS",scoreHeader:"scoreHeader_lJG9D"};const E=_},659449:(c,m,o)=>{var i=o(540136);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("2002781a",i,!0,{})},660583:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.measuresOptions{display:flex;flex-wrap:wrap;align-items:center;margin-right:-30px}.measuresOptions>.form-content{flex:1 1 auto;padding-right:30px}
`,""]);const E=_},668526:(c,m,o)=>{var i=o(270651);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("5f48288c",i,!0,{})},672124:(c,m,o)=>{"use strict";c.exports=o.p+"img/6fd38956f923f1835730.svg"},674687:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.root_lH0zJ{max-height:100%;display:flex;flex-direction:column}.card_mmyRL,.scrollable_Zd2Jn{display:flex;flex-direction:column;flex:0 1 auto;overflow-y:auto}.ctas_Rxy1W{flex:0 0 auto}
`,""]),_.locals={root:"root_lH0zJ",card:"card_mmyRL",scrollable:"scrollable_Zd2Jn",ctas:"ctas_Rxy1W"};const E=_},686048:(c,m,o)=>{var i=o(516501);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("d7a354d2",i,!0,{})},687915:(c,m,o)=>{"use strict";o.d(m,{A:()=>ce});var i=o(361744),p=o(538065);function v(q,A,O,C,j,e){return(0,i.uX)(),(0,i.CE)("div",{class:(0,p.C4)({[q.$style["new-badge"]]:!0,[q.$style.fill]:O.fill})},(0,p.v_)(q.$t("flat:new")),3)}const y={name:"NewBadge",props:{fill:{type:Boolean,default:!1}}};var _=o(757718),E=o.n(_),K=o(938793);const x={};x.$style=E();const ce=(0,K.A)(y,[["render",v],["__cssModules",x]])},691045:(c,m,o)=>{var i=o(562606);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("4536b17c",i,!0,{})},691657:(c,m,o)=>{var i=o(333060);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("44d24700",i,!0,{})},697523:(c,m,o)=>{var i=o(619600);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("669298da",i,!0,{})},704427:(c,m,o)=>{"use strict";o.d(m,{A:()=>E});var i=o(570333),p=o(296339),v=o(938793);const y={};y.$style=p.default;const E=(0,v.A)(i.A,[["__cssModules",y]])},704494:(c,m,o)=>{var i=o(382577);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("3598e01d",i,!0,{})},706019:(c,m,o)=>{"use strict";c.exports=o.p+"img/78f67fd3e354b78a1271.svg"},706615:(c,m,o)=>{var i=o(739870);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("0e6ad2e7",i,!0,{})},716743:(c,m,o)=>{"use strict";o.d(m,{KJ:()=>p.A,UF:()=>v.A,eu:()=>i.A});var i=o(633303),p=o(243838),v=o(212885)},718658:(c,m,o)=>{"use strict";c.exports=o.p+"img/49382391fa685989cc6e.svg"},727335:(c,m,o)=>{var i=o(427458);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("4063cf80",i,!0,{})},727825:(c,m,o)=>{"use strict";o.d(m,{N:()=>q,o:()=>ce});var i=o(990244),p=o(909696),v=o(540888),y=o(763939),_=o(706305),E=o(6645),K=o(744056),x=o(361744),Q=o(314205);const ce=["eduReview"],q=(0,E.nY)("scoreEditor",()=>{const A=(0,Q.X)(),O=(0,i.s)(),C=(0,y.F)(),j=(0,K.KR)(null),e=(0,K.KR)(null),J=(0,K.KR)(null),w=(0,K.KR)(!1),W=(0,K.KR)(!1),X=(0,K.KR)(null),me=(0,K.KR)(null),ge=(0,K.KR)(!1),Le=(0,K.KR)(0),Ae=(0,K.KR)(!0),Ee=(0,x.EW)(()=>j.value||O.globalError||null),re=(0,x.EW)(()=>{var $;const le=($=A.currentSubmissionAssignment)==null?void 0:$.urlDetails;return le||"/my-library"}),G=(0,x.EW)(()=>{const $=(0,_.j)();return e.value&&$.scores[e.value]||null}),B=(0,x.EW)(()=>{var $;const le=(($=G.value)==null?void 0:$.modificationDate)&&new Date(G.value.modificationDate)||null,Ie=O.ackDate&&new Date(O.ackDate)||null;return Ie&&le&&Ie>le?Ie:le}),ae=(0,x.EW)(()=>(0,v.PI)(B.value||new Date)),ue=(0,x.EW)(()=>(0,p.q6)().displayMobileEditor),Re=(0,x.EW)(()=>window.flatappname==="iosEditor"),De=(0,x.EW)(()=>{var $;return(($=C.account)==null?void 0:$.classRole)==="teacher"&&me.value==="eduReview"});function Te(){Le.value++}function je(){Le.value--}function be($){if($!==null&&!Number.isInteger($))throw new Error("Global error must be an integer error code or null");j.value=$}function We($){e.value=$,A.setScoreId($)}function Ce($){J.value=$}function we($){W.value=$}function ee($){X.value=$}function N($){me.value=$}function Se($){ge.value=$}function Ze($){w.value=$}function _e($){Ae.value=$}return{globalError:Ee,scoreId:e,sharingKey:J,mobSidebarOpened:w,startOnboardingTour:W,onboardingStep:X,parentWindow:me,hasBackdrop:ge,viewportWatchersCount:Le,displayUI:Ae,mainLeaveButtonUrl:re,score:G,lastEditDate:B,lastEditDateRelative:ae,displayMobileEditor:ue,displayMobileNativeEditor:Re,isAssignmentReview:De,watchViewport:Te,unwatchViewport:je,setGlobalError:be,setScoreId:We,setSharingKey:Ce,setStartOnboardingTour:we,setOnboardingStep:ee,setParentWindow:N,setHasBackdrop:Se,setMobSidebarOpened:Ze,setDisplayUi:_e}})},733767:(c,m,o)=>{"use strict";o.d(m,{QY:()=>v.A,RQ:()=>i.A,fh:()=>p.A});var i=o(536208),p=o(954749),v=o(820759),y=o(786656),_=o(184190)},736184:(c,m,o)=>{var i=o(147797);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("63c3f4c6",i,!0,{})},739870:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.upgradeBtn_ViqOS{margin-left:auto}.img24_IVqBF{width:24px;height:24px}
`,""]),_.locals={upgradeBtn:"upgradeBtn_ViqOS",img24:"img24_IVqBF"};const E=_},741291:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.anacrusis{display:flex;align-items:center}.anacrusis .wrap-switch{margin-right:15px}.anacrusis button{margin-right:8px;padding:10px 0;border:0;white-space:nowrap;background:transparent}.anacrusis input{flex:0 0 80px;margin-left:8px}.anacrusis+.nonFirst{margin-top:6px}
`,""]);const E=_},741871:(c,m,o)=>{var i=o(534558);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("455b461a",i,!0,{})},745728:(c,m,o)=>{"use strict";c.exports=o.p+"img/c89944c481c131ef035c.svg"},746370:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.measuresNumbersPolicy_S9AkM{display:flex;flex-wrap:wrap;align-items:center;margin-right:-15px}.measuresNumbersPolicy_S9AkM .measuresNumbersPolicy-radio_y2JMf{flex:0 1 150px;white-space:nowrap;padding-right:15px;margin-bottom:8px}
`,""]),_.locals={measuresNumbersPolicy:"measuresNumbersPolicy_S9AkM","measuresNumbersPolicy-radio":"measuresNumbersPolicy-radio_y2JMf"};const E=_},754357:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.wrapper_i1feV{width:100%;display:flex;flex-flow:column;align-items:flex-start}.title_jdtyy{color:var(--f--ink, #2f3446);font-size:16px;font-style:normal;font-weight:600}.description_C3fof{color:var(--f-subdue, #646f8d);font-size:14px;font-style:normal;font-weight:400}.keyboard_AX6Ac{margin-top:15px;height:124px;max-width:406px;width:100%;background:#000;border:1px solid #000;position:relative;align-self:center;display:flex;flex-flow:row;gap:.5%}.key_Qd5i9{position:relative}.whiteKey_Hp2CT{width:14%;height:88%;border-radius:0 0 6px 6px;background:#fff}.blackKey_FI7Ft{position:absolute;height:54%;width:10%;top:0;border-radius:0 0 6px 6px;background:#08080d;z-index:1}.blackKey_FI7Ft:nth-child(1){left:9%}.blackKey_FI7Ft:nth-child(2){left:23.5%}.blackKey_FI7Ft:nth-child(3){left:52%}.blackKey_FI7Ft:nth-child(4){left:66.5%}.blackKey_FI7Ft:nth-child(5){left:81%}.blackKey_FI7Ft.active_nKfdv{z-index:2}.label_ADme0{position:absolute;bottom:8px;left:50%;margin-left:-10px}.labelInner_hHvUq{width:20px;height:20px;line-height:20px;font-size:11px;font-style:normal;font-weight:600;border-radius:4px;border:1px solid var(--f-ink-20);transition:border-color .2s}.key_Qd5i9:hover .labelInner_hHvUq{border-color:var(--f-primary)}
`,""]),_.locals={wrapper:"wrapper_i1feV",title:"title_jdtyy",description:"description_C3fof",keyboard:"keyboard_AX6Ac",key:"key_Qd5i9",whiteKey:"whiteKey_Hp2CT",blackKey:"blackKey_FI7Ft",active:"active_nKfdv",label:"label_ADme0",labelInner:"labelInner_hHvUq"};const E=_},757718:(c,m,o)=>{var i=o(792523);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("ba0fbf24",i,!0,{})},763754:(c,m,o)=>{var i=o(754357);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("6bbf3722",i,!0,{})},763939:(c,m,o)=>{"use strict";o.d(m,{F:()=>q});var i=o(303953),p=o(637466),v=o(6645),y=o(744056),_=o(361744),E=o(328010),K=o(390907),x=o(676170),Q=(A,O,C)=>new Promise((j,e)=>{var J=X=>{try{W(C.next(X))}catch(me){e(me)}},w=X=>{try{W(C.throw(X))}catch(me){e(me)}},W=X=>X.done?j(X.value):Promise.resolve(X.value).then(J,w);W((C=C.apply(A,O)).next())});const ce=()=>window.location.href||"/",q=(0,v.nY)("account",()=>{const A=(0,y.KR)(null),O=(0,_.EW)(()=>A.value||{type:"none"}),C=(0,_.EW)(()=>O.value.locale||i.A.locale||"en"),j=(0,_.EW)(()=>Array.isArray(O.value.experience)?O.value.experience:[]),e=(0,_.EW)(()=>{var D;return((D=O.value.plan)==null?void 0:D.features)||{}}),J=(0,_.EW)(()=>{var D;return((D=O.value.plan)==null?void 0:D.trials)||{}}),w=(0,_.EW)(()=>O.value.editorPreferences||{}),W=(0,_.EW)(()=>{var D;return((D=O.value.about)==null?void 0:D.occupation)||null}),X=(0,_.EW)(()=>(0,p.A)(new Date(O.value.registrationDate||new Date),new Date("2023-04-01T00:00:00.000Z"))),me=(0,_.EW)(()=>E.A.hasAccessToken()),ge=(0,_.EW)(()=>{var D;return((D=O.value.plan)==null?void 0:D.name)||"indiv-free"}),Le=(0,_.EW)(()=>{const D=ce();return re.value||D.includes("/edu")?"Flat for Education":D.includes("/embed")?"Flat Embed":"Flat"}),Ae=(0,_.EW)(()=>O.value.type==="user"),Ee=(0,_.EW)(()=>O.value.type==="guest"),re=(0,_.EW)(()=>!!(i.A.edu||O.value.organization)),G=(0,_.EW)(()=>O.value.product==="flat"),B=(0,_.EW)(()=>ge.value.startsWith("emb")),ae=(0,_.EW)(()=>O.value.product==="embed"),ue=(0,_.EW)(()=>i.A.product==="msnippet"||O.value.product==="msnippet"),Re=(0,_.EW)(()=>{var D;return ge.value==="indiv-power"||!((D=O.value.plan)!=null&&D.upgradable)}),De=(0,_.EW)(()=>ge.value==="msnippet-standard"),Te=(0,_.EW)(()=>j.value.includes("edu.performance.beta")),je=(0,_.EW)(()=>O.value.organizationRole==="admin"),be=(0,_.EW)(()=>O.value.classRole==="teacher"),We=(0,_.EW)(()=>O.value.classRole==="student");function Ce(D){A.value=D,D.type!=="guest"&&(K.A.set("account",D),(0,x.gV)(D))}function we(D){O.value&&Object.assign(O.value,D)}function ee(D){var z;Array.isArray(O.value.experience)&&!((z=O.value.experience)!=null&&z.includes(D))&&O.value.experience.push(D)}function N(D,z){return Q(this,null,function*(){if(!Ae.value||w.value[D]===z)return;const ne={editorPreferences:{[D]:z}},$e=yield E.A.updateAccount(ne);Ce($e)})}function Se(D){return Q(this,null,function*(){const z=yield E.A.updateAccount(D);Ce(z)})}function Ze(D){return Q(this,null,function*(){const z=yield E.A.updateTeacherProfile(D);Ce(z)})}function _e(D){return Q(this,arguments,function*({service:z}){const ne=yield E.A.unlinkSso(z);return ne[`${z}Details`]=null,Ce(ne),ne})}function $(){O.value&&(O.value.picture=null,O.value.pictureFile=null)}function le(){O.value&&(O.value.coverPicture=null,O.value.coverPictureFile=null)}function Ie(){A.value=null,K.A.remove("account"),(0,x.gV)(null)}return{accountState:A,account:O,locale:C,experience:j,accountFeatures:e,accountTrials:J,editorPreferences:w,accountOccupation:W,signupAfterFirstApril:X,hasAccessToken:me,planName:ge,productName:Le,isPowerUser:Re,isMusicSnippetPlan:De,hasPerformanceBeta:Te,isUser:Ae,isGuestAccount:Ee,isEdu:re,isFlatAccount:G,hasEmbedPlan:B,isEmbedAccount:ae,isMusicSnippet:ue,isAdmin:je,isTeacher:be,isStudent:We,setAccountData:Ce,setAccountPartialData:we,appendExperience:ee,setEditorPreference:N,updateAccount:Se,updateTeacherProfile:Ze,unlinkAccountSso:_e,clearAccount:Ie,unsetAccountPicture:$,unsetAccountCoverPicture:le}})},769307:(c,m,o)=>{var i=o(468750);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("4dca9338",i,!0,{})},773029:(c,m,o)=>{"use strict";c.exports=o.p+"img/7333264446bf1c3b5089.svg"},774352:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.power-badge_Cphfo{width:16px;height:16px;margin-left:12px}.mobileWrap_FBoY7{display:flex;flex-direction:column;max-width:100%!important;width:100vw!important;height:100%}.mobContent_ImqOH{flex:1 1 auto;overflow:auto}
`,""]),_.locals={"power-badge":"power-badge_Cphfo",mobileWrap:"mobileWrap_FBoY7",mobContent:"mobContent_ImqOH"};const E=_},777326:(c,m,o)=>{var i=o(994551);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("737ae7b4",i,!0,{})},780794:(c,m,o)=>{"use strict";c.exports=o.p+"img/8a8ea1bf1b8546645324.svg"},784986:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.PlaybackOptionsListItem_EIGSE{appearance:none;background:var(--surface-general-neutral-primary);border:0;cursor:pointer;padding:12px 8px;text-align:left;color:var(--text-general-primary);display:flex;align-items:center;gap:8px}.icon_twoB4{flex:0 0 24px}.text_diXwE{flex:1 1 auto;font:var(--text-sm-regular)}
`,""]),_.locals={PlaybackOptionsListItem:"PlaybackOptionsListItem_EIGSE",icon:"icon_twoB4",text:"text_diXwE"};const E=_},792523:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.new-badge_TlkAY{background-color:var(--f-primary-10);color:var(--f-primary-dark);font-weight:600;font-size:10px;font-style:italic;padding:2px 5px 3px;border-radius:100px}.fill_n3oPE{background-color:var(--f-primary-dark);color:var(--f-white)}
`,""]),_.locals={"new-badge":"new-badge_TlkAY",fill:"fill_n3oPE"};const E=_},803457:(c,m,o)=>{var i=o(919760);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("fc12e7ac",i,!0,{})},806577:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.loadingIssue_SXa7W{display:flex;flex-direction:column;padding:16px}.loadingIssue_SXa7W p{color:var(--f-subdue);font-size:14px;font-family:var(--f-font-common);font-weight:500;line-height:20px}.loadingIssue_SXa7W ul{margin-top:8px}.loadingIssue_SXa7W li{display:flex;align-items:center;color:var(--f-subdue);font-size:14px;font-family:var(--f-font-common);font-weight:500;line-height:28px}.loadingIssue_SXa7W li svg{color:var(--f-safe-terracota);margin-right:8px}
`,""]),_.locals={loadingIssue:"loadingIssue_SXa7W"};const E=_},808475:(c,m,o)=>{"use strict";c.exports=o.p+"img/c8718f9dc01f3ddb481d.svg"},815442:(c,m,o)=>{var i=o(674687);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("2c93fea8",i,!0,{})},817926:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.wrapper_oAFgY{display:block;margin-bottom:16px;background-color:var(--f-bg-0);border:1px solid var(--f-ink-10);border-radius:8px}.accordion-toggle_TTDXk{display:grid;grid-template-columns:1fr 24px;grid-column-gap:8px;align-items:center;padding:24px 24px 24px 10px;background-color:transparent;border:none;width:100%;cursor:pointer}.accordion-toggle_TTDXk .toggle-icon_J6E8Z{color:var(--f-subdue);display:flex;align-items:center}.accordion-toggle_TTDXk .toggle-icon-open_qQPHn{transform:rotate(180deg)}.content_wsMJ7{overflow:hidden;transition:max-height .3s ease-in-out;max-height:0;padding-left:20px;padding-right:20px}
`,""]),_.locals={wrapper:"wrapper_oAFgY","accordion-toggle":"accordion-toggle_TTDXk","toggle-icon":"toggle-icon_J6E8Z","toggle-icon-open":"toggle-icon-open_qQPHn",content:"content_wsMJ7"};const E=_},818583:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.header_DJBi5{display:flex;align-items:center;justify-content:space-between;padding:8px;border-bottom:1px solid rgba(0,0,0,.3);background:var(--f-bg-0)}.left_NOlRE,.center_k3YPs,.right_Y_4MC{display:flex;align-items:center;gap:8px}.center_k3YPs{flex:1 1 100%;justify-content:space-around;overflow:hidden}.left_NOlRE,.right_Y_4MC{flex:1 0 64px}.right_Y_4MC{justify-content:end}
`,""]),_.locals={header:"header_DJBi5",left:"left_NOlRE",center:"center_k3YPs",right:"right_Y_4MC"};const E=_},819048:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.scoreHeader_lPmE0{font-size:16px;line-height:24px;font-weight:600;color:var(--f-ink);background:none;border:none;appearance:none;padding:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (min-width: 768px){.scoreHeader_lPmE0{font-size:17px}}.goBack_Zl0MI{display:flex}.powerLink_t4b1R{display:flex;appearance:none;background:none;border:none;padding:0}.sidebarTrigger_ITVu1{appearance:none;background:none;border:none;padding:0;display:flex;cursor:pointer}
`,""]),_.locals={scoreHeader:"scoreHeader_lPmE0",goBack:"goBack_Zl0MI",powerLink:"powerLink_t4b1R",sidebarTrigger:"sidebarTrigger_ITVu1"};const E=_},822589:(c,m,o)=>{var i=o(774352);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("01d6f17e",i,!0,{})},823862:(c,m,o)=>{"use strict";c.exports=o.p+"img/2a4cd34674340c8cdab8.svg"},824900:(c,m,o)=>{"use strict";c.exports=o.p+"img/c37dc5fa4f145b56d53c.svg"},827676:(c,m,o)=>{var i=o(562153);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("bf54ef1c",i,!0,{})},828346:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.input_ipwrL{background-color:var(--f-white);border:1px solid var(--border-neutral-tertiary);border-radius:var(--radius-standard);font-family:inherit;width:100%;font-size:14px;line-height:20px;color:var(--f-ink)}.input_ipwrL:focus,.input_ipwrL:active{border-color:var(--f-primary)}.input_ipwrL::placeholder{color:var(--f-subdue)}.input-x-small_mKWnS{padding:1px 8px}.input-small_wAxqL{padding:6px 8px}.input-medium_lx11u{padding:9px 8px}.input-large_r_B6w{padding:13px 8px}.input_ipwrL[aria-disabled=true]{background-color:var(--f-bg-1);color:var(--f-grey-disabled-content)}.input_ipwrL[aria-invalid=true]{border-color:var(--f-safe-red)}.container_xT9ao{position:relative}.input_ipwrL{min-width:225px;padding-left:38px!important}[data-product=flat] .input_ipwrL:focus{border-color:var(--border-brand-tertiary, #73a3f5)!important}.search_b8qXK{pointer-events:none;position:absolute;left:10px;top:50%;transform:translateY(-50%)}.search_b8qXK svg{fill:var(--color-neutral-500, #606882)}.delete_y3fG7{position:absolute;right:8px;top:50%;display:flex;height:16px;width:16px;padding:2px;border-radius:50%;opacity:0;transform:scale(0);transition:all .2s ease}.delete_y3fG7 svg{width:100%;height:100%;transform:rotate(-180deg);transition:all .2s ease}.showDeleteButton_ee1sM .delete_y3fG7{opacity:1;transform:scale(1) translateY(-50%)}.showDeleteButton_ee1sM .delete_y3fG7 svg{transform:rotate(0)}[data-product=flat] .container_xT9ao .delete_y3fG7{background:var(--surface-buttons-brand-tertiary, #a2c1f8);right:16px}[data-product=flat] .container_xT9ao .delete_y3fG7 svg{fill:var(--surface-general-brand-quaterly, #f3f7fe)}.input-small_wAxqL .delete_y3fG7{top:8px!important}.input-small_wAxqL .search_b8qXK{left:16px}.input-small_wAxqL svg path{fill:var(--f-subdue)}
`,""]),_.locals={input:"input_ipwrL","input-x-small":"input-x-small_mKWnS","input-small":"input-small_wAxqL","input-medium":"input-medium_lx11u","input-large":"input-large_r_B6w",container:"container_xT9ao",search:"search_b8qXK",delete:"delete_y3fG7",showDeleteButton:"showDeleteButton_ee1sM"};const E=_},843951:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.PlaybackOptionsList_zHXTk{display:flex;flex-direction:column}.PlaybackOptionsList_zHXTk>*:not(:last-child){border-bottom:1px solid var(--border-neutral-tertiary)}.option_IlTVN{appearance:none;background:var(--surface-general-neutral-primary);border:0;text-align:left;padding:12px 8px;cursor:pointer}
`,""]),_.locals={PlaybackOptionsList:"PlaybackOptionsList_zHXTk",option:"option_IlTVN"};const E=_},855239:(c,m,o)=>{"use strict";o.d(m,{Ib:()=>j,K3:()=>J,uh:()=>C});var i=o(6645),p=o(302225),v=o(653154),y=o(763939),_=o(941271),E=o(459356),K=Object.defineProperty,x=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,q=(w,W,X)=>W in w?K(w,W,{enumerable:!0,configurable:!0,writable:!0,value:X}):w[W]=X,A=(w,W)=>{for(var X in W||(W={}))Q.call(W,X)&&q(w,X,W[X]);if(x)for(var X of x(W))ce.call(W,X)&&q(w,X,W[X]);return w},O=(w,W,X)=>new Promise((me,ge)=>{var Le=re=>{try{Ee(X.next(re))}catch(G){ge(G)}},Ae=re=>{try{Ee(X.throw(re))}catch(G){ge(G)}},Ee=re=>re.done?me(re.value):Promise.resolve(re.value).then(Le,Ae);Ee((X=X.apply(w,W)).next())});const C="default",j="Default",e="normal",J=(0,i.nY)("scoreLayouts",{state:()=>({scoreLayouts:{},scoreLayoutLoading:!1}),getters:{hasLegacyDefaultScoreLayout(){return!!this.legacyDefaultScoreLayout},legacyDefaultScoreLayout(){return this.scoreLayoutsList.find(W=>W.key===C)||null},hasDefaultScoreLayout(){return!!this.defaultScoreLayout},defaultScoreLayout(){return this.scoreLayoutsList.find(W=>W.isDefault)||null},scoreLayoutsList(){const w=Object.values(this.scoreLayouts).map(ge=>A({},ge));if(w.some(ge=>ge.isDefault))return w;const X=w.find(ge=>ge.key===C);if(X)return X.isDefault=!0,w;const me=w.find(ge=>ge.id===e);return me&&(me.isDefault=!0),w},scoreLayoutsAvailableWithPlan(){return!!(0,y.F)().accountFeatures.customLayout}},actions:{fetchScoreLayouts(){return O(this,null,function*(){if(!(this.scoreLayoutLoading||!this.scoreLayoutsAvailableWithPlan))try{this.scoreLayoutLoading=!0,(yield p.A.fetchScoreLayouts()).forEach(W=>{this.CACHE_SCORE_LAYOUT(W)}),this.scoreLayoutLoading=!1}catch(w){this.scoreLayoutLoading=!1;const W=w.response;W?W.status!==401&&(0,v.vV)(w):(0,v.vV)(w)}})},updateScoreLayout(w){return O(this,null,function*(){try{const W=yield p.A.updateScoreLayout(w);this.CACHE_SCORE_LAYOUT(W),this.UPDATE_DEFAULT(W),(0,_.B)().addExperience("editor.save-default-score-layout")}catch(W){throw(0,v.vV)(W),(0,E.O)().displayError({error:W}),W}})},removeScoreLayout(w){return O(this,null,function*(){try{const W=w.id;yield p.A.removeScoreLayout(W),this.DELETE_SCORE_LAYOUT(W),(0,_.B)().addExperience("editor.remove-score-layout")}catch(W){throw(0,v.vV)(W),(0,E.O)().displayError({error:W}),W}})},CACHE_SCORE_LAYOUT(w){w.isDefault||(w.isDefault=!1),this.scoreLayouts[w.id]=w},UPDATE_DEFAULT(w){w.isDefault&&Object.values(this.scoreLayouts).forEach(W=>{W.isDefault=W.id===w.id})},DELETE_SCORE_LAYOUT(w){delete this.scoreLayouts[w]}}})},856714:(c,m,o)=>{var i=o(111531);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("b6865512",i,!0,{})},858453:(c,m,o)=>{var i={"./de/google-play.svg":880882,"./en-GB/google-play.svg":199486,"./en/google-play.svg":645462,"./es/google-play.svg":808475,"./fr/google-play.svg":706019,"./it/google-play.svg":317644,"./ja/google-play.svg":176568,"./ko/google-play.svg":211189};function p(y){var _=v(y);return o(_)}function v(y){if(!o.o(i,y)){var _=new Error("Cannot find module '"+y+"'");throw _.code="MODULE_NOT_FOUND",_}return i[y]}p.keys=function(){return Object.keys(i)},p.resolve=v,c.exports=p,p.id=858453},864731:(c,m,o)=>{var i=o(561484);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("1db45878",i,!0,{})},872615:(c,m,o)=>{"use strict";o.d(m,{BD:()=>v,Me:()=>p,gI:()=>y});var i=o(615898);const p=40;function v(_,E){const K=E/p,x=_.getMillimetersScaling(),Q=_.getTenthsScaling();return x/Q/K}function y(_,E){const K=[],x=_.getPageWidthAsMillimeters(),Q=_.getPageHeightAsMillimeters();K.push({name:"action.SetPageSize",opts:{width:x*E,height:Q*E}});const ce=_.getOddPageTopMarginAsMillimeters();K.push({name:"action.SetTopMargin",opts:{millimeters:ce*E,type:i.A.TYPE_BOTH}});const q=_.getOddPageBottomMarginAsMillimeters();K.push({name:"action.SetBottomMargin",opts:{millimeters:q*E,type:i.A.TYPE_BOTH}});const A=_.getOddPageLeftMarginAsMillimeters();K.push({name:"action.SetLeftMargin",opts:{millimeters:A*E,type:i.A.TYPE_BOTH}});const O=_.getOddPageRightMarginAsMillimeters();K.push({name:"action.SetRightMargin",opts:{millimeters:O*E,type:i.A.TYPE_BOTH}});const C=_.getDistanceBetweenStaves();K.push({name:"action.SetDistanceBetweenStaves",opts:{value:C*E}});const j=_.getDistanceBetweenSystems();return K.push({name:"action.SetDistanceBetweenSystems",opts:{value:j*E}}),K}},880882:(c,m,o)=>{"use strict";c.exports=o.p+"img/b828be07e56a6e9c41f4.svg"},881331:(c,m,o)=>{var i=o(587804);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("7b025af5",i,!0,{})},883935:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.layout-template[data-v-fdf778c8]{display:flex;align-items:center;height:72px;padding-left:24px;padding-right:34px;border:1.2px solid var(--f-ink-10);border-radius:8px}.layout-template h4[data-v-fdf778c8]{font-family:var(--f-font-common);font-weight:var(--f-font-semibold);font-size:14px;color:var(--f-ink);flex:1 0 auto;padding-top:24px;padding-bottom:24px}.layout-template .chip[data-v-fdf778c8]{padding-top:2px;padding-bottom:2px;font-size:14px;font-weight:var(--f-font-semibold);margin-right:24px}.layout-template .is-active[data-v-fdf778c8]{color:#fff;background-color:var(--f-edu-green)}.layout-template .is-default[data-v-fdf778c8]{color:var(--f-flat-blue-dark);background-color:var(--f-flat-blue-10)}.layout-template .ddn-content[data-v-fdf778c8]{padding:8px 0}.layout-template.is-selected[data-v-fdf778c8]{background-color:var(--f-primary-10);border-color:var(--f-flat-blue-10)}
`,""]);const E=_},890600:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.title_NAYAW{font-weight:600;font-size:16px;line-height:24px;color:var(--f-ink);padding:16px var(--f-dialog-padding) 0}.description_PK6Wc{font-size:14px;line-height:20px;color:var(--f-subdue);padding:var(--f-dialog-padding) var(--f-dialog-padding) 0}@media (max-width: 650px){.title_NAYAW,.description_PK6Wc{padding-top:0}}.title_NAYAW+.description_PK6Wc{padding-top:4px}
`,""]),_.locals={title:"title_NAYAW",description:"description_PK6Wc"};const E=_},891700:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.StepInput_FC9eA{width:70px;margin-left:var(--spacing-4)}.AlterInput_Wk0gq{width:120px;margin:0 var(--spacing-4)}
`,""]),_.locals={StepInput:"StepInput_FC9eA",AlterInput:"AlterInput_Wk0gq"};const E=_},899269:(c,m,o)=>{"use strict";o.d(m,{k2:()=>Ce});var i=o(916504),p=o(324074),v=o.n(p),y=o(6645),_=o(744056),E=o(361744),K=o(877394),x=o(550594),Q=o(761387),ce=o(328010),q=o(775),A=o(130179),O=o(653154),C=o(346579),j=o(706305),e=o(941271),J=o(823828),w=Object.defineProperty,W=Object.defineProperties,X=Object.getOwnPropertyDescriptors,me=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,Ae=(we,ee,N)=>ee in we?w(we,ee,{enumerable:!0,configurable:!0,writable:!0,value:N}):we[ee]=N,Ee=(we,ee)=>{for(var N in ee||(ee={}))ge.call(ee,N)&&Ae(we,N,ee[N]);if(me)for(var N of me(ee))Le.call(ee,N)&&Ae(we,N,ee[N]);return we},re=(we,ee)=>W(we,X(ee)),G=(we,ee,N)=>new Promise((Se,Ze)=>{var _e=Ie=>{try{le(N.next(Ie))}catch(D){Ze(D)}},$=Ie=>{try{le(N.throw(Ie))}catch(D){Ze(D)}},le=Ie=>Ie.done?Se(Ie.value):Promise.resolve(Ie.value).then(_e,$);le((N=N.apply(we,ee)).next())});const B="allScores",ae="collaborations",ue="likes",Re="othersScoresLiked",De="myScoresLiked",Te="trash",je="playlists",be="app",We=[B,ae,ue,Re,De,Te,je],Ce=(0,y.nY)("collections",()=>{const we=(0,J.k)(),ee=(0,j.j)(),N=(0,K.lq)(),Se=(0,A.I1)(),Ze=(0,C.n)(),_e=(0,_.KR)({}),$=(0,_.KR)([]),le=(0,_.KR)("modificationDate"),Ie=(0,_.KR)("desc"),D=(0,_.KR)("creationDate"),z=(0,_.KR)("desc"),ne=(0,_.KR)(!1),$e=(0,_.KR)([]),pe=(0,_.KR)([]),Ke=(0,_.KR)(!1);function et(L){pe.value.includes(L)||pe.value.push(L)}function fe(L){pe.value=pe.value.filter(T=>T!==L)}function tt(L,T){pe.value.includes(L)||pe.value.push(L)}function mt(){return G(this,null,function*(){if(!(!Se||Ke.value)){Ps();try{const L=yield Se.getAllScoresAvailableOffline();pe.value=[...L],Ke.value=!0}catch(L){(0,O.vV)(L),pe.value=[],Ke.value=!0}}})}const jt=(0,E.EW)(()=>_e.value[B]),Zt=(0,E.EW)(()=>_e.value[ae]),ms=(0,E.EW)(()=>_e.value[ue]),qe=(0,E.EW)(()=>_e.value[De]),Ne=(0,E.EW)(()=>_e.value[Re]),ct=(0,E.EW)(()=>_e.value[ae]),nt=(0,E.EW)(()=>N.name==="ScoresLibraryPlaylists"),Et=(0,E.EW)(()=>{const L=[];return $.value.forEach(T=>{const R=_e.value[T];["regular","app"].includes(R==null?void 0:R.type)&&L.push(R)}),L}),ze=(0,E.EW)(()=>Et.value.map(L=>L.id)),yt=(0,E.EW)(()=>{const L=[];return $.value.forEach(T=>{const R=_e.value[T];((R==null?void 0:R.type)==="regular"||(R==null?void 0:R.type)==="app")&&!(R!=null&&R.isPinned)&&L.push(R)}),L}),gs=(0,E.EW)(()=>{const L=[];return $.value.forEach(T=>{const R=_e.value[T];((R==null?void 0:R.type)==="collaborations"||R!=null&&R.isPinned)&&L.push(R)}),L}),kt=(0,E.EW)(()=>Object.values(_e.value).find(L=>L.type==="trash")),st=(0,E.EW)(()=>{var L;if(nt.value)return je;const T=Array.isArray(N.params.collectionId)?N.params.collectionId[0]:N.params.collectionId;return T===Te&&Ze.isOffline?((L=Object.values(_e.value).find(R=>R.type===Te))==null?void 0:L.id)||Te:T}),fs=(0,E.EW)(()=>{const L=N.params.collectionId===Te,T=kt.value&&Object.keys(kt.value).length>0;return L&&T?kt.value:_e.value[st.value]}),hs=(0,E.EW)(()=>!We.includes(st.value));function gt(L){_e.value[L]&&(_e.value[L].contents.scoresCount-=1)}function l(L){_e.value[L]&&(_e.value[L].contents.scoresCount+=1)}function zs(L){return G(this,null,function*(){return yield Q.A.getDetails(L)})}const Ct=(0,_.KR)(null);function ft(L){return G(this,null,function*(){var T;const R=yield Q.A.list({sort:D.value,direction:z.value,parent:"user",limit:L||25});(T=R.links)!=null&&T.next?Ct.value=R.links.next:Ct.value=null,$.value=[],R.data.forEach(de=>{_e.value[de.id]=de,$.value.push(de.id),Se.addOrUpdateCollection(de)})})}function Hs(){return G(this,null,function*(){var L;if(Ct.value){const T=yield Q.A.list(Ee({},Ct.value.qs));(L=T.links)!=null&&L.next?Ct.value=T.links.next:Ct.value=null,T.data.forEach(R=>{_e.value[R.id]=R,$.value=Array.from(new Set([...$.value,...T.data.map(de=>de.id)])),!Ze.isOffline&&Se.addOrUpdateCollection(R)})}})}function Vs(L){return G(this,null,function*(){const T=yield Q.A.create(L==null?void 0:L.title,L==null?void 0:L.privacy);return _e.value[T.id]=T,$.value.unshift(T.id),yield Se.addOrUpdateCollection(T),T})}function Qs(L,T){return G(this,null,function*(){yield Q.A.delete(L,T),delete _e.value[L],$.value=$.value.filter(R=>R!==L),yield Se.deleteCollectionById(L)})}function vs(L,T){return G(this,null,function*(){const R=yield Q.A.update(L,T);_e.value[L]=R,yield Se.addOrUpdateCollection(R)})}const ke=(0,_.KR)([]),St=(0,_.KR)({}),Dt=(0,_.KR)([]);function ys(L){return ke.value.find(T=>T.id===L)}function Kt(L,T){return G(this,null,function*(){var R,de,se,ie;ne.value=!0,mt();try{const he=yield Q.A.listScores({collection:L,sort:le.value,direction:Ie.value,limit:T||20});if(Ze.isOffline){const ht=(R=Object.values(_e.value).find(Pt=>Pt.type===Te))==null?void 0:R.id,Ls=L===B&&ht?he.data.filter(Pt=>{var ut;return!((ut=Pt.collections)!=null&&ut.includes(ht))}):he.data;ke.value=Ls,ne.value=!1;return}const He=ce.A.getLikes({ids:!0}),[Xe,It]=yield Promise.all([he,He]);if(Dt.value=It.map(ht=>ht.id),ke.value=Xe.data,(de=Xe.links)!=null&&de.next?St.value[L]=Xe.links.next:St.value[L]=null,Ze.isOffline){ne.value=!1;return}L===B&&($e.value=(se=Xe==null?void 0:Xe.data)==null?void 0:se.map(ht=>ht.id)),(ie=Xe==null?void 0:Xe.data)==null||ie.forEach(ht=>{Nt(ht)}),ne.value=!1}catch(he){(0,O.vV)(he),ne.value=!1}})}function Gs(L){return G(this,null,function*(){var T,R,de;if(!St.value[L])return;const se=yield Q.A.listScores(re(Ee({},St.value[L].qs),{sort:le.value,direction:Ie.value,collection:L}));if(ke.value=ke.value.concat(se==null?void 0:se.data),(T=se.links)!=null&&T.next?St.value[L]=se.links.next:St.value[L]=null,L===B){const ie=((R=se==null?void 0:se.data)==null?void 0:R.map(he=>he.id))||[];$e.value.push(...ie)}(de=se==null?void 0:se.data)==null||de.forEach(ie=>{Nt(ie)})})}function Js(L){return G(this,arguments,function*({scores:T,collectionId:R}){const de=Array.isArray(N.params.collectionId)?N.params.collectionId[0]:N.params.collectionId;T.forEach(se=>{if(se&&R){const ie=R==="root"?B:R;l(ie),ie===de&&ke.value.unshift(se),Nt(se)}})})}function Nt(L){var T,R;!hs.value&&!((T=L.collections)!=null&&T.includes(st.value))&&((R=L.collections)==null||R.push(st.value)),Se.addOrUpdateScore(L),et(L.id)}function k(L,T,R,de){return G(this,null,function*(){var se,ie;yield(0,q.kr)(L,{now:T||!1});const he=(se=Object.values(_e.value).find(Xe=>Xe.type===Te))==null?void 0:se.id,He=ke.value.find(Xe=>Xe.id===L);if((ie=He==null?void 0:He.collections)!=null&&ie.length){const Xe=(st.value===B||$e.value.includes(L))&&st.value!==Te;Xe&&gt(B),[...He.collections].forEach(It=>{!(It===B&&Xe)&&!(It===he&&T)&&gt(It)})}else gt(B),R&&gt(de);T?(gt(he),yield Se.deleteScoreById(L),fe(L)):l(he),ke.value=ke.value.filter(Xe=>Xe.id!==L)})}function bs(L,T){return G(this,null,function*(){const R=yield(0,q.rp)(L,{collection:T});return[ae,ue].includes(T)?l(B):(ke.value.unshift(R),l(T),T!==B&&l(B)),yield Se.addOrUpdateScore(R),et(R.id),R})}function xt(L,T,R){return G(this,null,function*(){var de,se;let ie=!0;const he=ke.value.find(Xe=>Xe.id===L);(de=he==null?void 0:he.collections)!=null&&de.includes(T)&&(ie=!1);const He=yield Q.A.addScore({score:L,collection:T});R&&ke.value.push(He),ie&&(l(T),(se=he==null?void 0:he.collections)==null||se.push(T),ee.addCollectionToScore(L,T),yield Se.addOrUpdateScore(he),he&&tt(L,he))})}function Es(L,T){return G(this,null,function*(){yield Q.A.addScore({score:L,collection:T}),ee.addCollectionToScore(L,T)})}function Xt(L,T){return G(this,null,function*(){const R=ke.value.find(de=>de.id===L);yield Q.A.deleteScore({score:L,collection:T}),st.value!==B&&st.value!==ae&&(ke.value=ke.value.filter(de=>de.id!==L)),gt(T),R!=null&&R.collections&&(R.collections=R.collections.filter(de=>de!==T)),ee.removeCollectionFromScore(L,T),yield Se.deleteScoreById(L),R!=null&&R.collections&&R.collections.length>0?tt(L,R):fe(L)})}function Tt(L,T){return G(this,null,function*(){var R;const de=(R=Object.values(_e.value).find(ie=>ie.type===Te))==null?void 0:R.id;yield(0,q.M)(L),gt(de),T!=null&&T.collections&&T.collections.forEach(ie=>{ie!==de&&ze.value.includes(ie)&&l(ie)}),l(B);const se=ke.value.find(ie=>ie.id===L);se&&(se.collections&&(se.collections=[],se.collections.includes(B)||se.collections.push(B)),yield Se.deleteScoreById(se.id),yield Se.addOrUpdateScore(se),tt(L,se),ke.value=ke.value.filter(ie=>ie.id!==L))})}function wt(L,T){return G(this,null,function*(){const R=ke.value.find(he=>he.id===L),de=(R==null?void 0:R.collaborators.length)===1&&R.collaborators[0].collaboratorType==="owner",se=T.map(he=>(0,q.OZ)(L,he)),ie=yield Promise.all(se);if(R){de&&l(ae),R.collaborators.push(...ie);const he=ie.map(He=>He.user).filter(He=>He!==void 0);he.length&&we.cacheUsers(he)}})}function Ys(L,T){return G(this,null,function*(){var R,de,se;yield(0,q.rn)(L,T);const ie=ke.value.find(he=>he.id===L);ie&&(ie.collaborators=ie.collaborators.filter(He=>He.id!==T),ie.collaborators.length===1&&ie.collaborators[0].collaboratorType==="owner"&&(gt(ae),ke.value=ke.value.filter(He=>He.id!==L),st.value===ae&&!((R=ie.collections)!=null&&R.includes(st.value))&&((de=ie.collections)==null||de.push(st.value)),ie.collections=(se=ie==null?void 0:ie.collections)==null?void 0:se.filter(He=>He!==ae),yield Se.addOrUpdateScore(ie),tt(L,ie)))})}function Cs(L,T){return G(this,null,function*(){yield(0,q.OZ)(L,T)})}function qt(L){return G(this,arguments,function*(T,R={}){const{sharingKey:de,collectionId:se}=R,ie=yield(0,q.OE)(T,R);return Dt.value.push(T),(se===De||se===B)&&l(De),ie})}function Zs(L){return G(this,arguments,function*(T,R={}){const{sharingKey:de,collectionId:se}=R,ie=yield(0,q.dS)(T,{sharingKey:de});return Dt.value=Dt.value.filter(he=>he!==T),(se===De||se===B||se===Re)&&gt(se===B?De:se),(se===De||se===Re)&&(ke.value=ke.value.filter(he=>he.id!==T)),ie})}const qs=L=>G(null,[L],function*({scoreId:T,payload:R}){const de=yield(0,q.T9)(T,R),se=ke.value.findIndex(ie=>ie.id===T);return se!==-1&&(ke.value[se]=de),tt(T,de),de}),eo=()=>{le.value=i.A.get("scoreLibrary.sortProperty")||le.value,Ie.value=i.A.get("scoreLibrary.sortDirection")||Ie.value},to=L=>G(null,null,function*(){let T=Ie.value;L===le.value?T=T==="asc"?"desc":"asc":L==="title"?T="asc":L==="modificationDate"&&(T="desc"),le.value=L,Ie.value=T,i.A.set("scoreLibrary.sortProperty",L),i.A.set("scoreLibrary.sortDirection",T),yield(0,e.B)().addExperience("dashboard.sort"),yield Kt(st.value)}),Ss=L=>G(null,null,function*(){let T=z.value;L===D.value?T=T==="asc"?"desc":"asc":L==="title"?T="asc":L==="creationDate"&&(T="desc"),D.value=L,z.value=T,yield ft()}),so=L=>G(null,null,function*(){_e.value[L]=yield Q.A.pin(L)}),oo=L=>G(null,null,function*(){_e.value[L]=yield Q.A.unpin(L)}),Ps=()=>G(null,null,function*(){Ze.isOffline||localStorage.getItem("flat_cleanup_done")||(yield Se.deleteStorage(),pe.value=[],localStorage.setItem("flat_cleanup_done","true"))});return{collections:_e,rootCollections:$,allScoresCollection:jt,collaborationCollection:Zt,likesCollection:ms,privateLikesCollection:qe,publicLikesCollection:Ne,trashCollection:kt,collaborationsCollection:ct,playlists:Et,playlistsIds:ze,pinnedPlaylists:gs,unpinnedPlaylists:yt,currentPlaylistId:st,currentPlaylistContent:fs,isNotAVirtualCollection:hs,sort:le,direction:Ie,nextUserAccountCollections:Ct,collectionScoresNextCursorByCollectionId:St,sortPlaylists:D,directionPlaylists:z,fetchCollection:zs,fetchUserAccountCollections:ft,fetchNextUserAccountCollections:Hs,fetchNextScoresForCollection:Gs,deletePlaylistById:Qs,updatePlaylist:vs,createPlaylist:Vs,importScore:Js,loadSortPreferences:eo,handleSortPlaylists:Ss,unpinPlaylist:oo,pinPlaylist:so,collectionScores:ke,scoresLikedByCurrentUser:Dt,scoresLoading:ne,offlineAvailableScores:pe,addToOfflineAvailableScores:et,removeFromOfflineAvailableScores:fe,updateOfflineAvailableScore:tt,initializeOfflineAvailableScores:mt,performOneTimeOnlineCleanup:Ps,fetchScoresForCollection:Kt,getCollectionScore:ys,deleteScoreById:k,duplicateScoreById:bs,addScoreToPlaylist:xt,removeScoreFromPlaylist:Xt,restoreScoreFromTrash:Tt,addCollaboratorsToScore:wt,removeCollaboratorFromScore:Ys,updateCollaboratorRights:Cs,updateScorePrivacy:qs,likeScoreById:qt,unlikeScoreById:Zs,sortScores:to,addPublicScoreToPlaylist:Es}})},900925:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.list-move,.list-enter-active,.list-leave-active{transition:all .5s ease}.list-enter-from,.list-leave-to{opacity:0}.list-leave-active{position:absolute}.ds-action_n63FJ{background:transparent;white-space:nowrap;border:0;padding:0;display:flex;align-items:center;color:var(--f-black);margin:0 0 0 16px;cursor:pointer}.ds-action_n63FJ.move_RCnpL{margin-left:0;margin-right:16px;cursor:move}.ds-action_n63FJ:not(.no-margin_VvIgC) svg{margin-right:8px}.ds-action_n63FJ .fill_x_k50{fill:var(--f-primary)}.ds-action_n63FJ.success_heqLk{color:var(--f-happy-green)}.ds-action_n63FJ.success_heqLk .fill_x_k50{fill:var(--f-happy-green)}@media (max-width: 600px){.ds-action_n63FJ{margin-left:0;flex:0 0 34px}.ds-action_n63FJ span{display:none}.ds-action_n63FJ.move_RCnpL{margin-right:0}}.ds-action_n63FJ.disabled_aasKQ{pointer-events:none;opacity:.6}.ds-instrument-main-actions_VB_Pj{display:flex;align-items:center;flex:0 0 auto}.ds-instrument-main-actions_VB_Pj.deleting_bo1ir{color:var(--f-safe-red)}.ds-instrument-main-actions_VB_Pj.deleting_bo1ir svg{margin-right:8px}.ds-instrument-main-actions_VB_Pj.deleting_bo1ir .fill_x_k50{fill:var(--f-safe-red)}.ds-instrument-main-actions_VB_Pj.deleting_bo1ir .ds-action_n63FJ{color:var(--f-safe-red)}.ds-instrument-main-actions_VB_Pj.deleting_bo1ir .ds-action_n63FJ.yes_Ykuwp{margin-right:16px}.deleteSpinner_GJfv3{margin-left:7px!important}.listInstrus_vtHOj{position:relative;list-style:none;padding:0;margin-top:-16px!important}.listInstrus_vtHOj>li{color:var(--f-ink);background:var(--f-bg-0);box-shadow:0 -1px #e7e8ec;display:flex;align-items:center;justify-content:flex-start}.listInstrus_vtHOj>li:first-child{box-shadow:none}.listInstrus_vtHOj>li .partWrapper_f08qS{display:flex;align-items:center;justify-content:flex-start;flex:1;height:50px;line-height:16px;width:100%}.listInstrus_vtHOj>li .partWrapper_f08qS.deleting_bo1ir{pointer-events:none;opacity:.6}.listInstrus_vtHOj>li .partWrapper_f08qS.deleting_bo1ir .move_RCnpL{opacity:0}.listInstrus_vtHOj .partName_OR19C{flex:1 1 auto;overflow:hidden}.listInstrus_vtHOj .preloader_aupXP{width:100%;height:100%}.ds-action_n63FJ.move_RCnpL{color:var(--f-subdue)}.ds-action_n63FJ.move_RCnpL:hover{color:var(--f-primary)}.sortableOldElem_gd9Rz{opacity:.1;box-shadow:0 -1px #000}.sortableGhost_OEFbv{position:absolute;box-shadow:none;transform:translateY(-1px)!important;height:1px!important;width:100%;background:var(--f-primary)}.sortableGhost_OEFbv *{display:none}.sortablePlaceholder_hs1w2{opacity:.95;border-radius:4px;background:var(--f-primary-10);box-shadow:none;border:1px solid var(--f-white)}.sortablePlaceholder_hs1w2 :deep(.ds-action_n63FJ.move_RCnpL){color:var(--f-primary)}@media (max-width: 600px){.listInstrus_vtHOj .ds-action_n63FJ{width:36px}}
`,""]),_.locals={"ds-action":"ds-action_n63FJ",move:"move_RCnpL","no-margin":"no-margin_VvIgC",fill:"fill_x_k50",success:"success_heqLk",disabled:"disabled_aasKQ","ds-instrument-main-actions":"ds-instrument-main-actions_VB_Pj",deleting:"deleting_bo1ir",yes:"yes_Ykuwp",deleteSpinner:"deleteSpinner_GJfv3",listInstrus:"listInstrus_vtHOj",partWrapper:"partWrapper_f08qS",partName:"partName_OR19C",preloader:"preloader_aupXP",sortableOldElem:"sortableOldElem_gd9Rz",sortableGhost:"sortableGhost_OEFbv",sortablePlaceholder:"sortablePlaceholder_hs1w2"};const E=_},902413:(c,m,o)=>{var i=o(409678);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("502eb78c",i,!0,{})},905742:(c,m,o)=>{var i=o(43731);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("20bea465",i,!0,{})},906731:(c,m,o)=>{"use strict";o.d(m,{A:()=>v});var i=o(540888),p=o(961765);const v={computed:{mainAttachmentSharingMode(){return p.pj[this.assignment.type]},contentAttachments(){return(this.assignment.attachments||[]).filter(y=>y.type!=="flat"&&y.type!=="worksheet"||y.sharingMode!==this.mainAttachmentSharingMode)},hasDescription(){return this.assignment.description&&this.assignment.description.length>0},mainAttachments(){return(this.assignment.attachments||[]).filter(y=>y.type==="flat"&&y.sharingMode===this.mainAttachmentSharingMode)},lmsName(){return this.isGoogleClassroomAssignment?"Google Classroom":this.isMicrosoftTeamsAssignment?"Microsoft Teams":null},isGoogleClassroom(){var y;return!!((y=this.classroom.googleClassroom)!=null&&y.id)},isGoogleClassroomAssignment(){var y,_;return!!((_=(y=this.assignment)==null?void 0:y.googleClassroom)!=null&&_.id)},isMicrosoftTeams(){var y;return!!((y=this.classroom.microsoftGraph)!=null&&y.id)},isMicrosoftTeamsAssignment(){var y,_;return!!((_=(y=this.assignment)==null?void 0:y.microsoftGraph)!=null&&_.id)},isNewScoreAssignment(){return this.assignment.type==="newScore"},isTemplateAssignment(){return this.assignment.type==="scoreTemplate"},isSharedWritingAssignment(){return this.assignment.type==="sharedWriting"},isCompositionAssignment(){return this.isNewScoreAssignment||this.isTemplateAssignment||this.isSharedWritingAssignment},isPerformanceAssignment(){return this.assignment.type==="performance"},isWorksheetAssignment(){return this.assignment.type==="worksheet"},isDraftAssignment(){return this.assignment&&this.assignment.state==="draft"},isDraft(){return this.assignment.state==="draft"||!this.assignment.id},isOverdue(){return this.assignment.dueDate&&this.assignment.dueDate<new Date||this.assignment&&this.assignment.state==="archived"},assignmentArchived(){return this.assignment&&this.assignment.state==="archived"},isScheduledAssignment(){return this.assignment.scheduledDate&&this.assignment.scheduledDate>new Date},postDateFormatted(){const y=this.assignment.scheduledDate||this.assignment.creationDate;return y?(0,i.Nf)(y):null},dueDateFormatted(){const y=this.assignment.dueDate;return y?(0,i.Nf)(y):null},hasErrorPostDateAfterDue(){return!!this.assignment&&!!this.assignment.scheduledDate&&!!this.assignment.dueDate&&this.assignment.scheduledDate.getTime()>this.assignment.dueDate.getTime()},hasErrorPostDateInPast(){return!!this.assignment&&!!this.assignment.scheduledDate&&new Date(this.assignment.scheduledDate).getTime()<new Date().getTime()}}}},909696:(c,m,o)=>{"use strict";o.d(m,{FG:()=>re,bM:()=>Ee,q6:()=>G});var i=o(941271),p=o(303953),v=o(916504),y=o(340052),_=o(645369),E=o.n(_),K=o(6645),x=o(744056),Q=o(361744),ce=o(817795),q=o(426859),A=Object.defineProperty,O=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,e=(B,ae,ue)=>ae in B?A(B,ae,{enumerable:!0,configurable:!0,writable:!0,value:ue}):B[ae]=ue,J=(B,ae)=>{for(var ue in ae||(ae={}))C.call(ae,ue)&&e(B,ue,ae[ue]);if(O)for(var ue of O(ae))j.call(ae,ue)&&e(B,ue,ae[ue]);return B};const w=E()("flat:scoreViewer"),W=3,X=.2,me=60,ge=700,Le=4;let Ae=v.A.get("editor.piano-keyboard");typeof Ae=="undefined"&&(Ae=!0);const Ee=["instruments","layout","credits","tracks","export"],re=["home","kb"],G=(0,K.nY)("scoreViewer",()=>{const B=(0,x.KR)("page"),ae=(0,x.KR)("page"),ue=(0,x.KR)("default"),Re=(0,x.KR)(!1),De=(0,x.KR)(null),Te=(0,x.KR)(null),je=(0,x.KR)({}),be=(0,x.KR)(Number(v.A.get("score-view.zoom"))||1),We=(0,x.KR)(!0),Ce=(0,x.KR)(0),we=(0,x.KR)(0),ee=(0,x.KR)(0),N=(0,x.KR)(0),Se=(0,x.KR)(0),Ze=(0,x.KR)("auto"),_e=(0,x.KR)("large"),$=(0,x.KR)([]),le=(0,x.KR)({}),Ie=(0,x.KR)(!1),D=(0,x.KR)(null),z=(0,x.KR)(null),ne=(0,x.KR)(Ae),$e=(0,x.KR)(!1),pe=(0,x.KR)(!1),Ke=(0,x.KR)(!1),et=(0,x.KR)(!1),fe=(0,x.KR)(!1),tt=(0,x.KR)(!1),mt=(0,x.KR)(!1),jt=(0,x.KR)(!1),Zt=(0,x.KR)(null),ms=(0,x.KR)(null),qe=(0,x.KR)(null),Ne=(0,x.KR)(null),ct=(0,x.KR)(!1),nt=(0,x.KR)(!1),Et=(0,x.KR)("default"),ze=(0,x.KR)(!1),yt=(0,x.KR)(!1),gs=(0,x.KR)(null),kt=(0,x.KR)({}),st=(0,x.KR)(null),fs=(0,Q.EW)(()=>Object.values(le.value).filter(ve=>!!ve).length===$.value.length),hs=(0,Q.EW)(()=>fs.value?$.value.length:Object.values(le.value).filter(M=>!!M).length),gt=(0,Q.EW)(()=>$.value.filter(M=>!!M.header.unpitchedMapping).map(M=>(0,q.A)(M))),l=(0,Q.EW)(()=>$.value.some(M=>M.isTransposing));function zs(M){const ve=M.filter(Me=>!$.value.filter(at=>at.uuid===Me.uuid).length);$.value=M,Object.keys(le.value).forEach(Me=>{$.value.find(at=>at.uuid===Me)||delete le.value[Me]}),Object.keys(le.value).length===0?(le.value=J({},le.value),$.value.forEach(Me=>{le.value[Me.uuid]=!0})):ve.length&&(le.value=J({},le.value),ve.forEach(Me=>{le.value[Me.uuid]=!0}))}function Ct(){le.value={},$.value.forEach(M=>{le.value[M.uuid]=!0})}function ft(M){if(le.value[M]){if(Object.values(le.value).filter(ve=>!!ve).length===1)return;delete le.value[M]}else le.value[M]=!le.value[M]}function Hs(M){le.value={[M]:!0}}function Vs(M){const ve={};M.forEach(Me=>{ve[Me]=!0}),le.value=ve}function Qs(M){Ze.value=M}function vs(M){_e.value=M}function ke(M){const ve=M==null?void 0:M.uuid;if(!ve)return;const Me=$.value.find(at=>at.uuid===ve);!Me||!(0,ce.c2)(Me)||(Me.shortcuts=[])}function St(M){const ve=M==null?void 0:M.uuid,Me=M==null?void 0:M.shortcuts;if(!ve||!Me)return;const at=$.value.find(rt=>rt.uuid===ve);!at||!(0,ce.c2)(at)||(Array.isArray(at.shortcuts)||(at.shortcuts=[]),at.shortcuts.push(Me))}const Dt=(0,Q.EW)(()=>be.value>=W),ys=(0,Q.EW)(()=>be.value<=X),Kt=(0,Q.EW)(()=>p.A.product==="msnippet"),Gs=M=>{yt.value=M},Js=(0,Q.EW)(()=>{var M;return window.flatappname==="iosEditor"?!0:(M=window.flatappname)!=null&&M.includes("vue-scoreembed")?new URLSearchParams(window.location.search).get("editorInterface")==="mobile":yt.value||Kt.value?!1:!!(p.A.ua&&["mobile","tablet"].includes(p.A.ua.deviceType)||window.localStorage&&window.localStorage.editorUi==="mobile"||navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)}),Nt=(0,Q.EW)(()=>$.value.filter(M=>le.value[M.uuid])),k=(0,Q.EW)(()=>{const[M]=Nt.value;return M.uuid});function bs(M={}){const ve=M.allowedModes||["track","page"];w("initLayout (modes = %o)",ve);const Me=rt=>typeof rt=="string"&&ve.includes(rt);if(typeof URLSearchParams!="undefined"){const rt=new URLSearchParams(window.location.search).get("layout");if(rt&&Me(rt)){w("using qs layout %s",rt),xt({layout:rt,isInitial:!0}),ue.value="qs";return}}if(!M.noLocalStoragePrefs){const rt=v.A.get("score-view.layout");if(rt&&Me(rt)){w("using pref layout %s",rt),xt({layout:rt,isInitial:!0}),ue.value="pref";return}}if((0,y.A)()<ge){xt({layout:"track",savePref:!1,isInitial:!0}),qt(.75),ue.value="mobile";return}if(ve.includes("responsive")&&typeof M.nbParts=="number"&&M.nbParts>=Le){xt({layout:"track",savePref:!1,isInitial:!0}),qt(1),ue.value="nbParts";return}ue.value="default",xt({layout:M.defaultMode||B.value,savePref:!1,isInitial:!0})}function xt({layout:M,ui:ve,savePref:Me,isInitial:at}){["track","page","responsive"].includes(M)||(M="page"),Me===void 0&&(Me=!0),at&&Es(M),ae.value=M,Tt(),M==="page"&&(wt(!0),Cs()),Me&&v.A.set("score-view.layout",M),ve&&(0,i.B)().addExperience("editor.switch-layout")}function Es(M){B.value=M}function Xt(M){ae.value=M}function Tt(){be.value=1,w("zoom: %s",be.value),v.A.set("score-view.zoom",be.value)}function wt(M){We.value=M,M&&Tt()}function Ys(M){typeof M=="number"&&!Number.isNaN(M)&&(ee.value=M)}function Cs(){if(!We.value||!ee.value||B.value!=="page"){w("skip zoom auto");return}const ve=(0,y.A)()-me-Ce.value;let Me=Math.round(ve/ee.value*100)/100;Me>1.25?Me=1.25:Me<X&&(Me=X),w("zoom: %s",Me),be.value=Me}function qt(M){if(typeof M=="string"&&(M=Number.parseFloat(M)),!Number.isNaN(M)&&M>=X&&M<=W){const ve=Math.round(M*100)/100;be.value=ve,We.value=!1,w("zoom: %s",be.value),v.A.set("score-view.zoom",be.value)}return be.value}function Zs(M=.1){if(be.value<W){const ve=Math.min(W,Math.round((be.value+M)*100)/100);be.value=ve,We.value=!1,w("zoom: %s",be.value),v.A.set("score-view.zoom",be.value)}}function qs(M=.1){if(be.value>X){const ve=Math.max(X,Math.round((be.value-M)*100)/100);be.value=ve,We.value=!1,w("zoom: %s",be.value),v.A.set("score-view.zoom",be.value)}}function eo(M=0){Ce.value=M}function to(M){Ne.value=M}function Ss(M){N.value=M.top,Se.value=M.left}function so(M){Re.value!==M&&(Re.value=M)}function oo(){ne.value=!ne.value,v.A.set("editor.piano-keyboard",ne.value)}function Ps(M){$e.value=M}function L(M){we.value=M}function T(){Te.value=Date.now()}function R(){De.value=Date.now()}function de(){mt.value=!0}function se(){mt.value=!1}function ie(){tt.value=!0}function he(){tt.value=!1}function He(){fe.value=!0}function Xe(){fe.value=!1}function It(M){jt.value=!0,Zt.value=M}function ht(){jt.value=!1,Zt.value=null}function Ls(M){z.value=M}function Pt(M){D.value=M,(z.value===null||z.value==="last")&&(z.value=D.value)}function ut(M){pe.value=!!M}function Co(M){Ke.value=!!M}function Ko(M){et.value=!!M}function $t(M){ms.value=M}function Pe(M){qe.value=M}function No(M){ct.value=M}function Xo(M){nt.value=M}function $o(M){Et.value=M}function zo(M){ze.value=M}function Ho(M){je.value=M}function Vo(M=null,ve){gs.value=M,kt.value=ve||{}}function Qo(M){st.value=M}function Go(M){Ie.value=M}function Jo(){const M=window.location.pathname.split("/");M.pop();const ve=M.pop();Ie.value=ve!=="blank"}return{layout:B,askedLayout:ae,layoutDecision:ue,initLayout:bs,changeLayout:xt,setLayout:Es,setAskedLayout:Xt,rendered:Re,lastDrawTs:De,lastCursorDrawTs:Te,drawOptions:je,setDrawOptions:Ho,drawDone:R,zoom:be,zoomAuto:We,zoomAutoWidthSubtract:Ce,isZoomMax:Dt,isZoomMin:ys,zoomReset:Tt,setZoomAuto:wt,applyZoomAuto:Cs,setZoomValue:qt,zoomIn:Zs,zoomOut:qs,setZoomAutoWidthSubtract:eo,setScroll:Ss,pinchPositionPercentage:Ne,setPinchPositionPercentage:to,spaceSize:we,setSpaceSize:L,pageWidthNoScaling:ee,scrollTop:N,scrollLeft:Se,partsPanelDisplayMode:Ze,setPartsPanelDisplayMode:Qs,partsPanelFormat:_e,setPartsPanelFormat:vs,parts:$,setParts:zs,displayAllParts:Ct,switchPartDisplay:ft,displaySinglePart:Hs,displayParts:Vs,displayedParts:le,allPartsDisplayed:fs,countPartsDisplayed:hs,unpitchedParts:gt,listPartsDisplayed:Nt,anyDisplayPartUuid:k,resetShortcutsForPartByUuid:ke,addShortcutsForPartByUuid:St,initialDisplayedRevision:z,setInitialDisplayedRevision:Ls,displayedRevision:D,setDisplayedRevision:Pt,isCloudScore:Ie,setIsCloudScore:Go,setIsCloudScoreFromEditor:Jo,isMusicSnippet:Kt,displayMobileEditor:Js,inlineCommentPopoverDisplayed:fe,openInlineCommentPopover:He,closeInlineCommentPopover:Xe,customTimeUiDisplayed:pe,setCustomTimeUiDisplayed:ut,customRehearsalUiDisplayed:Ke,setCustomRehearsalUiDisplayed:Co,customBeamingUiDisplayed:et,setCustomBeamingUiDisplayed:Ko,nbMeasures:ms,setNbMeasures:$t,nbSystems:qe,setNbSystems:Pe,isLastMeasureDrawn:ct,setIsLastMeasureDrawn:No,lowCpuSlider:nt,setLowCpuSlider:Xo,pianoKeyboardLang:Et,setPianoKeyboardLang:$o,hideNonTab:ze,setHideNonTab:zo,hasTransposingInstrument:l,displayChromelessUi:yt,setChromelessUi:Gs,setPageWidthNoScaling:Ys,setRenderedState:so,touchUiDisplayed:ne,switchTouchUI:oo,showInstrumentVisualisation:$e,toggleInstrumentVisualisation:Ps,cursorDrawDone:T,actionMenuPasteDisplayed:mt,openActionMenuPaste:de,closeActionMenuPaste:se,actionMenuRangeDisplayed:tt,openActionMenuRange:ie,closeActionMenuRange:he,unpitchedTooltipDisplayed:jt,unpitchedTooltipOptions:Zt,openUnpitchedTooltip:It,closeUnpitchedTooltip:ht,documentSettingsUi:gs,documentSettingsParams:kt,loadDocumentSettings:Vo,helpUi:st,setHelpUi:Qo}})},912466:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.dsCredits__cEkd{display:flex;flex-direction:column;height:100%}.dsCredits__cEkd .creditsContent_UunrO{flex:1 1 auto;justify-content:center}
`,""]),_.locals={dsCredits:"dsCredits__cEkd",creditsContent:"creditsContent_UunrO"};const E=_},916880:(c,m,o)=>{var i=o(515571);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("d76587cc",i,!0,{})},918115:(c,m,o)=>{var i=o(573636);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("0db102f8",i,!0,{})},919760:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.input-label_p19kf{font-weight:600;font-size:12px;line-height:16px;color:var(--InputLabel-color, var(--f-subdue));margin-bottom:4px;display:flex;justify-content:space-between}.input-label_p19kf>:not([hidden])~:not([hidden]){margin-left:.5rem}.input-label_p19kf .required_jHcbU{font-style:italic;font-weight:300}
`,""]),_.locals={"input-label":"input-label_p19kf",required:"required_jHcbU"};const E=_},919793:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.root_zSsLB{color:var(--f-subdue)}.root_zSsLB.active_FTarp{color:var(--f-primary)}ul>li.root_zSsLB>button{background-color:inherit;border:none;display:flex;align-items:center;font-weight:400;margin:0;padding:0}.itemName_MwoXx{margin-left:6px}
`,""]),_.locals={root:"root_zSsLB",active:"active_FTarp",itemName:"itemName_MwoXx"};const E=_},925840:(c,m,o)=>{var i=o(208307);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("49d85115",i,!0,{})},926451:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.content_KRKZG{padding:var(--f-dialog-padding)}
`,""]),_.locals={content:"content_KRKZG"};const E=_},928210:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`a[data-v-732e6278]{display:flex}
`,""]);const E=_},931537:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.title_GThZM{font:600 12px/20px var(--f-font-common);color:#9ca7b7;text-transform:uppercase}.listInstrus_IE0ek{position:relative;list-style:none;padding:0}.listInstrus_IE0ek>li{color:var(--f-ink);box-shadow:0 -1px #e7e8ec;height:50px;line-height:16px;display:flex;align-items:center;justify-content:flex-start}.listInstrus_IE0ek>li:first-child{box-shadow:none}.listInstrus_IE0ek>li>img{margin-right:12px}.listInstrus_IE0ek .icon_T6mz0{width:24px;height:24px;border-radius:50%}.listInstrus_IE0ek .title_GThZM{margin-left:10px;height:16px;width:50%;max-width:200px;border-radius:2px}.pname_qlKR2{flex:1 1 auto;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;align-items:center}.emtpyState_K7ZOK{display:flex;flex-direction:column;align-items:center;margin-top:8px}.emtpyState_K7ZOK .image_wol0b{width:120px;height:120px}.emtpyState_K7ZOK h4{margin-top:24px;font-weight:var(--f-font-semibold);font-family:var(--f-font-common);font-size:18px;color:var(--f-ink);margin-bottom:0}.emtpyState_K7ZOK a,.emtpyState_K7ZOK p{margin-top:8px;font-weight:var(--f-font-normal);font-family:var(--f-font-common);font-size:16px;color:var(--f-subdue)}.buttonGroup_zelRY{display:flex;align-items:center;width:100%;justify-content:flex-end;margin-top:46px}.buttonGroup_zelRY button.createButton_eduA6{margin-right:16px}
`,""]),_.locals={title:"title_GThZM",listInstrus:"listInstrus_IE0ek",icon:"icon_T6mz0",pname:"pname_qlKR2",emtpyState:"emtpyState_K7ZOK",image:"image_wol0b",buttonGroup:"buttonGroup_zelRY",createButton:"createButton_eduA6"};const E=_},938260:(c,m,o)=>{var i=o(660583);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("7eb5900c",i,!0,{})},938275:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.score-preview2 .preview-content svg{width:100%;height:auto;background:var(--f-bg-0);box-shadow:0 0 12px #0000000f,0 0 38px #00000017}
`,""]);const E=_},944820:(c,m,o)=>{"use strict";c.exports=o.p+"img/e2266593a5d762b83876.svg"},944917:(c,m,o)=>{var i={"./hideEmptyParts-after-first-system.svg":944820,"./hideEmptyParts-all-systems.svg":61329,"./hideEmptyParts-never.svg":300387};function p(y){var _=v(y);return o(_)}function v(y){if(!o.o(i,y)){var _=new Error("Cannot find module '"+y+"'");throw _.code="MODULE_NOT_FOUND",_}return i[y]}p.keys=function(){return Object.keys(i)},p.resolve=v,c.exports=p,p.id=944917},951094:(c,m,o)=>{var i=o(606723);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("29e7707b",i,!0,{})},951966:(c,m,o)=>{"use strict";c.exports=o.p+"img/96204ad255c0518aea75.svg"},953997:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.mobPartsList_cHCqy{--MobPartsList-height: 36px;display:flex;flex:1;position:relative}.selectTrigger_JsPi4{display:flex;flex:1;height:var(--MobPartsList-height);padding:0 18px;gap:8px;border-radius:18px;align-items:center;background:var(--f-ink-10);appearance:none;border:0;cursor:pointer}.selectTrigger_JsPi4 .title_xv3hV{padding-left:16px}.partsList_PYN3N{position:absolute;width:100%;margin-top:0;padding:0 18px;background:var(--f-ink-10);border-radius:18px;transform:none!important;z-index:1000}.partsItem_IRUha{display:flex;height:var(--MobPartsList-height);align-items:center;cursor:pointer}.partsItem_IRUha.active_vTKvw .title_xv3hV{color:var(--f-primary)}.partsItem_IRUha.active_vTKvw .icon_yT7ai{fill:var(--f-primary)}.title_xv3hV{display:flex;flex:1;justify-content:center;font-size:14px;font-weight:600}.triggerIcon_AOpER{display:flex;margin:0 -8px 0 -24px;padding:8px;appearance:none;border:0;background:none;cursor:pointer}.arrowRotate_pFLzs{transform:rotate(180deg)}
`,""]),_.locals={mobPartsList:"mobPartsList_cHCqy",selectTrigger:"selectTrigger_JsPi4",title:"title_xv3hV",partsList:"partsList_PYN3N",partsItem:"partsItem_IRUha",active:"active_vTKvw",icon:"icon_yT7ai",triggerIcon:"triggerIcon_AOpER",arrowRotate:"arrowRotate_pFLzs"};const E=_},954749:(c,m,o)=>{"use strict";o.d(m,{A:()=>E});var i=o(899953),p=o(464273),v=o(938793);const y={};y.$style=p.default;const E=(0,v.A)(i.A,[["__cssModules",y]])},961765:(c,m,o)=>{"use strict";o.d(m,{pj:()=>v});const i=null,p=null,v={none:null,newScore:null,worksheet:null,scoreTemplate:"copy",sharedWriting:"write",performance:"performance"}},965138:c=>{"use strict";c.exports="data:image/svg+xml;utf8,%3Csvg%20width%3D%228%22%20height%3D%226%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M0%202.221V0h2.132c2.73.57%205.169%201.974%205.85%205.144a.79.79%200%200%201%20.018.19c0%20.152-.051.228-.136.266-.154%200-.342-.133-.427-.266-.17-.209-2.32-2.714-5.578-2.98H.136C.034%202.354%200%202.334%200%202.22z%22%20fill%3D%22%23363C50%22%20fill-rule%3D%22nonzero%22%2F%3E%3C%2Fsvg%3E"},966727:(c,m,o)=>{"use strict";o.d(m,{BD:()=>_,Hc:()=>E,hB:()=>v,zU:()=>y});var i=o(176244),p=o(309534);const v=(K,x)=>({"soprano-baroque":p.A.RECORDER_SOPRANO_BAROQUE,"soprano-german":p.A.RECORDER_SOPRANO_GERMAN,"alto-baroque":p.A.RECORDER_ALTO_BAROQUE,"alto-german":p.A.RECORDER_ALTO_GERMAN})[`${K}-${x}`],y=K=>({[p.A.RECORDER_SOPRANO_BAROQUE]:{instrument:"soprano",layout:"baroque"},[p.A.RECORDER_SOPRANO_GERMAN]:{instrument:"soprano",layout:"german"},[p.A.RECORDER_ALTO_BAROQUE]:{instrument:"alto",layout:"baroque"},[p.A.RECORDER_ALTO_GERMAN]:{instrument:"alto",layout:"german"}})[K],_=K=>K===i.A.JAPANESE,E=K=>K?i.A.JAPANESE:i.A.DEFAULT},971310:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.action-menu-ddn[data-v-470b5640]{font-family:Inter,Helvetica Neue,Helvetica,Arial,sans-serif;min-width:300px;max-width:500px;font-size:16px;z-index:100}.action-menu-ddn [x-arrow][data-v-470b5640]{content:"";display:block;width:0;height:0;border-style:solid;position:absolute;margin:0 5px;border-width:5px 5px 0 5px;border-top-color:#2e2e2ee0;border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent;bottom:0;left:calc(50% - 5px)}.action-menu-ddn[x-placement=bottom] [x-arrow][data-v-470b5640],.action-menu-ddn[x-placement=bottom-end] [x-arrow][data-v-470b5640],.action-menu-ddn[x-placement=bottom-start] [x-arrow][data-v-470b5640]{top:0;border-width:0 5px 5px 5px;border-top-color:transparent;border-bottom-color:#2e2e2ee0}.action-menu-ddn ul[data-v-470b5640]{list-style:none;padding:0;display:flex;justify-content:space-around;text-align:center;margin:5px 0;background:#2e2e2ee0;color:#fff;border-radius:8px}.action-menu-ddn ul li[data-v-470b5640]{flex:1 1;height:37px;line-height:37px;cursor:pointer;padding:0 10px;white-space:nowrap}.action-menu-ddn ul li[data-v-470b5640]:active{background:#616161e0}.action-menu-ddn ul li+li[data-v-470b5640]{border-left:1px solid white}
`,""]);const E=_},972661:(c,m,o)=>{var i=o(971310);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("43db7841",i,!0,{})},982286:(c,m,o)=>{var i=o(582657);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("0a31609f",i,!0,{})},991713:(c,m,o)=>{var i=o(401582);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[c.id,i,""]]),i.locals&&(c.exports=i.locals);var p=o(929234).A,v=p("b1aae796",i,!0,{})},994551:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.root_Ul8fr{max-height:100%;display:flex;flex-direction:column}.card_N45T_,.scrollable_g82v5{display:flex;flex-direction:column;flex:0 1 auto;overflow-y:auto}.ctas_J3rh7{flex:0 0 auto}@media (min-width: 1280px){.customChoice_RcvJ5.displayPreview_veawH{width:715px!important;max-width:715px!important}.customChoice_RcvJ5.displayPreview_veawH img{max-width:310px}}@media (min-width: 810px){.customChoice_RcvJ5:not(.displayPreview_veawH){width:715px!important;max-width:715px!important}.customChoice_RcvJ5:not(.displayPreview_veawH) img{max-width:310px}}
`,""]),_.locals={root:"root_Ul8fr",card:"card_N45T_",scrollable:"scrollable_g82v5",ctas:"ctas_J3rh7",customChoice:"customChoice_RcvJ5",displayPreview:"displayPreview_veawH"};const E=_},995874:(c,m,o)=>{"use strict";o.d(m,{A:()=>K});var i=o(657924),p=o(841093),v=o(694109),y=o(938793);const _={};_.$style=v.default;const K=(0,y.A)(p.A,[["render",i.X],["__cssModules",_]])},998780:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.scorePlaceholder_G48iQ{background:var(--f-bg-0);width:100%;aspect-ratio:1/1.41;padding:3vw;box-shadow:0 0 12px #0000000f,0 0 38px #00000017}.scorePlaceholder_G48iQ .s_aH0vQ{margin-bottom:3vw}.scorePlaceholder_G48iQ .s_aH0vQ>div{height:2px;margin:.3vw .08vw;border-radius:3px;background:#e7e8ec;position:relative}
`,""]),_.locals={scorePlaceholder:"scorePlaceholder_G48iQ",s:"s_aH0vQ"};const E=_},999849:(c,m,o)=>{"use strict";o.r(m),o.d(m,{default:()=>E});var i=o(814779),p=o.n(i),v=o(927860),y=o.n(v),_=y()(p());_.push([c.id,`.row-container_ZoR6T{display:flex;flex-direction:row;align-items:center;flex:0 0 240px}.filters_SMsKt{display:flex;align-items:center;gap:var(--spacing-2)}
`,""]),_.locals={"row-container":"row-container_ZoR6T",filters:"filters_SMsKt"};const E=_}},c=>{var m=i=>c(c.s=i);c.O(0,[28376,48707,21081,82201,63957,22337,38111,61410,74407,63516,77776,87136,7379,93815,90074,48098,19856,87869,55021,47644,20881,51277,79244,95365,6645,15525,65980,6391,64161,76400,56290,37798,37718,51815,72486,13636,56712,78877,13489,74180,87895,38050,38167,7945,75421,61104,43955,51160,34361,72153,95629,12718,3831,11182,41750,51639,47226,29856,34612,5089,44177,32195,3554,31330,11539,5263,31899,67751,24651,23785,16333,67772,47932,27655,78785,35199,5530,18154,78038],()=>m(121259));var o=c.O()}]);})();


//# debugId=4e7d2239-38ef-5c90-b572-a689dca1368e

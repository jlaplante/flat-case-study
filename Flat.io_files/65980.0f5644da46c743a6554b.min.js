"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8f761868-ed2e-58c0-8777-eab18353270e")}catch(e){}}();
(()=>{/*! Copyright (c) 2025 Tutteo Ltd. */(self.webpackChunk_flat_flat=self.webpackChunk_flat_flat||[]).push([[65980],{104907:(j,C,o)=>{o.r(C),o.d(C,{default:()=>b});var B=o(364842),y=o(970445),M=o(376551),R=o(195647),g=o(708809),v=o(476943),c=o(726042),E=o(627300),L=o(721247),A=o(737903),O=o(128001),K=o(794741),d=o(575502);const U=14,l="$adagio-kodaly",S="$adagio-recorderTabs",F="$adagio-brassFingerings",p="$adagio-noTab",h="$adagio-tabFrameEnabled",e={};e.DEFAULT_NB_STAFF_LINES=5,e.hasStaffLines=function(n){return e.hasNbStaffLines(n)},e.hasNbStaffLines=function(n){return typeof n["staff-lines"]!="undefined"},e.hasStaffTuning=function(n){return typeof n["staff-tuning"]!="undefined"},e.getStaffLines=function(n){return e.getNbStaffLines(n)},e.getNbStaffLines=function(n){return e.hasStaffLines(n)?parseInt(n["staff-lines"],10):e.DEFAULT_NB_STAFF_LINES},e.getShiftedTuningByString=function(n,f){return e.createShiftedTunings(n),typeof n.$adagio.shiftedTunings[f]=="undefined"&&e.initShiftedTuningByString(n,f),n.$adagio.shiftedTunings[f]},e.createShiftedTunings=function(n){e.create$adagioIfNeeded(n),typeof n.$adagio.shiftedTunings=="undefined"&&(n.$adagio.shiftedTunings={})},e.initShiftedTuningByString=function(n,f){let i=e.getStaffTuningByString(n,f);const s=e.getCapo(n);s>0&&(i=E.default.applyCapo(i,s)),n.$adagio.shiftedTunings[f]=i},e.create$adagioIfNeeded=function(n){e.has$adagio(n)||e.create$adagio(n)},e.has$adagio=function(n){return typeof n.$adagio!="undefined"},e.create$adagio=function(n){n.$adagio={}},e.getStaffTuningByString=function(n,f){if(!e.hasStaffTuning(n))throw new B.default("Unexpected","No tuning in staff details");const i=e.getStaffTuningsLength(n);if(f<1||f>i)throw new B.default("Unexpected",`The string number [${f}] is invalid`);const s=i-f;return e.getStaffTunings(n)[s]},e.getStaffTuning=function(n,f){return e.getStaffTunings(n)[f]},e.getStaffTuningsLength=function(n){return e.hasStaffTuning(n)?e.getStaffTunings(n).length:0},e.getStaffTunings=function(n){const f=n["staff-tuning"];return typeof f!="undefined"?v.default.makeArray(f).slice():f},e.setNbStaffLines=function(n,f){n["staff-lines"]=f},e.setStaffTunings=function(n,f){n["staff-tuning"]=f},e.clearTuning=function(n){delete n["staff-tuning"],delete n.capo,delete n["staff-lines"]},e.setCapo=function(n,f){g.A.isDefault(f)?delete n.capo:n.capo=f.toString()},e.isSame=function(n,f){const i=e.getNbStaffLines(n),s=e.getNbStaffLines(f);if(i!==s)return!1;const T=e.getCapo(n),_=e.getCapo(f);return T!==_?!1:e.hasStaffTuning(n)&&e.hasStaffTuning(f)?n[p]!==f[p]||n[h]!==f[h]?!1:e.hasSameStaffTuning(n,f):e.hasStaffTuning(n)!==e.hasStaffTuning(f)?!1:e.hasRecorderTabs(n)&&e.hasRecorderTabs(f)?e.hasSameRecorderTabs(n,f):e.hasRecorderTabs(n)!==e.hasRecorderTabs(f)?!1:e.hasBrassFingering(n)&&e.hasBrassFingering(f)?e.hasSameBrassFingering(n,f):e.hasBrassFingering(n)!==e.hasBrassFingering(f)?!1:e.hasKodaly(n)&&e.hasKodaly(f)?e.hasSameKodaly(n,f):e.hasKodaly(n)===e.hasKodaly(f)},e.isSameTuningData=function(n,f){const i=e.getNbStaffLines(n),s=e.getNbStaffLines(f);if(i!==s)return!1;const T=e.getCapo(n),_=e.getCapo(f);return T!==_?!1:e.hasStaffTuning(n)&&e.hasStaffTuning(f)?e.hasSameStaffTuning(n,f):e.hasStaffTuning(n)===e.hasStaffTuning(f)},e.hasSameStaffTuning=function(n,f){if(e.getStaffTuningsLength(n)!==e.getStaffTuningsLength(f))return!1;for(let i=0;i<e.getStaffTuningsLength(n);i++)if(!E.default.isSame(e.getStaffTuning(n,i),e.getStaffTuning(f,i)))return!1;return!0},e.hasSameKodaly=function(n,f){const i=e.getKodaly(n),s=e.getKodaly(f);return O.A.isSame(i,s)},e.hasSameRecorderTabs=function(n,f){const i=e.getRecorderTabs(n),s=e.getRecorderTabs(f);return K.A.isSame(i,s)},e.hasSameBrassFingering=function(n,f){const i=e.getBrassFingering(n),s=e.getBrassFingering(f);return d.A.isSame(i,s)},e.createDefault=function(){return e.create(e.DEFAULT_NB_STAFF_LINES)},e.create=function(n,f,i){const s={"staff-lines":n};return typeof f!="undefined"&&e.setStaffTunings(s,f),typeof i!="undefined"&&e.setCapo(s,i),e.check(s),s},e.createKodaly=function(n,f){const i={"staff-lines":n};return e.setKodaly(i,f),i},e.createRecorderTabs=function(n,f){const i={"staff-lines":n};return e.setRecorderTabs(i,f),i},e.createBrassFingering=function(n,f){const i={"staff-lines":n};return e.setBrassFingering(i,f),i},e.check=function(n){if(e.hasStaffLines(n)&&e.checkStaffLines(n),e.hasCapo(n)&&e.checkCapo(n),e.hasStaffTuning(n)){const f=e.getStaffTuningsLength(n),i=e.getNbStaffLines(n);if(f!==i)throw new M.A(f,i);e.getStaffTunings(n).forEach(E.default.check)}if(e.hasKodaly(n)){const f=e.getKodaly(n);O.A.check(f)}if(e.hasKodaly(n)&&e.hasStaffTuning(n))throw new R.default},e.checkCapo=function(n){const f=e.getCapo(n);g.A.check(f)},e.checkStaffLines=function(n){e.checkNbStaffLines(n)},e.checkNbStaffLines=function(n){const f=e.getNbStaffLines(n);if(!e.isStaffLinesValid(f))throw new y.A(f)},e.isStaffLinesValid=function(n){return e.isNbStaffLinesValid(n)},e.isNbStaffLinesValid=function(n){return c.default.isInteger(n)&&n>=0&&n<=U},e.copy=function(n){const f=e.getStaffLines(n);let i;if(e.hasStaffTuning(n)){const T=e.getStaffTunings(n).map(E.default.copy),_=e.getCapo(n);i=e.create(f,T,_),typeof n[p]!="undefined"&&(i[p]=!0),typeof n[h]!="undefined"&&(i[h]=!0)}else if(e.hasKodaly(n)){let s=e.getKodaly(n);s=(0,A.default)(s),i=e.createKodaly(f,s)}else if(e.hasRecorderTabs(n)){let s=e.getRecorderTabs(n);s=(0,A.default)(s),i=e.createRecorderTabs(f,s)}else if(e.hasBrassFingering(n)){let s=e.getBrassFingering(n);s=(0,A.default)(s),i=e.createBrassFingering(f,s)}else i=e.create(f);return i},e.fillEmptyEntriesWithDefault=function(n){const f=n.getNbStaves();for(let i=0;i<f;i++)n.hasEntry(i)||n.setEntry(e.createDefault(),i)},e.toClef=function(n){const f=e.getNbStaffLines(n);let i="G";f===4&&(i="F");const s=L.default.create(i);return L.default.setOctaveChange(s,-1),s},e.toTabClef=function(n){return e.getNbStaffLines(n)<6?L.default.create("TAB",4):L.default.create("TAB",5)},e.getCapo=function(n){return e.hasCapo(n)?parseInt(n.capo,10):g.A.DEFAULT},e.hasCapo=function(n){return typeof n.capo!="undefined"},e.getBrassFingering=function(n){return n[F]},e.hasBrassFingering=function(n){return typeof n[F]!="undefined"},e.setBrassFingering=function(n,f){n[F]=f},e.removeBrassFingering=function(n){delete n[F]},e.getRecorderTabs=function(n){return n[S]},e.hasRecorderTabs=function(n){return typeof n[S]!="undefined"},e.setRecorderTabs=function(n,f){n[S]=f},e.removeRecorderTabs=function(n){delete n[S]},e.getKodaly=function(n){return n[l]},e.hasKodaly=function(n){return typeof n[l]!="undefined"},e.setKodaly=function(n,f){n[l]=f},e.removeKodaly=function(n){delete n[l]},e.hasTab=function(n){return e.hasStaffTuning(n)&&typeof n[p]=="undefined"},e.hasTabFrameEnabled=function(n){return n[h]===!0};const b=e},364596:(j,C,o)=>{o.r(C),o.d(C,{default:()=>nn});var B=o(364842),y=o(697102),M=o(737903),R=o(365340),g=o(377180),v=o(180173),c=o(351277);const E="major",L=0;function A(t){delete t["key-alter"],delete t["key-accidental"],delete t["key-step"]}function O(t){return R.default.getArray(t,"key-alter").map(parseFloat)}function K(t){return typeof t.fifths!="undefined"}function d(t){if(typeof t.fifths=="undefined")throw new B.default("Missing fifths");return parseInt(t.fifths,10)}function U(t,a){t.fifths=a.toString()}function l(t){return S(t)?t.mode:E}function S(t){return typeof t.mode!="undefined"}function F(t,a){const r=d(t),u=d(a);return r===u||r<4&&u>4&&r+6===u-6||r>4&&u<4&&r-6===u+6}function p(t,a){return h(t)&&(!h(a)||_(t)!==_(a))?!1:d(t)===d(a)&&l(t)===l(a)}function h(t){return typeof t.cancel!="undefined"}function e(t){delete t.cancel}function b(t,a){t.cancel=a.toString()}function n(t){const a=d(t),r=i(t);return r>0&&a<0||r<0&&a>0}function f(t){const a=d(t);return i(t)!==0&&a===0}function i(t){return s(t)?t.$adagio.previousFifths:0}function s(t){return typeof t.$adagio!="undefined"&&typeof t.$adagio.previousFifths!="undefined"}function T(t,a){typeof t.$adagio=="undefined"&&(t.$adagio={}),t.$adagio.previousFifths=a}function _(t){if(typeof t.cancel=="undefined")throw new Error("Missing cancel in key");return parseInt(t.cancel,10)}function x(t,a){const r=d(a),u=d(t);return u===0?!1:u<0&&r>u||u>0&&r<u}function G(t){const a=d(t),r=P(a);if(S(t)){const u=l(t);r.mode=u}return r}function X(t){l(t)===E&&delete t.mode}function Y(t,a){const r=(0,M.default)(a),u=d(t);return T(r,u),r}function w(t){I(t)}function I(t){if(!N(t))throw new y.default(t.fifths)}function N(t){if(typeof t.fifths=="undefined")return!1;const a=d(t);return!Number.isNaN(a)&&-7<=a&&a<=7}function m(t){const a=d(t);return v.default.fifthsToTonic(a)}function P(t){return{fifths:t.toString()}}function H(t,a){const r=m(t),u=m(a);return c.default.naiveComparePitch(r,u)<0&&c.default.shiftOctave(r,1),c.default.getTransposeDiff(r,u)}function Z(t,a){const r=m(t),u=m(a);return c.default.naiveComparePitch(r,u)>0&&c.default.shiftOctave(u,1),c.default.getTransposeDiff(r,u)}function z(t,a){return a=g.default.getReverse(a),t=D(t,a),t}function D(t,a){a=J(a);let r=m(t);return c.default.setOctave(r,1),r=c.default.transpose(r,a),c.default.setOctave(r,0),$(r)}function J(t){return g.default.getOctaveChange(t)===0||(t=g.default.copy(t),g.default.setOctaveChange(t,0)),t}function $(t){t=Q(t);const a=v.default.getFifthsForTonic(t);return P(a)}function Q(t){return v.default.isValidTonic(t)?t:V(t)}function V(t){t=c.default.copy(t),c.default.setOctave(t,1);const a=g.default.create(0);let r;const u=c.default.getAlter(t);if(u===1)r=1;else if(u===-1)r=-1;else throw new B.default("Unreachable");return g.default.setDiatonic(a,r),t=c.default.transpose(t,a),c.default.setOctave(t,0),t}function k(t){return d(t)===L}function W(){return P(L)}function q(){return W()}const nn={removeCustom:A,getCustomAlters:O,hasFifths:K,getFifths:d,setFifths:U,getMode:l,hasMode:S,isSameOrEnharmonic:F,isSame:p,hasCancel:h,removeCancel:e,setCancel:b,isSignChange:n,isBackToZero:f,getPreviousFifths:i,hasPreviousFifths:s,setPreviousFifths:T,getCancel:_,needCancel:x,copy:G,removeDefault:X,makeDiff:Y,check:w,checkFifths:I,isFifthsValid:N,getTonic:m,create:P,getUpTransposeDiff:H,getDownTransposeDiff:Z,reverseTranspose:z,transpose:D,fromTonic:$,isC:k,createC:W,createDefault:q}}}]);})();


//# debugId=8f761868-ed2e-58c0-8777-eab18353270e

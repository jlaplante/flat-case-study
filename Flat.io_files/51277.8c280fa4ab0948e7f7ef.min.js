"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="64b2a4b4-a481-5e24-898c-e4bdc4972955")}catch(e){}}();
(()=>{/*! Copyright (c) 2025 Tutteo Ltd. */(self.webpackChunk_flat_flat=self.webpackChunk_flat_flat||[]).push([[51277],{351277:(lt,B,f)=>{f.r(B),f.d(B,{default:()=>j});var y=f(364842),z=f(231088),w=f(112190),G=f(216890),$=f(666636),X=f(46692),N=f(352363),g=f(606741),l=f(614426),I=f(726042),D=f(859418),a=f(377180),m=f(719631);const n={},_=12,P=12,E={C:0,D:2,E:4,F:5,G:7,A:9,B:11};n.MAX_LINE=12.5,n.MIN_LINE=-6.5,n.lineToPitch=function(t,r){return m.default.toPitch(n,t,r)},n.pitchToLine=function(t,r){return m.default.toLine(n,t,r)},n.isSameStepAlter=function(t,r){return n.getAlter(t)!==n.getAlter(r)?!1:n.getStep(t)===n.getStep(r)},n.isSamePitch=function(t,r){return n.getAlter(t)!==n.getAlter(r)||n.getStep(t)!==n.getStep(r)?!1:n.getOctave(t)===n.getOctave(r)},n.naiveComparePitch=function(t,r){const c=n.compareLine(t,r);if(c!==0)return c;const u=n.getAlter(t),s=n.getAlter(r);return n.compareAlter(u,s)},n.compareAlter=function(t,r){return t-r},n.compareLine=function(t,r){const c=n.getOctave(t),u=n.getOctave(r),s=n.compareOctave(c,u);if(s!==0)return s;const A=n.getStep(t),O=n.getStep(r);return n.compareStep(A,O)},n.compareOctave=function(t,r){return t-r},n.compareStep=function(t,r){const c=g.default.idx[t],u=g.default.idx[r];return c-u},n.isSameLine=function(t,r){return n.getOctave(t)===n.getOctave(r)&&n.getStep(t)===n.getStep(r)},n.getAlter=function(t){return typeof t.alter!="undefined"?parseFloat(t.alter):0},n.setAlter=function(t,r){r!==0?t.alter=r.toString():delete t.alter},n.getStep=function(t){return t.step},n.getStepIdx=function(t){const r=n.getStep(t);return g.default.getStepIdx(r)},n.getOctave=function(t){return I.default.toInt(t.octave)};const M=["F","C","G","D","A","E","B"],b=["B","E","A","D","G","C","F"];n.stepToAlter=function(t,r){return r>0&&M.indexOf(t)<r?1:r<0&&b.indexOf(t)<-r?-1:0},n.stringify=function(t){let r="";return r+=n.getStep(t),r+="/",r+=n.getOctave(t),r+="/",r+=n.getAlter(t),r},n.alterToAccidental=function(t){if(t===2)return l.default.DOUBLESHARP;if(t===1.5)return l.default.THREEQUARTERSHARP;if(t===1)return l.default.SHARP;if(t===.5)return l.default.QUARTERSHARP;if(t===0)return l.default.NATURAL;if(t===-.5)return l.default.QUARTERFLAT;if(t===-1)return l.default.FLAT;if(t===-1.5)return l.default.THREEQUARTERFLAT;if(t===-2)return l.default.FLATFLAT;throw new y.default("pitchUtils.alterToAccidental",`invalid alter value: ${t}`)},n.alterToUnicode=function(t){if(t===-1)return"\u266D";if(t===-2)return"\uEB90\u{1D12B}";if(t===1)return"\u266F";if(t===2)return"\uEB90\u{1D12A}";if(t===0)return"\u266E";throw new y.default("pitchUtils.alterToUnicode",`invalid alter value: ${t}`)},n.accidentalToAlter=function(t){if(t===l.default.SHARPSHARP||t===l.default.DOUBLESHARP)return 2;if(t===l.default.THREEQUARTERSHARP)return 1.5;if(t===l.default.SHARP)return 1;if(t===l.default.QUARTERSHARP)return .5;if(t===l.default.NATURAL)return 0;if(t===l.default.QUARTERFLAT)return-.5;if(t===l.default.FLAT)return-1;if(t===l.default.THREEQUARTERFLAT)return-1.5;if(t===l.default.FLATFLAT)return-2;l.default.raiseError(t)},n.check=function(t){const r=n.getOctave(t);if(!N.default.isValid(r))throw new $.default(t.octave);const c=n.getAlter(t);if(!n.isValidAlter(c))throw new X.default(t.alter);if(!g.default.isValid(t.step))throw new G.default(t.step)},n.shiftOctave=function(t,r){const u=n.getOctave(t)+r;n.setOctave(t,u)};const d=function(t,r){const u=n.getOctave(t)+r;S(t,u)};n.setOctave=function(t,r){n.checkOctave(r),S(t,r)},n.checkOctave=function(t){if(!N.default.isValid(t))throw new z.default(t)};const S=function(t,r){t.octave=r.toString()};n.shiftStepUnsafe=function(t,r){const c=F(t,r);d(t,c);const u=K(t,r),s=g.default.idxToStep(u);n.setStep(t,s)};const F=function(t,r){let c=n.getStepIdx(t);c+=r;const u=g.default.getSize();return c<0?-1:c>=u?1:0},K=function(t,r){let c=n.getStepIdx(t);c+=r;const u=g.default.getSize();return c<0?c+u:c>=u?c-u:c};n.setStep=function(t,r){t.step=r.toString()},n.shiftAlter=function(t,r){const c=n.getAlter(t);n.setAlter(t,c+r)},n.setAlter=function(t,r){n.checkAlter(r),r===0?delete t.alter:t.alter=r.toString()},n.checkAlter=function(t){if(!n.isValidAlter(t))throw new w.default(t)},n.isValidAlter=function(t){return-2<=t&&t<=2},n.hasDoubleAccidental=function(t){const r=n.getAlter(t);return r===-2||r===2},n.hasQuarterToneAccidental=function(t){const r=n.getAlter(t);return r===1.5||r===.5||r===-.5||r===-1.5},n.normaliseAlterToHalfTone=function(t){return t>0?Math.ceil(t):Math.floor(t)},n.transpose=function(t,r,c=!1){t=T(t,r,c);const u=n.getOctave(t);return n.checkOctave(u),t},n.willOverflow=function(t,r,c){t=T(t,r,c);const u=n.getOctave(t);return!N.default.isValid(u)};const T=function(t,r,c){t=n.copy(t),r=a.default.copy(r);const u=c?n.doubleAccidentalRange:n.simpleAccidentalRange;if(J(t,r),R(t,r),Y(t,r,u),R(t,r),W(t,r),!a.default.isIdentity(r)){const s="at this point, transpose should be an identity",A=new y.default("TransposeFailed",s);throw A.pitch=t,A.transpose=r,A}return t};n.simpleAccidentalRange=function(t){return-1<=t&&t<=1},n.doubleAccidentalRange=function(t){return-2<=t&&t<=2};const J=function(t,r){const c=a.default.getOctaveChange(r);d(t,c),a.default.setOctaveChange(r,0)},R=function(t,r){const c=n.getStep(t),u=a.default.getDiatonic(r),s=a.default.getChromatic(r),A=D.default.getChromaticShift(c,u);n.shiftStepUnsafe(t,u),a.default.setDiatonic(r,0),a.default.setChromatic(r,s-A)},Y=function(t,r,c){const u=n.getStep(t),s=n.getAlter(t),A=a.default.getChromatic(r),O=D.default.searchDiatonic(u,s+A,c);a.default.setDiatonic(r,O)},W=function(t,r){const c=a.default.getChromatic(r);n.shiftAlter(t,c),a.default.setChromatic(r,0)};n.getTransposeDiff=function(t,r){let c=n.getOctave(t)-n.getOctave(r),u=n.getStepIdx(t)-n.getStepIdx(r);const s=g.default.getSize();c>0&&u<0?(c--,u+=s):c<0&&u>0&&(c++,u-=s);const A=n.getStep(r);let O=D.default.getChromaticShift(A,u);const H=n.getAlter(t)-n.getAlter(r);O+=H,O>=a.default.NB_CHROMATIC?(O-=a.default.NB_CHROMATIC,c+=1,u-=a.default.NB_DIATONIC):O<=-a.default.NB_CHROMATIC&&(O+=a.default.NB_CHROMATIC,c-=1,u+=a.default.NB_DIATONIC);const U=a.default.create(O);return a.default.setDiatonic(U,u),a.default.setOctaveChange(U,c),U},n.copy=function(t){const r=n.getOctave(t),c=n.getStep(t),u=n.getAlter(t),s=n.create(r,c);return n.setAlter(s,u),s},n.copyWithoutAlter=function(t){const r=n.getOctave(t),c=n.getStep(t);return n.create(r,c)},n.create=function(t,r,c=0){const u={octave:t.toString(),step:r.toString()};return n.setAlter(u,c),u},n.toMIDIPitch=function(t){let r=_;const c=n.getOctave(t);r+=c*P;const u=n.getStep(t);r+=E[u];const s=n.getAlter(t);return r+=s,r},n.stepToChromatic=function(t){return E[t]};const j=n},377180:(lt,B,f)=>{f.r(B),f.d(B,{default:()=>Tt});var y=f(952051),z=f(996473),w=f(611234),G=f(387844),$=f(575452),X=f(670702),N=f(737903),g=f(726042),l=f(476943);const I=0,D=0,a=0,m=12,n=7;function _(e){return P(e)?parseInt(e.diatonic,10):I}function P(e){return typeof e.diatonic!="undefined"}function E(e){return M(e)?parseInt(e["octave-change"],10):D}function M(e){return typeof e["octave-change"]!="undefined"}function b(e){return typeof e.chromatic!="undefined"}function d(e){return e?parseInt(e.chromatic,10):0}function S(e){return typeof e.double!="undefined"}function F(){return K()}function K(){return T(a)}function T(e){return{chromatic:e.toString()}}function J(e,o,i){const v={chromatic:e.toString()};return typeof o!="undefined"&&L(v,o),typeof i!="undefined"&&C(v,i),v}function R(e,o){return S(e)===S(o)&&E(e)===E(o)&&d(e)===d(o)&&_(e)===_(o)}function Y(e){P(e)&&_(e)===I&&W(e),M(e)&&E(e)===D&&j(e)}function W(e){delete e.diatonic}function j(e){delete e["octave-change"]}function t(e){return!S(e)&&d(e)===a&&_(e)===I&&E(e)===D}function r(e,o){return(0,N.default)(o)}function c(e){if(u(e),P(e)&&A(e),M(e)&&H(e),S(e))throw new $.default;et(e)}function u(e){const o=d(e);if(!s(o))throw new z.default(e.chromatic)}function s(e){return!Number.isNaN(e)&&e>=-11&&e<=11}function A(e){const o=_(e);if(!O(o))throw new w.default(e.diatonic)}function O(e){return!Number.isNaN(e)&&e>=-6&&e<=6}function H(e){const o=E(e);if(!U(o))throw new y.default(e["octave-change"])}function U(e){return!Number.isNaN(e)&&e>=-4&&e<=4}function st(e){const o=e.double;if(!tt(o))throw new G.default(o)}function tt(e){return rt(e)}function et(e){if(!nt(e)){const o=d(e),i=_(e);throw new X.default(o,i)}}function nt(e){const o=d(e),i=_(e);return!(o>0&&i<0||o<0&&i>0)}function rt(e){return l.default.isObject(e)&&l.default.isObjectEmpty(e)}function dt(e){const o=e.getNbStaves();for(let i=0;i<o;i++)e.hasEntry(i)||e.setEntry(F(),i)}function ot(e,o){e.chromatic=o.toString()}function L(e,o){o===I?W(e):e.diatonic=o.toString()}function C(e,o){o===D?j(e):e["octave-change"]=o.toString()}function _t(e){const o=d(e),i=_(e),v=E(e),h=T(-o);return L(h,-i),C(h,-v),h}function Et(e){return E(e)===0&&d(e)===0&&_(e)===0}function At(e){return E(e)===0&&d(e)===0}function vt(e){return _(e)===0&&d(e)===0}function Ot(e){return _(e)>0||d(e)>0}function gt(e,o){return e=V(e),o=V(o),C(e,0),C(o,0),!!(R(e,o)||(o=Z(o),C(o,0),R(e,o)))}function mt(e,o){return R(e,o)||R(e,Z(o))}function Z(e){let o=d(e);if(e=V(e),o===0)return e;{let i=_(e),v=E(e);return o>0?(o-=m,i-=n,v+=1):(o+=m,i+=n,v-=1),ot(e,o),L(e,i),C(e,v),e}}function V(e){const o=d(e),i=T(o),v=_(e);L(i,v);const h=E(e);return C(i,h),i}function Dt(e,o){return ct(e,o,g.default.sub)}function Ct(e,o){return ct(e,o,g.default.add)}function ct(e,o,i){const v=E(e),h=E(o);let at=i(v,h);const Rt=_(e),It=_(o),k=i(Rt,It),ht=d(e),Pt=d(o),p=i(ht,Pt),Mt=ut(p,k),Ut=it(p,k);at+=ft(p,k);const q=T(Ut);return L(q,Mt),C(q,at),q}function ut(e,o){return Q(e,o)?o+n:x(e,o)?o-n:o}function it(e,o){return Q(e,o)?e+m:x(e,o)?e-m:e}function ft(e,o){return Q(e,o)?-1:x(e,o)?1:0}function x(e,o){return e>=m||o>=n}function Q(e,o){return e<=-m||o<=-n}function St(e){const o=_(e),i=d(e);return`oct[${E(e)}], diat[${o}], chr[${i}].`}const Tt={DEFAULT_DIATONIC:I,DEFAULT_OCTAVE_CHANGE:D,DEFAULT_CHROMATIC:a,NB_CHROMATIC:m,NB_DIATONIC:n,getDiatonic:_,hasDiatonic:P,getOctaveChange:E,hasOctaveChange:M,hasChromatic:b,getChromatic:d,hasDouble:S,createDefault:F,createIdentity:K,create:T,createComplete:J,isSame:R,removeDefault:Y,removeDiatonic:W,removeOctaveChange:j,isDefault:t,makeDiff:r,check:c,checkChromatic:u,isChromaticValid:s,checkDiatonic:A,isDiatonicValid:O,checkOctaveChange:H,isOctaveChangeValid:U,checkDouble:st,isDoubleValid:tt,checkChromaticValidForDiatonic:et,isChromaticValidForDiatonic:nt,isEmptyObject:rt,fillEmptyEntriesWithDefault:dt,setChromatic:ot,setDiatonic:L,setOctaveChange:C,getReverse:_t,isIdentity:Et,isEnharmonic:At,isUnison:vt,isUpward:Ot,isSimilarBaseInterval:gt,isSimilar:mt,getOctaveEnharmonic:Z,copy:V,getDiff:Dt,add:Ct,refineDiatonic:ut,refineChromatic:it,getOctaveShift:ft,hasUpOverflow:x,hasDownOverflow:Q,stringify:St}}}]);})();


//# debugId=64b2a4b4-a481-5e24-898c-e4bdc4972955

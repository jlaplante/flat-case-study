
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8afb0c46-7366-5dce-9762-8fe3b4e6cb1f")}catch(e){}}();
(()=>{/*! Copyright (c) 2025 Tutteo Ltd. */(self.webpackChunk_flat_flat=self.webpackChunk_flat_flat||[]).push([[18154,89841,97813],{26018:(o,l,t)=>{var e=t(340991);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[o.id,e,""]]),e.locals&&(o.exports=e.locals);var r=t(929234).A,a=r("06b023a6",e,!0,{})},75866:(o,l,t)=>{"use strict";t.d(l,{A:()=>p});var e=t(361744),r=t(538065);const a={class:"main-errors not-found"},m={key:0,class:"buttons-container"};function f(M,I,b,w,R,U){const c=(0,e.g2)("f-button");return(0,e.uX)(),(0,e.CE)("div",a,[(0,e.Lk)("div",null,[(0,e.Lk)("h3",null,(0,r.v_)(M.$t("flat:score.multi-tabs.title")),1),b.displayCta&&!U.isInIframe?((0,e.uX)(),(0,e.CE)("div",m,[(0,e.bF)(c,{onClick:I[0]||(I[0]=v=>U.goHome()),"default-text":"flat:nav.go-my-library"})])):(0,e.Q3)("",!0)])])}var u=t(229384);const A={name:"ScoreError4090",props:{displayCta:{type:Boolean,default:!0}},computed:{isInIframe(){return u.GZ}},methods:{goHome(){window.location="/my-library"}}};var O=t(938793);const p=(0,O.A)(A,[["render",f]])},78972:(o,l,t)=>{"use strict";o.exports=t.p+"img/85a4623643785cfe0c3a.svg"},90736:(o,l,t)=>{"use strict";o.exports=t.p+"img/22f07706ca3e22c461ce.svg"},109132:(o,l,t)=>{"use strict";o.exports=t.p+"img/422f8d895b79d56d83fc.svg"},153760:(o,l,t)=>{"use strict";t.d(l,{A:()=>a});var e=t(550594);const a={cancellationInformation(){return e.A.get(`${e.A.apiv2baseurl}/subscriptions/cancellationInformation`)},createSubscription(m){return e.A.post(`${e.A.apiv2baseurl}/subscriptions`,m)}}},158166:(o,l,t)=>{"use strict";t.d(l,{A:()=>I});var e=t(361744),r=t(538065),a=t(744056),m=t(177960),f=t(152838),u=t(512162),A=t(918194),O=t(57500);const D={key:0},p=["href"],M=["href"],I=(0,e.pM)({__name:"CheckoutTerms",props:{subscription:{type:Boolean,default:!1},onlyContact:{type:Boolean,default:!1},hasPaypal:{type:Boolean,default:!1},processing:{type:Boolean,default:!1},payWithPaypal:{type:Function,default:()=>{}},shouldDisplayContact:{type:Boolean,default:!0},isSnippetPlan:{type:Boolean,default:!1},helpUrlSnippet:{type:String,default:void 0},supportUrlSnippet:{type:String,default:void 0}},setup(b){const w=b,R=(0,e.EW)(()=>{if(typeof w.helpUrlSnippet=="string")return w.helpUrlSnippet;const{helpUrl:c}=(0,O.l)();return c}),U=(0,e.EW)(()=>{if(typeof w.supportUrlSnippet=="string")return w.supportUrlSnippet;const{supportUrl:c}=(0,O.l)();return c});return(c,v)=>{const y=(0,e.g2)("FButton");return(0,e.uX)(),(0,e.CE)("div",null,[b.hasPaypal?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,r.C4)(c.$style.item)},[(0,e.bF)((0,a.R1)(m.A)),(0,e.Lk)("div",{class:(0,r.C4)(c.$style["other-payment-method"])},[(0,e.Lk)("p",null,(0,r.v_)(c.$t("flat:billing.otherWayToPay")),1),(0,e.bF)(y,{theme:"ghost",disabled:b.processing,onClick:v[0]||(v[0]=L=>b.payWithPaypal())},{default:(0,e.k6)(()=>[(0,e.Lk)("span",null,(0,r.v_)(c.$t("flat:billing.pay-with-paypal")),1)]),_:1},8,["disabled"])],2)],2)):(0,e.Q3)("",!0),b.onlyContact?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,r.C4)(c.$style.item),id:"mentionSecurity"},[(0,e.bF)((0,a.R1)(f.A)),(0,e.Lk)("p",null,[(0,e.Lk)("strong",null,(0,r.v_)(c.$t("flat:secure-ck.title")),1),(0,e.eW)(". "+(0,r.v_)(c.$t("flat:secure-ck.desc"))+" ",1),b.subscription?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("span",D,(0,r.v_)(c.$t("flat:secure-ck.not-stored")),1))])],2)),b.subscription&&!b.onlyContact?((0,e.uX)(),(0,e.CE)("div",{key:2,class:(0,r.C4)(c.$style.item),id:"mentionCancel"},[(0,e.bF)((0,a.R1)(u.A)),(0,e.Lk)("p",null,[(0,e.eW)((0,r.v_)(c.$t("flat:upgrade.auto-renew"))+" ",1),(0,e.Lk)("a",{href:`${R.value}/general/cancel-subscriptions-free-trial`,target:"_blank",id:"mentionCancelLearnMore"},(0,r.v_)(c.$t("flat:learn-more")),9,p),v[1]||(v[1]=(0,e.eW)(". ",-1))])],2)):(0,e.Q3)("",!0),b.isSnippetPlan?((0,e.uX)(),(0,e.CE)("div",{key:3,class:(0,r.C4)(c.$style.item),id:"mentionCancel"},[(0,e.bF)((0,a.R1)(u.A)),(0,e.Lk)("p",null,(0,r.v_)(c.$t("flat:upgrade.purchase-snippet")),1)],2)):(0,e.Q3)("",!0),b.shouldDisplayContact?((0,e.uX)(),(0,e.CE)("div",{key:4,class:(0,r.C4)(c.$style.item),id:"mentionContact"},[(0,e.bF)((0,a.R1)(A.A)),(0,e.Lk)("p",null,[(0,e.eW)((0,r.v_)(c.$t("flat:support.any-questions"))+" ",1),(0,e.Lk)("a",{href:U.value,target:"_blank"},(0,r.v_)(c.$t("flat:support.contact-us")),9,M),v[2]||(v[2]=(0,e.eW)(". ",-1))])],2)):(0,e.Q3)("",!0)])}}})},160716:(o,l,t)=>{var e=t(294887);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[o.id,e,""]]),e.locals&&(o.exports=e.locals);var r=t(929234).A,a=r("a3dd7848",e,!0,{})},175208:(o,l,t)=>{"use strict";o.exports=t.p+"img/1f95ffb75793a4568b49.svg"},182147:(o,l,t)=>{"use strict";t.d(l,{k:()=>r});var e=t(303953);const r=e.A.boot},200544:(o,l,t)=>{"use strict";t.d(l,{A:()=>v});var e=t(361744),r=t(538065);function a(y,L,F,H,B,j){const x=(0,e.g2)("FBanner"),W=(0,e.g2)("LoaderSpinner"),K=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.CE)("div",null,[y.displayedError?((0,e.uX)(),(0,e.Wv)(x,{key:0,level:"error",title:"flat:error.payment",class:(0,r.C4)(y.$style.error)},{default:(0,e.k6)(()=>[(0,e.Lk)("div",null,(0,r.v_)(y.displayedError),1),(0,e.bo)((0,e.Lk)("div",null,null,512),[[K,y.$t("auth:contact-support")]])]),_:1},8,["class"])):(0,e.Q3)("",!0),(0,e.Lk)("div",{class:(0,r.C4)(y.$style.wrapperStripe)},[y.loadingStripe?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,r.C4)(y.$style.loadingStripe)},[(0,e.bF)(W)],2)):(0,e.Q3)("",!0),L[0]||(L[0]=(0,e.Lk)("div",{id:"payment-element"},null,-1))],2)])}var m=t(743161),f=t(653154),u=t(973705),A=t(645369),O=t.n(A),D=t(759913),p=(y,L,F)=>new Promise((H,B)=>{var j=K=>{try{W(F.next(K))}catch(V){B(V)}},x=K=>{try{W(F.throw(K))}catch(V){B(V)}},W=K=>K.done?H(K.value):Promise.resolve(K.value).then(j,x);W((F=F.apply(y,L)).next())});const M=O()("flat:payments:StripePaymentElement"),I=(0,e.pM)({name:"StripePaymentElement",components:{FBanner:D.A,LoaderSpinner:m.A},props:{payments:{type:Object,required:!0},order:{type:Object,default:null},offer:{type:Object,default:null},mode:{type:String,required:!0}},computed:{displayedError(){return this.payments.errorString||this.errorString}},data(){return{elements:null,element:null,loadingStripe:!1,errorString:null,isDestroyed:!1}},emits:["loading","elements","setOrder"],watch:{loadingStripe(y){this.$emit("loading",y)}},methods:{loadStripeElements(){return p(this,null,function*(){try{this.payments.resetErrors(),this.loadingStripe=!0,M("creating payment intent");const{clientSecret:y,order:L}=yield this.payments.createPaymentIntent({mode:this.mode,offer:this.offer,order:this.order});if(M("payment intent created"),this.isDestroyed){M("already destroyed, dont create stripe elements");return}if(!this.payments.stripe)throw new Error("Stripe not loaded when displaying components");const F=getComputedStyle(document.documentElement);this.elements=this.payments.stripe.elements({clientSecret:y,appearance:{theme:"stripe",variables:{fontFamily:"Inter, Helvetica Neue, Helvetica, Arial, sans-serif",colorPrimary:F.getPropertyValue("--f-primary"),colorText:F.getPropertyValue("--f-ink")}},fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Inter"}]}),this.element=this.elements.create("payment",{fields:{billingDetails:{name:"auto",address:{country:"never"}}},terms:{card:"never"}}),this.element.mount("#payment-element"),this.element.on("ready",()=>{this.loadingStripe=!1,this.payments.trackEvent({type:"page",category:"stripe",name:"ready"}),M("ready, %o",L||this.offer)});let H="card";if(this.element.on("change",B=>{this.loadingStripe=!1,B.value&&B.value.type!==H&&(this.payments.trackEvent({type:"input",category:"stripe",name:"change",properties:{paymentMean:B.value.type}}),H=B.value.type),M("change: %o",B)}),this.isDestroyed){M("already destroyed, dont emit stripe elements");return}this.$emit("elements",this.elements),this.$emit("setOrder",L),M("emitted elements")}catch(y){(0,f.vV)(y),this.errorString=(0,u.b)(y),this.loadingStripe=!1}})}},created(){this.loadStripeElements()},beforeUnmount(){this.isDestroyed=!0}});var b=t(26018),w=t.n(b),R=t(938793);const U={};U.$style=w();const v=(0,R.A)(I,[["render",a],["__cssModules",U]])},204463:(o,l,t)=>{"use strict";o.exports=t.p+"img/25a97740afbe947b1237.svg"},254437:(o,l,t)=>{"use strict";o.exports=t.p+"img/4835760a8657af96defa.svg"},273512:(o,l,t)=>{"use strict";t.d(l,{default:()=>A});var e=t(360960),r=t(242178),a=t(890438),m=t(938793);const f={};f.$style=a.default;const A=(0,m.A)(r.A,[["render",e.X],["__cssModules",f]])},294887:(o,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>u});var e=t(814779),r=t.n(e),a=t(927860),m=t.n(a),f=m()(r());f.push([o.id,`.item_zCqfy{display:flex;align-items:center;font-size:13px;color:var(--f-subdue)}.item_zCqfy:not(:first-child){margin:16px 0 0}.item_zCqfy p{color:var(--f-subdue)}.item_zCqfy>svg{flex:0 0 auto;margin-right:8px;fill:var(--f-subdue)}.item_zCqfy a{font-weight:600;text-decoration:underline}.other-payment-method_X95Pb{display:flex;align-items:center;flex-wrap:wrap}.other-payment-method_X95Pb p{margin-right:8px}
`,""]),f.locals={item:"item_zCqfy","other-payment-method":"other-payment-method_X95Pb"};const u=f},301724:(o,l,t)=>{"use strict";o.exports=t.p+"img/2348db7c0b6efbc3615d.svg"},340991:(o,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>u});var e=t(814779),r=t.n(e),a=t(927860),m=t.n(a),f=m()(r());f.push([o.id,`.wrapperStripe_wr2vD{min-height:75px}.loadingStripe_mIVDA{height:75px;display:flex;align-items:center;justify-content:center}.error_Gmrrp{margin-bottom:16px}
`,""]),f.locals={wrapperStripe:"wrapperStripe_wr2vD",loadingStripe:"loadingStripe_mIVDA",error:"error_Gmrrp"};const u=f},355603:(o,l,t)=>{"use strict";t.d(l,{A:()=>e.A});var e=t(158166)},384646:(o,l,t)=>{"use strict";o.exports=t.p+"img/a89a1257f7e999414e4f.svg"},389841:(o,l,t)=>{"use strict";t.d(l,{A:()=>se});var e=t(967409),r=t(971570),a=t(838145),m=t(328010),f=t(153760),u=t(653154),A=t(674548),O=t(182147),D=t(763939),p=t(849123),M=t(604969),I=t(459356),b=t(303953),w=t(916504),R=t(973705),U=t(148402),c=t(645369),v=t.n(c),y=t(170050),L=t(744056);function F({title:X="Flat",url:n,width:i=500,height:_=575}){return new Promise((d,h)=>{const C=k=>(k==null?void 0:k.type)==="flat-popup-return"?(d(k),!0):!1;let E=!1;const P=k=>{if(E)return;C(k.data)&&(E=!0,window.removeEventListener("message",P))};window.addEventListener("message",P);const $=window.outerHeight/2+window.screenY-_/2,T=window.outerWidth/2+window.screenX-i/2,z=`menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width=${i},height=${_},top=${$},left=${T}`,N=window.open(n,X,z);if(!N){const k=new Error("popup_blocked");k.clientError=!0,h(k);return}N.focus();const J=setInterval(()=>{if(N.closed&&(clearInterval(J),window.removeEventListener("message",P),!E)){const k=new Error("popup_closed");k.clientError=!0,h(k)}},500)})}var H=Object.defineProperty,B=(X,n,i)=>n in X?H(X,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):X[n]=i,j=(X,n,i)=>B(X,typeof n!="symbol"?n+"":n,i),x=(X,n,i)=>new Promise((_,d)=>{var h=P=>{try{E(i.next(P))}catch($){d($)}},C=P=>{try{E(i.throw(P))}catch($){d($)}},E=P=>P.done?_(P.value):Promise.resolve(P.value).then(h,C);E((i=i.apply(X,n)).next())});const W=v()("flat:payments"),K=["USD","AUD","CAD","CZK","DKK","EUR","GBP","HKK","HUF","ILS","JPY","MXN","TWD","NZD","NOK","PHP","PLN","RUB","SGD","SEK","CHF","THB"],V="payment.funnel";class se{constructor(){j(this,"processing"),j(this,"coupon"),j(this,"stripe"),j(this,"stripeLoaded"),j(this,"stripeError"),j(this,"ref"),j(this,"funnel"),this.processing=!1,this.stripe=null,this.stripeLoaded=!1,this.stripeError=null}hasPaypalForCurrency(n){return K.includes(n)}hasPaymentForCurrency(n){return this.hasPaypalForCurrency(n)}initFrontendEvent(){return x(this,arguments,function*({content:n,ref:i,version:_,name:d}={}){!i&&typeof URLSearchParams!="undefined"&&(i=new URLSearchParams(window.location.search).get("ref")||void 0,typeof i!="string"&&(0,u.fH)(new Error("Frontend purchase event 'unknown'"))),this.ref=i||"unknown";const h=yield r.A.push({funnel:{category:"purchase",name:d||"individual-upgrade",content:n,referral:this.ref,version:_},event:{type:"page",category:"payments",name:"offers"}});return this.funnel=h.funnel,w.A.set(V,this.funnel),h})}loadFunnelFromStore(){const n=w.A.get(V);typeof n=="string"&&(this.funnel=n)}setupAutoTrack(n,i){if(!this.funnel){(0,u.vV)(new Error("Called setupAutoTrack before analytics funnel setup"));return}r.A.setupAutoTrack(n,this.funnel,i)}trackEvent(n){return x(this,null,function*(){return this.funnel?r.A.push({funnel:{id:this.funnel},event:n}):null})}fetchAllIndivOffers(){return x(this,null,function*(){try{yield(0,p.k)().getBillingInfo()}catch(n){W("billing err: %o",n)}yield this.initCoupons();try{yield(0,M.w)().fetchAllOffers({coupon:this.coupon})}catch(n){W("coupon error: %o",n),this.coupon=void 0,yield(0,M.w)().fetchAllOffers()}})}getCouponFromParams(n){return n.get("c")||n.get("cm")||n.get("cy")||n.get("cl")||void 0}initCoupons(){return x(this,null,function*(){if(typeof URLSearchParams=="undefined")return;const n=new URLSearchParams(window.location.search);if(this.coupon=this.getCouponFromParams(n),n.has("next")){const i=n.get("next"),_=i==null?void 0:i.split("?")[1];if(_){const d=new URLSearchParams(_);this.coupon=this.getCouponFromParams(d)}}})}resetErrors(){this.stripeError=null}loadStripeJs(){return x(this,null,function*(){var n,i,_;const d=(_=(i=(n=O.k)==null?void 0:n.config.stripe)==null?void 0:i.publicKeys)==null?void 0:_[this.billingCompany];if(!d){this.stripeError="Error while loading payment service Stripe";const h=new Error(`Missing Stripe key for billing company ${this.billingCompany}`);throw(0,u.vV)(h),h}this.stripe=(0,L.IG)((yield(0,U.c)(d))||{}),this.stripeLoaded=!0})}createPaymentIntent(n){return x(this,arguments,function*({mode:i="order",offer:_,order:d}){var h,C;let E;W("createPaymentIntent(%s): %o / %o",i,_,d);try{if((h=_==null?void 0:_.availableDiscount)!=null&&h.discountedOffer&&!((C=_==null?void 0:_.availableDiscount)!=null&&C.coupon)&&(_=_.availableDiscount.discountedOffer),i==="setup"||i==="free-trial")({clientSecret:E}=yield e.A.createStripeSetupIntents({billingCompany:this.billingCompany}));else if(i==="order")d||(d=yield this.createSingleOrder(_)),E=(yield e.A.createStripePaymentIntents(d.id,{billingCompany:this.billingCompany,automaticPaymentMethod:!0})).clientSecret;else if(i==="gift-card")d||(d=yield this.createGiftCardOrder(_)),E=(yield e.A.createStripePaymentIntents(d.id,{billingCompany:this.billingCompany,automaticPaymentMethod:!0})).clientSecret;else if(i==="subscription"){const P={billingCompany:this.billingCompany,reference:_.reference,funnel:this.funnel,coupon:this.getPayloadCoupon(_)};E=(yield e.A.createSubscriptionPaymentIntents(P)).clientSecret}else throw new Error(`Unknown payment intent mode: ${i}`)}catch(P){throw(0,u.vV)(P,{logger:"payments"}),P}return{order:d,clientSecret:E}})}confirmPaymentIntent(n){return x(this,arguments,function*({elements:i,returnUrl:_,redirectToReturnUrl:d}){var h,C;if(this.processing)return null;if(!this.stripe){this.stripeError="Error while loading payment service Stripe";const E=new Error("Stripe is not loaded when calling confirmPaymentIntent");throw(0,u.vV)(E),E}try{this.stripeError=null,this.processing=!0;const E=((h=this.billingAddress)==null?void 0:h.countryCode)||((C=this.account)==null?void 0:C.country)||"US";W("customer country = %s",E),yield this.trackEvent({type:"click",category:"payments",name:"stripeConfirmPayment"});const{paymentIntent:P,error:$}=yield this.stripe.confirmPayment({elements:i,redirect:d?"always":"if_required",confirmParams:{return_url:_,payment_method_data:{billing_details:{address:{country:E}}}}});if($)throw this.stripeError=$,yield this.trackEvent({type:"error",category:"payments",name:"stripeError",properties:{message:$.code||$.message||$}}),$;return P.status==="succeeded"?(yield e.A.syncStripePaymentIntentsById(P.id),this.onPaymentSuccess()):["succeeded","processing"].includes(P.status)||(this.processing=!1),P}catch(E){throw this.stripeError||(0,u.vV)(E,{logger:"payments"}),this.processing=!1,E}})}loadPaymentIntentFromReturnUrl(){return x(this,null,function*(){const n=new URLSearchParams(window.location.search).get("payment_intent_client_secret");if(!n)throw new Error("NO_PAYMENT_INTENT_CLIENT_SECRET");if(!this.stripe){this.stripeError="Error while loading payment service Stripe";const i=new Error("Stripe is not loaded when calling loadPaymentIntentFromReturnUrl");throw(0,u.vV)(i),i}try{const{paymentIntent:i,error:_}=yield this.stripe.retrievePaymentIntent(n);if(_)throw this.stripeError=_,_;return i.status==="succeeded"&&(yield e.A.syncStripePaymentIntentsById(i.id)),i}catch(i){throw this.stripeError||(0,u.vV)(i,{logger:"payments"}),i}})}confirmSetupIntent(n){return x(this,arguments,function*({elements:i,returnUrl:_}){var d;if(this.processing)return null;if(!this.stripe){this.stripeError="Error while loading payment service Stripe";const h=new Error("Stripe is not loaded when calling confirmSetupIntent");throw(0,u.vV)(h),h}try{this.stripeError=null,this.processing=!0;const h=this.billingAddress.countryCode||((d=this.account)==null?void 0:d.country)||"US",{setupIntent:C,error:E}=yield this.stripe.confirmSetup({elements:i,redirect:"if_required",confirmParams:{return_url:_,payment_method_data:{billing_details:{address:{country:h}}}}});if(E)throw this.stripeError=E,E;return C.status==="succeeded"?e.A.attachStripePaymentMethod({token:C.payment_method,tokenCountry:this.billingCompany}):(this.processing=!1,C)}catch(h){throw this.stripeError||(0,u.vV)(h,{logger:"payments"}),this.processing=!1,h}})}createSubscription(n){return x(this,arguments,function*({trial:i,reference:_}){try{yield f.A.createSubscription({trial:i,reference:_})}catch(d){throw(0,u.vV)(d,{logger:"payments"}),this.processing=!1,this.stripeError=(0,R.b)(d),d}})}createSingleOrder(n){var i,_;if(!n)throw new Error("Missing offer to create order for single purchase");(i=n==null?void 0:n.availableDiscount)!=null&&i.discountedOffer&&!((_=n==null?void 0:n.availableDiscount)!=null&&_.coupon)&&(n=n.availableDiscount.discountedOffer);const d={items:[{reference:n.reference,quantity:1}],coupon:this.getPayloadCoupon(n)},h=this.funnel;return h&&(d.funnel=h),e.A.createOrder(d)}createGiftCardOrder(n){return x(this,null,function*(){var i,_;if(!n)throw new Error("Missing offer to create order for gift card purchase");let d;try{d=yield this.loadRecaptcha()}catch(E){throw new Error(A.MR.t("auth:blocked-recaptcha"))}(i=n==null?void 0:n.availableDiscount)!=null&&i.discountedOffer&&!((_=n==null?void 0:n.availableDiscount)!=null&&_.coupon)&&(n=n.availableDiscount.discountedOffer);const h={reference:n.reference,coupon:this.getPayloadCoupon(n),recaptchaToken:yield d.execute("createGiftOrder")},C=this.funnel;return C&&(h.funnel=C),a.A.createGiftOrder(h)})}openPayPalPayment(n){return x(this,arguments,function*({isSubscription:i,offer:_,order:d,useRelativeUrls:h=!0}){var C,E,P,$;try{if(this.processing=!0,this.stripeError=null,(C=_==null?void 0:_.availableDiscount)!=null&&C.discountedOffer&&!((E=_==null?void 0:_.availableDiscount)!=null&&E.coupon)&&(_=_.availableDiscount.discountedOffer),!i&&!d){if(!_)throw new Error("No offer and no order set");d=yield this.createSingleOrder(_)}let T=`${b.A.apiv2baseurl}`;if(i&&_)T+=`/subscriptions/paypal?reference=${_.reference}&billingCompany=${this.billingCompany}&`;else if(d)T+=`/orders/${d.id}/paypal?`;else throw new Error("Missing order or subscription to use openPayPalPayment()");const z=h?"":"https://flat.io",N=`${z}/popup/return?success=true`,J=`${z}/popup/return?success=false`;T+=`returnUrl=${encodeURIComponent(N)}&cancelUrl=${encodeURIComponent(J)}`,m.A.hasAccessToken()&&(T+=`&access_token=${m.A.getAccessToken()}`),W("paypal url: %s",T),yield this.trackEvent({type:"page",category:"payments",name:"paypalPopup"});const k=yield F({title:"PayPal",url:T});return W("popup result: %o",k),k.success==="false"?(this.processing=!1,yield this.trackEvent({type:"page",category:"payments",name:"paypalCanceled"}),!1):(i?yield e.A.activatePaypalSubscription({paypalSubscriptionId:k.subscription_id}):d&&(yield e.A.syncPaypalOrder(d.id)),this.processing=!1,this.onPaymentSuccess(),!0)}catch(T){return(P=T==null?void 0:T.message)!=null&&P.includes("popup_closed")?(this.processing=!1,yield this.trackEvent({type:"page",category:"payments",name:"paypalClosed"}),!1):($=T==null?void 0:T.message)!=null&&$.includes("popup_blocked")?(this.stripeError=A.MR.t("flat:browserPopupBlocked"),this.processing=!1,yield this.trackEvent({type:"page",category:"payments",name:"paypalPopupBlocked"}),!1):(this.processing=!1,this.displayError({error:T}),!1)}})}onPaymentSuccess(){this.funnel&&r.A.push({funnel:{id:this.funnel,completed:!0}}),w.A.remove(V)}markAsNotCompleted(){this.funnel&&r.A.push({funnel:{id:this.funnel,completed:!1}}),w.A.remove(V)}displayError({error:n}){(0,I.O)().displayError({error:n}),(0,u.vV)(n,{logger:"payments"}),this.trackEvent({type:"error",category:"payments",name:"exception",properties:{message:n.message}})}getPayloadCoupon(n){var i,_;return((_=(i=n.availableDiscount)==null?void 0:i.coupon)==null?void 0:_.code)||void 0}loadRecaptcha(){return x(this,null,function*(){var n,i;const _=(i=(n=O.k)==null?void 0:n.config.recaptcha)==null?void 0:i.siteKey;if(!_){const d=new Error("Missing reCAPTCHA site key");throw(0,u.vV)(d),d}return(0,y.Hh)(_)})}get account(){return(0,D.F)().account}get billingCompany(){return(0,p.k)().billingCompany}get billingAddress(){return(0,p.k)().billingAddress}get errorString(){var n;return typeof this.stripeError=="string"?this.stripeError:(n=this.stripeError)==null?void 0:n.message}}},414303:(o,l,t)=>{"use strict";t.d(l,{default:()=>r.a});var e=t(160716),r=t.n(e)},422746:(o,l,t)=>{"use strict";o.exports=t.p+"img/18767ddd26d75325e748.svg"},439934:(o,l,t)=>{"use strict";t.d(l,{A:()=>u});var e=t(355603),r=t(414303),a=t(938793);const m={};m.$style=r.default;const u=(0,a.A)(e.A,[["__cssModules",m]])},448960:(o,l,t)=>{"use strict";o.exports=t.p+"img/299632968e06a45d8808.svg"},478301:(o,l,t)=>{"use strict";o.exports=t.p+"img/d3fd4d996464ae0831ad.svg"},497059:(o,l,t)=>{"use strict";t.d(l,{default:()=>le});var e=t(361744),r=t(555381),a=t(538065);const m={key:0},f=["src"],u=["href"];function A(s,g,S,Q,Y,re){const ee=(0,e.g2)("DialogCloseButton"),Z=(0,e.g2)("ArrowBackwards"),G=(0,e.g2)("UpgradePowerReturn"),q=(0,e.g2)("PowerBadge"),ae=(0,e.g2)("UnlockIcon"),ie=(0,e.g2)("UpgradePlanPicker"),_e=(0,e.g2)("FormPayment"),ue=(0,e.g2)("CheckoutTerms"),de=(0,e.g2)("f-power-button"),pe=(0,e.g2)("ContentDialog"),ne=(0,e.gN)("dompurify-html");return(0,e.uX)(),(0,e.Wv)(pe,{id:"dialogUpgrade",onClose:g[2]||(g[2]=te=>s.closeDialog()),onKeydown:g[3]||(g[3]=(0,r.D$)(()=>{},["stop"])),onKeypress:g[4]||(g[4]=(0,r.D$)(()=>{},["stop"])),"show-header":s.showHeader,"separate-header":!1,"show-footer":s.step==="offers","separate-footer":!1,"full-width-footer":!0,"regular-width":s.dialogWidth,"content-scroll-max-height":"calc(100vh - 60px)","show-close-button":!1,class:(0,a.C4)(s.$style["dialog-upgrade"]),"backdrop-click-handler":s.closeDialog},(0,e.eX)({default:(0,e.k6)(()=>[(0,e.bF)(ee,{class:(0,a.C4)(s.$style["close-btn"]),onClose:s.closeDialog},null,8,["class","onClose"]),s.step==="success"?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,a.C4)(s.$style.success)},[(0,e.bF)(G,{onCta:s.closeDialog},null,8,["onCta"])],2)):((0,e.uX)(),(0,e.CE)("main",{key:1,class:(0,a.C4)(s.$style.main)},[s.step==="offers"?((0,e.uX)(),(0,e.CE)("div",m,[(0,e.Lk)("div",{class:(0,a.C4)(s.$style.info)},[s.isSmallScreen?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,a.C4)([s.$style["offers-title"],s.$style["offers-title-bottom-sheet"]])},(0,a.v_)(s.dialogTitle),3)),(0,e.Lk)("header",{class:(0,a.C4)(s.$style["offers-header"])},[(0,e.Lk)("div",{class:(0,a.C4)(s.$style["unlock-feature"])},[(0,e.bF)(q,{class:(0,a.C4)(s.$style["power-badge"])},null,8,["class"]),s.unlockFeatureIcon?((0,e.uX)(),(0,e.Wv)(ae,{key:0})):(0,e.Q3)("",!0),s.unlockFeatureIcon?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,a.C4)(s.$style["unlock-feature-type"])},[(0,e.Lk)("img",{src:s.unlockFeatureIcon,class:(0,a.C4)(s.$style[`icon_${s.feature}`])},null,10,f)],2)):(0,e.Q3)("",!0)],2),(0,e.Lk)("div",{class:(0,a.C4)(s.$style["feature-title"])},[(0,e.bo)((0,e.Lk)("div",null,null,512),[[ne,s.$t(s.featureTitle)]]),(0,e.bo)((0,e.Lk)("a",{href:s.upgradePageLink},null,8,u),[[ne,s.$t("flat:freemium.many-awesome-features-ios-link")]])],2)],2)],2),(0,e.Lk)("div",null,[(0,e.bF)(ie,{offers:s.offers,loading:s.loading.valueOf(),onSetPlan:s.selectOffer,"selected-plan":s.selectedPlan,"show-duration":!0,"small-cards":!0},null,8,["offers","loading","onSetPlan","selected-plan"])])])):(0,e.Q3)("",!0),s.step==="payment"?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,a.C4)(s.$style.payment)},[(0,e.Lk)("h6",{class:(0,a.C4)(s.$style["form-payment-title"])},(0,a.v_)(s.$t("flat:billing.select-pm")),3),s.selectedPlanObject&&s.payments.stripe?((0,e.uX)(),(0,e.Wv)(_e,{key:`form-sub-${s.selectedPlanObject.reference}`,class:(0,a.C4)(s.$style.formPayment),"display-as-card":!1,offer:s.selectedPlanObject,payments:s.payments,processing:s.processing,success:s.success.valueOf(),onSubmit:g[1]||(g[1]=te=>s.submitPayment(te))},null,8,["class","offer","payments","processing","success"])):(0,e.Q3)("",!0),s.selectedPlanObject?((0,e.uX)(),(0,e.Wv)(ue,{key:1,class:(0,a.C4)(s.$style.terms),subscription:s.selectedPlanObject.subscription,"has-paypal":s.hasPaypal,"pay-with-paypal":s.payWithPaypal,processing:s.processing},null,8,["class","subscription","has-paypal","pay-with-paypal","processing"])):(0,e.Q3)("",!0)],2)):(0,e.Q3)("",!0)],2))]),_:2},[s.step!=="success"?{name:"headerTitle",fn:(0,e.k6)(()=>[(0,e.Lk)("div",{class:(0,a.C4)({[s.$style["offers-title"]]:s.step==="offers"})},(0,a.v_)(s.dialogTitle),3)]),key:"0"}:void 0,s.showPreviousStep?{name:"leftIcon",fn:(0,e.k6)(()=>[(0,e.Lk)("button",{class:(0,a.C4)({[s.$style["back-btn"]]:!0,[s.$style["back-btn-bg"]]:!s.isSmallScreen}),onClick:g[0]||(g[0]=(...te)=>s.goPreviousStep&&s.goPreviousStep(...te))},[(0,e.bF)(Z)],2)]),key:"1"}:void 0,s.showRightIcon?{name:"right",fn:(0,e.k6)(()=>[(0,e.bF)(ee,{"is-bottom-sheets":s.isSmallScreen,onClose:s.closeDialog},null,8,["is-bottom-sheets","onClose"])]),key:"2"}:void 0,s.step==="offers"?{name:"footer",fn:(0,e.k6)(()=>[(0,e.bF)(de,{"show-icon":!1,disabled:s.processing,"default-text":"flat:upgrade.upgrade-cta",class:(0,a.C4)(s.$style["upgrade-now"]),onClick:s.clickPurchaseOffer},null,8,["disabled","class","onClick"])]),key:"3"}:void 0]),1032,["show-header","show-footer","regular-width","class","backdrop-click-handler"])}var O=t(584527),D=t(957993),p=t(86624),M=t(279209),I=t(797727),b=t(318866),w=t(653154),R=t(254872),U=t(763939),c=t(57500),v=t(604969),y=t(612732),L=t(6645),F=t(389841),H=t(227468),B=t(145057),j=t(439934),x=t(684453),W=t(273512),K=Object.defineProperty,V=Object.defineProperties,se=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,_=(s,g,S)=>g in s?K(s,g,{enumerable:!0,configurable:!0,writable:!0,value:S}):s[g]=S,d=(s,g)=>{for(var S in g||(g={}))n.call(g,S)&&_(s,S,g[S]);if(X)for(var S of X(g))i.call(g,S)&&_(s,S,g[S]);return s},h=(s,g)=>V(s,se(g)),C=(s,g,S)=>new Promise((Q,Y)=>{var re=G=>{try{Z(S.next(G))}catch(q){Y(q)}},ee=G=>{try{Z(S.throw(G))}catch(q){Y(q)}},Z=G=>G.done?Q(G.value):Promise.resolve(G.value).then(re,ee);Z((S=S.apply(s,g)).next())});const E="20230530-dialog",P={default:"flat:freemium.generic-title",storageQuota:"flat:freemium.storage-quota-title",customLayout:"flat:freemium.custom-layout-title",notesHeads:"flat:freemium.notes-heads-title",chordsStyle:"flat:freemium.chords-style-title",figuredBass:"flat:freemium.figured-bass-title",customRepeatBarline:"flat:freemium.custom-repeat-barline-title",beamPolicy:"flat:freemium.beam-policy-title",swingPlayback:"flat:freemium.swing-title",advancedPlayback:"flat:freemium.playback-title",trackUpload:"flat:freemium.track-upload-title",history:"flat:freemium.history-title",exportOptions:"flat:freemium.exportOptions-title",exportBranding:"flat:freemium.exportBranding-title",svgExport:"flat:freemium.svgExport-title",pngExport:"flat:freemium.pngExport-title",exportMidi:"flat:freemium.exportMidi-title",exportMusicxml:"flat:freemium.exportMusicxml-title",shortcuts:"flat:freemium.shortcuts-title",tuning:"flat:freemium.tuning-title",kodaly:"flat:freemium.kodaly-title",quarterTone:"flat:freemium.quarterTone-title",instruments:"flat:freemium.instruments-title",transposition:"flat:freemium.transposition-title",advancedVoices:"flat:freemium.advanced-voices-title",mmr:"flat:freemium.mmr-title"},$={customLayout:"layout",advancedPlayback:"playback",history:"storage",exportOptions:"export",exportBranding:"printUnbranded",svgExport:"export",pngExport:"export",exportMidi:"export",exportMusicxml:"export"},T=(0,e.pM)({name:"DialogUpgrade",components:{ContentDialog:p.A,DialogCloseButton:M.A,FPowerButton:H.n$,FormPayment:x.A,UpgradePowerReturn:W.default,CheckoutTerms:j.A,UpgradePlanPicker:B.A,PowerBadge:I.default,ArrowBackwards:O.A,UnlockIcon:D.A},props:{initialStep:{type:String,default:"offers"},displayedFeature:{type:String,default:null}},data(){return{loading:!0,success:!1,step:"offers",selectedPlan:"indivYearly",payments:new F.A}},setup(){const s=(0,y.k)(),g=(0,c.l)(),{helpUrl:S}=(0,L.bP)(g),{goUpgrade:Q}=g,Y=(0,U.F)();return{isSmallScreen:(0,e.EW)(()=>s.isSmallScreen),helpUrl:S,goUpgrade:Q,account:(0,e.EW)(()=>Y.account),accountFeatures:(0,e.EW)(()=>Y.accountFeatures)}},computed:h(d(d({},(0,L.aH)(b.j,["currentDialogParams"])),(0,L.aH)(v.w,["offers"])),{dialogParams(){return this.currentDialogParams},allDisplayableFeatures(){return{storage:{text:"flat:upgrade.storage.title",icon:t(204463),url:`${this.helpUrl}/music-notation-software/history`},instruments:{text:this.$t("flat:upgrade.free.n-instruments",{count:130}),icon:t(422746),url:this.upgradePageLink},transposition:{text:"flat:upgrade.power.transposition",icon:t(784008),url:`${this.helpUrl}/music-notation-software/transpose#transpose-a-selection-of-notes-by-interval-key-or-semi-tones`},layout:{text:"flat:upgrade.layout.title",icon:t(597686),url:`${this.helpUrl}/music-notation-software/notation-features#layout-and-styles`},export:{text:"flat:upgrade.export.title",icon:t(735049),url:`${this.helpUrl}/music-notation-software/print-export`},exportMusicXMLMidi:{text:"flat:upgrade.export.musicxml-midi",icon:t(735049),url:`${this.helpUrl}/music-notation-software/print-export`},printUnbranded:{text:"flat:upgrade.power.unbranded-printing",icon:t(90736),url:`${this.helpUrl}/music-notation-software/print-export`},advancedNotation:{text:"flat:upgrade.notation.title",icon:t(448960),url:this.upgradePageLink},notesHeads:{text:"flat:upgrade.notation.notesHeads",icon:t(175208),url:`${this.helpUrl}/music-notation-software/color-notes`},chordsStyle:{text:"flat:upgrade.notation.chordsStyle",icon:t(384646),url:`${this.helpUrl}/music-notation-software/chords-style`},figuredBass:{text:"flat:upgrade.notation.figuredBass",icon:t(939920),url:`${this.helpUrl}/music-notation-software/figured-bass`},customRepeatBarline:{text:"flat:upgrade.notation.customRepeatBarline",icon:t(301724),url:`${this.helpUrl}/music-notation-software/barlines`},beamPolicy:{text:"flat:upgrade.notation.autoBeaming",icon:t(448960),url:`${this.helpUrl}/music-notation-software/notes-beaming`},swingPlayback:{text:"flat:upgrade.notation.swing",icon:t(744459),url:`${this.helpUrl}/music-notation-software/swing`},playback:{text:"flat:upgrade.audio.title",icon:t(749541),url:`${this.helpUrl}/music-notation-software/playback`},trackUpload:{text:"flat:upgrade.power.track-upload",icon:t(749541),url:`${this.helpUrl}/music-notation-software/synchronize-external-recording`},customInstruments:{text:"flat:upgrade.customInstrus.title",icon:t(109132),url:`${this.helpUrl}/music-notation-software/custom-instruments`},tuning:{text:"flat:upgrade.customInstrus.tuning",icon:t(624624),url:`${this.helpUrl}/music-notation-software/tuning`},kodaly:{text:"flat:upgrade.notation.kodaly",icon:t(605862),url:`${this.helpUrl}/music-notation-software/kodaly`},quarterTone:{text:"flat:upgrade.notation.quarterTone",icon:t(605862),url:`${this.helpUrl}/music-notation-software/quarterTone`},advancedVoices:{text:"flat:upgrade.power.advancedVoices",icon:t(254437),url:`${this.helpUrl}/music-notation-software/swap-voices`},mmr:{text:"flat:upgrade.power.mmr",icon:t(478301),url:`${this.helpUrl}/music-notation-software/mmr`},shortcuts:{text:"flat:upgrade.power.custom-shortcuts",icon:t(78972),url:`${this.helpUrl}/music-notation-software/custom-keyboard-shortcuts`}}},dialogWidth(){return this.step==="success"?400:548},feature(){var s;return((s=this.dialogParams)==null?void 0:s.feature)||this.displayedFeature||"unknownFromDialog"},selectedPlanObject(){return this.offers[this.selectedPlan]},upgradePageLink(){var s;return`/settings/upgrade?ref=${((s=this.dialogParams)==null?void 0:s.ref)||this.feature}`},stripeLoaded(){return this.payments.stripeLoaded},processing(){return this.payments.processing},hasPaypal(){var s;return this.selectedPlanObject&&!((s=this.selectedPlanObject.availableDiscount)!=null&&s.coupon)&&this.payments.hasPaypalForCurrency(this.selectedPlanObject.priceWithVAT.currencyCode)||!1},unlockFeatureIcon(){const s=$[this.feature]||this.feature,g=this.allDisplayableFeatures[s];return g?g.icon:null},featureTitle(){return P[this.feature]||P.default},showHeader(){return this.isSmallScreen||this.step!=="offers"},dialogTitle(){return this.step==="offers"||this.step==="payment"?this.$t("flat:upgrade.power.title-upgrade"):null},showPreviousStep(){return this.step==="payment"},showRightIcon(){return this.step==="offers"&&this.isSmallScreen?!1:this.step!=="success"}}),methods:h(d(d({},(0,L.i0)(v.w,["fetchAllOffers"])),(0,L.i0)(b.j,["hideDialog"])),{closeDialog(){this.success||this.payments.markAsNotCompleted(),this.hideDialog()},localGoUpgrade(){return C(this,null,function*(){this.goUpgrade({ref:this.feature})})},selectOffer(s){this.selectedPlan=s},clickPurchaseOffer(){return C(this,null,function*(){this.payments.processing||this.changeStep("payment")})},submitPayment(s){return C(this,null,function*(){const g={elements:s.elements,returnUrl:`${window.location.origin}/settings/upgrade/return`},S=yield this.payments.confirmPaymentIntent(g);S&&S.status==="succeeded"&&this.paymentSuccess()})},payWithPaypal(){return C(this,null,function*(){if(!this.selectedPlanObject)throw new Error("Active plan not set");(yield this.payments.openPayPalPayment({isSubscription:this.selectedPlanObject.subscription||!1,offer:this.selectedPlanObject}))&&this.paymentSuccess()})},goPaymentStep(s){this.selectOffer(s),this.changeStep("payment")},paymentSuccess(){this.success=!0,this.changeStep("success"),(0,R.jp)({upgraded:!0})},goPreviousStep(){this.step==="payment"&&(this.step="offers"),this.payments.trackEvent({type:"page",category:"upgrade-indiv",name:this.step})},changeStep(s){this.step=s,this.payments.trackEvent({type:"page",category:"upgrade-indiv",name:s})}}),created(){return C(this,null,function*(){var s,g;this.initialStep&&(this.step=this.initialStep),this.payments.initFrontendEvent({version:E,ref:((s=this.dialogParams)==null?void 0:s.ref)||this.feature,content:this.feature}).then(()=>{this.payments.setupAutoTrack(this.$el,"upgrade-indiv")}).catch(Q=>{(0,w.vV)(Q)}),yield this.payments.fetchAllIndivOffers();const S=(g=this.dialogParams)==null?void 0:g.selectedPlan;typeof S=="string"&&v.N.includes(S)&&(this.selectedPlan=S),yield this.payments.loadStripeJs(),this.loading=!1})}});var z=t(812004),N=t.n(z),J=t(938793);const k={};k.$style=N();const le=(0,J.A)(T,[["render",A],["__cssModules",k]])},536105:(o,l,t)=>{"use strict";t.d(l,{default:()=>r.a});var e=t(977844),r=t.n(e)},597686:(o,l,t)=>{"use strict";o.exports=t.p+"img/75e8992eaeb0f81da8e2.svg"},605862:(o,l,t)=>{"use strict";o.exports=t.p+"img/a4540ec2958f35b77cbb.svg"},624624:(o,l,t)=>{"use strict";o.exports=t.p+"img/9907ce1c413751618263.svg"},650053:(o,l,t)=>{"use strict";t.d(l,{A:()=>O});var e=t(361744),r=t(538065),a=t(744056),m=t(92665),f=t(215994),u=t(227468);const A=["data-cy"],O=(0,e.pM)({__name:"FBanner",props:{level:{type:String,default:"default"},title:{type:String,default:null},error:{type:String,default:""},description:{type:String,default:null}},setup(D){return(p,M)=>((0,e.uX)(),(0,e.CE)("div",{class:(0,r.C4)(["felev-small",{[p.$style.banner]:!0,[p.$style[D.level]]:!0}]),"data-cy":`fbanner-${D.level}`},[!p.$slots.icon&&D.level==="warn"?((0,e.uX)(),(0,e.Wv)((0,a.R1)(m.A),{key:0,class:(0,r.C4)(p.$style.warnIcon)},null,8,["class"])):(0,e.Q3)("",!0),!p.$slots.icon&&D.level==="error"?((0,e.uX)(),(0,e.Wv)((0,a.R1)(f.A),{key:1,class:(0,r.C4)(p.$style.errorIcon)},null,8,["class"])):(0,e.RG)(p.$slots,"icon",{key:2}),(0,e.Lk)("div",{class:(0,r.C4)(p.$style.text)},[p.$props.title?((0,e.uX)(),(0,e.CE)("div",{key:0,class:(0,r.C4)(p.$style.title)},(0,r.v_)(p.$t(p.$props.title)),3)):p.$slots.title?((0,e.uX)(),(0,e.CE)("div",{key:1,class:(0,r.C4)(p.$style.title)},[(0,e.RG)(p.$slots,"title")],2)):(0,e.Q3)("",!0),D.error?((0,e.uX)(),(0,e.CE)("div",{key:2,class:(0,r.C4)(p.$style.textError)},(0,r.v_)(D.error),3)):(0,e.Q3)("",!0),p.$props.description?((0,e.uX)(),(0,e.CE)("div",{key:3,class:(0,r.C4)(p.$style.description)},(0,r.v_)(p.$t(p.$props.description)),3)):p.$slots.default?((0,e.uX)(),(0,e.CE)("div",{key:4,class:(0,r.C4)(p.$style.description)},[(0,e.RG)(p.$slots,"default")],2)):(0,e.Q3)("",!0),p.$slots.buttons?((0,e.uX)(),(0,e.Wv)((0,a.R1)(u.eC),{key:5,class:(0,r.C4)(p.$style.btns)},{default:(0,e.k6)(()=>[(0,e.RG)(p.$slots,"buttons")]),_:3},8,["class"])):(0,e.Q3)("",!0)],2)],10,A))}})},707657:(o,l,t)=>{"use strict";t.d(l,{A:()=>u});var e=t(581794),r=t(782111),a=t(938793);const m={};m.$style=r.default;const u=(0,a.A)(e.A,[["__cssModules",m]])},730263:(o,l,t)=>{"use strict";t.d(l,{A:()=>R});var e=t(361744),r=t(538065);const a={class:"main-errors overquota"},m={key:0},f={key:1},u={class:"description"},A={key:0,class:"buttons-container"};function O(U,c,v,y,L,F){const H=(0,e.g2)("loader-spinner"),B=(0,e.g2)("f-button");return(0,e.uX)(),(0,e.CE)("div",a,[y.isEdu?((0,e.uX)(),(0,e.CE)("div",m,[(0,e.bF)(H,{size:32,"line-size":2})])):((0,e.uX)(),(0,e.CE)("div",f,[(0,e.Lk)("h3",null,(0,r.v_)(U.$t("flat:score.over-quota.title")),1),(0,e.Lk)("p",u,[(0,e.eW)((0,r.v_)(U.$t("flat:score.over-quota.downgraded")),1),c[1]||(c[1]=(0,e.Lk)("br",null,null,-1)),(0,e.eW)(" "+(0,r.v_)(U.$t("flat:score.over-quota.please-upgrade")),1)]),y.isInIframe?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",A,[(0,e.bF)(B,{onClick:c[0]||(c[0]=j=>F.goUpgrade()),"default-text":"flat:score.over-quota.cta"})]))]))])}var D=t(743161),p=t(229384),M=t(763939);const I={name:"ScoreError402",components:{LoaderSpinner:D.A},setup(){const U=(0,M.F)();return{isEdu:(0,e.EW)(()=>U.isEdu),isInIframe:p.GZ}},methods:{goUpgrade(){window.location="/settings/upgrade?ref=existing-score-overquota"}},created(){this.isEdu&&(window.location="/license-expired")}};var b=t(938793);const R=(0,b.A)(I,[["render",O]])},735049:(o,l,t)=>{"use strict";o.exports=t.p+"img/3ee9c8caaf756116ae58.svg"},741092:(o,l,t)=>{"use strict";t.d(l,{A:()=>u});var e=t(337057),r=t(367325),a=t(938793);const m={};m.$style=r.default;const u=(0,a.A)(e.A,[["__cssModules",m]])},744459:(o,l,t)=>{"use strict";o.exports=t.p+"img/37fb2910f7578a2a8751.svg"},749541:(o,l,t)=>{"use strict";o.exports=t.p+"img/2063552ac89b74d9272e.svg"},759913:(o,l,t)=>{"use strict";t.d(l,{A:()=>u});var e=t(842714),r=t(536105),a=t(938793);const m={};m.$style=r.default;const u=(0,a.A)(e.A,[["__cssModules",m]])},762617:(o,l,t)=>{"use strict";t.d(l,{K:()=>R});var e=t(361744),r=t(538065),a=Object.defineProperty,m=Object.defineProperties,f=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,D=(c,v,y)=>v in c?a(c,v,{enumerable:!0,configurable:!0,writable:!0,value:y}):c[v]=y,p=(c,v)=>{for(var y in v||(v={}))A.call(v,y)&&D(c,y,v[y]);if(u)for(var y of u(v))O.call(v,y)&&D(c,y,v[y]);return c},M=(c,v)=>m(c,f(v));const I={name:"FSpacing"},R=(0,e.pM)(M(p({},I),{props:{spacing:{default:4},direction:{}},setup(c){return(v,y)=>((0,e.uX)(),(0,e.CE)("div",{style:(0,r.Tr)({height:v.direction==="vertical"?`${v.spacing}px`:0,width:v.direction==="horizontal"?`${v.spacing}px`:0,flex:`0 0 ${v.spacing}px`})},null,4))}})),U=null},784008:(o,l,t)=>{"use strict";o.exports=t.p+"img/f0b82dfd555babf06c74.svg"},802755:(o,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>u});var e=t(814779),r=t.n(e),a=t(927860),m=t.n(a),f=m()(r());f.push([o.id,`.dialog-upgrade_xn9rd{position:relative}.success_rX9q3{display:flex;flex-direction:column;align-items:center;padding:16px 16px 24px}.main_Hners{padding:0 24px 24px}.back-btn_K7uiF{display:flex;justify-content:center;align-items:center;width:24px;height:24px}.back-btn_K7uiF svg{width:16px;height:16px}.back-btn-bg_x9hIV{background-color:var(--f-subdue-10);border-radius:50%;padding:4px;border:none;cursor:pointer;margin-right:24px}.back-btn-bg_x9hIV svg{fill:var(--f-subdue);width:24px;height:24px}.close-btn_kP7gn{position:absolute;right:16px;top:16px}@media screen and (min-width: 768px){.info_FFLfo{margin-top:16px}}.offers-title_F4_wI{font-family:var(--f-font-heading);font-size:24px;text-align:center;color:var(--f-ink)}.offers-title_F4_wI.offers-title-bottom-sheet_VIgog{line-height:32px}.unlock-feature_qrtFo{display:flex;justify-content:center;align-items:center;margin:16px 0}.unlock-feature_qrtFo .power-badge_PuyiG,.unlock-feature_qrtFo .unlock-feature-type_u7Myo{width:40px;height:40px}.unlock-feature_qrtFo .power-badge_PuyiG{margin-right:8px}.unlock-feature_qrtFo .unlock-feature-type_u7Myo{margin-left:8px;background-color:var(--f-ink);border-radius:100%;display:flex;align-items:center;justify-content:center}.unlock-feature_qrtFo .unlock-feature-type_u7Myo img{filter:brightness(10);max-width:24px}.unlock-feature_qrtFo .unlock-feature-type_u7Myo img.icon_notesHeads_IrnKY{filter:none}.feature-title_EbZtJ{text-align:center;color:var(--f-subdue);font-weight:400;font-size:14px;line-height:20px;margin:0 32px 32px}.feature-title_EbZtJ a{color:var(--f-primary);text-decoration:underline;font-weight:600}.features_YrEY6{list-style:none;text-align:left;margin-top:24px;margin-bottom:24px}.features_YrEY6 li{display:flex;align-items:center;min-height:41px;color:var(--f-ink);font-weight:400;font-size:12px;line-height:16px;border-bottom:1px dashed var(--f-grey-2);padding-top:8px;padding-bottom:8px}.features_YrEY6 li img{width:24px;height:24px;margin-right:10px}.features_YrEY6 li a{text-decoration:underline}li.more-features_xzoV7 a{text-decoration:none}li.more-features_xzoV7 strong{font-weight:600;color:var(--f-primary);text-decoration:underline}.upgrade-now_VuEyB{width:100%}.form-payment-title_N8Pdd{font-weight:600;font-size:16px;line-height:22px;color:var(--f-ink);margin-top:8px;margin-bottom:24px}.terms_vdPY3{margin-top:16px}
`,""]),f.locals={"dialog-upgrade":"dialog-upgrade_xn9rd",success:"success_rX9q3",main:"main_Hners","back-btn":"back-btn_K7uiF","back-btn-bg":"back-btn-bg_x9hIV","close-btn":"close-btn_kP7gn",info:"info_FFLfo","offers-title":"offers-title_F4_wI","offers-title-bottom-sheet":"offers-title-bottom-sheet_VIgog","unlock-feature":"unlock-feature_qrtFo","power-badge":"power-badge_PuyiG","unlock-feature-type":"unlock-feature-type_u7Myo",icon_notesHeads:"icon_notesHeads_IrnKY","feature-title":"feature-title_EbZtJ",features:"features_YrEY6","more-features":"more-features_xzoV7","upgrade-now":"upgrade-now_VuEyB","form-payment-title":"form-payment-title_N8Pdd",terms:"terms_vdPY3"};const u=f},812004:(o,l,t)=>{var e=t(802755);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[o.id,e,""]]),e.locals&&(o.exports=e.locals);var r=t(929234).A,a=r("0229cefa",e,!0,{})},838145:(o,l,t)=>{"use strict";t.d(l,{A:()=>f});var e=t(550594),r=t(328010),a=(u,A,O)=>new Promise((D,p)=>{var M=w=>{try{b(O.next(w))}catch(R){p(R)}},I=w=>{try{b(O.throw(w))}catch(R){p(R)}},b=w=>w.done?D(w.value):Promise.resolve(w.value).then(M,I);b((O=O.apply(u,A)).next())});const f={createGiftOrder(u){return e.A.post(`${e.A.apiv2baseurl}/gifts`,u)},getGift(u){return e.A.get(`${e.A.apiv2baseurl}/gifts/${u}`)},sendGiftByEmail(u,A){return a(this,null,function*(){yield e.A.post(`${e.A.apiv2baseurl}/gifts/${u}/send`,{email:A})})},getGuestAccount(u){return a(this,arguments,function*({name:A,email:O,key:D}){const p=yield e.A.postResponse(`${e.A.apiv2baseurl}/auth/guest`,{name:A,email:O,key:D});return p.headers["x-csrf-token"]&&r.A.setCsrfToken(p.headers["x-csrf-token"]),p.data})}}},842714:(o,l,t)=>{"use strict";t.d(l,{A:()=>e.A});var e=t(650053)},939920:(o,l,t)=>{"use strict";o.exports=t.p+"img/86d49118e4144fa0d4d0.svg"},959569:(o,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>u});var e=t(814779),r=t.n(e),a=t(927860),m=t.n(a),f=m()(r());f.push([o.id,`.banner_JBl0_{display:flex;align-items:flex-start;background:var(--f-bg-0);border-radius:0 4px 4px 0;border-left:4px solid var(--f-subdue-10);box-shadow:0 0 0 1px #363c500a,0 1px 4px #363c5024;padding:24px 24px 24px 16px}.banner_JBl0_>img,.banner_JBl0_>svg{flex:0 0 24px;width:24px;height:24px;margin-right:16px}.title_G9Gog{font-weight:600;font-size:16px;line-height:24px;color:var(--f-ink)}.textError_FnJgZ{background:#ff1c3c14;font-size:16px;line-height:24px;color:var(--f-safe-red);margin-top:8px}.description_nMtl4{font-size:16px;line-height:24px;color:var(--f-ink)}.description_nMtl4 a{color:var(--f-primary);text-decoration:underline}.description_nMtl4 p{line-height:inherit}.btns_mULaa{margin-top:24px}.textError_FnJgZ+.description_nMtl4,.title_G9Gog+.description_nMtl4{margin-top:8px}.info_jwLRw{border-left:4px solid var(--f-subdue-10)}.warn_yiK2c{border-left:4px solid var(--f-yellow)}.error_XGaEe{border-left:4px solid var(--f-safe-red)}.warnIcon_EXS4G{fill:var(--f-yellow)}.errorIcon_zfFgq{fill:var(--f-safe-red)}
`,""]),f.locals={banner:"banner_JBl0_",title:"title_G9Gog",textError:"textError_FnJgZ",description:"description_nMtl4",btns:"btns_mULaa",info:"info_jwLRw",warn:"warn_yiK2c",error:"error_XGaEe",warnIcon:"warnIcon_EXS4G",errorIcon:"errorIcon_zfFgq"};const u=f},977844:(o,l,t)=>{var e=t(959569);e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[o.id,e,""]]),e.locals&&(o.exports=e.locals);var r=t(929234).A,a=r("2b21e42e",e,!0,{})}}]);})();


//# debugId=8afb0c46-7366-5dce-9762-8fe3b4e6cb1f


!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7050fdbb-9a20-5acd-ba59-169d79044ddb")}catch(e){}}();
(()=>{/*! Copyright (c) 2025 Tutteo Ltd. */(self.webpackChunk_flat_flat=self.webpackChunk_flat_flat||[]).push([[12081,51160],{252922:()=>{/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function($){"use strict";if("Element"in $){var L="classList",h="prototype",m=$.Element[h],v=Object,B=String[h].trim||function(){return this.replace(/^\s+|\s+$/g,"")},N=Array[h].indexOf||function(d){for(var p=0,g=this.length;p<g;p++)if(p in this&&this[p]===d)return p;return-1},C=function(d,p){this.name=d,this.code=DOMException[d],this.message=p},P=function(d,p){if(p==="")throw new C("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(p))throw new C("INVALID_CHARACTER_ERR","The token must not contain space characters.");return N.call(d,p)},w=function(d){for(var p=B.call(d.getAttribute("class")||""),g=p?p.split(/\s+/):[],y=0,T=g.length;y<T;y++)this.push(g[y]);this._updateClassName=function(){d.setAttribute("class",this.toString())}},s=w[h]=[],x=function(){return new w(this)};if(C[h]=Error[h],s.item=function(d){return this[d]||null},s.contains=function(d){return~P(this,d+"")},s.add=function(){var d=arguments,p=0,g=d.length,y,T=!1;do y=d[p]+"",~P(this,y)||(this.push(y),T=!0);while(++p<g);T&&this._updateClassName()},s.remove=function(){var d=arguments,p=0,g=d.length,y,T=!1,D;do for(y=d[p]+"",D=P(this,y);~D;)this.splice(D,1),T=!0,D=P(this,y);while(++p<g);T&&this._updateClassName()},s.toggle=function(d,p){var g=this.contains(d),y=g?p!==!0&&"remove":p!==!1&&"add";return y&&this[y](d),p===!0||p===!1?p:!g},s.replace=function(d,p){var g=P(d+"");~g&&(this.splice(g,1,p),this._updateClassName())},s.toString=function(){return this.join(" ")},v.defineProperty){var R={get:x,enumerable:!0,configurable:!0};try{v.defineProperty(m,L,R)}catch(d){(d.number===void 0||d.number===-2146823252)&&(R.enumerable=!1,v.defineProperty(m,L,R))}}else v[h].__defineGetter__&&m.__defineGetter__(L,x)}}(self),function(){"use strict";var $=document.createElement("_");if($.classList.add("c1","c2"),!$.classList.contains("c2")){var L=function(m){var v=DOMTokenList.prototype[m];DOMTokenList.prototype[m]=function(B){var N,C=arguments.length;for(N=0;N<C;N++)B=arguments[N],v.call(this,B)}};L("add"),L("remove")}if($.classList.toggle("c3",!1),$.classList.contains("c3")){var h=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(m,v){return 1 in arguments&&!this.contains(m)==!v?v:h.call(this,m)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(m,v){var B=this.toString().split(" "),N=B.indexOf(m+"");~N&&(B=B.slice(N),this.remove.apply(this,B),this.add(v),this.add.apply(this,B.slice(1)))}),$=null}())},254007:($,L,h)=>{"use strict";h.d(L,{A:()=>B});var m=h(163266),v=h(730681);function B(N,C,P){const w=(0,m.A)(N,C),s=(0,m.A)(N,P),x=w-s;if(x!==0)return x;const R=(0,v.A)(N,C),d=(0,v.A)(N,P);return R-d}},286060:($,L,h)=>{"use strict";h.d(L,{default:()=>R});var m=h(182879),v=h(419262),B=h(220650),N=h(306967),C=h(91960);const P={};P[m.A.ADD]=v.A,P[m.A.REMOVE]=B.A,P[m.A.UPDATE]=N.A;const w=function(d,p,g,y){this.init(d,p,g,y)},s=w.prototype;s.init=function(d,p,g,y){this.measuresContainer=d,this.measureProvider=p,this.drawingContext=g,this.scoreDataCache=y,this.logger=null},s.update=function(d){return this.reset(),d.forEach(this.performAction,this),this.logger.getUpdateData()},s.reset=function(){this.logger=new C.A},s.performAction=function(d){this.getUpdater(d.type).perform(d,this.logger)},s.getUpdater=function(d){const p=x(d);return new p(this.measuresContainer,this.measureProvider,this.drawingContext,this.scoreDataCache)};const x=function(d){return P[d]},R=w},322259:($,L)=>{"use strict";var h;L.b=m;function m(v){var B=arguments[1]===void 0?{}:arguments[1],N=B.algorithm,C=N===void 0?"sha1":N,P=B.inputEncoding,w=P===void 0?"utf8":P,s=B.outputEncoding,x=s===void 0?"hex":s,R=B.crypto,d=B.sets,p=R.createHash(C),g=function(){for(var T=arguments.length,D=Array(T),H=0;H<T;H++)D[H]=arguments[H];return p.update(D.join(":"),w)},y=function(T){return m(T,{algorithm:C,inputEncoding:w,outputEncoding:x,crypto:R,sets:d})};switch(!0){case typeof v=="undefined":g("u");break;case v===null:g("n");break;case typeof v=="boolean":case v instanceof Boolean:g("f",v.valueOf());break;case typeof v=="number":case v instanceof Number:g("i",""+v);break;case typeof v=="string":case v instanceof String:g("s",""+v);break;case typeof v=="symbol":case v instanceof Symbol:g("S",""+v);break;case v instanceof Date:g("d",v.toISOString());break;case v instanceof RegExp:g("x",""+v);break;case v instanceof Function:g("F",v.toString());break;case Array.isArray(v):d?(g("<"),v.map(y).sort().forEach(function(T){return g("A",T)}),g(">")):(g("["),v.forEach(function(T){return g("a",y(T))}),g("]"));break;default:g("{"),Object.keys(v).sort().forEach(function(T){return g("k",y(T),"v",y(v[T]))}),g("}");break}return p.digest(x)}h={value:!0}},341715:($,L,h)=>{"use strict";var m,v=function(P){return P&&P.__esModule?P.default:P};L.digest=C;var B=h(322259).b,N=v(h(414086));function C(P){var w=arguments[1]===void 0?{}:arguments[1],s=w.algorithm,x=s===void 0?"sha1":s,R=w.inputEncoding,d=R===void 0?"utf8":R,p=w.outputEncoding,g=p===void 0?"hex":p,y=w.crypto,T=y===void 0?N:y,D=w.sets;return B(P,{algorithm:x,inputEncoding:d,outputEncoding:g,crypto:T,sets:D})}m={value:!0}},370837:function($,L,h){var m,v,B;(function(N,C){v=[],m=C,B=typeof m=="function"?m.apply(L,v):m,B!==void 0&&($.exports=B)})(this,function(){"use strict";function N(d,p){return typeof p=="undefined"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function C(d,p,g){var y=new XMLHttpRequest;y.open("GET",d),y.responseType="blob",y.onload=function(){R(y.response,p,g)},y.onerror=function(){console.error("could not download file")},y.send()}function P(d){var p=new XMLHttpRequest;p.open("HEAD",d,!1);try{p.send()}catch(g){}return 200<=p.status&&299>=p.status}function w(d){try{d.dispatchEvent(new MouseEvent("click"))}catch(g){var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(p)}}var s=window.window===window?window:typeof self=="object"&&self.self===self?self:typeof h.g=="object"&&h.g.global===h.g?h.g:void 0,x=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),R=s.saveAs||(window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!x?function(d,p,g){var y=s.URL||s.webkitURL,T=document.createElement("a");p=p||d.name||"download",T.download=p,T.rel="noopener",typeof d=="string"?(T.href=d,T.origin===location.origin?w(T):P(T.href)?C(d,p,g):w(T,T.target="_blank")):(T.href=y.createObjectURL(d),setTimeout(function(){y.revokeObjectURL(T.href)},4e4),setTimeout(function(){w(T)},0))}:"msSaveOrOpenBlob"in navigator?function(d,p,g){if(p=p||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(N(d,g),p);else if(P(d))C(d,p,g);else{var y=document.createElement("a");y.href=d,y.target="_blank",setTimeout(function(){w(y)})}}:function(d,p,g,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof d=="string")return C(d,p,g);var T=d.type==="application/octet-stream",D=/constructor/i.test(s.HTMLElement)||s.safari,H=/CriOS\/[\d]+/.test(navigator.userAgent);if((H||T&&D||x)&&typeof FileReader!="undefined"){var et=new FileReader;et.onloadend=function(){var nt=et.result;nt=H?nt:nt.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=nt:location=nt,y=null},et.readAsDataURL(d)}else{var G=s.URL||s.webkitURL,ot=G.createObjectURL(d);y?y.location=ot:location.href=ot,y=null,setTimeout(function(){G.revokeObjectURL(ot)},4e4)}});s.saveAs=R.saveAs=R,$.exports=R})},380981:($,L,h)=>{"use strict";h.d(L,{A:()=>Yt});var m=h(364842),v=h(732799),B=h(331751),N=h(123868),C=h(454921),P=h(726042),w=h(737903),s=h(493596),x=h(249394),R=h(100040),d=h(790850),p=h(801370),g=h(98710),y=h(367279),T=h(658140),D=h(804541),H=h(604824),et=h(701933),G=h(760210),ot=h(860984),nt=h(225723),st=(r,o,c)=>new Promise((M,A)=>{var F=k=>{try{X(c.next(k))}catch(z){A(z)}},K=k=>{try{X(c.throw(k))}catch(z){A(z)}},X=k=>k.done?M(k.value):Promise.resolve(k.value).then(F,K);X((c=c.apply(r,o)).next())});const S=function(r,o,c,M,A){this.init(r,o,c,M,A)},E=S.prototype;E.init=function(r,o,c,M,A){this.measuresSliceProvider=r,this.drawingContext=o,this.metrics=c,this.shardsContainer=M,this.systemBreakPolicy=A,this.shardIdx=0},E.setShardIdx=function(r){this.shardIdx=r},E.hasRemaining=function(){return this.measuresSliceProvider.hasRemaining()},E.getShard=function(){return st(this,null,function*(){const r=yield this.loadNextSliceShard();r.linkGroupBracket(),r.updateGroupBracketsOffsets();const o=this.metrics.availableWidth,c=!this.measuresSliceProvider.hasRemaining();return(0,ot.A)(r,o,c),r.reloadAllCrossMeasures(),r.dropVerticalFormatting(),r.updateCrossMeasuresHorizontalDisplayForVerticalComputation(),r.dispatchVerticalFormatting(),r.hasEventsRects()&&(r.autoSetExternalSystemMeasureGaps(),r.updateMeasuresEventsRects()),r.needUpdateFormatting=!1,r})},E.loadNextSliceShard=function(){return st(this,null,function*(){const r=yield this.measuresSliceProvider.getSlice(),o=r.getDisplayedSystems();(0,nt.A)(o),o.forEach(M=>M.transferHeaderExternalSpace()),o.forEach(U);const c=this.createShard();return o.forEach(c.pushSystem,c),r.addShard(c),c.updateChildrenBindings(),c})},E.createShard=function(){const r=new G.A;r.setDrawingContext(this.drawingContext),r.setSystemBreakPolicy(this.systemBreakPolicy),r.setMetrics(this.metrics),r.height=null;const o=this.shardIdx===0;return r.setIsFirst(o),r.setIdx(this.shardIdx),this.metrics.hasSingleStaff||r.createVerticalLine(),this.shardsContainer.push(r),this.shardIdx++,r},E.handBackShards=function(r){if(r.length>0)throw new m.default("There should be no shards handed back to the DynamicShardProvider")},E.clearCache=function(){},E.getNbCachedShards=function(){return 0},E.updateCachedShardIdxFrom=function(){};function U(r,o){const c=O(o);r.setLocation(c)}function O(r){return r===0?et.A.FIRST_OF_SLICE:et.A.OTHER}const V=S;var q=h(269352);const it=function(){this.init()};it.NAME="pageContent";const l=it.prototype;l.name=it.NAME,l.init=function(){this.drawingContext=null,this.metrics=null,this.idx=null,this.posY=null,this.isLast=null,this.isFirst=null,this.shard=null,this.group=null,this.parent=null},l.setDrawingContext=function(r){this.drawingContext=r},l.setMetrics=function(r){this.metrics=r},l.setIsLast=function(r){this.isLast=r},l.setIsFirst=function(r){this.isFirst=r},l.setIdx=function(r){this.idx=r},l.setParent=function(r){this.parent=r},l.setPosition=function(r){this.posY=r},l.pushShard=function(r){if(this.shard!==null)throw new m.default("Unexpected");this.shard=r,r.setPageContent(this);const o=this.getGroup();r.setParent(o)},l.getGroup=function(){return this.group===null&&(this.group=new q.A("g"),this.group.attr("class",this.name)),this.group},l.recomputeShardsHeight=function(){},l.unshiftShards=function(r){if(r.length>0)throw new m.default("Should not push shards to DynamicPageContent")},l.popOverflowShards=function(){return[]},l.drawContentRec=function(){this.updateVerticalDisplay(),this.shard.drawContentRec()},l.updateVerticalDisplay=function(){if(this.isEmpty())return;this.shard.setPosition(0),this.shard.move()},l.move=function(){this.getGroup().attr("transform",`translate(0, ${this.posY})`)},l.bindToParent=function(){this.parent.append(this.group)},l.resetGeometries=function(){this.shard.resetGeometries()},l.getGeometries=function(){return this.shard.getAllMeasuresGeometries()},l.getStructure=function(){const r=this.getShardsStructures();return{pageIdx:this.idx,shards:r}},l.getShardsStructures=function(){return[this.shard.getStructure()]},l.getIdx=function(){return this.idx},l.getIdxInPage=function(r){if(r!==this.shard){const o="The shard is not in this page";throw new m.default("NotInPage",o)}return 0},l.removeShard=function(r){if(r!==0)throw new m.default;const o=this.shard;this.shard=null,o.unbindFromParent(),o.setParent(null)},l.isEmpty=function(){return this.shard===null},l.getWidth=function(){return this.metrics.availableWidth},l.getHeight=function(){return this.shard.getHeight()},l.getLastShard=function(){if(this.shard===null)throw new m.default("Unexpected");return this.shard},l.updateChildrenBindings=function(){this.shard.needUpdateBinding()&&this.shard.updateBinding()};const _=it;var Q=h(472838),ut=(r,o,c)=>new Promise((M,A)=>{var F=k=>{try{X(c.next(k))}catch(z){A(z)}},K=k=>{try{X(c.throw(k))}catch(z){A(z)}},X=k=>k.done?M(k.value):Promise.resolve(k.value).then(F,K);X((c=c.apply(r,o)).next())});const dt=function(r,o,c,M){this.init(r,o,c,M)},ct=dt.prototype;ct.init=function(r,o,c,M){this.shardProvider=r,this.drawingContext=o,this.metrics=c,this.pagesContainer=M,this.pageIdx=0},ct.setPageIdx=function(r){this.pageIdx=r},ct.hasRemaining=function(){return this.shardProvider.hasRemaining()},ct.getPageContent=function(){return ut(this,null,function*(){const r=this.createPageContent();return yield this.fillPageContent(r),this.pageIdx++,r.updateChildrenBindings(),r})},ct.fillPageContent=function(r){return ut(this,null,function*(){if(r.isEmpty()){const c=yield this.getShard();r.pushShard(c)}const o=this.isLast();r.setIsLast(o)})},ct.getShard=function(){return ut(this,null,function*(){return this.drawingContext.isAsynchronous()&&(yield(0,Q.default)()),yield this.shardProvider.getShard()})},ct.createPageContent=function(){const r=new _;r.setDrawingContext(this.drawingContext);const o=this.pageIdx===0;return r.setIsFirst(o),r.setMetrics(this.metrics),r.setIdx(this.pageIdx),this.pagesContainer.push(r),r},ct.isLast=function(){return!this.shardProvider.hasRemaining()};const Lt=dt,yt=function(){this.init()};yt.NAME="pageIntraMargin";const b=yt.prototype;b.name=yt.NAME,b.init=function(){this.width=null,this.height=null,this.content=null,this.group=null,this.parent=null,this.svgRoot=null,this.drawn=!1},b.setWidth=function(r){this.width=r},b.setContent=function(r){this.content=r},b.setParent=function(r){this.parent=r},b.setSvgRoot=function(r){this.svgRoot=r},b.format=function(){this.content.setPosition(0),this.content.move()},b.drawContentRec=function(){this.isRendered()||(this.render(),this.content.bindToParent()),this.content.drawContentRec()},b.isRendered=function(){return this.group!==null},b.render=function(){this.group=new q.A("g"),this.group.attr("class",this.name),this.content.setParent(this.group)},b.bindToParent=function(){this.drawn||(this.parent.append(this.group),this.drawn=!0)},b.unbind=function(){this.drawn&&(this.group.removeFromParent(),this.drawn=!1)},b.resetGeometries=function(){this.content.resetGeometries()},b.getGeometries=function(){return this.content.getGeometries()},b.getStructure=function(){return this.content.getStructure()},b.getHeight=function(){return this.content.getHeight()},b.hasSvgRoot=function(){return this.svgRoot!==null},b.getSvgRoot=function(){return this.svgRoot},b.hasParent=function(){return this.parent!==null},b.getParent=function(){return this.parent};const rt=yt;var vt=(r,o,c)=>new Promise((M,A)=>{var F=k=>{try{X(c.next(k))}catch(z){A(z)}},K=k=>{try{X(c.throw(k))}catch(z){A(z)}},X=k=>k.done?M(k.value):Promise.resolve(k.value).then(F,K);X((c=c.apply(r,o)).next())});const It=function(r,o){this.init(r,o)},gt=It.prototype;gt.init=function(r,o){this.pageContentProvider=r,this.pageMetrics=o,this.pageIdx=0},gt.hasRemaining=function(){return this.pageContentProvider.hasRemaining()},gt.getPage=function(){return vt(this,null,function*(){const r=new rt,o=this.getWidth();r.setWidth(o);const c=yield this.pageContentProvider.getPageContent();return r.setContent(c),this.pageIdx++,r.format(),r})},gt.getWidth=function(){return this.pageMetrics.getAvailableWidth(this.pageIdx)};const Mt=It;var xt=h(593566);const ft=function(r,o){const c=r.getAvailableWidth(),M=wt(o),A=At(o),F=o.hasSingleStaff(),K={availableWidth:c,firstSliceHeaderWidth:M,otherSlicesHeaderWidth:A,unlimitedHeight:!0,hasSingleStaff:F};return r.setInnerMetrics(K),K},wt=function(r){return Ct(r,!0)},At=function(r){return Ct(r,!1)},Ct=function(r,o){const c=r.getAllSystems(o);return r.insertGroups(c),(0,nt.A)(c),(0,xt.A)(c,r.drawingContext),c.filter(F=>F.hasGroupStart()).forEach(F=>{F.getGroupBracket().refreshGroupBracketOffset()}),c.forEach(Bt),c.map(pt).reduce(P.default.max2)},Bt=function(r){const o=r.content.getNominalInnerHeight();r.header.setNominalHeight(o)},pt=function(r){return r.getHeaderWidth()},mt=ft,Dt=function(){this.init()},Rt=Dt.prototype;Rt.init=function(){},Rt.build=function({scoreDataCache:r,containers:o,drawingContext:c,pageOpts:M,pageMetrics:A,measureNumberingPolicy:F,startMeasureIdx:K}){const X=new g.A(M),k=new y.A({scoreDataCache:r,measureRenderer:X,drawingContext:c,startMeasureIdx:K,measureNumberingPolicy:F}),z=new T.A(r,c,M),lt=mt(A,z),Tt=new H.A(M.systemBreakConfig),Ut=new D.A({measureProvider:k,systemProvider:z,drawingContext:c,metrics:lt,systemBreakPolicy:Tt,measuresSlicesContainer:o.measuresSlices,measureColumnsContainer:o.measureColumns}),Ot=new V(Ut,c,lt,o.shards,Tt),Ht=new Lt(Ot,c,lt,o.pages),jt=new Mt(Ht,A);return this.measureProvider=k,this.sliceProvider=Ut,this.shardProvider=Ot,this.measureProvider=k,this.contentProvider=Ht,jt};const Et=Dt;var _t=h(615898);const Nt=.5,Pt=function(r,o,c){this.init(r,o,c)},tt=Pt.prototype;tt.init=function(r,o,c){this.scoreData=r,this.drawingContext=o,this.opts=c,this.nominalWidth=null,this.width=null,this.innerMetric=null},tt.setScoreData=function(r){this.scoreData=r},tt.setDrawingContext=function(r){this.drawingContext=r},tt.setInnerMetrics=function(r){this.innerMetric=r},tt.getAvailableWidth=function(){const r=this.getWidth(),o=this.getMarginSize();return r-o*2},tt.getMarginSize=function(){return this.drawingContext.getSpaceSize()*Nt},tt.getWidth=function(){return this.width===null&&(this.width=this.getNominalWidth()),this.width},tt.getNominalWidth=function(){return this.nominalWidth===null&&(this.nominalWidth=this.getMinimalAvailableWidth()),this.nominalWidth},tt.getMinimalAvailableWidth=function(){const r=this.getSideAvailableWidth(_t.A.TYPE_ODD),o=this.getSideAvailableWidth(_t.A.TYPE_EVEN);return Math.min(r,o)},tt.getSideAvailableWidth=function(r){const c=this.scoreData.getPageUsableSize(r).width;return this.tenthsToLocal(c)},tt.tenthsToLocal=function(r){const o=this.drawingContext.getSpaceSize();return r/10*o},tt.resetWidthToNominal=function(){const r=this.getNominalWidth();this.setWidth(r)},tt.setWidth=function(r){this.width=r,this.innerMetric.availableWidth=this.getAvailableWidth()};const at=Pt;var St=h(200608),kt=h(562761),ht=h(341550),Ft=h(563711),n=h(918705),t=h(364463),e=h(472744),i=h(21738),a=h(131220),u=h(409200),f=h(665280),W=h(77913),Z=h(811048),j=h(878639),J=(r,o,c)=>new Promise((M,A)=>{var F=k=>{try{X(c.next(k))}catch(z){A(z)}},K=k=>{try{X(c.throw(k))}catch(z){A(z)}},X=k=>k.done?M(k.value):Promise.resolve(k.value).then(F,K);X((c=c.apply(r,o)).next())});const Y="page",Wt="responsiveBottomMargin",bt=function(r,o,c,M,A,F){this.init(r,o,c,M,A,F)},I=bt.prototype;(0,Z.A)(I),I.getName=function(){return"ResponsiveLayout"},I.init=function(r,o,c,M,A,F){this.displayLockedState=!1,this.queue=F||(0,e.A)(),A=A||{},A.isResponsiveLayout=!0,this.scoreData=r,this.editionId=this.scoreData.getEditionId();const K=(0,v.A)(r);(0,C.A)(A,r),A.respectSystemBreaks?A.systemBreakConfig=this.scoreData.getSystemBreakPolicy():A.systemBreakConfig=s.A.createNoLimitConfig();const X=this.scoreData.getDefaults();typeof A.hideEmptyParts=="undefined"&&(A.hideEmptyParts=this.scoreData.getHideEmptyParts()),(0,N.A)(X,A),this.drawingContext=new B.A(c,M,K,o,A);const k=Gt(A),z=new n.A(A.measureNumberingPolicy,A.hasPickup);this.measuresContainer=new St.A(k),this.slicesContainer=new kt.A,this.shardsContainer=new ht.A,this.pagesContainer=new Ft.A,this.pageMetrics=new at(r,this.drawingContext,A);const lt=new Et,Tt={measureColumns:this.measuresContainer,measuresSlices:this.slicesContainer,shards:this.shardsContainer,pages:this.pagesContainer},Ut=(0,d.A)(r,A);this.scoreDataCache=new p.A(Ut,A),this.pageProvider=lt.build({scoreDataCache:this.scoreDataCache,containers:Tt,drawingContext:this.drawingContext,pageMetrics:this.pageMetrics,pageOpts:A,measureNumberingPolicy:z,startMeasureIdx:k}),this.measureProvider=lt.measureProvider,this.sliceProvider=lt.sliceProvider,this.shardProvider=lt.shardProvider,this.measureProvider=lt.measureProvider,this.contentProvider=lt.contentProvider,this.pages=[],this.scaling=x.A.DEFAULT};const Gt=function(r){let o=0;return R.A.isValid(r.measureNumberingStart)&&(o=r.measureNumberingStart-1),typeof r.firstMeasureIdx=="number"&&(o+=r.firstMeasureIdx),r.hasPickup&&o--,o};I.getPageSize=function(r){const o=this.pageMetrics.getMarginSize(),c=this.pageMetrics.getWidth();let A=this.pages[r].getHeight();return A+=o*2,{height:A,width:c,marginTop:o,marginLeft:o,marginRight:o}},I.getSpaceSize=function(){return this.drawingContext.getSpaceSize()},I.hasRemaining=function(){return this.pageProvider.hasRemaining()},I.fillNextPage=function(r,o){return this.queue.add(()=>J(this,null,function*(){this.lockDisplay("_responsiveLayout.fillNextPage"),j.HAS_PERF_API&&performance.mark("adagio.fillNextPage.s");try{yield this._fillNextPage(r,o),this.unlockDisplay(),j.HAS_PERF_API&&(performance.mark("adagio.fillNextPage.e"),performance.measure("adagio.fillNextPage","adagio.fillNextPage.s","adagio.fillNextPage.e"))}catch(c){throw this.unlockDisplay(),j.HAS_PERF_API&&(performance.mark("adagio.fillNextPage.e"),performance.measure("adagio.fillNextPage","adagio.fillNextPage.s","adagio.fillNextPage.e")),c}}))},I.lockDisplay=function(r){if(this.scoreData.lockDataRead(this),this.displayLockedState)throw this.scoreData.unlockDataRead(this),new m.default(`An operation is already ongoing on the score: "${this.displayLockedState}"`);this.displayLockedState=r||!0},I.unlockDisplay=function(){this.scoreData.unlockDataRead(this),this.displayLockedState=!1},I._fillNextPage=function(r,o){return J(this,null,function*(){typeof o=="undefined"&&(o=!0),r.attr("class",Y);const c=this.pages.length;if(c>0){const X=this.getPageSize(c-1);r.attr("width",X.width*this.scaling);const k=this.drawingContext.options[Wt]||0;r.attr("height",X.height*this.scaling+k)}const M=yield this.pageProvider.getPage();this.pages.push(M);const A=this.getPageSize(c),F=r.append("g");F.attr("transform",`scale(${this.scaling})translate(${A.marginLeft}, ${A.marginTop})`),M.setParent(F),M.setSvgRoot(r),M.drawContentRec(),r.attr("width",A.width*this.scaling);const K=this.drawingContext.options[Wt]||0;r.attr("height",A.height*this.scaling+K),o&&M.bindToParent()})},I.hideFirstPageNumberIfNeeded=function(){},I.bindPage=function(r){this.pages[r].bindToParent()},I.unbindPage=function(r){this.pages[r].unbind()},I.setScaling=function(r){x.A.assert(r),r!==this.scaling&&(this.scaling=r,this.pages.forEach(this.updatePageSvgSize,this))},I.getWidth=function(){return this.pageMetrics.getWidth()},I.getNominalWidth=function(){return this.pageMetrics.getNominalWidth()},I.setWidth=function(r){this.pageMetrics.setWidth(r)},I.updatePagesSvgSize=function(){this.pages.forEach(this.updatePageSvgSize,this)},I.updatePageSvgSize=function(r,o){const c=r.getSvgRoot(),M=this.getPageSize(o);c.attr("width",M.width*this.scaling);const A=this.drawingContext.options[Wt]||0;c.attr("height",M.height*this.scaling+A),r.getParent().attr("transform",`scale(${this.scaling})translate(${M.marginLeft}, ${M.marginTop})`)},I.getScaling=function(){return this.scaling},I.resetPagesGeometries=function(){this.pages.forEach(zt)};const zt=function(r){r.resetGeometries()};I.getAllPagesGeometries=function(){const r=this.pages.map($t);return Array.prototype.concat.apply([],r)};const $t=function(r){return r.getGeometries()};I.getLastPageGeometries=function(){const r=this.pages.length;if(r===0){const M="There are no pages drawn.";throw new m.default("NoPageDrawn",M)}return this.pages[r-1].getGeometries()},I.uuidGetStaffLyricsUpY=function(r){return r=this.uuidToIdx(r),this.getStaffLyricsUpY(r.staffIdx,r.partIdx,r.measureIdx,r.level)},I.getStaffLyricsUpY=function(r,o,c,M){return this.getSliceForMeasureIdx(c).getStaffLyricsUpY(r,o,c,M)},I.uuidGetStaffWordsY=function(r){return r=this.uuidToIdx(r),this.getStaffWordsY(r.staffIdx,r.partIdx,r.measureIdx,r.placement)},I.getStaffWordsY=function(r,o,c,M){return this.getSliceForMeasureIdx(c).getStaffWordsY(r,o,c,M)},I.uuidGetSystemChordsY=function(r){return r=this.uuidToIdx(r),this.getSystemChordsY(r.partIdx,r.measureIdx)},I.getSystemChordsY=function(r,o){return this.getSliceForMeasureIdx(o).getSystemChordsY(r,o)},I.getPagesStructures=function(){return this.pages.map(Kt)};const Kt=function(r){return r.getStructure()};I.getLyricsFontSize=function(){return this.drawingContext.getLyricsFontSize()},I.getHarmonyFontSize=function(){return this.drawingContext.getHarmonyFontSize()},I.getWordFontSize=function(){return this.drawingContext.getWordFontSize()},I.removePage=function(r){this.checkPageIdx(r),this.pagesContainer.remove(r),this.getPage(r).unbind(),this.pages.splice(r,1)},I.getLastContent=function(){return this.pagesContainer.getLastPage()},I.hasAnyPageContent=function(){return this.pagesContainer.hasAnyPage()},I.getContentProvider=function(){return this.contentProvider},I.getMeasureProvider=function(){return this.measureProvider},I.getShardProvider=function(){return this.shardProvider},I.getNbShards=function(){return this.shardsContainer.getNbShards()},I.getSliceProvider=function(){return this.sliceProvider},I.getNbSlices=function(){return this.slicesContainer.getNbSlices()},I.getPage=function(r){return this.checkPageIdx(r),this.pages[r]},I.checkPageIdx=function(r){const o=this.getNbPages();if(!P.default.isInteger(r)||r<0||r>=o){const c=`Bad page index: [${r}]`;throw new m.default("BadPageIdx",c)}},I.getNbPages=function(){return this.pages.length},I.getMeasuresContainer=function(){return this.measuresContainer},I.getDrawingContext=function(){return this.drawingContext},I.getNbMeasures=function(){return this.measuresContainer.getNbMeasures()+this.measureProvider.getNbMeasuresInCache()},I.getSlicesContainer=function(){return this.slicesContainer},I.getShardsContainer=function(){return this.shardsContainer},I.getPagesContainer=function(){return this.pagesContainer},I.drawBasicCursor=function(r,o){this.getSliceForMeasureIdx(r.measureIdx).drawBasicCursor(r,o)},I.drawGraceCursor=function(r,o){this.getSliceForMeasureIdx(r.measureIdx).drawGraceCursor(r,o)},I.drawTabCursor=function(r,o){this.getSliceForMeasureIdx(r.measureIdx).drawTabCursor(r,o)},I.drawDynamicCursor=function(r,o){this.getSliceForMeasureIdx(r.measureIdx).drawDynamicCursor(r,o)},I.drawPizzicatoCursor=function(r,o){this.getSliceForMeasureIdx(r.measureIdx).drawPizzicatoCursor(r,o)},I.drawMuteCursor=function(r,o){this.getSliceForMeasureIdx(r.measureIdx).drawMuteCursor(r,o)},I.drawHorizontalCursor=function(r,o){const c=r.startMeasureIdx,M=r.stopMeasureIdx;this.getSlicesForMeasuresRange(c,M+1).forEach(function(F,K,X){if(F===null)return;const k=X.length,z=(0,w.default)(r);z.startNoteIdx=K>0?null:r.startNoteIdx,z.stopNoteIdx=K<k-1?null:r.stopNoteIdx,F.drawHorizontalCursor(z,o)})},I.drawHorizontalCursorTimePos=function(r,o){const c=r.startMeasureIdx,M=r.stopMeasureIdx;this.getSlicesForMeasuresRange(c,M+1).forEach(function(F,K,X){if(F===null)return;const k=X.length,z=(0,w.default)(r);z.startTimePos=K>0?null:r.startTimePos,z.stopTimePos=K<k-1?null:r.stopTimePos,F.drawHorizontalCursorTimePos(z,o)})},I.drawHorizontalMeasureWideCursor=function(r,o){this.getSliceForMeasureIdx(r.measureIdx).drawHorizontalMeasureWideCursor(r,o)},I.drawCrossMeasureNoteCursor=function(r,o){if(r=(0,W.A)(this,r),r===null)return;const c=r.startMeasureIdx,M=r.stopMeasureIdx;this.getSlicesForMeasuresRange(c,M+1).forEach(function(F,K,X){if(F===null)return;const k=X.length,z=(0,w.default)(r);z.startNoteIdx=K>0?null:r.startNoteIdx,z.stopNoteIdx=K<k-1?null:r.stopNoteIdx,F.drawCrossMeasureNoteCursor(z,o)})},I.getSliceForMeasureIdx=function(r){const o=this.measuresContainer.getNbMeasures();return r<o?this.measuresContainer.getMeasuresSliceForMeasureIdx(r):(r-=o,this.measureProvider.checkMeasureIdx(r),null)},I.getSlicesForMeasuresRange=function(r,o){const c=this.measuresContainer.getNbMeasures();return r>c?(r-=c,this.measureProvider.checkMeasureIdx(r),[]):(o=Math.min(o,c),this.measuresContainer.getSlicesForMeasuresRange(r,o))},I.getScoreData=function(){return this.scoreData},I.uuidGetMeasureEnclosingStaffElem=function(r){return r=this.uuidToIdx(r),this.getMeasureEnclosingStaffElem(r.partIdx,r.staffIdx,r.measureIdx)},I.getMeasureEnclosingStaffElem=function(r,o,c){return this.getSliceForMeasureIdx(c).getStaffElem(r,o)},I.uuidGetMeasureWidth=function(r){return r=this.uuidToIdx(r),this.getMeasureWidth(r.partIdx,r.measureIdx)},I.getMeasureWidth=function(r,o){return this.getSliceForMeasureIdx(o).getMeasureWidth(r,o)},I.uuidGetMeasurePosXInStaff=function(r){return r=this.uuidToIdx(r),this.getMeasurePosXInStaff(r.partIdx,r.measureIdx)},I.getMeasurePosXInStaff=function(r,o){return this.getSliceForMeasureIdx(o).getMeasurePosXInStaff(r,o)},I.uuidGetNoteXInMeasure=function(r){return r=this.uuidToIdx(r),this.getNoteXInMeasure(r.partIdx,r.staffIdx,r.measureIdx,r.voiceIdx,r.noteIdx)},I.getNoteXInMeasure=function(r,o,c,M,A){return this.getSliceForMeasureIdx(c).getNoteXInMeasure(r,o,c,M,A)},I.uuidGetTimePosXInMeasure=function(r){return r=this.uuidToIdx(r),this.getTimePosXInMeasure(r.partIdx,r.staffIdx,r.measureIdx,r.timePos,r.dpq)},I.getTimePosXInMeasure=function(r,o,c,M,A){return this.getSliceForMeasureIdx(c).getTimePosXInMeasure(r,o,c,M,A)},I.uuidGetSystemHeight=function(r){const o=this.uuidToIdx(r);return this.getSystemHeight(o.partIdx,o.measureIdx)},I.getSystemHeight=function(r,o){return this.getSliceForMeasureIdx(o).getStaffHeight(r)},I.uuidGetStaffInnerHeight=function(r){const o=this.uuidToIdx(r);return this.getStaffInnerHeight(o.partIdx,o.staffIdx,o.measureIdx)},I.getStaffInnerHeight=function(r,o,c){return this.getSliceForMeasureIdx(c).getStaffInnerHeight(r,o)},I.uuidGetSpaceAboveStaff=function(r){const o=this.uuidToIdx(r);return this.getSpaceAboveStaff(o.partIdx,o.staffIdx,o.measureIdx)},I.getSpaceAboveStaff=function(r,o,c){return this.getSliceForMeasureIdx(c).getSpaceAboveStaff(r,o)},I.uuidGetMeasureNbNotes=function(r){const o=this.uuidToIdx(r);return this.getMeasureNbNotes(o.partIdx,o.staffIdx,o.measureIdx,o.voiceIdx)},I.getMeasureNbNotes=function(r,o,c,M){return this.getSliceForMeasureIdx(c).getMeasureNbNotes(r,o,c,M)},I.getScoreDataCache=function(){return this.scoreDataCache},I.uuidGetMeasureElem=function(r){const o=this.uuidToIdx(r);return this.getSliceForMeasureIdx(o.measureIdx).getMeasureElem(o.partIdx,o.staffIdx,o.measureIdx)},I.uuidGetMeasureEventRect=function(r){const o=this.uuidToIdx(r),c=this.getSliceForMeasureIdx(o.measureIdx);return c===null?null:c.getMeasureEventRect(o.partIdx,o.staffIdx,o.measureIdx)},I.getMeasureElemFromDataIdx=function(r,o,c){const M=this.scoreDataCache.dataToDisplayedPartIdx(r);return this.getSliceForMeasureIdx(c).getMeasureElem(M,o,c)},I.uuidGetPartBottomMeasureElem=function(r){const o=this.uuidToIdx(r);return this.getSliceForMeasureIdx(o.measureIdx).getPartBottomMeasureElem(o.partIdx,o.measureIdx)},I.getMeasureElem=function(r,o,c){return this.getSliceForMeasureIdx(c).getMeasureElem(r,o,c)},I.splitMeasuresRangeBySlices=function(r){return(0,t.A)(this.measuresContainer,r)},I.uuidGetMeasurePageSvgParent=function(r){const o=this.uuidToIdx(r),c=this.getSliceForMeasureIdx(o.measureIdx);if(c===null)return null;const M=c.getShards(),A=c.getSystem(o.partIdx),F=M.find(Vt,A);if(!F||!F.hasPartContent())return null;const K=F.getPageIdx();return K>=this.getNbPages()?null:this.getPageSvg(K)},I.getPageSvg=function(r){const o=this.getPage(r);return o.hasSvgRoot()?o.getSvgRoot():null};function Vt(r){const o=this;return r.hasSystem(o)}I.uuidIsMeasureRendered=function(r){return this.uuidGetMeasurePageSvgParent(r)!==null},I.uuidToIdx=function(r){r=(0,w.default)(r);const o=this.getScoreData();if((0,i.default)(o,r),(0,f.default)(o,r),(0,u.default)(o,r),(0,a.default)(o,r),typeof r.partIdx!="undefined"){const c=this.getScoreDataCache();r.partIdx=c.dataToDisplayedPartIdx(r.partIdx)}return r},I.isSyncWithData=function(){return this.editionId===this.scoreData.getEditionId()},I.stateSyncWithData=function(){this.editionId=this.scoreData.getEditionId()};const Yt=bt},414086:$=>{"use strict";function L(C,P,w){if(Array.isArray(P))for(var s=P.length,x=0;x<s;x++)C.push(P[x]);else if(w==="utf8")for(var R=unescape(encodeURIComponent(P)),s=R.length,x=0;x<s;x++)C.push(R.charCodeAt(x));else for(var s=P.length,x=0;x<s;x++){var d=P.charCodeAt(x)&255;C.push(d===0&&w==="ascii"?32:d)}}var h=function(P,w){var s=null,x=function(p){return String.fromCharCode(p)},R=function(p){return p.toString(16)};switch(w){case"binary":s=P.map(x).join("");break;case"base64":s=atob(P.map(x).join(""));break;default:s=P.map(R).join("");break}return s},m=function(P,w){return P<<w|P>>>32-w};function v(C){for(var P=C.length,w=4294967295,s=new Array(80),x=[1732584193,4023233417,2562383102,271733878,3285377520],R=0;R<C.length;R+=16){for(var d=x[0],p=x[1],g=x[2],y=x[3],T=x[4],D=0;D<16;D++)s[D]=C[R+D];for(var D=16;D<=79;D++)s[D]=m(s[D-3]^s[D-8]^s[D-14]^s[D-16],1);for(var D=0;D<=19;D++){var H=m(d,5)+(p&g|~p&y)+T+s[D]+1518500249&w;T=y,y=g,g=m(p,30),p=d,d=H}for(var D=20;D<=39;D++){var H=m(d,5)+(p^g^y)+T+s[D]+1859775393&w;T=y,y=g,g=m(p,30),p=d,d=H}for(var D=40;D<=59;D++){var H=m(d,5)+(p&g|p&y|g&y)+T+s[D]+2400959708&w;T=y,y=g,g=m(p,30),p=d,d=H}for(var D=60;D<=79;D++){var H=m(d,5)+(p^g^y)+T+s[D]+3395469782&w;T=y,y=g,g=m(p,30),p=d,d=H}x[0]=x[0]+d&w,x[1]=x[1]+p&w,x[2]=x[2]+g&w,x[3]=x[3]+y&w,x[4]=x[4]+T&w}return x}function B(C){var P=null;switch(C){case"sha1":P=N(C);break;default:throw new Error("Digest method not supported.")}return P}function N(){var C=0,P=[],w=[];return{update:function(x,R){L(P,x,R)},digest:function(x){for(var R=P.length,d=0;d<R-3;d+=4)w.push(P[d]<<24|P[d+1]<<16|P[d+2]<<8|P[d+3]);switch(R%4){case 0:w.push(2147483648);break;case 1:w.push(P[R-1]<<24|8388608);break;case 2:w.push(P[R-2]<<24|P[R-1]<<16|32768);break;case 3:w.push(P[R-3]<<24|P[R-2]<<16|P[R-1]<<8|128);break}for(;w.length%16!=14;)w.push(0);return w.push(R>>>29),w.push(R<<3&4294967295),h(v(w).reduce(function(p,g){for(var y=7;y>=0;--y)p.push(g>>>y*4&15);return p},[]),x)}}}$.exports={createHash:B}},472838:($,L,h)=>{"use strict";h.d(L,{default:()=>v});var m=h(494735);function v(){let B=null;const N=new Promise(C=>{B=C});return(0,m.A)(B),N}},523437:($,L,h)=>{"use strict";h.d(L,{default:()=>p});var m=h(615565),v=h(949605),B=h(558929),N=h(518985),C=h(652490),P=h(413160),w=h(182879),s=h(737903);const x=function(g){this.init(g)},R=x.prototype;R.init=function(g){this.scoreDataCache=g},R.extract=function(g,y){this.scoreDataCache.stateDataChanged(),this.scoreDataCache.stateUpdated();let D=m.A.extractDrawActions(g).map(N.A);D=D.filter(this.isPartDisplayed,this),D.forEach(this.translatePartIdx,this);const H={voice:[],measure:[],mmr:[]};D.forEach(d,H);const et=(0,C.A)(H.measure),G=(0,P.A)(et,y);return this.fillActionsData(G.measureActions),G.measureActions=this.mergeColumn(G.measureActions),G.voiceActions=H.voice,G.hasMmrChange=H.mmr.length>0,G},R.isPartDisplayed=function(g){const y=g.displayLocation.partIdx;return this.scoreDataCache.isPartDisplayed(y)},R.translatePartIdx=function(g){const y=g.displayLocation.partIdx,T=this.scoreDataCache.dataToDisplayedPartIdx(y);g.displayLocation.partIdx=T};const d=function(g){const y=this;if(g.type===w.A.ADD_VOICE)y.voice.push(g);else if(g.type===w.A.MMR){const T=(0,s.default)(g);T.type=w.A.UPDATE,y.measure.push(T),y.mmr.push(g)}else y.measure.push(g)};R.fillActionsData=function(g){(0,v.A)(g,this.scoreDataCache)},R.mergeColumn=function(g){return g=new B.A(g).merge(),g};const p=x},540674:($,L,h)=>{"use strict";h.d(L,{default:()=>m});function m(C,P,w){const s=N(C,P);let x=v(C,P,w);for(let R=w;R<s;R++){const d=B(C,P,R);d.setDataIdx(R),d.updateDisplayIdx(x),x+=d.getMeasureNumberShift()}}function v(C,P,w){if(w===0)return C.getStartDisplayIdx();{const s=B(C,P,w-1);let x=s.getDisplayIdx();return x+=s.getMeasureNumberShift(),x}}function B(C,P,w){const s=C.getNbMeasures();return w<s?C.getMeasureColumn(w):(w-=s,P.getCachedMeasure(w))}function N(C,P){return C.getNbMeasures()+P.getNbMeasuresInCache()}},584527:($,L,h)=>{"use strict";h.d(L,{A:()=>B});var m=h(268003);const B=(0,m.A)("arrowBackwards24",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentcolor"},[["path",{"fill-rule":"evenodd",d:"M19 11H7.83l4.88-4.88c.39-.39.39-1.03 0-1.42a.996.996 0 0 0-1.41 0l-6.59 6.59a.996.996 0 0 0 0 1.41l6.59 6.59a.996.996 0 1 0 1.41-1.41L7.83 13H19c.55 0 1-.45 1-1s-.45-1-1-1","clip-rule":"evenodd"}]])},712081:($,L,h)=>{"use strict";var m=Math.pow;/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const v=h(283441),B=h(761092),N=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;L.Buffer=s,L.SlowBuffer=G,L.INSPECT_MAX_BYTES=50;const C=2147483647;L.kMaxLength=C,s.TYPED_ARRAY_SUPPORT=P(),!s.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function P(){try{const n=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(n,t),n.foo()===42}catch(n){return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function w(n){if(n>C)throw new RangeError('The value "'+n+'" is invalid for option "size"');const t=new Uint8Array(n);return Object.setPrototypeOf(t,s.prototype),t}function s(n,t,e){if(typeof n=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(n)}return x(n,t,e)}s.poolSize=8192;function x(n,t,e){if(typeof n=="string")return g(n,t);if(ArrayBuffer.isView(n))return T(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(at(n,ArrayBuffer)||n&&at(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(at(n,SharedArrayBuffer)||n&&at(n.buffer,SharedArrayBuffer)))return D(n,t,e);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const i=n.valueOf&&n.valueOf();if(i!=null&&i!==n)return s.from(i,t,e);const a=H(n);if(a)return a;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return s.from(n[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}s.from=function(n,t,e){return x(n,t,e)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function R(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function d(n,t,e){return R(n),n<=0?w(n):t!==void 0?typeof e=="string"?w(n).fill(t,e):w(n).fill(t):w(n)}s.alloc=function(n,t,e){return d(n,t,e)};function p(n){return R(n),w(n<0?0:et(n)|0)}s.allocUnsafe=function(n){return p(n)},s.allocUnsafeSlow=function(n){return p(n)};function g(n,t){if((typeof t!="string"||t==="")&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const e=ot(n,t)|0;let i=w(e);const a=i.write(n,t);return a!==e&&(i=i.slice(0,a)),i}function y(n){const t=n.length<0?0:et(n.length)|0,e=w(t);for(let i=0;i<t;i+=1)e[i]=n[i]&255;return e}function T(n){if(at(n,Uint8Array)){const t=new Uint8Array(n);return D(t.buffer,t.byteOffset,t.byteLength)}return y(n)}function D(n,t,e){if(t<0||n.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let i;return t===void 0&&e===void 0?i=new Uint8Array(n):e===void 0?i=new Uint8Array(n,t):i=new Uint8Array(n,t,e),Object.setPrototypeOf(i,s.prototype),i}function H(n){if(s.isBuffer(n)){const t=et(n.length)|0,e=w(t);return e.length===0||n.copy(e,0,0,t),e}if(n.length!==void 0)return typeof n.length!="number"||St(n.length)?w(0):y(n);if(n.type==="Buffer"&&Array.isArray(n.data))return y(n.data)}function et(n){if(n>=C)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+C.toString(16)+" bytes");return n|0}function G(n){return+n!=n&&(n=0),s.alloc(+n)}s.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==s.prototype},s.compare=function(t,e){if(at(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),at(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,a=e.length;for(let u=0,f=Math.min(i,a);u<f;++u)if(t[u]!==e[u]){i=t[u],a=e[u];break}return i<a?-1:a<i?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return s.alloc(0);let i;if(e===void 0)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const a=s.allocUnsafe(e);let u=0;for(i=0;i<t.length;++i){let f=t[i];if(at(f,Uint8Array))u+f.length>a.length?(s.isBuffer(f)||(f=s.from(f)),f.copy(a,u)):Uint8Array.prototype.set.call(a,f,u);else if(s.isBuffer(f))f.copy(a,u);else throw new TypeError('"list" argument must be an Array of Buffers');u+=f.length}return a};function ot(n,t){if(s.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||at(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);const e=n.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&e===0)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return Et(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Pt(n).length;default:if(a)return i?-1:Et(n).length;t=(""+t).toLowerCase(),a=!0}}s.byteLength=ot;function nt(n,t,e){let i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(n||(n="utf8");;)switch(n){case"hex":return Lt(this,t,e);case"utf8":case"utf-8":return _(this,t,e);case"ascii":return dt(this,t,e);case"latin1":case"binary":return ct(this,t,e);case"base64":return l(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yt(this,t,e);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),i=!0}}s.prototype._isBuffer=!0;function st(n,t,e){const i=n[t];n[t]=n[e],n[e]=i}s.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)st(this,e,e+1);return this},s.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)st(this,e,e+3),st(this,e+1,e+2);return this},s.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)st(this,e,e+7),st(this,e+1,e+6),st(this,e+2,e+5),st(this,e+3,e+4);return this},s.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?_(this,0,t):nt.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:s.compare(this,t)===0},s.prototype.inspect=function(){let t="";const e=L.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},N&&(s.prototype[N]=s.prototype.inspect),s.prototype.compare=function(t,e,i,a,u){if(at(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),i===void 0&&(i=t?t.length:0),a===void 0&&(a=0),u===void 0&&(u=this.length),e<0||i>t.length||a<0||u>this.length)throw new RangeError("out of range index");if(a>=u&&e>=i)return 0;if(a>=u)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,a>>>=0,u>>>=0,this===t)return 0;let f=u-a,W=i-e;const Z=Math.min(f,W),j=this.slice(a,u),J=t.slice(e,i);for(let Y=0;Y<Z;++Y)if(j[Y]!==J[Y]){f=j[Y],W=J[Y];break}return f<W?-1:W<f?1:0};function S(n,t,e,i,a){if(n.length===0)return-1;if(typeof e=="string"?(i=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,St(e)&&(e=a?0:n.length-1),e<0&&(e=n.length+e),e>=n.length){if(a)return-1;e=n.length-1}else if(e<0)if(a)e=0;else return-1;if(typeof t=="string"&&(t=s.from(t,i)),s.isBuffer(t))return t.length===0?-1:E(n,t,e,i,a);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?a?Uint8Array.prototype.indexOf.call(n,t,e):Uint8Array.prototype.lastIndexOf.call(n,t,e):E(n,[t],e,i,a);throw new TypeError("val must be string, number or Buffer")}function E(n,t,e,i,a){let u=1,f=n.length,W=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(n.length<2||t.length<2)return-1;u=2,f/=2,W/=2,e/=2}function Z(J,Y){return u===1?J[Y]:J.readUInt16BE(Y*u)}let j;if(a){let J=-1;for(j=e;j<f;j++)if(Z(n,j)===Z(t,J===-1?0:j-J)){if(J===-1&&(J=j),j-J+1===W)return J*u}else J!==-1&&(j-=j-J),J=-1}else for(e+W>f&&(e=f-W),j=e;j>=0;j--){let J=!0;for(let Y=0;Y<W;Y++)if(Z(n,j+Y)!==Z(t,Y)){J=!1;break}if(J)return j}return-1}s.prototype.includes=function(t,e,i){return this.indexOf(t,e,i)!==-1},s.prototype.indexOf=function(t,e,i){return S(this,t,e,i,!0)},s.prototype.lastIndexOf=function(t,e,i){return S(this,t,e,i,!1)};function U(n,t,e,i){e=Number(e)||0;const a=n.length-e;i?(i=Number(i),i>a&&(i=a)):i=a;const u=t.length;i>u/2&&(i=u/2);let f;for(f=0;f<i;++f){const W=parseInt(t.substr(f*2,2),16);if(St(W))return f;n[e+f]=W}return f}function O(n,t,e,i){return tt(Et(t,n.length-e),n,e,i)}function V(n,t,e,i){return tt(_t(t),n,e,i)}function q(n,t,e,i){return tt(Pt(t),n,e,i)}function it(n,t,e,i){return tt(Nt(t,n.length-e),n,e,i)}s.prototype.write=function(t,e,i,a){if(e===void 0)a="utf8",i=this.length,e=0;else if(i===void 0&&typeof e=="string")a=e,i=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(i)?(i=i>>>0,a===void 0&&(a="utf8")):(a=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const u=this.length-e;if((i===void 0||i>u)&&(i=u),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");let f=!1;for(;;)switch(a){case"hex":return U(this,t,e,i);case"utf8":case"utf-8":return O(this,t,e,i);case"ascii":case"latin1":case"binary":return V(this,t,e,i);case"base64":return q(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,t,e,i);default:if(f)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),f=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function l(n,t,e){return t===0&&e===n.length?v.fromByteArray(n):v.fromByteArray(n.slice(t,e))}function _(n,t,e){e=Math.min(n.length,e);const i=[];let a=t;for(;a<e;){const u=n[a];let f=null,W=u>239?4:u>223?3:u>191?2:1;if(a+W<=e){let Z,j,J,Y;switch(W){case 1:u<128&&(f=u);break;case 2:Z=n[a+1],(Z&192)===128&&(Y=(u&31)<<6|Z&63,Y>127&&(f=Y));break;case 3:Z=n[a+1],j=n[a+2],(Z&192)===128&&(j&192)===128&&(Y=(u&15)<<12|(Z&63)<<6|j&63,Y>2047&&(Y<55296||Y>57343)&&(f=Y));break;case 4:Z=n[a+1],j=n[a+2],J=n[a+3],(Z&192)===128&&(j&192)===128&&(J&192)===128&&(Y=(u&15)<<18|(Z&63)<<12|(j&63)<<6|J&63,Y>65535&&Y<1114112&&(f=Y))}}f===null?(f=65533,W=1):f>65535&&(f-=65536,i.push(f>>>10&1023|55296),f=56320|f&1023),i.push(f),a+=W}return ut(i)}const Q=4096;function ut(n){const t=n.length;if(t<=Q)return String.fromCharCode.apply(String,n);let e="",i=0;for(;i<t;)e+=String.fromCharCode.apply(String,n.slice(i,i+=Q));return e}function dt(n,t,e){let i="";e=Math.min(n.length,e);for(let a=t;a<e;++a)i+=String.fromCharCode(n[a]&127);return i}function ct(n,t,e){let i="";e=Math.min(n.length,e);for(let a=t;a<e;++a)i+=String.fromCharCode(n[a]);return i}function Lt(n,t,e){const i=n.length;(!t||t<0)&&(t=0),(!e||e<0||e>i)&&(e=i);let a="";for(let u=t;u<e;++u)a+=kt[n[u]];return a}function yt(n,t,e){const i=n.slice(t,e);let a="";for(let u=0;u<i.length-1;u+=2)a+=String.fromCharCode(i[u]+i[u+1]*256);return a}s.prototype.slice=function(t,e){const i=this.length;t=~~t,e=e===void 0?i:~~e,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),e<t&&(e=t);const a=this.subarray(t,e);return Object.setPrototypeOf(a,s.prototype),a};function b(n,t,e){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+t>e)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,i){t=t>>>0,e=e>>>0,i||b(t,e,this.length);let a=this[t],u=1,f=0;for(;++f<e&&(u*=256);)a+=this[t+f]*u;return a},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,i){t=t>>>0,e=e>>>0,i||b(t,e,this.length);let a=this[t+--e],u=1;for(;e>0&&(u*=256);)a+=this[t+--e]*u;return a},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t=t>>>0,e||b(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||b(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||b(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||b(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||b(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=ht(function(t){t=t>>>0,pt(t,"offset");const e=this[t],i=this[t+7];(e===void 0||i===void 0)&&mt(t,this.length-8);const a=e+this[++t]*m(2,8)+this[++t]*m(2,16)+this[++t]*m(2,24),u=this[++t]+this[++t]*m(2,8)+this[++t]*m(2,16)+i*m(2,24);return BigInt(a)+(BigInt(u)<<BigInt(32))}),s.prototype.readBigUInt64BE=ht(function(t){t=t>>>0,pt(t,"offset");const e=this[t],i=this[t+7];(e===void 0||i===void 0)&&mt(t,this.length-8);const a=e*m(2,24)+this[++t]*m(2,16)+this[++t]*m(2,8)+this[++t],u=this[++t]*m(2,24)+this[++t]*m(2,16)+this[++t]*m(2,8)+i;return(BigInt(a)<<BigInt(32))+BigInt(u)}),s.prototype.readIntLE=function(t,e,i){t=t>>>0,e=e>>>0,i||b(t,e,this.length);let a=this[t],u=1,f=0;for(;++f<e&&(u*=256);)a+=this[t+f]*u;return u*=128,a>=u&&(a-=Math.pow(2,8*e)),a},s.prototype.readIntBE=function(t,e,i){t=t>>>0,e=e>>>0,i||b(t,e,this.length);let a=e,u=1,f=this[t+--a];for(;a>0&&(u*=256);)f+=this[t+--a]*u;return u*=128,f>=u&&(f-=Math.pow(2,8*e)),f},s.prototype.readInt8=function(t,e){return t=t>>>0,e||b(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},s.prototype.readInt16LE=function(t,e){t=t>>>0,e||b(t,2,this.length);const i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i},s.prototype.readInt16BE=function(t,e){t=t>>>0,e||b(t,2,this.length);const i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i},s.prototype.readInt32LE=function(t,e){return t=t>>>0,e||b(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t=t>>>0,e||b(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=ht(function(t){t=t>>>0,pt(t,"offset");const e=this[t],i=this[t+7];(e===void 0||i===void 0)&&mt(t,this.length-8);const a=this[t+4]+this[t+5]*m(2,8)+this[t+6]*m(2,16)+(i<<24);return(BigInt(a)<<BigInt(32))+BigInt(e+this[++t]*m(2,8)+this[++t]*m(2,16)+this[++t]*m(2,24))}),s.prototype.readBigInt64BE=ht(function(t){t=t>>>0,pt(t,"offset");const e=this[t],i=this[t+7];(e===void 0||i===void 0)&&mt(t,this.length-8);const a=(e<<24)+this[++t]*m(2,16)+this[++t]*m(2,8)+this[++t];return(BigInt(a)<<BigInt(32))+BigInt(this[++t]*m(2,24)+this[++t]*m(2,16)+this[++t]*m(2,8)+i)}),s.prototype.readFloatLE=function(t,e){return t=t>>>0,e||b(t,4,this.length),B.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t=t>>>0,e||b(t,4,this.length),B.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||b(t,8,this.length),B.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||b(t,8,this.length),B.read(this,t,!1,52,8)};function rt(n,t,e,i,a,u){if(!s.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<u)throw new RangeError('"value" argument is out of bounds');if(e+i>n.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,i,a){if(t=+t,e=e>>>0,i=i>>>0,!a){const W=Math.pow(2,8*i)-1;rt(this,t,e,i,W,0)}let u=1,f=0;for(this[e]=t&255;++f<i&&(u*=256);)this[e+f]=t/u&255;return e+i},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,i,a){if(t=+t,e=e>>>0,i=i>>>0,!a){const W=Math.pow(2,8*i)-1;rt(this,t,e,i,W,0)}let u=i-1,f=1;for(this[e+u]=t&255;--u>=0&&(f*=256);)this[e+u]=t/f&255;return e+i},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,i){return t=+t,e=e>>>0,i||rt(this,t,e,1,255,0),this[e]=t&255,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,i){return t=+t,e=e>>>0,i||rt(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,i){return t=+t,e=e>>>0,i||rt(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,i){return t=+t,e=e>>>0,i||rt(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,i){return t=+t,e=e>>>0,i||rt(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function vt(n,t,e,i,a){Bt(t,i,a,n,e,7);let u=Number(t&BigInt(4294967295));n[e++]=u,u=u>>8,n[e++]=u,u=u>>8,n[e++]=u,u=u>>8,n[e++]=u;let f=Number(t>>BigInt(32)&BigInt(4294967295));return n[e++]=f,f=f>>8,n[e++]=f,f=f>>8,n[e++]=f,f=f>>8,n[e++]=f,e}function It(n,t,e,i,a){Bt(t,i,a,n,e,7);let u=Number(t&BigInt(4294967295));n[e+7]=u,u=u>>8,n[e+6]=u,u=u>>8,n[e+5]=u,u=u>>8,n[e+4]=u;let f=Number(t>>BigInt(32)&BigInt(4294967295));return n[e+3]=f,f=f>>8,n[e+2]=f,f=f>>8,n[e+1]=f,f=f>>8,n[e]=f,e+8}s.prototype.writeBigUInt64LE=ht(function(t,e=0){return vt(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=ht(function(t,e=0){return It(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(t,e,i,a){if(t=+t,e=e>>>0,!a){const Z=Math.pow(2,8*i-1);rt(this,t,e,i,Z-1,-Z)}let u=0,f=1,W=0;for(this[e]=t&255;++u<i&&(f*=256);)t<0&&W===0&&this[e+u-1]!==0&&(W=1),this[e+u]=(t/f>>0)-W&255;return e+i},s.prototype.writeIntBE=function(t,e,i,a){if(t=+t,e=e>>>0,!a){const Z=Math.pow(2,8*i-1);rt(this,t,e,i,Z-1,-Z)}let u=i-1,f=1,W=0;for(this[e+u]=t&255;--u>=0&&(f*=256);)t<0&&W===0&&this[e+u+1]!==0&&(W=1),this[e+u]=(t/f>>0)-W&255;return e+i},s.prototype.writeInt8=function(t,e,i){return t=+t,e=e>>>0,i||rt(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1},s.prototype.writeInt16LE=function(t,e,i){return t=+t,e=e>>>0,i||rt(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,i){return t=+t,e=e>>>0,i||rt(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2},s.prototype.writeInt32LE=function(t,e,i){return t=+t,e=e>>>0,i||rt(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,i){return t=+t,e=e>>>0,i||rt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4},s.prototype.writeBigInt64LE=ht(function(t,e=0){return vt(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=ht(function(t,e=0){return It(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function gt(n,t,e,i,a,u){if(e+i>n.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Mt(n,t,e,i,a){return t=+t,e=e>>>0,a||gt(n,t,e,4,34028234663852886e22,-34028234663852886e22),B.write(n,t,e,i,23,4),e+4}s.prototype.writeFloatLE=function(t,e,i){return Mt(this,t,e,!0,i)},s.prototype.writeFloatBE=function(t,e,i){return Mt(this,t,e,!1,i)};function xt(n,t,e,i,a){return t=+t,e=e>>>0,a||gt(n,t,e,8,17976931348623157e292,-17976931348623157e292),B.write(n,t,e,i,52,8),e+8}s.prototype.writeDoubleLE=function(t,e,i){return xt(this,t,e,!0,i)},s.prototype.writeDoubleBE=function(t,e,i){return xt(this,t,e,!1,i)},s.prototype.copy=function(t,e,i,a){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!a&&a!==0&&(a=this.length),e>=t.length&&(e=t.length),e||(e=0),a>0&&a<i&&(a=i),a===i||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),t.length-e<a-i&&(a=t.length-e+i);const u=a-i;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,i,a):Uint8Array.prototype.set.call(t,this.subarray(i,a),e),u},s.prototype.fill=function(t,e,i,a){if(typeof t=="string"){if(typeof e=="string"?(a=e,e=0,i=this.length):typeof i=="string"&&(a=i,i=this.length),a!==void 0&&typeof a!="string")throw new TypeError("encoding must be a string");if(typeof a=="string"&&!s.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(t.length===1){const f=t.charCodeAt(0);(a==="utf8"&&f<128||a==="latin1")&&(t=f)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;e=e>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);let u;if(typeof t=="number")for(u=e;u<i;++u)this[u]=t;else{const f=s.isBuffer(t)?t:s.from(t,a),W=f.length;if(W===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(u=0;u<i-e;++u)this[u+e]=f[u%W]}return this};const ft={};function wt(n,t,e){ft[n]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}wt("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),wt("ERR_INVALID_ARG_TYPE",function(n,t){return`The "${n}" argument must be of type number. Received type ${typeof t}`},TypeError),wt("ERR_OUT_OF_RANGE",function(n,t,e){let i=`The value of "${n}" is out of range.`,a=e;return Number.isInteger(e)&&Math.abs(e)>m(2,32)?a=At(String(e)):typeof e=="bigint"&&(a=String(e),(e>m(BigInt(2),BigInt(32))||e<-m(BigInt(2),BigInt(32)))&&(a=At(a)),a+="n"),i+=` It must be ${t}. Received ${a}`,i},RangeError);function At(n){let t="",e=n.length;const i=n[0]==="-"?1:0;for(;e>=i+4;e-=3)t=`_${n.slice(e-3,e)}${t}`;return`${n.slice(0,e)}${t}`}function Ct(n,t,e){pt(t,"offset"),(n[t]===void 0||n[t+e]===void 0)&&mt(t,n.length-(e+1))}function Bt(n,t,e,i,a,u){if(n>e||n<t){const f=typeof t=="bigint"?"n":"";let W;throw u>3?t===0||t===BigInt(0)?W=`>= 0${f} and < 2${f} ** ${(u+1)*8}${f}`:W=`>= -(2${f} ** ${(u+1)*8-1}${f}) and < 2 ** ${(u+1)*8-1}${f}`:W=`>= ${t}${f} and <= ${e}${f}`,new ft.ERR_OUT_OF_RANGE("value",W,n)}Ct(i,a,u)}function pt(n,t){if(typeof n!="number")throw new ft.ERR_INVALID_ARG_TYPE(t,"number",n)}function mt(n,t,e){throw Math.floor(n)!==n?(pt(n,e),new ft.ERR_OUT_OF_RANGE(e||"offset","an integer",n)):t<0?new ft.ERR_BUFFER_OUT_OF_BOUNDS:new ft.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,n)}const Dt=/[^+/0-9A-Za-z-_]/g;function Rt(n){if(n=n.split("=")[0],n=n.trim().replace(Dt,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function Et(n,t){t=t||1/0;let e;const i=n.length;let a=null;const u=[];for(let f=0;f<i;++f){if(e=n.charCodeAt(f),e>55295&&e<57344){if(!a){if(e>56319){(t-=3)>-1&&u.push(239,191,189);continue}else if(f+1===i){(t-=3)>-1&&u.push(239,191,189);continue}a=e;continue}if(e<56320){(t-=3)>-1&&u.push(239,191,189),a=e;continue}e=(a-55296<<10|e-56320)+65536}else a&&(t-=3)>-1&&u.push(239,191,189);if(a=null,e<128){if((t-=1)<0)break;u.push(e)}else if(e<2048){if((t-=2)<0)break;u.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;u.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;u.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return u}function _t(n){const t=[];for(let e=0;e<n.length;++e)t.push(n.charCodeAt(e)&255);return t}function Nt(n,t){let e,i,a;const u=[];for(let f=0;f<n.length&&!((t-=2)<0);++f)e=n.charCodeAt(f),i=e>>8,a=e%256,u.push(a),u.push(i);return u}function Pt(n){return v.toByteArray(Rt(n))}function tt(n,t,e,i){let a;for(a=0;a<i&&!(a+e>=t.length||a>=n.length);++a)t[a+e]=n[a];return a}function at(n,t){return n instanceof t||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===t.name}function St(n){return n!==n}const kt=function(){const n="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){const i=e*16;for(let a=0;a<16;++a)t[i+a]=n[e]+n[a]}return t}();function ht(n){return typeof BigInt=="undefined"?Ft:n}function Ft(){throw new Error("BigInt not supported")}},726042:($,L,h)=>{"use strict";h.r(L),h.d(L,{default:()=>it});var m=h(364842);function v(l){return typeof l=="number"&&!Number.isNaN(l)}function B(l){return l-N(l)}function N(l){return parseInt(l.toString(),10)}function C(l){return Math.round(l)===l}function P(l){return l%2===1}function w(l){return l%2===0}function s(l){if(!C(l))throw new m.default("Unexpected",`math.isPowerOfTwo() only take integer. given: <${l}>`);return l!==0&&(l&l-1)===0}function x(l){const _=R(l,2);return C(_)}function R(l,_){return Math.log(l)/Math.log(_)}function d(l){return typeof l=="number"?l:parseInt(l,10)}function p(l,_){y(l),y(_);const Q=l>_?l:_,ut=l>_?_:l;for(let dt=1;dt<=ut;dt++)if(Q*dt%ut===0)return Q*dt;return ut}function g(l,_){for(y(l),y(_);_!==0;){const Q=l%_;l=_,_=Q}return l}function y(l){if(typeof l!="number"||Number.isNaN(l)||!Number.isFinite(l))throw new Error(`the value [${l}] must be a number.`)}function T(l){const _=g(l.numerator,l.denominator);return{numerator:l.numerator/_,denominator:l.denominator/_}}function D(l,_,Q,ut){return(ut-_)/(Q-l)}function H(l,_,Q){return _-Q*l}function et(l,_){return Math.max(l,_)}function G(l,_){return Math.min(l,_)}function ot(l,_){return l-_}function nt(l,_){return _-l}function st(l,_){return l+_}function S(l,_){return l-_}function E(l,_){return g(l,_)===_}function U(l){for(y(l);l!==0&&l%2===0;)l/=2;return l}function O(l){return l*180/Math.PI}function V(l){return l*Math.PI/180}function q(l){if(!C(l))throw new m.default("Integer expected");const _=[];do{const Q=l%10;_.push(Q),l/=10,l=N(l)}while(l!==0);return _.reverse(),_}const it={isNumber:v,floatPart:B,intPart:N,isInteger:C,isOdd:P,isEven:w,isPowerOfTwo:s,isFloatPowerOfTwo:x,log:R,toInt:d,lcm:p,gcd:g,simplifyFraction:T,solveLinearA:D,solveLinearB:H,max2:et,min2:G,cmp:ot,cmpReverse:nt,add:st,sub:S,isMultipleOf:E,removeFactorOfTwo:U,gradiansToDegrees:O,degreesToGradians:V,toDigitArray:q}},778288:($,L,h)=>{"use strict";h.d(L,{A:()=>B});var m=h(268003);const B=(0,m.A)("stop16",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentcolor"},[["rect",{width:"12",height:"12",x:"2",y:"2",rx:"2"}]])},779197:($,L,h)=>{"use strict";h.d(L,{A:()=>st});var m=h(523437),v=h(286060),B=h(540674),N=h(696847);function C(S,E){E.forEach(P,S)}function P(S){const E=this,U=S.displayLocation.partIdx,O=S.displayLocation.voiceIdx,V=S.displayLocation.staffIdx;E.getSystem(U).addVoice(V,O)}var w=h(489615);function s(S){(0,w.A)(S),S.reloadAllCrossMeasures(),S.dropVerticalFormatting(),S.updateCrossMeasuresHorizontalDisplayForVerticalComputation(),S.dispatchVerticalFormatting(),S.hasEventsRects()&&(S.autoSetExternalSystemMeasureGaps(),S.updateMeasuresEventsRects())}function x(S){const U=S.getBindedShards().map(R);return Array.prototype.concat.apply([],U)}function R(S){return S.getAllMeasuresGeometries()}var d=h(835765),p=(S,E,U)=>new Promise((O,V)=>{var q=_=>{try{l(U.next(_))}catch(Q){V(Q)}},it=_=>{try{l(U.throw(_))}catch(Q){V(Q)}},l=_=>_.done?O(_.value):Promise.resolve(_.value).then(q,it);l((U=U.apply(S,E)).next())});function g(S,E,U,O){return p(this,null,function*(){for(yield(0,d.A)(S,E,U);S.canPushMeasure()&&U.hasRemaining();){const V=U.getMeasure();V.areSystemsInitialized()||(yield V.initSystems()),S.pushMeasure(V),E.push(V),y(O,V)}})}function y(S,E){const O=E.getSystemsMeasure();Array.prototype.concat.apply([],O).forEach(function(q){S.addedStaffMeasures.push(q)})}var T=h(472838),D=h(878639),H=(S,E,U)=>new Promise((O,V)=>{var q=_=>{try{l(U.next(_))}catch(Q){V(Q)}},it=_=>{try{l(U.throw(_))}catch(Q){V(Q)}},l=_=>_.done?O(_.value):Promise.resolve(_.value).then(q,it);l((U=U.apply(S,E)).next())});const et=function(S,E){this.init(S,E)},G=et.prototype;G.init=function(S,E){this.trackLayout=E,this.queue=E.queue;const U=E.getScoreDataCache();this.updateActionsExtractor=new m.default(U);const O=E.getMeasuresContainer(),V=E.getMeasureProvider(),q=E.getDrawingContext();this.measureColumnsUpdater=new v.default(O,V,q,U),this.updateData=null},G.forceDisplayMeasure=function(S){return this.queue.add(()=>H(this,null,function*(){D.HAS_PERF_API&&performance.mark("adagio.forceDisplayMeasure.s"),this.lockDisplay("_trackDisplayUpdater.forceDisplayMeasure");try{yield this._forceDisplayMeasure(S),this.unlockDisplay(),D.HAS_PERF_API&&(performance.mark("adagio.forceDisplayMeasure.e"),performance.measure("adagio.forceDisplayMeasure","adagio.forceDisplayMeasure.s","adagio.forceDisplayMeasure.e"))}catch(E){throw this.unlockDisplay(),D.HAS_PERF_API&&(performance.mark("adagio.forceDisplayMeasure.e"),performance.measure("adagio.forceDisplayMeasure","adagio.forceDisplayMeasure.s","adagio.forceDisplayMeasure.e")),E}}))},G._forceDisplayMeasure=function(S){return H(this,null,function*(){const{measureIdx:E}=this.trackLayout.uuidToIdx(S),U=this.trackLayout.getNbMeasures();if(E>=U)return;let{startMeasureIdx:O,stopMeasureIdx:V}=this.trackLayout.getMeasuresRange();if(O<=E&&E<V)return;O=Math.min(O,E),V=Math.max(V,E+1);const q={startMeasureIdx:O,stopMeasureIdx:V};this.trackLayout.privateSetMeasuresRange(q),yield this.applyDisplayRangeToContent(!0)})},G.updateDisplayRange=function(S){return H(this,null,function*(){this.lockDisplay("_trackDisplayUpdater.update");try{D.HAS_PERF_API&&performance.mark("adagio.updateDisplayRange.s"),yield this._updateDisplayRange(S),this.unlockDisplay(),D.HAS_PERF_API&&(performance.mark("adagio.updateDisplayRange.e"),performance.measure("adagio.updateDisplayRange","adagio.updateDisplayRange.s","adagio.updateDisplayRange.e"))}catch(E){throw this.unlockDisplay(),D.HAS_PERF_API&&(performance.mark("adagio.updateDisplayRange.e"),performance.measure("adagio.updateDisplayRange","adagio.updateDisplayRange.s","adagio.updateDisplayRange.e")),E}})},G._updateDisplayRange=function(S){return H(this,null,function*(){this.updateData=null,this.trackLayout.privateSetDisplayRange(S),yield this.applyDisplayRangeToContent()})},G.applyDisplayRangeToContent=function(S){return H(this,null,function*(){const E=this.updateMeasures([]);let U=!1;const O=this.trackLayout.getMeasuresSlice(),V=this.trackLayout.getMeasuresContainer(),q=this.trackLayout.getMeasureProvider();yield g(O,V,q,E),E.addedStaffMeasures.length>0&&(U=!0),O.popOverflowMeasures().length>0&&(U=!0),nt(V,q),this.updateData=E;const it=O.firstDisplayedMeasureIdx;S&&this.trackLayout.updateDisplayRangeFromMeasureRange(),ot(this.trackLayout.displayRangeRef.displayRange,O),S||this.trackLayout.updateMeasuresRange(),it!==O.firstDisplayedMeasureIdx&&(U=!0),U&&(O.updateChildrenBindings(),O.updateMeasuresLastOfSystem(),yield(0,T.default)(),this.updateShards(),yield(0,T.default)(),this.trackLayout.fakeMeasures.update(),this.trackLayout.measuresNumbersPanel&&this.trackLayout.measuresNumbersPanel.update(),this.trackLayout.updateSvgSize())})},G.update=function(S){return this.queue.add(()=>H(this,null,function*(){this.lockDisplay("_trackDisplayUpdater.update"),D.HAS_PERF_API&&performance.mark("adagio.update.s");try{yield this._update(S),this.unlockDisplay(),D.HAS_PERF_API&&(performance.mark("adagio.update.e"),performance.measure("adagio.update","adagio.update.s","adagio.update.e"))}catch(E){throw this.unlockDisplay(),D.HAS_PERF_API&&(performance.mark("adagio.update.e"),performance.measure("adagio.update","adagio.update.s","adagio.update.e")),E}}))},G.lockDisplay=function(S){this.trackLayout.lockDisplay(S)},G.unlockDisplay=function(){this.trackLayout.unlockDisplay()},G._update=function(S){return H(this,null,function*(){this.updateData=null;const E=this.cancelStackToUpdateData(S);this.updateVoices(E.voice);const U=this.updateMeasures(E.measure,E.hasMmrChange);yield this.updateSlice(U),this.updateShards(),this.updateData=U,this.trackLayout.fakeMeasures.update(),this.trackLayout.measuresNumbersPanel&&this.trackLayout.measuresNumbersPanel.update(),this.trackLayout.updateSvgSize(),this.trackLayout.updateMeasuresRange(),this.trackLayout.stateSyncWithData()})},G.cancelStackToUpdateData=function(S){const E=this.trackLayout.getNbMeasures(),U=this.updateActionsExtractor.extract(S,E);return{measure:U.measureActions,voice:U.voiceActions,hasMmrChange:U.hasMmrChange}},G.updateVoices=function(S){const E=this.trackLayout.getMeasuresSlice();C(E,S)},G.updateMeasures=function(S,E){const U=this.measureColumnsUpdater.update(S);return E&&(U.updateMeasureIdxFrom=0),this.updateMeasureIdx(U),U},G.updateMeasureIdx=function(S){let E=S.updateMeasureIdxFrom;if(S.hasMmrChange&&(E=0),E!==null){const U=this.trackLayout.getMeasuresContainer(),O=this.trackLayout.getMeasureProvider();(0,B.default)(U,O,E)}},G.updateSlice=function(S){return H(this,null,function*(){const E=this.trackLayout.getMeasuresSlice();E.needRecomputeUsedWidth()&&E.recomputeUsedWidth();const U=this.trackLayout.getMeasuresContainer(),O=this.trackLayout.getMeasureProvider();yield g(E,U,O,S),E.popOverflowMeasures(),nt(U,O),ot(this.trackLayout.displayRangeRef.displayRange,E),E.updateChildrenBindings(),E.updateMeasuresLastOfSystem()})};function ot(S,E){const U=(0,N.default)(S,E);E.setFirstDisplayedMeasure(U)}function nt(S,E){const U=S.getUnbindedMeasures();E.handBackMeasures(U)}G.updateShards=function(){const S=this.trackLayout.getScoreShard();s(S),S.drawContentRec()},G.getGeometries=function(){const S=this.trackLayout.getMeasuresSlice();return x(S)},G.getRemovedPagesIndexes=function(){return[]};const st=et},788116:($,L,h)=>{"use strict";h.d(L,{A:()=>B});var m=h(268003);const B=(0,m.A)("pianoKeyboard16",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"17",fill:"currentcolor"},[["path",{d:"M9.999 3.564h-.666v4.04c-.402.064-.978.235-1.695.659a5 5 0 0 0-.305.196V3.564H6V8.9a.663.663 0 0 1-.666.663h-.668A.67.67 0 0 1 4 8.9V3.564h-.66c-.745 0-1.34.597-1.34 1.34v6.653c0 .745.597 1.34 1.34 1.34H5.5q.127.355.337.667H3.34a2.003 2.003 0 0 1-2.006-2.007V4.904A2 2 0 0 1 3.34 2.897h6.659zm-4.666 8.148a3 3 0 0 0 0 .362v.823h-.666V9.564h.667zm9.333-5.941-.461.46-2.206-1.694v6.027h-.004c0 .88-.618 1.867-1.647 2.48-1.36.813-2.919.66-3.48-.347-.56-1 .088-2.473 1.448-3.286 1.084-.64 2.285-.667 3.016-.147v-5.7h.667z"}]])},870760:($,L,h)=>{"use strict";h.d(L,{A:()=>v});const v=(()=>{let B=!1;try{const N=Object.defineProperty({},"passive",{get(){return B=!0,null}});window.addEventListener("test",null,N)}catch(N){}return B?{passive:!0}:!1})()},885147:($,L,h)=>{"use strict";h.d(L,{A:()=>B});var m=h(268003);const B=(0,m.A)("infoFilled16",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentcolor"},[["path",{"fill-rule":"evenodd",d:"M8 1.333A6.67 6.67 0 0 0 1.333 8 6.67 6.67 0 0 0 8 14.667 6.67 6.67 0 0 0 14.667 8 6.67 6.67 0 0 0 8 1.333M8 6a.667.667 0 1 0 0-1.333A.667.667 0 0 0 8 6m-.667 4.667c0 .366.3.666.667.666s.667-.3.667-.666V8c0-.367-.3-.667-.667-.667s-.667.3-.667.667z","clip-rule":"evenodd"}]])},971609:($,L,h)=>{"use strict";h.d(L,{A:()=>B});var m=h(268003);const B=(0,m.A)("checkCircleBg16",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentcolor"},[["path",{"fill-rule":"evenodd",d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m3.753-10.773a.787.787 0 0 0-1.13.025l-3.54 3.779-1.736-1.664-.062-.055a.787.787 0 0 0-1.069.092.83.83 0 0 0 .037 1.156l2.313 2.219.062.053c.32.25.779.22 1.063-.084l4.087-4.364.053-.063a.83.83 0 0 0-.078-1.094","clip-rule":"evenodd"}]])},992218:($,L,h)=>{"use strict";h.d(L,{A:()=>B});var m=h(268003);const B=(0,m.A)("play16",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentcolor"},[["path",{"fill-rule":"evenodd",d:"M3 2.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18a1 1 0 0 0 0-1.69L4.54 1.98A.998.998 0 0 0 3 2.82","clip-rule":"evenodd"}]])}}]);})();


//# debugId=7050fdbb-9a20-5acd-ba59-169d79044ddb

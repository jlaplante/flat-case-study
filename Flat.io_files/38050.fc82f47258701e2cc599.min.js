"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="19a90f66-6a6d-59a9-aab6-348510fa3e94")}catch(e){}}();
(()=>{/*! Copyright (c) 2025 Tutteo Ltd. */(self.webpackChunk_flat_flat=self.webpackChunk_flat_flat||[]).push([[38050],{42651:(v,u,s)=>{s.d(u,{default:()=>f});var a=s(635120),i=s(736252);const o=a.default.prototype,f=function(_){const l=(0,i.A)(_);o[_.NAME]=l}},52275:(v,u,s)=>{s.d(u,{default:()=>i});var a=s(21738);const i=a.default},73705:(v,u,s)=>{s.d(u,{A:()=>f});var a=s(737903),i=s(612487);function o(_,l){return(0,i.A)(_,l),l.noteIdx===0}var C=s(727447);function f(_,l){return o(_,l)?(0,C.A)(_,l):(l=(0,a.default)(l),l.noteIdx--,delete l.graceIdx,l)}},179397:(v,u,s)=>{s.d(u,{A:()=>i});var a=s(957740);function i(o,C){return(0,a.A)(o,C).getNbNotes()}},190361:(v,u,s)=>{s.d(u,{A:()=>o});var a=s(163266),i=s(730681);function o(C,f){const _=(0,a.A)(C,f),l=C.getPartNbStaves(_);return(0,i.A)(C,f)===l-1}},279140:(v,u,s)=>{s.d(u,{default:()=>f});var a=s(515819),i=s(209175),o=s(607682);const C=function(_,l,P){const D=a.default.durationToFractionString(_,P),c=a.default.durationToFractionString(l,P);return`There is not enough space available. Space needed: ${D} quarter notes, space available: ${c}. `};class f extends o.default{constructor(l,P,D,c){let d=a.default.actualToNormal(l,c),p=a.default.actualToNormal(P,c),T=D;const I=1/a.default.extractSmallestBaseDuration(d);I>1&&(d*=I,p*=I,T*=I);const y=C(d,p,T);super(y),Object.defineProperty(this,"requiredSpace",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"availableSpace",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"divisionsPerQuarter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeModif",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="NotEnoughSpaceError",this.requiredSpace=d,this.availableSpace=p,this.divisionsPerQuarter=T,this.timeModif=i.default.copy(c)}}},287296:(v,u,s)=>{s.d(u,{default:()=>f});var a=s(139560),i=s(377180),o=s(351277);const f=function(_,l){if(!l.isConcertPitch)return;const P=(0,a.A)(l);let D=_.getTranspose(P);if(i.default.isIdentity(D))return;D=i.default.getReverse(D);let c=l.pitch;c=o.default.transpose(c,D),l.pitch=o.default.copyWithoutAlter(c),l.isConcertPitch=!1}},349386:(v,u,s)=>{s.d(u,{default:()=>i});var a=s(892853);const i=a.A},370281:(v,u,s)=>{s.d(u,{A:()=>i});var a=s(163266);function i(o,C){const f=(0,a.A)(o,C),_=o.getNbParts();return f===_-1}},373032:(v,u,s)=>{s.d(u,{A:()=>i});var a=s(514263);function i(o,C){return(0,a.A)(o,C)===0}},465730:(v,u,s)=>{s.d(u,{default:()=>C});var a=s(420771),i=s(726042);const o={};o.MAX=5,o.MIN=0,o.check=function(f){if(!o.isValid(f))throw new a.A(f)},o.isValid=function(f){return i.default.isInteger(f)&&f>=o.MIN&&f<=o.MAX};const C=o},476031:(v,u,s)=>{s.d(u,{default:()=>f});var a=s(351277),i=s(26927),o=s(754272);const f=function(_,l,P){if(typeof l.line!="undefined"){const D=(0,i.A)(_,l);P&&(0,o.A)(_,l),l.pitch=a.default.lineToPitch(l.line,D),delete l.line}}},519405:(v,u,s)=>{s.d(u,{default:()=>i});var a=s(948507);const i=a.default},543371:(v,u,s)=>{s.d(u,{default:()=>i});const i={NAME:"action.ChangeDurationRest"}},578918:(v,u,s)=>{s.d(u,{default:()=>i});var a=s(696761);const i=a.A},595562:(v,u,s)=>{s.d(u,{A:()=>D});var a=s(123491),i=s(726042),o=s(701387),C=s(963202),f=s(769944),_=s(883325),l=s(612487),P=s(891921);function D(c,d,p,T){(0,l.A)(c,d);const I=(0,C.A)(c,d),y=(0,_.A)(c,d),K=I.getVoice(y);(0,f.A)(d,p);let V=K.getRangeSpace(0,d.noteIdx);if(T){const R=K.getNote(d.noteIdx);V+=a.default.getDuration(R)}const Y=(0,C.A)(c,p),Q=(0,_.A)(c,p),G=Y.getVoice(Q),L=I.getMeasure();if(V===o.default.getNbDivisions(L))return G.getNbNotes()-1;const k=I.getDpqValue(),w=Y.getDpqValue(),ot=i.default.lcm(w,k),m=V*ot/k,g=ot/w;return(0,P.A)(G,g,m)}},691309:(v,u,s)=>{s.d(u,{default:()=>i});var a=s(261586);const i=a.A},696847:(v,u,s)=>{s.d(u,{default:()=>i});var a=s(25606);function i(f,_){if(f===null)return 0;const l=o(_);return(0,a.A)(l,f).startMeasureIdx}const o=function(f){f.recomputeUsedWidth(),f.needRecomputeUsedWidth()&&f.recomputeUsedWidth();const _=f.measures.map(C),l=_.length,P=[0];let D=0;for(let c=0;c<l-1;c++){const d=_[c];D+=d,P.push(D)}return P};function C(f){return f.getWidth()}},700106:(v,u,s)=>{s.d(u,{A:()=>_});var a=s(163266),i=s(514263),o=s(883325),C=s(612487),f=s(832560);function _(l,P){(0,C.A)(l,P);const D=(0,a.A)(l,P),c=(0,i.A)(l,P),d=(0,o.A)(l,P),p=l.getMeasure(D,c),y=new f.A(p).getVoice(d).getNbNotes();return P.noteIdx===y-1}},704621:(v,u,s)=>{s.d(u,{default:()=>i});var a=s(131220);const i=a.default},727447:(v,u,s)=>{s.d(u,{A:()=>l});var a=s(737903),i=s(514263),o=s(373032),C=s(206766),f=s(595110),_=s(855244);function l(P,D){if((0,o.A)(P,D))return(0,_.A)(P,D);{D=(0,a.default)(D);const c=(0,i.A)(P,D);return D.measureUuid=P.getMeasureUuid(c-1),D=(0,f.A)(P,D),(0,C.A)(P,D)}}},737296:(v,u,s)=>{s.d(u,{default:()=>i});var a=s(799855);const i=a.default},783177:(v,u,s)=>{s.d(u,{default:()=>i});var a=s(665280);const i=a.default},788705:(v,u,s)=>{s.d(u,{default:()=>ot});var a=s(476943),i=s(123491),o=s(209175),C=s(737296),f=s(208979),_=s(901095),l=s(823722),P=s(3771),D=s(765350),c=s(272980),d=s(145170),p=s(414208),T=s(846541),I=s(705967),y=s(704588),K=s(487332),V=s(805396),Y=s(349386),Q=s(793317),G=s(257818),L=s(519405);const k=function(m,g,x){this.init(m,g,x)};k.NAME="composite.ChangeDuration";const w=k.prototype;w.initMeasureData=Q.default,w.name=k.NAME,w.init=function(m,g,x){this.initMeasureData(m,g),this.cancelStack=x,this.opts=g},w.perform=function(){this.cancelStack=this.cancelStack.createSubstack(this.name),this.adaptDpqToOptsDuration(),this.adaptDpqToTimeSignature(),this.adaptDpqToTuplet(),this.removeTemolo2();const m=this.getActualDuration(),g=this.getRequiredDuration(),x=Math.abs(m-g);g>m&&(this.lockRests(x),this.consumeSpace(x)),this.changeDuration(),g<m&&((this.opts.insertMode===C.default.REPLACE||this.isLastNote())&&(this.untieIfPossible(),this.removeHammerOnPullOffsIfPossible(),this.removeGlissandosIfPossible(),this.removeSlideIfPossible()),this.opts.insertMode===C.default.INSERT&&(this.removeVoiceRightTie(),this.removeVoiceRightGlissandos(),this.removeVoiceRightSlide()),this.addSpace(x));const R=this.measureData.getVoice(this.opts.voiceIdx);(0,G.A)(R,this.opts.noteIdx+1)},w.getActualDuration=function(){const g=this.getVoice().getNote(this.opts.noteIdx);return i.default.getDuration(g)},w.getRequiredDuration=function(){const m=this.measureData.getDpqValue(),g=this.getTimeModif();return(0,Y.default)(this.opts,m,g)},w.adaptDpqToOptsDuration=function(){const m=o.default.copy(this.getTimeModif()),g={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,nbDots:this.opts.nbDots,durationType:this.opts.durationType,timeModif:m};new P.A(this.measureData,g,this.cancelStack).perform()},w.adaptDpqToTimeSignature=function(){const m={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx};new D.A(this.measureData,m,this.cancelStack).perform()},w.adaptDpqToTuplet=function(){const m={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,voiceIdx:this.opts.voiceIdx,noteIdx:this.opts.noteIdx};new c.A(this.measureData,m,this.cancelStack).perform()},w.removeTemolo2=function(){const g=this.getVoice().getNote(this.opts.noteIdx);if(i.default.hasTremoloStart(g)){const x={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,voiceIdx:this.opts.voiceIdx,noteIdx:this.opts.noteIdx},R=new V.default(this.measureData,x,this.cancelStack);(0,L.default)(R)}if(i.default.hasTremoloStop(g)){const x={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,voiceIdx:this.opts.voiceIdx,noteIdx:this.opts.noteIdx-1},R=new V.default(this.measureData,x,this.cancelStack);(0,L.default)(R)}},w.getVoice=function(){return this.measureData.getVoice(this.opts.voiceIdx)},w.getTimeModif=function(){return this.getVoiceOrTupletForGet().getAbsoluteTimeModif()},w.getVoiceOrTupletForGet=function(){const m=this.opts.voiceIdx,g=this.opts.noteIdx;return this.measureData.getVoiceOrTupletForGet(m,g)},w.isLastNote=function(){const m=this.getVoiceOrTupletForGet();return this.opts.noteIdx===m.getStopNoteIdx()},w.changeDuration=function(){new f.A(this.measureData,this.opts,this.cancelStack).perform()},w.lockRests=function(m){const g={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,voiceIdx:this.opts.voiceIdx,noteIdx:this.opts.noteIdx+1,insertMode:this.opts.insertMode,duration:m};new d.A(this.measureData,g,this.cancelStack).perform()},w.consumeSpace=function(m){const g={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,voiceIdx:this.opts.voiceIdx,noteIdx:this.opts.noteIdx+1,insertMode:this.opts.insertMode,duration:m};new l.A(this.measureData,g,this.cancelStack).perform()},w.untieIfPossible=function(){let g=this.measureData.getVoice(this.opts.voiceIdx).getChord(this.opts.noteIdx);if(g=a.default.makeArray(g),!g.some(i.default.hasTieStart))return;const x={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,voiceIdx:this.opts.voiceIdx,noteIdx:this.opts.noteIdx},R=this.measureData.isUnpitched()?T.default:p.default,H=new R(this.measureData,x,this.cancelStack);(0,L.default)(H)},w.removeHammerOnPullOffsIfPossible=function(){let g=this.measureData.getVoice(this.opts.voiceIdx).getChord(this.opts.noteIdx);if(g=a.default.makeArray(g),!g.some(i.default.hasHammerOnPullOffStart))return;const x={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,voiceIdx:this.opts.voiceIdx,noteIdx:this.opts.noteIdx},R=new K.default(this.measureData,x,this.cancelStack);(0,L.default)(R)},w.removeGlissandosIfPossible=function(){let g=this.measureData.getVoice(this.opts.voiceIdx).getChord(this.opts.noteIdx);if(g=a.default.makeArray(g),!g.some(i.default.hasGlissandoStart))return;const x={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,voiceIdx:this.opts.voiceIdx,noteIdx:this.opts.noteIdx},R=new I.default(this.measureData,x,this.cancelStack);(0,L.default)(R)},w.removeSlideIfPossible=function(){let g=this.measureData.getVoice(this.opts.voiceIdx).getChord(this.opts.noteIdx);if(g=a.default.makeArray(g),!g.some(i.default.hasSlideStart))return;const x={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,voiceIdx:this.opts.voiceIdx,noteIdx:this.opts.noteIdx},R=new y.default(this.measureData,x,this.cancelStack);(0,L.default)(R)},w.addSpace=function(m){const g=this.getStaffIdx(),x={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,staffIdx:g,voiceIdx:this.opts.voiceIdx,noteIdx:this.opts.noteIdx+1,insertMode:this.opts.insertMode,duration:m};new _.A(this.measureData,x,this.cancelStack).perform()},w.getStaffIdx=function(){const g=this.getVoice().getNote(this.opts.noteIdx);return i.default.getStaffIdx(g)},w.removeVoiceRightTie=function(){const m=this.getVoiceOrTupletForGet(),g=m.getStopNoteIdx();let x=m.getChord(g);if(x=a.default.makeArray(x),!x.some(i.default.hasTieStart))return;const R={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,voiceIdx:this.opts.voiceIdx,noteIdx:g},H=this.measureData.isUnpitched()?T.default:p.default,U=new H(this.measureData,R,this.cancelStack);(0,L.default)(U)},w.removeVoiceRightGlissandos=function(){const m=this.getVoiceOrTupletForGet(),g=m.getStopNoteIdx();let x=m.getChord(g);if(x=a.default.makeArray(x),!x.some(i.default.hasGlissandoStart))return;const R={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,voiceIdx:this.opts.voiceIdx,noteIdx:g},H=new I.default(this.measureData,R,this.cancelStack);(0,L.default)(H)},w.removeVoiceRightSlide=function(){const m=this.getVoiceOrTupletForGet(),g=m.getStopNoteIdx();let x=m.getChord(g);if(x=a.default.makeArray(x),!x.some(i.default.hasSlideStart))return;const R={partIdx:this.opts.partIdx,measureIdx:this.opts.measureIdx,voiceIdx:this.opts.voiceIdx,noteIdx:g},H=new y.default(this.measureData,R,this.cancelStack);(0,L.default)(H)};const ot=k},842746:(v,u,s)=>{s.d(u,{A:()=>i});var a=(o=>(o.NOTE="note",o.NOTE_HEAD="note-head",o.FRET="fret",o.CREDIT="credit",o.SLUR="slur",o.WEDGE="wedge",o.OCTAVE_SHIFT="octave_shift",o.PLUCKED_RANGE="plucked_range",o.TEMPO_CHANGE="tempo_change",o.DYNAMICS="dynamics",o.RANGE_SELECTION="range_selection",o.PART_NAME="part_name",o.CLEF="clef",o.PIZZICATO="pizzicato",o.TEXT_ANNOTATION="text_annotation",o.LYRIC="lyric",o.MUTE="mute",o.JAZZ_HARMONY="jazz_harmony",o.PIANO_PEDAL="piano_pedal",o.ROMAN_NUMERAL="roman_numeral",o.FIGURED_BASS="figured_bass",o.KEY_SIGNATURE="key_signature",o.TIME_SIGNATURE="time_signature",o.TEMPO="tempo",o.REHEARSAL="rehearsal",o.SWING="swing",o.TEARDROP_CURSOR="teardrop-cursor",o.PLAYBACK_SLIDER="playback_slider",o.MEASURE_OUTLINE="measure_outline",o.INSERT_CURSOR="insert-cursor",o.ANCHOR="anchor",o.STAFF_MEASURE="staff_measure",o.SYSTEM_BREAK="system-break",o.PAGE_BREAK="page-break",o.BARLINE_REPEAT_TIMES="barline-repeat-times",o.MULTI_MEASURE_REST="multi-measure-rest",o))(a||{});const i=a},878363:(v,u,s)=>{s.d(u,{default:()=>Q});var a=s(582558),i=s(364842);const o="revert",C="mouse",f="keyboardShortcut",_="keyboardFretNumber",l="touchUiPiano",P="touchUiDrums",D="touchUiFretboard",c="midiStep",d="tie",p="unknown",T=p,I=[o,C,f,_,l,P,D,c,d,p];function y(G){const L=`The add note source value: [${G}] is invalid`;throw new i.default("BadAddNoteSource",L)}function K(G){if(!V(G))throw new a.A(G)}function V(G){return I.includes(G)}function Y(){return{REVERT:o,MOUSE:C,KEYBOARD_SHORTCUT:f,KEYBOARD_FRET_NUMBER:_,TOUCH_UI_PIANO:l,TOUCH_UI_DRUMS:P,TOUCH_UI_FRETBOARD:D,MIDI_STEP:c,TIE:d,UNKNOWN:p}}const Q={REVERT:o,MOUSE:C,KEYBOARD_SHORTCUT:f,KEYBOARD_FRET_NUMBER:_,TOUCH_UI_PIANO:l,TOUCH_UI_DRUMS:P,TOUCH_UI_FRETBOARD:D,MIDI_STEP:c,TIE:d,UNKNOWN:p,DEFAULT:T,values:I,raiseError:y,check:K,isValid:V,getObject:Y}},886170:(v,u,s)=>{s.d(u,{A:()=>D});var a=s(737903),i=s(370281),o=s(190361);function C(c,d){return(0,i.A)(c,d)&&(0,o.A)(c,d)}var f=s(163266),_=s(730681),l=s(595110),P=s(595562);function D(c,d){if(C(c,d))return d;let p=(0,a.default)(d);const T=(0,f.A)(c,d);if((0,o.A)(c,d)){const K=T+1;p.partUuid=c.getPartUuid(K),p.staffUuid=c.getPartStaffUuid(K,0)}else{const K=(0,_.A)(c,d);p.staffUuid=c.getPartStaffUuid(T,K+1)}delete p.graceIdx,delete p.voiceUuid,p=(0,l.A)(c,p);const y=(0,P.A)(c,d,p,!1);return p.noteIdx=y,p}},898039:(v,u,s)=>{s.d(u,{default:()=>i});var a=s(39584);const i=a.A},920939:(v,u,s)=>{s.d(u,{A:()=>D});var a=s(104907),i=s(364842);const o=5;function C(c,d){if(c<1)throw new i.default("unexpected","Line has to be an integer above the value of 1");return(c-1)*d}function f(c,d,p,T){P(T);let I=T-c;if(c>=0&&c<=T+1)return _(c,p,T);if(c>T+1)return I+=1,I*d-p;if(c<0)return I-=T,T*p+I*d;throw new i.default("Unexpected")}function _(c,d,p){return P(p),(p-c)*d}function l(c,d,p){return P(p),p-c/d}function P(c){if(!a.default.isNbStaffLinesValid(c)){const d=`The number of staff lines [${c}] is invalid.`;throw new i.default("Unexpected",d)}}const D={DEFAULT_NB_LINES:o,stringToY:C,lineToTabY:f,lineToY:_,yToLine:l}},942617:(v,u,s)=>{s.d(u,{A:()=>C});var a=s(737903),i=s(700106),o=s(567099);function C(f,_){return(0,i.A)(f,_)?(0,o.A)(f,_):(_=(0,a.default)(_),_.noteIdx++,delete _.graceIdx,_)}},948507:(v,u,s)=>{s.d(u,{default:()=>c});var a=s(364842),i=s(607682),o=s(951066),C=s(31278),f=s(330369);const _=function(d,p){p=p||l;let T=!0;try{d.checkPreconditions()}catch(I){if(I instanceof f.A)throw I;if(!p(I))if(P(I))D(d,I);else throw I;T=!1}return T&&d.perform(),T},l=function(){return!1},P=function(d){return d instanceof i.default||d instanceof C.default||d instanceof o.A};function D(d,p){const T=`Error while performing action [${d.name}]: ${p.message}`,I=new a.default(T);throw I.cause=p,I.actionName=d.name,I}_.requalifyException=D;const c=_},957740:(v,u,s)=>{s.d(u,{A:()=>o});var a=s(963202),i=s(883325);function o(C,f){const _=(0,i.A)(C,f);return(0,a.A)(C,f).getVoice(_)}},972375:(v,u,s)=>{s.d(u,{A:()=>Ee});var a=s(213489),i=s(339406),o=s(282610),C=s(934825),f=s(83738),_=s(191167),l=s(259563),P=s(353922),D=s(351277);const c=function(t){this.init(t)};c.cssClass="NoteCursor";const d=c.prototype;d.init=function(t){this.drawingContext=t,this.renderedNote=null,this.parentGroup=null},d.update=function(t,e,r,n,h){if(n=n||0,this.isShifted=h,this.hide(),this.line=t,t>D.default.MAX_LINE||t<D.default.MIN_LINE)return;const E={lines:[t],quarterBaseDuration:l.default.toQuarterDuration(r),nbDots:n,heads:[{line:t,step:e,alter:0,cStep:e,cAlter:0,notehead:P.A.NORMAL}]};this.displayData=new i.A(E),this.renderedNote=new o.A(this.displayData),this.renderedNote.setDrawingContext(this.drawingContext),this.renderedNote.setCssClass(c.cssClass),this.renderedNote.initLocalVerticalAlignment(),this.drawHead(h),this.drawLegeLines(),this.drawDots(),this.renderedNote.bindHeads()},d.drawHead=function(){const t=new C.A(this.displayData);t.canDraw()&&t.draw(this.renderedNote,this.drawingContext)},d.drawLegeLines=function(){const t=new f.A(this.displayData);t.canDraw()&&t.draw(this.renderedNote,this.drawingContext)},d.drawDots=function(){const t=new _.A(this.displayData);t.canDraw()&&t.draw(this.renderedNote,this.drawingContext)},d.getHead=function(){return this.renderedNote.getHead(this.line)},d.setPosition=function(t){this.isShifted&&(t-=this.drawingContext.getSpaceSize()*1.5),this.renderedNote.setPosition(t)},d.move=function(){this.renderedNote.move()},d.setParent=function(t){this.parentGroup=t,this.renderedNote.setParent(t),this.renderedNote.bindToParent()},d.canBeDrawn=function(){return this.renderedNote!==null},d.hide=function(){this.parentGroup!==null&&(this.parentGroup=null,this.renderedNote.unbindFromParent()),this.renderedNote=null},d.getGroup=function(){return this.renderedNote.getGroup()};const p=c,T=function(t){this.init(t)};T.cssClass="notePercuCursor";const I=T.prototype;I.init=function(t){this.drawingContext=t,this.renderedNote=null,this.parentGroup=null},I.update=function(t){this.hide(),t.nbDots=t.nbDots||0,this.line=t.line;const e={lines:[t.line],quarterBaseDuration:l.default.toQuarterDuration(t.durationType),nbDots:t.nbDots,heads:[{line:t.line,notehead:t.notehead}]};this.displayData=new i.A(e),this.renderedNote=new o.A(this.displayData),this.renderedNote.setDrawingContext(this.drawingContext),this.renderedNote.setCssClass(T.cssClass),this.renderedNote.initLocalVerticalAlignment(),this.drawHead(),this.drawLegeLines(),this.drawDots(),this.renderedNote.bindHeads()},I.drawHead=function(){const t=new C.A(this.displayData);t.canDraw()&&t.draw(this.renderedNote,this.drawingContext)},I.drawLegeLines=function(){const t=new f.A(this.displayData);t.canDraw()&&t.draw(this.renderedNote,this.drawingContext)},I.drawDots=function(){const t=new _.A(this.displayData);t.canDraw()&&t.draw(this.renderedNote,this.drawingContext)},I.canBeDrawn=function(){return this.renderedNote!==null},I.getHead=function(){return this.canBeDrawn()?this.renderedNote.getHead(this.line):null},I.setPosition=function(t){this.renderedNote.setPosition(t)},I.move=function(){this.renderedNote.move()},I.setParent=function(t){this.parentGroup=t,this.renderedNote.setParent(t),this.renderedNote.bindToParent()},I.hide=function(){this.parentGroup!==null&&(this.parentGroup=null,this.renderedNote.unbindFromParent()),this.renderedNote=null},I.getGroup=function(){return this.renderedNote.getGroup()};const y=T;var K=s(364842),V=s(725885),Y=s(737903),Q=s(920939);const G=function(t){this.init(t)};G.cssClass="FretCursor";const L=G.prototype;L.init=function(t){this.drawingContext=t,this.renderedNote=null,this.parentGroup=null},L.update=function(t,e,r){this.hide();const n=e.fret;this.string=parseInt(e.string,10),e=(0,Y.default)(e),e.fret+="",e.string+="";const h={frets:[{string:this.string,fretNumber:n}],technical:e,lines:[],staffData:t};this.displayData=new i.A(h),this.renderedNote=new o.A(this.displayData),this.renderedNote.setDrawingContext(this.drawingContext),this.renderedNote.setCssClass(G.cssClass),this.renderedNote.initLocalVerticalAlignment(),r?this.drawFret():this.drawRectangle()},L.drawRectangle=function(){const t=this.renderedNote.getGroup().append("rect"),e=this.drawingContext.getTabSpaceSize(),r=e,n=e,h=this.displayData.getNbStaffLines(),E=Q.A.stringToY(this.string,e,h)-r/2;t.attr("width",n),t.attr("height",r),t.attr("class","rect-cursor"),t.attr("transform",`translate(0, ${E})`),t.attr("rx",e/4),this.renderedNote.setFret(this.string,t)},L.drawFret=function(){const t=new V.A(this.displayData);t.canDraw()&&t.draw(this.renderedNote,this.drawingContext)},L.getHead=function(){return this.renderedNote.getFret(this.string)},L.setPosition=function(t){this.renderedNote.setPosition(t)},L.move=function(){this.renderedNote.move()},L.setParent=function(t){this.parentGroup=t,this.renderedNote.setParent(t),this.renderedNote.bindToParent()},L.canBeDrawn=function(){return this.renderedNote!==null},L.hide=function(){this.parentGroup!==null&&(this.parentGroup=null,this.renderedNote.unbindFromParent()),this.renderedNote=null},L.getGroup=function(){return this.renderedNote.getGroup()};const k=G;var w=s(832560),ot=s(411259),m=s(663534),g=s(104907),x=s(589085);const R={FRET:"fret",NOTE:"note"},H=function(t){this.init(t)};H.cssClass="TabCursor";const U=H.prototype;U.init=function(t){this.settedType=null,this.noteCursor=null,this.fretCursor=null,this.drawingContext=t},U.updateLine=function(t,e,r,n,h){const E=new w.A(t);this.settedType=R.NOTE,this.inferFret(E,e),this.updateNote(e.line,r,n,h),this.updateFret(E,e.fretData,!0)},U.updateTechnicalFret=function(t,e){const r=new w.A(t);this.settedType=R.FRET,this.updateFret(r,e.fretData,!1)},U.updateNote=function(t,e,r,n){this.noteCursor===null&&(this.noteCursor=new p(this.drawingContext)),this.noteCursor.update(t,e,r,n)},U.updateFret=function(t,e,r){this.fretCursor===null&&(this.fretCursor=new k(this.drawingContext));const h=t.getStaffDetails(0),E=x.A.createFromStaffDetails(h);this.fretCursor.update(E,e,r)},U.inferFret=function(t,e){const n=t.getStaffDetails(0),h=g.default.toClef(n),E=D.default.lineToPitch(e.line,h);e.fretData=(0,m.A)(E,n)},U.inferLine=function(t,e){e.staffIdx=0,(0,ot.A)(t,e);const r=e.pitch,n=t.getClef(e.staffIdx);e.line=D.default.pitchToLine(r,n)},U.getHeads=function(){const t=this.getNoteHead(),e=this.getFretHead();return{note:t,fret:e}},U.getNoteHead=function(){return this.noteCursor.getHead()},U.getFretHead=function(){return this.fretCursor.getHead()},U.hasNoteCursor=function(){return this.noteCursor!==null},U.getNoteCursor=function(){return this.noteCursor},U.getFretCursor=function(){return this.fretCursor},U.canBeDrawn=function(){return this.settedType===R.FRET?this.fretCursor.canBeDrawn():this.noteCursor.canBeDrawn()&&this.fretCursor.canBeDrawn()},U.hide=function(){this.settedType=null,this.hasNoteCursor()&&this.noteCursor.hide(),this.fretCursor.hide()},U.getGroup=function(){if(this.settedType===R.NOTE)return this.getNoteGroup();if(this.settedType===R.FRET)return this.getTabGroup();throw new K.default("Unexpected")},U.getNoteGroup=function(){return this.noteCursor.getGroup()},U.getTabGroup=function(){return this.fretCursor.getGroup()};const Bt=H;var at=s(612040),Gt=s(793491),Et=s(443838);const ut=function(t){this.init(t)};ut.cssClass="WedgeCursor";const Z=ut.prototype;Z.init=function(t){this.drawingContext=t,this.wedges=[],this.type=null,this.placement=null},Z.update=function(t){this.hide(),this.type=t.type,this.placement=t.placement},Z.addSegment=function(t,e,r,n,h){const E=Wt(r),M=new Et.A(this.type,this.placement,E,r),N=t.getMeasure(e);M.setMeasure(N),M.setMeasureIdx(e),M.setDrawingContext(this.drawingContext);const S=yt(h),O=new Et.A(this.type,this.placement,S,h),W=t.getMeasure(n);O.setMeasure(W),O.setMeasureIdx(n),O.setDrawingContext(this.drawingContext);const $=t.getWedgesContainer().getGroup(),A=new Gt.A;A.setLeftAnchor(M),A.setRightAnchor(O),A.setParent($),A.setDrawingContext(this.drawingContext),A.setCssClass(ut.cssClass),A.updateHorizontalDisplay(),A.updateVerticalDisplay(),this.wedges.push(A)};const Wt=function(t){return t===null?at.A.LEFT_CONTINUE:at.A.LEFT},yt=function(t){return t===null?at.A.RIGHT_CONTINUE:at.A.RIGHT};Z.hide=function(){this.wedges.forEach(Kt),this.wedges=[]};const Kt=function(t){t.unbindFromParent()};Z.getGroup=function(){return this.getGroups()},Z.getGroups=function(){return this.wedges.map(Ft)};const Ft=function(t){return t.getGroup()};Z.canBeDrawn=function(){return!0};const jt=ut;var Vt=s(631294);const dt=function(t){this.init(t)};dt.cssClass="dynamicCursor";const q=dt.prototype;q.init=function(t){this.drawingContext=t,this.dynamic=null,this.parentGroup=null},q.update=function(t,e){this.hide();const r=0;this.dynamic=new Vt.A(t,e,r),this.dynamic.setCssClass(dt.cssClass),this.dynamic.render(this.drawingContext)},q.setPosition=function(t){this.dynamic.setPosX(t)},q.setParent=function(t){this.parentGroup=t,this.dynamic.setParent(t)},q.draw=function(){this.dynamic.draw()},q.hide=function(){this.parentGroup!==null&&(this.parentGroup=null,this.dynamic.unbindFromParent()),this.dynamic=null},q.getGroup=function(){return this.dynamic.getGroup()};const Ht=dt;var At=s(658628),zt=s(679333),vt=s(794799),Pt=s(900576),Xt=s(435808);const ct=function(t){this.init(t)};ct.cssClass="slurCursor";const tt=ct.prototype;tt.cssClass=ct.cssClass,tt.init=function(t){this.drawingContext=t,this.slurs=[],this.location=null},tt.setLocation=function(t){this.hide(),this.location=t},tt.canBeDrawn=function(){const t=Pt.A.create(this.location.startMeasureIdx,this.location.voiceIdx,this.location.startNoteIdx),e=Pt.A.create(this.location.stopMeasureIdx,this.location.voiceIdx,this.location.stopNoteIdx);return Pt.A.isGreater(e,t)},tt.addSegment=function(t,e,r,n,h){const M=t.getSlurs(this.location.voiceIdx).getGroup(),N=Xt.A.AUTO,S=null,O=new At.A(vt.A.START,r,this.location.voiceIdx,S,N);O.setMeasureIdx(e);const W=t.getMeasure(e);O.setMeasure(W);const b=new At.A(vt.A.STOP,h,this.location.voiceIdx,S,N);b.setMeasureIdx(n);const $=t.getMeasure(n);b.setMeasure($);const A=new zt.A;A.setCssClass(this.cssClass),A.setParent(M),A.setStaff(t),A.setLeftAnchor(O),A.setRightAnchor(b),A.setDrawingContext(this.drawingContext),A.updateHorizontalDisplay(),A.draw(),this.slurs.push(A)},tt.hide=function(){this.slurs.forEach(bt),this.slurs=[]};const bt=function(t){t.unbindFromParent()};tt.getGroups=function(){return this.slurs.map(Yt)};const Yt=function(t){return t.getGroup()},kt=ct,ht=function(t){this.init(t)};ht.cssClass="GraceCursor";const F=ht.prototype;F.init=function(t){this.drawingContext=t,this.renderedNote=null,this.parentGroup=null},F.update=function(t,e,r){this.hide(),this.line=t;const n={lines:[t],quarterBaseDuration:l.default.toQuarterDuration(r),nbDots:0,heads:[{line:t,notehead:P.A.NORMAL,step:e,alter:0,cStep:e,cAlter:0}],isGrace:!0};this.displayData=new i.A(n),this.renderedNote=new o.A(this.displayData),this.renderedNote.setDrawingContext(this.drawingContext),this.renderedNote.setCssClass(ht.cssClass),this.renderedNote.initLocalVerticalAlignment(),this.drawHead(),this.drawLegeLines(),this.drawDots(),this.renderedNote.bindHeads()},F.drawHead=function(){const t=new C.A(this.displayData);t.canDraw()&&t.draw(this.renderedNote,this.drawingContext)},F.drawLegeLines=function(){const t=new f.A(this.displayData);t.canDraw()&&t.draw(this.renderedNote,this.drawingContext)},F.drawDots=function(){const t=new _.A(this.displayData);t.canDraw()&&t.draw(this.renderedNote,this.drawingContext)},F.getHead=function(){return this.renderedNote.getHead(this.line)},F.setPosition=function(t){this.renderedNote.setPosition(t)},F.move=function(){this.renderedNote.move()},F.setParent=function(t){this.parentGroup=t,this.renderedNote.setParent(t),this.renderedNote.bindToParent()},F.canBeDrawn=function(){return this.renderedNote!==null},F.hide=function(){this.parentGroup!==null&&(this.parentGroup=null,this.renderedNote.unbindFromParent()),this.renderedNote=null},F.getGroup=function(){return this.renderedNote.getGroup()};const Jt=ht,lt=function(t){this.init(t)};lt.cssClass="GracePercuCursor";const j=lt.prototype;j.init=function(t){this.drawingContext=t,this.renderedNote=null,this.parentGroup=null},j.update=function(t){this.hide(),this.line=t.line;const e={lines:[t.line],quarterBaseDuration:l.default.toQuarterDuration(t.durationType),nbDots:0,heads:[{line:t.line,notehead:t.notehead}],isGrace:!0};this.displayData=new i.A(e),this.renderedNote=new o.A(this.displayData),this.renderedNote.setDrawingContext(this.drawingContext),this.renderedNote.setCssClass(lt.cssClass),this.renderedNote.initLocalVerticalAlignment(),this.drawHead(),this.drawLegeLines(),this.drawDots(),this.renderedNote.bindHeads()},j.drawHead=function(){const t=new C.A(this.displayData);t.canDraw()&&t.draw(this.renderedNote,this.drawingContext)},j.drawLegeLines=function(){const t=new f.A(this.displayData);t.canDraw()&&t.draw(this.renderedNote,this.drawingContext)},j.drawDots=function(){const t=new _.A(this.displayData);t.canDraw()&&t.draw(this.renderedNote,this.drawingContext)},j.getHead=function(){return this.renderedNote.getHead(this.line)},j.setPosition=function(t){this.renderedNote.setPosition(t)},j.move=function(){this.renderedNote.move()},j.setParent=function(t){this.parentGroup=t,this.renderedNote.setParent(t),this.renderedNote.bindToParent()},j.canBeDrawn=function(){return this.renderedNote!==null},j.hide=function(){this.parentGroup!==null&&(this.parentGroup=null,this.renderedNote.unbindFromParent()),this.renderedNote=null},j.getGroup=function(){return this.renderedNote.getGroup()};const $t=lt;var Qt=s(197341);const ft=function(t){this.init(t)};ft.cssClass="pizzicatoCursor";const et=ft.prototype;et.init=function(t){this.drawingContext=t,this.pizzicato=null,this.parentGroup=null},et.update=function(t,e){this.hide();const r=0;this.pizzicato=new Qt.A(t,e,r),this.pizzicato.render(this.drawingContext),this.pizzicato.setCssClass(ft.cssClass)},et.setPosition=function(t){this.pizzicato.setPosX(t)},et.setParent=function(t){this.parentGroup=t,this.pizzicato.setParent(t)},et.draw=function(){this.pizzicato.draw()},et.hide=function(){this.parentGroup!==null&&(this.parentGroup=null,this.pizzicato.unbindFromParent()),this.pizzicato=null},et.getGroup=function(){return this.pizzicato.getText()};const Zt=ft;var qt=s(744771);const _t=function(t){this.init(t)};_t.cssClass="muteCursor";const st=_t.prototype;st.init=function(t){this.drawingContext=t,this.mute=null,this.parentGroup=null},st.update=function(t,e){this.hide();const r=0;this.mute=new qt.A({placement:t,type:e,timePos:r}),this.mute.setDrawingContext(this.drawingContext),this.mute.setCssClass(_t.cssClass),this.mute.render()},st.setPosition=function(t){this.mute.setPosX(t)},st.setParent=function(t){this.parentGroup=t,this.mute.setParent(t)},st.draw=function(){this.mute.draw()},st.hide=function(){this.parentGroup!==null&&(this.parentGroup=null,this.mute.unbindFromParent()),this.mute=null},st.getGroup=function(){return this.mute.getPath()};const te=_t;var Tt=s(613746),ee=s(321038),gt=s(868743),Mt=s(468852),se=s(141624);const Ct=function(t){this.init(t)};Ct.cssClass="PedalCursorLine";const J=Ct.prototype;J.init=function(t){this.drawingContext=t,this.pedals=[],this.placement=se.A.BELOW},J.update=function(){this.hide()},J.addSegment=function(t,e,r,n,h){let E=null;r===null&&(E=Mt.A.LEFT);const M=new Tt.A(gt.A.START,this.placement,r,E),N=t.getMeasure(e);M.setMeasure(N),M.setDrawingContext(this.drawingContext);let S=null;h===null&&(S=Mt.A.RIGHT);const O=new Tt.A(gt.A.STOP,this.placement,h,S),W=t.getMeasure(n);O.setMeasure(W),O.setDrawingContext(this.drawingContext);const $=t.getPedalsContainer().getGroup(),A=new ee.A;A.setLeftAnchor(M),A.setRightAnchor(O),A.setParent($),A.setDrawingContext(this.drawingContext),A.setCssClass(Ct.cssClass),A.updateHorizontalDisplay(),A.updateVerticalDisplay(),this.pedals.push(A)},J.hide=function(){this.pedals.forEach(this.hidePedal),this.pedals=[]},J.hidePedal=function(t){t.unbindFromParent()},J.getGroup=function(){return this.getGroups()},J.getGroups=function(){return this.pedals.map(this.getPedalGroup)},J.getPedalGroup=function(t){return t.getGroup()},J.canBeDrawn=function(){return!0};const re=Ct;var wt=s(79769);const it=function(t){this.init(t)};it.cssClass="PedalCursor";const rt=it.prototype;rt.init=function(t){this.drawingContext=t,this.pedals=[],this.placement=null},rt.update=function(t){this.hide(),this.placement=t},rt.addSegment=function(t,e,r,n,h){const E=new wt.A(gt.A.START,this.placement,r);let N=t.getMeasure(e).tickableContent,S=N.timePosToX(r);E.setCssClass(it.cssClass),E.setPosX(S),N.formatDirectionVertical(E),E.setParent(N.group),E.render(this.drawingContext),E.draw();const O=new wt.A(gt.A.STOP,this.placement,h);N=t.getMeasure(n).tickableContent,S=N.timePosToX(h),O.setCssClass(it.cssClass),O.setPosX(S),N.formatDirectionVertical(O),O.setParent(N.group),O.render(this.drawingContext),O.draw(),this.pedals.push(E),this.pedals.push(O)},rt.hide=function(){this.pedals.forEach(ne),this.pedals=[]};const ne=function(t){t.unbindFromParent()};rt.getGroup=function(){return this.getGroups()},rt.getGroups=function(){return this.pedals.map(oe)};const oe=function(t){return t.getGroup()};rt.canBeDrawn=function(){return!0};const ie=it;var Ot=s(562062),ae=s(392639),It=s(723631),xt=s(372585),Rt=s(258780);const pt=function(t){this.init(t)};pt.cssClass="OctaveShiftCursor";const z=pt.prototype;z.init=function(t){this.drawingContext=t,this.octaveShifts=[],this.type=null,this.size=null,this.placement=null},z.update=function(t){this.hide(),this.size=t.size,this.placement=t.placement,this.updateType()},z.updateType=function(){if(this.placement===It.A.ABOVE)this.type=xt.A.DOWN;else if(this.placement===It.A.BELOW)this.type=xt.A.UP;else throw new K.default("Unexpected")},z.addSegment=function(t,e,r,n,h){let E=null;r===null&&(E=Rt.A.LEFT);const M=new Ot.A(this.type,this.size,this.placement,r,E),N=t.getMeasure(e);M.setMeasure(N),M.setDrawingContext(this.drawingContext);let S=null;h===null&&(S=Rt.A.RIGHT);const O=this.getRightType(h),W=new Ot.A(O,this.size,this.placement,h,S),b=t.getMeasure(n);W.setMeasure(b),W.setDrawingContext(this.drawingContext);const A=t.getOctaveShiftsContainer().getGroup(),B=new ae.A;B.setLeftAnchor(M),B.setRightAnchor(W),B.setParent(A),B.setDrawingContext(this.drawingContext),B.setCssClass(pt.cssClass),B.updateHorizontalDisplay(),B.updateVerticalDisplay(),this.octaveShifts.push(B)},z.getRightType=function(t){return t===null?this.type:xt.A.STOP},z.hide=function(){this.octaveShifts.forEach(this.hideOctaveShift),this.octaveShifts=[]},z.hideOctaveShift=function(t){t.unbindFromParent()},z.getGroup=function(){return this.getGroups()},z.getGroups=function(){return this.octaveShifts.map(this.getOctaveShiftGroup)},z.getOctaveShiftGroup=function(t){return t.getGroup()},z.canBeDrawn=function(){return!0};const ue=pt;var de=s(909748),Lt=s(332573),ce=s(628516),Nt=s(619370);const Dt=function(t){this.init(t)};Dt.cssClass="TempoChangeCursor";const nt=Dt.prototype;nt.init=function(t){this.drawingContext=t,this.tempoChanges=[],this.type=null,this.placement=null},nt.update=function(t){this.hide(),this.type=t.type,this.placement=It.A.ABOVE},nt.addSegment=function(t,e,r,n,h){let E,M;r===null&&(E=Lt.A.LEFT);const N=new Nt.A(this.type,this.placement,r,E),S=t.getMeasure(e);N.setMeasure(S),N.setMeasureIdx(e),N.setDrawingContext(this.drawingContext),h===null&&(M=Lt.A.RIGHT);const O=new Nt.A(de.A.STOP,this.placement,h,M),W=t.getMeasure(n);O.setMeasure(W),O.setMeasureIdx(n),O.setDrawingContext(this.drawingContext);const $=t.getTempoChangesContainer().getGroup(),A=new ce.A;A.setLeftAnchor(N),A.setRightAnchor(O),A.setParent($),A.setDrawingContext(this.drawingContext),A.setCssClass(Dt.cssClass),A.updateHorizontalDisplay(),A.updateVerticalDisplay(),this.tempoChanges.push(A)},nt.hide=function(){this.tempoChanges.forEach(he),this.tempoChanges=[]};const he=function(t){t.unbindFromParent()};nt.getGroup=function(){return this.getGroups()},nt.getGroups=function(){return this.tempoChanges.map(le)};const le=function(t){return t.getGroup()};nt.canBeDrawn=function(){return!0};const fe=Dt;var Ut=s(197266),_e=s(64316),ge=s(97324),St=s(231189);const mt=function(t){this.init(t)};mt.cssClass="PluckedRangeCursor";const X=mt.prototype;X.init=function(t){this.drawingContext=t,this.pluckedRanges=[],this.type=null,this.placement=null},X.update=function(t){this.hide(),this.type=t.type,this.placement=t.placement},X.addSegment=function(t,e,r,n,h){let E=null;r===null&&(E=St.A.LEFT);const M=new Ut.A(this.type,this.placement,r,E),N=t.getMeasure(e);M.setMeasure(N),M.setDrawingContext(this.drawingContext);let S=null;h===null&&(S=St.A.RIGHT);const O=this.getRightType(h),W=new Ut.A(O,this.placement,h,S),b=t.getMeasure(n);W.setMeasure(b),W.setDrawingContext(this.drawingContext);const A=t.getPluckedRangesContainer().getGroup(),B=new _e.A;B.setLeftAnchor(M),B.setRightAnchor(W),B.setParent(A),B.setDrawingContext(this.drawingContext),B.setCssClass(mt.cssClass),B.updateHorizontalDisplay(),B.updateVerticalDisplay(),this.pluckedRanges.push(B)},X.getRightType=function(t){return t===null?this.type:ge.A.STOP},X.hide=function(){this.pluckedRanges.forEach(this.hidePluckedRange),this.pluckedRanges=[]},X.hidePluckedRange=function(t){t.unbindFromParent()},X.getGroup=function(){return this.getGroups()},X.getGroups=function(){return this.pluckedRanges.map(this.getPluckedRangeGroup)},X.getPluckedRangeGroup=function(t){return t.getGroup()},X.canBeDrawn=function(){return!0};const Ce=mt;var pe=s(701387),De=s(21738),me=s(665280),Pe=s(409200),Ie=s(131220),xe=s(779146);class Ee{constructor(){this.target=null,this.currentCursor=null,this.reset()}setTarget(e){this.target=e,this.reset()}reset(){this.noteCursor=null,this.percuCursor=null,this.tabCursor=null,this.dynamicCursor=null,this.wedgeCursor=null,this.slurCursor=null,this.GraceCursor=null,this.gracePercuCursor=null,this.pizzicatoCursor=null,this.pedalCursor=null,this.octaveShiftCursor=null,this.pluckedRangeCursor=null,this.tempoChangeCursor=null,this.currentCursor!==null&&(this.currentCursor.hide(),this.currentCursor=null)}drawNoteCursor(e,r,n,h){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;const E=this.retrieveStep(e);this.convertDataToDisplayIdx(e);const M=this.getNoteCursor();return this.updateCurrentCursor(M),M.update(e.line,E,r,n,h),M.canBeDrawn()?(this.drawBasicCursor(e,M),M.getHead()):null}retrieveStep(e){const n=this.getScoreData().getMeasure(e.partIdx,e.measureIdx),E=pe.default.getWrappedClef(n).getEntry(e.staffIdx),M=D.default.lineToPitch(e.line,E);return D.default.getStep(M)}drawGraceCursor(e,r){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;const n=this.retrieveStep(e);this.convertDataToDisplayIdx(e);const h=this.getGraceCursor();return this.updateCurrentCursor(h),h.update(e.line,n,r),h.canBeDrawn()&&this.target.drawGraceCursor(e,h),h.getHead()}drawGracePercuCursor(e,r){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;this.convertDataToDisplayIdx(e);const n=this.getGracePercuCursor();return this.updateCurrentCursor(n),n.update(r),n.canBeDrawn()&&this.target.drawGraceCursor(e,n),n.getHead()}drawPercuCursor(e,r){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;this.convertDataToDisplayIdx(e);const n=this.getPercuCursor();return this.updateCurrentCursor(n),n.update(r),this.drawBasicCursor(e,n),n.getHead()}drawTabCursorByLine(e,r,n){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;const h=this.getTabCursor();this.updateCurrentCursor(h);const E=this.getMeasureJson(e);e.staffIdx=0;const M=this.retrieveStep(e);return h.updateLine(E,e,M,r,n),this.convertDataToDisplayIdx(e),this.drawTabCursor(e,h),h.getNoteHead()}drawTabCursorByFret(e,r,n){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;const h=this.getTabCursor();this.updateCurrentCursor(h);const E=this.getMeasureJson(e);return h.updateTechnicalFret(E,e,r,n),this.convertDataToDisplayIdx(e),this.drawTabCursor(e,h),h.getFretHead()}drawDynamicCursor(e,r,n){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;const h=this.getDynamicCursor();this.updateCurrentCursor(h),h.update(r,n),this.target.drawDynamicCursor(e,h)}drawPizzicatoCursor(e,r,n){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;this.convertDataToDisplayIdx(e);const h=this.getPizzicatoCursor();this.updateCurrentCursor(h),h.update(r,n),this.target.drawPizzicatoCursor(e,h)}drawMuteCursor(e,r,n){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;this.convertDataToDisplayIdx(e);const h=this.getMuteCursor();this.updateCurrentCursor(h),h.update(r,n),this.target.drawMuteCursor(e,h)}drawWedgeCursor(e,r){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;this.convertDataToDisplayIdx(e);const n=this.getWedgeCursor();return this.updateCurrentCursor(n),n.update(r),typeof e.startMeasureIdx!="undefined"?this.drawHorizontalCursor(e,n):this.drawHorizontalMeasureWideCursor(e,n),n.getGroups()}drawTempoChangeCursor(e,r){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;this.convertDataToDisplayIdx(e);const n=this.getTempoChangeCursor();return this.updateCurrentCursor(n),n.update(r),typeof e.startMeasureIdx!="undefined"?this.drawHorizontalCursor(e,n):this.drawHorizontalMeasureWideCursor(e,n),n.getGroups()}drawPedalCursorLine(e,r){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;this.convertDataToDisplayIdx(e);const n=this.getPedalCursorLine();return this.updateCurrentCursor(n),n.update(r),typeof e.startMeasureIdx!="undefined"?this.drawHorizontalCursor(e,n):this.drawHorizontalMeasureWideCursor(e,n),n.getGroups()}drawPedalCursor(e,r){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;this.convertDataToDisplayIdx(e);const n=this.getPedalCursor();return this.updateCurrentCursor(n),n.update(r),typeof e.startMeasureIdx!="undefined"?this.drawHorizontalCursor(e,n):this.drawHorizontalMeasureWideCursor(e,n),n.getGroups()}drawSlurCursor(e){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;this.convertDataToDisplayIdx(e);const r=this.getSlurCursor();return this.updateCurrentCursor(r),r.setLocation(e),r.canBeDrawn()?(this.target.drawCrossMeasureNoteCursor(e,r),r.getGroups()):null}drawOctaveShiftCursor(e,r){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;this.convertDataToDisplayIdx(e);const n=this.getOctaveShiftCursor();return this.updateCurrentCursor(n),n.update(r),typeof e.startMeasureIdx!="undefined"?this.drawHorizontalCursor(e,n):this.drawHorizontalMeasureWideCursor(e,n),n.getGroups()}drawPluckedRangeCursor(e,r){if(e=this.uuidToIdx(e),!this.isPartDisplayed(e.partIdx))return null;this.convertDataToDisplayIdx(e);const n=this.getPluckedRangeCursor();return this.updateCurrentCursor(n),n.update(r),typeof e.startMeasureIdx!="undefined"?this.drawHorizontalCursor(e,n):this.drawHorizontalMeasureWideCursor(e,n),n.getGroups()}drawBasicCursor(e,r){r.canBeDrawn()&&this.target.drawBasicCursor(e,r)}drawTabCursor(e,r){r.canBeDrawn()&&this.target.drawTabCursor(e,r)}drawHorizontalMeasureWideCursor(e,r){r.canBeDrawn()&&this.target.drawHorizontalMeasureWideCursor(e,r)}drawHorizontalCursor(e,r){r.canBeDrawn()&&this.target.drawHorizontalCursor(e,r)}updateCurrentCursor(e){this.currentCursor!==null&&e!==this.currentCursor&&this.currentCursor.hide(),this.currentCursor=e}getDynamicCursor(){if(!this.dynamicCursor){const e=this.target.getDrawingContext();this.dynamicCursor=new Ht(e)}return this.dynamicCursor}getPizzicatoCursor(){if(!this.pizzicatoCursor){const e=this.target.getDrawingContext();this.pizzicatoCursor=new Zt(e)}return this.pizzicatoCursor}getMuteCursor(){if(!this.muteCursor){const e=this.target.getDrawingContext();this.muteCursor=new te(e)}return this.muteCursor}getPercuCursor(){if(!this.percuCursor){const e=this.target.getDrawingContext();this.percuCursor=new y(e)}return this.percuCursor}getWedgeCursor(){if(!this.wedgeCursor){const e=this.target.getDrawingContext();this.wedgeCursor=new jt(e)}return this.wedgeCursor}getTempoChangeCursor(){if(!this.tempoChangeCursor){const e=this.target.getDrawingContext();this.tempoChangeCursor=new fe(e)}return this.tempoChangeCursor}getPedalCursorLine(){if(!this.pedalCursor){const e=this.target.getDrawingContext();this.pedalCursor=new re(e)}return this.pedalCursor}getPedalCursor(){if(!this.pedalCursor){const e=this.target.getDrawingContext();this.pedalCursor=new ie(e)}return this.pedalCursor}getNoteCursor(){if(this.noteCursor===null){const e=this.target.getDrawingContext();this.noteCursor=new p(e)}return this.noteCursor}getGraceCursor(){if(this.GraceCursor===null){const e=this.target.getDrawingContext();this.GraceCursor=new Jt(e)}return this.GraceCursor}getGracePercuCursor(){if(this.gracePercuCursor===null){const e=this.target.getDrawingContext();this.gracePercuCursor=new $t(e)}return this.gracePercuCursor}getTabCursor(){if(this.tabCursor===null){const e=this.target.getDrawingContext();this.tabCursor=new Bt(e)}return this.tabCursor}getSlurCursor(){if(this.slurCursor===null){const e=this.target.getDrawingContext();this.slurCursor=new kt(e)}return this.slurCursor}getOctaveShiftCursor(){if(!this.octaveShiftCursor){const e=this.target.getDrawingContext();this.octaveShiftCursor=new ue(e)}return this.octaveShiftCursor}getPluckedRangeCursor(){if(!this.pluckedRangeCursor){const e=this.target.getDrawingContext();this.pluckedRangeCursor=new Ce(e)}return this.pluckedRangeCursor}getCursorGroup(){return this.currentCursor.getGroup()}removeCursor(){this.currentCursor&&this.currentCursor.hide()}getMeasureJson(e){return this.getScoreData().getMeasure(e.partIdx,e.measureIdx)}uuidToIdx(e){e=(0,Y.default)(e);const r=this.getScoreData();return(0,De.default)(r,e),(0,me.default)(r,e),(0,Pe.default)(r,e),(0,Ie.default)(r,e),(0,xe.default)(r,e),Ae(r,e),ve(r,e),Te(e),e}getScoreData(){return this.target.getScoreData()}isPartDisplayed(e){return this.getScoreDataCache().isPartDisplayed(e)}convertDataToDisplayIdx(e){const r=this.getScoreDataCache();e.partIdx=r.dataToDisplayedPartIdx(e.partIdx)}getScoreDataCache(){return this.target.getScoreDataCache()}}function Ae(t,e){if(typeof e.startVoiceUuid!="undefined")if(t.hasPartVoiceUuid(e.partIdx,e.startVoiceUuid))e.startVoiceIdx=t.getPartVoiceIdxFromUuid(e.partIdx,e.startVoiceUuid),delete e.startVoiceUuid;else throw new a.default(e.startVoiceUuid,a.default.GET)}function ve(t,e){if(typeof e.stopVoiceUuid!="undefined")if(t.hasPartVoiceUuid(e.partIdx,e.stopVoiceUuid))e.stopVoiceIdx=t.getPartVoiceIdxFromUuid(e.partIdx,e.stopVoiceUuid),delete e.stopVoiceUuid;else throw new a.default(e.stopVoiceUuid,a.default.GET)}function Te(t){typeof t.voiceIdx!="undefined"&&(t.startVoiceIdx=t.voiceIdx,t.stopVoiceIdx=t.voiceIdx)}},972913:(v,u,s)=>{s.d(u,{default:()=>i});var a=s(457652);const i=a.A},975924:(v,u,s)=>{s.d(u,{default:()=>i});var a=s(980641);const i=a.A},981801:(v,u,s)=>{s.d(u,{default:()=>i});var a=s(409200);const i=a.default}}]);})();


//# debugId=19a90f66-6a6d-59a9-aab6-348510fa3e94

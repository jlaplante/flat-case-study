"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8e81cf5d-b84f-5b7a-845a-35e6a5f49451")}catch(e){}}();
(()=>{/*! Copyright (c) 2025 Tutteo Ltd. */(self.webpackChunk_flat_flat=self.webpackChunk_flat_flat||[]).push([[32195],{21750:(q,B,e)=>{e.d(B,{E:()=>S});var s=e(6645),h=e(744056),g=e(967409),n=(c,C,O)=>new Promise((P,I)=>{var y=D=>{try{m(O.next(D))}catch(u){I(u)}},E=D=>{try{m(O.throw(D))}catch(u){I(u)}},m=D=>D.done?P(D.value):Promise.resolve(D.value).then(y,E);m((O=O.apply(c,C)).next())});const S=(0,s.nY)("paymentMeans",()=>{const c=(0,h.KR)([]),C=(0,h.KR)(!0);function O(){return n(this,null,function*(){C.value=!0;const I=yield g.A.listPaymentMeans();return c.value=I,C.value=!1,I})}function P(I){return n(this,arguments,function*({skipList:y}){const E=yield O();yield Promise.all(E.map(m=>new Promise(D=>{Array.isArray(y)&&y.includes(m.id)?D():g.A.deletePaymentMean(m.id).then(D).catch(D)})))})}return{pms:c,listPaymentMeans:O,removeInactivePaymentMeans:P}})},28408:(q,B,e)=>{e.d(B,{C:()=>A});var s=e(6645),h=e(744056),g=e(361744),n=e(550594);function S(v){return n.A.get(`${n.A.apiv2baseurl}/classes/${v}/posts`)}function c(v,l){return n.A.get(`${n.A.apiv2baseurl}/classes/${v}/posts/${l}`)}function C(v){return v=n.A.clearNullProperties(v),n.A.post(`${n.A.apiv2baseurl}/classes/${v.classroom}/posts`,v)}function O(v){return v=n.A.clearNullProperties(v),n.A.put(`${n.A.apiv2baseurl}/classes/${v.classroom}/posts/${v.id}`,v)}function P(v,l){return n.A.post(`${n.A.apiv2baseurl}/classes/${v}/posts/${l}/up`)}function I(v,l){return n.A.delete(`${n.A.apiv2baseurl}/classes/${v}/posts/${l}`)}const E={list:S,get:c,create:C,update:O,up:P,delete:I};var m=e(540888),D=e(823828),u=(v,l,r)=>new Promise((M,U)=>{var F=z=>{try{H(r.next(z))}catch(p){U(p)}},G=z=>{try{H(r.throw(z))}catch(p){U(p)}},H=z=>z.done?M(z.value):Promise.resolve(z.value).then(F,G);H((r=r.apply(v,l)).next())});const A=(0,s.nY)("classesPosts",()=>{const v=(0,h.KR)({}),l=(0,g.EW)(()=>{const p={};return Object.keys(v.value).forEach(w=>{const ee=v.value[w],Z=ee.classroom;p[Z]||(p[Z]=[]),p[Z].push(ee)}),Object.keys(p).forEach(w=>{p[w]=p[w].sort((ee,Z)=>Z.postDate-ee.postDate)}),p});function r(p){var N;p.postDate&&(p.postDate=new Date(p.postDate),p.postDateRelative=(0,m.PI)(p.postDate),p.postDateFormatted=(0,m.r6)(p.postDate)),(N=p.attachments)==null||N.forEach(V=>{V.type==="flat"&&(V.url=`/score/${V.score}`)}),v.value[p.id]=p}function M(p){delete v.value[p]}function U(p){return u(this,null,function*(){const N=yield E.list(p);return(0,D.k)().getList(N.map(w=>w.creator)),N.forEach(w=>{r(w)}),N})}function F(p){return u(this,null,function*(){const N=yield E.create(p);return r(N),N})}function G(p){return u(this,null,function*(){const N=yield E.update(p);return r(N),N})}function H(p){return u(this,null,function*(){const N=yield E.up(p.classroom,p.id);return r(N),N})}function z(p){return u(this,null,function*(){yield E.delete(p.classroom,p.id),M(p.id)})}return{posts:v,postsByClass:l,loadClassPosts:U,createPost:F,editPost:G,upPost:H,deletePost:z,CACHE:r,REMOVE_CACHE:M}})},53779:(q,B,e)=>{e.d(B,{o:()=>s});const s=[function(g,n){return n!=null&&n.common&&Object.keys(n.common).forEach(S=>{S.startsWith("x-")&&delete n.common[S]}),g}]},88247:(q,B,e)=>{e.d(B,{O:()=>Z});var s=e(6645),h=e(744056),g=e(361744),n=e(550594),S=(a,f,_)=>new Promise((K,x)=>{var X=L=>{try{j(_.next(L))}catch(J){x(J)}},k=L=>{try{j(_.throw(L))}catch(J){x(J)}},j=L=>L.done?K(L.value):Promise.resolve(L.value).then(X,k);j((_=_.apply(a,f)).next())});const C={get({scoreId:a,params:f}){return n.A.get(`${n.A.apiv2baseurl}/scores/${a}/comments`,{params:f})},create({scoreId:a,sharingKey:f,body:_}){const K={sharingKey:f};return n.A.post(`${n.A.apiv2baseurl}/scores/${a}/comments`,_,{params:K})},edit({scoreId:a,sharingKey:f,comment:_,body:K}){const x={sharingKey:f};return n.A.put(`${n.A.apiv2baseurl}/scores/${a}/comments/${_}`,K,{params:x})},delete(a){return S(this,arguments,function*({scoreId:f,sharingKey:_,comment:K}){const x={sharingKey:_};yield n.A.delete(`${n.A.apiv2baseurl}/scores/${f}/comments/${K}`,{params:x})})},resolve({scoreId:a,sharingKey:f,comment:_}){const K={sharingKey:f};return n.A.put(`${n.A.apiv2baseurl}/scores/${a}/comments/${_}/resolved`,{},{params:K})}};var O=e(244270),P=(a,f,_)=>new Promise((K,x)=>{var X=L=>{try{j(_.next(L))}catch(J){x(J)}},k=L=>{try{j(_.throw(L))}catch(J){x(J)}},j=L=>L.done?K(L.value):Promise.resolve(L.value).then(X,k);j((_=_.apply(a,f)).next())});const I=/(^|\W)(@([A-Za-z0-9\-_.]+[A-Za-z0-9\-_]))(\.?)/gi;function y(a){return`@[${a.id}:${a.username}]`}function E(a){return a.match(I)}function m(a){return P(this,null,function*(){const f=(E(a)||[]).filter((X,k,j)=>j.indexOf(X)===k),_=[],K={};f.forEach(X=>{const k=X.substring(1),j=O.Ay.get(k).then(L=>{K[L.username]=L}).catch(()=>{});_.push(j)}),yield Promise.all(_);const x=[];return f.forEach(X=>{const k=X.substring(1),j=K[k];if(j!=null&&j.id){const L=new RegExp(X,"g"),J=y(j);a=a.replace(L,J),x.push(j.id)}}),{comment:a,mentions:x}})}var D=e(55442),u=e(653154),A=e(763939),v=e(973697),l=e(941271),r=e(459356),M=Object.defineProperty,U=Object.defineProperties,F=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,p=(a,f,_)=>f in a?M(a,f,{enumerable:!0,configurable:!0,writable:!0,value:_}):a[f]=_,N=(a,f)=>{for(var _ in f||(f={}))H.call(f,_)&&p(a,_,f[_]);if(G)for(var _ of G(f))z.call(f,_)&&p(a,_,f[_]);return a},V=(a,f)=>U(a,F(f)),w=(a,f,_)=>new Promise((K,x)=>{var X=L=>{try{j(_.next(L))}catch(J){x(J)}},k=L=>{try{j(_.throw(L))}catch(J){x(J)}},j=L=>L.done?K(L.value):Promise.resolve(L.value).then(X,k);j((_=_.apply(a,f)).next())});const ee=6,Z=(0,s.nY)("scoreComments",()=>{const{account:a}=(0,s.bP)((0,A.F)()),f=(0,h.KR)([]),_=(0,h.KR)({}),K=(0,h.KR)({}),x=(0,h.KR)(!0),X=(0,h.KR)(0),k=(0,h.KR)(null),j=(0,g.EW)(()=>f.value.filter(T=>!T.replyTo&&!T.resolved).sort((T,t)=>t.unixDate-T.unixDate)),L=(0,g.EW)(()=>j.value),J=(0,g.EW)(()=>{const T={};return L.value.forEach(t=>{T[t.id]=t}),T}),d=(0,g.EW)(()=>L.value.length>0),R=(0,g.EW)(()=>j.value.slice(0,X.value)),W=(0,g.EW)(()=>X.value<j.value.length),oe=(0,g.EW)(()=>x.value||!W.value),te=(0,g.EW)(()=>(0,v.B)().organization),le=(0,g.EW)(()=>{var T;return!te.value||te.value.privacy.commentsMode==="everybodyCanComment"||te.value.privacy.commentsMode==="studentsCanReplyToTeachers"&&((T=a.value)==null?void 0:T.classRole)==="teacher"}),ce=(0,g.EW)(()=>!te.value||te.value.privacy.commentsMode!=="nobodyCanComment");function ue(T){X.value=T}function b(T){const t=_.value[T];if(t){const o=f.value.findIndex(i=>i.id===T);if(o>=0&&f.value.splice(o,1),t.replyTo){const i=f.value.find($=>$.id===t.replyTo);if(i&&K.value[i.id]){const $=K.value[i.id].findIndex(Y=>Y.id===T);$>=0&&K.value[i.id].splice($,1)}}delete _.value[T]}}function Q(T){for(let o=T.length-1;o>=0;o--){const i=T[o];if(i.date=new Date(i.date),i.unixDate=Math.floor(i.date.getTime()/1e3),i.modificationDate=new Date(i.modificationDate),i.resolved){b(i.id),T.splice(o,1);continue}i.safeHTML=(0,D.EH)(i.comment),_.value[i.id]?(T.splice(o,1),Object.assign(_.value[i.id],{rawComment:i.rawComment,comment:i.comment,safeHTML:i.safeHTML,mentions:i.mentions,date:i.date,modificationDate:i.modificationDate,moderation:i.moderation,revision:i.revision,context:i.context})):_.value[i.id]=i}f.value=[...f.value,...T];const t={};f.value.forEach(o=>{o.replyTo&&_.value[o.replyTo]&&(t[o.replyTo]=t[o.replyTo]||[],t[o.replyTo].push(o))}),Object.keys(t).forEach(o=>{const i=t[o];t[o]=i.sort(($,Y)=>$.unixDate-Y.unixDate);for(let $=0;$<i.length-1;$++)i[$].hasReplyUnder=!0}),K.value=t}function ne(T){return T.resolved?b(T.id):Q([T])}function se(T){k.value=T}function ie(T){return w(this,arguments,function*({score:t,params:o}){x.value=!0;const i=yield C.get({scoreId:t.id,params:V(N({},o),{sharingKey:t.sharingKey})});Q(i),x.value=!1})}function de({scoreId:T,sharingKey:t,comment:o,body:i}){return(0,l.B)().addExperience("score.comment.post"),C.edit({scoreId:T,sharingKey:t,comment:o,body:i}).then($=>{Q([$]),Promise.resolve()}).catch($=>{(0,r.O)().displayError({error:$}),(0,u.vV)($),Promise.reject($)})}function ve({scoreId:T,sharingKey:t,body:o}){return(0,l.B)().addExperience("score.comment.post"),C.create({scoreId:T,sharingKey:t,body:o}).then(i=>{Q([i]),Promise.resolve()}).catch(i=>{(0,r.O)().displayError({error:i}),(0,u.vV)(i),Promise.reject(i)})}function fe(T){return w(this,arguments,function*({scoreId:t,sharingKey:o,comment:i,body:$}){try{if($.rawComment){const Y=yield m($.rawComment);$.comment=Y.comment,$.mentions=Y.mentions}}catch(Y){(0,u.vV)(Y)}return i?de({scoreId:t,sharingKey:o,comment:i,body:$}):ve({scoreId:t,sharingKey:o,body:$})})}function ye({scoreId:T,sharingKey:t,comment:o}){return C.delete({scoreId:T,sharingKey:t,comment:o}).then(()=>{b(o),Promise.resolve()}).catch(i=>{const $=i.response;$&&$.status===404?(b(o),Promise.resolve()):((0,r.O)().displayError({error:i}),(0,u.vV)(i),Promise.reject(i))})}function Ee({scoreId:T,sharingKey:t,comment:o}){return C.resolve({scoreId:T,sharingKey:t,comment:o}).then(()=>{b(o),Promise.resolve()}).catch(i=>{(0,r.O)().displayError({error:i}),(0,u.vV)(i),Promise.reject(i)})}function _e(){ue(X.value+ee)}return{comments:f,commentsById:_,highlightedComment:k,firstLevelInlineComments:L,firstLevelInlineCommentsById:J,canReplyToTeacherThread:ce,repliesTree:K,hasInlineComments:d,loadingComments:x,displayedComments:R,infiniteScrollBusy:oe,moreToDisplay:W,canCreateNewCommentsThread:le,cache:ne,displayMoreComments:_e,loadScoreComments:ie,createOrEditComment:fe,editComment:de,deleteComment:ye,resolveComment:Ee,setHighlightedComment:se,setComments:Q}})},160753:(q,B,e)=>{e.d(B,{C:()=>C});var s=e(6645),h=e(744056),g=e(521915),n=e(674548),S=e(763939),c=(O,P,I)=>new Promise((y,E)=>{var m=A=>{try{u(I.next(A))}catch(v){E(v)}},D=A=>{try{u(I.throw(A))}catch(v){E(v)}},u=A=>A.done?y(A.value):Promise.resolve(A.value).then(m,D);u((I=I.apply(O,P)).next())});const C=(0,s.nY)("google",()=>{const O=(0,h.KR)({});function P(I){return c(this,null,function*(){var y,E;try{const m=yield g.A.getClassroomMe(I);return O.value={},m}catch(m){if(m&&((E=(y=m.response)==null?void 0:y.data)==null?void 0:E.code)==="GOOGLE_CLASSROOM_ADMIN_NOT_SETUP"){const u=`https://help.flat.io/${(0,S.F)().locale}/education/google-classroom/admin-review/`;O.value.error=m.response.data.code,O.value.errorMessage=n.MR.t("edu:classes.gc-admin-setup-error"),O.value.helpUrl=n.MR.t("edu:classes.gc-admin-setup-error-help",{link:u})}throw m}})}return{gcAdminSetUpError:O,getClassroomMe:P}})},290175:(q,B,e)=>{e.d(B,{A:()=>g});var s=e(550594);const g={getCioConfig(){return s.A.get(`${s.A.apiv2baseurl}/me/_cio?platform=web`)}}},373142:(q,B,e)=>{e.d(B,{A:()=>g});var s=e(550594);const g={get(){return s.A.get(`${s.A.apiv2baseurl}/licensesPools`)},getSummary(){return s.A.get(`${s.A.apiv2baseurl}/licensesPools/summary`)},getAggregatedLicenses(){return s.A.get(`${s.A.apiv2baseurl}/licensesPools/aggregated`)}}},398734:(q,B,e)=>{e.d(B,{f:()=>C});var s=e(6645),h=e(744056),g=e(361744),n=e(653154),S=e(459356),c=(O,P,I)=>new Promise((y,E)=>{var m=A=>{try{u(I.next(A))}catch(v){E(v)}},D=A=>{try{u(I.throw(A))}catch(v){E(v)}},u=A=>A.done?y(A.value):Promise.resolve(A.value).then(m,D);u((I=I.apply(O,P)).next())});const C=(0,s.nY)("countries",()=>{const O=(0,h.KR)({}),P=(0,h.KR)({}),I=(0,g.EW)(()=>{const m=Object.keys(O.value),D=[];for(let u=0;u<m.length;u++){const A=m[u];D.push({code:A,name:O.value[A].name,callingCode:O.value[A].callingCode})}return D.sort((u,A)=>u.name.localeCompare(A.name))});function y(m){O.value=m,P.value=m.US.states}function E(){return c(this,null,function*(){try{if(Object.keys(O.value).length>0)return O;const m=(yield e.e(25351).then(e.t.bind(e,179695,19))).countries;return y(m),O}catch(m){throw(0,S.O)().displayError({error:m}),(0,n.vV)(m),m}})}return{countries:O,states:P,sortedCountries:I,fetchCountries:E,SET_COUNTRIES:y}})},454334:(q,B,e)=>{e.d(B,{q:()=>s});const s=h=>{try{const g={};return h%1!==0&&(g.minimumFractionDigits=2,g.maximumFractionDigits=2),h.toLocaleString(void 0,g)}catch(g){return h.toString()}}},458970:(q,B,e)=>{e.d(B,{LC:()=>g,cR:()=>n});var s=e(521294),h=e(454334);const g=(c,C)=>s.u[c].moneyFormat.replace("{amount}",(0,h.q)(C)),n=(c,C)=>s.u[c].moneyWithCurrencyFormat.replace("{amount}",(0,h.q)(C)),S=(c,C)=>{const O=CURRENCIES_TEMPLATES[c],P=numberWithCommas(C);return{original:C,text:O.moneyFormat.replace("{amount}",P),textWithCurrency:O.moneyWithCurrencyFormat.replace("{amount}",P),currency:O.moneyFormat.replace("{amount}","")}}},521294:(q,B,e)=>{e.d(B,{u:()=>s});const s={ARS:{moneyFormat:"ARS${amount}",moneyWithCurrencyFormat:"${amount} ARS"},AUD:{moneyFormat:"AUD${amount}",moneyWithCurrencyFormat:"${amount} AUD"},BRL:{moneyFormat:"R$ {amount}",moneyWithCurrencyFormat:"R$ {amount} BRL"},CAD:{moneyFormat:"CAD${amount}",moneyWithCurrencyFormat:"${amount} CAD"},CHF:{moneyFormat:"SFr. {amount}",moneyWithCurrencyFormat:"SFr. {amount} CHF"},CLP:{moneyFormat:"CLP${amount}",moneyWithCurrencyFormat:"${amount} CLP"},COP:{moneyFormat:"COL${amount}",moneyWithCurrencyFormat:"${amount} COP"},DKK:{moneyFormat:"kr.{amount}",moneyWithCurrencyFormat:"kr.{amount}"},EUR:{moneyFormat:"\u20AC{amount}",moneyWithCurrencyFormat:"\u20AC{amount} EUR"},GBP:{moneyFormat:"\xA3{amount}",moneyWithCurrencyFormat:"\xA3{amount} GBP"},HKD:{moneyFormat:"HK${amount}",moneyWithCurrencyFormat:"HK${amount}"},HUF:{moneyFormat:"{amount} Ft",moneyWithCurrencyFormat:"{amount} Ft"},IDR:{moneyFormat:"Rp {amount}",moneyWithCurrencyFormat:"Rp {amount}"},ILS:{moneyFormat:"{amount} NIS",moneyWithCurrencyFormat:"{amount} NIS"},INR:{moneyFormat:"\u20B9{amount}",moneyWithCurrencyFormat:"\u20B9{amount} INR"},JPY:{moneyFormat:"\xA5{amount}",moneyWithCurrencyFormat:"\xA5{amount} JPY"},KRW:{moneyFormat:"\u20A9{amount}",moneyWithCurrencyFormat:"\u20A9{amount} KRW"},MXN:{moneyFormat:"Mex$ {amount}",moneyWithCurrencyFormat:"$ {amount} MXN"},MYR:{moneyFormat:"RM{amount}",moneyWithCurrencyFormat:"RM{amount} MYR"},NOK:{moneyFormat:"kr {amount}",moneyWithCurrencyFormat:"kr {amount} NOK"},NZD:{moneyFormat:"NZD${amount}",moneyWithCurrencyFormat:"${amount} NZD"},PEN:{moneyFormat:"S/. {amount}",moneyWithCurrencyFormat:"S/. {amount} PEN"},PHP:{moneyFormat:"\u20B1{amount}",moneyWithCurrencyFormat:"\u20B1{amount} PHP"},PLN:{moneyFormat:"z\u0142{amount}",moneyWithCurrencyFormat:"z\u0142{amount} PLN"},QAR:{moneyFormat:"{amount} riyal",moneyWithCurrencyFormat:"QAR {amount}"},RUB:{moneyFormat:"\u0440\u0443\u0431{amount}",moneyWithCurrencyFormat:"\u0440\u0443\u0431{amount} RUB"},SAR:{moneyFormat:"{amount} SR",moneyWithCurrencyFormat:"{amount} SAR"},SEK:{moneyFormat:"{amount} kr",moneyWithCurrencyFormat:"{amount} kr SEK"},SGD:{moneyFormat:"S${amount}",moneyWithCurrencyFormat:"${amount} SGD"},TWD:{moneyFormat:"NT${amount}",moneyWithCurrencyFormat:"${amount} TWD"},USD:{moneyFormat:"${amount}",moneyWithCurrencyFormat:"${amount} USD"},ZAR:{moneyFormat:"R {amount}",moneyWithCurrencyFormat:"R {amount} ZAR"}},h=null},573871:(q,B,e)=>{e.d(B,{A:()=>g});var s=e(550594);const g={list(n={}){return s.A.get(`${s.A.apiv2baseurl}/offers`,{params:n})},get(n,S={}){return s.A.get(`${s.A.apiv2baseurl}/offers/${n}`,{params:S})},getEmbedPlanDetails(){return s.A.get(`${s.A.apiv2baseurl}/offers/embedPlansDetails`)}}},633356:(q,B,e)=>{e.d(B,{i:()=>O});var s=e(6645),h=e(744056),g=e(361744),n=e(334980),S=e(653154),c=e(459356),C=(P,I,y)=>new Promise((E,m)=>{var D=v=>{try{A(y.next(v))}catch(l){m(l)}},u=v=>{try{A(y.throw(v))}catch(l){m(l)}},A=v=>v.done?E(v.value):Promise.resolve(v.value).then(D,u);A((y=y.apply(P,I)).next())});const O=(0,s.nY)("submissionComments",()=>{const P=(0,h.Kh)({}),I=(0,g.EW)(()=>{const l={};return Object.keys(P).forEach(r=>{const M=P[r],U=M.submission;l[U]||(l[U]=[]),l[U].push(M)}),l});function y(l){Object.assign(P,{[l.id]:l})}function E(l){l.forEach(r=>Object.assign(P,{[r.id]:r}))}function m(l){return C(this,null,function*(){try{const r=yield n.A.addSubmissionComment(l);y(r)}catch(r){throw(0,c.O)().displayError({error:r}),(0,S.vV)(r),r}})}function D(l){return C(this,null,function*(){try{const r=yield n.A.getSubmissionComments(l);E(r)}catch(r){throw(0,c.O)().displayError({error:r}),(0,S.vV)(r),r}})}function u(l){return C(this,null,function*(){try{yield n.A.deleteSubmissionComment(l),delete P[l.comment.id]}catch(r){throw(0,c.O)().displayError({error:r}),(0,S.vV)(r),r}})}function A(l){return C(this,null,function*(){try{const r=yield n.A.editSubmissionComment(l);y(r)}catch(r){throw(0,c.O)().displayError({error:r}),(0,S.vV)(r),r}})}function v(l){return C(this,null,function*(){try{yield n.A.markCommentsAsRead(l)}catch(r){throw(0,c.O)().displayError({error:r}),(0,S.vV)(r),r}})}return{comments:P,commentsBySubmission:I,cache:y,postSubmissionComment:m,loadSubmissionComments:D,deleteSubmissionComment:u,editSubmissionComment:A,markCommentsAsRead:v}})},679808:(q,B,e)=>{e.d(B,{E:()=>D});var s=e(645369),h=e.n(s),g=e(6645),n=e(744056),S=e(361744),c=e(328010),C=e(540888),O=e(777549),P=e(706305),I=e(941271),y=e(823828),E=(u,A,v)=>new Promise((l,r)=>{var M=G=>{try{F(v.next(G))}catch(H){r(H)}},U=G=>{try{F(v.throw(G))}catch(H){r(H)}},F=G=>G.done?l(G.value):Promise.resolve(G.value).then(M,U);F((v=v.apply(u,A)).next())});const m=h()("flat:notifications"),D=(0,g.nY)("notifications",()=>{const u=(0,n.KR)([]),A=(0,n.KR)([]),v=(0,n.KR)(null),l=(0,n.KR)(!0),r=(0,n.Kh)({}),M=(0,n.Kh)({}),U=(0,S.EW)(()=>u.value.length>0),F=(0,S.EW)(()=>u.value.findIndex(d=>!d.seen)>=0),G=(0,S.EW)(()=>u.value.filter(d=>!d.seen).length),H=(0,S.EW)(()=>u.value.filter(d=>d.resolved)),z=(0,S.EW)(()=>l.value||!v.value);function p(d){d.forEach(R=>{R.resolved=!1;const W=u.value.findIndex(oe=>oe.id===R.id);W<0?u.value.push(R):u.value.splice(W,1,R)})}function N(d){v.value=d||null}function V(d){let R=u.value.findIndex(W=>W.id===d.id);R<0&&u.value.unshift(d),R=A.value.findIndex(W=>W.id===d.id),R<0&&(A.value.unshift(d),A.value.length>4&&A.value.pop())}function w(d){if(d.resolved=!1,typeof d.actor=="string"&&r[d.actor]&&(d.actor=r[d.actor]),d.type.startsWith("classroomSubmission")){const W=(0,O.Z)().assignments[d.attachments.classroomAssignment];if(W)d.attachments.classroomAssignment=W;else return d}else if(typeof d.attachments.score=="string"){const R=(0,P.j)(),W=(0,S.EW)(()=>R.scores[d.attachments.score]);if(W.value)d.attachments.score=W.value;else return d}return d.resolved=!0,d}function ee(d){l.value=d}function Z(d){const R=u.value.findIndex(W=>W.id===d.id);R>=0?u.value[R]=d:u.value.unshift(d)}function a(){u.value.forEach(d=>{d.seen=!0})}function f({componentName:d,data:R}){d==="nav"&&(A.value=R)}function _(){F.value&&(c.A.markNotificationsSeen().then(()=>{a()}),(0,I.B)().addExperience("notifications.read"))}function K(d){return new Promise(R=>{const W=[],oe=new Set,te=new Set,le=new Set,ce={},ue=(0,y.k)();if(d.forEach(b=>{var Q;if(!b.dateRelative&&b.date&&(b.dateRelative=(0,C.PI)(b.date)),!b.resolved){if(b.actor.id?ue.cache(b.actor):oe.add(b.actor),b.type.startsWith("classroomSubmission")&&((Q=b.attachments)!=null&&Q.classroomAssignment))le.add(b.attachments.classroomAssignment),ce[b.attachments.classroomAssignment]=b.attachments.classroom;else if(b.attachments.score)if(typeof b.attachments.score=="string")te.add(b.attachments.score);else{const{cache:ne}=(0,P.j)()}}}),te.forEach(b=>{const Q=(0,P.j)(),ne=(0,S.EW)(()=>Q.scores);if(!ne.value[b]){const se=Q.getAndCache(b).then(ie=>{ne.value[ie.id]=ie}).catch(ie=>m(ie));W.push(se)}}),oe.forEach(b=>{if(!(b in r)){const Q=ue.get(b).then(ne=>{Object.assign(r,{[ne.id]:ne})}).catch(ne=>m(ne));W.push(Q)}}),le.size>0){const b=(0,O.Z)();le.forEach(Q=>{if(!(Q in M)){const ne=b.loadAssignment({assignment:Q,classroom:ce[Q]}).then(se=>{Object.assign(M,{[se.id]:se})}).catch(se=>m(se));W.push(ne)}})}Promise.all(W).then(R).catch(R)})}function x(){return E(this,arguments,function*(d={}){var R,W;const oe=!d.componentName;oe&&(d=Object.assign({},d,v.value));try{const te=yield c.A.getNotifications(d);return p(te.data),oe&&((R=te.links.next)!=null&&R.qs)&&N((W=te.links.next)==null?void 0:W.qs),u.value}catch(te){return m("Unable to fetch notifications: %s",te),u.value}})}function X(d){return E(this,null,function*(){ee(!0);const R=yield x(d);return R.length&&(yield K(R),R.forEach(W=>{W.resolved||w(W),Z(W)})),ee(!1),H.value})}function k({componentName:d}){let R;if(d==="nav")R=5;else throw new Error(`Unknown component ${d}`);X({componentName:d,limit:R}).then(W=>{W=W.slice(0,R),f({componentName:d,data:W})}).catch(W=>{m(W)})}function j(d){return E(this,null,function*(){yield c.A.deleteNotification(d);let R=u.value.findIndex(W=>W.id===d);R>=0&&u.value.splice(R,1),R=A.value.findIndex(W=>W.id===d),R>=0&&A.value.splice(R,1)})}function L(d){return E(this,null,function*(){return yield K([d]),w(d),Z(d),d})}function J(d){return E(this,null,function*(){const R=yield L(d);V(R)})}return{notificationsNav:A,loadingNotifications:l,hasNotifications:U,resolvedNotifications:H,infiniteScrollBusy:z,hasUnseenNotifications:F,unseenNotificationsCount:G,markAllAsSeen:_,queryForComponent:k,query:X,deleteNotification:j,getMetaForNotifications:K,getMetaForNotification:L,pushHandleNotification:J}})},705890:(q,B,e)=>{e.d(B,{k:()=>r});var s=e(6645),h=e(744056),g=e(361744),n=e(823139),S=e.n(n),c=e(761387),C=e(130179),O=e(674548),P=e(941271),I=e(459356),y=e(823828),E=Object.defineProperty,m=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,A=(M,U,F)=>U in M?E(M,U,{enumerable:!0,configurable:!0,writable:!0,value:F}):M[U]=F,v=(M,U)=>{for(var F in U||(U={}))D.call(U,F)&&A(M,F,U[F]);if(m)for(var F of m(U))u.call(U,F)&&A(M,F,U[F]);return M},l=(M,U,F)=>new Promise((G,H)=>{var z=V=>{try{N(F.next(V))}catch(w){H(w)}},p=V=>{try{N(F.throw(V))}catch(w){H(w)}},N=V=>V.done?G(V.value):Promise.resolve(V.value).then(z,p);N((F=F.apply(M,U)).next())});const r=(0,s.nY)("collectionsLegacy",()=>{const M=(0,h.KR)({}),U=(0,h.KR)([]),F=(0,h.KR)(null),G=(0,h.KR)(null),H=(0,g.EW)(()=>{if(!U.value||Object.keys(M.value).length===0)return null;const a=v({},M.value);return Object.fromEntries(Object.entries(a).filter(([_])=>!["trash","root"].includes(a[_].type)))}),z=(0,y.k)();function p(a){var f;const _=a._source;delete a._source,M.value[a.id]=a,a.type==="sharedWithMe"?F.value=a:a.type==="trash"&&(G.value=a);for(const K of a.collaborators||[])K.user&&z.cache(K.user);_!=="offline"&&((f=(0,C.I1)())==null||f.addOrUpdateCollection(a))}function N(a){var f,_;p(a),a.type==="regular"&&!((f=U.value)!=null&&f.find(K=>K===a.id))&&((_=U.value)==null||_.unshift(a.id))}function V(a){U.value=[],a.forEach(f=>{N(f)})}function w(a){p(a)}function ee(){return l(this,null,function*(){const a=yield c.A.getDetails("root");p(a);const f=yield c.A.list({parent:a.id,all:!0});V(f.data)})}function Z(a){return l(this,null,function*(){const{target:f,scoreId:_,sharingKey:K}=a;try{yield c.A.addScore({collection:f,score:_,sharingKey:K})}catch(x){(0,I.O)().displayError({error:x});return}(0,I.O)().displayMessage({type:"default",text:O.MR.t("flat:collec.done.addto",{count:1})}),(0,P.B)().addExperience("dashboard.add-to-collection")})}return{collections:M,rootCollections:U,sharedWithMeCollection:F,trashCollection:G,rootCollectionsCompleteObjects:H,cache:w,fetchRootCollections:ee,addScoreToCollection:Z,CACHE:p,SET_ROOT_COLLECTIONS:V,ADD_ROOT_COLLECTION:N}})},761387:(q,B,e)=>{e.d(B,{A:()=>I});var s=e(324074),h=e.n(s),g=e(645369),n=e.n(g),S=e(130179),c=e(550594),C=(y,E,m)=>new Promise((D,u)=>{var A=r=>{try{l(m.next(r))}catch(M){u(M)}},v=r=>{try{l(m.throw(r))}catch(M){u(M)}},l=r=>r.done?D(r.value):Promise.resolve(r.value).then(A,v);l((m=m.apply(y,E)).next())});const O=n()("flat:api"),I={getDetails(y){return C(this,null,function*(){var E;O("collection.getDetails(%s)",y);try{return yield c.A.get(`${c.A.apiv2baseurl}/collections/${y}`)}catch(m){const D=(0,S.I1)();if(!D||h().isAxiosError(m)&&((E=m.response)!=null&&E.status))throw m;try{return yield D.getCollectionById(y)}catch(u){throw O("ERR in get collection: %o",u),new Error("Collection not available offline")}}})},list(){return C(this,arguments,function*({parent:y="root",sort:E="creationDate",direction:m="desc",limit:D=100,next:u=null,all:A=!1,pinned:v=!1}={}){var l;O("collection.list(parent = %s, sort = %s, direction = %s)",y,E,m);try{const r={parent:y,sort:E,direction:m,limit:D,next:u,pinned:v};return A?yield c.A.getAllWithPagination(`${c.A.apiv2baseurl}/collections`,{params:r}):yield c.A.getWithPagination(`${c.A.apiv2baseurl}/collections`,{params:r})}catch(r){const M=(0,S.I1)();if(!M||h().isAxiosError(r)&&((l=r.response)!=null&&l.status))throw r;try{return{data:yield M.listCollections({parent:y,sort:E,direction:m}),links:null}}catch(U){throw O("ERR in list collections: %o",U),new Error("Collection not available offline")}}})},listScores(y){return C(this,arguments,function*({collection:E,sort:m="modificationDate",direction:D="desc",limit:u=25,next:A=null}){var v;u==="max"&&(u=100);try{return yield c.A.getWithPagination(`${c.A.apiv2baseurl}/collections/${E}/scores`,{params:{sort:m,direction:D,next:A,limit:u}})}catch(l){const r=(0,S.I1)();if(!r||h().isAxiosError(l)&&((v=l.response)!=null&&v.status))throw l;try{return{data:yield r.listCollectionsScores({collection:E,sort:m,direction:D}),links:null}}catch(M){throw O("ERR in list collections: %o",M),new Error("Collection not available offline")}}})},create(y,E="private"){return c.A.post(`${c.A.apiv2baseurl}/collections`,{title:y,privacy:E})},update(y,E){return c.A.put(`${c.A.apiv2baseurl}/collections/${y}`,E)},delete(y,E){return c.A.delete(`${c.A.apiv2baseurl}/collections/${y}`,{params:E})},untrash(y){return c.A.post(`${c.A.apiv2baseurl}/collections/${y}/untrash`)},addScore({collection:y,score:E,sharingKey:m}){return c.A.put(`${c.A.apiv2baseurl}/collections/${y}/scores/${E}`,null,{params:{sharingKey:m}})},deleteScore({collection:y,score:E}){return c.A.delete(`${c.A.apiv2baseurl}/collections/${y}/scores/${E}`)},getTrashVisibility(){return c.A.get(`${c.A.apiv2baseurl}/collections/trash/scores/_visibility`)},pin(y){return c.A.put(`${c.A.apiv2baseurl}/collections/${y}/pin`)},unpin(y){return c.A.delete(`${c.A.apiv2baseurl}/collections/${y}/pin`)}}},967409:(q,B,e)=>{e.d(B,{A:()=>g});var s=e(550594);const g={getInfo(){return s.A.get(`${s.A.apiv2baseurl}/billing`)},updateInfo(n){return s.A.put(`${s.A.apiv2baseurl}/billing`,n)},attachStripePaymentMethod(n){return s.A.post(`${s.A.apiv2baseurl}/billing/paymentMeans/stripe`,n)},createStripeSetupIntents(n){return s.A.post(`${s.A.apiv2baseurl}/billing/paymentMeans/stripe/setupIntents`,n)},createStripePaymentIntents(n,S){return s.A.post(`${s.A.apiv2baseurl}/orders/${n}/stripe/paymentIntents`,S)},syncStripePaymentIntents(n){return s.A.post(`${s.A.apiv2baseurl}/orders/${n}/stripe/paymentIntents/sync`,{})},syncStripePaymentIntentsById(n){return s.A.post(`${s.A.apiv2baseurl}/orders/stripe/paymentIntents/${n}/sync`,{})},createSubscription(n){return s.A.post(`${s.A.apiv2baseurl}/subscriptions`,n)},createSubscriptionPaymentIntents(n){return s.A.post(`${s.A.apiv2baseurl}/subscriptions/stripe/paymentIntents`,n)},cancelSubscription(n={}){return s.A.delete(`${s.A.apiv2baseurl}/subscriptions`,{params:n})},resumeSubscription(){return s.A.post(`${s.A.apiv2baseurl}/subscriptions/resume`)},syncSubscription(){return s.A.post(`${s.A.apiv2baseurl}/subscriptions/sync`)},activatePaypalSubscription(n){return s.A.post(`${s.A.apiv2baseurl}/subscriptions/paypal/activate`,n)},createOrder(n){return s.A.post(`${s.A.apiv2baseurl}/orders`,n)},payOrder(n,S){return s.A.post(`${s.A.apiv2baseurl}/orders/${n}/pay/${S}`,{})},syncPaypalOrder(n){return s.A.post(`${s.A.apiv2baseurl}/orders/${n}/paypal/sync`,{})},deletePaymentMean(n){return s.A.delete(`${s.A.apiv2baseurl}/billing/paymentMeans/${n}`)},listPaymentMeans(){return s.A.get(`${s.A.apiv2baseurl}/billing/paymentMeans`)}}},973697:(q,B,e)=>{e.d(B,{B:()=>G});var s=e(303953),h=e(916504),g=e(645369),n=e.n(g),S=e(6645),c=e(744056),C=e(361744),O=e(433514),P=e(185407),I=e(540888),y=e(653154),E=e(674548),m=e(254872),D=e(763939),u=e(973876),A=e(160753),v=e(823828),l=(H,z,p)=>new Promise((N,V)=>{var w=a=>{try{Z(p.next(a))}catch(f){V(f)}},ee=a=>{try{Z(p.throw(a))}catch(f){V(f)}},Z=a=>a.done?N(a.value):Promise.resolve(a.value).then(w,ee);Z((p=p.apply(H,z)).next())});const r=n()("flat:orga"),M=new Date("2000-01-01"),U="teacherSummary.sortProperty",F="teacherSummary.sortDirection",G=(0,S.nY)("eduOrganization",()=>{const H=(0,D.F)(),z=(0,c.KR)(null),p=(0,c.KR)(null),N=(0,C.EW)(()=>{var t;return!!((t=z.value)!=null&&t.locale)}),V=(0,C.EW)(()=>{var t;return((t=z.value)==null?void 0:t.capabilities)||{}}),w=(0,C.EW)(()=>{var t;return((t=V.value)==null?void 0:t.practiceFirst)&&(H.isAdmin||H.isTeacher)||!1}),ee=(0,c.KR)(null),Z=(0,c.KR)([]),a=(0,c.KR)(-25),f=(0,c.KR)(0),_=(0,c.KR)([]),K=(0,c.KR)(h.A.get(U)||"username"),x=(0,c.KR)(h.A.get(F)||"asc"),X=(0,c.KR)(null),k=(0,C.EW)(()=>Z.value.slice(a.value,a.value+25)),j=(0,C.EW)(()=>{const t=K.value,o=x.value==="desc"?-1:1;let i=[..._.value];return i=i.sort(($,Y)=>{let re,ae;return["lastname","firstname","username"].includes(t)?(re=$.teacher[t],ae=Y.teacher[t]):t==="lastActivityDate"?(re=$.teacher[t]||M,ae=Y.teacher[t]||M):(re=$[t]||0,ae=Y[t]||0),re<ae?-1*o:re>ae?o:0}),i});function L(){return l(this,null,function*(){const t=yield P.A.get();return z.value=t,r(t),t})}function J(){return l(this,null,function*(){const t=yield P.A.resetOrganizationSignupCode();return z.value=t,r(t),t})}function d(){return l(this,null,function*(){const t=(0,u.V)(),o=(0,A.C)();try{r("sync google classroom profile");const i=yield o.getClassroomMe();r("got gc me: %o",i),H.account.classRole==="student"&&i.profile&&i.profile.permissions&&i.profile.permissions.createCourse&&(r("verified teacher, fetching profile"),(0,m.jp)({fetchOrganization:!1}));const Y=h.A.get("redirect.next-gclassroom");h.A.remove("redirect.next-gclassroom"),typeof Y=="string"?(r("got GC pending redirect: %s",Y),window.location=Y):(r("refreshing classes after fetching GC"),t.loadClasses({updateLoading:!1,archived:!0})),h.A.remove("redirect.next-gclassroom")}catch(i){i!=null&&i.data&&i.data.message==="unauthorized_client"?h.A.get("google.classroom.failures")?h.A.remove("google.classroom.failures"):H.account.logas||(h.A.set("google.classroom.failures",1),window.location=`/auth/google?classroom=true&email=${H.account.googleDetails.email}`):i.response||(0,y.vV)(i)}})}function R(){return l(this,null,function*(){r("sync msft profile");try{return O.A.getMe()}catch(t){t.response||(0,y.vV)(t)}return null})}function W(){return l(this,null,function*(){const t=(0,C.EW)(()=>z.value);t.value&&(t.value.googleClassroom&&(yield d()),t.value.azureGraph&&(yield R()))})}function oe(){return l(this,null,function*(){const t=s.A.domain;if(typeof t!="string")return null;if(typeof __VUE_SSR_CONTEXT__!="undefined"&&__VUE_SSR_CONTEXT__.params){const i=__VUE_SSR_CONTEXT__.params.organization;return p.value=i,i}const o=yield P.A.getByDomain(t);return p.value=o,o})}function te(t){return l(this,null,function*(){z.value=yield P.A.updateOrganization(t)})}function le(){return l(this,null,function*(){const t=yield P.A.getLicenseExpDate();return X.value=t,t})}function ce(t){return l(this,null,function*(){const o=yield P.A.getUserCount(t);return f.value=o,o})}function ue(t){t.forEach(o=>{o.lastActivityDate?(o.lastActivityDateIso=o.lastActivityDate.toString(),o.lastActivityDate=new Date(o.lastActivityDate),o.lastActivityDateFormatted=(0,I.r6)(o.lastActivityDate),o.lastActivityDateRelative=(0,I.eB)(o.lastActivityDate)):o.lastActivityDateRelative=E.MR.t("edu:settings.people.not-active-yet"),o.organizationRoleDisplay=E.MR.t(`edu:organization.roles.${o.organizationRole}`),o.license&&(o.license.expirationDate&&(o.license.expirationDate=new Date(o.license.expirationDate)),(!o.license.expirationDate||o.license.expirationDate<new Date)&&(o.license.expirationDate=null),o.license.expirationDate&&(o.license.expirationDateRelative=(0,I.KS)(o.license.expirationDate)))}),Z.value=t}function b(t){ee.value=t||null}function Q(t){return l(this,arguments,function*({params:o,isNext:i}){var $;if(i)if(a.value+25<Z.value.length)a.value+=25;else{const Y=yield P.A.getOrganizationUsers(Object.assign({},o,ee.value)),re=(0,v.k)();Y.data.forEach(ae=>re.cache(ae)),ue([...Z.value,...Y.data]),b(($=Y.links.next)==null?void 0:$.qs),a.value+=25}else a.value-=25})}function ne(t){return l(this,arguments,function*({params:o,cacheAllObjects:i}){var $,Y;if(!i)return(yield P.A.getOrganizationUsersIds(Object.assign({},o,{onlyIds:!0}))).map(({id:he})=>he);const re=[];let ae=!0,pe;for(;ae;){const me=yield P.A.getOrganizationUsers(Object.assign({limit:500},o,pe)),he=(0,v.k)();me.data.forEach(Ae=>he.cache(Ae)),re.push(...me.data.map(({id:Ae})=>Ae)),(Y=($=me.links)==null?void 0:$.next)!=null&&Y.qs?pe=me.links.next.qs:(pe=void 0,ae=!1)}return re})}function se(){b(),a.value=-25,ue([])}function ie(t,o){return l(this,null,function*(){yield P.A.updateOrganizationUsers(t,o)})}function de(t,o){return l(this,null,function*(){yield P.A.deleteOrganizationUsers(t,o)})}function ve(t){return l(this,null,function*(){const o=yield P.A.getOrganizationWithCode(t);return z.value=o,o})}function fe(){return l(this,null,function*(){return P.A.getAdminInfo()})}function ye(){return l(this,null,function*(){yield P.A.deleteOwnOrganization()})}function Ee(t){t.forEach(o=>{o.teacher.lastActivityDate?o.teacher.lastActivityDateRelative=(0,I.eB)(o.teacher.lastActivityDate):o.teacher.lastActivityDateRelative=E.MR.t("edu:settings.people.not-active-yet")}),_.value=t}function _e(){return l(this,null,function*(){_.value=[];const t=yield P.A.getSummaryByTeacher();return Ee(t),t})}function T(t){K.value===t?x.value=x.value==="asc"?"desc":"asc":(K.value=t,x.value="asc"),h.A.set(U,K.value),h.A.set(F,x.value)}return{organization:z,organizationUsers:k,totalUserCount:f,startIndex:a,summaryByTeacher:j,domainOrganization:p,isLocaleOverridenByOrganization:N,organizationCapabilities:V,hasPracticeFirstExport:w,getOrganization:L,updateOrganization:te,getSummaryByTeacher:_e,getOrgaUsers:Q,clearOrgaUsersCursor:se,getLicenseExpDate:le,getUserCount:ce,getOrgaUsersIds:ne,toggleSummarySort:T,resetOrganizationSignupCode:J,getAdminInfo:fe,getOrganizationWithCode:ve,deleteOwnOrganization:ye,updateOrganizationUsers:ie,deleteOrganizationUsers:de,syncIdpProfiles:W,getDomainOrganization:oe}})}}]);})();


//# debugId=8e81cf5d-b84f-5b7a-845a-35e6a5f49451
